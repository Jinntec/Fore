/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const e=!(window.ShadyDOM&&window.ShadyDOM.inUse);let t,n;function r(n){t=(!n||!n.shimcssproperties)&&(e||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(n=window.ShadyCSS.cssBuild);const i=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?t=window.ShadyCSS.nativeCss:window.ShadyCSS?(r(window.ShadyCSS),window.ShadyCSS=void 0):r(window.WebComponents&&window.WebComponents.flags);const a=t;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class s{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function o(e){return l(function(e){let t=new s;t.start=0,t.end=e.length;let n=t;for(let r=0,i=e.length;r<i;r++)if(e[r]===p){n.rules||(n.rules=[]);let e=n,t=e.rules[e.rules.length-1]||null;n=new s,n.start=r+1,n.parent=e,n.previous=t,e.rules.push(n)}else e[r]===d&&(n.end=r+1,n=n.parent||t);return t}(e=e.replace(h.comments,"").replace(h.port,"")),e)}function l(e,t){let n=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=n.trim(),e.parent){let r=e.previous?e.previous.end:e.parent.start;n=t.substring(r,e.start-1),n=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(){let e=arguments[1],t=6-e.length;for(;t--;)e="0"+e;return"\\"+e}))}(n),n=n.replace(h.multipleSpaces," "),n=n.substring(n.lastIndexOf(";")+1);let i=e.parsedSelector=e.selector=n.trim();e.atRule=0===i.indexOf(g),e.atRule?0===i.indexOf(f)?e.type=u.MEDIA_RULE:i.match(h.keyframesRule)&&(e.type=u.KEYFRAMES_RULE,e.keyframesName=e.selector.split(h.multipleSpaces).pop()):0===i.indexOf(m)?e.type=u.MIXIN_RULE:e.type=u.STYLE_RULE}let r=e.rules;if(r)for(let e,n=0,i=r.length;n<i&&(e=r[n]);n++)l(e,t);return e}function c(e,t,n=""){let r="";if(e.cssText||e.rules){let n=e.rules;if(n&&!function(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&0===t.selector.indexOf(m)}(n))for(let e,i=0,a=n.length;i<a&&(e=n[i]);i++)r=c(e,t,r);else r=t?e.cssText:function(e){return function(e){return e.replace(h.mixinApply,"").replace(h.varApply,"")}(e=function(e){return e.replace(h.customProp,"").replace(h.mixinProp,"")}(e))}(e.cssText),r=r.trim(),r&&(r="  "+r+"\n")}return r&&(e.selector&&(n+=e.selector+" "+p+"\n"),n+=r,e.selector&&(n+=d+"\n\n")),n}const u={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},p="{",d="}",h={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},m="--",f="@media",g="@",y=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,b=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,w=/@media\s(.*)/,v=new Set;function x(e){const t=e.textContent;if(!v.has(t)){v.add(t);const e=document.createElement("style");e.setAttribute("shady-unscoped",""),e.textContent=t,document.head.appendChild(e)}}function A(e){return e.hasAttribute("shady-unscoped")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function _(e,t){return e?("string"==typeof e&&(e=o(e)),t&&C(e,t),c(e,a)):""}function E(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=o(e.textContent)),e.__cssRules||null}function C(e,t,n,r){if(!e)return;let i=!1,a=e.type;if(r&&a===u.MEDIA_RULE){let t=e.selector.match(w);t&&(window.matchMedia(t[1]).matches||(i=!0))}a===u.STYLE_RULE?t(e):n&&a===u.KEYFRAMES_RULE?n(e):a===u.MIXIN_RULE&&(i=!0);let s=e.rules;if(s&&!i)for(let e,i=0,a=s.length;i<a&&(e=s[i]);i++)C(e,t,n,r)}function N(e,t){let n=e.indexOf("var(");if(-1===n)return t(e,"","","");let r=function(e,t){let n=0;for(let r=t,i=e.length;r<i;r++)if("("===e[r])n++;else if(")"===e[r]&&0==--n)return r;return-1}(e,n+3),i=e.substring(n+4,r),a=e.substring(0,n),s=N(e.substring(r+1),t),o=i.indexOf(",");return-1===o?t(a,i.trim(),"",s):t(a,i.substring(0,o).trim(),i.substring(o+1).trim(),s)}window.ShadyDOM&&window.ShadyDOM.wrap;function T(e){if(void 0!==n)return n;if(void 0===e.__cssBuild){const t=e.getAttribute("css-build");if(t)e.__cssBuild=t;else{const t=function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;if(t instanceof Comment){const e=t.textContent.trim().split(":");if("css-build"===e[0])return e[1]}return""}(e);""!==t&&function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),e.__cssBuild=t}}return e.__cssBuild||""}function k(e){return""!==T(e)}function I(e,t){for(let n in t)null===n?e.style.removeProperty(n):e.style.setProperty(n,t[n])}function S(e,t){const n=window.getComputedStyle(e).getPropertyValue(t);return n?n.trim():""}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const B=/;\s*/m,O=/^\s*(initial)|(inherit)\s*$/,F=/\s*!important/;class P{constructor(){this._map={}}set(e,t){e=e.trim(),this._map[e]={properties:t,dependants:{}}}get(e){return e=e.trim(),this._map[e]||null}}let D=null;class R{constructor(){this._currentElement=null,this._measureElement=null,this._map=new P}detectMixin(e){return function(e){const t=b.test(e)||y.test(e);return b.lastIndex=0,y.lastIndex=0,t}(e)}gatherStyles(t){const n=function(t){const n=[],r=t.querySelectorAll("style");for(let t=0;t<r.length;t++){const i=r[t];A(i)?e||(x(i),i.parentNode.removeChild(i)):(n.push(i.textContent),i.parentNode.removeChild(i))}return n.join("").trim()}(t.content);if(n){const e=document.createElement("style");return e.textContent=n,t.content.insertBefore(e,t.content.firstChild),e}return null}transformTemplate(e,t){void 0===e._gatheredStyle&&(e._gatheredStyle=this.gatherStyles(e));const n=e._gatheredStyle;return n?this.transformStyle(n,t):null}transformStyle(e,t=""){let n=E(e);return this.transformRules(n,t),e.textContent=_(n),n}transformCustomStyle(e){let t=E(e);return C(t,(e=>{":root"===e.selector&&(e.selector="html"),this.transformRule(e)})),e.textContent=_(t),t}transformRules(e,t){this._currentElement=t,C(e,(e=>{this.transformRule(e)})),this._currentElement=null}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),":root"===e.selector&&(e.selector=":host > *")}transformCssText(e,t){return e=e.replace(y,((e,n,r,i)=>this._produceCssProperties(e,n,r,i,t))),this._consumeCssProperties(e,t)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let t=e;for(;t.parent;)t=t.parent;const n={};let r=!1;return C(t,(t=>{r=r||t===e,r||t.selector===e.selector&&Object.assign(n,this._cssTextToMap(t.parsedCssText))})),n}_consumeCssProperties(e,t){let n=null;for(;n=b.exec(e);){let r=n[0],i=n[1],a=n.index,s=a+r.indexOf("@apply"),o=a+r.length,l=e.slice(0,s),c=e.slice(o),u=t?this._fallbacksFromPreviousRules(t):{};Object.assign(u,this._cssTextToMap(l));let p=this._atApplyToCssProperties(i,u);e=`${l}${p}${c}`,b.lastIndex=a+p.length}return e}_atApplyToCssProperties(e,t){e=e.replace(B,"");let n=[],r=this._map.get(e);if(r||(this._map.set(e,{}),r=this._map.get(e)),r){let i,a,s;this._currentElement&&(r.dependants[this._currentElement]=!0);const o=r.properties;for(i in o)s=t&&t[i],a=[i,": var(",e,"_-_",i],s&&a.push(",",s.replace(F,"")),a.push(")"),F.test(o[i])&&a.push(" !important"),n.push(a.join(""))}return n.join("; ")}_replaceInitialOrInherit(e,t){let n=O.exec(t);return n&&(t=n[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),t}_cssTextToMap(e,t=!1){let n,r,i=e.split(";"),a={};for(let e,s,o=0;o<i.length;o++)e=i[o],e&&(s=e.split(":"),s.length>1&&(n=s[0].trim(),r=s.slice(1).join(":"),t&&(r=this._replaceInitialOrInherit(n,r)),a[n]=r));return a}_invalidateMixinEntry(e){if(D)for(let t in e.dependants)t!==this._currentElement&&D(t)}_produceCssProperties(e,t,n,r,i){if(n&&N(n,((e,t)=>{t&&this._map.get(t)&&(r=`@apply ${t};`)})),!r)return e;let a=this._consumeCssProperties(""+r,i),s=e.slice(0,e.indexOf("--")),o=this._cssTextToMap(a,!0),l=o,c=this._map.get(t),u=c&&c.properties;u?l=Object.assign(Object.create(u),o):this._map.set(t,l);let p,d,h=[],m=!1;for(p in l)d=o[p],void 0===d&&(d="initial"),u&&!(p in u)&&(m=!0),h.push(`${t}_-_${p}: ${d}`);return m&&this._invalidateMixinEntry(c),c&&(c.properties=l),n&&(s=`${e};${s}`),`${s}${h.join("; ")};`}}R.prototype.detectMixin=R.prototype.detectMixin,R.prototype.transformStyle=R.prototype.transformStyle,R.prototype.transformCustomStyle=R.prototype.transformCustomStyle,R.prototype.transformRules=R.prototype.transformRules,R.prototype.transformRule=R.prototype.transformRule,R.prototype.transformTemplate=R.prototype.transformTemplate,R.prototype._separator="_-_",Object.defineProperty(R.prototype,"invalidCallback",{get:()=>D,set(e){D=e}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const M={},L="_applyShimCurrentVersion",$="_applyShimNextVersion",U="_applyShimValidatingVersion",H=Promise.resolve();
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function G(e){let t=M[e];t&&function(e){e[L]=e[L]||0,e[U]=e[U]||0,e[$]=(e[$]||0)+1}(t)}function j(e){return e[L]===e[$]}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let X,q=null,V=window.HTMLImports&&window.HTMLImports.whenReady||null;function z(e){requestAnimationFrame((function(){V?V(e):(q||(q=new Promise((e=>{X=e})),"complete"===document.readyState?X():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&X()}))),q.then((function(){e&&e()})))}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Y="__shadyCSSCachedStyle";let K=null,J=null;class W{constructor(){this.customStyles=[],this.enqueued=!1,z((()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()}))}enqueueDocumentValidation(){!this.enqueued&&J&&(this.enqueued=!0,z(J))}addCustomStyle(e){e.__seenByShadyCSS||(e.__seenByShadyCSS=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[Y])return e[Y];let t;return t=e.getStyle?e.getStyle():e,t}processStyles(){const e=this.customStyles;for(let t=0;t<e.length;t++){const n=e[t];if(n[Y])continue;const r=this.getStyleForCustomStyle(n);if(r){const e=r.__appliedElement||r;K&&K(e),n[Y]=e}}return e}}W.prototype.addCustomStyle=W.prototype.addCustomStyle,W.prototype.getStyleForCustomStyle=W.prototype.getStyleForCustomStyle,W.prototype.processStyles=W.prototype.processStyles,Object.defineProperties(W.prototype,{transformCallback:{get:()=>K,set(e){K=e}},validateCallback:{get:()=>J,set(e){let t=!1;J||(t=!0),J=e,t&&this.enqueueDocumentValidation()}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Q=new R;class Z{constructor(){this.customStyleInterface=null,Q.invalidCallback=G}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{Q.transformCustomStyle(e)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame((()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()}))})}prepareTemplate(e,t){if(this.ensure(),k(e))return;M[t]=e;let n=Q.transformTemplate(e,t);e._styleAst=n}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let t=0;t<e.length;t++){let n=e[t],r=this.customStyleInterface.getStyleForCustomStyle(n);r&&Q.transformCustomStyle(r)}this.customStyleInterface.enqueued=!1}}styleSubtree(e,t){if(this.ensure(),t&&I(e,t),e.shadowRoot){this.styleElement(e);let t=e.shadowRoot.children||e.shadowRoot.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}else{let t=e.children||e.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}}styleElement(e){this.ensure();let{is:t}=function(e){let t=e.localName,n="",r="";return t?t.indexOf("-")>-1?n=t:(r=t,n=e.getAttribute&&e.getAttribute("is")||""):(n=e.is,r=e.extends),{is:n,typeExtension:r}}(e),n=M[t];if((!n||!k(n))&&n&&!j(n)){(function(e){return!j(e)&&e[U]===e[$]})(n)||(this.prepareTemplate(n,t),function(e){e[U]=e[$],e._validating||(e._validating=!0,H.then((function(){e[L]=e[$],e._validating=!1})))}(n));let r=e.shadowRoot;if(r){let e=r.querySelector("style");e&&(e.__cssRules=n._styleAst,e.textContent=_(n._styleAst))}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const t=new Z;let r=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(e,n,r){t.flushCustomStyles(),t.prepareTemplate(e,n)},prepareTemplateStyles(e,t,n){window.ShadyCSS.prepareTemplate(e,t,n)},prepareTemplateDom(e,t){},styleSubtree(e,n){t.flushCustomStyles(),t.styleSubtree(e,n)},styleElement(e){t.flushCustomStyles(),t.styleElement(e)},styleDocument(e){t.flushCustomStyles(),t.styleDocument(e)},getComputedStyleValue:(e,t)=>S(e,t),flushCustomStyles(){t.flushCustomStyles()},nativeCss:a,nativeShadow:e,cssBuild:n,disableRuntime:i},r&&(window.ShadyCSS.CustomStyleInterface=r)}window.ShadyCSS.ApplyShim=Q,
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(e,t){return e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ee,te,ne=/(url\()([^)]*)(\))/g,re=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function ie(e,t){if(e&&re.test(e))return e;if("//"===e)return e;if(void 0===ee){ee=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",ee="http://a/c%20d"===e.href}catch(e){}}if(t||(t=document.baseURI||window.location.href),ee)try{return new URL(e,t).href}catch(t){return e}return te||(te=document.implementation.createHTMLDocument("temp"),te.base=te.createElement("base"),te.head.appendChild(te.base),te.anchor=te.createElement("a"),te.body.appendChild(te.anchor)),te.base.href=t,te.anchor.href=e,te.anchor.href||e}function ae(e,t){return e.replace(ne,(function(e,n,r,i){return n+"'"+ie(r.replace(/["']/g,""),t)+"'"+i}))}function se(e){return e.substring(0,e.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const oe=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const le=oe&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch(e){return!1}})();let ce=window.Polymer&&window.Polymer.rootPath||se(document.baseURI||window.location.href),ue=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,pe=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,de=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,he=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,me=window.Polymer&&window.Polymer.legacyOptimizations||!1,fe=window.Polymer&&window.Polymer.legacyWarnings||!1,ge=window.Polymer&&window.Polymer.syncInitialRender||!1,ye=window.Polymer&&window.Polymer.legacyUndefined||!1,be=window.Polymer&&window.Polymer.orderedComputed||!1,we=window.Polymer&&window.Polymer.removeNestedTemplates||!1,ve=window.Polymer&&window.Polymer.fastDomIf||!1,xe=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,Ae=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,_e=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,Ee=0;const Ce=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let n=Ee++;return function(r){let i=r.__mixinSet;if(i&&i[n])return r;let a=t,s=a.get(r);if(!s){s=e(r),a.set(r,s);let t=Object.create(s.__mixinSet||i||null);t[n]=!0,s.__mixinSet=t}return s}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Ne={},Te={};function ke(e,t){Ne[e]=Te[e.toLowerCase()]=t}function Ie(e){return Ne[e]||Te[e.toLowerCase()]}class Se extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let n=Ie(e);return n&&t?n.querySelector(t):n}return null}attributeChangedCallback(e,t,n,r){t!==n&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=ie(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=se(t)}return this.__assetpath}register(e){if(e=e||this.id){if(de&&void 0!==Ie(e))throw ke(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,ke(e,this),this.querySelector("style")}}}Se.prototype.modules=Ne,customElements.define("dom-module",Se);function Be(e){return Se.import(e)}function Oe(e){const t=ae((e.body?e.body:e).textContent,e.baseURI),n=document.createElement("style");return n.textContent=t,n}function Fe(e){const t=e.trim().split(/\s+/),n=[];for(let e=0;e<t.length;e++)n.push(...Pe(t[e]));return n}function Pe(e){const t=Be(e);if(!t)return[];if(void 0===t._styles){const e=[];e.push(...Re(t));const n=t.querySelector("template");n&&e.push(...De(n,t.assetpath)),t._styles=e}return t._styles}function De(e,t){if(!e._styles){const n=[],r=e.content.querySelectorAll("style");for(let e=0;e<r.length;e++){let i=r[e],a=i.getAttribute("include");a&&n.push(...Fe(a).filter((function(e,t,n){return n.indexOf(e)===t}))),t&&(i.textContent=ae(i.textContent,t)),n.push(i)}e._styles=n}return e._styles}function Re(e){const t=[],n=e.querySelectorAll("link[rel=import][type~=css]");for(let e=0;e<n.length;e++){let r=n[e];if(r.import){const e=r.import,n=r.hasAttribute("shady-unscoped");if(n&&!e._unscopedStyle){const t=Oe(e);t.setAttribute("shady-unscoped",""),e._unscopedStyle=t}else e._style||(e._style=Oe(e));t.push(n?e._unscopedStyle:e._style)}}return t}function Me(e){let t=Be(e);if(t&&void 0===t._cssText){let e=function(e){let t="",n=Re(e);for(let e=0;e<n.length;e++)t+=n[e].textContent;return t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(t),n=t.querySelector("template");n&&(e+=function(e,t){let n="";const r=De(e,t);for(let e=0;e<r.length;e++){let t=r[e];t.parentNode&&t.parentNode.removeChild(t),n+=t.textContent}return n}(n,t.assetpath)),t._cssText=e||null}return t&&t._cssText||""}const Le=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/;function $e(e){return e.indexOf(".")>=0}function Ue(e){let t=e.indexOf(".");return-1===t?e:e.slice(0,t)}function He(e,t){return 0===e.indexOf(t+".")}function Ge(e,t){return 0===t.indexOf(e+".")}function je(e,t,n){return t+n.slice(e.length)}function Xe(e){if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=e[n].toString().split(".");for(let e=0;e<r.length;e++)t.push(r[e])}return t.join(".")}return e}function qe(e){return Array.isArray(e)?Xe(e).split("."):e.toString().split(".")}function Ve(e,t,n){let r=e,i=qe(t);for(let e=0;e<i.length;e++){if(!r)return;r=r[i[e]]}return n&&(n.path=i.join(".")),r}function ze(e,t,n){let r=e,i=qe(t),a=i[i.length-1];if(i.length>1){for(let e=0;e<i.length-1;e++){if(r=r[i[e]],!r)return}r[a]=n}else r[t]=n;return i.join(".")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Ye={},Ke=/-[a-z]/g,Je=/([A-Z])/g;function We(e){return Ye[e]||(Ye[e]=e.indexOf("-")<0?e:e.replace(Ke,(e=>e[1].toUpperCase())))}function Qe(e){return Ye[e]||(Ye[e]=e.replace(Je,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Ze=0,et=0,tt=[],nt=0,rt=!1,it=document.createTextNode("");new window.MutationObserver((function(){rt=!1;const e=tt.length;for(let t=0;t<e;t++){let e=tt[t];if(e)try{e()}catch(e){setTimeout((()=>{throw e}))}}tt.splice(0,e),et+=e})).observe(it,{characterData:!0});const at={after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},st={run:e=>(rt||(rt=!0,it.textContent=nt++),tt.push(e),Ze++),cancel(e){const t=e-et;if(t>=0){if(!tt[t])throw new Error("invalid async handle: "+e);tt[t]=null}}},ot=st,lt=Ce((e=>class extends e{static createProperties(e){const t=this.prototype;for(let n in e)n in t||t._createPropertyAccessor(n)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,n){let r=this.__data[e],i=this._shouldPropertyChange(e,t,r);return i&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=r),this.__data[e]=t,this.__dataPending[e]=t),i}_isPropertyPending(e){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,ot.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())})))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const e=this.__data,t=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(e,t,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,n)),this.__dataCounter--}_shouldPropertiesChange(e,t,n){return Boolean(t)}_propertiesChanged(e,t,n){}_shouldPropertyChange(e,t,n){return n!==t&&(n==n||t==t)}attributeChangedCallback(e,t,n,r){t!==n&&this._attributeToProperty(e,n),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,n,r)}_attributeToProperty(e,t,n){if(!this.__serializing){const r=this.__dataAttributes,i=r&&r[e]||e;this[i]=this._deserializeValue(t,n||this.constructor.typeForProperty(i))}}_propertyToAttribute(e,t,n){this.__serializing=!0,n=arguments.length<3?this[e]:n,this._valueToNodeAttribute(this,n,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,n){const r=this._serializeValue(t);"class"!==n&&"name"!==n&&"slot"!==n||(e=Le(e)),void 0===r?e.removeAttribute(n):e.setAttribute(n,r)}_serializeValue(e){return"boolean"==typeof e?e?"":void 0:null!=e?e.toString():void 0}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}})),ct={};let ut=HTMLElement.prototype;for(;ut;){let e=Object.getOwnPropertyNames(ut);for(let t=0;t<e.length;t++)ct[e[t]]=!0;ut=Object.getPrototypeOf(ut)}const pt=Ce((e=>{const t=lt(e);return class extends t{static createPropertiesForAttributes(){let e=this.observedAttributes;for(let t=0;t<e.length;t++)this.prototype._createPropertyAccessor(We(e[t]))}static attributeNameForProperty(e){return Qe(e)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const n=this;n.hasAttribute(e)||this._valueToNodeAttribute(n,t,e)}_serializeValue(e){if("object"==typeof e){if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}}return super._serializeValue(e)}_deserializeValue(e,t){let n;switch(t){case Object:try{n=JSON.parse(e)}catch(t){n=e}break;case Array:try{n=JSON.parse(e)}catch(e){n=null}break;case Date:n=isNaN(e)?String(e):Number(e),n=new Date(n);break;default:n=super._deserializeValue(e,t)}return n}_definePropertyAccessor(e,t){!function(e,t){if(!ct[t]){let n=e[t];void 0!==n&&(e.__data?e._setPendingProperty(t,n):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=n))}}(this,e),super._definePropertyAccessor(e,t)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}})),dt={"dom-if":!0,"dom-repeat":!0};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let ht=!1,mt=!1;function ft(e){(function(){if(!ht){ht=!0;const e=document.createElement("textarea");e.placeholder="a",mt=e.placeholder===e.textContent}return mt})()&&"textarea"===e.localName&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function gt(e){let t=e.getAttribute("is");if(t&&dt[t]){let n=e;for(n.removeAttribute("is"),e=n.ownerDocument.createElement(t),n.parentNode.replaceChild(e,n),e.appendChild(n);n.attributes.length;)e.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return e}function yt(e,t){let n=t.parentInfo&&yt(e,t.parentInfo);if(!n)return e;for(let e=n.firstChild,r=0;e;e=e.nextSibling)if(t.parentIndex===r++)return e}function bt(e,t,n,r){r.id&&(t[r.id]=n)}function wt(e,t,n){if(n.events&&n.events.length)for(let r,i=0,a=n.events;i<a.length&&(r=a[i]);i++)e._addMethodEventListenerToNode(t,r.name,r.value,e)}function vt(e,t,n,r){n.templateInfo&&(t._templateInfo=n.templateInfo,t._parentTemplateInfo=r)}const xt=Ce((e=>class extends e{static _parseTemplate(e,t){if(!e._templateInfo){let n=e._templateInfo={};n.nodeInfoList=[],n.nestedTemplate=Boolean(t),n.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,n,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,n){return this._parseTemplateNode(e.content,t,n)}static _parseTemplateNode(e,t,n){let r=!1,i=e;return"template"!=i.localName||i.hasAttribute("preserve-content")?"slot"===i.localName&&(t.hasInsertionPoint=!0):r=this._parseTemplateNestedTemplate(i,t,n)||r,ft(i),i.firstChild&&this._parseTemplateChildNodes(i,t,n),i.hasAttributes&&i.hasAttributes()&&(r=this._parseTemplateNodeAttributes(i,t,n)||r),r||n.noted}static _parseTemplateChildNodes(e,t,n){if("script"!==e.localName&&"style"!==e.localName)for(let r,i=e.firstChild,a=0;i;i=r){if("template"==i.localName&&(i=gt(i)),r=i.nextSibling,i.nodeType===Node.TEXT_NODE){let n=r;for(;n&&n.nodeType===Node.TEXT_NODE;)i.textContent+=n.textContent,r=n.nextSibling,e.removeChild(n),n=r;if(t.stripWhiteSpace&&!i.textContent.trim()){e.removeChild(i);continue}}let s={parentIndex:a,parentInfo:n};this._parseTemplateNode(i,t,s)&&(s.infoIndex=t.nodeInfoList.push(s)-1),i.parentNode&&a++}}static _parseTemplateNestedTemplate(e,t,n){let r=e,i=this._parseTemplate(r,t);return(i.content=r.content.ownerDocument.createDocumentFragment()).appendChild(r.content),n.templateInfo=i,!0}static _parseTemplateNodeAttributes(e,t,n){let r=!1,i=Array.from(e.attributes);for(let a,s=i.length-1;a=i[s];s--)r=this._parseTemplateNodeAttribute(e,t,n,a.name,a.value)||r;return r}static _parseTemplateNodeAttribute(e,t,n,r,i){return"on-"===r.slice(0,3)?(e.removeAttribute(r),n.events=n.events||[],n.events.push({name:r.slice(3),value:i}),!0):"id"===r&&(n.id=i,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e,t){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let n=(t=t||this.constructor._parseTemplate(e)).nodeInfoList,r=t.content||e.content,i=document.importNode(r,!0);i.__noInsertionPoint=!t.hasInsertionPoint;let a=i.nodeList=new Array(n.length);i.$={};for(let e,r=0,s=n.length;r<s&&(e=n[r]);r++){let n=a[r]=yt(i,e);bt(0,i.$,n,e),vt(0,n,e,t),wt(this,n,e)}return i}_addMethodEventListenerToNode(e,t,n,r){let i=function(e,t,n){return e=e._methodHost||e,function(t){e[n]&&e[n](t,t.detail)}}(r=r||e,0,n);return this._addEventListenerToNode(e,t,i),i}_addEventListenerToNode(e,t,n){e.addEventListener(t,n)}_removeEventListenerFromNode(e,t,n){e.removeEventListener(t,n)}}));
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let At=0;const _t=[],Et={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Ct=/[A-Z]/;function Nt(e,t,n){let r=e[t];if(r){if(!e.hasOwnProperty(t)&&(r=e[t]=Object.create(e[t]),n))for(let e in r){let t=r[e],n=r[e]=Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[e]}}else r=e[t]={};return r}function Tt(e,t,n,r,i,a){if(t){let s=!1;const o=At++;for(let l in n){let c=t[i?Ue(l):l];if(c)for(let t,u=0,p=c.length;u<p&&(t=c[u]);u++)t.info&&t.info.lastRun===o||i&&!It(l,t.trigger)||(t.info&&(t.info.lastRun=o),t.fn(e,l,n,r,t.info,i,a),s=!0)}return s}return!1}function kt(e,t,n,r,i,a,s,o){let l=!1,c=t[s?Ue(r):r];if(c)for(let t,u=0,p=c.length;u<p&&(t=c[u]);u++)t.info&&t.info.lastRun===n||s&&!It(r,t.trigger)||(t.info&&(t.info.lastRun=n),t.fn(e,r,i,a,t.info,s,o),l=!0);return l}function It(e,t){if(t){let n=t.name;return n==e||!(!t.structured||!He(n,e))||!(!t.wildcard||!Ge(n,e))}return!0}function St(e,t,n,r,i){let a="string"==typeof i.method?e[i.method]:i.method,s=i.property;a?a.call(e,e.__data[s],r[s]):i.dynamicFn}function Bt(e,t,n){let r=Ue(t);if(r!==t){return Ot(e,Qe(r)+"-changed",n[t],t),!0}return!1}function Ot(e,t,n,r){let i={value:n,queueProperty:!0};r&&(i.path=r),Le(e).dispatchEvent(new CustomEvent(t,{detail:i}))}function Ft(e,t,n,r,i,a){let s=(a?Ue(t):t)!=t?t:null,o=s?Ve(e,s):e.__data[t];s&&void 0===o&&(o=n[t]),Ot(e,i.eventName,o,s)}function Pt(e,t,n,r,i){let a=e.__data[t];ue&&(a=ue(a,i.attrName,"attribute",e)),e._propertyToAttribute(t,i.attrName,a)}function Dt(e,t,n,r){let i=e[Et.COMPUTE];if(i)if(be){At++;const a=function(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const n=e[Et.COMPUTE];let r,{counts:i,ready:a,total:s}=function(e){const t=e.__computeInfo,n={},r=e[Et.COMPUTE],i=[];let a=0;for(let e in t){const r=t[e];a+=n[e]=r.args.filter((e=>!e.literal)).length+(r.dynamicFn?1:0)}for(let e in r)t[e]||i.push(e);return{counts:n,ready:i,total:a}}(e);for(;r=a.shift();){t.set(r,t.size);const e=n[r];e&&e.forEach((e=>{const t=e.info.methodInfo;--s,0==--i[t]&&a.push(t)}))}e.constructor.__orderedComputedDeps=t}return t}(e),s=[];for(let e in t)Mt(e,i,s,a,r);let o;for(;o=s.shift();)Lt(e,"",t,n,o)&&Mt(o.methodInfo,i,s,a,r);Object.assign(n,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null}else{let a=t;for(;Tt(e,i,a,n,r);)Object.assign(n,e.__dataOld),Object.assign(t,e.__dataPending),a=e.__dataPending,e.__dataPending=null}}const Rt=(e,t,n)=>{let r=0,i=t.length-1,a=-1;for(;r<=i;){const s=r+i>>1,o=n.get(t[s].methodInfo)-n.get(e.methodInfo);if(o<0)r=s+1;else{if(!(o>0)){a=s;break}i=s-1}}a<0&&(a=i+1),t.splice(a,0,e)},Mt=(e,t,n,r,i)=>{const a=t[i?Ue(e):e];if(a)for(let t=0;t<a.length;t++){const s=a[t];s.info.lastRun===At||i&&!It(e,s.trigger)||(s.info.lastRun=At,Rt(s.info,n,r))}};function Lt(e,t,n,r,i){let a=qt(e,t,n,r,i);if(a===_t)return!1;let s=i.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[s]?e._setPendingProperty(s,a,!0):(e[s]=a,!1)}function $t(e,t,n,r,i,a,s){n.bindings=n.bindings||[];let o={kind:r,target:i,parts:a,literal:s,isCompound:1!==a.length};if(n.bindings.push(o),function(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}(o)){let{event:e,negate:t}=o.parts[0];o.listenerEvent=e||Qe(i)+"-changed",o.listenerNegate=t}let l=t.nodeInfoList.length;for(let n=0;n<o.parts.length;n++){let r=o.parts[n];r.compoundIndex=n,Ut(e,t,o,r,l)}}function Ut(e,t,n,r,i){if(!r.literal)if("attribute"===n.kind&&"-"===n.target[0]);else{let a=r.dependencies,s={index:i,binding:n,part:r,evaluator:e};for(let n=0;n<a.length;n++){let r=a[n];"string"==typeof r&&(r=Jt(r),r.wildcard=!0),e._addTemplatePropertyEffect(t,r.rootProperty,{fn:Ht,info:s,trigger:r})}}}function Ht(e,t,n,r,i,a,s){let o=s[i.index],l=i.binding,c=i.part;if(a&&c.source&&t.length>c.source.length&&"property"==l.kind&&!l.isCompound&&o.__isPropertyEffectsClient&&o.__dataHasAccessor&&o.__dataHasAccessor[l.target]){let r=n[t];t=je(c.source,l.target,t),o._setPendingPropertyOrPath(t,r,!1,!0)&&e._enqueueClient(o)}else{let s=i.evaluator._evaluateBinding(e,c,t,n,r,a);s!==_t&&function(e,t,n,r,i){i=function(e,t,n,r){if(n.isCompound){let i=e.__dataCompoundStorage[n.target];i[r.compoundIndex]=t,t=i.join("")}"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t));return t}(t,i,n,r),ue&&(i=ue(i,n.target,n.kind,t));if("attribute"==n.kind)e._valueToNodeAttribute(t,i,n.target);else{let r=n.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[r]?t[Et.READ_ONLY]&&t[Et.READ_ONLY][r]||t._setPendingProperty(r,i)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,r,i)}}(e,o,l,c,s)}}function Gt(e,t){if(t.isCompound){let n=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),r=t.parts,i=new Array(r.length);for(let e=0;e<r.length;e++)i[e]=r[e].literal;let a=t.target;n[a]=i,t.literal&&"property"==t.kind&&("className"===a&&(e=Le(e)),e[a]=t.literal)}}function jt(e,t,n){if(n.listenerEvent){let r=n.parts[0];e.addEventListener(n.listenerEvent,(function(e){!function(e,t,n,r,i){let a,s=e.detail,o=s&&s.path;o?(r=je(n,r,o),a=s&&s.value):a=e.currentTarget[n],a=i?!a:a,t[Et.READ_ONLY]&&t[Et.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,a,!0,Boolean(o))||s&&s.queueProperty||t._invalidateProperties()}(e,t,n.target,r.source,r.negate)}))}}function Xt(e,t,n,r,i,a){a=t.static||a&&("object"!=typeof a||a[t.methodName]);let s={methodName:t.methodName,args:t.args,methodInfo:i,dynamicFn:a};for(let i,a=0;a<t.args.length&&(i=t.args[a]);a++)i.literal||e._addPropertyEffect(i.rootProperty,n,{fn:r,info:s,trigger:i});return a&&e._addPropertyEffect(t.methodName,n,{fn:r,info:s}),s}function qt(e,t,n,r,i){let a=e._methodHost||e,s=a[i.methodName];if(s){let r=e._marshalArgs(i.args,t,n);return r===_t?_t:s.apply(a,r)}i.dynamicFn}const Vt=[],zt=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function Yt(e){let t="";for(let n=0;n<e.length;n++){t+=e[n].literal||""}return t}function Kt(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:Vt};if(t[2].trim()){return function(e,t){return t.args=e.map((function(e){let n=Jt(e);return n.literal||(t.static=!1),n}),this),t}(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function Jt(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t,value:"",literal:!1},r=t[0];switch("-"===r&&(r=t[1]),r>="0"&&r<="9"&&(r="#"),r){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.rootProperty=Ue(t),n.structured=$e(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n}function Wt(e,t,n){let r=Ve(e,n);return void 0===r&&(r=t[n]),r}function Qt(e,t,n,r){const i={indexSplices:r};ye&&!e._overrideLegacyUndefined&&(t.splices=i),e.notifyPath(n+".splices",i),e.notifyPath(n+".length",t.length),ye&&!e._overrideLegacyUndefined&&(i.indexSplices=[])}function Zt(e,t,n,r,i,a){Qt(e,t,n,[{index:r,addedCount:i,removed:a,object:t,type:"splice"}])}const en=Ce((e=>{const t=xt(pt(e));return class extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return Et}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(tn.length){let e=tn[tn.length-1];e._enqueueClient(this),this.__dataHost=e}}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[Et.READ_ONLY];for(let n in e)t&&t[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=e[n])}_addPropertyEffect(e,t,n){this._createPropertyAccessor(e,t==Et.READ_ONLY);let r=Nt(this,t,!0)[e];r||(r=this[t][e]=[]),r.push(n)}_removePropertyEffect(e,t,n){let r=Nt(this,t,!0)[e],i=r.indexOf(n);i>=0&&r.splice(i,1)}_hasPropertyEffect(e,t){let n=this[t];return Boolean(n&&n[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,Et.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,Et.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,Et.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,Et.COMPUTE)}_setPendingPropertyOrPath(e,t,n,r){if(r||Ue(Array.isArray(e)?e[0]:e)!==e){if(!r){let n=Ve(this,e);if(!(e=ze(this,e,t))||!super._shouldPropertyChange(e,t,n))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,n))return function(e,t,n){let r=e.__dataLinkedPaths;if(r){let i;for(let a in r){let s=r[a];Ge(a,t)?(i=je(a,s,t),e._setPendingPropertyOrPath(i,n,!0,!0)):Ge(s,t)&&(i=je(s,a,t),e._setPendingPropertyOrPath(i,n,!0,!0))}}}(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,n);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,n){n===e[t]&&"object"!=typeof n||("className"===t&&(e=Le(e)),e[t]=n)}_setPendingProperty(e,t,n){let r=this.__dataHasPaths&&$e(e),i=r?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,i[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),r?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(r||this[Et.NOTIFY]&&this[Et.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=n),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let n=e[t];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let n in e)!t&&this[Et.READ_ONLY]&&this[Et.READ_ONLY][n]||this._setPendingPropertyOrPath(n,e[n],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,t,n){let r,i=this.__dataHasPaths;this.__dataHasPaths=!1,Dt(this,t,n,i),r=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(t,n,i),this._flushClients(),Tt(this,this[Et.REFLECT],t,n,i),Tt(this,this[Et.OBSERVE],t,n,i),r&&function(e,t,n,r,i){let a,s,o=e[Et.NOTIFY],l=At++;for(let s in t)t[s]&&(o&&kt(e,o,l,s,n,r,i)||i&&Bt(e,s,n))&&(a=!0);a&&(s=e.__dataHost)&&s._invalidateProperties&&s._invalidateProperties()}(this,r,t,n,i),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,t,n){this[Et.PROPAGATE]&&Tt(this,this[Et.PROPAGATE],e,t,n),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,e,t,n)}_runEffectsForTemplate(e,t,n,r){const i=(t,r)=>{Tt(this,e.propertyEffects,t,n,r,e.nodeList);for(let i=e.firstChild;i;i=i.nextSibling)this._runEffectsForTemplate(i,t,n,r)};e.runEffects?e.runEffects(i,t,r):i(t,r)}linkPaths(e,t){e=Xe(e),t=Xe(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=Xe(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let n={path:""};Qt(this,Ve(this,e,n),n.path,t)}get(e,t){return Ve(t||this,e)}set(e,t,n){n?ze(n,e,t):this[Et.READ_ONLY]&&this[Et.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let n={path:""},r=Ve(this,e,n),i=r.length,a=r.push(...t);return t.length&&Zt(this,r,n.path,i,t.length,[]),a}pop(e){let t={path:""},n=Ve(this,e,t),r=Boolean(n.length),i=n.pop();return r&&Zt(this,n,t.path,n.length,0,[i]),i}splice(e,t,n,...r){let i,a={path:""},s=Ve(this,e,a);return t<0?t=s.length-Math.floor(-t):t&&(t=Math.floor(t)),i=2===arguments.length?s.splice(t):s.splice(t,n,...r),(r.length||i.length)&&Zt(this,s,a.path,t,r.length,i),i}shift(e){let t={path:""},n=Ve(this,e,t),r=Boolean(n.length),i=n.shift();return r&&Zt(this,n,t.path,0,0,[i]),i}unshift(e,...t){let n={path:""},r=Ve(this,e,n),i=r.unshift(...t);return t.length&&Zt(this,r,n.path,0,t.length,[]),i}notifyPath(e,t){let n;if(1==arguments.length){let r={path:""};t=Ve(this,e,r),n=r.path}else n=Array.isArray(e)?Xe(e):e;this._setPendingPropertyOrPath(n,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){var n;this._addPropertyEffect(e,Et.READ_ONLY),t&&(this["_set"+(n=e,n[0].toUpperCase()+n.substring(1))]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,n){let r={property:e,method:t,dynamicFn:Boolean(n)};this._addPropertyEffect(e,Et.OBSERVE,{fn:St,info:r,trigger:{name:e}}),n&&this._addPropertyEffect(t,Et.OBSERVE,{fn:St,info:r,trigger:{name:t}})}_createMethodObserver(e,t){let n=Kt(e);if(!n)throw new Error("Malformed observer expression '"+e+"'");Xt(this,n,Et.OBSERVE,qt,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,Et.NOTIFY,{fn:Ft,info:{eventName:Qe(e)+"-changed",property:e}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]||this._addPropertyEffect(e,Et.REFLECT,{fn:Pt,info:{attrName:t}})}_createComputedProperty(e,t,n){let r=Kt(t);if(!r)throw new Error("Malformed computed expression '"+t+"'");const i=Xt(this,r,Et.COMPUTE,Lt,e,n);Nt(this,"__computeInfo")[e]=i}_marshalArgs(e,t,n){const r=this.__data,i=[];for(let a=0,s=e.length;a<s;a++){let{name:s,structured:o,wildcard:l,value:c,literal:u}=e[a];if(!u)if(l){const e=Ge(s,t),i=Wt(r,n,e?t:s);c={path:e?t:s,value:i,base:e?Ve(r,s):i}}else c=o?Wt(r,n,s):r[s];if(ye&&!this._overrideLegacyUndefined&&void 0===c&&e.length>1)return _t;i[a]=c}return i}static addPropertyEffect(e,t,n){this.prototype._addPropertyEffect(e,t,n)}static createPropertyObserver(e,t,n){this.prototype._createPropertyObserver(e,t,n)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,n){this.prototype._createComputedProperty(e,t,n)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let n=this.constructor._parseTemplate(e),r=this.__preBoundTemplateInfo==n;if(!r)for(let e in n.propertyEffects)this._createPropertyAccessor(e);if(t)if(n=Object.create(n),n.wasPreBound=r,this.__templateInfo){const t=e._parentTemplateInfo||this.__templateInfo,r=t.lastChild;n.parent=t,t.lastChild=n,n.previousSibling=r,r?r.nextSibling=n:t.firstChild=n}else this.__templateInfo=n;else this.__preBoundTemplateInfo=n;return n}static _addTemplatePropertyEffect(e,t,n){(e.hostProps=e.hostProps||{})[t]=!0;let r=e.propertyEffects=e.propertyEffects||{};(r[t]=r[t]||[]).push(n)}_stampTemplate(e,t){t=t||this._bindTemplate(e,!0),tn.push(this);let n=super._stampTemplate(e,t);if(tn.pop(),t.nodeList=n.nodeList,!t.wasPreBound){let e=t.childNodes=[];for(let t=n.firstChild;t;t=t.nextSibling)e.push(t)}return n.templateInfo=t,function(e,t){let{nodeList:n,nodeInfoList:r}=t;if(r.length)for(let t=0;t<r.length;t++){let i=r[t],a=n[t],s=i.bindings;if(s)for(let t=0;t<s.length;t++){let n=s[t];Gt(a,n),jt(a,e,n)}a.__dataHost=e}}(this,t),this.__dataClientsReady&&(this._runEffectsForTemplate(t,this.__data,null,!1),this._flushClients()),n}_removeBoundDom(e){const t=e.templateInfo,{previousSibling:n,nextSibling:r,parent:i}=t;n?n.nextSibling=r:i&&(i.firstChild=r),r?r.previousSibling=n:i&&(i.lastChild=n),t.nextSibling=t.previousSibling=null;let a=t.childNodes;for(let e=0;e<a.length;e++){let t=a[e];Le(Le(t).parentNode).removeChild(t)}}static _parseTemplateNode(e,n,r){let i=t._parseTemplateNode.call(this,e,n,r);if(e.nodeType===Node.TEXT_NODE){let t=this._parseBindings(e.textContent,n);t&&(e.textContent=Yt(t)||" ",$t(this,n,r,"text","textContent",t),i=!0)}return i}static _parseTemplateNodeAttribute(e,n,r,i,a){let s=this._parseBindings(a,n);if(s){let t=i,a="property";Ct.test(i)?a="attribute":"$"==i[i.length-1]&&(i=i.slice(0,-1),a="attribute");let o=Yt(s);return o&&"attribute"==a&&("class"==i&&e.hasAttribute("class")&&(o+=" "+e.getAttribute(i)),e.setAttribute(i,o)),"attribute"==a&&"disable-upgrade$"==t&&e.setAttribute(i,""),"input"===e.localName&&"value"===t&&e.setAttribute(t,""),e.removeAttribute(t),"property"===a&&(i=We(i)),$t(this,n,r,a,i,s,o),!0}return t._parseTemplateNodeAttribute.call(this,e,n,r,i,a)}static _parseTemplateNestedTemplate(e,n,r){let i=t._parseTemplateNestedTemplate.call(this,e,n,r);const a=e.parentNode,s=r.templateInfo,o="dom-if"===a.localName,l="dom-repeat"===a.localName;we&&(o||l)&&(a.removeChild(e),(r=r.parentInfo).templateInfo=s,r.noted=!0,i=!1);let c=s.hostProps;if(ve&&o)c&&(n.hostProps=Object.assign(n.hostProps||{},c),we||(r.parentInfo.noted=!0));else{let e="{";for(let t in c){$t(this,n,r,"property","_host_"+t,[{mode:e,source:t,dependencies:[t],hostProp:!0}])}}return i}static _parseBindings(e,t){let n,r=[],i=0;for(;null!==(n=zt.exec(e));){n.index>i&&r.push({literal:e.slice(i,n.index)});let a=n[1][0],s=Boolean(n[2]),o=n[3].trim(),l=!1,c="",u=-1;"{"==a&&(u=o.indexOf("::"))>0&&(c=o.substring(u+2),o=o.substring(0,u),l=!0);let p=Kt(o),d=[];if(p){let{args:e,methodName:n}=p;for(let t=0;t<e.length;t++){let n=e[t];n.literal||d.push(n)}let r=t.dynamicFns;(r&&r[n]||p.static)&&(d.push(n),p.dynamicFn=!0)}else d.push(o);r.push({source:o,mode:a,negate:s,customEvent:l,signature:p,dependencies:d,event:c}),i=zt.lastIndex}if(i&&i<e.length){let t=e.substring(i);t&&r.push({literal:t})}return r.length?r:null}static _evaluateBinding(e,t,n,r,i,a){let s;return s=t.signature?qt(e,n,r,0,t.signature):n!=t.source?Ve(e,t.source):a&&$e(n)?Ve(e,n):e.__data[n],t.negate&&(s=!s),s}}})),tn=[];const nn=Ce((e=>{const t=lt(e);function n(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof i?t:null}function r(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const n=e.properties;n&&(t=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(e){const t={};for(let n in e){const r=e[n];t[n]="function"==typeof r?{type:r}:r}return t}(n))}e.__ownProperties=t}return e.__ownProperties}class i extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const e=this._properties;this.__observedAttributes=e?Object.keys(e).map((e=>this.prototype._addPropertyToAttributeMap(e))):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=n(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=r(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=n(this);this.__properties=Object.assign({},e&&e._properties,r(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return i})),rn=window.ShadyCSS&&window.ShadyCSS.cssBuild,an=Ce((e=>{const t=nn(en(e));function n(e,t,n,r){n.computed&&(n.readOnly=!0),n.computed&&(e._hasReadOnlyEffect(t)||e._createComputedProperty(t,n.computed,r)),n.readOnly&&!e._hasReadOnlyEffect(t)?e._createReadOnlyProperty(t,!n.computed):!1===n.readOnly&&e._hasReadOnlyEffect(t),n.reflectToAttribute&&!e._hasReflectEffect(t)?e._createReflectedProperty(t):!1===n.reflectToAttribute&&e._hasReflectEffect(t),n.notify&&!e._hasNotifyEffect(t)?e._createNotifyingProperty(t):!1===n.notify&&e._hasNotifyEffect(t),n.observer&&e._createPropertyObserver(t,n.observer,r[n.observer]),e._addPropertyToAttributeMap(t)}function r(e,t,n,r){if(!rn){const i=t.content.querySelectorAll("style"),a=De(t),s=function(e){let t=Be(e);return t?Re(t):[]}(n),o=t.content.firstElementChild;for(let n=0;n<s.length;n++){let i=s[n];i.textContent=e._processStyleText(i.textContent,r),t.content.insertBefore(i,o)}let l=0;for(let t=0;t<a.length;t++){let n=a[t],s=i[l];s!==n?(n=n.cloneNode(!0),s.parentNode.insertBefore(n,s)):l++,n.textContent=e._processStyleText(n.textContent,r)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,n),_e&&rn&&le){const n=t.content.querySelectorAll("style");if(n){let t="";Array.from(n).forEach((e=>{t+=e.textContent,e.parentNode.removeChild(e)})),e._styleSheet=new CSSStyleSheet,e._styleSheet.replaceSync(t)}}}return class extends t{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){t._finalizeClass.call(this);const e=((n=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",n))||(n.__ownObservers=n.hasOwnProperty(JSCompiler_renameProperty("observers",n))?n.observers:null),n.__ownObservers);var n;e&&this.createObservers(e,this._properties),this._prepareTemplate()}static _prepareTemplate(){let e=this.template;e&&("string"==typeof e?e=null:me||(e=e.cloneNode(!0))),this.prototype._template=e}static createProperties(e){for(let t in e)n(this.prototype,t,e[t],e)}static createObservers(e,t){const n=this.prototype;for(let r=0;r<e.length;r++)n._createMethodObserver(e[r],t)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const e=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==e?e:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(e){let t=null;if(e&&(!de||he)&&(t=Se.import(e,"template"),de&&!t))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${e}`);return t}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(e){this._template=e}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=this.importMeta;if(e)this._importPath=se(e.url);else{const e=Se.import(this.is);this._importPath=e&&e.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=ce,this.importPath=this.constructor.importPath;let e=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let n in t){let r=t[n];"value"in r&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[n]=r)}}return e.__propertyDefaults}(this.constructor);if(e)for(let t in e){let n=e[t];if(this._canApplyPropertyDefault(t)){let e="function"==typeof n.value?n.value.call(this):n.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e}}}_canApplyPropertyDefault(e){return!this.hasOwnProperty(e)}static _processStyleText(e,t){return ae(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const n=this.importPath;r(this,t,e,n?ie(n):""),this.prototype._bindTemplate(t)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(e){const t=Le(this);if(t.attachShadow)return e?(t.shadowRoot||(t.attachShadow({mode:"open",shadyUpgradeFragment:e}),t.shadowRoot.appendChild(e),this.constructor._styleSheet&&(t.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),ge&&window.ShadyDOM&&window.ShadyDOM.flushInitial(t.shadowRoot),t.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}resolveUrl(e,t){return!t&&this.importPath&&(t=ie(this.importPath)),ie(e,t)}static _parseTemplateContent(e,n,r){return n.dynamicFns=n.dynamicFns||this._properties,t._parseTemplateContent.call(this,e,n,r)}static _addTemplatePropertyEffect(e,n,r){return fe&&!(n in this._properties)&&(!r.info.part.signature||!r.info.part.signature.static)&&!r.info.part.hostProp&&e.nestedTemplate,t._addTemplatePropertyEffect.call(this,e,n,r)}}}));
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class sn{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run((()=>{this._timer=null,on.delete(this),this._callback()}))}cancel(){this.isActive()&&(this._cancelAsync(),on.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(e,t,n){return e instanceof sn?e._cancelAsync():e=new sn,e.setConfig(t,n),e}}let on=new Set;const ln=function(e){on.add(e)},cn=function(){const e=Boolean(on.size);return on.forEach((e=>{try{e.flush()}catch(e){setTimeout((()=>{throw e}))}})),e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let un="string"==typeof document.head.style.touchAction,pn="__polymerGestures",dn="__polymerGesturesHandled",hn="__polymerGesturesTouchAction",mn=["mousedown","mousemove","mouseup","click"],fn=[0,1,4,2],gn=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function yn(e){return mn.indexOf(e)>-1}let bn=!1;function wn(e){if(!yn(e)&&"touchend"!==e)return un&&bn&&pe?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){bn=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let vn=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const xn=[],An={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},_n={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function En(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let n=e.getRootNode();if(e.id){let r=n.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<r.length;e++)t.push(r[e])}}return t}let Cn=function(e){let t=e.sourceCapabilities;var n;if((!t||t.firesTouchEvents)&&(e[dn]={skip:!0},"click"===e.type)){let t=!1,r=Bn(e);for(let e=0;e<r.length;e++){if(r[e].nodeType===Node.ELEMENT_NODE)if("label"===r[e].localName)xn.push(r[e]);else if(n=r[e],An[n.localName]){let n=En(r[e]);for(let e=0;e<n.length;e++)t=t||xn.indexOf(n[e])>-1}if(r[e]===kn.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation()}};function Nn(e){let t=vn?["click"]:mn;for(let n,r=0;r<t.length;r++)n=t[r],e?(xn.length=0,document.addEventListener(n,Cn,!0)):document.removeEventListener(n,Cn,!0)}function Tn(e){let t=e.type;if(!yn(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!gn&&(t=fn[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let kn={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function In(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function Sn(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",(function(e){kn.mouse.mouseIgnoreJob||Nn(!0),kn.mouse.target=Bn(e)[0],kn.mouse.mouseIgnoreJob=sn.debounce(kn.mouse.mouseIgnoreJob,at.after(2500),(function(){Nn(),kn.mouse.target=null,kn.mouse.mouseIgnoreJob=null}))}),!!bn&&{passive:!0});const Bn=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],On={},Fn=[];function Pn(e){const t=Bn(e);return t.length>0?t[0]:e.target}function Dn(e){let t,n=e.type,r=e.currentTarget.__polymerGestures;if(!r)return;let i=r[n];if(i){if(!e[dn]&&(e[dn]={},"touch"===n.slice(0,5))){let t=e.changedTouches[0];if("touchstart"===n&&1===e.touches.length&&(kn.touch.id=t.identifier),kn.touch.id!==t.identifier)return;un||"touchstart"!==n&&"touchmove"!==n||function(e){let t=e.changedTouches[0],n=e.type;if("touchstart"===n)kn.touch.x=t.clientX,kn.touch.y=t.clientY,kn.touch.scrollDecided=!1;else if("touchmove"===n){if(kn.touch.scrollDecided)return;kn.touch.scrollDecided=!0;let n=function(e){let t="auto",n=Bn(e);for(let e,r=0;r<n.length;r++)if(e=n[r],e[hn]){t=e[hn];break}return t}(e),r=!1,i=Math.abs(kn.touch.x-t.clientX),a=Math.abs(kn.touch.y-t.clientY);e.cancelable&&("none"===n?r=!0:"pan-x"===n?r=a>i:"pan-y"===n&&(r=i>a)),r?e.preventDefault():Hn("track")}}(e)}if(t=e[dn],!t.skip){for(let n,r=0;r<Fn.length;r++)n=Fn[r],i[n.name]&&!t[n.name]&&n.flow&&n.flow.start.indexOf(e.type)>-1&&n.reset&&n.reset();for(let r,a=0;a<Fn.length;a++)r=Fn[a],i[r.name]&&!t[r.name]&&(t[r.name]=!0,r[n](e))}}}function Rn(e,t,n){return!!On[t]&&(function(e,t,n){let r=On[t],i=r.deps,a=r.name,s=e[pn];s||(e[pn]=s={});for(let t,n,r=0;r<i.length;r++)t=i[r],vn&&yn(t)&&"click"!==t||(n=s[t],n||(s[t]=n={_count:0}),0===n._count&&e.addEventListener(t,Dn,wn(t)),n[a]=(n[a]||0)+1,n._count=(n._count||0)+1);e.addEventListener(t,n),r.touchAction&&$n(e,r.touchAction)}(e,t,n),!0)}function Mn(e,t,n){return!!On[t]&&(function(e,t,n){let r=On[t],i=r.deps,a=r.name,s=e[pn];if(s)for(let t,n,r=0;r<i.length;r++)t=i[r],n=s[t],n&&n[a]&&(n[a]=(n[a]||1)-1,n._count=(n._count||1)-1,0===n._count&&e.removeEventListener(t,Dn,wn(t)));e.removeEventListener(t,n)}(e,t,n),!0)}function Ln(e){Fn.push(e);for(let t=0;t<e.emits.length;t++)On[e.emits[t]]=e}function $n(e,t){un&&e instanceof HTMLElement&&st.run((()=>{e.style.touchAction=t})),e[hn]=t}function Un(e,t,n){let r=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(r.detail=n,Le(e).dispatchEvent(r),r.defaultPrevented){let e=n.preventer||n.sourceEvent;e&&e.preventDefault&&e.preventDefault()}}function Hn(e){let t=function(e){for(let t,n=0;n<Fn.length;n++){t=Fn[n];for(let n,r=0;r<t.emits.length;r++)if(n=t.emits[r],n===e)return t}return null}(e);t.info&&(t.info.prevent=!0)}function Gn(e,t,n,r){t&&Un(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:r,prevent:function(e){return Hn(e)}})}function jn(e,t,n){if(e.prevent)return!1;if(e.started)return!0;let r=Math.abs(e.x-t),i=Math.abs(e.y-n);return r>=5||i>=5}function Xn(e,t,n){if(!t)return;let r,i=e.moves[e.moves.length-2],a=e.moves[e.moves.length-1],s=a.x-e.x,o=a.y-e.y,l=0;i&&(r=a.x-i.x,l=a.y-i.y),Un(t,"track",{state:e.state,x:n.clientX,y:n.clientY,dx:s,dy:o,ddx:r,ddy:l,sourceEvent:n,hover:function(){return function(e,t){let n=document.elementFromPoint(e,t),r=n;for(;r&&r.shadowRoot&&!window.ShadyDOM;){let i=r;if(r=r.shadowRoot.elementFromPoint(e,t),i===r)break;r&&(n=r)}return n}(n.clientX,n.clientY)}})}function qn(e,t,n){let r=Math.abs(t.clientX-e.x),i=Math.abs(t.clientY-e.y),a=Pn(n||t);!a||_n[a.localName]&&a.hasAttribute("disabled")||(isNaN(r)||isNaN(i)||r<=25&&i<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=Pn(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let n=t.getBoundingClientRect(),r=e.pageX,i=e.pageY;return!(r>=n.left&&r<=n.right&&i>=n.top&&i<=n.bottom)}return!1}(t))&&(e.prevent||Un(a,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:n}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/Ln({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Sn(this.info)},mousedown:function(e){if(!Tn(e))return;let t=Pn(e),n=this;In(this.info,(function(e){Tn(e)||(Gn("up",t,e),Sn(n.info))}),(function(e){Tn(e)&&Gn("up",t,e),Sn(n.info)})),Gn("down",t,e)},touchstart:function(e){Gn("down",Pn(e),e.changedTouches[0],e)},touchend:function(e){Gn("up",Pn(e),e.changedTouches[0],e)}}),Ln({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Sn(this.info)},mousedown:function(e){if(!Tn(e))return;let t=Pn(e),n=this,r=function(e){let r=e.clientX,i=e.clientY;jn(n.info,r,i)&&(n.info.state=n.info.started?"mouseup"===e.type?"end":"track":"start","start"===n.info.state&&Hn("tap"),n.info.addMove({x:r,y:i}),Tn(e)||(n.info.state="end",Sn(n.info)),t&&Xn(n.info,t,e),n.info.started=!0)};In(this.info,r,(function(e){n.info.started&&r(e),Sn(n.info)})),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=Pn(e),n=e.changedTouches[0],r=n.clientX,i=n.clientY;jn(this.info,r,i)&&("start"===this.info.state&&Hn("tap"),this.info.addMove({x:r,y:i}),Xn(this.info,t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=Pn(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),Xn(this.info,t,n))}}),Ln({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){Tn(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){Tn(e)&&qn(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){qn(this.info,e.changedTouches[0],e)}});const Vn=Ce((e=>class extends e{_addEventListenerToNode(e,t,n){Rn(e,t,n)||super._addEventListenerToNode(e,t,n)}_removeEventListenerFromNode(e,t,n){Mn(e,t,n)||super._removeEventListenerFromNode(e,t,n)}})),zn=/:host\(:dir\((ltr|rtl)\)\)/g,Yn=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,Kn=/:dir\((?:ltr|rtl)\)/,Jn=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),Wn=[];
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let Qn=null,Zn="";function er(){Zn=document.documentElement.getAttribute("dir")}function tr(e){if(!e.__autoDirOptOut){e.setAttribute("dir",Zn)}}function nr(){er(),Zn=document.documentElement.getAttribute("dir");for(let e=0;e<Wn.length;e++)tr(Wn[e])}const rr=Ce((e=>{Jn||Qn||(er(),Qn=new MutationObserver(nr),Qn.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=pt(e);class n extends t{static _processStyleText(e,n){return e=t._processStyleText.call(this,e,n),!Jn&&Kn.test(e)&&(e=this._replaceDirInCssText(e),this.__activateDir=!0),e}static _replaceDirInCssText(e){let t=e;return t=t.replace(zn,':host([dir="$1"])'),t=t.replace(Yn,':host([dir="$2"]) $1'),t}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(Qn&&Qn.takeRecords().length&&nr(),Wn.push(this),tr(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const e=Wn.indexOf(this);e>-1&&Wn.splice(e,1)}}}return n.__activateDir=!1,n}));
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let ir=!1,ar=[],sr=[];function or(){ir=!0,requestAnimationFrame((function(){ir=!1,function(e){for(;e.length;)lr(e.shift())}(ar),setTimeout((function(){!function(e){for(let t=0,n=e.length;t<n;t++)lr(e.shift())}(sr)}))}))}function lr(e){const t=e[0],n=e[1],r=e[2];try{n.apply(t,r)}catch(e){setTimeout((()=>{throw e}))}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function cr(){document.body.removeAttribute("unresolved")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function ur(e,t,n){return{index:e,removed:t,addedCount:n}}"interactive"===document.readyState||"complete"===document.readyState?cr():window.addEventListener("DOMContentLoaded",cr);function pr(e,t,n,r,i,a){let s,o=0,l=0,c=Math.min(n-t,a-i);if(0==t&&0==i&&(o=function(e,t,n){for(let r=0;r<n;r++)if(!hr(e[r],t[r]))return r;return n}(e,r,c)),n==e.length&&a==r.length&&(l=function(e,t,n){let r=e.length,i=t.length,a=0;for(;a<n&&hr(e[--r],t[--i]);)a++;return a}(e,r,c-o)),i+=o,a-=l,(n-=l)-(t+=o)==0&&a-i==0)return[];if(t==n){for(s=ur(t,[],0);i<a;)s.removed.push(r[i++]);return[s]}if(i==a)return[ur(t,[],n-t)];let u=function(e){let t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];for(;t>0||n>0;){if(0==t){i.push(2),n--;continue}if(0==n){i.push(3),t--;continue}let a,s=e[t-1][n-1],o=e[t-1][n],l=e[t][n-1];a=o<l?o<s?o:s:l<s?l:s,a==s?(s==r?i.push(0):(i.push(1),r=s),t--,n--):a==o?(i.push(3),t--,r=o):(i.push(2),n--,r=l)}return i.reverse(),i}(function(e,t,n,r,i,a){let s=a-i+1,o=n-t+1,l=new Array(s);for(let e=0;e<s;e++)l[e]=new Array(o),l[e][0]=e;for(let e=0;e<o;e++)l[0][e]=e;for(let n=1;n<s;n++)for(let a=1;a<o;a++)if(hr(e[t+a-1],r[i+n-1]))l[n][a]=l[n-1][a-1];else{let e=l[n-1][a]+1,t=l[n][a-1]+1;l[n][a]=e<t?e:t}return l}(e,t,n,r,i,a));s=void 0;let p=[],d=t,h=i;for(let e=0;e<u.length;e++)switch(u[e]){case 0:s&&(p.push(s),s=void 0),d++,h++;break;case 1:s||(s=ur(d,[],0)),s.addedCount++,d++,s.removed.push(r[h]),h++;break;case 2:s||(s=ur(d,[],0)),s.addedCount++,d++;break;case 3:s||(s=ur(d,[],0)),s.removed.push(r[h]),h++}return s&&p.push(s),p}function dr(e,t){return pr(e,0,e.length,t,0,t.length)}function hr(e,t){return e===t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function mr(e){return"slot"===e.localName}let fr=class{static getFlattenedNodes(e){const t=Le(e);return mr(e)?t.assignedNodes({flatten:!0}):Array.from(t.childNodes).map((e=>mr(e)?Le(e).assignedNodes({flatten:!0}):[e])).reduce(((e,t)=>e.concat(t)),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){mr(this._target)?this._listenSlots([this._target]):Le(this._target).children&&(this._listenSlots(Le(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,(e=>{this._processMutations(e)})):(this._nativeChildrenObserver=new MutationObserver((e=>{this._processMutations(e)})),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){mr(this._target)?this._unlistenSlots([this._target]):Le(this._target).children&&(this._unlistenSlots(Le(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,st.run((()=>this.flush())))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let n=e[t];n.addedNodes&&this._listenSlots(n.addedNodes),n.removedNodes&&this._unlistenSlots(n.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),n=dr(t,this._effectiveNodes);for(let t,r=0;r<n.length&&(t=n[r]);r++)for(let n,r=0;r<t.removed.length&&(n=t.removed[r]);r++)e.removedNodes.push(n);for(let r,i=0;i<n.length&&(r=n[i]);i++)for(let n=r.index;n<r.index+r.addedCount;n++)e.addedNodes.push(t[n]);this._effectiveNodes=t;let r=!1;return(e.addedNodes.length||e.removedNodes.length)&&(r=!0,this.callback.call(this._target,e)),r}_listenSlots(e){for(let t=0;t<e.length;t++){let n=e[t];mr(n)&&n.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let n=e[t];mr(n)&&n.removeEventListener("slotchange",this._boundSchedule)}}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const gr=function(){let e,t;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=cn()}while(e||t)},yr=Element.prototype,br=yr.matches||yr.matchesSelector||yr.mozMatchesSelector||yr.msMatchesSelector||yr.oMatchesSelector||yr.webkitMatchesSelector,wr=function(e,t){return br.call(e,t)};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class vr{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e}observeNodes(e){return new fr(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(Le(this.node).contains(e))return!0;let t=e,n=e.ownerDocument;for(;t&&t!==n&&t!==this.node;)t=Le(t).parentNode||Le(t).host;return t===this.node}getOwnerRoot(){return Le(this.node).getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?Le(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],t=Le(this.node).assignedSlot;for(;t;)e.push(t),t=Le(t).assignedSlot;return e}importNode(e,t){let n=this.node instanceof Document?this.node:this.node.ownerDocument;return Le(n).importNode(e,t)}getEffectiveChildNodes(){return fr.getFlattenedNodes(this.node)}queryDistributedElements(e){let t=this.getEffectiveChildNodes(),n=[];for(let r,i=0,a=t.length;i<a&&(r=t[i]);i++)r.nodeType===Node.ELEMENT_NODE&&wr(r,e)&&n.push(r);return n}get activeElement(){let e=this.node;return void 0!==e._activeElement?e._activeElement:e.activeElement}}function xr(e,t){for(let n=0;n<t.length;n++){let r=t[n];Object.defineProperty(e,r,{get:function(){return this.node[r]},configurable:!0})}}class Ar{constructor(e){this.event=e}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}vr.prototype.cloneNode,vr.prototype.appendChild,vr.prototype.insertBefore,vr.prototype.removeChild,vr.prototype.replaceChild,vr.prototype.setAttribute,vr.prototype.removeAttribute,vr.prototype.querySelector,vr.prototype.querySelectorAll,vr.prototype.parentNode,vr.prototype.firstChild,vr.prototype.lastChild,vr.prototype.nextSibling,vr.prototype.previousSibling,vr.prototype.firstElementChild,vr.prototype.lastElementChild,vr.prototype.nextElementSibling,vr.prototype.previousElementSibling,vr.prototype.childNodes,vr.prototype.children,vr.prototype.classList,vr.prototype.textContent,vr.prototype.innerHTML;let _r=vr;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(vr.prototype).forEach((t=>{"activeElement"!=t&&(e.prototype[t]=vr.prototype[t])})),xr(e.prototype,["classList"]),_r=e,Object.defineProperties(Ar.prototype,{localTarget:{get(){const e=this.event.currentTarget,t=e&&Er(e).getOwnerRoot(),n=this.path;for(let e=0;e<n.length;e++){const r=n[e];if(Er(r).getOwnerRoot()===t)return r}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else!function(e,t){for(let n=0;n<t.length;n++){let r=t[n];e[r]=function(){return this.node[r].apply(this.node,arguments)}}}(vr.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),xr(vr.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(e,t){for(let n=0;n<t.length;n++){let r=t[n];Object.defineProperty(e,r,{get:function(){return this.node[r]},set:function(e){this.node[r]=e},configurable:!0})}}(vr.prototype,["textContent","innerHTML","className"]);const Er=function(e){if((e=e||document)instanceof _r)return e;if(e instanceof Ar)return e;let t=e.__domApi;return t||(t=e instanceof Event?new Ar(e):new _r(e),e.__domApi=t),t},Cr=window.ShadyDOM,Nr=window.ShadyCSS;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Tr(e,t){return Le(e).getRootNode()===t}
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
const kr=e=>{for(;e;){const t=Object.getOwnPropertyDescriptor(e,"observedAttributes");if(t)return t.get;e=Object.getPrototypeOf(e.prototype).constructor}return()=>[]};Ce((e=>{const t=an(e);let n=kr(t);return class extends t{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return n.call(this).concat("disable-upgrade")}_initializeProperties(){this.hasAttribute("disable-upgrade")?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}attributeChangedCallback(e,t,n,r){"disable-upgrade"==e?this.__isUpgradeDisabled&&null==n&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,Le(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(e,t,n,r)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}}));let Ir=window.ShadyCSS;const Sr=Ce((e=>{const t=Vn(an(e)),n=rn?t:rr(t),r=kr(n),i={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class a extends n{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(e,t,n){(this.__dataAttributes&&this.__dataAttributes[e]||"disable-upgrade"===e)&&this.attributeChangedCallback(e,t,n,null)}setAttribute(e,t){if(Ae&&!this._legacyForceObservedAttributes){const n=this.getAttribute(e);super.setAttribute(e,t),this.__attributeReaction(e,n,String(t))}else super.setAttribute(e,t)}removeAttribute(e){if(Ae&&!this._legacyForceObservedAttributes){const t=this.getAttribute(e);super.removeAttribute(e),this.__attributeReaction(e,t,null)}else super.removeAttribute(e)}static get observedAttributes(){return Ae&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],this.prototype),this.__observedAttributes):r.call(this).concat("disable-upgrade")}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(e,t,n,r){t!==n&&("disable-upgrade"==e?this.__isUpgradeDisabled&&null==n&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,Le(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(e,t,n,r),this.attributeChanged(e,t,n)))}attributeChanged(e,t,n){}_initializeProperties(){if(me&&this.hasAttribute("disable-upgrade"))this.__isUpgradeDisabled=!0;else{let e=Object.getPrototypeOf(this);e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))||(this._registered(),e.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),Ae&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const e=this.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.__attributeReaction(n.name,null,n.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,n){this._propertyToAttribute(e,t,n)}serializeValueToAttribute(e,t,n){this._valueToNodeAttribute(n||this,e,t)}extend(e,t){if(!e||!t)return e||t;let n=Object.getOwnPropertyNames(t);for(let r,i=0;i<n.length&&(r=n[i]);i++){let n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}return e}mixin(e,t){for(let n in t)e[n]=t[n];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,n){n=n||{},t=null==t?{}:t;let r=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});r.detail=t;let i=n.node||this;return Le(i).dispatchEvent(r),r}listen(e,t,n){e=e||this;let r=this.__boundListeners||(this.__boundListeners=new WeakMap),i=r.get(e);i||(i={},r.set(e,i));let a=t+n;i[a]||(i[a]=this._addMethodEventListenerToNode(e,t,n,this))}unlisten(e,t,n){e=e||this;let r=this.__boundListeners&&this.__boundListeners.get(e),i=t+n,a=r&&r[i];a&&(this._removeEventListenerFromNode(e,t,a),r[i]=null)}setScrollDirection(e,t){$n(t||this,i[e]||"auto")}$$(e){return this.root.querySelector(e)}get domHost(){let e=Le(this).getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){const e=Er(this);window.ShadyDOM&&e.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Er(this).getEffectiveChildNodes()}queryDistributedElements(e){return Er(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let n,r=0;n=e[r];r++)n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?Er(t).getDistributedNodes():[]}getContentChildren(e){let t=this.getContentChildNodes(e).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}));return t}isLightDescendant(e){const t=this;return t!==e&&Le(t).contains(e)&&Le(t).getRootNode()===Le(e).getRootNode()}isLocalDescendant(e){return this.root===Le(e).getRootNode()}scopeSubtree(e,t=!1){return function(e,t=!1){if(!Cr||!Nr)return null;if(!Cr.handlesDynamicScoping)return null;const n=Nr.ScopingShim;if(!n)return null;const r=n.scopeForNode(e),i=Le(e).getRootNode(),a=e=>{if(!Tr(e,i))return;const t=Array.from(Cr.nativeMethods.querySelectorAll.call(e,"*"));t.push(e);for(let e=0;e<t.length;e++){const a=t[e];if(!Tr(a,i))continue;const s=n.currentScopeForNode(a);s!==r&&(""!==s&&n.unscopeNode(a,s),n.scopeNode(a,r))}};if(a(e),t){const t=new MutationObserver((e=>{for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.addedNodes.length;e++){const t=n.addedNodes[e];t.nodeType===Node.ELEMENT_NODE&&a(t)}}}));return t.observe(e,{childList:!0,subtree:!0}),t}return null}(e,t)}getComputedStyleValue(e){return Ir.getComputedStyleValue(this,e)}debounce(e,t,n){return this._debouncers=this._debouncers||{},this._debouncers[e]=sn.debounce(this._debouncers[e],n>0?at.after(n):st,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return!(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush()}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel()}async(e,t){return t>0?at.run(e.bind(this),t):~st.run(e.bind(this))}cancelAsync(e){e<0?st.cancel(~e):at.cancel(e)}create(e,t){let n=document.createElement(e);if(t)if(n.setProperties)n.setProperties(t);else for(let e in t)n[e]=t[e];return n}elementMatches(e,t){return wr(t||this,e)}toggleAttribute(e,t){let n=this;return 3===arguments.length&&(n=arguments[2]),1==arguments.length&&(t=!n.hasAttribute(e)),t?(Le(n).setAttribute(e,""),!0):(Le(n).removeAttribute(e),!1)}toggleClass(e,t,n){n=n||this,1==arguments.length&&(t=!n.classList.contains(e)),t?n.classList.add(e):n.classList.remove(e)}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e}translate3d(e,t,n,r){r=r||this,this.transform("translate3d("+e+","+t+","+n+")",r)}arrayDelete(e,t){let n;if(Array.isArray(e)){if(n=e.indexOf(t),n>=0)return e.splice(n,1)}else{if(n=Ve(this,e).indexOf(t),n>=0)return this.splice(e,n,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t)}}_log(...e){this._logger("log",e)}_warn(...e){this._logger("warn",e)}_error(...e){this._logger("error",e)}_logf(e,...t){return["[%s::%s]",this.is,e,...t]}}return a.prototype.is="",a})),Br={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},Or={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},Fr=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},Or);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Pr(e,t,n,r){!function(e,t,n){const r=e._noAccessors,i=Object.getOwnPropertyNames(e);for(let a=0;a<i.length;a++){let s=i[a];if(!(s in n))if(r)t[s]=e[s];else{let n=Object.getOwnPropertyDescriptor(e,s);n&&(n.configurable=!0,Object.defineProperty(t,s,n))}}}(t,e,r);for(let e in Br)t[e]&&(n[e]=n[e]||[],n[e].push(t[e]))}function Dr(e,t,n){t=t||[];for(let r=e.length-1;r>=0;r--){let i=e[r];i&&(Array.isArray(i)?Dr(i,t):t.indexOf(i)<0&&(!n||n.indexOf(i)<0)&&t.unshift(i))}return t}function Rr(e,t){for(const n in t){const r=e[n],i=t[n];e[n]=!("value"in i)&&r&&"value"in r?Object.assign({value:r.value},i):i}}const Mr=Sr(HTMLElement);function Lr(e,t,n){let r;const i={};class a extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(r)for(let e,t=0;t<r.length;t++)e=r[t],e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const t={};if(r)for(let e=0;e<r.length;e++)Rr(t,r[e].properties);return Rr(t,e.properties),t}static get observers(){let t=[];if(r)for(let e,n=0;n<r.length;n++)e=r[n],e.observers&&(t=t.concat(e.observers));return e.observers&&(t=t.concat(e.observers)),t}created(){super.created();const e=i.created;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}_registered(){const e=a.prototype;if(!e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))){e.__hasRegisterFinished=!0,super._registered(),me&&s(e);const t=Object.getPrototypeOf(this);let n=i.beforeRegister;if(n)for(let e=0;e<n.length;e++)n[e].call(t);if(n=i.registered,n)for(let e=0;e<n.length;e++)n[e].call(t)}}_applyListeners(){super._applyListeners();const e=i.listeners;if(e)for(let t=0;t<e.length;t++){const n=e[t];if(n)for(let e in n)this._addMethodEventListenerToNode(this,e,n[e])}}_ensureAttributes(){const e=i.hostAttributes;if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e in n)this._ensureAttribute(e,n[e])}super._ensureAttributes()}ready(){super.ready();let e=i.ready;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attached(){super.attached();let e=i.attached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}detached(){super.detached();let e=i.detached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attributeChanged(e,t,n){super.attributeChanged();let r=i.attributeChanged;if(r)for(let i=0;i<r.length;i++)r[i].call(this,e,t,n)}}if(n){Array.isArray(n)||(n=[n]);let e=t.prototype.behaviors;r=Dr(n,null,e),a.prototype.behaviors=e?e.concat(n):r}const s=t=>{r&&function(e,t,n){for(let r=0;r<t.length;r++)Pr(e,t[r],n,Fr)}(t,r,i),Pr(t,e,i,Or)};return me||s(a.prototype),a.generatedFrom=e,a}const $r=function(e){let t;return t="function"==typeof e?e:$r.Class(e),e._legacyForceObservedAttributes&&(t.prototype._legacyForceObservedAttributes=e._legacyForceObservedAttributes),customElements.define(t.is,t),t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Ur(e,t,n,r,i){let a;i&&(a="object"==typeof n&&null!==n,a&&(r=e.__dataTemp[t]));let s=r!==n&&(r==r||n==n);return a&&s&&(e.__dataTemp[t]=n),s}$r.Class=function(e,t){let n=t?t(Mr):Mr;return n=Lr(e,n,e.behaviors),n.is=n.prototype.is=e.is,n};const Hr=Ce((e=>class extends e{_shouldPropertyChange(e,t,n){return Ur(this,e,t,n,!0)}})),Gr=Ce((e=>class extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(e,t,n){return Ur(this,e,t,n,this.mutableData)}}));Hr._mutablePropertyChange=Ur;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let jr=null;function Xr(){return jr}Xr.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:Xr,writable:!0}});const qr=en(Xr),Vr=Hr(qr);const zr=en(class{});function Yr(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(Boolean(e)!=Boolean(r.__hideTemplateChildren__))if(r.nodeType===Node.TEXT_NODE)e?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if("slot"===r.localName)if(e)r.__polymerReplaced__=document.createComment("hidden-slot"),Le(Le(r).parentNode).replaceChild(r.__polymerReplaced__,r);else{const e=r.__polymerReplaced__;e&&Le(Le(e).parentNode).replaceChild(r,e)}else r.style&&(e?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=e,r._showHideChildren&&r._showHideChildren(e)}}class Kr extends zr{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=[];this.children=t;for(let e=this.root.firstChild;e;e=e.nextSibling)t.push(e),e.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(e&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let t in e)this._setPendingProperty(t,e[t])}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,t,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,(e=>{e.model=this,n(e)}));else{let r=this.__dataHost.__dataHost;r&&r._addEventListenerToNode(e,t,n)}}_showHideChildren(e){Yr(e,this.children)}_setUnmanagedPropertyToNode(e,t,n){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(e,t,n)}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}Kr.prototype.__dataHost,Kr.prototype.__templatizeOptions,Kr.prototype._methodHost,Kr.prototype.__templatizeOwner,Kr.prototype.__hostProps;const Jr=Hr(Kr);function Wr(e){let t=e.__dataHost;return t&&t._methodHost||t}function Qr(e,t,n){let r=n.mutableData?Jr:Kr;ni.mixin&&(r=ni.mixin(r));let i=class extends r{};return i.prototype.__templatizeOptions=n,i.prototype._bindTemplate(e),function(e,t,n,r){let i=n.hostProps||{};for(let t in r.instanceProps){delete i[t];let n=r.notifyInstanceProp;n&&e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:ti(t,n)})}if(r.forwardHostProp&&t.__dataHost)for(let t in i)n.hasHostProps||(n.hasHostProps=!0),e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,n){e.__dataHost._setPendingPropertyOrPath("_host_"+t,n[t],!0,!0)}})}(i,e,t,n),i}function Zr(e,t,n,r){let i=n.forwardHostProp;if(i&&t.hasHostProps){const a="template"==e.localName;let s=t.templatizeTemplateClass;if(!s){if(a){let e=n.mutableData?Vr:qr;class r extends e{}s=t.templatizeTemplateClass=r}else{const n=e.constructor;class r extends n{}s=t.templatizeTemplateClass=r}let o=t.hostProps;for(let e in o)s.prototype._addPropertyEffect("_host_"+e,s.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:ei(e,i)}),s.prototype._createNotifyingProperty("_host_"+e);fe&&r&&function(e,t,n){const r=n.constructor._properties,{propertyEffects:i}=e,{instanceProps:a}=t;for(let e in i)if(!(r[e]||a&&a[e])){const t=i[e];for(let e=0;e<t.length;e++){const{part:n}=t[e].info;if(!n.signature||!n.signature.static)break}}}(t,n,r)}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),a)!function(e,t){jr=e,Object.setPrototypeOf(e,t.prototype),new t,jr=null}(e,s),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else{Object.setPrototypeOf(e,s.prototype);const n=t.hostProps;for(let t in n)if(t="_host_"+t,t in e){const n=e[t];delete e[t],e.__data[t]=n}}}}function ei(e,t){return function(e,n,r){t.call(e.__templatizeOwner,n.substring("_host_".length),r[n])}}function ti(e,t){return function(e,n,r){t.call(e.__templatizeOwner,e,n,r[n])}}function ni(e,t,n){if(de&&!Wr(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(n=n||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let r=(t?t.constructor:Kr)._parseTemplate(e),i=r.templatizeInstanceClass;i||(i=Qr(e,r,n),r.templatizeInstanceClass=i);const a=Wr(e);Zr(e,r,n,a);let s=class extends i{};return s.prototype._methodHost=a,s.prototype.__dataHost=e,s.prototype.__templatizeOwner=t,s.prototype.__hostProps=r.hostProps,s}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ri=!1;function ii(){if(me&&!oe){if(!ri){ri=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const ai=Vn(Gr(en(HTMLElement)));customElements.define("dom-bind",class extends ai{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),de)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(e,t,n,r){this.mutableData=!0}connectedCallback(){ii()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){Le(Le(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let t=new MutationObserver((()=>{if(e=this.querySelector("template"),!e)throw new Error("dom-bind requires a <template> child");t.disconnect(),this.render()}));return void t.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class si{constructor(e){this.value=e.toString()}toString(){return this.value}}function oi(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof si)return function(e){if(e instanceof si)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}const li=function(e,...t){const n=document.createElement("template");return n.innerHTML=t.reduce(((t,n,r)=>t+oi(n)+e[r+1]),e[0]),n},ci=an(HTMLElement),ui=Gr(ci);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class pi extends ui{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!xe,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),ii()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=Le(Le(this).parentNode);for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){const e=this;let t=this.template=e._templateInfo?e:this.querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()}));return e.observe(this,{childList:!0}),!1}let n={};n[this.as]=!0,n[this.indexAs]=!0,n[this.itemsIndexAs]=!0,this.__ctor=ni(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:n,forwardHostProp:function(e,t){let n=this.__instances;for(let r,i=0;i<n.length&&(r=n[i]);i++)r.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,n){if((r=this.as)===(i=t)||He(r,i)||Ge(r,i)){let r=e[this.itemsIndexAs];t==this.as&&(this.items[r]=n);let i=je(this.as,`${JSCompiler_renameProperty("items",this)}.${r}`,t);this.notifyPath(i,n)}var r,i}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,n=this.__getMethodHost();return function(){return n[t].apply(n,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let n=0;n<t.length;n++)0===e.indexOf(t[n])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(e){this.items&&Array.isArray(this.items),this.__handleItemPath(e.path,e.value)||("items"===e.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(e,t=0){this.__renderDebouncer=sn.debounce(this.__renderDebouncer,t>0?at.after(t):st,e.bind(this)),ln(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),gr()}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[];const t=this.__sortAndFilterItems(e),n=this.__calculateLimit(t.length);this.__updateInstances(e,n,t),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame((()=>this.__continueChunking()))),this._setRenderedItemCount(this.__instances.length),xe&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(e){let t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=n;return this.__filterFn&&(t=t.filter(((t,n,r)=>this.__filterFn(e[t],n,r)))),this.__sortFn&&t.sort(((t,n)=>this.__sortFn(e[t],e[n]))),t}__calculateLimit(e){let t=e;const n=this.__instances.length;if(this.initialCount){let r;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(t=Math.min(e,this.initialCount),r=Math.max(t-n,0),this.__chunkCount=r||1):(r=Math.min(Math.max(e-n,0),this.__chunkCount),t=Math.min(n+r,e)),this.__shouldMeasureChunk=r===this.__chunkCount,this.__shouldContinueChunking=t<e,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,t}__continueChunking(){if(this.__shouldMeasureChunk){const e=performance.now()-this.__renderStartTime,t=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*t)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(e,t,n){const r=this.__itemsIdxToInstIdx={};let i;for(i=0;i<t;i++){let t=this.__instances[i],a=n[i],s=e[a];r[a]=i,t?(t._setPendingProperty(this.as,s),t._setPendingProperty(this.indexAs,i),t._setPendingProperty(this.itemsIndexAs,a),t._flushProperties()):this.__insertInstance(s,i,a)}for(let e=this.__instances.length-1;e>=i;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];const n=Le(t.root);for(let e=0;e<t.children.length;e++){let r=t.children[e];n.appendChild(r)}return t}__attachInstance(e,t){let n=this.__instances[e];t.insertBefore(n.root,this)}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1)}__stampInstance(e,t,n){let r={};return r[this.as]=e,r[this.indexAs]=t,r[this.itemsIndexAs]=n,new this.__ctor(r)}__insertInstance(e,t,n){const r=this.__stampInstance(e,t,n);let i=this.__instances[t+1],a=i?i.children[0]:this;return Le(Le(this).parentNode).insertBefore(r.root,a),this.__instances[t]=r,r}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let n=e.slice(6),r=n.indexOf("."),i=r<0?n:n.substring(0,r);if(i==parseInt(i,10)){let e=r<0?"":n.substring(r+1);this.__handleObservedPaths(e);let a=this.__itemsIdxToInstIdx[i],s=this.__instances[a];if(s){let n=this.as+(e?"."+e:"");s._setPendingPropertyOrPath(n,t,!1,!0),s._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return function(e,t){let n;for(;t;)if(n=t.__dataHost?t:t.__templatizeInstance){if(n.__dataHost==e)return n;t=n.__dataHost}else t=Le(t).parentNode;return null}(this.template,e)}}customElements.define(pi.is,pi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class di extends ci{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=sn.debounce(this.__renderDebouncer,st,(()=>this.__render())),ln(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const e=Le(this).parentNode;e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Le(e).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),ii()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const e=this;let t=e._templateInfo?e:Le(e).querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!Le(this).querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render()}));return e.observe(this,{childList:!0}),!1}this.__template=t}return!0}__ensureInstance(){let e=Le(this).parentNode;if(this.__hasInstance()){let t=this.__getInstanceNodes();if(t&&t.length){if(Le(this).previousSibling!==t[t.length-1])for(let n,r=0;r<t.length&&(n=t[r]);r++)Le(e).insertBefore(n,this)}}else{if(!e)return!1;if(!this.__ensureTemplate())return!1;this.__createAndInsertInstance(e)}return!0}render(){gr()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),xe&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(e){}__teardownInstance(){}_showHideChildren(){}}const hi=ve?class extends di{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(e){const t=this.__dataHost||this;if(de&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const n=t._bindTemplate(this.__template,!0);n.runEffects=(e,t,n)=>{let r=this.__syncInfo;if(this.if)r&&(this.__syncInfo=null,this._showHideChildren(),t=Object.assign(r.changedProps,t)),e(t,n);else if(this.__instance)if(r||(r=this.__syncInfo={runEffects:e,changedProps:{}}),n)for(const e in t){const t=Ue(e);r.changedProps[t]=this.__dataHost[t]}else Object.assign(r.changedProps,t)},this.__instance=t._stampTemplate(this.__template,n),Le(e).insertBefore(this.__instance,this)}__syncHostProperties(){const e=this.__syncInfo;e&&(this.__syncInfo=null,e.runEffects(e.changedProps,!1))}__teardownInstance(){const e=this.__dataHost||this;this.__instance&&(e._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,Yr(e,this.__instance.templateInfo.childNodes)),e||this.__syncHostProperties()}}:class extends di{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(e){this.__ctor||(this.__ctor=ni(this.__template,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Ue(e)]=!0))}})),this.__instance=new this.__ctor,Le(e).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=Le(e[0]).parentNode;if(t){t=Le(t);for(let n,r=0;r<e.length&&(n=e[r]);r++)t.removeChild(n)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let e=this.__invalidProps;if(e){this.__invalidProps=null;for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__instance._flushProperties()}}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,this.__instance._showHideChildren(e)),e||this.__syncHostProperties()}};customElements.define(hi.is,hi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let mi=Ce((e=>{let t=an(e);return class extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(e,t){let n=t.path;if(n==JSCompiler_renameProperty("items",this)){let n=t.base||[],r=this.__lastItems;if(e!==this.__lastMulti&&this.clearSelection(),r){let e=dr(n,r);this.__applySplices(e)}this.__lastItems=n,this.__lastMulti=e}else if(t.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(t.value.indexSplices);else{let e=n.slice(`${JSCompiler_renameProperty("items",this)}.`.length),t=parseInt(e,10);e.indexOf(".")<0&&e==t&&this.__deselectChangedIdx(t)}}__applySplices(e){let t=this.__selectedMap;for(let n=0;n<e.length;n++){let r=e[n];t.forEach(((e,n)=>{e<r.index||(e>=r.index+r.removed.length?t.set(n,e+r.addedCount-r.removed.length):t.set(n,-1))}));for(let e=0;e<r.addedCount;e++){let n=r.index+e;t.has(this.items[n])&&t.set(this.items[n],n)}}this.__updateLinks();let n=0;t.forEach(((e,r)=>{e<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null,t.delete(r)):n++}))}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let e=0;this.__selectedMap.forEach((t=>{t>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${t}`,`${JSCompiler_renameProperty("selected",this)}.${e++}`)}))}else this.__selectedMap.forEach((e=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${e}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${e}`)}))}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(e){return this.__selectedMap.has(e)}isIndexSelected(e){return this.isSelected(this.items[e])}__deselectChangedIdx(e){let t=this.__selectedIndexForItemIndex(e);if(t>=0){let e=0;this.__selectedMap.forEach(((n,r)=>{t==e++&&this.deselect(r)}))}}__selectedIndexForItemIndex(e){let t=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${e}`];if(t)return parseInt(t.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(e){let t=this.__selectedMap.get(e);if(t>=0){let n;this.__selectedMap.delete(e),this.multi&&(n=this.__selectedIndexForItemIndex(t)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null}}deselectIndex(e){this.deselect(this.items[e])}select(e){this.selectIndex(this.items.indexOf(e))}selectIndex(e){let t=this.items[e];this.isSelected(t)?this.toggle&&this.deselectIndex(e):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(t,e),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),t):this.selected=this.selectedItem=t)}}})),fi=mi(ci);class gi extends fi{static get is(){return"array-selector"}static get template(){return null}}customElements.define(gi.is,gi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const yi=new W;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,n){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,n){},styleSubtree(e,t){yi.processStyles(),I(e,t)},styleElement(e){yi.processStyles()},styleDocument(e){yi.processStyles(),I(document.body,e)},getComputedStyleValue:(e,t)=>S(e,t),flushCustomStyles(){},nativeCss:a,nativeShadow:e,cssBuild:n,disableRuntime:i}),window.ShadyCSS.CustomStyleInterface=yi;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const bi=window.ShadyCSS.CustomStyleInterface;class wi extends HTMLElement{constructor(){super(),this._style=null,bi.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const t=e.getAttribute("include");return t&&(e.removeAttribute("include"),e.textContent=function(e){let t=e.trim().split(/\s+/),n="";for(let e=0;e<t.length;e++)n+=Me(t[e]);return n}(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",wi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const vi=Sr(HTMLElement).prototype,xi=$r({_template:li`<style>:host{display:inline-block;position:fixed;clip:rect(0,0,0,0)}</style><div aria-live$="[[mode]]">[[_text]]</div>`,is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},timeout:{type:Number,value:150},_text:{type:String,value:""}},created:function(){xi.instance||(xi.instance=this),document.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(e){this._text="",this.async((function(){this._text=e}),this.timeout)},_onIronAnnounce:function(e){e.detail&&e.detail.text&&this.announce(e.detail.text)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/xi.instance=null,xi.requestAvailability=function(){xi.instance||(xi.instance=document.createElement("iron-a11y-announcer")),document.body?document.body.appendChild(xi.instance):document.addEventListener("load",(function(){document.body.appendChild(xi.instance)}))};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
class Ai{constructor(e){Ai[" "](e),this.type=e&&e.type||"default",this.key=e&&e.key,e&&"value"in e&&(this.value=e.value)}get value(){var e=this.type,t=this.key;if(e&&t)return Ai.types[e]&&Ai.types[e][t]}set value(e){var t=this.type,n=this.key;t&&n&&(t=Ai.types[t]=Ai.types[t]||{},null==e?delete t[n]:t[n]=e)}get list(){if(this.type){var e=Ai.types[this.type];return e?Object.keys(e).map((function(e){return _i[this.type][e]}),this):[]}}byKey(e){return this.key=e,this.value}}Ai[" "]=function(){},Ai.types={};var _i=Ai.types;$r({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function(e,t,n){var r=new Ai({type:e,key:t});return void 0!==n&&n!==r.value?r.value=n:this.value!==r.value&&(this.value=r.value),r},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(e){e&&(this.value=this)},byKey:function(e){return new Ai({type:this.type,key:e}).value}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
let Ei=null;const Ci={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:"_invalidChanged"}},registered:function(){Ei=new Ai({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},get _validator(){return Ei&&Ei.byKey(this.validator)},hasValidator:function(){return null!=this._validator},validate:function(e){return void 0===e&&void 0!==this.value?this.invalid=!this._getValidity(this.value):this.invalid=!this._getValidity(e),!this.invalid},_getValidity:function(e){return!this.hasValidator()||this._validator.validate(e)}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
if($r({_template:li`<style>:host{display:inline-block}</style><slot id="content"></slot>`,is:"iron-input",behaviors:[Ci],properties:{bindValue:{type:String,value:""},value:{type:String,computed:"_computeValue(bindValue)"},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:["_bindValueChanged(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},created:function(){xi.requestAvailability(),this._previousValidInput="",this._patternAlreadyChecked=!1},attached:function(){this._observer=Er(this).observeNodes(function(e){this._initSlottedInput()}.bind(this))},detached:function(){this._observer&&(Er(this).unobserveNodes(this._observer),this._observer=null)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0],this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value),this.fire("iron-input-ready")},get _patternRegExp(){var e;if(this.allowedPattern)e=new RegExp(this.allowedPattern);else if("number"===this.inputElement.type)e=/[0-9.,e-]/;return e},_bindValueChanged:function(e,t){t&&(void 0===e?t.value=null:e!==t.value&&(this.inputElement.value=e),this.autoValidate&&this.validate(),this.fire("bind-value-changed",{value:e}))},_onInput:function(){this.allowedPattern&&!this._patternAlreadyChecked&&(this._checkPatternValidity()||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.inputElement.value=this._previousValidInput));this.bindValue=this._previousValidInput=this.inputElement.value,this._patternAlreadyChecked=!1},_isPrintable:function(e){var t=8==e.keyCode||9==e.keyCode||13==e.keyCode||27==e.keyCode,n=19==e.keyCode||20==e.keyCode||45==e.keyCode||46==e.keyCode||144==e.keyCode||145==e.keyCode||e.keyCode>32&&e.keyCode<41||e.keyCode>111&&e.keyCode<124;return!(t||0==e.charCode&&n)},_onKeypress:function(e){if(this.allowedPattern||"number"===this.inputElement.type){var t=this._patternRegExp;if(t&&!(e.metaKey||e.ctrlKey||e.altKey)){this._patternAlreadyChecked=!0;var n=String.fromCharCode(e.charCode);this._isPrintable(e)&&!t.test(n)&&(e.preventDefault(),this._announceInvalidCharacter("Invalid character "+n+" not entered."))}}},_checkPatternValidity:function(){var e=this._patternRegExp;if(!e)return!0;for(var t=0;t<this.inputElement.value.length;t++)if(!e.test(this.inputElement.value[t]))return!1;return!0},validate:function(){if(!this.inputElement)return this.invalid=!1,!0;var e=this.inputElement.checkValidity();return e&&(this.required&&""===this.bindValue?e=!1:this.hasValidator()&&(e=Ci.validate.call(this,this.bindValue))),this.invalid=!e,this.fire("iron-input-validate"),e},_announceInvalidCharacter:function(e){this.fire("iron-announce",{text:e})},_computeValue:function(e){return e}}),!window.polymerSkipLoadingFontRoboto){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.crossOrigin="anonymous",e.href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic",document.head.appendChild(e)}
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const Ni=li`<custom-style><style is="custom-style">html{--paper-font-common-base:{font-family:Roboto,Noto,sans-serif;-webkit-font-smoothing:antialiased};--paper-font-common-code:{font-family:'Roboto Mono',Consolas,Menlo,monospace;-webkit-font-smoothing:antialiased};--paper-font-common-expensive-kerning:{text-rendering:optimizeLegibility};--paper-font-common-nowrap:{white-space:nowrap;overflow:hidden;text-overflow:ellipsis};--paper-font-display4:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:112px;font-weight:300;letter-spacing:-.044em;line-height:120px};--paper-font-display3:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:56px;font-weight:400;letter-spacing:-.026em;line-height:60px};--paper-font-display2:{@apply --paper-font-common-base;font-size:45px;font-weight:400;letter-spacing:-.018em;line-height:48px};--paper-font-display1:{@apply --paper-font-common-base;font-size:34px;font-weight:400;letter-spacing:-.01em;line-height:40px};--paper-font-headline:{@apply --paper-font-common-base;font-size:24px;font-weight:400;letter-spacing:-.012em;line-height:32px};--paper-font-title:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:20px;font-weight:500;line-height:28px};--paper-font-subhead:{@apply --paper-font-common-base;font-size:16px;font-weight:400;line-height:24px};--paper-font-body2:{@apply --paper-font-common-base;font-size:14px;font-weight:500;line-height:24px};--paper-font-body1:{@apply --paper-font-common-base;font-size:14px;font-weight:400;line-height:20px};--paper-font-caption:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:12px;font-weight:400;letter-spacing:.011em;line-height:20px};--paper-font-menu:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:13px;font-weight:500;line-height:24px};--paper-font-button:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:14px;font-weight:500;letter-spacing:.018em;line-height:24px;text-transform:uppercase};--paper-font-code2:{@apply --paper-font-common-code;font-size:14px;font-weight:700;line-height:20px};--paper-font-code1:{@apply --paper-font-common-code;font-size:14px;font-weight:500;line-height:20px};}</style></custom-style>`;Ni.setAttribute("style","display: none;"),document.head.appendChild(Ni.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Ti={attached:function(){this.fire("addon-attached")},update:function(e){}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/$r({_template:li`<style>:host{display:inline-block;float:right;@apply --paper-font-caption;@apply --paper-input-char-counter;}:host([hidden]){display:none!important}:host(:dir(rtl)){float:left}</style><span>[[_charCounterStr]]</span>`,is:"paper-input-char-counter",behaviors:[Ti],properties:{_charCounterStr:{type:String,value:"0"}},update:function(e){if(e.inputElement){e.value=e.value||"";var t=e.value.toString().length.toString();e.inputElement.hasAttribute("maxlength")&&(t+="/"+e.inputElement.getAttribute("maxlength")),this._charCounterStr=t}}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const ki=li`<custom-style><style is="custom-style">[hidden]{display:none!important}</style></custom-style><custom-style><style is="custom-style">html{--layout:{display:-ms-flexbox;display:-webkit-flex;display:flex};--layout-inline:{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex};--layout-horizontal:{@apply --layout;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row};--layout-horizontal-reverse:{@apply --layout;-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse};--layout-vertical:{@apply --layout;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column};--layout-vertical-reverse:{@apply --layout;-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse};--layout-wrap:{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap};--layout-wrap-reverse:{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse};--layout-flex-auto:{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto};--layout-flex-none:{-ms-flex:none;-webkit-flex:none;flex:none};--layout-flex:{-ms-flex:1 1 .000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:.000000001px;flex-basis:.000000001px};--layout-flex-2:{-ms-flex:2;-webkit-flex:2;flex:2};--layout-flex-3:{-ms-flex:3;-webkit-flex:3;flex:3};--layout-flex-4:{-ms-flex:4;-webkit-flex:4;flex:4};--layout-flex-5:{-ms-flex:5;-webkit-flex:5;flex:5};--layout-flex-6:{-ms-flex:6;-webkit-flex:6;flex:6};--layout-flex-7:{-ms-flex:7;-webkit-flex:7;flex:7};--layout-flex-8:{-ms-flex:8;-webkit-flex:8;flex:8};--layout-flex-9:{-ms-flex:9;-webkit-flex:9;flex:9};--layout-flex-10:{-ms-flex:10;-webkit-flex:10;flex:10};--layout-flex-11:{-ms-flex:11;-webkit-flex:11;flex:11};--layout-flex-12:{-ms-flex:12;-webkit-flex:12;flex:12};--layout-start:{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start};--layout-center:{-ms-flex-align:center;-webkit-align-items:center;align-items:center};--layout-end:{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end};--layout-baseline:{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline};--layout-start-justified:{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start};--layout-center-justified:{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center};--layout-end-justified:{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end};--layout-around-justified:{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around};--layout-justified:{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between};--layout-center-center:{@apply --layout-center;@apply --layout-center-justified;};--layout-self-start:{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start};--layout-self-center:{-ms-align-self:center;-webkit-align-self:center;align-self:center};--layout-self-end:{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end};--layout-self-stretch:{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch};--layout-self-baseline:{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline};--layout-start-aligned:{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start};--layout-end-aligned:{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end};--layout-center-aligned:{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center};--layout-between-aligned:{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between};--layout-around-aligned:{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around};--layout-block:{display:block};--layout-invisible:{visibility:hidden!important};--layout-relative:{position:relative};--layout-fit:{position:absolute;top:0;right:0;bottom:0;left:0};--layout-scroll:{-webkit-overflow-scrolling:touch;overflow:auto};--layout-fullbleed:{margin:0;height:100vh};--layout-fixed-top:{position:fixed;top:0;left:0;right:0};--layout-fixed-right:{position:fixed;top:0;right:0;bottom:0};--layout-fixed-bottom:{position:fixed;right:0;bottom:0;left:0};--layout-fixed-left:{position:fixed;top:0;bottom:0;left:0};}</style></custom-style>`;ki.setAttribute("style","display: none;"),document.head.appendChild(ki.content);var Ii=document.createElement("style");Ii.textContent="[hidden] { display: none !important; }",document.head.appendChild(Ii);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Si=li`<custom-style><style is="custom-style">html{--google-red-100:#f4c7c3;--google-red-300:#e67c73;--google-red-500:#db4437;--google-red-700:#c53929;--google-blue-100:#c6dafc;--google-blue-300:#7baaf7;--google-blue-500:#4285f4;--google-blue-700:#3367d6;--google-green-100:#b7e1cd;--google-green-300:#57bb8a;--google-green-500:#0f9d58;--google-green-700:#0b8043;--google-yellow-100:#fce8b2;--google-yellow-300:#f7cb4d;--google-yellow-500:#f4b400;--google-yellow-700:#f09300;--google-grey-100:#f5f5f5;--google-grey-300:#e0e0e0;--google-grey-500:#9e9e9e;--google-grey-700:#616161;--paper-red-50:#ffebee;--paper-red-100:#ffcdd2;--paper-red-200:#ef9a9a;--paper-red-300:#e57373;--paper-red-400:#ef5350;--paper-red-500:#f44336;--paper-red-600:#e53935;--paper-red-700:#d32f2f;--paper-red-800:#c62828;--paper-red-900:#b71c1c;--paper-red-a100:#ff8a80;--paper-red-a200:#ff5252;--paper-red-a400:#ff1744;--paper-red-a700:#d50000;--paper-pink-50:#fce4ec;--paper-pink-100:#f8bbd0;--paper-pink-200:#f48fb1;--paper-pink-300:#f06292;--paper-pink-400:#ec407a;--paper-pink-500:#e91e63;--paper-pink-600:#d81b60;--paper-pink-700:#c2185b;--paper-pink-800:#ad1457;--paper-pink-900:#880e4f;--paper-pink-a100:#ff80ab;--paper-pink-a200:#ff4081;--paper-pink-a400:#f50057;--paper-pink-a700:#c51162;--paper-purple-50:#f3e5f5;--paper-purple-100:#e1bee7;--paper-purple-200:#ce93d8;--paper-purple-300:#ba68c8;--paper-purple-400:#ab47bc;--paper-purple-500:#9c27b0;--paper-purple-600:#8e24aa;--paper-purple-700:#7b1fa2;--paper-purple-800:#6a1b9a;--paper-purple-900:#4a148c;--paper-purple-a100:#ea80fc;--paper-purple-a200:#e040fb;--paper-purple-a400:#d500f9;--paper-purple-a700:#aa00ff;--paper-deep-purple-50:#ede7f6;--paper-deep-purple-100:#d1c4e9;--paper-deep-purple-200:#b39ddb;--paper-deep-purple-300:#9575cd;--paper-deep-purple-400:#7e57c2;--paper-deep-purple-500:#673ab7;--paper-deep-purple-600:#5e35b1;--paper-deep-purple-700:#512da8;--paper-deep-purple-800:#4527a0;--paper-deep-purple-900:#311b92;--paper-deep-purple-a100:#b388ff;--paper-deep-purple-a200:#7c4dff;--paper-deep-purple-a400:#651fff;--paper-deep-purple-a700:#6200ea;--paper-indigo-50:#e8eaf6;--paper-indigo-100:#c5cae9;--paper-indigo-200:#9fa8da;--paper-indigo-300:#7986cb;--paper-indigo-400:#5c6bc0;--paper-indigo-500:#3f51b5;--paper-indigo-600:#3949ab;--paper-indigo-700:#303f9f;--paper-indigo-800:#283593;--paper-indigo-900:#1a237e;--paper-indigo-a100:#8c9eff;--paper-indigo-a200:#536dfe;--paper-indigo-a400:#3d5afe;--paper-indigo-a700:#304ffe;--paper-blue-50:#e3f2fd;--paper-blue-100:#bbdefb;--paper-blue-200:#90caf9;--paper-blue-300:#64b5f6;--paper-blue-400:#42a5f5;--paper-blue-500:#2196f3;--paper-blue-600:#1e88e5;--paper-blue-700:#1976d2;--paper-blue-800:#1565c0;--paper-blue-900:#0d47a1;--paper-blue-a100:#82b1ff;--paper-blue-a200:#448aff;--paper-blue-a400:#2979ff;--paper-blue-a700:#2962ff;--paper-light-blue-50:#e1f5fe;--paper-light-blue-100:#b3e5fc;--paper-light-blue-200:#81d4fa;--paper-light-blue-300:#4fc3f7;--paper-light-blue-400:#29b6f6;--paper-light-blue-500:#03a9f4;--paper-light-blue-600:#039be5;--paper-light-blue-700:#0288d1;--paper-light-blue-800:#0277bd;--paper-light-blue-900:#01579b;--paper-light-blue-a100:#80d8ff;--paper-light-blue-a200:#40c4ff;--paper-light-blue-a400:#00b0ff;--paper-light-blue-a700:#0091ea;--paper-cyan-50:#e0f7fa;--paper-cyan-100:#b2ebf2;--paper-cyan-200:#80deea;--paper-cyan-300:#4dd0e1;--paper-cyan-400:#26c6da;--paper-cyan-500:#00bcd4;--paper-cyan-600:#00acc1;--paper-cyan-700:#0097a7;--paper-cyan-800:#00838f;--paper-cyan-900:#006064;--paper-cyan-a100:#84ffff;--paper-cyan-a200:#18ffff;--paper-cyan-a400:#00e5ff;--paper-cyan-a700:#00b8d4;--paper-teal-50:#e0f2f1;--paper-teal-100:#b2dfdb;--paper-teal-200:#80cbc4;--paper-teal-300:#4db6ac;--paper-teal-400:#26a69a;--paper-teal-500:#009688;--paper-teal-600:#00897b;--paper-teal-700:#00796b;--paper-teal-800:#00695c;--paper-teal-900:#004d40;--paper-teal-a100:#a7ffeb;--paper-teal-a200:#64ffda;--paper-teal-a400:#1de9b6;--paper-teal-a700:#00bfa5;--paper-green-50:#e8f5e9;--paper-green-100:#c8e6c9;--paper-green-200:#a5d6a7;--paper-green-300:#81c784;--paper-green-400:#66bb6a;--paper-green-500:#4caf50;--paper-green-600:#43a047;--paper-green-700:#388e3c;--paper-green-800:#2e7d32;--paper-green-900:#1b5e20;--paper-green-a100:#b9f6ca;--paper-green-a200:#69f0ae;--paper-green-a400:#00e676;--paper-green-a700:#00c853;--paper-light-green-50:#f1f8e9;--paper-light-green-100:#dcedc8;--paper-light-green-200:#c5e1a5;--paper-light-green-300:#aed581;--paper-light-green-400:#9ccc65;--paper-light-green-500:#8bc34a;--paper-light-green-600:#7cb342;--paper-light-green-700:#689f38;--paper-light-green-800:#558b2f;--paper-light-green-900:#33691e;--paper-light-green-a100:#ccff90;--paper-light-green-a200:#b2ff59;--paper-light-green-a400:#76ff03;--paper-light-green-a700:#64dd17;--paper-lime-50:#f9fbe7;--paper-lime-100:#f0f4c3;--paper-lime-200:#e6ee9c;--paper-lime-300:#dce775;--paper-lime-400:#d4e157;--paper-lime-500:#cddc39;--paper-lime-600:#c0ca33;--paper-lime-700:#afb42b;--paper-lime-800:#9e9d24;--paper-lime-900:#827717;--paper-lime-a100:#f4ff81;--paper-lime-a200:#eeff41;--paper-lime-a400:#c6ff00;--paper-lime-a700:#aeea00;--paper-yellow-50:#fffde7;--paper-yellow-100:#fff9c4;--paper-yellow-200:#fff59d;--paper-yellow-300:#fff176;--paper-yellow-400:#ffee58;--paper-yellow-500:#ffeb3b;--paper-yellow-600:#fdd835;--paper-yellow-700:#fbc02d;--paper-yellow-800:#f9a825;--paper-yellow-900:#f57f17;--paper-yellow-a100:#ffff8d;--paper-yellow-a200:#ffff00;--paper-yellow-a400:#ffea00;--paper-yellow-a700:#ffd600;--paper-amber-50:#fff8e1;--paper-amber-100:#ffecb3;--paper-amber-200:#ffe082;--paper-amber-300:#ffd54f;--paper-amber-400:#ffca28;--paper-amber-500:#ffc107;--paper-amber-600:#ffb300;--paper-amber-700:#ffa000;--paper-amber-800:#ff8f00;--paper-amber-900:#ff6f00;--paper-amber-a100:#ffe57f;--paper-amber-a200:#ffd740;--paper-amber-a400:#ffc400;--paper-amber-a700:#ffab00;--paper-orange-50:#fff3e0;--paper-orange-100:#ffe0b2;--paper-orange-200:#ffcc80;--paper-orange-300:#ffb74d;--paper-orange-400:#ffa726;--paper-orange-500:#ff9800;--paper-orange-600:#fb8c00;--paper-orange-700:#f57c00;--paper-orange-800:#ef6c00;--paper-orange-900:#e65100;--paper-orange-a100:#ffd180;--paper-orange-a200:#ffab40;--paper-orange-a400:#ff9100;--paper-orange-a700:#ff6500;--paper-deep-orange-50:#fbe9e7;--paper-deep-orange-100:#ffccbc;--paper-deep-orange-200:#ffab91;--paper-deep-orange-300:#ff8a65;--paper-deep-orange-400:#ff7043;--paper-deep-orange-500:#ff5722;--paper-deep-orange-600:#f4511e;--paper-deep-orange-700:#e64a19;--paper-deep-orange-800:#d84315;--paper-deep-orange-900:#bf360c;--paper-deep-orange-a100:#ff9e80;--paper-deep-orange-a200:#ff6e40;--paper-deep-orange-a400:#ff3d00;--paper-deep-orange-a700:#dd2c00;--paper-brown-50:#efebe9;--paper-brown-100:#d7ccc8;--paper-brown-200:#bcaaa4;--paper-brown-300:#a1887f;--paper-brown-400:#8d6e63;--paper-brown-500:#795548;--paper-brown-600:#6d4c41;--paper-brown-700:#5d4037;--paper-brown-800:#4e342e;--paper-brown-900:#3e2723;--paper-grey-50:#fafafa;--paper-grey-100:#f5f5f5;--paper-grey-200:#eeeeee;--paper-grey-300:#e0e0e0;--paper-grey-400:#bdbdbd;--paper-grey-500:#9e9e9e;--paper-grey-600:#757575;--paper-grey-700:#616161;--paper-grey-800:#424242;--paper-grey-900:#212121;--paper-blue-grey-50:#eceff1;--paper-blue-grey-100:#cfd8dc;--paper-blue-grey-200:#b0bec5;--paper-blue-grey-300:#90a4ae;--paper-blue-grey-400:#78909c;--paper-blue-grey-500:#607d8b;--paper-blue-grey-600:#546e7a;--paper-blue-grey-700:#455a64;--paper-blue-grey-800:#37474f;--paper-blue-grey-900:#263238;--dark-divider-opacity:0.12;--dark-disabled-opacity:0.38;--dark-secondary-opacity:0.54;--dark-primary-opacity:0.87;--light-divider-opacity:0.12;--light-disabled-opacity:0.3;--light-secondary-opacity:0.7;--light-primary-opacity:1.0}</style></custom-style>`;Si.setAttribute("style","display: none;"),document.head.appendChild(Si.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Bi=li`<custom-style><style is="custom-style">html{--primary-text-color:var(--light-theme-text-color);--primary-background-color:var(--light-theme-background-color);--secondary-text-color:var(--light-theme-secondary-color);--disabled-text-color:var(--light-theme-disabled-color);--divider-color:var(--light-theme-divider-color);--error-color:var(--paper-deep-orange-a700);--primary-color:var(--paper-indigo-500);--light-primary-color:var(--paper-indigo-100);--dark-primary-color:var(--paper-indigo-700);--accent-color:var(--paper-pink-a200);--light-accent-color:var(--paper-pink-a100);--dark-accent-color:var(--paper-pink-a400);--light-theme-background-color:#ffffff;--light-theme-base-color:#000000;--light-theme-text-color:var(--paper-grey-900);--light-theme-secondary-color:#737373;--light-theme-disabled-color:#9b9b9b;--light-theme-divider-color:#dbdbdb;--dark-theme-background-color:var(--paper-grey-900);--dark-theme-base-color:#ffffff;--dark-theme-text-color:#ffffff;--dark-theme-secondary-color:#bcbcbc;--dark-theme-disabled-color:#646464;--dark-theme-divider-color:#3c3c3c;--text-primary-color:var(--dark-theme-text-color);--default-primary-color:var(--primary-color)}</style></custom-style>`;Bi.setAttribute("style","display: none;"),document.head.appendChild(Bi.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Oi=li`<custom-style><style is="custom-style">html{--paper-input-container-shared-input-style:{position:relative;outline:0;box-shadow:none;padding:0;margin:0;width:100%;max-width:100%;background:0 0;border:none;color:var(--paper-input-container-input-color,var(--primary-text-color));-webkit-appearance:none;text-align:inherit;vertical-align:var(--paper-input-container-input-align,bottom);@apply --paper-font-subhead;};}</style></custom-style>`;Oi.setAttribute("style","display: none;"),document.head.appendChild(Oi.content),$r({_template:li`<style>:host{display:block;padding:8px 0;@apply --paper-input-container;}:host([inline]){display:inline-block}:host([disabled]){pointer-events:none;opacity:.33;@apply --paper-input-container-disabled;}:host([hidden]){display:none!important}[hidden]{display:none!important}.floated-label-placeholder{@apply --paper-font-caption;}.underline{height:2px;position:relative}.focused-line{@apply --layout-fit;border-bottom:2px solid var(--paper-input-container-focus-color,var(--primary-color));-webkit-transform-origin:center center;transform-origin:center center;-webkit-transform:scale3d(0,1,1);transform:scale3d(0,1,1);@apply --paper-input-container-underline-focus;}.underline.is-highlighted .focused-line{-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform .25s;transition:transform .25s;@apply --paper-transition-easing;}.underline.is-invalid .focused-line{border-color:var(--paper-input-container-invalid-color,var(--error-color));-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform .25s;transition:transform .25s;@apply --paper-transition-easing;}.unfocused-line{@apply --layout-fit;border-bottom:1px solid var(--paper-input-container-color,var(--secondary-text-color));@apply --paper-input-container-underline;}:host([disabled]) .unfocused-line{border-bottom:1px dashed;border-color:var(--paper-input-container-color,var(--secondary-text-color));@apply --paper-input-container-underline-disabled;}.input-wrapper{@apply --layout-horizontal;@apply --layout-center;position:relative}.input-content{@apply --layout-flex-auto;@apply --layout-relative;max-width:100%}.input-content ::slotted(.paper-input-label),.input-content ::slotted(label){position:absolute;top:0;left:0;width:100%;font:inherit;color:var(--paper-input-container-color,var(--secondary-text-color));-webkit-transition:-webkit-transform .25s,width .25s;transition:transform .25s,width .25s;-webkit-transform-origin:left top;transform-origin:left top;min-height:1px;@apply --paper-font-common-nowrap;@apply --paper-font-subhead;@apply --paper-input-container-label;@apply --paper-transition-easing;}.input-content ::slotted(.paper-input-label):before,.input-content ::slotted(label):before{@apply --paper-input-container-label-before;}.input-content ::slotted(.paper-input-label):after,.input-content ::slotted(label):after{@apply --paper-input-container-label-after;}.input-content.label-is-floating ::slotted(.paper-input-label),.input-content.label-is-floating ::slotted(label){-webkit-transform:translateY(-75%) scale(.75);transform:translateY(-75%) scale(.75);width:133%;@apply --paper-input-container-label-floating;}:host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label),:host(:dir(rtl)) .input-content.label-is-floating ::slotted(label){right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top}.input-content.label-is-highlighted ::slotted(.paper-input-label),.input-content.label-is-highlighted ::slotted(label){color:var(--paper-input-container-focus-color,var(--primary-color));@apply --paper-input-container-label-focus;}.input-content.is-invalid ::slotted(.paper-input-label),.input-content.is-invalid ::slotted(label){color:var(--paper-input-container-invalid-color,var(--error-color))}.input-content.label-is-hidden ::slotted(.paper-input-label),.input-content.label-is-hidden ::slotted(label){visibility:hidden}.input-content ::slotted(.paper-input-input),.input-content ::slotted(input),.input-content ::slotted(iron-autogrow-textarea),.input-content ::slotted(iron-input),.input-content ::slotted(textarea){@apply --paper-input-container-shared-input-style;color:var(--paper-input-container-input-color,var(--primary-text-color));@apply --paper-input-container-input;}.input-content ::slotted(input)::-webkit-inner-spin-button,.input-content ::slotted(input)::-webkit-outer-spin-button{@apply --paper-input-container-input-webkit-spinner;}.input-content.focused ::slotted(.paper-input-input),.input-content.focused ::slotted(input),.input-content.focused ::slotted(iron-autogrow-textarea),.input-content.focused ::slotted(iron-input),.input-content.focused ::slotted(textarea){@apply --paper-input-container-input-focus;}.input-content.is-invalid ::slotted(.paper-input-input),.input-content.is-invalid ::slotted(input),.input-content.is-invalid ::slotted(iron-autogrow-textarea),.input-content.is-invalid ::slotted(iron-input),.input-content.is-invalid ::slotted(textarea){@apply --paper-input-container-input-invalid;}.prefix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-prefix;}.suffix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-suffix;}.input-content ::slotted(input){min-width:0}.input-content ::slotted(textarea){resize:none}.add-on-content{position:relative}.add-on-content.is-invalid ::slotted(*){color:var(--paper-input-container-invalid-color,var(--error-color))}.add-on-content.is-highlighted ::slotted(*){color:var(--paper-input-container-focus-color,var(--primary-color))}</style><div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]"></div><div class="input-wrapper"><span class="prefix"><slot name="prefix"></slot></span><div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer"><slot name="label"></slot><slot name="input"></slot></div><span class="suffix"><slot name="suffix"></slot></span></div><div class$="[[_computeUnderlineClass(focused,invalid)]]"><div class="unfocused-line"></div><div class="focused-line"></div></div><div class$="[[_computeAddOnContentClass(focused,invalid)]]"><slot name="add-on"></slot></div>`,is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,iron-input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return We(this.attrForValue)},get _inputElement(){return Er(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this.__isFirstValueUpdate=!0,this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput),this._inputElementValue&&""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(e){this._addons||(this._addons=[]);var t=e.target;-1===this._addons.indexOf(t)&&(this._addons.push(t),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(e){this._handleValueAndAutoValidate(e.target)},_onValueChanged:function(e){var t=e.target;this.__isFirstValueUpdate&&(this.__isFirstValueUpdate=!1,void 0===t.value||""===t.value)||this._handleValueAndAutoValidate(e.target)},_handleValue:function(e){var t=this._inputElementValue;t||0===t||"number"===e.type&&!e.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:e,value:t,invalid:this.invalid})},_handleValueAndAutoValidate:function(e){var t;this.autoValidate&&e&&(t=e.validate?e.validate(this._inputElementValue):e.checkValidity(),this.invalid=!t);this._handleValue(e)},_onIronInputValidate:function(e){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(e){for(var t,n=0;t=this._addons[n];n++)t.update(e)},_computeInputContentClass:function(e,t,n,r,i){var a="input-content";if(e)i&&(a+=" label-is-hidden"),r&&(a+=" is-invalid");else{var s=this.querySelector("label");t||i?(a+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",r?a+=" is-invalid":n&&(a+=" label-is-highlighted")):(s&&(this.$.labelAndInputContainer.style.position="relative"),r&&(a+=" is-invalid"))}return n&&(a+=" focused"),a},_computeUnderlineClass:function(e,t){var n="underline";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n},_computeAddOnContentClass:function(e,t){var n="add-on-content";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
$r({_template:li`<style>:host{display:inline-block;visibility:hidden;color:var(--paper-input-container-invalid-color,var(--error-color));@apply --paper-font-caption;@apply --paper-input-error;position:absolute;left:0;right:0}:host([invalid]){visibility:visible}#a11yWrapper{visibility:hidden}:host([invalid]) #a11yWrapper{visibility:visible}</style><div id="a11yWrapper"><slot></slot></div>`,is:"paper-input-error",behaviors:[Ti],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(e){this._setInvalid(e.invalid)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Fi={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1}},attached:function(){},detached:function(){}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/var Pi={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},Di={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},Ri={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},Mi=/[a-z0-9*]/,Li=/U\+/,$i=/^arrow/,Ui=/^space(bar)?/,Hi=/^escape$/;function Gi(e,t){var n="";if(e){var r=e.toLowerCase();" "===r||Ui.test(r)?n="space":Hi.test(r)?n="esc":1==r.length?t&&!Mi.test(r)||(n=r):n=$i.test(r)?r.replace("arrow",""):"multiply"==r?"*":r}return n}function ji(e,t){return e.key?Gi(e.key,t):e.detail&&e.detail.key?Gi(e.detail.key,t):(n=e.keyIdentifier,r="",n&&(n in Pi?r=Pi[n]:Li.test(n)?(n=parseInt(n.replace("U+","0x"),16),r=String.fromCharCode(n).toLowerCase()):r=n.toLowerCase()),r||function(e){var t="";return Number(e)&&(t=e>=65&&e<=90?String.fromCharCode(32+e):e>=112&&e<=123?"f"+(e-112+1):e>=48&&e<=57?String(e-48):e>=96&&e<=105?String(e-96):Di[e]),t}(e.keyCode)||"");var n,r}function Xi(e,t){return ji(t,e.hasModifiers)===e.key&&(!e.hasModifiers||!!t.shiftKey==!!e.shiftKey&&!!t.ctrlKey==!!e.ctrlKey&&!!t.altKey==!!e.altKey&&!!t.metaKey==!!e.metaKey)}function qi(e){return e.trim().split(" ").map((function(e){return function(e){return 1===e.length?{combo:e,key:e,event:"keydown"}:e.split("+").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n[1];return r in Ri?(e[Ri[r]]=!0,e.hasModifiers=!0):(e.key=r,e.event=i||"keydown"),e}),{combo:e.split(":").shift()})}(e)}))}const Vi={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(e,t){this._imperativeKeyBindings[e]=t,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(e,t){for(var n=qi(t),r=0;r<n.length;++r)if(Xi(n[r],e))return!0;return!1},_collectKeyBindings:function(){var e=this.behaviors.map((function(e){return e.keyBindings}));return-1===e.indexOf(this.keyBindings)&&e.push(this.keyBindings),e},_prepKeyBindings:function(){for(var e in this._keyBindings={},this._collectKeyBindings().forEach((function(e){for(var t in e)this._addKeyBinding(t,e[t])}),this),this._imperativeKeyBindings)this._addKeyBinding(e,this._imperativeKeyBindings[e]);for(var t in this._keyBindings)this._keyBindings[t].sort((function(e,t){var n=e[0].hasModifiers;return n===t[0].hasModifiers?0:n?-1:1}))},_addKeyBinding:function(e,t){qi(e).forEach((function(e){this._keyBindings[e.event]=this._keyBindings[e.event]||[],this._keyBindings[e.event].push([e,t])}),this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach((function(e){var t=this._keyBindings[e],n=this._onKeyBindingEvent.bind(this,t);this._boundKeyHandlers.push([this.keyEventTarget,e,n]),this.keyEventTarget.addEventListener(e,n)}),this)},_unlistenKeyEventListeners:function(){for(var e,t,n,r;this._boundKeyHandlers.length;)t=(e=this._boundKeyHandlers.pop())[0],n=e[1],r=e[2],t.removeEventListener(n,r)},_onKeyBindingEvent:function(e,t){if(this.stopKeyboardEventPropagation&&t.stopPropagation(),!t.defaultPrevented)for(var n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];if(Xi(r,t)&&(this._triggerKeyHandler(r,i,t),t.defaultPrevented))return}},_triggerKeyHandler:function(e,t,n){var r=Object.create(e);r.keyboardEvent=n;var i=new CustomEvent(e.event,{detail:r,cancelable:!0});this[t].call(this,i),i.defaultPrevented&&n.preventDefault()}},zi={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(e){this._setFocused("focus"===e.type)},_disabledChanged:function(e,t){this.setAttribute("aria-disabled",e?"true":"false"),this.style.pointerEvents=e?"none":"",e?(this._oldTabIndex=this.getAttribute("tabindex"),this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(null===this._oldTabIndex?this.removeAttribute("tabindex"):this.setAttribute("tabindex",this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}},Yi={NextLabelID:1,NextAddonID:1,NextInputID:1},Ki={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$||(this.$={}),this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId)),this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy(),!ci&&this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(e,t){return e=e?e+" "+t:t},_onAddonAttached:function(e){var t=Er(e).rootTarget;if(t.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,t.id);else{var n="paper-input-add-on-"+Yi.NextAddonID++;t.id=n,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,n)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(e){zi._focusBlurHandler.call(this,e),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(e){var t=this.getAttribute("tabindex");this._shiftTabPressed=!0,this.setAttribute("tabindex","-1"),this.async((function(){this.setAttribute("tabindex",t),this._shiftTabPressed=!1}),1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(e){try{var t=this.inputElement.selectionStart;this.value=e,this.inputElement.selectionStart=t,this.inputElement.selectionEnd=t}catch(t){this.value=e}},_computeAlwaysFloatLabel:function(e,t){return t||e},_updateAriaLabelledBy:function(){var e,t=Er(this.root).querySelector("label");t?(t.id?e=t.id:(e="paper-input-label-"+Yi.NextLabelID++,t.id=e),this._ariaLabelledBy=e):this._ariaLabelledBy=""},_generateInputId:function(){this._inputId&&""!==this._inputId||(this._inputId="input-"+Yi.NextInputID++)},_onChange:function(e){this.shadowRoot&&this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var e=document.activeElement;e instanceof HTMLElement&&e!==document.body&&e!==document.documentElement||this._focusableElement.focus()}}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
$r({is:"paper-input",_template:li`<style>:host{display:block}:host([focused]){outline:0}:host([hidden]){display:none!important}input{min-width:0}iron-input>input{@apply --paper-input-container-shared-input-style;font-family:inherit;font-weight:inherit;font-size:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;text-shadow:inherit;color:inherit;cursor:inherit}input:disabled{@apply --paper-input-container-input-disabled;}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{@apply --paper-input-container-input-webkit-spinner;}input::-webkit-clear-button{@apply --paper-input-container-input-webkit-clear;}input::-webkit-calendar-picker-indicator{@apply --paper-input-container-input-webkit-calendar-picker-indicator;}input::-webkit-input-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}input:-moz-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}input::-moz-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}input::-ms-clear{@apply --paper-input-container-ms-clear;}input::-ms-reveal{@apply --paper-input-container-ms-reveal;}input:-ms-input-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}label{pointer-events:none}</style><paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><slot name="prefix" slot="prefix"></slot><label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label><iron-input bind-value="{{value}}" slot="input" class="input-element" id$="[[_inputId]]" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]"><input aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]" role$="[[inputRole]]" aria-haspopup$="[[inputAriaHaspopup]]"></iron-input><slot name="suffix" slot="suffix"></slot><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container>`,behaviors:[[zi,Vi,Ki],Fi],properties:{value:{type:String},inputRole:{type:String,value:void 0},inputAriaHaspopup:{type:String,value:void 0}},get _focusableElement(){return this.inputElement._inputElement},listeners:{"iron-input-ready":"_onIronInputReady"},_onIronInputReady:function(){this.$.nativeInput||(this.$.nativeInput=this.$$("input")),this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.$.nativeInput.type)&&(this.alwaysFloatLabel=!0),this.inputElement.bindValue&&this.$.container._handleValueAndAutoValidate(this.inputElement)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Ji={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(e){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required","true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked,this.fire("iron-change")},_valueChanged:function(){void 0!==this.value&&null!==this.value||(this.value="on")}},Wi=[Fi,Ci,Ji],Qi={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(e){this._detectKeyboardFocus(e),e||this._setPressed(!1)},_detectKeyboardFocus:function(e){this._setReceivedFocusFromKeyboard(!this.pointerDown&&e)},_userActivate:function(e){this.active!==e&&(this.active=e,this.fire("change"))},_downHandler:function(e){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(e){var t=e.detail.keyboardEvent,n=Er(t).localTarget;this.isLightDescendant(n)||(t.preventDefault(),t.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(e){var t=e.detail.keyboardEvent,n=Er(t).localTarget;this.isLightDescendant(n)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async((function(){this.click()}),1)},_pressedChanged:function(e){this._changedButtonState()},_ariaActiveAttributeChanged:function(e,t){t&&t!=e&&this.hasAttribute(t)&&this.removeAttribute(t)},_activeChanged:function(e,t){this.toggles?this.setAttribute(this.ariaActiveAttribute,e?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Zi=[Vi,Qi];
/**
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
var ea={distance:function(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function ta(e){this.element=e,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function na(e){this.element=e,this.color=window.getComputedStyle(e).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),Er(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}ta.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(e,t){var n=ea.distance(e,t,0,0),r=ea.distance(e,t,this.width,0),i=ea.distance(e,t,0,this.height),a=ea.distance(e,t,this.width,this.height);return Math.max(n,r,i,a)}},na.MAX_RADIUS=300,na.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var e;return this.mouseDownStart?(e=ea.now()-this.mouseDownStart,this.mouseUpStart&&(e-=this.mouseUpElapsed),e):0},get mouseUpElapsed(){return this.mouseUpStart?ea.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var e=this.containerMetrics.width*this.containerMetrics.width,t=this.containerMetrics.height*this.containerMetrics.height,n=1.1*Math.min(Math.sqrt(e+t),na.MAX_RADIUS)+5,r=1.1-n/na.MAX_RADIUS*.2,i=this.mouseInteractionSeconds/r,a=n*(1-Math.pow(80,-i));return Math.abs(a)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var e=.3*this.mouseUpElapsedSeconds,t=this.opacity;return Math.max(0,Math.min(e,t))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,na.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,na.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new ta(this.element)},draw:function(){var e,t,n;this.wave.style.opacity=this.opacity,e=this.radius/(this.containerMetrics.size/2),t=this.xNow-this.containerMetrics.width/2,n=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+t+"px, "+n+"px)",this.waveContainer.style.transform="translate3d("+t+"px, "+n+"px, 0)",this.wave.style.webkitTransform="scale("+e+","+e+")",this.wave.style.transform="scale3d("+e+","+e+",1)"},downAction:function(e){var t=this.containerMetrics.width/2,n=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=ea.now(),this.center?(this.xStart=t,this.yStart=n,this.slideDistance=ea.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=e?e.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=e?e.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=t,this.yEnd=n,this.slideDistance=ea.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(e){this.isMouseDown&&(this.mouseUpStart=ea.now())},remove:function(){Er(Er(this.waveContainer).parentNode).removeChild(this.waveContainer)}},$r({_template:li`<style>:host{display:block;position:absolute;border-radius:inherit;overflow:hidden;top:0;left:0;right:0;bottom:0;pointer-events:none}:host([animating]){-webkit-transform:translate(0,0);transform:translate3d(0,0,0)}#background,#waves,.wave,.wave-container{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%}#background,.wave{opacity:0}#waves,.wave{overflow:hidden}.wave,.wave-container{border-radius:50%}:host(.circle) #background,:host(.circle) #waves{border-radius:50%}:host(.circle) .wave-container{overflow:hidden}</style><div id="background"></div><div id="waves"></div>`,is:"paper-ripple",behaviors:[Vi],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){11==Er(this).parentNode.nodeType?this.keyEventTarget=Er(this).getOwnerRoot().host:this.keyEventTarget=Er(this).parentNode;var e=this.keyEventTarget;this.listen(e,"up","uiUpAction"),this.listen(e,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var e=0;e<this.ripples.length;++e)if(!this.ripples[e].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async((function(){this.upAction()}),1)},uiDownAction:function(e){this.noink||this.downAction(e)},downAction:function(e){this.holdDown&&this.ripples.length>0||(this.addRipple().downAction(e),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(e){this.noink||this.upAction(e)},upAction:function(e){this.holdDown||(this.ripples.forEach((function(t){t.upAction(e)})),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor="",this.fire("transitionend")},addRipple:function(){var e=new na(this);return Er(this.$.waves).appendChild(e.waveContainer),this.$.background.style.backgroundColor=e.color,this.ripples.push(e),this._setAnimating(!0),e},removeRipple:function(e){var t=this.ripples.indexOf(e);t<0||(this.ripples.splice(t,1),e.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var e,t;for(e=0;e<this.ripples.length;++e)(t=this.ripples[e]).draw(),this.$.background.style.opacity=t.outerOpacity,t.isOpacityFullyDecayed&&!t.isRestingAtMaxRadius&&this.removeRipple(t);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},animateRipple:function(){return this.animate()},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(e,t){void 0!==t&&(e?this.downAction():this.upAction())}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const ra={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(e){Qi._downHandler.call(this,e),this.pressed&&this.ensureRipple(e)},ensureRipple:function(e){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var t=this._rippleContainer||this.root;if(t&&Er(t).appendChild(this._ripple),e){var n=Er(this._rippleContainer||this),r=Er(e).rootTarget;n.deepContains(r)&&this._ripple.uiDownAction(e)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(e){this.hasRipple()&&(this._ripple.noink=e)}},ia={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(e){e&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=e)},_createRipple:function(){var e=ra._createRipple();return e.id="ink",e.setAttribute("center",""),e.classList.add("circle"),e}},aa=[[Zi,zi,ra,ia],Wi,{_checkedChanged:function(){Ji._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){ra._buttonStateChanged.call(this),this.disabled||this.isAttached&&(this.checked=this.active)}}],sa=li`<style>:host{display:inline-block;white-space:nowrap;cursor:pointer;--calculated-paper-checkbox-size:var(--paper-checkbox-size, 18px);--calculated-paper-checkbox-ink-size:var(--paper-checkbox-ink-size, -1px);@apply --paper-font-common-base;line-height:0;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none!important}:host(:focus){outline:0}.hidden{display:none}#checkboxContainer{display:inline-block;position:relative;width:var(--calculated-paper-checkbox-size);height:var(--calculated-paper-checkbox-size);min-width:var(--calculated-paper-checkbox-size);margin:var(--paper-checkbox-margin,initial);vertical-align:var(--paper-checkbox-vertical-align,middle);background-color:var(--paper-checkbox-unchecked-background-color,transparent)}#ink{position:absolute;top:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size))/ 2);left:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size))/ 2);width:var(--calculated-paper-checkbox-ink-size);height:var(--calculated-paper-checkbox-ink-size);color:var(--paper-checkbox-unchecked-ink-color,var(--primary-text-color));opacity:.6;pointer-events:none}#ink:dir(rtl){right:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size))/ 2);left:auto}#ink[checked]{color:var(--paper-checkbox-checked-ink-color,var(--primary-color))}#checkbox{position:relative;box-sizing:border-box;height:100%;border:solid 2px;border-color:var(--paper-checkbox-unchecked-color,var(--primary-text-color));border-radius:2px;pointer-events:none;-webkit-transition:background-color 140ms,border-color 140ms;transition:background-color 140ms,border-color 140ms;-webkit-transition-duration:var(--paper-checkbox-animation-duration,140ms);transition-duration:var(--paper-checkbox-animation-duration,140ms)}#checkbox.checked #checkmark{-webkit-animation:checkmark-expand 140ms ease-out forwards;animation:checkmark-expand 140ms ease-out forwards;-webkit-animation-duration:var(--paper-checkbox-animation-duration,140ms);animation-duration:var(--paper-checkbox-animation-duration,140ms)}@-webkit-keyframes checkmark-expand{0%{-webkit-transform:scale(0,0) rotate(45deg)}100%{-webkit-transform:scale(1,1) rotate(45deg)}}@keyframes checkmark-expand{0%{transform:scale(0,0) rotate(45deg)}100%{transform:scale(1,1) rotate(45deg)}}#checkbox.checked{background-color:var(--paper-checkbox-checked-color,var(--primary-color));border-color:var(--paper-checkbox-checked-color,var(--primary-color))}#checkmark{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-bottom-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-color:var(--paper-checkbox-checkmark-color,#fff);-webkit-transform-origin:97% 86%;transform-origin:97% 86%;box-sizing:content-box}#checkmark:dir(rtl){-webkit-transform-origin:50% 14%;transform-origin:50% 14%}#checkboxLabel{position:relative;display:inline-block;vertical-align:middle;padding-left:var(--paper-checkbox-label-spacing,8px);white-space:normal;line-height:normal;color:var(--paper-checkbox-label-color,var(--primary-text-color));@apply --paper-checkbox-label;}:host([checked]) #checkboxLabel{color:var(--paper-checkbox-label-checked-color,var(--paper-checkbox-label-color,var(--primary-text-color)));@apply --paper-checkbox-label-checked;}#checkboxLabel:dir(rtl){padding-right:var(--paper-checkbox-label-spacing,8px);padding-left:0}#checkboxLabel[hidden]{display:none}:host([disabled]) #checkbox{opacity:.5;border-color:var(--paper-checkbox-unchecked-color,var(--primary-text-color))}:host([disabled][checked]) #checkbox{background-color:var(--paper-checkbox-unchecked-color,var(--primary-text-color));opacity:.5}:host([disabled]) #checkboxLabel{opacity:.65}#checkbox.invalid:not(.checked){border-color:var(--paper-checkbox-error-color,var(--error-color))}</style><div id="checkboxContainer"><div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]"><div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div></div></div><div id="checkboxLabel"><slot></slot></div>`;
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/sa.setAttribute("strip-whitespace",""),$r({_template:sa,is:"paper-checkbox",behaviors:[aa],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function(){var e,t,n;e=this,t=function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim()){var e=this.getComputedStyleValue("--calculated-paper-checkbox-size").trim(),t="px",n=e.match(/[A-Za-z]+$/);null!==n&&(t=n[0]);var r=parseFloat(e),i=8/3*r;"px"===t&&(i=Math.floor(i))%2!=r%2&&i++,this.updateStyles({"--paper-checkbox-ink-size":i+t})}},ir||or(),sr.push([e,t,n])},_computeCheckboxClass:function(e,t){var n="";return e&&(n+="checked "),t&&(n+="invalid"),n},_computeCheckmarkClass:function(e){return e?"":"hidden"},_createRipple:function(){return this._rippleContainer=this.$.checkboxContainer,ia._createRipple.call(this)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const oa=li`<custom-style><style is="custom-style">html{--shadow-transition:{transition:box-shadow .28s cubic-bezier(.4,0,.2,1)};--shadow-none:{box-shadow:none};--shadow-elevation-2dp:{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)};--shadow-elevation-3dp:{box-shadow:0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12),0 3px 3px -2px rgba(0,0,0,.4)};--shadow-elevation-4dp:{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.4)};--shadow-elevation-6dp:{box-shadow:0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12),0 3px 5px -1px rgba(0,0,0,.4)};--shadow-elevation-8dp:{box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.4)};--shadow-elevation-12dp:{box-shadow:0 12px 16px 1px rgba(0,0,0,.14),0 4px 22px 3px rgba(0,0,0,.12),0 6px 7px -4px rgba(0,0,0,.4)};--shadow-elevation-16dp:{box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.4)};--shadow-elevation-24dp:{box-shadow:0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12),0 11px 15px -7px rgba(0,0,0,.4)};}</style></custom-style>`;oa.setAttribute("style","display: none;"),document.head.appendChild(oa.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const la=li`<dom-module id="paper-material-styles"><template><style>html{--paper-material:{display:block;position:relative};--paper-material-elevation-1:{@apply --shadow-elevation-2dp;};--paper-material-elevation-2:{@apply --shadow-elevation-4dp;};--paper-material-elevation-3:{@apply --shadow-elevation-6dp;};--paper-material-elevation-4:{@apply --shadow-elevation-8dp;};--paper-material-elevation-5:{@apply --shadow-elevation-16dp;};}.paper-material{@apply --paper-material;}.paper-material[elevation="1"]{@apply --paper-material-elevation-1;}.paper-material[elevation="2"]{@apply --paper-material-elevation-2;}.paper-material[elevation="3"]{@apply --paper-material-elevation-3;}.paper-material[elevation="4"]{@apply --paper-material-elevation-4;}.paper-material[elevation="5"]{@apply --paper-material-elevation-5;}:host{--paper-material:{display:block;position:relative};--paper-material-elevation-1:{@apply --shadow-elevation-2dp;};--paper-material-elevation-2:{@apply --shadow-elevation-4dp;};--paper-material-elevation-3:{@apply --shadow-elevation-6dp;};--paper-material-elevation-4:{@apply --shadow-elevation-8dp;};--paper-material-elevation-5:{@apply --shadow-elevation-16dp;};}:host(.paper-material){@apply --paper-material;}:host(.paper-material[elevation="1"]){@apply --paper-material-elevation-1;}:host(.paper-material[elevation="2"]){@apply --paper-material-elevation-2;}:host(.paper-material[elevation="3"]){@apply --paper-material-elevation-3;}:host(.paper-material[elevation="4"]){@apply --paper-material-elevation-4;}:host(.paper-material[elevation="5"]){@apply --paper-material-elevation-5;}</style></template></dom-module>`;la.setAttribute("style","display: none;"),document.head.appendChild(la.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const ca={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var e=1;this.disabled?e=0:this.active||this.pressed?e=4:this.receivedFocusFromKeyboard&&(e=3),this._setElevation(e)},_computeKeyboardClass:function(e){this.toggleClass("keyboard-focus",e)},_spaceKeyDownHandler:function(e){Qi._spaceKeyDownHandler.call(this,e),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(e){Qi._spaceKeyUpHandler.call(this,e),this.hasRipple()&&this._ripple.uiUpAction()}},ua=[Zi,zi,ra,ca],pa=li`<style include="paper-material-styles">:host{@apply --layout-inline;@apply --layout-center-center;position:relative;box-sizing:border-box;min-width:5.14em;margin:0 .29em;background:0 0;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent;font:inherit;text-transform:uppercase;outline-width:0;border-radius:3px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:pointer;z-index:0;padding:.7em .57em;@apply --paper-font-common-base;@apply --paper-button;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}:host([hidden]){display:none!important}:host([raised].keyboard-focus){font-weight:700;@apply --paper-button-raised-keyboard-focus;}:host(:not([raised]).keyboard-focus){font-weight:700;@apply --paper-button-flat-keyboard-focus;}:host([disabled]){background:0 0;color:#a8a8a8;cursor:auto;pointer-events:none;@apply --paper-button-disabled;}:host([disabled][raised]){background:#eaeaea}:host([animated]){@apply --shadow-transition;}paper-ripple{color:var(--paper-button-ink-color)}</style><slot></slot>`;pa.setAttribute("strip-whitespace",""),$r({_template:pa,is:"paper-button",behaviors:[ua],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?ca._calculateElevation.apply(this):this._setElevation(0)}}),function(e){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:m,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:m,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links={},this.options=e||g.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t._label=/(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,t.def=u(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=u(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=u(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",t.html=u(t.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,t._tag).getRegex(),t.paragraph=u(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag","<"+t._tag).getRegex(),t.blockquote=u(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=f({},t),t.gfm=f({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=u(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex(),t.tables=f({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n){var r,i,a,s,o,l,c,u,p,d,h;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e))e=e.substring(a[0].length),a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?a:a.replace(/\n+$/,"")});else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if(n&&(a=this.rules.nptable.exec(e))){for(e=e.substring(a[0].length),l={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].split(/ *\| */);this.tokens.push(l)}else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,n),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),h=(s=a[2]).length>1,this.tokens.push({type:"list_start",ordered:h,start:h?+s:""}),r=!1,d=(a=a[0].match(this.rules.item)).length,u=0;u<d;u++)c=(l=a[u]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(s===(o=t.bullet.exec(a[u+1])[0])||s.length>1&&o.length>1||(e=a.slice(u+1).join("\n")+e,u=d-1)),i=r||/\n\n(?!\s*$)/.test(l),u!==d-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:a[0]});else if(n&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),p=a[1].toLowerCase(),this.tokens.links[p]||(this.tokens.links[p]={href:a[2],title:a[3]});else if(n&&(a=this.rules.table.exec(e))){for(e=e.substring(a[0].length),l={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2]?1:2,text:a[1]});else if(n&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:m,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function i(e,t){if(this.options=t||g.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function a(e){this.options=e||{}}function s(){}function o(e){this.tokens=[],this.token=null,this.options=e||g.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function u(e,t){return e=e.source,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function p(e,t){return d[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?d[" "+e]=e+"/":d[" "+e]=e.replace(/[^/]*$/,"")),e=d[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=u(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=u(r.link).replace("inside",r._inside).replace("href",r._href).getRegex(),r.reflink=u(r.reflink).replace("inside",r._inside).getRegex(),r.normal=f({},r),r.pedantic=f({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=f({},r.normal,{escape:u(r.escape).replace("])","~|])").getRegex(),url:u(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",r._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:u(r.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),r.breaks=f({},r.gfm,{br:u(r.br).replace("{2,}","*").getRegex(),text:u(r.gfm.text).replace("{2,}","*").getRegex()}),i.rules=r,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,r,i,a="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),a+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?"mailto:"+(n=l(this.mangle(i[1]))):n=l(i[1]),a+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):l(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,a+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),a+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),a+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),a+=this.renderer.codespan(l(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),a+=this.renderer.text(l(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else i[0]=this.rules._backpedal.exec(i[0])[0],e=e.substring(i[0].length),"@"===i[2]?r="mailto:"+(n=l(i[0])):(n=l(i[0]),r="www."===i[1]?"http://"+n:n),a+=this.renderer.link(r,null,n);return a},i.prototype.outputLink=function(e,t){var n=l(t.href),r=t.title?l(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,l(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},a.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+l(t,!0)+'">'+(n?e:l(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:l(e,!0))+"\n</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(c(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return n}this.options.baseUrl&&!h.test(e)&&(e=p(this.options.baseUrl,e));var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},a.prototype.image=function(e,t,n){this.options.baseUrl&&!h.test(e)&&(e=p(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},a.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},o.parse=function(e,t){return new o(t).parse(e)},o.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,f({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",a="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});a+=this.renderer.tablerow(n)}return this.renderer.table(i,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var s=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,s,o);case"list_item_start":for(a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var d={},h=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function f(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof t){r||(r=t,t=null);var i,a,s=(t=f({},g.defaults,t||{})).highlight,c=0;try{i=n.lex(e,t)}catch(e){return r(e)}a=i.length;var u=function(e){if(e)return t.highlight=s,r(e);var n;try{n=o.parse(i,t)}catch(t){e=t}return t.highlight=s,e?r(e):r(null,n)};if(!s||s.length<3)return u();if(delete t.highlight,!a)return u();for(;c<i.length;c++)!function(e){"code"!==e.type?--a||u():s(e.text,e.lang,(function(t,n){return t?u(t):null==n||n===e.text?--a||u():(e.text=n,e.escaped=!0,void(--a||u()))}))}(i[c])}else try{return t&&(t=f({},g.defaults,t)),o.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||g.defaults).silent)return"<p>An error occurred:</p><pre>"+l(e.message+"",!0)+"</pre>";throw e}}m.exec=m,g.options=g.setOptions=function(e){return f(g.defaults,e),g},g.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new a,xhtml:!1,baseUrl:null},g.Parser=o,g.parser=o.parse,g.Renderer=a,g.TextRenderer=s,g.Lexer=n,g.lexer=n.lex,g.InlineLexer=i,g.inlineLexer=i.output,g.parse=g,"undefined"!=typeof module&&"object"==typeof exports?module.exports=g:"function"==typeof define&&define.amd?define((function(){return g})):e.marked=g}("undefined"!=typeof window?window:global);var da=Object.freeze({__proto__:null});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/window.marked||(window.marked=da)
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/,$r({_template:li`<style>:host{display:block}</style><slot name="markdown-html"><div id="content"></div></slot>`,is:"marked-element",properties:{markdown:{type:String,value:null},breaks:{type:Boolean,value:!1},pedantic:{type:Boolean,value:!1},renderer:{type:Function,value:null},sanitize:{type:Boolean,value:!1},sanitizer:{type:Function,value:null},disableRemoteSanitization:{type:Boolean,value:!1},smartypants:{type:Boolean,value:!1},callback:{type:Function,value:null},xhr:{type:Object,notify:!0,readOnly:!0}},observers:["render(markdown, breaks, pedantic, renderer, sanitize, sanitizer, smartypants, callback)"],ready:function(){this.markdown||(this._markdownElement=Er(this).querySelector('[type="text/markdown"]'),this._markdownElement&&(this._markdownElement.src&&this._request(this._markdownElement.src),""!==this._markdownElement.textContent.trim()&&(this.markdown=this._unindent(this._markdownElement.textContent)),new MutationObserver(this._onScriptAttributeChanged.bind(this)).observe(this._markdownElement,{attributes:!0})))},attached:function(){this._attached=!0,this._outputElement=this.outputElement,this.render()},detached:function(){this._attached=!1},unindent:function(e){return this._unindent(e)},get outputElement(){return Er(this).queryDistributedElements('[slot="markdown-html"]')[0]||this.$.content},render:function(){if(this._attached)if(this.markdown){var e=new marked.Renderer;this.renderer&&this.renderer(e);var t={renderer:e,highlight:this._highlight.bind(this),breaks:this.breaks,sanitize:this.sanitize,sanitizer:this.sanitizer,pedantic:this.pedantic,smartypants:this.smartypants};Er(this._outputElement).innerHTML=marked(this.markdown,t,this.callback),this.fire("marked-render-complete",{},{composed:!0})}else Er(this._outputElement).innerHTML=""},_highlight:function(e,t){return this.fire("syntax-highlight",{code:e,lang:t},{composed:!0}).detail.code||e},_unindent:function(e){if(!e)return e;var t=e.replace(/\t/g,"  ").split("\n"),n=t.reduce((function(e,t){if(/^\s*$/.test(t))return e;var n=t.match(/^(\s*)/)[0].length;return null===e||n<e?n:e}),null);return t.map((function(e){return e.substr(n)})).join("\n")},_request:function(e){this._setXhr(new XMLHttpRequest);var t=this.xhr;if(t.readyState>0)return null;t.addEventListener("error",this._handleError.bind(this)),t.addEventListener("loadend",function(e){var t=this.xhr.status||0;0===t||t>=200&&t<300?(this.sanitize=!this.disableRemoteSanitization,this.markdown=e.target.response):this._handleError(e),this.fire("marked-loadend",e)}.bind(this)),t.open("GET",e),t.setRequestHeader("Accept","text/markdown"),t.send()},_handleError:function(e){this.fire("marked-request-error",e,{cancelable:!0}).defaultPrevented||(this.markdown="Failed loading markdown source")},_onScriptAttributeChanged:function(e){"src"===e[0].attributeName&&this._request(this._markdownElement.src)}});var ha=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof a?new a(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,a;switch(n=n||{},i.util.type(t)){case"Object":if(a=i.util.objId(t),n[a])return n[a];for(var s in r={},n[a]=r,t)t.hasOwnProperty(s)&&(r[s]=e(t[s],n));return r;case"Array":return a=i.util.objId(t),n[a]?n[a]:(r=[],n[a]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var a=(r=r||i.languages)[e],s={};for(var o in a)if(a.hasOwnProperty(o)){if(o==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(o)||(s[o]=a[o])}var c=r[e];return r[e]=s,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,r,a){a=a||{};var s=i.util.objId;for(var o in t)if(t.hasOwnProperty(o)){n.call(t,o,t[o],r||o);var l=t[o],c=i.util.type(l);"Object"!==c||a[s(l)]?"Array"!==c||a[s(l)]||(a[s(l)]=!0,e(l,n,o,a)):(a[s(l)]=!0,e(l,n,null,a))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var a,s=0;a=r.elements[s++];)i.highlightElement(a,!0===t,r.callback)},highlightElement:function(t,n,r){var a=i.util.getLanguage(t),s=i.languages[a];i.util.setLanguage(t,a);var o=t.parentElement;o&&"pre"===o.nodeName.toLowerCase()&&i.util.setLanguage(o,a);var l={element:t,language:a,grammar:s,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(o=l.element.parentElement)&&"pre"===o.nodeName.toLowerCase()&&!o.hasAttribute("tabindex")&&o.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),a.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),o(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,a=0;r=n[a++];)r(t)}},Token:a};function a(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function s(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var a=i[1].length;i.index+=a,i[0]=i[0].slice(a)}return i}function o(e,t,n,r,l,p){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var h=n[d];h=Array.isArray(h)?h:[h];for(var m=0;m<h.length;++m){if(p&&p.cause==d+","+m)return;var f=h[m],g=f.inside,y=!!f.lookbehind,b=!!f.greedy,w=f.alias;if(b&&!f.pattern.global){var v=f.pattern.toString().match(/[imsuy]*$/)[0];f.pattern=RegExp(f.pattern.source,v+"g")}for(var x=f.pattern||f,A=r.next,_=l;A!==t.tail&&!(p&&_>=p.reach);_+=A.value.length,A=A.next){var E=A.value;if(t.length>e.length)return;if(!(E instanceof a)){var C,N=1;if(b){if(!(C=s(x,_,e,y))||C.index>=e.length)break;var T=C.index,k=C.index+C[0].length,I=_;for(I+=A.value.length;T>=I;)I+=(A=A.next).value.length;if(_=I-=A.value.length,A.value instanceof a)continue;for(var S=A;S!==t.tail&&(I<k||"string"==typeof S.value);S=S.next)N++,I+=S.value.length;N--,E=e.slice(_,I),C.index-=_}else if(!(C=s(x,0,E,y)))continue;T=C.index;var B=C[0],O=E.slice(0,T),F=E.slice(T+B.length),P=_+E.length;p&&P>p.reach&&(p.reach=P);var D=A.prev;if(O&&(D=c(t,D,O),_+=O.length),u(t,D,N),A=c(t,D,new a(d,g?i.tokenize(B,g):B,w,B)),F&&c(t,A,F),N>1){var R={cause:d+","+m,reach:P};o(e,t,n,A.prev,_,R),p&&R.reach>p.reach&&(p.reach=R.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,a.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var a={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(a.classes,s):a.classes.push(s)),i.hooks.run("wrap",a);var o="";for(var l in a.attributes)o+=" "+l+'="'+(a.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+o+">"+a.content+"</"+a.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,a=n.code,s=n.immediateClose;e.postMessage(i.highlight(a,i.languages[r],r)),s&&e.close()}),!1),i):i;var p=i.util.currentScript();function d(){i.manual||i.highlightAll()}if(p&&(i.filename=p.src,p.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var h=document.readyState;"loading"===h||"interactive"===h&&p&&p.defer?document.addEventListener("DOMContentLoaded",d):window.requestAnimationFrame?window.requestAnimationFrame(d):window.setTimeout(d,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */"undefined"!=typeof module&&module.exports&&(module.exports=ha),"undefined"!=typeof global&&(global.Prism=ha),ha.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},ha.languages.markup.tag.inside["attr-value"].inside.entity=ha.languages.markup.entity,ha.languages.markup.doctype.inside["internal-subset"].inside=ha.languages.markup,ha.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(ha.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:ha.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:ha.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},ha.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(ha.languages.markup.tag,"addAttribute",{value:function(e,t){ha.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:ha.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),ha.languages.html=ha.languages.markup,ha.languages.mathml=ha.languages.markup,ha.languages.svg=ha.languages.markup,ha.languages.xml=ha.languages.extend("markup",{}),ha.languages.ssml=ha.languages.xml,ha.languages.atom=ha.languages.xml,ha.languages.rss=ha.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(ha),ha.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},ha.languages.javascript=ha.languages.extend("clike",{"class-name":[ha.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),ha.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,ha.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:ha.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:ha.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:ha.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:ha.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:ha.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),ha.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:ha.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),ha.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),ha.languages.markup&&(ha.languages.markup.tag.addInlined("script","javascript"),ha.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),ha.languages.js=ha.languages.javascript,function(){if(void 0!==ha&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",r="loaded",i='pre[data-src]:not([data-src-status="loaded"]):not([data-src-status="loading"])';ha.hooks.add("before-highlightall",(function(e){e.selector+=", "+i})),ha.hooks.add("before-sanity-check",(function(a){var s=a.element;if(s.matches(i)){a.code="",s.setAttribute(t,n);var o=s.appendChild(document.createElement("CODE"));o.textContent="Loading";var l=s.getAttribute("data-src"),c=a.language;if("none"===c){var u=(/\.(\w+)$/.exec(l)||[,"none"])[1];c=e[u]||u}ha.util.setLanguage(o,c),ha.util.setLanguage(s,c);var p=ha.plugins.autoloader;p&&p.loadLanguages(c),function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&(r.status<400&&r.responseText?t(r.responseText):r.status>=400?n(" Error "+r.status+" while fetching file: "+r.statusText):n(" Error: File does not exist or is empty"))},r.send(null)}(l,(function(e){s.setAttribute(t,r);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,void 0]:[n,n]}}(s.getAttribute("data-range"));if(n){var i=e.split(/\r\n?|\n/g),a=n[0],l=null==n[1]?i.length:n[1];a<0&&(a+=i.length),a=Math.max(0,Math.min(a-1,i.length)),l<0&&(l+=i.length),l=Math.max(0,Math.min(l,i.length)),e=i.slice(a,l).join("\n"),s.hasAttribute("data-start")||s.setAttribute("data-start",String(a+1))}o.textContent=e,ha.highlightElement(o)}),(function(e){s.setAttribute(t,"failed"),o.textContent=e}))}})),ha.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(i),r=0;t=n[r++];)ha.highlightElement(t)}},ha.fileHighlight=function(){ha.plugins.fileHighlight.highlight.apply(this,arguments)}}}();$r({is:"prism-highlighter",properties:{languages:{type:Object,value:function(){return{}}}},ready:function(){this._handler=this._highlight.bind(this)},attached:function(){(this.parentNode.host||this.parentElement).addEventListener("syntax-highlight",this._handler)},detached:function(){(this.parentNode.host||this.parentElement).removeEventListener("syntax-highlight",this._handler)},_highlight:function(e){if(e.detail&&e.detail.code){e.stopPropagation();var t=e.detail;t.code=Prism.highlight(t.code,this._detectLang(t.code,t.lang))}else vi._warn("Malformed","syntax-highlight","event:",e.detail)},_detectLang:function(e,t){if(!t)return e.match(/^\s*</)?Prism.languages.markup:Prism.languages.javascript;if(this.languages[t])return this.languages[t];if(Prism.languages[t])return Prism.languages[t];switch(t.substr(0,2)){case"js":case"es":return Prism.languages.javascript;case"c":return Prism.languages.clike;default:return Prism.languages.markup}}});
/**
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const ma=li`<dom-module id="prism-theme-default"><template><style>code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></template></dom-module>`;document.head.appendChild(ma.content),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
$r({_template:li`<style include="prism-theme-default">:host{display:block;@apply --demo-snippet;}.demo{display:block;background:rgba(240,245,255,.5) margin: 0;padding:1rem;@apply --demo-snippet-demo;display:flex;align-items:center;flex-wrap:wrap}:host(.nodemo) .demo{display:none}.code-container{margin:0;font-size:13px;overflow:auto;padding:0 20px;z-index:-1;@apply --demo-snippet-code;margin-bottom:1rem}:host(.nodemo) .code-container{padding:1rem 1rem 0 1rem}.code{margin:0;background-color:var(--google-grey-100);font-size:.9rem;overflow:auto;@apply --demo-snippet-code;padding:0 1rem}.code>pre{margin:0;padding:0 0 10px 0;background:0 0}button{position:absolute;top:0;right:0;text-transform:uppercase;border:none;cursor:pointer;background:#e0e0e0}</style><prism-highlighter></prism-highlighter><div class="demo"><slot id="content"></slot></div><div class="code-container"><marked-element markdown="[[_markdown]]" id="marked"><div class="code" slot="markdown-html" id="code"></div></marked-element></div>`,is:"demo-snippet",properties:{_markdown:{type:String}},attached:function(){this._observer=Er(this.$.content).observeNodes(function(e){this._updateMarkdown()}.bind(this))},detached:function(){this._observer&&(Er(this.$.content).unobserveNodes(this._observer),this._observer=null)},_updateMarkdown:function(){var e=Er(this).queryDistributedElements("template")[0];if(e){var t=this.$.marked.unindent(e.innerHTML);t=(t=t.replace(/ class=""/g,"")).replace(/=""/g,""),this._markdown="```\n"+t+"\n```",e.hasAttribute("is")||(Er(this.$.content).unobserveNodes(this._observer),this._observer=null,Er(this).appendChild(document.importNode(e.content,!0))),this.dispatchEvent(new CustomEvent("dom-ready"))}else this._markdown=""},_copyToClipboard:function(){var e=document.createRange();e.selectNodeContents(this.$.code);var t=window.getSelection();t.removeAllRanges(),t.addRange(e);var n=!1;try{n=document.execCommand("copy"),this.$.copyButton.textContent="done"}catch(e){this.$.copyButton.textContent="error"}return setTimeout(this._resetCopyButtonState.bind(this),1e3),t.removeAllRanges(),n},_resetCopyButtonState:function(){this.$.copyButton.textContent="copy"}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const fa=li`<dom-module id="demo-pages-shared-styles"><template><style>body{font-family:Roboto,Noto,sans-serif;font-size:14px;margin:0;padding:24px;background-color:#fafafa}.horizontal-section-container{@apply --layout-horizontal;@apply --layout-center-justified;@apply --layout-wrap;}.vertical-section-container{@apply --layout-vertical;@apply --center-justified;}.centered{max-width:600px;margin-left:auto;margin-right:auto}demo-snippet.centered-demo{--demo-snippet-demo:{@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center-justified;};}</style></template></dom-module>`;function ga(e,t,n,r){const i={op:t,func:n,data:r};return e.push(i),i}function ya(e,t){return e}fa.setAttribute("style","display: none;"),document.head.appendChild(fa.content);class ba{constructor(){this.program=[]}test(e,t){return ga(this.program,5,e,void 0===t?null:t)}jump(e){return ga(this.program,3,null,e)}record(e,t){return ga(this.program,4,void 0===t?ya:t,e)}bad(e=1){return ga(this.program,1,null,e)}accept(){return ga(this.program,0,null,null)}fail(e){return ga(this.program,2,e||null,null)}}class wa{constructor(e,t,n){this.programLength=e,this.maxFromByPc=t,this.maxSurvivorFromByPc=n}static fromProgram(e){const t=e.length,n=[],r=[];return e.forEach((e=>{n.push(0),r.push(0)})),e.forEach(((e,i)=>{switch(e.op){case 2:if(null===e.func)return;if(i+1>=t)throw new Error("Invalid program: program could run past end");n[i+1]+=1;break;case 1:case 4:if(i+1>=t)throw new Error("Invalid program: program could run past end");n[i+1]+=1;break;case 3:e.data.forEach((e=>{if(e<0||e>=t)throw new Error("Invalid program: program could run past end");n[e]+=1}));break;case 5:if(i+1>=t)throw new Error("Invalid program: program could run past end");r[i+1]+=1;break;case 0:r[i]+=1}})),new wa(t,n,r)}static createStub(e){const t=[],n=[];for(let r=0;r<e;++r)t.push(e),n.push(e);return new wa(e,t,n)}}class va{constructor(e){this.acceptingTraces=e,this.success=e.length>0}}class xa{constructor(e){this.t=0,this.i=0,this.h=new Uint16Array(e),this.l=new Uint8Array(e)}getBadness(e){return this.l[e]}add(e,t){this.l[e]=t>255?255:t;const n=function(e,t,n,r,i){let a=r,s=i;for(;a<s;){const r=a+s>>>1;n<t[e[r]]?s=r:a=r+1}return a}(this.h,this.l,t,this.i,this.t);this.h.copyWithin(n+1,n,this.t),this.h[n]=e,this.t+=1}reschedule(e,t){const n=Math.max(this.l[e],t>255?255:t);if(this.l[e]!==n){const t=this.h.indexOf(e,this.i);if(t<0||t>=this.t)return void(this.l[e]=n);this.h.copyWithin(t,t+1,this.t),this.t-=1,this.add(e,n)}}getNextPc(){return this.i>=this.t?null:this.h[this.i++]}reset(){this.t=0,this.i=0,this.l.fill(0)}}class Aa{constructor(e){this.o=[];let t=e.length;e.forEach((e=>{this.o.push(e>0?t:-1),t+=e})),this.u=new Uint16Array(t)}clear(){this.u.fill(0,0,this.o.length)}add(e,t){const n=this.u[t],r=this.o[t];this.u[t]+=1,this.u[r+n]=e}has(e){return this.u[e]>0}forEach(e,t){const n=this.u[e],r=this.o[e];for(let e=r;e<r+n;++e)t(this.u[e])}}function _a(e,t,n=!1){return null===e?t:Array.isArray(e)?(-1===e.indexOf(t)&&(n&&(e=e.slice()),e.push(t)),e):e===t?e:[e,t]}class Ea{constructor(e,t){this.prefixes=e,this.record=t}}function Ca(e,t){let n;if(null===t){if(!Array.isArray(e))return e;n=e}else n=e===Ea.EMPTY?[]:Array.isArray(e)?e:[e];return new Ea(n,t)}Ea.EMPTY=new Ea([],null);class Na{constructor(e){this.p=[],this.v=[];for(let t=0;t<e;++t)this.p.push(0),this.v.push(null)}mergeTraces(e,t,n,r,i,a){let s=!1;return n.forEach(t,(t=>{const n=this.trace(t,r,i,a);var o,l,c;l=n,c=s,e=null===(o=e)?l:null===l?o:Array.isArray(l)?l.reduce(((e,t)=>_a(e,t,e===l)),o):_a(o,l,c),s=e===n})),e}trace(e,t,n,r){switch(this.p[e]){case 2:return this.v[e];case 1:return null}this.p[e]=1;let i=null;const a=t[e];if(null!==a)i=a;else if(!n.has(e))throw new Error("Trace without source at pc "+e);if(i=this.mergeTraces(i,e,n,t,n,r),null!==i){const t=r[e];null!==t&&(i=Ca(i,t))}return this.v[e]=i,this.p[e]=2,i}buildSurvivorTraces(e,t,n,r,i){for(let a=0,s=e.length;a<s;++a){if(!n.has(a)){t[a]=null;continue}this.v.fill(null),this.p.fill(0);const s=this.mergeTraces(null,a,n,e,r,i);if(null===s)throw new Error("No non-cyclic paths found to survivor "+a);t[a]=Ca(s,null)}this.v.fill(null)}}class Ta{constructor(e){this.g=[],this.k=[],this.m=[],this.A=new Aa(e.maxFromByPc),this.T=new Aa(e.maxSurvivorFromByPc),this.S=new Na(e.programLength);for(let t=0;t<e.programLength;++t)this.g.push(null),this.k.push(null),this.m.push(null);this.k[0]=Ea.EMPTY}reset(e){this.A.clear(),this.T.clear(),this.g.fill(null),e&&(this.k.fill(null),this.m.fill(null),this.k[0]=Ea.EMPTY)}record(e,t){this.g[e]=t}has(e){return this.A.has(e)||null!==this.k[e]}add(e,t){this.A.add(e,t)}hasSurvivor(e){return this.T.has(e)}addSurvivor(e,t){this.T.add(e,t)}buildSurvivorTraces(){const e=this.k;this.S.buildSurvivorTraces(e,this.m,this.T,this.A,this.g),this.k=this.m,this.m=e}getTraces(e){const t=e.reduce(((e,t)=>_a(e,this.k[t])),null);return null===t?[]:Array.isArray(t)?t:[t]}}class ka{constructor(e){this.I=[],this.N=new xa(e.programLength),this.M=new xa(e.programLength),this.P=new Ta(e)}reset(){this.N.reset(),this.N.add(0,0),this.I.length=0,this.P.reset(!0)}getNextThreadPc(){return this.N.getNextPc()}step(e,t,n){const r=this.P.has(t);this.P.add(e,t);const i=this.N.getBadness(e)+n;r?this.N.reschedule(t,i):this.N.add(t,i)}stepToNextGeneration(e,t){const n=this.P.hasSurvivor(t);this.P.addSurvivor(e,t);const r=this.N.getBadness(e);n?this.M.reschedule(t,r):this.M.add(t,r)}accept(e){this.I.push(e),this.P.addSurvivor(e,e)}fail(e){}record(e,t){this.P.record(e,t)}nextGeneration(){this.P.buildSurvivorTraces(),this.P.reset(!1);const e=this.N;e.reset(),this.N=this.M,this.M=e}getAcceptingTraces(){return this.P.getTraces(this.I)}}class Ia{constructor(e){this.U=[],this.G=e,this.V=wa.fromProgram(e),this.U.push(new ka(this.V))}execute(e,t){const n=this.U.pop()||new ka(this.V);n.reset();const r=e.length;let i,a=-1;do{let s=n.getNextThreadPc();if(null===s)break;for(++a,i=a>=r?null:e[a];null!==s;){const e=this.G[s];switch(e.op){case 0:null===i?n.accept(s):n.fail(s);break;case 2:{const r=e.func;if(null===r||r(t)){n.fail(s);break}n.step(s,s+1,0);break}case 1:n.step(s,s+1,e.data);break;case 5:if(null===i){n.fail(s);break}if(!(0,e.func)(i,e.data,t)){n.fail(s);break}n.stepToNextGeneration(s,s+1);break;case 3:{const t=e.data,r=t.length;if(0===r){n.fail(s);break}for(let e=0;e<r;++e)n.step(s,t[e],0);break}case 4:{const r=(0,e.func)(e.data,a,t);null!=r&&n.record(s,r),n.step(s,s+1,0);break}}s=n.getNextThreadPc()}n.nextGeneration()}while(null!==i);const s=new va(n.getAcceptingTraces());return n.reset(),this.U.push(n),s}}function Sa(e){return t=>t===e}function Ba(e,t){if(null===e||null===t)throw new Error("unescaped hyphen may not be used as a range endpoint");if(t<e)throw new Error("character range is in the wrong order");return n=>e<=n&&n<=t}function Oa(e){return!0}function Fa(){return!1}function Pa(e,t){return n=>e(n)||t(n)}function Da(e,t){switch(t.kind){case"predicate":return void e.test(t.value);case"regexp":return void Ra(e,t.value,!1)}}function Ra(e,t,n){const r=e.program.length,i=e.jump([]);n&&(i.data.push(e.program.length),e.test((()=>!0)),e.jump([r]));const a=[];if(t.forEach((t=>{i.data.push(e.program.length),function(e,t){t.forEach((t=>{!function(e,t){const[n,{min:r,max:i}]=t;if(null!==i){for(let t=0;t<r;++t)Da(e,n);for(let t=r;t<i;++t){const t=e.jump([]);t.data.push(e.program.length),Da(e,n),t.data.push(e.program.length)}}else if(r>0){for(let t=0;t<r-1;++t)Da(e,n);const t=e.program.length;Da(e,n),e.jump([t]).data.push(e.program.length)}else{const t=e.program.length,r=e.jump([]);r.data.push(e.program.length),Da(e,n),e.jump([t]),r.data.push(e.program.length)}}(e,t)}))}(e,t),a.push(e.jump([]))})),a.forEach((t=>{t.data.push(e.program.length)})),n){const t=e.program.length,n=e.jump([]);n.data.push(e.program.length),e.test((()=>!0)),e.jump([t]),n.data.push(e.program.length)}}function Ma(e,t){return{success:!0,offset:e,value:t}}function La(e){return Ma(e,void 0)}function $a(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function Ua(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?Ma(r,e):$a(n,[e])}}function Ha(e,t){return(n,r)=>{const i=e(n,r);return i.success?Ma(i.offset,t(i.value)):i}}function Ga(e,t,n,r){return(i,a)=>{const s=e(i,a);return s.success?t(s.value)?s:$a(a,n,r):s}}function ja(e,t){return(n,r)=>{let i=null;for(const a of e){const e=a(n,r);if(e.success)return e;if(null===i||e.offset>i.offset?i=e:e.offset===i.offset&&void 0===t&&(i.expected=i.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==i?void 0:i.expected)||[],i&&(i.expected=t),i||$a(r,t)}}function Xa(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:Ma(n,null)}}function qa(e){return(t,n)=>{let r=[],i=n;for(;;){const n=e(t,i);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===i)break;i=n.offset}return Ma(i,r)}}function Va(e,t,n){return(r,i)=>{const a=e(r,i);if(!a.success)return a;const s=t(r,a.offset);return s.success?Ma(s.offset,n(a.value,s.value)):s}}function za(e){return Va(e,qa(e),((e,t)=>[e].concat(t)))}function Ya(e,t){return e}function Ka(e,t){return t}function Ja(e,t){return Va(e,t,Ka)}function Wa(e,t){return Va(e,t,Ya)}function Qa(e,t,n,r=!1){return Ja(e,r?es(Wa(t,n)):Wa(t,n))}function Za(e,t){return(n,r)=>e(n,r).success?$a(r,t):La(r)}function es(e){return(t,n)=>{const r=e(t,n);return r.success?r:$a(r.offset,r.expected,!0)}}const ts=(e,t)=>e.length===t?La(t):$a(t,["end of input"]),ns=["Lu","Ll","Lt","Lm","Lo","Mn","Mc","Me","Nd","Nl","No","Pc","Pd","Ps","Pe","Pi","Pf","Po","Zs","Zl","Zp","Sm","Sc","Sk","So","Cc","Cf","Co","Cn"],rs={};function is(e){return e.codePointAt(0)}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(((e,t)=>{rs[e]=t}));const as=e=>-1===e||-2===e;function ss(e){return t=>!as(t)&&!e(t)}function os(e,t){return null===t?e:n=>e(n)&&!t(n)}const ls=function(e,t){const n=new Map;let r=0;return["BasicLatin","Latin-1Supplement","LatinExtended-A","LatinExtended-B","IPAExtensions","SpacingModifierLetters","CombiningDiacriticalMarks","GreekandCoptic|Greek","Cyrillic","CyrillicSupplement","Armenian","Hebrew","Arabic","Syriac","ArabicSupplement","Thaana","NKo","Samaritan","Mandaic","SyriacSupplement","ArabicExtended-B","ArabicExtended-A","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","HangulJamo","Ethiopic","EthiopicSupplement","Cherokee","UnifiedCanadianAboriginalSyllabics","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","UnifiedCanadianAboriginalSyllabicsExtended","Limbu","TaiLe","NewTaiLue","KhmerSymbols","Buginese","TaiTham","CombiningDiacriticalMarksExtended","Balinese","Sundanese","Batak","Lepcha","OlChiki","CyrillicExtended-C","GeorgianExtended","SundaneseSupplement","VedicExtensions","PhoneticExtensions","PhoneticExtensionsSupplement","CombiningDiacriticalMarksSupplement","LatinExtendedAdditional","GreekExtended","GeneralPunctuation","SuperscriptsandSubscripts","CurrencySymbols","CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols","LetterlikeSymbols","NumberForms","Arrows","MathematicalOperators","MiscellaneousTechnical","ControlPictures","OpticalCharacterRecognition","EnclosedAlphanumerics","BoxDrawing","BlockElements","GeometricShapes","MiscellaneousSymbols","Dingbats","MiscellaneousMathematicalSymbols-A","SupplementalArrows-A","BraillePatterns","SupplementalArrows-B","MiscellaneousMathematicalSymbols-B","SupplementalMathematicalOperators","MiscellaneousSymbolsandArrows","Glagolitic","LatinExtended-C","Coptic","GeorgianSupplement","Tifinagh","EthiopicExtended","CyrillicExtended-A","SupplementalPunctuation","CJKRadicalsSupplement","KangxiRadicals",null,"IdeographicDescriptionCharacters","CJKSymbolsandPunctuation","Hiragana","Katakana","Bopomofo","HangulCompatibilityJamo","Kanbun","BopomofoExtended","CJKStrokes","KatakanaPhoneticExtensions","EnclosedCJKLettersandMonths","CJKCompatibility","CJKUnifiedIdeographsExtensionA","YijingHexagramSymbols","CJKUnifiedIdeographs","YiSyllables","YiRadicals","Lisu","Vai","CyrillicExtended-B","Bamum","ModifierToneLetters","LatinExtended-D","SylotiNagri","CommonIndicNumberForms","Phags-pa","Saurashtra","DevanagariExtended","KayahLi","Rejang","HangulJamoExtended-A","Javanese","MyanmarExtended-B","Cham","MyanmarExtended-A","TaiViet","MeeteiMayekExtensions","EthiopicExtended-A","LatinExtended-E","CherokeeSupplement","MeeteiMayek","HangulSyllables","HangulJamoExtended-B","HighSurrogates","HighPrivateUseSurrogates","LowSurrogates","PrivateUseArea|PrivateUse","CJKCompatibilityIdeographs","AlphabeticPresentationForms","ArabicPresentationForms-A","VariationSelectors","VerticalForms","CombiningHalfMarks","CJKCompatibilityForms","SmallFormVariants","ArabicPresentationForms-B","HalfwidthandFullwidthForms","Specials","LinearBSyllabary","LinearBIdeograms","AegeanNumbers","AncientGreekNumbers","AncientSymbols","PhaistosDisc",null,"Lycian","Carian","CopticEpactNumbers","OldItalic","Gothic","OldPermic","Ugaritic","OldPersian",null,"Deseret","Shavian","Osmanya","Osage","Elbasan","CaucasianAlbanian","Vithkuqi",null,"LinearA","LatinExtended-F",null,"CypriotSyllabary","ImperialAramaic","Palmyrene","Nabataean",null,"Hatran","Phoenician","Lydian",null,"MeroiticHieroglyphs","MeroiticCursive","Kharoshthi","OldSouthArabian","OldNorthArabian",null,"Manichaean","Avestan","InscriptionalParthian","InscriptionalPahlavi","PsalterPahlavi",null,"OldTurkic",null,"OldHungarian","HanifiRohingya",null,"RumiNumeralSymbols","Yezidi","ArabicExtended-C","OldSogdian","Sogdian","OldUyghur","Chorasmian","Elymaic","Brahmi","Kaithi","SoraSompeng","Chakma","Mahajani","Sharada","SinhalaArchaicNumbers","Khojki",null,"Multani","Khudawadi","Grantha",null,"Newa","Tirhuta",null,"Siddham","Modi","MongolianSupplement","Takri",null,"Ahom",null,"Dogra",null,"WarangCiti","DivesAkuru",null,"Nandinagari","ZanabazarSquare","Soyombo","UnifiedCanadianAboriginalSyllabicsExtended-A","PauCinHau","DevanagariExtended-A",null,"Bhaiksuki","Marchen",null,"MasaramGondi","GunjalaGondi",null,"Makasar","Kawi",null,"LisuSupplement","TamilSupplement","Cuneiform","CuneiformNumbersandPunctuation","EarlyDynasticCuneiform",null,"Cypro-Minoan","EgyptianHieroglyphs","EgyptianHieroglyphFormatControls",null,"AnatolianHieroglyphs",null,"BamumSupplement","Mro","Tangsa","BassaVah","PahawhHmong",null,"Medefaidrin",null,"Miao",null,"IdeographicSymbolsandPunctuation","Tangut","TangutComponents","KhitanSmallScript","TangutSupplement",null,"KanaExtended-B","KanaSupplement","KanaExtended-A","SmallKanaExtension","Nushu",null,"Duployan","ShorthandFormatControls",null,"ZnamennyMusicalNotation",null,"ByzantineMusicalSymbols","MusicalSymbols","AncientGreekMusicalNotation",null,"KaktovikNumerals","MayanNumerals","TaiXuanJingSymbols","CountingRodNumerals",null,"MathematicalAlphanumericSymbols","SuttonSignWriting",null,"LatinExtended-G","GlagoliticSupplement","CyrillicExtended-D",null,"NyiakengPuachueHmong",null,"Toto","Wancho",null,"NagMundari",null,"EthiopicExtended-B","MendeKikakui",null,"Adlam",null,"IndicSiyaqNumbers",null,"OttomanSiyaqNumbers",null,"ArabicMathematicalAlphabeticSymbols",null,"MahjongTiles","DominoTiles","PlayingCards","EnclosedAlphanumericSupplement","EnclosedIdeographicSupplement","MiscellaneousSymbolsandPictographs","Emoticons","OrnamentalDingbats","TransportandMapSymbols","AlchemicalSymbols","GeometricShapesExtended","SupplementalArrows-C","SupplementalSymbolsandPictographs","ChessSymbols","SymbolsandPictographsExtended-A","SymbolsforLegacyComputing",null,"CJKUnifiedIdeographsExtensionB",null,"CJKUnifiedIdeographsExtensionC","CJKUnifiedIdeographsExtensionD","CJKUnifiedIdeographsExtensionE","CJKUnifiedIdeographsExtensionF",null,"CJKCompatibilityIdeographsSupplement",null,"CJKUnifiedIdeographsExtensionG","CJKUnifiedIdeographsExtensionH",null,"Tags",null,"VariationSelectorsSupplement",null,"SupplementaryPrivateUseArea-A|PrivateUse","SupplementaryPrivateUseArea-B|PrivateUse"].forEach(((e,i)=>{const a=t[i];null!==e&&e.split("|").forEach((e=>{const t=n.get(e),i=Ba(r,r+a-1);n.set(e,t?Pa(t,i):i)})),r+=a})),n}(0,[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,80,64,384,64,64,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,64,64,48,64,64,48,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,80,176,80,80,96,96,64,96,80,96,16,64,96,160,112,80,64,96,80,304,32,96,80,16,64,1024,128,208,2624,112,1072,48,4e3,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,512,128,8816,16,256,48,64,400,2304,160,16,4688,208,48,256,256,80,112,32,32,96,32,128,1024,688,1104,256,48,96,112,80,320,48,64,464,48,736,32,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,256,1024,42720,32,4160,224,5776,7488,3088,544,1504,4944,4192,711760,128,128,240,65040,65536,65536]),cs=function(e){const t=new Map,n="bfUATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAbgUATAYDaATAZAaAGARAXAcAaAZAaAXAMBZADATBZAMAGASAMCTACWXACGDXXADHA3DAAPDAAtCAAFDBCAADCAABCCDBCCABCAABCCDCCAABCAAFCAADDAABCAABCBADCBDBGACADCGDCAEADACAEADACAEADAAPDAARDACAEADAABCBA7DFCAABCBDBABCCAJjDBAAGADaFRZDFLZNFEZGFAZAFAZQnvBAAADFAZACADABBFADCTACABDZBCATACCBACABACAABCQBACIDiCADBCCDCAXDDCADAXAABCBDBCyDvAhaAHEJBA1CAANDAgfBAABAClBBFATFDoTAOABBaBYABAHsOAHATAHBTAHBTAHABHGaBDGDTBBKcFXCTBYATBaBHKTAcATCGfFAGJHUKJTDGBHAmiBAATAGAHGcAaAHFFBHBaAHDGBKJGCaBGATNBAcAGAHAGdHaBBmYBAAHKGABNKJGgHIFBaATCFABBHAYBGVHDFAHIFAHCFAHEBBTOBAGYHCBBTABAGKBEGXZAGFBAcBBFHHGoFAHXcAHfIAG1HAIAHAGAICHHIDHAIBGAHGGJHBTBKJTAFAGOHAIBBAGHBBGBBBGVBAGGBAGABCGDBBHAGAICHDBBIBBBIBHAGABHIABDGBBAGCHBBBKJGBYBMFaAYAGATAHABBHBIABAGFBDGBBBGVBAGGBAGBBAGBBAGBBBHABAICHBBDHBBBHCBCHABGGDBAGABGKJHBGCHATABJHBIABAGIBAGCBAGVBAGGBAGBBAGEBBHAGAICHEBAHBIABAIBHABBGABOGBHBBBKJTAYABGGAHFBAHAIBBAGHBBGBBBGVBAGGBAGBBAGEBBHAGAIAHAIAHDBBIBBBIBHABGHBIABDGBBAGCHBBBKJaAGAMFBJHAGABAGFBCGCBAGDBCGBBAGABAGBBCGBBCGCBCGLBDIBHAIBBCICBAICHABBGABFIABNKJMCaFYAaABEHAICHAGHBAGCBAGWBAGPBBHAGAHCIDBAHCBAHDBGHBBAGCBBGABBGBHBBBKJBGTAMGaAGAHAIBTAGHBAGCBAGWBAGJBAGEBBHAGAIAHAIEBAHAIBBAIBHBBGIBBFGBBAGBHBBBKJBAGBIABLHBIBGIBAGCBAGoHBGAICHDBAICBAICHAGAaABDGCIAMGGCHBBBKJMIaAGFBAHAIBBAGRBCGXBAGIBAGABBGGBCHABDICHCBAHABAIHBFKJBBIBTABLGvHAGBHGBDYAGFFAHHTAKJTBBkGBBAGABAGEBAGXBAGABAGJHAGBHIGABBGEBAFABAHGBAKJBBGDBfGAaCTOaATAaCHBaFKJMJaAHAaAHAaAHAPAQAPAQAIBGHBAGjBDHNIAHETAHBGEHKBAHjBAaHHAaFBAaBTEaDTBBkGqIBHDIAHFIAHBIBHBGAKJTFGFIBHBGDHCGAICGBIGGCHDGMHAIBHBIFHAGAIAKJICHAaBClBACABECABBDqTAFADCmIFAABAGDBBGGBAGABAGDBBGoBAGDBBGgBAGDBBGGBAGABAGDBBGOBAG4BAGDBBmCBAABBHCTIMTBCGPaJBFiVBAABBDFBBOAmrJAAaATAGQUAGZPAQABCmKBAATCLCGHBGGRHCIABIGSHBIATBBIGRHBBLGMBAGCBAHBBLGzHBIAHGIHHAIBHKTCFATCYAGAHABBKJBFMJBFTFOATDHCcAHAKJBFGiFAG0BGGEHBGhHAGABEmFBAABJGeBAHCIDHBICBDIBHAIFHCBDaABCTBKJGdBBGEBKGrBDGZBFKJMABCahGWHBIBHABBTBG0IAHAIAHGBAHAIAHAIBHHIFHJBBHAKJBFKJBFTGFATFBBHNJAHPBwHDIAGuHAIAHEIAHAIEHAIBGHBCKJTGaJHIaITBBAHBIAGdIAHDIBHBIAHCGBKJGrHAIAHBICHAIAHCIBBHTDGjIHHHIBHBBCTEKJBCGCKJGdFFTBDIBGCqBBCCTHBHHCTAHMIAHGGDHAGFHAGBIAHBGABEDrF+DMFADhFkH/gVCAADHghBAADHCHDFBBCFBBDHCHDHCHDFBBCFBBDHBACABACABACABACADHCHDNBBDHEHDHEHDHEHDEBADBCDEAZADAZCDCBADBCDEAZCDDBBDBCDBAZCDHCEZCBBDCBADBCDEAZBBAUKcEOFTBRASAPARBSAPARATHVAWAcEUATIRASATDNBTCXAPAQATKXATANATJUAcEBAcJMAFABBMFXCPAQAFAMJXCPAQABAFMBCYgBOHMJDHAJCHLBOaBCAaDCAaBDACCDBCCDAaACAaBXACEaFCAaACAaACAaACDaADACDDAGDDAaBDBCBXECADDaAXAaBDAaAMPLiCADALDMAaBBDXEaEXBaDXAaBXAaBXAaGXAaeXBaBXAaAXAae3LEAAaHPAQAPAQAaTXBaGPAQA6QBAAXAadXYanXF6EBAABYaKBUM76NBAAMV62CAAXAaIXAa1XH6uBAAXA63DAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAMdarXEPAQAXePAQAPAQAPAQAPAQAPAQAXP6/DAA3CCAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAX+PAQAPAQAXfPAQA3BEAAavXUaBXFamBBafBA6oBAACvDvABCCDBAFCCADDACADFFBCBgjBAADAaFADHCCADABETDMATBDlBADABEDABBG3BGFATABNHAGWBIGGBAGGBAGGBAGGBAGGBAGGBAGGBAGGBAHfTBRASARASATCRASATARASATIOATBOATARASATBRASAPAQAPAQAPAQAPAQATEFATJOBTDOATAPATMaBTCPAQAPAQAPAQAPAQAOABhaZBA6YBAABL6VDAABZaLBDUATCaAFAGALAPAQAPAQAPAQAPAQAPAQAaBPAQAPAQAPAQAPAQAOAPAQBaALIHDIBOAFEaBLCFAGATAaBBAmVBAABBHBZBFBGAOAmZBAATAFCGABEGqBAmdBAABAaBMDaJGfajBLGPaeBAMJadMHaAMOafMJamMO6/EAAm/mBAa/mUIFAFAm2RAABCa2BIGnFFTBmLEAAFATCGPKJGBBTAtGAHAJCTAHJTAFAAbFBHBmFBAALJHBTFBHZWFIZBANDBA9FADHADCAAJFAZBADGAADDBATCDABCDAPCCADBECADABADABADAADBXFCCADAGAFBDAGGHAGCHAGDHAGWIBHBIAaDHABCMFaBYAaABFGzTDBHIBGxIPHBBHTBKJBFHRGFTCGATAGBHAKJGbHHTBGWHKIBBKTAGcBCHCIAGuHAIBHDIBHBICTMBAFAKJBDTBGEHAFAGIKJGEBAGoHFIBHBIBHBBIGCHAGHHAIABBKJBBTDGPFAGFaCGAIAHAIAGxHAGAHCGBHBGEHBGAHAGABXGBFATBGKIAHBIBTBGAFBIAHABJGFBBGFBBGFBIGGBAGGBADqZAFDDIFAZBBDjPBAAGiIBHAIBHAIBTAIAHABBKJBFmjuCABLGWBDGwhDgAA9/jBAmtFAABBmpBAABlDGBLDEBEGAHAGJXAGMBAGEBAGABAGBBAGBBAmrBAAZQBPmqFAAQAPAaPG/BBG1BGaABfGLYAaCHPTGPAQATABFHPTAOBNBPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQATBPAQATDNCTCBATDOAPAQAPAQAPAQATCXAOAXCBATAYATBBDGEBAmGCAABBcABATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAPAQATAPAQATBGJFAGsFBGeBCGFBBGFBBGFBBGCBCYBXAZAaAYBBAaAXDaBBJcCaBBBGLBAGZBAGSBAGBBAGOBBGNBhm6BAABETCBDMsBCaIL0MDaQMBaCBAaMBCaABuasHAhBCAAGcBCGwBOHAMaBDGfMDBIGTLAGHLABEGlHEBEGdBATAGjBDGHTALEBpCnDnmNBAABBKJBFCjBDDjBDGnBHGzBKTACKBACOBACGBACBBADKBADOBADGBADBhCBAAm2EAABIGVBJGHBXFFBAFpBAFIhEBAAGFBBGABAGrBAGBBCGABBGWBATAMHGWaBMGGeBHMIBvGSBAGBBEMEGVMFBCTAGZBETAB/G3BDMBGBMPBBMtGAHCBAHBBEHDGDBAGCBAGcBBHCBDHAMIBGTIBGGcMBTAGcMCBfGHaAGbHBBDMETGBIG1BCTGGVBBMHGSBEMHGRBGTDBLMGhPBAAmIBAAB2CyBMDyBGMFGjHDBHKJhlEAAMeBAGpBAHBOABBGBhKBAAHCGcMJGABHGVHKMDTEBVGRHDTDBlGUMGBTGWBIIAHAIAG0HOTGBDMTKJHAGBHBGABIHCIAGsICHDIBHBTBcATDHABJcABBGYBGKJBFHCGjHEIAHHBAKJTDGAIBGABHGiHATBGABIHBIAGvICHIIBGDTDHDTAIAHAKJGATAGATCBAMTBKGRBAGYICHCIBHAIAHBTFHAGBHAB9GGBAGABAGDBAGOBAGJTABFGuHAICHHBEKJBFHBIBBAGHBBGBBBGVBAGGBAGBBAGEBAHBGAIBHAIDBBIBBBICBBGABFIABEGEIBBBHGBCHEhKCAAG0ICHHIBHCIAHAGDTEKJTBBATAHAGCBdGvICHFIAHAIDHBIAHBGBTAGABHKJhlCAAGuICHDBBIDHBIAHBTWGDHBBhGvICHHIBHAIAHBTCGABKKJBFTMBSGqHAIAHAIBHFIAHAGATABFKJB1GaBBHCIBHDIAHEBDKJMBTCaAGGh4CAAGrICHIIAHBTAhjBAACfDfKJMIBLGHBBGABBGHBAGBBAGXIFBAIBBBHBIAHAGAIAGAIAHATCBIKJhFBAAGHBBGmICHDBBHBIDHAGATAGAIABaGAHJGnHFIAGAHDTHHABHGAHFIBHCGtHMIAHBTCGATEBMmIBAABGTJh1DAAGIBAGkIAHGBAHFIAHAGATEBJKJMSBCTBGdBBHVBAIAHGIAHBIAHBhIBAAGGBAGBBAGlHFBCHABAHBBAHGGAHABHKJBFGFBAGBBAGfIEBAHBBAIBHAIAHAGABGKJh1EAAGSHBIBTBBGHBGAIAGMBAGhIBHEBCIBHAIAHATMKJhVBAAGABOMUaHYDaQBMTAmZOAAhlBAAruBAABATEBKmDDAAhLpAAmgBAATBBMmvQAAcPHAGFHOhp+AAmGJAAh4GCAm4IAABGGeBAKJBDTBmOBAABAKJBFGdBBHETABJGvHGTEaDFDTAaABJKJBAMGBAGUBEGShvKAACfDfMWTDhkBAAmKBAABDHAGAI2BGHDFMB/FBTAFAHABKIBBNm3fBABHmVTAABpGIhmLCAFDBAFGBAFBBAmiEAABOGABcGCBBGABNGDBHmLGAAhDkAAmqBAABEGMBCGIBGGJBBaAHBTAcDhbJBAHtBBHWBI6zBAAB761DAABJamBBa7IBHCaCIFcHHHaBHGadHDa8BU6BBAAHCaAh5BAAMTBLMTBL6WBAABIMYhGCAACZDZCZDGBADRCZDZCABACBBBCABBCBBBCDBACHDDBADABADGBADKCZDZCBBACDBBCHBACGBADZCBBACDBACEBACABCCGBADZCZDZCZDZCZDZCZDZCZDZCZDbBBCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCADABBKx6/HAAH2aDHxaHHAaNHAaBTEBOHEBAHOhPRAADJGADTBFDFhUDAAHGBAHQBBHGBAHBBAHEBEF9BgHAhvBAAGsBCHGFGBBKJBDGAaAh/EAAGdHABQGrHDKJBEYAhPHAAGaFAHDKJhlLAAGGBAGDBAGBBAGOBAmEDAABBMIHGBoChDhHGFABDKJBDTBhQMAAM6aAMCYAMDhLBAAMsaAMOhBDAAGDBAGaBAGBBAGABBGABAGJBAGDBAGABAGABFGABDGABAGABAGABAGCBAGBBAGABBGABAGABAGABAGABAGABAGBBAGABBGDBAGGBAGDBAGDBAGABAGJBAGQBEGCBAGEBAGQBzXBhNEAAarBD6jBAABLaOBBaOBAaOBAakBJMM6gCAAB3acBMarBDaIBGaBBNaFhZCAA66DAAZE6XLAABDaQBCaMBC62BAABD6eBAABFaLBDaABOaLBDa3BHaJBFanBHadBBaBhNBAA6TFAABLaNBBaMBCaIBGatBAaGBHaNBDaIBGaIBG6SCAABAa2BkKJhFQAAmfbKABfm5ABABFmdDAABBmBaBABNmw0BAhewAAmdIAAhhXAAmKNBABEmfBBAhQxtCcABd8fBAAh/BAAnvDAAhP4PA99/PABB99/PA".split(""),r=ns.map((()=>[]));let i=0,a=0;for(;a<n.length;){const e=rs[n[a]],t=(31&e)-2;let s=1+rs[n[a+1]];switch(32&e?(s+=rs[n[a+2]]<<6,s+=rs[n[a+3]]<<12,s+=rs[n[a+4]]<<18,a+=5):a+=2,t){case-2:{let e=0;for(let t=i;t<i+s;++t)r[e].push(Sa(t)),e=(e+1)%2;break}case-1:break;default:{const e=r[t];1===s?e.push(Sa(i)):e.push(Ba(i,i+s-1));break}}i+=s}const s=new Map;return ns.forEach(((e,n)=>{const i=r[n].reduce(Pa,Fa);t.set(e,i);const a=e.charAt(0),o=s.get(a)||[];s.set(a,o),o.push(i)})),s.forEach(((e,n)=>{t.set(n,e.reduce(Pa,Fa))})),t}();function us(e){return 32===e||9===e||10===e||13===e}const ps=[Sa(is(":")),Ba(is("A"),is("Z")),Sa(is("_")),Ba(is("a"),is("z")),Ba(192,214),Ba(216,246),Ba(192,214),Ba(216,246),Ba(248,767),Ba(880,893),Ba(895,8191),Ba(8204,8205),Ba(8304,8591),Ba(11264,12271),Ba(12289,55295),Ba(63744,64975),Ba(65008,65533),Ba(65536,983039)].reduce(Pa),ds=[ps,Sa(is("-")),Sa(is(".")),Ba(is("0"),is("9")),Sa(183),Ba(768,879),Ba(8255,8256)].reduce(Pa),hs=cs.get("Nd"),ms=ss(hs),fs=os(Ba(0,1114111),[cs.get("P"),cs.get("Z"),cs.get("C")].reduce(Pa)),gs=ss(fs);function ys(e){return 10!==e&&13!==e&&!as(e)}const bs={s:us,S:ss(us),i:ps,I:ss(ps),c:ds,C:ss(ds),d:hs,D:ms,w:fs,W:gs},ws=Ua("*"),vs=Ua("\\"),xs=Ua("{"),As=Ua("}"),_s=Ua("["),Es=Ua("]"),Cs=Ua("^"),Ns=Ua("$"),Ts=Ua(","),ks=Ua("-"),Is=Ua("("),Ss=Ua(")"),Bs=Ua("."),Os=Ua("|"),Fs=Ua("+"),Ps=Ua("?"),Ds=Ua("-["),Rs=is("0");function Ms(e){return[...e].map((e=>e.codePointAt(0)))}var Ls=Object.freeze({__proto__:null,compile:function(e,t={language:"xsd"}){const n=function(e){function t(e){return new Set(e.split("").map((e=>is(e))))}function n(e,t){const n=e.codePointAt(t);return void 0===n?$a(t,["any character"]):Ma(t+String.fromCodePoint(n).length,n)}const r="xpath"===e.language?Ja(vs,ja([Ha(Ua("n"),(()=>10)),Ha(Ua("r"),(()=>13)),Ha(Ua("t"),(()=>9)),Ha(ja([vs,Os,Bs,ks,Cs,Ps,ws,Fs,xs,As,Ns,Is,Ss,_s,Es]),(e=>is(e)))])):Ja(vs,ja([Ha(Ua("n"),(()=>10)),Ha(Ua("r"),(()=>13)),Ha(Ua("t"),(()=>9)),Ha(ja([vs,Os,Bs,ks,Cs,Ps,ws,Fs,xs,As,Is,Ss,_s,Es]),(e=>is(e)))]));function i(e,r){const i=t(r);return Va(Ua(e),Xa(Ga(n,(e=>i.has(e)),r.split(""))),((e,t)=>function(e){const t=cs.get(e);if(null==t)throw new Error(e+" is not a valid unicode category");return t}(null===t?e:e+String.fromCodePoint(t))))}const a=ja([i("L","ultmo"),i("M","nce"),i("N","dlo"),i("P","cdseifo"),i("Z","slp"),i("S","mcko"),i("C","cfon")]),s=[Ba(is("a"),is("z")),Ba(is("A"),is("Z")),Ba(is("0"),is("9")),Sa(45)].reduce(Pa),o=ja([a,Ha(Ja(Ua("Is"),function(e){return(t,n)=>{const r=e(t,n);return r.success?Ma(r.offset,t.slice(n,r.offset)):r}}(za(Ga(n,s,["block identifier"])))),(t=>function(e,t){const n=ls.get(e);if(void 0===n){if(t)return Oa;throw new Error(`The unicode block identifier "${e}" is not known.`)}return n}(t,"xpath"!==e.language)))]),l=Qa(Ua("\\p{"),o,As,!0),c=Ha(Qa(Ua("\\P{"),o,As,!0),ss),u=Ja(vs,Ha(ja("sSiIcCdDwW".split("").map((e=>Ua(e)))),(e=>bs[e]))),p=Ha(Bs,(()=>ys)),d=ja([u,l,c]),h=t("\\[]"),m=ja([r,Ga(n,(e=>!h.has(e)),["unescaped character"])]),f=ja([Ha(ks,(()=>null)),m]),g=Va(f,Ja(ks,f),Ba);function y(e,t){return[e].concat(t||[])}const b=Ha(function(e){return(t,n)=>{const r=e(t,n);return r.success?Ma(n,r.value):r}}(ja([Es,Ds])),(()=>null)),w=is("-"),v=ja([Ha(Wa(Wa(ks,Za(_s,["not ["])),b),(()=>w)),Ja(Za(ks,["not -"]),m)]),x=ja([Va(Ha(v,Sa),ja([function(e,t){return x(e,t)},b]),y),Va(ja([g,d]),ja([_,b]),y)]),A=ja([Va(Ha(m,Sa),ja([x,b]),y),Va(ja([g,d]),ja([_,b]),y)]);function _(e,t){return A(e,t)}const E=Ha(A,(e=>e.reduce(Pa))),C=Ha(Ja(Cs,E),ss),N=Va(ja([Ja(Za(Cs,["not ^"]),E),C]),Xa(Ja(ks,(function(e,t){return T(e,t)}))),os),T=Qa(_s,N,Es,!0),k="xpath"===e.language?ja([Ha(r,Sa),d,T,p,Ha(Cs,(()=>e=>-1===e)),Ha(Ns,(()=>e=>-2===e))]):ja([Ha(r,Sa),d,T,p]),I="xpath"===e.language?t(".\\?*+{}()|^$[]"):t(".\\?*+{}()|[]"),S=Ga(n,(e=>!I.has(e)),["NormalChar"]),B=Ha(Ja(vs,Va(Ha(Ga(n,Ba(is("1"),is("9")),["digit"]),(e=>e-Rs)),qa(Ha(Ga(n,Ba(Rs,is("9")),["digit"]),(e=>e-Rs))),((e,t)=>{t.reduce(((e,t)=>10*e+t),e)}))),(e=>{throw new Error("Backreferences in XPath patterns are not yet implemented.")})),O="xpath"===e.language?ja([Ha(S,(e=>({kind:"predicate",value:Sa(e)}))),Ha(k,(e=>({kind:"predicate",value:e}))),Ha(Qa(Is,Ja(Xa(Ua("?:")),L),Ss,!0),(e=>({kind:"regexp",value:e}))),B]):ja([Ha(S,(e=>({kind:"predicate",value:Sa(e)}))),Ha(k,(e=>({kind:"predicate",value:e}))),Ha(Qa(Is,L,Ss,!0),(e=>({kind:"regexp",value:e})))]),F=Ha(za(Ha(Ga(n,Ba(Rs,is("9")),["digit"]),(e=>e-Rs))),(e=>e.reduce(((e,t)=>10*e+t)))),P=ja([Va(F,Ja(Ts,F),((e,t)=>{if(t<e)throw new Error("quantifier range is in the wrong order");return{min:e,max:t}})),Va(F,Ts,(e=>({min:e,max:null}))),Ha(F,(e=>({min:e,max:e})))]),D="xpath"===e.language?Va(ja([Ha(Ps,(()=>({min:0,max:1}))),Ha(ws,(()=>({min:0,max:null}))),Ha(Fs,(()=>({min:1,max:null}))),Qa(xs,P,As,!0)]),Xa(Ps),((e,t)=>e)):ja([Ha(Ps,(()=>({min:0,max:1}))),Ha(ws,(()=>({min:0,max:null}))),Ha(Fs,(()=>({min:1,max:null}))),Qa(xs,P,As,!0)]),R=qa(Va(O,Ha(Xa(D),(e=>null===e?{min:1,max:1}:e)),((e,t)=>[e,t]))),M=Va(R,qa(Ja(Os,es(R))),((e,t)=>[e].concat(t)));function L(e,t){return M(e,t)}const $=function(e){return Va(e,ts,Ya)}(M);return function(e){let t;try{t=$(e,0)}catch(t){throw new Error(`Error parsing pattern "${e}": ${t instanceof Error?t.message:t}`)}return t.success?t.value:function(e,t,n){const r=n.map((e=>`"${e}"`));throw new Error(`Error parsing pattern "${e}" at offset ${t}: expected ${r.length>1?"one of "+r.join(", "):r[0]} but found "${e.slice(t,t+1)}"`)}(e,t.offset,t.expected)}}(t)(e),r=function(e){const t=new ba;return e(t),new Ia(t.program)}((e=>{Ra(e,n,"xpath"===t.language),e.accept()}));return function(e){const n="xpath"===t.language?[-1,...Ms(e),-2]:Ms(e);return r.execute(n).success}}});function $s(e,t){return{success:!0,offset:e,value:t}}function Us(e){return $s(e,void 0)}function Hs(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function Gs(e){return e>65535?2:1}function js(e,t){return(n,r)=>{const i=n.codePointAt(r);return void 0!==i&&e(i)?Us(r+Gs(i)):Hs(r,t)}}function Xs(e,t){return(n,r)=>{const i=e(n,r);return i.success?$s(i.offset,t(i.value)):i}}function qs(e){return(t,n)=>{let r=[],i=n;for(;;){const n=e(t,i);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===i)break;i=n.offset}return $s(i,r)}}function Vs(e){return(t,n)=>{let r=n;for(;;){const n=e(t,r);if(!n.success){if(n.fatal)return n;break}if(n.offset===r)break;r=n.offset}return Us(r)}}function zs(e,t,n){return(r,i)=>{const a=e(r,i);if(!a.success)return a;const s=t(r,a.offset);return s.success?$s(s.offset,n(a.value,s.value)):s}}function Ys(e,t){return e}function Ks(e,t){return t}function Js(e,t){return zs(e,t,Ks)}function Ws(e,t){return zs(e,t,Ys)}function Qs(e,t){return(n,r)=>e(n,r).success?Hs(r,t):Us(r)}function Zs(e){return(t,n)=>{const r=e(t,n);return r.success?r:Hs(r.offset,r.expected,!0)}}const eo=(e,t)=>e.length===t?Us(t):Hs(t,["end of input"]);function to(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return[t,n.value]}var no=Object.freeze({__proto__:null,codepoint:js,codepoints:function(e,t){return(n,r)=>{const i=r;for(;;){const t=n.codePointAt(r);if(void 0===t)break;if(!e(t))break;r+=t>65535?2:1}return void 0!==t&&r===i?Hs(r,t):Us(r)}},collect:to,complete:function(e){return zs(e,eo,Ys)},consume:function(e){return Xs(e,(()=>{}))},cut:Zs,delimited:function(e,t,n,r=!1){return Js(e,r?Zs(Ws(t,n)):Ws(t,n))},dispatch:function(e,t,n=0,r=[]){return(i,a)=>{const s=i.codePointAt(a+n);if(void 0===s)return Hs(a,r);const o=e[s];return void 0===o?void 0===t?Hs(a,r):t(i,a):o(i,a)}},end:eo,error:Hs,except:function(e,t,n){return Js(Qs(t,n),e)},filter:function(e,t,n,r){return(i,a)=>{const s=e(i,a);return s.success?t(s.value)?s:Hs(a,n,r):s}},filterUndefined:function(e){return Xs(e,(e=>e.filter((e=>void 0!==e))))},first:Ys,followed:Ws,map:Xs,not:Qs,ok:Us,okWithValue:$s,optional:function(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:$s(n,null)}},or:function(e,t){return(n,r)=>{let i=null;for(const a of e){const e=a(n,r);if(e.success)return e;if(null===i||e.offset>i.offset?i=e:e.offset===i.offset&&void 0===t&&(i.expected=i.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==i?void 0:i.expected)||[],i&&(i.expected=t),i||Hs(r,t)}},peek:function(e){return(t,n)=>{const r=e(t,n);return r.success?$s(n,r.value):r}},plus:function(e){return zs(e,qs(e),((e,t)=>[e].concat(t)))},plusConsumed:function(e){return zs(e,Vs(e),Ks)},preceded:Js,range:function(e,t,n){return js((n=>e<=n&&n<=t),n||[`${String.fromCodePoint(e)}-${String.fromCodePoint(t)}`])},recognize:function(e){return(t,n)=>{const r=e(t,n);return r.success?$s(r.offset,t.slice(n,r.offset)):r}},second:Ks,sequence:function(...e){return(t,n)=>{const r=[];for(const i of e){const e=i(t,n);if(!e.success)return e;n=e.offset,r.push(e.value)}return $s(n,r)}},sequenceConsumed:function(...e){return(t,n)=>{for(const r of e){const e=r(t,n);if(!e.success)return e;n=e.offset}return Us(n)}},skipChars:function(e){return(t,n)=>{let r=e;for(;r>0;){const e=t.codePointAt(n);if(void 0===e)return Hs(n,["any character"]);n+=Gs(e),r-=1}return Us(n)}},star:qs,starConsumed:Vs,start:(e,t)=>0===t?Us(t):Hs(t,["start of input"]),streaming:function(e){return function*(t,n){const r=e(t,n);return r.success&&(yield r.value),r}},streamingComplete:function(e){return function*(t,n){const r=yield*e(t,n);return r.success?eo(t,r.offset):r}},streamingFilterUndefined:function(e){return function*(t,n){const r=e(t,n);let i=r.next();for(;!i.done;){const e=i.value;void 0!==e&&(yield e),i=r.next()}return i.value}},streamingOptional:function(e){return function*(t,n){const[r,i]=to(e(t,n));return i.success?(yield*r,i):i.fatal?i:Us(n)}},streamingStar:function(e){return function*(t,n){for(;;){const[r,i]=to(e(t,n));if(!i.success)return i.fatal?i:Us(n);if(yield*r,n===i.offset)return Us(n);n=i.offset}}},streamingThen:function(e,t){return function*(n,r){const i=yield*e(n,r);return i.success?yield*t(n,i.offset):i}},then:zs,token:function(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?$s(r,e):Hs(n,[e])}}});const ro=function(e,t){const n={};function r(e,t){if(!("0"!==e&&"-0"!==e||"0"!==t&&"-0"!==t))return 0;var n=/(?:\+|(-))?(\d+)?(?:\.(\d+))?/;e=n.exec(e+"");var r=n.exec(t+""),i=!e[1];const a=!r[1];return t=(e[2]||"").replace(/^0*/,""),n=(r[2]||"").replace(/^0*/,""),e=e[3]||"",r=r[3]||"",i&&!a?1:!i&&a?-1:(i=i&&a,t.length>n.length?i?1:-1:t.length<n.length?i?-1:1:t>n?i?1:-1:t<n?i?-1:1:(t=Math.max(e.length,r.length),(n=e.padEnd(t,"0"))>(t=r.padEnd(t,"0"))?i?1:-1:n<t?i?-1:1:0))}function i(e,t){return!(-1<(e=e.toString()).indexOf(".")&&0===t)&&(!(e=/^[-+]?0*([1-9]\d*)?(?:\.((?:\d*[1-9])*)0*)?$/.exec(e))[2]||e[2].length<=t)}function a(e,t){switch(t){case"required":return/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"prohibited":return!/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"optional":return!0}}function s(e){switch(e){case 1:case 0:case 6:case 3:case 18:case 22:case 21:case 20:case 23:case 44:return{};case 4:return{ka:i,wa:function(e,t){return 1>r(e,t)},nc:function(e,t){return 0>r(e,t)},xa:function(e,t){return-1<r(e,t)},oc:function(e,t){return 0<r(e,t)}};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{Ba:a};default:return null}}var o={},l={};function c(e){return/^([+-]?(\d*(\.\d*)?([eE][+-]?\d*)?|INF)|NaN)$/.test(e)}function u(e){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(e)}function p(e){return u(e)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(e)}function d(e){return 1===(e=e.split(":")).length?p(e[0]):2===e.length&&(p(e[0])&&p(e[1]))}function h(e){return!/[\u0009\u000A\u000D]/.test(e)}function m(e){return p(e)}const f=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(e){return/^(0|1|true|false)$/.test(e)}],[6,function(e){return c(e)}],[3,c],[4,function(e){return/^[+-]?\d*(\.\d*)?$/.test(e)}],[18,function(e){return/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.test(e)}],[9,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[8,function(e){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[7,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[11,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[12,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[13,function(e){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[15,function(e){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[14,function(e){return/^--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[22,function(e){return/^([0-9A-Fa-f]{2})*$/.test(e)}],[21,function(e){return new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/).test(e)}],[20,function(){return!0}],[44,d],[48,h],[52,function(e){return h(e)&&!/^ | {2,}| $/.test(e)}],[51,function(e){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(e)}],[50,function(e){return/^[-._:A-Za-z0-9]+$/.test(e)}],[25,u],[23,d],[24,p],[42,m],[41,m],[26,function(e){return p(e)}],[5,function(e){return/^[+-]?\d+$/.test(e)}],[16,function(e){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(e)}],[17,function(e){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]+)?S)?)?$/.test(e)}]]);var g=Object.create(null);function y(e,t){if(!g[t])throw Error("Unknown type");return{type:t,value:e}}[{C:0,name:59},{C:0,name:46,parent:59,K:{whiteSpace:"preserve"}},{C:0,name:19,parent:46},{C:0,name:1,parent:46},{C:0,name:0,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:4,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:6,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:3,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:18,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:9,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:8,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:7,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:11,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:12,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:13,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:15,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:14,parent:46,K:{Ba:"optional",whiteSpace:"collapse"}},{C:0,name:22,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:21,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:20,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:23,parent:46,K:{whiteSpace:"collapse"}},{C:0,name:44,parent:46,K:{whiteSpace:"collapse"}},{C:1,name:10,S:9,K:{whiteSpace:"collapse",Ba:"required"}},{C:1,name:48,S:1,K:{whiteSpace:"replace"}},{C:1,name:52,S:48,K:{whiteSpace:"collapse"}},{C:1,name:51,S:52,K:{whiteSpace:"collapse"}},{C:1,name:50,S:52,K:{whiteSpace:"collapse"}},{C:2,name:49,type:50,K:{minLength:1,whiteSpace:"collapse"}},{C:1,name:25,S:52,K:{whiteSpace:"collapse"}},{C:1,name:24,S:25,K:{whiteSpace:"collapse"}},{C:1,name:42,S:24,K:{whiteSpace:"collapse"}},{C:1,name:41,S:24,K:{whiteSpace:"collapse"}},{C:2,name:43,type:41,K:{minLength:1,whiteSpace:"collapse"}},{C:1,name:26,S:24,K:{whiteSpace:"collapse"}},{C:2,name:40,type:26,K:{minLength:1,whiteSpace:"collapse"}},{C:0,name:5,parent:4,K:{ka:0,whiteSpace:"collapse"}},{C:1,name:27,S:5,K:{ka:0,wa:"0",whiteSpace:"collapse"}},{C:1,name:28,S:27,K:{ka:0,wa:"-1",whiteSpace:"collapse"}},{C:1,name:31,S:5,K:{ka:0,wa:"9223372036854775807",xa:"-9223372036854775808",whiteSpace:"collapse"}},{C:1,name:32,S:31,K:{ka:0,wa:"2147483647",xa:"-2147483648",whiteSpace:"collapse"}},{C:1,name:33,S:32,K:{ka:0,wa:"32767",xa:"-32768",whiteSpace:"collapse"}},{C:1,name:34,S:33,K:{ka:0,wa:"127",xa:"-128",whiteSpace:"collapse"}},{C:1,name:30,S:5,K:{ka:0,xa:"0",whiteSpace:"collapse"}},{C:1,name:36,S:30,K:{ka:0,wa:"18446744073709551615",xa:"0",whiteSpace:"collapse"}},{C:1,name:35,S:36,K:{ka:0,wa:"4294967295",xa:"0",whiteSpace:"collapse"}},{C:1,name:38,S:35,K:{ka:0,wa:"65535",xa:"0",whiteSpace:"collapse"}},{C:1,name:37,S:38,K:{ka:0,wa:"255",xa:"0",whiteSpace:"collapse"}},{C:1,name:29,S:30,K:{ka:0,xa:"1",whiteSpace:"collapse"}},{C:1,name:16,S:18,K:{whiteSpace:"collapse"}},{C:1,name:17,S:18,K:{whiteSpace:"collapse"}},{C:1,name:60,S:59},{C:3,name:39,Ca:[]},{C:1,name:61,S:60},{C:1,name:62,S:60},{C:0,name:53,parent:59},{C:1,name:54,S:53},{C:1,name:58,S:53},{C:1,name:47,S:53},{C:1,name:56,S:53},{C:1,name:57,S:53},{C:1,name:55,S:53},{C:3,name:2,Ca:[4,5,6,3]},{C:3,name:63,Ca:[]}].forEach((e=>{const t=e.name,n=e.K||{};switch(e.C){case 0:e=e.parent?g[e.parent]:null;var r=f.get(t)||null;g[t]={C:0,type:t,Ka:n,parent:e,gb:r,Oa:s(t),Ca:[]};break;case 1:e=g[e.S],r=f.get(t)||null,g[t]={C:1,type:t,Ka:n,parent:e,gb:r,Oa:e.Oa,Ca:[]};break;case 2:g[t]={C:2,type:t,Ka:n,parent:g[e.type],gb:null,Oa:o,Ca:[]};break;case 3:e=e.Ca.map((e=>g[e])),g[t]={C:3,type:t,Ka:n,parent:null,gb:null,Oa:l,Ca:e}}}));var b=y(!0,0),w=y(!1,0),v=(e="A wrong argument type was specified in a function call.")=>Error(`FORG0006: ${e}`),x=class{constructor(e,t){this.done=e,this.value=t}},A=new x(!0);function _(e){return new x(!1,e)}function E(e,t){if(3===t.C)return!!t.Ca.find((t=>E(e,t)));for(;e;){if(e.type===t.type)return!0;if(3===e.C)return!!e.Ca.find((e=>C(e.type,t.type)));e=e.parent}return!1}function C(e,t){return e===t||E(g[e],g[t])}var N=class{constructor(){this.value={next:()=>A}}hb(){return this}filter(){return this}first(){return null}O(){return[]}fa(){return!1}Pa(){return 0}F(){return!0}oa(){return!1}map(){return this}N(e){return e([])}X(e){return e.empty?e.empty(this):e.default(this)}},T=class{constructor(e,t){this.type=e,this.value=t}};const k={0:"xs:boolean",1:"xs:string",2:"xs:numeric",3:"xs:double",4:"xs:decimal",5:"xs:integer",6:"xs:float",7:"xs:date",8:"xs:time",9:"xs:dateTime",10:"xs:dateTimeStamp",11:"xs:gYearMonth",12:"xs:gYear",13:"xs:gMonthDay",14:"xs:gMonth",15:"xs:gDay",16:"xs:yearMonthDuration",17:"xs:dayTimeDuration",18:"xs:duration",19:"xs:untypedAtomic",20:"xs:anyURI",21:"xs:base64Binary",22:"xs:hexBinary",23:"xs:QName",24:"xs:NCName",25:"xs:Name",26:"xs:ENTITY",27:"xs:nonPositiveInteger",28:"xs:negativeInteger",29:"xs:positiveInteger",30:"xs:nonNegativeInteger",31:"xs:long",32:"xs:int",33:"xs:short",34:"xs:byte",35:"xs:unsignedInt",36:"xs:unsignedLong",37:"xs:unsignedByte",38:"xs:unsignedShort",39:"xs:error",40:"xs:ENTITIES",41:"xs:IDREF",42:"xs:ID",43:"xs:IDREFS",44:"xs:NOTATION",45:"xs:anySimpleType",46:"xs:anyAtomicType",47:"attribute()",48:"xs:normalizedString",49:"xs:NMTOKENS",50:"xs:NMTOKEN",51:"xs:language",52:"xs:token",53:"node()",54:"element()",55:"document-node()",56:"text()",57:"processing-instruction()",58:"comment()",59:"item()",60:"function(*)",61:"map(*)",62:"array(*)",63:"none"},I={"xs:boolean":0,"xs:string":1,"xs:numeric":2,"xs:double":3,"xs:decimal":4,"xs:integer":5,"xs:float":6,"xs:date":7,"xs:time":8,"xs:dateTime":9,"xs:dateTimeStamp":10,"xs:gYearMonth":11,"xs:gYear":12,"xs:gMonthDay":13,"xs:gMonth":14,"xs:gDay":15,"xs:yearMonthDuration":16,"xs:dayTimeDuration":17,"xs:duration":18,"xs:untypedAtomic":19,"xs:anyURI":20,"xs:base64Binary":21,"xs:hexBinary":22,"xs:QName":23,"xs:NCName":24,"xs:Name":25,"xs:ENTITY":26,"xs:nonPositiveInteger":27,"xs:negativeInteger":28,"xs:positiveInteger":29,"xs:nonNegativeInteger":30,"xs:long":31,"xs:int":32,"xs:short":33,"xs:byte":34,"xs:unsignedInt":35,"xs:unsignedLong":36,"xs:unsignedByte":37,"xs:unsignedShort":38,"xs:error":39,"xs:ENTITIES":40,"xs:IDREF":41,"xs:ID":42,"xs:IDREFS":43,"xs:NOTATION":44,"xs:anySimpleType":45,"xs:anyAtomicType":46,"attribute()":47,"xs:normalizedString":48,"xs:NMTOKENS":49,"xs:NMTOKEN":50,"xs:language":51,"xs:token":52,"node()":53,"element()":54,"document-node()":55,"text()":56,"processing-instruction()":57,"comment()":58,"item()":59,"function(*)":60,"map(*)":61,"array(*)":62};function S(e){return 2===e.g?k[e.type]+"*":1===e.g?k[e.type]+"+":0===e.g?k[e.type]+"?":k[e.type]}function B(e){if("none"===e)throw Error('XPST0051: The type "none" could not be found');if(!e.startsWith("xs:")&&0<=e.indexOf(":"))throw Error(`XPST0081: Invalid prefix for input ${e}`);const t=I[e];if(void 0===t)throw Error(`XPST0051: The type "${e}" could not be found`);return t}function O(e){switch(e[e.length-1]){case"*":return{type:B(e.substr(0,e.length-1)),g:2};case"?":return{type:B(e.substr(0,e.length-1)),g:0};case"+":return{type:B(e.substr(0,e.length-1)),g:1};default:return{type:B(e),g:3}}}function F(e){const t=e.value;if(C(e.type,53))return!0;if(C(e.type,0))return t;if(C(e.type,1)||C(e.type,20)||C(e.type,19))return 0!==t.length;if(C(e.type,2))return!isNaN(t)&&0!==t;throw v(`Cannot determine the effective boolean value of a value with the type ${k[e.type]}`)}function P(e,t=0){e.h=t}var D=class{constructor(e){this.v=L,this.h=e;let t=!1;this.value={next:()=>t?A:(t=!0,_(e))},this.o=null}hb(){return this}filter(e){return e(this.h,0,this)?this:this.v.create()}first(){return this.h}O(){return[this.h]}fa(){return null===this.o&&(this.o=F(this.h)),this.o}Pa(){return 1}F(){return!1}oa(){return!0}map(e){return this.v.create(e(this.h,0,this))}N(e){return e([this.h])}X(e){return e.m?e.m(this):e.default(this)}};const R=new N;function M(e=null,t=null){if(null===e)return R;if(Array.isArray(e))switch(e.length){case 0:return R;case 1:return new D(e[0]);default:return new class{constructor(e){this.o=L,this.h=e;let t=-1;this.value={next:()=>(t++,t>=e.length?A:_(e[t]))}}hb(){return this}filter(e){let t=-1;return this.o.create({next:()=>{for(t++;t<this.h.length&&!e(this.h[t],t,this);)t++;return t>=this.h.length?A:_(this.h[t])}})}first(){return this.h[0]}O(){return this.h}fa(){if(C(this.h[0].type,53))return!0;throw v("Cannot determine the effective boolean value of a sequence with a length higher than one.")}Pa(){return this.h.length}F(){return!1}oa(){return!1}map(e){let t=-1;return this.o.create({next:()=>++t>=this.h.length?A:_(e(this.h[t],t,this))},this.h.length)}N(e){return e(this.h)}X(e){return e.multiple?e.multiple(this):e.default(this)}}(e)}return e.next?new class{constructor(e,t=null){this.D=L,this.value={next:t=>null!==this.o&&this.h>=this.o?A:void 0!==this.v[this.h]?_(this.v[this.h++]):(t=e.next(t)).done?(this.o=this.h,t):((this.l||2>this.h)&&(this.v[this.h]=t.value),this.h++,t)},this.l=!1,this.v=[],this.h=0,this.o=t}hb(){return this.D.create(this.O())}filter(e){let t=-1;const n=this.value;return this.D.create({next:r=>{for(t++,r=n.next(r);!r.done&&!e(r.value,t,this);)t++,r=n.next(0);return r}})}first(){if(void 0!==this.v[0])return this.v[0];const e=this.value.next(0);return P(this),e.done?null:e.value}O(){if(this.h>this.v.length&&this.o!==this.v.length)throw Error("Implementation error: Sequence Iterator has progressed.");const e=this.value;this.l=!0;let t=e.next(0);for(;!t.done;)t=e.next(0);return this.v}fa(){const e=this.value,t=this.h;P(this);var n=e.next(0);if(n.done)return P(this,t),!1;if(C((n=n.value).type,53))return P(this,t),!0;if(!e.next(0).done)throw v("Cannot determine the effective boolean value of a sequence with a length higher than one.");return P(this,t),F(n)}Pa(e=!1){if(null!==this.o)return this.o;if(e)return-1;e=this.h;const t=this.O().length;return P(this,e),t}F(){return 0===this.o||null===this.first()}oa(){if(null!==this.o)return 1===this.o;var e=this.value;const t=this.h;return P(this),e.next(0).done?(P(this,t),!1):(e=e.next(0),P(this,t),e.done)}map(e){let t=0;const n=this.value;return this.D.create({next:r=>(r=n.next(r)).done?A:_(e(r.value,t++,this))},this.o)}N(e,t){const n=this.value;let r;const i=[];let a=!0;return function(){for(let e=n.next(a?0:t);!e.done;e=n.next(t))a=!1,i.push(e.value);r=e(i).value}(),this.D.create({next:()=>r.next(0)})}X(e){let t=null;const n=e=>{t=e.value,-1!==(e=e.Pa(!0))&&(this.o=e)};return this.D.create({next:r=>t?t.next(r):this.F()?(n(e.empty?e.empty(this):e.default(this)),t.next(r)):this.oa()?(n(e.m?e.m(this):e.default(this)),t.next(r)):(n(e.multiple?e.multiple(this):e.default(this)),t.next(r))})}}(e,t):new D(e)}var L={create:M,m:e=>new D(e),empty:()=>M(),aa:()=>M(b),T:()=>M(w)};function $(e){const t=[],n=e.value;return()=>{let e=0;return L.create({next:()=>{if(void 0!==t[e])return t[e++];const r=n.next(0);return r.done?r:t[e++]=r}})}}var U=class{constructor(e,t,n){this.namespaceURI=t||null,this.prefix=e||"",this.localName=n}za(){return this.prefix?this.prefix+":"+this.localName:this.localName}};var H=class extends T{constructor({j:e,arity:t,Ya:n=!1,I:r=!1,localName:i,namespaceURI:a,i:s,value:o}){for(super(60,null),this.value=o,this.I=r,r=-1,o=0;o<e.length;o++)4===e[o]&&(r=o);-1<r&&(o=Array(t-(e.length-1)).fill(e[r-1]),e=e.slice(0,r).concat(o)),this.o=e,this.v=t,this.ia=n,this.D=i,this.l=a,this.s=s}Ya(){return this.ia}};function G(e,t){const n=[];return 2!==e&&1!==e||n.push("type-1-or-type-2"),n.push(`type-${e}`),t&&n.push(`name-${t}`),n}function j(e){const t=e.node.nodeType;let n;return 2!==t&&1!==t||(n=e.node.localName),G(t,n)}function X(e){let t,n=e.nodeType;return 4===n&&(n=3),2!==n&&1!==n||(t=e.localName),G(n,t)}var q=class{getAllAttributes(e,t=null){return 1!==e.nodeType?[]:(e=Array.from(e.attributes),null===t?e:e.filter((e=>X(e).includes(t))))}getAttribute(e,t){return 1!==e.nodeType?null:e.getAttribute(t)}getChildNodes(e,t=null){return e=Array.from(e.childNodes),null===t?e:e.filter((e=>X(e).includes(t)))}getData(e){return 2===e.nodeType?e.value:e.data}getFirstChild(e,t=null){for(e=e.firstChild;e;e=e.nextSibling)if(null===t||X(e).includes(t))return e;return null}getLastChild(e,t=null){for(e=e.lastChild;e;e=e.previousSibling)if(null===t||X(e).includes(t))return e;return null}getNextSibling(e,t=null){for(e=e.nextSibling;e;e=e.nextSibling)if(null===t||X(e).includes(t))return e;return null}getParentNode(e,t=null){return(e=2===e.nodeType?e.ownerElement:e.parentNode)&&(null===t||X(e).includes(t))?e:null}getPreviousSibling(e,t=null){for(e=e.previousSibling;e;e=e.previousSibling)if(null===t||X(e).includes(t))return e;return null}};var V=new class{insertBefore(e,t,n){return e.insertBefore(t,n)}removeAttributeNS(e,t,n){return e.removeAttributeNS(t,n)}removeChild(e,t){return e.removeChild(t)}setAttributeNS(e,t,n,r){e.setAttributeNS(t,n,r)}setData(e,t){e.data=t}};class z{constructor(e){this.h=e}insertBefore(e,t,n){return this.h.insertBefore(e,t,n)}removeAttributeNS(e,t,n){return this.h.removeAttributeNS(e,t,n)}removeChild(e,t){return this.h.removeChild(e,t)}setAttributeNS(e,t,n,r){this.h.setAttributeNS(e,t,n,r)}setData(e,t){this.h.setData(e,t)}}function Y(e){return void 0!==e.Ra}function K(e,t,n){let r=null;return t&&(Y(t.node)?r={G:t.G,offset:n,parent:t.node}:t.G&&(r=t.G)),{node:e,G:r}}function J(e,t,n=null){return e.getAllAttributes(t.node,n).map((e=>K(e,t,e.nodeName)))}function W(e,t,n){return Y(t=t.node)?(e=t.attributes.find((e=>n===e.name)))?e.value:null:(e=e.h.getAttribute(t,n))?e:null}function Q(e,t,n=null){return e.getChildNodes(t.node,n).map(((e,n)=>K(e,t,n)))}function Z(e,t){return e.getData(t.node)}function ee(e,t,n=null){const r=t.node;return Y(r)?e=r.childNodes[0]:((n=e.h.getFirstChild(r,n))&&10===n.nodeType&&(n=e.h.getNextSibling(n)),e=n),e?K(e,t,0):null}function te(e,t,n=null){var r=t.node;return Y(r)?(e=r.childNodes.length-1,r=r.childNodes[e]):((r=e.h.getLastChild(r,n))&&10===r.nodeType&&(r=e.h.getPreviousSibling(r)),e=e.getChildNodes(t.node,n).length-1),r?K(r,t,e):null}function ne(e,t,n=null){const r=t.node,i=t.G;if(i)"number"==typeof i.offset&&r===i.parent.childNodes[i.offset]||"string"==typeof i.offset&&r===i.parent.attributes.find((e=>i.offset===e.nodeName))?(e=i.parent,t=i.G):(e=e.getParentNode(r,n),t=i);else{if(Y(r))return null;e=e.getParentNode(r,n),t=null}return e?{node:e,G:t}:null}function re(e,t,n=null){const r=t.node;let i,a,s;const o=t.G;if(Y(r))o&&(s=o.offset+1,i=o.parent.childNodes[s]);else{if(!o){for(i=r;i&&(!(i=e.h.getNextSibling(i,n))||10===i.nodeType););return i?{node:i,G:null}:null}s=o.offset+1,a=ne(e,t,null),i=e.getChildNodes(a.node,n)[s]}return i?K(i,a||ne(e,t,n),s):null}function ie(e,t,n=null){const r=t.node;let i,a;const s=t.G;let o;if(Y(r))s&&(o=s.offset-1,i=s.parent.childNodes[o]);else{if(!s){for(i=r;i&&(!(i=e.h.getPreviousSibling(i,n))||10===i.nodeType););return i?{node:i,G:null}:null}o=s.offset-1,a=ne(e,t,null),i=e.getChildNodes(a.node,n)[o]}return i?K(i,a||ne(e,t,n),o):null}var ae=class{constructor(e){this.h=e,this.o=[]}getAllAttributes(e,t=null){return Y(e)?e.attributes:this.h.getAllAttributes(e,t)}getChildNodes(e,t=null){return t=Y(e)?e.childNodes:this.h.getChildNodes(e,t),9===e.nodeType?t.filter((e=>10!==e.nodeType)):t}getData(e){return Y(e)?2===e.nodeType?e.value:e.data:this.h.getData(e)||""}getParentNode(e,t=null){return this.h.getParentNode(e,t)}},se=(e,t,n,r,i)=>i.N((([e])=>r.N((([t])=>{const n=e.value;if(0>=n||n>t.h.length)throw Error("FOAY0001: array position out of bounds.");return t.h[n-1]()})))),oe=class extends H{constructor(e){super({value:(e,t,n,r)=>se(0,0,0,L.m(this),r),localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/array",j:[{type:5,g:3}],arity:1,i:{type:59,g:2}}),this.type=62,this.h=e}};function le(e){switch(e.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function ce(e){return{type:le(e),value:e}}function ue(e,t){return e=e.map((e=>e.first())),t(e)}function pe(e,t){var n=C(e.type,1)||C(e.type,20)||C(e.type,19),r=C(t.type,1)||C(t.type,20)||C(t.type,19);return n&&r?e.value===t.value:(n=C(e.type,4)||C(e.type,3)||C(e.type,6),r=C(t.type,4)||C(t.type,3)||C(t.type,6),n&&r?!(!isNaN(e.value)||!isNaN(t.value))||e.value===t.value:(n=C(e.type,0)||C(e.type,22)||C(e.type,18)||C(e.type,23)||C(e.type,44),r=C(t.type,0)||C(t.type,22)||C(t.type,18)||C(t.type,23)||C(t.type,44),!(!n||!r)&&e.value===t.value))}var de=(e,t,n,r,i)=>ue([r,i],(([e,t])=>(e=e.h.find((e=>pe(e.key,t))))?e.value():L.empty())),he=class extends H{constructor(e){super({j:[{type:59,g:3}],arity:1,localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/map",value:(e,t,n,r)=>de(0,0,0,L.m(this),r),i:{type:59,g:2}}),this.type=61,this.h=e}};function me(e,t){return e.h()===t.h()&&e.o()===t.o()}var fe=class{$a(){return 0}getHours(){return 0}getMinutes(){return 0}ab(){return 0}h(){return 0}o(){return 0}getSeconds(){return 0}bb(){return 0}na(){return!0}};function ge(e){var t=Math.abs(e.$a()),n=Math.abs(e.getHours());const r=Math.abs(e.getMinutes());return n=(n?`${n}H`:"")+(r?`${r}M`:"")+((e=Math.abs(e.getSeconds()))?`${e}S`:""),(t=""+(t?`${t}D`:""))&&n?`${t}T${n}`:t||(n?`T${n}`:"T0S")}var ye=class extends fe{constructor(e){if(super(),e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ca=e}$a(){return Math.trunc(this.ca/86400)}getHours(){return Math.trunc(this.ca%86400/3600)}getMinutes(){return Math.trunc(this.ca%3600/60)}o(){return this.ca}getSeconds(){const e=this.ca%60;return Object.is(-0,e)?0:e}na(){return!Object.is(-0,this.ca)&&0<=this.ca}toString(){return(this.na()?"P":"-P")+ge(this)}},be=(e,t,n,r,i,a)=>(e=86400*e+3600*t+60*n+r+i,new ye(a||0===e?e:-e)),we=e=>(e=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e))?be(e[4]?parseInt(e[4],10):0,e[5]?parseInt(e[5],10):0,e[6]?parseInt(e[6],10):0,e[7]?parseInt(e[7],10):0,e[8]?parseFloat(e[8]):0,!e[1]):null,ve=e=>"Z"===(e=/^(Z)|([+-])([01]\d):([0-5]\d)$/.exec(e))[1]?be(0,0,0,0,0,!0):be(0,e[3]?parseInt(e[3],10):0,e[4]?parseInt(e[4],10):0,0,0,"+"===e[2]);function xe(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:dayTimeDuration by NaN");if((e=e.ca*t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while multiplying xs:dayTimeDuration");return new ye(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)}function Ae(e){return e?parseInt(e,10):null}function _e(e){const t=(e+="").startsWith("-");return t&&(e=e.substring(1)),(t?"-":"")+e.padStart(4,"0")}function Ee(e){return(e+"").padStart(2,"0")}function Ce(e){return 1===(e+="").split(".")[0].length&&(e=e.padStart(e.length+1,"0")),e}function Ne(e){return 0===e.getHours()&&0===e.getMinutes()?"Z":(e.na()?"+":"-")+Ee(Math.abs(e.getHours()))+":"+Ee(Math.abs(e.getMinutes()))}function Te(e){var t=/^(?:(-?\d{4,}))?(?:--?(\d\d))?(?:-{1,3}(\d\d))?(T)?(?:(\d\d):(\d\d):(\d\d))?(\.\d+)?(Z|(?:[+-]\d\d:\d\d))?$/.exec(e);e=t[1]?parseInt(t[1],10):null;const n=Ae(t[2]),r=Ae(t[3]),i=t[4],a=Ae(t[5]),s=Ae(t[6]),o=Ae(t[7]),l=t[8]?parseFloat(t[8]):0;if(t=t[9]?ve(t[9]):null,e&&(-271821>e||273860<e))throw Error("FODT0001: Datetime year is out of bounds");return i?new Se(e,n,r,a,s,o,l,t,9):null!==a&&null!==s&&null!==o?new Se(1972,12,31,a,s,o,l,t,8):null!==e&&null!==n&&null!==r?new Se(e,n,r,0,0,0,0,t,7):null!==e&&null!==n?new Se(e,n,1,0,0,0,0,t,11):null!==n&&null!==r?new Se(1972,n,r,0,0,0,0,t,13):null!==e?new Se(e,1,1,0,0,0,0,t,12):null!==n?new Se(1972,n,1,0,0,0,0,t,14):new Se(1972,12,r,0,0,0,0,t,15)}function ke(e,t){switch(t){case 15:return new Se(1972,12,e.o,0,0,0,0,e.Y,15);case 14:return new Se(1972,e.h,1,0,0,0,0,e.Y,14);case 12:return new Se(e.v,1,1,0,0,0,0,e.Y,12);case 13:return new Se(1972,e.h,e.o,0,0,0,0,e.Y,13);case 11:return new Se(e.v,e.h,1,0,0,0,0,e.Y,11);case 8:return new Se(1972,12,31,e.l,e.s,e.D,e.qa,e.Y,8);case 7:return new Se(e.v,e.h,e.o,0,0,0,0,e.Y,7);default:return new Se(e.v,e.h,e.o,e.l,e.s,e.D,e.qa,e.Y,9)}}function Ie(e,t){return t=e.Y||t||ve("Z"),new Date(Date.UTC(e.v,e.h-1,e.o,e.l-t.getHours(),e.s-t.getMinutes(),e.D,1e3*e.qa))}var Se=class{constructor(e,t,n,r,i,a,s,o,l=9){this.v=e,this.h=t,this.o=n+(24===r?1:0),this.l=24===r?0:r,this.s=i,this.D=a,this.qa=s,this.Y=o,this.type=l}getDay(){return this.o}getHours(){return this.l}getMinutes(){return this.s}getMonth(){return this.h}getSeconds(){return this.D}getYear(){return this.v}toString(){switch(this.type){case 9:return _e(this.v)+"-"+Ee(this.h)+"-"+Ee(this.o)+"T"+Ee(this.l)+":"+Ee(this.s)+":"+Ce(this.D+this.qa)+(this.Y?Ne(this.Y):"");case 7:return _e(this.v)+"-"+Ee(this.h)+"-"+Ee(this.o)+(this.Y?Ne(this.Y):"");case 8:return Ee(this.l)+":"+Ee(this.s)+":"+Ce(this.D+this.qa)+(this.Y?Ne(this.Y):"");case 15:return"---"+Ee(this.o)+(this.Y?Ne(this.Y):"");case 14:return"--"+Ee(this.h)+(this.Y?Ne(this.Y):"");case 13:return"--"+Ee(this.h)+"-"+Ee(this.o)+(this.Y?Ne(this.Y):"");case 12:return _e(this.v)+(this.Y?Ne(this.Y):"");case 11:return _e(this.v)+"-"+Ee(this.h)+(this.Y?Ne(this.Y):"")}throw Error("Unexpected subType")}};function Be(e,t,n){const r=Ie(e,n).getTime();return r===(n=Ie(t,n).getTime())?e.qa===t.qa?0:e.qa>t.qa?1:-1:r>n?1:-1}function Oe(e,t,n){return 0===Be(e,t,n)}function Fe(e,t,n){return e=(Ie(e,n).getTime()-Ie(t,n).getTime())/1e3,new ye(e)}function Pe(e){throw Error(`Not implemented: adding durations to ${k[e.type]}`)}function De(e){throw Error(`Not implemented: subtracting durations from ${k[e.type]}`)}function Re(e,t){if(null===e)return null;switch(typeof e){case"boolean":return e?b:w;case"number":return y(e,3);case"string":return y(e,1);case"object":if("nodeType"in e)return ce({node:e,G:null});if(Array.isArray(e))return new oe(e.map((e=>void 0===e?()=>L.empty():$(e=null===(e=Re(e))?L.empty():L.m(e)))));if(e instanceof Date){const t=Te(e.toISOString());return y(t,t.type)}return new he(Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{var n=Re(e[t]);return n=null===n?L.empty():L.m(n),{key:y(t,1),value:$(n)}})))}throw Error(`Value ${String(e)} of type "${typeof e}" is not adaptable to an XPath value.`)}function Me(e,t){if("number"!=typeof e&&("string"!=typeof e||!f.get(t)(e)))throw Error(`Cannot convert JavaScript value '${e}' to the XPath type ${k[t]} since it is not valid.`)}function Le(e,t,n){if(null===t)return null;switch(e){case 0:return t?b:w;case 1:return y(t+"",1);case 3:case 2:return Me(t,3),y(+t,3);case 4:return Me(t,e),y(+t,4);case 5:return Me(t,e),y(0|t,5);case 6:return Me(t,e),y(+t,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(t instanceof Date))throw Error(`The JavaScript value ${t} with type ${typeof t} is not a valid type to be converted to an XPath ${k[e]}.`);return y(ke(Te(t.toISOString()),e),e);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if("object"!=typeof t||!("nodeType"in t))throw Error(`The JavaScript value ${t} with type ${typeof t} is not a valid type to be converted to an XPath ${k[e]}.`);return ce({node:t,G:null});case 59:case 61:return Re(t);default:throw Error(`Values of the type "${k[e]}" can not be adapted from JavaScript to equivalent XPath values.`)}}function $e(e,t,n){if(0===n.g)return null===(t=Le(n.type,t))?[]:[t];if(2===n.g||1===n.g){if(!Array.isArray(t))throw Error(`The JavaScript value ${t} should be an array if it is to be converted to ${S(n)}.`);return t.map((e=>Le(n.type,e))).filter((e=>null!==e))}const r=Le(n.type,t);if(null===r)throw Error(`The JavaScript value ${t} should be a single entry if it is to be converted to ${S(n)}.`);return[r]}function Ue(e,t,n={type:59,g:0}){return L.create($e(0,t,n))}var He=2**32;function Ge(e,t,n,r){return new Ye({M:n,Aa:t,ta:r||e.ta,ra:e.ra},e.h,e.o)}function je(e,t){let n=0;const r=t.value;return{next:i=>(i=r.next(i)).done?A:_(Ge(e,n++,i.value,t))}}function Xe(e){return e.h.ib||(e.h.ib=!0,e.h.qb=Te((new Date).toISOString()),e.h.vb=we("PT0S")),e.h.qb}function qe(e){return e.h.ib||(e.h.ib=!0,e.h.qb=Te((new Date).toISOString()),e.h.vb=we("PT0S")),e.h.vb}function Ve(e,t=null){return e=29421*(null!=t?t:e.o.h)%He,{rb:Math.floor(e),$b:e/He}}function ze(e,t){return new Ye({M:e.M,Aa:e.Aa,ta:e.ta,ra:Object.assign(Object.create(null),e.ra,t)},e.h,e.o)}var Ye=class{constructor(e,t={qb:null,vb:null,ib:!1},n=new class{constructor(){this.h=Math.abs(Math.floor(Math.random()*He)%He)}}){this.h=t,this.Aa=e.Aa,this.ta=e.ta,this.M=e.M,this.ra=e.ra||Object.create(null),this.o=n}},Ke=class{constructor(e,t,n,r,i,a,s,o,l){this.debug=e,this.Ha=t,this.h=n,this.Ja=r,this.Ma=i,this.o=a,this.v=s,this.jb=o,this.Ua=l}};function Je(e){let t=0,n=null,r=!0;return L.create({next:i=>{for(;t<e.length;){n||(n=e[t].value,r=!0);const a=n.next(r?0:i);if(r=!1,!a.done)return a;t++,n=null}return A}})}var We=(e,t,n)=>Error(`FORG0001: Cannot cast ${e} to ${k[t]}${n?`, ${n}`:""}`),Qe=e=>Error(`XPDY0002: ${e}`),Ze=e=>Error(`XPTY0004: ${e}`),et=e=>Error(`FOTY0013: Atomization is not supported for ${k[e]}.`),tt=e=>Error(`XPST0081: The prefix ${e} could not be resolved.`);function nt(e,t){if(C(e.type,46)||C(e.type,19)||C(e.type,0)||C(e.type,4)||C(e.type,3)||C(e.type,6)||C(e.type,5)||C(e.type,2)||C(e.type,23)||C(e.type,1))return L.create(e);const n=t.h;if(C(e.type,53)){const t=e.value;if(2===t.node.nodeType||3===t.node.nodeType)return L.create(y(Z(n,t),19));if(8===t.node.nodeType||7===t.node.nodeType)return L.create(y(Z(n,t),1));const r=[];return function e(i){if(8!==t.node.nodeType&&7!==t.node.nodeType){var a=i.nodeType;3===a||4===a?r.push(n.getData(i)):1!==a&&9!==a&&11!==a||n.getChildNodes(i).forEach((t=>{e(t)}))}}(t.node),L.create(y(r.join(""),19))}if(C(e.type,60)&&!C(e.type,62))throw et(e.type);if(C(e.type,62))return Je(e.h.map((e=>rt(e(),t))));throw Error(`Atomizing ${e.type} is not implemented.`)}function rt(e,t){let n=!1;const r=e.value;let i=null;return L.create({next:()=>{for(;!n;){if(!i){var e=r.next(0);if(e.done){n=!0;break}i=nt(e.value,t).value}if(!(e=i.next(0)).done)return e;i=null}return A}})}function it(e){for(e=g[e];e&&0!==e.C;)e=e.parent;return e?e.type:null}function at(e,t){const n=(t=g[t]).Ka;if(!n||!n.whiteSpace)return t.parent?at(e,t.parent.type):e;switch(t.Ka.whiteSpace){case"replace":return e.replace(/[\u0009\u000A\u000D]/g," ");case"collapse":return e.replace(/[\u0009\u000A\u000D]/g," ").replace(/ {2,}/g," ").replace(/^ | $/g,"")}return e}function st(e,t){for(t=g[t];t&&null===t.gb;){if(2===t.C||3===t.C)return!0;t=t.parent}return!t||t.gb(e)}function ot(e,t){for(;e;){if(e.Oa&&e.Oa[t])return e.Oa[t];e=e.parent}return()=>!0}function lt(e){return!e||(2===e.g||0===e.g)}function ct(e,t){return e(2)?e=>({u:!0,value:e}):e(0)?e=>({u:!0,value:e?1:0}):e(1)||e(19)?e=>{switch(e){case"NaN":return{u:!0,value:NaN};case"INF":case"+INF":return{u:!0,value:1/0};case"-INF":return{u:!0,value:-1/0};case"0":case"+0":return{u:!0,value:0};case"-0":return{u:!0,value:-0}}const n=parseFloat(e);return isNaN(n)?{u:!1,error:We(e,t)}:{u:!0,value:n}}:()=>({u:!1,error:Error(`XPTY0004: Casting not supported from given type to ${t} or any of its derived types.`)})}function ut(e){const t=Math.abs(e.bb());return(t?`${t}Y`:"")+(""+((e=Math.abs(e.ab()))?`${e}M`:""))||"0M"}var pt=class extends fe{constructor(e){if(super(),e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ea=e}ab(){const e=this.ea%12;return 0===e?0:e}h(){return this.ea}bb(){return Math.trunc(this.ea/12)}na(){return!Object.is(-0,this.ea)&&0<=this.ea}toString(){return(this.na()?"P":"-P")+ut(this)}},dt=e=>{var t=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e);if(t){if(e=!t[1],(t=12*(t[2]?parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0))>Number.MAX_SAFE_INTEGER||!Number.isFinite(t))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");e=new pt(e||0===t?t:-t)}else e=null;return e};function ht(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:yearMonthDuration by NaN");if((e=Math.round(e.ea*t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");return new pt(e<Number.MIN_SAFE_INTEGER||0===e?0:e)}var mt=class extends fe{constructor(e,t){super(),this.Va=e,this.Ga=t}$a(){return this.Ga.$a()}getHours(){return this.Ga.getHours()}getMinutes(){return this.Ga.getMinutes()}ab(){return this.Va.ab()}h(){return this.Va.h()}o(){return this.Ga.o()}getSeconds(){return this.Ga.getSeconds()}bb(){return this.Va.bb()}na(){return this.Va.na()&&this.Ga.na()}toString(){const e=this.na()?"P":"-P",t=ut(this.Va),n=ge(this.Ga);return"0M"===t?e+n:"T0S"===n?e+t:e+t+n}};const ft=[3,6,4,5];function gt(e){if(e(1)||e(19))return e=>({u:!0,value:e+""});if(e(20))return e=>({u:!0,value:e});if(e(23))return e=>({u:!0,value:e.prefix?`${e.prefix}:${e.localName}`:e.localName});if(e(44))return e=>({u:!0,value:e.toString()});if(e(2)){if(e(5)||e(4))return e=>({u:!0,value:(e+"").replace("e","E")});if(e(6)||e(3))return e=>isNaN(e)?{u:!0,value:"NaN"}:isFinite(e)?Object.is(e,-0)?{u:!0,value:"-0"}:{u:!0,value:(e+"").replace("e","E").replace("E+","E")}:{u:!0,value:(0>e?"-":"")+"INF"}}return e(9)||e(7)||e(8)||e(15)||e(14)||e(13)||e(12)||e(11)||e(16)||e(17)||e(18)?e=>({u:!0,value:e.toString()}):e(22)?e=>({u:!0,value:e.toUpperCase()}):e=>({u:!0,value:e+""})}const yt=[2,5,17,16];function bt(e,t){const n=t=>C(e,t);if(39===t)return()=>({u:!1,error:Error("FORG0001: Casting to xs:error is always invalid.")});switch(t){case 19:return function(e){const t=gt(e);return e=>(e=t(e)).u?{u:!0,value:y(e.value,19)}:e}(n);case 1:return function(e){const t=gt(e);return e=>(e=t(e)).u?{u:!0,value:y(e.value,1)}:e}(n);case 6:return function(e){const t=ct(e,6);return e=>(e=t(e)).u?{u:!0,value:y(e.value,6)}:e}(n);case 3:return function(e){const t=ct(e,3);return e=>(e=t(e)).u?{u:!0,value:y(e.value,3)}:e}(n);case 4:return function(e){return e(5)?e=>({u:!0,value:y(e,4)}):e(6)||e(3)?e=>isNaN(e)||!isFinite(e)?{u:!1,error:Error(`FOCA0002: Can not cast ${e} to xs:decimal`)}:Math.abs(e)>Number.MAX_VALUE?{u:!1,error:Error(`FOAR0002: Can not cast ${e} to xs:decimal, it is out of bounds for JavaScript numbers`)}:{u:!0,value:y(e,4)}:e(0)?e=>({u:!0,value:y(e?1:0,4)}):e(1)||e(19)?e=>{const t=parseFloat(e);return!isNaN(t)||isFinite(t)?{u:!0,value:y(t,4)}:{u:!1,error:Error(`FORG0001: Can not cast ${e} to xs:decimal`)}}:()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.")})}(n);case 5:return function(e){return e(0)?e=>({u:!0,value:y(e?1:0,5)}):e(2)?e=>{const t=Math.trunc(e);return!isFinite(t)||isNaN(t)?{u:!1,error:Error(`FOCA0002: can not cast ${e} to xs:integer`)}:Number.isSafeInteger(t)?{u:!0,value:y(t,5)}:{u:!1,error:Error(`FOAR0002: can not cast ${e} to xs:integer, it is out of bounds for JavaScript numbers.`)}}:e(1)||e(19)?e=>{const t=parseInt(e,10);return isNaN(t)?{u:!1,error:We(e,5)}:Number.isSafeInteger(t)?{u:!0,value:y(t,5)}:{u:!1,error:Error(`FOCA0003: can not cast ${e} to xs:integer, it is out of bounds for JavaScript numbers.`)}}:()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.")})}(n);case 2:return function(e){var t=bt;return n=>{for(const r of ft){const i=t(e,r)(n);if(i.u)return i}return{u:!1,error:Error(`XPTY0004: Casting not supported from "${n}" given type to xs:numeric or any of its derived types.`)}}}(e);case 18:return function(e){return e(16)?e=>({u:!0,value:y(new mt(e,new ye(e.na()?0:-0)),18)}):e(17)?e=>({u:!0,value:y(e=new mt(new pt(e.na()?0:-0),e),18)}):e(18)?e=>({u:!0,value:y(e,18)}):e(19)||e(1)?e=>({u:!0,value:y(new mt(dt(e),we(e)),18)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.")})}(n);case 16:return function(e){return e(18)&&!e(17)?e=>({u:!0,value:y(e.Va,16)}):e(17)?()=>({u:!0,value:y(dt("P0M"),16)}):e(19)||e(1)?e=>{const t=dt(e);return t?{u:!0,value:y(t,16)}:{u:!1,error:We(e,16)}}:()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.")})}(n);case 17:return function(e){return e(18)&&!e(16)?e=>({u:!0,value:y(e.Ga,17)}):e(16)?()=>({u:!0,value:y(we("PT0.0S"),17)}):e(19)||e(1)?e=>{const t=we(e);return t?{u:!0,value:y(t,17)}:{u:!1,error:Error(`FORG0001: Can not cast ${e} to xs:dayTimeDuration`)}}:()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.")})}(n);case 9:return function(e){return e(7)?e=>({u:!0,value:y(ke(e,9),9)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),9)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.")})}(n);case 8:return function(e){return e(9)?e=>({u:!0,value:y(ke(e,8),8)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),8)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:time or any of its derived types.")})}(n);case 7:return function(e){return e(9)?e=>({u:!0,value:y(ke(e,7),7)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),7)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:date or any of its derived types.")})}(n);case 11:return function(e){return e(7)||e(9)?e=>({u:!0,value:y(ke(e,11),11)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),11)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.")})}(n);case 12:return function(e){return e(7)||e(9)?e=>({u:!0,value:y(ke(e,12),12)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),12)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.")})}(n);case 13:return function(e){return e(7)||e(9)?e=>({u:!0,value:y(ke(e,13),13)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),13)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.")})}(n);case 15:return function(e){return e(7)||e(9)?e=>({u:!0,value:y(ke(e,15),15)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),15)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.")})}(n);case 14:return function(e){return e(7)||e(9)?e=>({u:!0,value:y(ke(e,14),14)}):e(19)||e(1)?e=>({u:!0,value:y(Te(e),14)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.")})}(n);case 0:return function(e){return e(2)?e=>({u:!0,value:0===e||isNaN(e)?w:b}):e(1)||e(19)?e=>{switch(e){case"true":case"1":return{u:!0,value:b};case"false":case"0":return{u:!0,value:w};default:return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}:()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")})}(n);case 21:return function(e){return e(22)?e=>{let t="";for(let n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return{u:!0,value:y(btoa(t),21)}}:e(1)||e(19)?e=>({u:!0,value:y(e,21)}):()=>({error:Error("XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types."),u:!1})}(n);case 22:return function(e){return e(21)?e=>{let t="";for(let n=0,r=(e=atob(e)).length;n<r;n++)t+=Number(e.charCodeAt(n)).toString(16);return{u:!0,value:y(t.toUpperCase(),22)}}:e(1)||e(19)?e=>({u:!0,value:y(e,22)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.")})}(n);case 20:return function(e){return e(1)||e(19)?e=>({u:!0,value:y(e,20)}):()=>({u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.")})}(n);case 23:throw Error("Casting to xs:QName is not implemented.")}return()=>({u:!1,error:Error(`XPTY0004: Casting not supported from ${e} to ${t}.`)})}const wt=Object.create(null);function vt(e,t){if(19===e&&1===t)return e=>({u:!0,value:y(e,1)});if(44===t)return()=>({u:!1,error:Error("XPST0080: Casting to xs:NOTATION is not permitted.")});if(39===t)return()=>({u:!1,error:Error("FORG0001: Casting to xs:error is not permitted.")});if(45===e||45===t)return()=>({u:!1,error:Error("XPST0080: Casting from or to xs:anySimpleType is not permitted.")});if(46===e||46===t)return()=>({u:!1,error:Error("XPST0080: Casting from or to xs:anyAtomicType is not permitted.")});if(C(e,60)&&1===t)return()=>({u:!1,error:Error("FOTY0014: Casting from function item to xs:string is not permitted.")});if(e===t)return e=>({u:!0,value:{type:t,value:e}});const n=yt.includes(e)?e:it(e),r=yt.includes(t)?t:it(t);if(null===r||null===n)return()=>({u:!1,error:Error(`XPST0081: Can not cast: type ${r?k[e]:k[t]} is unknown.`)});const i=[];return 1!==n&&19!==n||i.push((e=>{const n=at(e,t);return st(n,t)?{u:!0,value:n}:{u:!1,error:We(e,t,"pattern validation failed.")}})),n!==r&&(i.push(bt(n,r)),i.push((e=>({u:!0,value:e.value})))),19!==r&&1!==r||i.push((e=>st(e,t)?{u:!0,value:e}:{u:!1,error:We(e,t,"pattern validation failed.")})),i.push((e=>function(e,t){let n=g[t];for(;n;){if(n.Ka&&!Object.keys(n.Ka).every((t=>{if("whiteSpace"===t)return!0;const r=ot(n,t);return!r||r(e,n.Ka[t])})))return!1;n=n.parent}return!0}(e,t)?{u:!0,value:e}:{u:!1,error:We(e,t,"pattern validation failed.")})),i.push((e=>({u:!0,value:{type:t,value:e}}))),e=>{e={u:!0,value:e};for(let t=0,n=i.length;t<n&&(e=i[t](e.value),!1!==e.u);++t);return e}}function xt(e,t){const n=e.type+1e4*t;let r=wt[n];return r||=wt[n]=vt(e.type,t),r.call(void 0,e.value,t)}function At(e,t){if(!0===(e=xt(e,t)).u)return e.value;throw e.error}function _t(e){let t=!1;return{next:()=>t?A:(t=!0,_(e))}}function Et(e,t){return e===t||!(!e||!t||e.offset!==t.offset||e.parent!==t.parent)&&Et(e.G,t.G)}function Ct(e,t){return!!(e===t||e.node===t.node&&Et(e.G,t.G))}function Nt(e,t){const n=[];for(;t;t=ne(e,t,null))n.unshift(t);return n}function Tt(e,t){const n=[];for(;t;t=e.getParentNode(t,null))n.unshift(t);return n}function kt(e,t,n,r){if(n.G||r.G||Y(n.node)||Y(r.node)){if(Ct(n,r))return 0;n=Nt(t,n),r=Nt(t,r);const a=n[0],s=r[0];if(!Ct(a,s))return t=e.findIndex((e=>Ct(e,a))),n=e.findIndex((e=>Ct(e,s))),-1===t&&(t=e.push(a)),-1===n&&(n=e.push(s)),t-n;e=1;for(var i=Math.min(n.length,r.length);e<i&&Ct(n[e],r[e]);++e);return n[e]?r[e]?function(e,t,n){var r=ne(e,t,null);for(let i=0,a=(e=Q(e,r,null)).length;i<a;++i){if(r=e[i],Ct(r,t))return-1;if(Ct(r,n))return 1}}(t,n[e],r[e]):1:-1}if((n=n.node)===(i=r.node))return 0;if(r=Tt(t,n),n=Tt(t,i),r[0]!==n[0]){const i={node:r[0],G:null},a={node:n[0],G:null};return t=e.findIndex((e=>Ct(e,i))),n=e.findIndex((e=>Ct(e,a))),-1===t&&(t=e.push(i)),-1===n&&(n=e.push(a)),t-n}for(e=1,i=Math.min(r.length,n.length);e<i&&r[e]===n[e];++e);if(r=r[e],i=n[e],!r)return-1;if(!i)return 1;for(let a=0,s=(t=t.getChildNodes(n[e-1],null)).length;a<s;++a){if(e=t[a],e===r)return-1;if(e===i)return 1}}function It(e,t,n,r){const i=C(n.type,47),a=C(r.type,47);if(i&&!a){if(Ct(n=ne(t,n.value),r=r.value))return 1}else if(a&&!i){if(Ct(n=n.value,r=ne(t,r.value)))return-1}else if(i&&a){if(Ct(ne(t,r.value),ne(t,n.value)))return n.value.node.localName>r.value.node.localName?1:-1;n=ne(t,n.value),r=ne(t,r.value)}else n=n.value,r=r.value;return kt(e,t,n,r)}function St(e,t,n){return It(e.o,e,t,n)}function Bt(e,t){return Ft(t,((t,n)=>It(e.o,e,t,n))).filter(((e,t,n)=>0===t||!Ct(e.value,n[t-1].value)))}const Ot=(e,t)=>e<t?-1:0;function Ft(e,t=Ot){if(1>=e.length)return e;var n=Math.floor(e.length/2);const r=Ft(e.slice(0,n),t);for(e=Ft(e.slice(n),t),n=[];r.length&&e.length;)0>t(r[0],e[0])?n.push(r.shift()):n.push(e.shift());return n.concat(r.concat(e))}var Pt=e;function Dt(e,t,n,r,i){if(C(e.type,t.type))return e;if(C(t.type,46)&&C(e.type,53)&&(e=nt(e,n).first()),C(e.type,t.type)||46===t.type)return e;if(C(e.type,19)){if(!(n=At(e,t.type)))throw Error(`XPTY0004 Unable to convert ${i?"return":"argument"} of type ${k[e.type]} to type ${S(t)} while calling ${r}`);return n}if(n=function(e,t){if(C(e.type,2)){if(C(e.type,6))return 3===t?y(e.value,3):null;if(C(e.type,4)){if(6===t)return y(e.value,6);if(3===t)return y(e.value,3)}return null}return C(e.type,20)&&1===t?y(e.value,1):null}(e,t.type),!n)throw Error(`XPTY0004 Unable to cast ${i?"return":"argument"} of type ${k[e.type]} to type ${S(t)} while calling ${r}`);return n}function Rt(e){switch(e){case 2:return"*";case 1:return"+";case 0:return"?";case 3:return""}}var Mt=(e,t,n,r,i)=>0===e.g?t.X({default:()=>t.map((t=>Dt(t,e,n,r,i))),multiple:()=>{throw Error(`XPTY0004: Multiplicity of ${i?"function return value":"function argument"} of type ${k[e.type]}${Rt(e.g)} for ${r} is incorrect. Expected "?", but got "+".`)}}):1===e.g?t.X({empty:()=>{throw Error(`XPTY0004: Multiplicity of ${i?"function return value":"function argument"} of type ${k[e.type]}${Rt(e.g)} for ${r} is incorrect. Expected "+", but got "empty-sequence()"`)},default:()=>t.map((t=>Dt(t,e,n,r,i)))}):2===e.g?t.map((t=>Dt(t,e,n,r,i))):t.X({m:()=>t.map((t=>Dt(t,e,n,r,i))),default:()=>{throw Error(`XPTY0004: Multiplicity of ${i?"function return value":"function argument"} of type ${k[e.type]}${Rt(e.g)} for ${r} is incorrect. Expected exactly one`)}});function Lt(e,t){return C(e,5)?y(t,5):C(e,6)?y(t,6):C(e,3)?y(t,3):y(t,4)}const $t=[{la:"M",ja:1e3},{la:"CM",ja:900},{la:"D",ja:500},{la:"CD",ja:400},{la:"C",ja:100},{la:"XC",ja:90},{la:"L",ja:50},{la:"XL",ja:40},{la:"X",ja:10},{la:"IX",ja:9},{la:"V",ja:5},{la:"IV",ja:4},{la:"I",ja:1}];function Ut(e,t){const n=0>e;if(!(e=Math.abs(e)))return"-";let r=$t.reduce(((t,n)=>{const r=Math.floor(e/n.ja);return e-=r*n.ja,t+n.la.repeat(r)}),"");return t&&(r=r.toLowerCase()),n&&(r=`-${r}`),r}const Ht="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function Gt(e,t){const n=0>e;if(!(e=Math.abs(e)))return"-";let r,i="";for(;0<e;)r=(e-1)%Ht.length,i=Ht[r]+i,e=(e-r)/Ht.length|0;return t&&(i=i.toLowerCase()),n&&(i=`-${i}`),i}function jt(e,t,n=[]){return Array.from({length:t},((t,n)=>n+e)).filter((e=>!n.includes(e)))}const Xt=jt(1488,27,[1498,1501,1503,1507,1509]),qt=jt(1575,36,[1577,1595,1596,1597,1598,1599,1600,1609]),Vt="".split(""),zt=[[1e3,""],[900,""],[800,""],[700,""],[600,""],[500,""],[400,""],[300,""],[200,""],[100,""],[90,""],[80,""],[70,""],[60,""],[50,""],[40,""],[30,""],[20,""],[10,""],[9,""],[8,""],[7,""],[6,""],[5,""],[4,""],[3,""],[2,""],[1,""]],Yt=[[400,""],[300,""],[200,""],[100,""],[90,""],[80,""],[70,""],[60,""],[50,""],[40,""],[30,""],[20,""],[10,""],[9,""],[8,""],[7,""],[6,""],[5,""],[4,""],[3,""],[2,""],[1,""]];function Kt(e,t=[]){var n=25;return t.sort(((e,t)=>e-t)),n-=t.length,function(r){const i=0>r;if(!(r=Math.abs(r)))return"-";const a=[];for(;0<r;){let i=e+(r-1)%n;t.forEach((e=>{i>=e&&i++})),a.unshift(String.fromCodePoint(i)),r=Math.floor((r-1)/n)}return r=a.join(""),i&&(r=`-${r}`),r}}const Jt=Kt(945,[962]),Wt=Kt(913,[930]);function Qt(e){return new Intl.NumberFormat([],{numberingSystem:"arab",useGrouping:!1}).format(e)}function Zt(e){return new Intl.NumberFormat([],{numberingSystem:"arabext",useGrouping:!1}).format(e)}const en=new Map([["A",function(e){return Gt(e,!1)}],["a",function(e){return Gt(e,!0)}],["I",function(e){return Ut(e,!1)}],["i",function(e){return Ut(e,!0)}],["lowerGreek",Jt],["",Jt],["upperGreek",Wt],["",Wt],["arabicAbjadi",function(e){const t=0>e;return(e=Math.abs(e))?(e=Array(Math.floor((e-1)/Vt.length)+1).fill(Vt[(e-1)%Vt.length]).join(String.fromCodePoint(8204)),t&&(e=`-${e}`),e):"-"}],["arabicAbjadNumeral",function(e){const t=0>e;if(!(e=Math.abs(e)))return"-";var n=[],r=Math.floor(e/1e3);if(e-=1e3*r,1===r)n.push(zt[0][1]);else if(1<r){for(const[e,t]of zt){var i=e;const a=t;for(;r>=i;)n.push(a),r-=i}n.push(zt[0][1])}for(const[t,a]of zt)for(r=t,i=a;e>=r;)e-=r,n.push(i);return n=n.join(""),t&&(n=`-${n}`),n}],["arabicAlifBaTa",function(e){const t=0>e;return(e=Math.abs(e))?(e=Array(Math.floor((e-1)/qt.length)+1).fill(String.fromCodePoint(qt[(e-1)%qt.length])).join(String.fromCodePoint(8204)),t&&(e=`-${e}`),e):"-"}],["hebrewAlefBet",function(e){const t=0>e;if(!(e=Math.abs(e)))return"-";var n=Math.floor((e-1)/Xt.length);const r=String.fromCodePoint(1514);return(n=Array(n).fill(r)).push(String.fromCodePoint(Xt[(e-1)%Xt.length])),e=n.join(""),t&&(e=`-${e}`),e}],["hebrewNumeral",function(e){const t=0>e;if(!(e=Math.abs(e)))return"-";var n=[],r=Math.floor(e/400);e-=400*r;for(var i=0;i<r;i++)n.push("");for(const[t,a]of Yt)for(r=t,i=a;e>=r;)e-=r,n.push(i);return""===(e=n.slice(-2).join(""))&&n.splice(-2,2,"",""),""===e&&n.splice(-2,2,"",""),n=n.join(""),t&&(n=`-${n}`),n}],["arabicIndicNumeral",Qt],["",Qt],["",Qt],["",Qt],["",Qt],["",Qt],["",Qt],["",Qt],["",Qt],["",Qt],["persianNumeral",Zt],["",Zt],["",Zt],["",Zt],["",Zt],["",Zt],["",Zt],["",Zt],["",Zt],["",Zt]]);function tn(e,t,n,r,i,a){let s=!1;return L.create({next:()=>{if(s)return A;const t=i.first();if(!t)return s=!0,A;if((C(t.type,6)||C(t.type,3))&&(0===t.value||isNaN(t.value)||1/0===t.value||-1/0===t.value))return s=!0,_(t);var n;if(n=a?a.first().value:0,s=!0,function(e){if(Math.floor(e)===e||isNaN(e))return 0;const t=(e=/\d+(?:\.(\d*))?(?:[Ee](-)?(\d+))*/.exec(`${e}`))[1]?e[1].length:0;return e[3]?e[2]?t+parseInt(e[3],10):0>(e=t-parseInt(e[3],10))?0:e:t}(t.value)<n)return _(t);const r=[5,4,3,6].find((e=>C(t.type,e)));switch(n=function(e,t,n){return t&&0==e*n%1%.5?0==Math.floor(e*n)%2?Math.floor(e*n)/n:Math.ceil(e*n)/n:Math.round(e*n)/n}(At(t,4).value,e,Math.pow(10,n)),r){case 4:return _(y(n,4));case 3:return _(y(n,3));case 6:return _(y(n,6));case 5:return _(y(n,5))}}})}const nn=(e,t,n,r)=>rt(r,t).X({empty:()=>L.m(y(NaN,3)),m:()=>{const e=xt(r.first(),3);return e.u?L.m(e.value):L.m(y(NaN,3))},multiple:()=>{throw Error("fn:number may only be called with zero or one values")}});const rn=(e,t,n,r=L.empty())=>(t=r.F()?Ve(e):Ve(e,function(e){let t=5381;for(let n=0;n<e.length;++n)t=33*t+e.charCodeAt(n),t%=Number.MAX_SAFE_INTEGER;return t}(At(r.first(),1).value)),function t(n){const r=(t,r,i,a)=>{if(a.F()||a.oa())return a;for(t=a.O(),r=n,i=t.length-1;1<i;i--){const n=t[a=(r=Ve(e,r).rb)%i];t[a]=t[i],t[i]=n}return L.create(t)};return L.m(new he([{key:y("number",1),value:()=>L.m(y(Ve(e,n).$b,3))},{key:y("next",1),value:()=>L.m(new H({value:()=>t(Ve(e,n).rb),Ya:!0,localName:"",namespaceURI:"",j:[],arity:0,i:{type:61,g:3}}))},{key:y("permute",1),value:()=>L.m(new H({value:r,Ya:!0,localName:"",namespaceURI:"",j:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}]))}(t.rb));var an=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"abs",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:(e,t,n,r)=>r.map((e=>Lt(e.type,Math.abs(e.value))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"format-integer",j:[{type:5,g:0},{type:1,g:3}],i:{type:1,g:3},callFunction:(e,t,n,r,i)=>(e=r.first(),i=i.first(),r.F()?L.m(y("",1)):(r=en.get(i.value),i=e.value,r?(r=r(i),L.m(y(r,1))):L.m(y(i.toString(),1))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ceiling",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:(e,t,n,r)=>r.map((e=>Lt(e.type,Math.ceil(e.value))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"floor",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:(e,t,n,r)=>r.map((e=>Lt(e.type,Math.floor(e.value))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:tn.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:tn.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:tn.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:tn.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[{type:46,g:0}],i:{type:3,g:3},callFunction:nn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[],i:{type:3,g:3},callFunction:(e,t,n)=>{const r=e.M&&Mt({type:46,g:0},L.m(e.M),t,"fn:number",!1);if(!r)throw Qe("fn:number needs an atomizable context item.");return nn(0,t,0,r)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[],i:{type:61,g:3},callFunction:rn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[{type:46,g:0}],i:{type:61,g:3},callFunction:rn}];function sn(){throw Error("FOCH0002: No collations are supported")}function on(e,t,n,r){if(null===t.M)throw Qe("The function which was called depends on dynamic context, which is absent.");return e(t,n,r,L.m(t.M))}const ln=(e,t,n,r)=>r.X({empty:()=>L.m(y("",1)),default:()=>r.map((e=>{if(C(e.type,53)){const n=nt(e,t).first();return C(e.type,47)?At(n,1):n}return At(e,1)}))}),cn=(e,t,n,r,i)=>ue([i],(([e])=>rt(r,t).N((t=>(t=t.map((e=>At(e,1).value)).join(e.value),L.m(y(t,1))))))),un=(e,t,n,r)=>r.F()?L.m(y(0,5)):(e=r.first().value,L.m(y(Array.from(e).length,5))),pn=(e,t,n,r,i,a)=>{const s=tn(!1,0,0,0,i,null),o=null!==a?tn(!1,0,0,0,a,null):null;let l=!1,c=null,u=null,p=null;return L.create({next:()=>l?A:c||(c=r.first(),null!==c)?(u||=s.first(),!p&&a&&(p=null,p=o.first()),l=!0,_(y(Array.from(c.value).slice(Math.max(u.value-1,0),a?u.value+p.value-1:void 0).join(""),1))):(l=!0,_(y("",1)))})},dn=(e,t,n,r,i)=>{if(r.F()||0===r.first().value.length)return L.empty();for(e=r.first().value,(i=gn(i=i.first().value)).lastIndex=0,t=[],n=i.exec(e),r=0;n;)t.push(e.slice(r,n.index)),r=i.lastIndex,n=i.exec(e);return t.push(e.slice(r)),L.create(t.map((e=>y(e,1))))},hn=(e,t,n,r)=>r.F()?L.m(y("",1)):(e=r.first().value.trim(),L.m(y(e.replace(/\s+/g," "),1))),mn=new Map,fn=new Map;function gn(e){if(fn.has(e))return fn.get(e);let t;try{t=new RegExp(e,"g")}catch(e){throw Error(`FORX0002: ${e}`)}if(t.test(""))throw Error(`FORX0003: the pattern ${e} matches the zero length string`);return fn.set(e,t),t}var yn=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r,i)=>r.F()||i.F()?L.empty():(e=r.first().value)>(i=i.first().value)?L.m(y(1,5)):e<i?L.m(y(-1,5)):L.m(y(0,5))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},callFunction:sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"concat",j:[{type:46,g:0},{type:46,g:0},4],i:{type:1,g:3},callFunction:(e,t,n,...r)=>(r=r.map((e=>rt(e,t).N((e=>L.m(y(e.map((e=>null===e?"":At(e,1).value)).join(""),1)))))),ue(r,(e=>L.m(y(e.map((e=>e.value)).join(""),1)))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:(e,t,n,r,i)=>(e=r.F()?"":r.first().value,0===(i=i.F()?"":i.first().value).length?L.aa():0===e.length?L.T():e.includes(i)?L.aa():L.T())},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:(e,t,n,r,i)=>0===(e=i.F()?"":i.first().value).length?L.aa():0===(r=r.F()?"":r.first().value).length?L.T():r.endsWith(e)?L.aa():L.T()},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:hn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[],i:{type:1,g:3},callFunction:on.bind(null,((e,t,n,r)=>hn(e,0,0,ln(0,t,0,r))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:(e,t,n,r,i)=>0===(e=i.F()?"":i.first().value).length?L.aa():0===(r=r.F()?"":r.first().value).length?L.T():r.startsWith(e)?L.aa():L.T()},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[{type:59,g:0}],i:{type:1,g:3},callFunction:ln},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[],i:{type:1,g:3},callFunction:on.bind(null,ln)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-before",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r,i)=>(e=r.F()?"":r.first().value,""===(i=i.F()?"":i.first().value)||-1===(i=e.indexOf(i))?L.m(y("",1)):L.m(y(e.substring(0,i),1)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-after",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r,i)=>(e=r.F()?"":r.first().value,""===(i=i.F()?"":i.first().value)?L.m(y(e,1)):-1===(t=e.indexOf(i))?L.m(y("",1)):L.m(y(e.substring(t+i.length),1)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},callFunction:pn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},callFunction:pn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"upper-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r)=>r.F()?L.m(y("",1)):r.map((e=>y(e.value.toUpperCase(),1)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"lower-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r)=>r.F()?L.m(y("",1)):r.map((e=>y(e.value.toLowerCase(),1)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},callFunction:cn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2}],i:{type:1,g:3},callFunction:(e,t,n,r)=>cn(0,t,0,r,L.m(y("",1)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[{type:1,g:0}],i:{type:5,g:3},callFunction:un},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[],i:{type:5,g:3},callFunction:on.bind(null,((e,t,n,r)=>un(e,0,0,ln(0,t,0,r))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,g:2},callFunction(){throw Error("Not implemented: Using flags in tokenize is not supported")}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},callFunction:dn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0}],i:{type:1,g:2},callFunction:(e,t,n,r)=>dn(e,t,n,hn(e,0,0,r),L.m(y(" ",1)))},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:(e,t,n,r,i,a)=>ue([r,i,a],(([e,t,n])=>{e=Array.from(e?e.value:"");const r=Array.from(t.value),i=Array.from(n.value);return t=e.map((e=>r.includes(e)?(e=r.indexOf(e))<=i.length?i[e]:void 0:e)),L.m(y(t.join(""),1))})),localName:"translate",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:5,g:2}],callFunction:(e,t,n,r)=>r.N((e=>(e=e.map((e=>{if(9===(e=e.value)||10===e||13===e||32<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e)return String.fromCodePoint(e);throw Error("FOCH0001")})).join(""),L.m(y(e,1))))),localName:"codepoints-to-string",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:(e,t,n,r)=>ue([r],(([e])=>0===(e=e?e.value.split(""):[]).length?L.empty():L.create(e.map((e=>y(e.codePointAt(0),5)))))),localName:"string-to-codepoints",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:1,g:0}],callFunction:(e,t,n,r)=>ue([r],(([e])=>null===e||0===e.value.length?L.create(y("",1)):L.create(y(encodeURIComponent(e.value).replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),1)))),localName:"encode-for-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:(e,t,n,r)=>ue([r],(([e])=>null===e||0===e.value.length?L.create(y("",1)):L.create(y(e.value.replace(/([\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF "<>{}|\\^`/\n\u007f\u0080-\u009f]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,(e=>encodeURI(e))),1)))),localName:"iri-to-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:0}],callFunction:(e,t,n,r,i)=>ue([r,i],(([e,t])=>{if(null===e||null===t)return L.empty();e=e.value;var n=t.value;if(e.length!==n.length)return L.T();for(t=e.split(""),e=n.split(""),n=0;n<t.length;n++)if(t[n].codePointAt(0)!==e[n].codePointAt(0))return L.T();return L.aa()})),localName:"codepoint-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:0}},{j:[{type:1,g:0},{type:1,g:3}],callFunction:(e,t,n,r,i)=>ue([r,i],(([e,t])=>{e=e?e.value:"",t=t.value;let n=mn.get(t);if(!n){try{n=(0,Pt.compile)(t,{language:"xpath"})}catch(e){throw Error(`FORX0002: ${e}`)}mn.set(t,n)}return n(e)?L.aa():L.T()})),localName:"matches",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:(e,t,n,r,i,a)=>ue([r,i,a],(([e,t,n])=>{if(e=e?e.value:"",t=t.value,(n=n.value).includes("$0"))throw Error("Using $0 in fn:replace to replace substrings with full matches is not supported.");return n=n.split(/((?:\$\$)|(?:\\\$)|(?:\\\\))/).map((e=>{switch(e){case"\\$":return"$$";case"\\\\":return"\\";case"$$":throw Error('FORX0004: invalid replacement: "$$"');default:return e}})).join(""),t=gn(t),e=e.replace(t,n),L.m(y(e,1))})),localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3},callFunction(){throw Error("Not implemented: Using flags in replace is not supported")}}];const bn=new WeakMap;let wn=0;function vn(e,t,n,r,i){if(null===n.M)throw Qe(`The function ${e} depends on dynamic context, which is absent.`);return t(n,r,i,L.m(n.M))}const xn=(e,t,n,r)=>ue([r],(([e])=>{if(null===e)return L.empty();switch((e=e.value).node.nodeType){case 1:case 2:return L.m(y(new U(e.node.prefix,e.node.namespaceURI,e.node.localName),23));case 7:return L.m(y(new U("","",e.node.target),23));default:return L.empty()}})),An=(e,t,n,r)=>r.X({default:()=>ln(0,t,0,xn(0,0,0,r)),empty:()=>L.m(y("",1))}),_n=(e,t,n,r)=>rt(r,t),En=(e,t,n,r)=>{if(r.F())return L.m(y("",1));if(!C(r.first().type,53))throw Error("XPTY0004: The context item must be a node.");return n=r.first().value,t=(e=L).m,n=n.node,bn.has(n)||bn.set(n,"id"+ ++wn),n=bn.get(n),t.call(e,y(n,1))},Cn=(e,t,n,r)=>ue([r],(([e])=>null!==(e=e?e.value:null)&&ee(t.h,e,null)?L.aa():L.T()));function Nn(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())||!(5>e.length||!e.startsWith(t))&&Nn(e.replace(/-[a-z0-9]+$/,""),t)}const Tn=(e,t,n,r,i)=>{if(t=t.h,r.F())r="";else{if(!C(r.first().type,1))throw Error("XPTY0004: The first argument of lang must be a string.");r=r.first().value}if(i)i=i.first().value;else{if(!e||!e.M)throw Qe("The function lang depends on dynamic context if a node is not passed as the second argument.");if(!C(e.M.type,53))throw Error("XPTY0004: The context item must be a node.");i=e.M.value}e:{for(e=r;i;)if(1!==i.node.nodeType)i=ne(t,i);else if(1===i.node.nodeType){if(r=W(t,i,"xml:lang")){t=Nn(r,e)?L.aa():L.T();break e}i=ne(t,i)}t=L.T()}return t},kn=(e,t,n,r)=>ue([r],(([e])=>{function n(e){let t=0,n=e;for(;null!==n;)(e.node.nodeType!==n.node.nodeType?0:1===n.node.nodeType?n.node.localName===e.node.localName&&n.node.namespaceURI===e.node.namespaceURI:7===n.node.nodeType?n.node.target===e.node.target:1)&&t++,n=ie(r,n,null);return t}if(null===e)return L.empty();const r=t.h;let i="";for(e=e.value;null!==ne(t.h,e,null);e=ne(t.h,e,null))switch(e.node.nodeType){case 1:var a=e;i=`/Q{${a.node.namespaceURI||""}}${a.node.localName}[${n(a)}]${i}`;break;case 2:i=`/@${(a=e).node.namespaceURI?`Q{${a.node.namespaceURI}}`:""}${a.node.localName}${i}`;break;case 3:i=`/text()[${n(e)}]${i}`;break;case 7:i=`/processing-instruction(${(a=e).node.target})[${n(a)}]${i}`;break;case 8:i=`/comment()[${n(e)}]${i}`}return 9===e.node.nodeType?L.create(y(i||"/",1)):L.create(y("Q{http://www.w3.org/2005/xpath-functions}root()"+i,1))})),In=(e,t,n,r)=>r.map((e=>y(e.value.node.namespaceURI||"",20))),Sn=(e,t,n,r)=>r.X({default:()=>r.map((e=>7===e.value.node.nodeType?y(e.value.node.target,1):y(e.value.node.localName||"",1))),empty:()=>L.m(y("",1))});function Bn(e,t,n){if(2===t.node.nodeType)return Ct(t,n);for(;n;){if(Ct(t,n))return!0;if(9===n.node.nodeType)break;n=ne(e,n,null)}return!1}const On=(e,t,n,r)=>r.map((e=>{if(!C(e.type,53))throw Error("XPTY0004 Argument passed to fn:root() should be of the type node()");let n;for(e=e.value;e;)n=e,e=ne(t.h,n,null);return ce(n)}));var Fn=[{j:[{type:53,g:0}],callFunction:An,localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:vn.bind(null,"name",An),localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:3}],callFunction:In,localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[],callFunction:vn.bind(null,"namespace-uri",In),localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[{type:53,g:2}],callFunction:(e,t,n,r)=>r.N((e=>e.length?(e=Bt(t.h,e).reduceRight(((e,n,r,i)=>r===i.length-1?(e.push(n),e):(Bn(t.h,n.value,e[0].value)||e.unshift(n),e)),[]),L.create(e)):L.empty())),localName:"innermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:2}],callFunction:(e,t,n,r)=>r.N((e=>e.length?(e=Bt(t.h,e).reduce(((e,n,r)=>0===r?(e.push(n),e):(Bn(t.h,e[e.length-1].value,n.value)||e.push(n),e)),[]),L.create(e)):L.empty()),1),localName:"outermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:0}],callFunction:Cn,localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[],callFunction:vn.bind(null,"has-children",Cn),localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:53,g:0}],callFunction:kn,localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[],callFunction:vn.bind(null,"path",kn),localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[{type:53,g:0}],callFunction:xn,localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[],callFunction:vn.bind(null,"node-name",xn),localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:53,g:0}],callFunction:Sn,localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:vn.bind(null,"local-name",Sn),localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:On,localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:vn.bind(null,"root",On),localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:vn.bind(null,"data",_n),localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:59,g:2}],callFunction:_n,localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:1,g:0}],callFunction:Tn,localName:"lang",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:1,g:0},{type:53,g:3}],callFunction:Tn,localName:"lang",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[],callFunction:vn.bind(null,"generate-id",En),localName:"generate-id",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:En,localName:"generate-id",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}];function Pn(e,t){let n=0;const r=e.length;let i=!1,a=null;return{next:()=>{if(!i){for(;n<r;){a||=t(e[n],n,e);const r=a.next(0);if(a=null,!r.value)return _(!1);n++}return i=!0,_(!0)}return A}}}function Dn(e){return 1===(e=e.node.nodeType)||3===e}function Rn(e,t){if((C(e.type,4)||C(e.type,6))&&(C(t.type,4)||C(t.type,6))){var n=At(e,6),r=At(t,6);return n.value===r.value||isNaN(e.value)&&isNaN(t.value)}return(C(e.type,4)||C(e.type,6)||C(e.type,3))&&(C(t.type,4)||C(t.type,6)||C(t.type,3))?(n=At(e,3),r=At(t,3),n.value===r.value||isNaN(e.value)&&isNaN(t.value)):C(e.type,23)&&C(t.type,23)?e.value.namespaceURI===t.value.namespaceURI&&e.value.localName===t.value.localName:(C(e.type,9)||C(e.type,7)||C(e.type,8)||C(e.type,11)||C(e.type,12)||C(e.type,13)||C(e.type,14)||C(e.type,15))&&(C(t.type,9)||C(t.type,7)||C(t.type,8)||C(t.type,11)||C(t.type,12)||C(t.type,13)||C(t.type,14)||C(t.type,15))?Oe(e.value,t.value):(C(e.type,16)||C(e.type,17)||C(e.type,18))&&(C(t.type,16)||C(t.type,17)||C(t.type,17))?me(e.value,t.value):e.value===t.value}function Mn(e,t,n){const[r,i]=[t,n].map((t=>({type:1,value:t.reduce(((t,n)=>t+nt(n,e).first().value),"")})));return _(Rn(r,i))}function Ln(e,t,n,r){for(;e.value&&C(e.value.type,56);){t.push(e.value);const i=re(r,e.value.value);if(e=n.next(0),i&&3!==i.node.nodeType)break}return e}function $n(e,t,n,r,i){const a=t.h,s=r.value,o=i.value;let l,c=null,u=null,p=null;const d=[],h=[];return{next:()=>{for(;!l;)if(c||=s.next(0),c=Ln(c,d,s,a),u||=o.next(0),u=Ln(u,h,o,a),d.length||h.length){var r=Mn(t,d,h);if(d.length=0,h.length=0,!1===r.value)return l=!0,r}else{if(c.done||u.done)return l=!0,_(c.done===u.done);if(p||=Hn(e,t,n,c.value,u.value),r=p.next(0),p=null,!1===r.value)return l=!0,r;u=c=null}return A}}}function Un(e,t,n,r,i){return r=Q(t.h,r.value),i=Q(t.h,i.value),r=r.filter((e=>Dn(e))),i=i.filter((e=>Dn(e))),r=L.create(r.map((e=>ce(e)))),i=L.create(i.map((e=>ce(e)))),$n(e,t,n,r,i)}function Hn(e,t,n,r,i){if(C(r.type,46)&&C(i.type,46))return _t(Rn(r,i));if(C(r.type,61)&&C(i.type,61))return function(e,t,n,r,i){return r.h.length!==i.h.length?_t(!1):Pn(r.h,(r=>{const a=i.h.find((e=>Rn(e.key,r.key)));return a?$n(e,t,n,r.value(),a.value()):_t(!1)}))}(e,t,n,r,i);if(C(r.type,62)&&C(i.type,62))return function(e,t,n,r,i){return r.h.length!==i.h.length?_t(!1):Pn(r.h,((r,a)=>(a=i.h[a],$n(e,t,n,r(),a()))))}(e,t,n,r,i);if(C(r.type,53)&&C(i.type,53)){if(C(r.type,55)&&C(i.type,55))return Un(e,t,n,r,i);if(C(r.type,54)&&C(i.type,54))return function(e,t,n,r,i){const a=$n(e,t,n,xn(0,0,0,L.m(r)),xn(0,0,0,L.m(i))),s=Un(e,t,n,r,i);r=J(t.h,r.value).filter((e=>"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI)).sort(((e,t)=>e.node.nodeName>t.node.nodeName?1:-1)).map((e=>ce(e))),i=J(t.h,i.value).filter((e=>"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI)).sort(((e,t)=>e.node.nodeName>t.node.nodeName?1:-1)).map((e=>ce(e)));const o=$n(e,t,n,L.create(r),L.create(i));let l=!1;return{next:()=>{if(l)return A;var e=a.next(0);return!e.done&&!1===e.value||!(e=o.next(0)).done&&!1===e.value?(l=!0,e):(e=s.next(0),l=!0,e)}}}(e,t,n,r,i);if(C(r.type,47)&&C(i.type,47)||C(r.type,57)&&C(i.type,57)||C(r.type,58)&&C(i.type,58))return function(e,t,n,r,i){const a=$n(e,t,n,xn(0,0,0,L.m(r)),xn(0,0,0,L.m(i)));let s=!1;return{next:()=>{if(s)return A;const e=a.next(0);return e.done||!1!==e.value?_(Rn(nt(r,t).first(),nt(i,t).first())):(s=!0,e)}}}(e,t,n,r,i)}return _t(!1)}var Gn=class extends Ye{constructor(){super({M:null,Aa:-1,ta:L.empty(),ra:{}})}},jn=(e="Can not execute an updating expression in a non-updating context.")=>Error(`XUST0001: ${e}`),Xn=e=>Error(`XUTY0004: The attribute ${e.name}="${e.value}" follows a node that is not an attribute node.`),qn=()=>Error("XUTY0005: The target of a insert expression with into must be a single element or document node."),Vn=()=>Error("XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node."),zn=()=>Error("XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node."),Yn=()=>Error("XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node."),Kn=e=>Error(`XUDY0017: The target ${e.outerHTML} is used in more than one replace value of expression.`),Jn=e=>Error(`XUDY0021: Applying the updates will result in the XDM instance violating constraint: '${e}'`),Wn=e=>Error(`XUDY0023: The namespace binding ${e} is conflicting.`),Qn=e=>Error(`XUDY0024: The namespace binding ${e} is conflicting.`),Zn=()=>Error("XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.");function er(e,t,n){return t&&null!==t.M&&e.B?(null===e.ob&&(e.ob=$(e.h(new Gn,n).hb())),e=e.ob()):e=e.h(t,n),e}var tr=class{constructor(e,t,n={B:!1,W:!1,R:"unsorted",subtree:!1},r=!1,i){this.o=e,this.ia=n.R||"unsorted",this.subtree=!!n.subtree,this.W=!!n.W,this.B=!!n.B,this.Fa=t,this.I=!1,this.ob=null,this.Qb=r,this.type=i}D(){return null}v(e){if(this.Fa.forEach((t=>t.v(e))),!this.Qb&&this.Fa.some((e=>e.I)))throw jn()}},nr=class{constructor(e,t){this.J=e,this.da=t}},rr=class{constructor(e){e&&"object"==typeof e&&"nodeType"in e&&("function"==typeof(e=e.ownerDocument||e).createElementNS&&"function"==typeof e.createProcessingInstruction&&"function"==typeof e.createTextNode&&"function"==typeof e.createComment&&(this.h=e)),this.h||(this.h=null)}createAttributeNS(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createAttributeNS(e,t)}createCDATASection(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createCDATASection(e)}createComment(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createComment(e)}createDocument(){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.implementation.createDocument(null,null,null)}createElementNS(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createElementNS(e,t)}createProcessingInstruction(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createProcessingInstruction(e,t)}createTextNode(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createTextNode(e)}};function ir(e,t,n,r){return J(r,e,`name-${t}`).some((e=>e.node.localName===t&&e.node.namespaceURI===n))}var ar=(e,t,n)=>{t.forEach((t=>{n.insertBefore(e.node,t.node,null)}))},sr=(e,t,n,r)=>{const i=ne(n,e);var a=e.node.nodeType;if(2===a){if(t.some((e=>2!==e.node.nodeType)))throw Error('Constraint "If $target is an attribute node, $replacement must consist of zero or more attribute nodes." failed.');const a=i?i.node:null;r.removeAttributeNS(a,e.node.namespaceURI,e.node.localName),t.forEach((e=>{const t=e.node.localName,s=e.node.namespaceURI;if(ir(i,t,s,n))throw Jn(`An attribute ${s?`Q{${s}}${t}`:t} already exists.`);r.setAttributeNS(a,s,t,Z(n,e))}))}if(1===a||3===a||8===a||7===a){const s=(a=re(n,e))?a.node:null;r.removeChild(i.node,e.node),t.forEach((e=>{r.insertBefore(i.node,e.node,s)}))}},or=(e,t,n,r)=>{if(lr(e,t),e.filter((e=>-1!==["insertInto","insertAttributes","replaceValue","rename"].indexOf(e.type))).forEach((e=>{switch(e.type){case"insertInto":ar(e.target,e.content,r);break;case"insertAttributes":((e,t,n,r)=>{t.forEach((t=>{const i=t.node.localName,a=t.node.namespaceURI;if(ir(e,i,a,n))throw Jn(`An attribute ${a?`Q{${a}}${i}`:i} already exists.`);r.setAttributeNS(e.node,a,i,Z(n,t))}))})(e.target,e.content,t,r);break;case"rename":((e,t,n,r,i)=>{let a;switch(r||=new rr(e?e.node:null),e.node.nodeType){case 1:const s=n.getAllAttributes(e.node),o=n.getChildNodes(e.node),l=r.createElementNS(t.namespaceURI,t.za());a={node:l,G:null},s.forEach((e=>{i.setAttributeNS(l,e.namespaceURI,e.nodeName,e.value)})),o.forEach((e=>{i.insertBefore(l,e,null)}));break;case 2:(t=r.createAttributeNS(t.namespaceURI,t.za())).value=Z(n,e),a={node:t,G:null};break;case 7:a={node:r.createProcessingInstruction(t.za(),Z(n,e)),G:null}}if(!ne(n,e))throw Error("Not supported: renaming detached nodes.");sr(e,[a],n,i)})(e.target,e.o,t,n,r);break;case"replaceValue":var i=e.target;if(e=e.o,2===i.node.nodeType){const n=ne(t,i);n?r.setAttributeNS(n.node,i.node.namespaceURI,i.node.localName,e):i.node.value=e}else r.setData(i.node,e)}})),e.filter((e=>-1!==["insertBefore","insertAfter","insertIntoAsFirst","insertIntoAsLast"].indexOf(e.type))).forEach((e=>{switch(e.type){case"insertAfter":((e,t,n,r)=>{const i=ne(n,e).node,a=(e=re(n,e))?e.node:null;t.forEach((e=>{r.insertBefore(i,e.node,a)}))})(e.target,e.content,t,r);break;case"insertBefore":((e,t,n,r)=>{const i=ne(n,e).node;t.forEach((t=>{r.insertBefore(i,t.node,e.node)}))})(e.target,e.content,t,r);break;case"insertIntoAsFirst":((e,t,n,r)=>{const i=(n=ee(n,e))?n.node:null;t.forEach((t=>{r.insertBefore(e.node,t.node,i)}))})(e.target,e.content,t,r);break;case"insertIntoAsLast":ar(e.target,e.content,r)}})),e.filter((e=>"replaceNode"===e.type)).forEach((e=>{sr(e.target,e.o,t,r)})),e.filter((e=>"replaceElementContent"===e.type)).forEach((e=>{((e,t,n,r)=>{n.getChildNodes(e.node).forEach((t=>r.removeChild(e.node,t))),t&&r.insertBefore(e.node,t.node,null)})(e.target,e.text,t,r)})),e.filter((e=>"delete"===e.type)).forEach((e=>{e=e.target;var n=ne(t,e);(n=n?n.node:null)&&(2===e.node.nodeType?r.removeAttributeNS(n,e.node.namespaceURI,e.node.localName):r.removeChild(n,e.node))})),e.some((e=>"put"===e.type)))throw Error('Not implemented: the execution for pendingUpdate "put" is not yet implemented.')};const lr=(e,t)=>{function n(t,n){const r=new Set;e.filter((e=>e.type===t)).map((e=>e.target)).forEach((e=>{e=e?e.node:null,r.has(e)&&n(e),r.add(e)}))}n("rename",(e=>{throw Error(`XUDY0015: The target ${e.outerHTML} is used in more than one rename expression.`)})),n("replaceNode",(e=>{throw Error(`XUDY0016: The target ${e.outerHTML} is used in more than one replace expression.`)})),n("replaceValue",(e=>{throw Kn(e)})),n("replaceElementContent",(e=>{throw Kn(e)}));const r=new Map,i=e=>new U(e.node.prefix,e.node.namespaceURI,e.node.localName);e.filter((e=>"replaceNode"===e.type&&2===e.target.node.nodeType)).forEach((e=>{var n=ne(t,e.target);n=n?n.node:null;const a=r.get(n);a?a.push(...e.o.map(i)):r.set(n,e.o.map(i))})),e.filter((e=>"rename"===e.type&&2===e.target.node.nodeType)).forEach((e=>{var n=ne(t,e.target);if(n){n=n.node;var i=r.get(n);i?i.push(e.o):r.set(n,[e.o])}})),r.forEach((e=>{const t={};e.forEach((e=>{if(t[e.prefix]||(t[e.prefix]=e.namespaceURI),t[e.prefix]!==e.namespaceURI)throw Qn(e.namespaceURI)}))}))};var cr=(e,...t)=>e.concat(...t.filter(Boolean));function ur(e){return e.I?(t,n)=>e.s(t,n):(t,n)=>{const r=e.h(t,n);return{next:()=>_({da:[],J:r.O()})}}}var pr=class extends tr{constructor(e,t,n,r){super(e,t,n,!0,r),this.I=!0}h(){throw jn()}};function dr(e,t){return t((e=e.next(0)).value.da),L.create(e.value.J)}var hr=class extends pr{constructor(e,t,n,r){super(e,t,n,r),this.I=this.Fa.some((e=>e.I))}h(e,t){return this.A(e,t,this.Fa.map((e=>n=>e.h(n,t))))}s(e,t){let n=[];const r=this.A(e,t,this.Fa.map((e=>e.I?r=>dr(r=e.s(r,t),(e=>n=cr(n,e))):n=>e.h(n,t))));let i=!1;return{next:()=>{if(i)return A;const e=r.O();return i=!0,_(new nr(e,n))}}}v(e){super.v(e),function(e){e.Fa.some((e=>e.I))&&(e.I=!0)}(this)}};const mr=["external","attribute","nodeName","nodeType","universal"],fr=mr.length;function gr(e,t){for(let n=0;n<fr;++n){if(t.h[n]<e.h[n])return 1;if(t.h[n]>e.h[n])return-1}return 0}var yr=class{constructor(e){if(this.h=mr.map((t=>e[t]||0)),Object.keys(e).some((e=>!mr.includes(e))))throw Error("Invalid specificity kind passed")}add(e){const t=mr.reduce(((t,n,r)=>(t[n]=this.h[r]+e.h[r],t)),Object.create(null));return new yr(t)}};const br=()=>Ze("Expected base expression of a function call to evaluate to a sequence of single function item");function wr(e,t,n,r){const i=[];for(let a=0;a<t.length;++a){if(null===t[a]){i.push(null);continue}const s=Mt(e[a],t[a],n,r,!1);i.push(s)}return i}function vr(e,t){if(!C(e.type,60))throw Ze("Expected base expression to evaluate to a function item");if(e.v!==t)throw br();return e}function xr(e,t,n,r,i,a,s){let o=0;return i=i.map((e=>e?null:a[o++](n))),0<=(i=wr(e.o,i,r,e.D)).indexOf(null)?function(e,t){const n=e.value,r=t.map((e=>null===e?null:$(e)));return t=t.reduce(((t,n,r)=>(null===n&&t.push(e.o[r]),t)),[]),t=new H({j:t,arity:t.length,Ya:!0,I:e.I,localName:"boundFunction",namespaceURI:e.l,i:e.s,value:function(e,t,i){const a=Array.from(arguments).slice(3),s=r.map((e=>null===e?a.shift():e()));return n.apply(void 0,[e,t,i].concat(s))}}),L.m(t)}(e,i):(t=t.apply(void 0,[n,r,s,...i]),Mt(e.s,t,r,e.D,!0))}var Ar=class extends hr{constructor(e,t,n){super(new yr({external:1}),[e].concat(t.filter((e=>!!e))),{R:"unsorted",W:!1,subtree:!1,B:!1},n),this.ma=t.length,this.P=t.map((e=>null===e)),this.L=null,this.ya=e,this.La=t}s(e,t){if(!this.l||!this.l.I)return super.s(e,t);let n=[];const r=xr(this.l,((e,t,r,...i)=>dr(this.l.value(e,t,r,...i),(e=>{n=cr(n,e)}))),e,t,this.P,this.La.map((r=>()=>r.I?dr(r.s(e,t),(e=>{n=cr(n,e)})):er(r,e,t))),this.L);let i=!1;return{next:()=>{if(i)return A;const e=r.O();return i=!0,_({da:n,J:e})}}}A(e,t,[n,...r]){if(this.l)return xr(this.l,((e,t,n,...r)=>this.l.value(e,t,n,...r)),e,t,this.P,r,this.L);const i=n(e);return i.X({default:()=>{throw br()},m:()=>i.N((([n])=>{if((n=vr(n,this.ma)).I)throw Error("XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function");return xr(n,n.value,e,t,this.P,r,this.L)}))})}v(e){if(this.L=hi(e),super.v(e),this.ya.B){if(!(e=er(this.ya,null,null)).oa())throw br();this.l=vr(e.first(),this.ma),this.l.I&&(this.I=!0)}}};const _r=(e,t,n,r,i,a)=>ue([r,i,a],(([e,t,n])=>{if(t=t.value,n=n.value,t>e.h.length||0>=t)throw Error("FOAY0001: subarray start out of bounds.");if(0>n)throw Error("FOAY0002: subarray length out of bounds.");if(t+n>e.h.length+1)throw Error("FOAY0001: subarray start + length out of bounds.");return L.m(new oe(e.h.slice(t-1,n+t-1)))})),Er=(e,t,n,r,i)=>ue([r],(([e])=>i.N((t=>{t=t.map((e=>e.value)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n[t-1]!==e));const n=e.h.concat();for(let r=0,i=t.length;r<i;++r){const i=t[r];if(i>e.h.length||0>=i)throw Error("FOAY0001: subarray position out of bounds.");n.splice(i-1,1)}return L.m(new oe(n))})))),Cr=e=>C(e,1)||C(e,20)||C(e,19),Nr=(e,t,n,r,i)=>0===r.length?0!==i.length:0!==i.length&&Hn(e,t,n,r[0],i[0]).next(0).value?Nr(e,t,n,r.slice(1),i.slice(1)):r[0].value!=r[0].value||(Cr(r[0].type)&&0!==i.length&&Cr(i[0].type)||0!==i.length)&&r[0].value<i[0].value;function Tr(e){return C(e.type,62)?Je(e.h.map((e=>e().N((e=>Je(e.map(Tr))))))):L.m(e)}var kr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"size",j:[{type:62,g:3}],i:{type:5,g:3},callFunction:(e,t,n,r)=>ue([r],(([e])=>L.m(y(e.h.length,5))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"get",j:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},callFunction:se},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"put",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r,i,a)=>ue([i,r],(([e,t])=>{if(0>=(e=e.value)||e>t.h.length)throw Error("FOAY0001: array position out of bounds.");return(t=t.h.concat()).splice(e-1,1,$(a)),L.m(new oe(t))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"append",j:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r,i)=>ue([r],(([e])=>L.m(new oe(e.h.concat([$(i)])))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:_r},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction(e,t,n,r,i){const a=L.m(y(r.first().value.length-i.first().value+1,5));return _r(0,0,0,r,i,a)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"remove",j:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},callFunction:Er},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"insert-before",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r,i,a)=>ue([r,i],(([e,t])=>{if((t=t.value)>e.h.length+1||0>=t)throw Error("FOAY0001: subarray position out of bounds.");return(e=e.h.concat()).splice(t-1,0,$(a)),L.m(new oe(e))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"head",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:(e,t,n,r)=>se(0,0,0,r,L.m(y(1,5)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"tail",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:(e,t,n,r)=>Er(0,0,0,r,L.m(y(1,5)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"reverse",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r)=>ue([r],(([e])=>L.m(new oe(e.h.concat().reverse()))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"join",j:[{type:62,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r)=>r.N((e=>(e=e.reduce(((e,t)=>e.concat(t.h)),[]),L.m(new oe(e)))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r,i)=>ue([r,i],(([r,i])=>{if(1!==i.v)throw Ze("The callback passed into array:for-each has a wrong arity.");return r=r.h.map((r=>$(i.value.call(void 0,e,t,n,wr(i.o,[r()],t,"array:for-each")[0])))),L.m(new oe(r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"filter",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r,i)=>ue([r,i],(([r,i])=>{if(1!==i.v)throw Ze("The callback passed into array:filter has a wrong arity.");const a=r.h.map((r=>{r=wr(i.o,[r()],t,"array:filter")[0];return(0,i.value)(e,t,n,r)})),s=[];let o=!1;return L.create({next:()=>{if(o)return A;for(let t=0,n=r.h.length;t<n;++t){var e=a[t].fa();s[t]=e}return e=r.h.filter(((e,t)=>s[t])),o=!0,_(new oe(e))}})}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-left",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:(e,t,n,r,i,a)=>ue([r,a],(([r,a])=>{if(2!==a.v)throw Ze("The callback passed into array:fold-left has a wrong arity.");return r.h.reduce(((r,i)=>(i=wr(a.o,[i()],t,"array:fold-left")[0],a.value.call(void 0,e,t,n,r,i))),i)}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-right",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:(e,t,n,r,i,a)=>ue([r,a],(([r,a])=>{if(2!==a.v)throw Ze("The callback passed into array:fold-right has a wrong arity.");return r.h.reduceRight(((r,i)=>(i=wr(a.o,[i()],t,"array:fold-right")[0],a.value.call(void 0,e,t,n,r,i))),i)}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each-pair",j:[{type:62,g:3},{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r,i,a)=>ue([r,i,a],(([r,i,a])=>{if(2!==a.v)throw Ze("The callback passed into array:for-each-pair has a wrong arity.");const s=[];for(let o=0,l=Math.min(r.h.length,i.h.length);o<l;++o){const[l,c]=wr(a.o,[r.h[o](),i.h[o]()],t,"array:for-each-pair");s[o]=$(a.value.call(void 0,e,t,n,l,c))}return L.m(new oe(s))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"sort",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r)=>ue([r],(([r])=>(r=r.h.map((e=>e().O())),((e,t,n,r)=>(r.sort(((r,i)=>$n(e,t,n,L.create(r),L.create(i)).next(0).value?0:Nr(e,t,n,r,i)?-1:1)),L.m(new oe(r.map((e=>()=>L.create(e)))))))(e,t,n,r))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"flatten",j:[{type:59,g:2}],i:{type:59,g:2},callFunction:(e,t,n,r)=>r.N((e=>Je(e.map(Tr))))}];function Ir(e,t,n,r,i){return i.F()?i:L.m(At(i.first(),e))}var Sr=[{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"untypedAtomic",j:[{type:46,g:0}],i:{type:19,g:0},callFunction:Ir.bind(null,19)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"error",j:[{type:46,g:0}],i:{type:39,g:0},callFunction:Ir.bind(null,39)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"string",j:[{type:46,g:0}],i:{type:1,g:0},callFunction:Ir.bind(null,1)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"boolean",j:[{type:46,g:0}],i:{type:0,g:0},callFunction:Ir.bind(null,0)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"decimal",j:[{type:46,g:0}],i:{type:4,g:0},callFunction:Ir.bind(null,4)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"float",j:[{type:46,g:0}],i:{type:6,g:0},callFunction:Ir.bind(null,6)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"double",j:[{type:46,g:0}],i:{type:3,g:0},callFunction:Ir.bind(null,3)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"duration",j:[{type:46,g:0}],i:{type:18,g:0},callFunction:Ir.bind(null,18)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTime",j:[{type:46,g:0}],i:{type:9,g:0},callFunction:Ir.bind(null,9)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:Ir.bind(null,10)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"time",j:[{type:46,g:0}],i:{type:8,g:0},callFunction:Ir.bind(null,8)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"date",j:[{type:46,g:0}],i:{type:7,g:0},callFunction:Ir.bind(null,7)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYearMonth",j:[{type:46,g:0}],i:{type:11,g:0},callFunction:Ir.bind(null,11)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYear",j:[{type:46,g:0}],i:{type:12,g:0},callFunction:Ir.bind(null,12)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonthDay",j:[{type:46,g:0}],i:{type:13,g:0},callFunction:Ir.bind(null,13)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gDay",j:[{type:46,g:0}],i:{type:15,g:0},callFunction:Ir.bind(null,15)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonth",j:[{type:46,g:0}],i:{type:14,g:0},callFunction:Ir.bind(null,14)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"hexBinary",j:[{type:46,g:0}],i:{type:22,g:0},callFunction:Ir.bind(null,22)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"base64Binary",j:[{type:46,g:0}],i:{type:21,g:0},callFunction:Ir.bind(null,21)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"QName",j:[{type:46,g:0}],i:{type:23,g:0},callFunction:(e,t,n,r)=>{if(r.F())return r;if(C((e=r.first()).type,2))throw Error("XPTY0004: The provided QName is not a string-like value.");if(!st(e=at(e=At(e,1).value,23),23))throw Error("FORG0001: The provided QName is invalid.");if(!e.includes(":"))return n=n.$(""),L.m(y(new U("",n,e),23));const[i,a]=e.split(":");if(!(n=n.$(i)))throw Error(`FONS0004: The value ${e} can not be cast to a QName. Did you mean to use fn:QName?`);return L.m(y(new U(i,n,a),23))}},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"anyURI",j:[{type:46,g:0}],i:{type:20,g:0},callFunction:Ir.bind(null,20)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"normalizedString",j:[{type:46,g:0}],i:{type:48,g:0},callFunction:Ir.bind(null,48)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"token",j:[{type:46,g:0}],i:{type:52,g:0},callFunction:Ir.bind(null,52)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"language",j:[{type:46,g:0}],i:{type:51,g:0},callFunction:Ir.bind(null,51)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKEN",j:[{type:46,g:0}],i:{type:50,g:0},callFunction:Ir.bind(null,50)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKENS",j:[{type:46,g:0}],i:{type:49,g:2},callFunction:Ir.bind(null,49)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"Name",j:[{type:46,g:0}],i:{type:25,g:0},callFunction:Ir.bind(null,25)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NCName",j:[{type:46,g:0}],i:{type:24,g:0},callFunction:Ir.bind(null,24)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ID",j:[{type:46,g:0}],i:{type:42,g:0},callFunction:Ir.bind(null,42)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREF",j:[{type:46,g:0}],i:{type:41,g:0},callFunction:Ir.bind(null,41)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREFS",j:[{type:46,g:0}],i:{type:43,g:2},callFunction:Ir.bind(null,43)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITY",j:[{type:46,g:0}],i:{type:26,g:0},callFunction:Ir.bind(null,26)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITIES",j:[{type:46,g:0}],i:{type:40,g:2},callFunction:Ir.bind(null,40)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"integer",j:[{type:46,g:0}],i:{type:5,g:0},callFunction:Ir.bind(null,5)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonPositiveInteger",j:[{type:46,g:0}],i:{type:27,g:0},callFunction:Ir.bind(null,27)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"negativeInteger",j:[{type:46,g:0}],i:{type:28,g:0},callFunction:Ir.bind(null,28)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"long",j:[{type:46,g:0}],i:{type:31,g:0},callFunction:Ir.bind(null,31)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"int",j:[{type:46,g:0}],i:{type:32,g:0},callFunction:Ir.bind(null,32)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"short",j:[{type:46,g:0}],i:{type:33,g:0},callFunction:Ir.bind(null,33)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"byte",j:[{type:46,g:0}],i:{type:34,g:0},callFunction:Ir.bind(null,34)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonNegativeInteger",j:[{type:46,g:0}],i:{type:30,g:0},callFunction:Ir.bind(null,30)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedLong",j:[{type:46,g:0}],i:{type:36,g:0},callFunction:Ir.bind(null,36)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedInt",j:[{type:46,g:0}],i:{type:35,g:0},callFunction:Ir.bind(null,35)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedShort",j:[{type:46,g:0}],i:{type:38,g:0},callFunction:Ir.bind(null,38)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedByte",j:[{type:46,g:0}],i:{type:37,g:0},callFunction:Ir.bind(null,37)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"positiveInteger",j:[{type:46,g:0}],i:{type:29,g:0},callFunction:Ir.bind(null,29)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"yearMonthDuration",j:[{type:46,g:0}],i:{type:16,g:0},callFunction:Ir.bind(null,16)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dayTimeDuration",j:[{type:46,g:0}],i:{type:17,g:0},callFunction:Ir.bind(null,17)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:Ir.bind(null,10)}];const Br=(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getYear(),5)),Or=(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getMonth(),5)),Fr=(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getDay(),5)),Pr=(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getHours(),5)),Dr=(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getMinutes(),5)),Rr=(e,t,n,r)=>(r.F()||(t=(e=L).m,r=r.first().value,r=t.call(e,y(r.D+r.qa,4))),r),Mr=(e,t,n,r)=>r.F()?r:(e=r.first().value.Y)?L.m(y(e,17)):L.empty();var Lr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"dateTime",j:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},callFunction:(e,t,n,r,i)=>{if(r.F())return r;if(i.F())return i;if(e=r.first().value,i=i.first().value,t=e.Y,n=i.Y,t||n){if(!t||n)if(!t&&n)t=n;else if(!me(t,n))throw Error("FORG0008: fn:dateTime: got a date and time value with different timezones.")}else t=null;return L.m(y(new Se(e.getYear(),e.getMonth(),e.getDay(),i.getHours(),i.getMinutes(),i.getSeconds(),i.qa,t),9))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Br},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Or},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Fr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Pr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-dateTime",j:[{type:9,g:0}],i:{type:4,g:0},callFunction:Rr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-dateTime",j:[{type:9,g:0}],i:{type:17,g:0},callFunction:Mr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Br},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Or},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Fr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-date",j:[{type:7,g:0}],i:{type:17,g:0},callFunction:Mr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:Pr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:Dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-time",j:[{type:8,g:0}],i:{type:4,g:0},callFunction:Rr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-time",j:[{type:8,g:0}],i:{type:17,g:0},callFunction:Mr}];function $r(e,t){const n=t.h,r=t.Ja,i=t.Ma;switch(e.node.nodeType){case 1:const s=r.createElementNS(e.node.namespaceURI,e.node.nodeName);for(var a of(n.getAllAttributes(e.node).forEach((e=>i.setAttributeNS(s,e.namespaceURI,e.nodeName,e.value))),Q(n,e)))e=$r(a,t),i.insertBefore(s,e.node,null);return{node:s,G:null};case 2:return(t=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Z(n,e),{node:t,G:null};case 4:return{node:r.createCDATASection(Z(n,e)),G:null};case 8:return{node:r.createComment(Z(n,e)),G:null};case 9:a=r.createDocument();for(const r of Q(n,e))e=$r(r,t),i.insertBefore(a,e.node,null);return{node:a,G:null};case 7:return{node:r.createProcessingInstruction(e.node.target,Z(n,e)),G:null};case 3:return{node:r.createTextNode(Z(n,e)),G:null}}}function Ur(e,t){const n=t.Ma;var r=t.Ja;const i=t.h;if(!Y(e.node))return $r(e,t).node;switch(e.node.nodeType){case 2:return(r=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Z(i,e),r;case 8:return r.createComment(Z(i,e));case 1:const a=e.node.prefix,s=e.node.localName,o=r.createElementNS(e.node.namespaceURI,a?a+":"+s:s);return Q(i,e).forEach((e=>{e=Ur(e,t),n.insertBefore(o,e,null)})),J(i,e).forEach((e=>{n.setAttributeNS(o,e.node.namespaceURI,e.node.nodeName,Z(i,e))})),o.normalize(),o;case 7:return r.createProcessingInstruction(e.node.target,Z(i,e));case 3:return r.createTextNode(Z(i,e))}}function Hr(e,t,n){var r=e.node;if(!(Y(r)||n||e.G))return r;r=t.v;const i=[];return n?Ur(e,t):(e=function(e,t,n){let r=e;for(e=ne(n,r);null!==e;){if(2===r.node.nodeType)t.push(r.node.nodeName);else{const i=Q(n,e);t.push(i.findIndex((e=>Ct(e,r))))}r=e,e=ne(n,r)}return r}(e,i,t.h),(n=r.get(e.node))||(n={node:Ur(e,t),G:null},r.set(e.node,n)),function(e,t,n){for(;0<t.length;){const r=t.pop();e="string"==typeof r?J(n,e).find((e=>e.node.nodeName===r)):Q(n,e)[r]}return e.node}(n,i,t.h))}const Gr=(e,t,n,r,i)=>r.N((e=>{var n;let r="";for(let i=0;i<e.length;i++){const a=e[i],s=t.Ua&&C(a.type,53)?t.Ua.serializeToString(Hr(a.value,t,!1)):null===(n=rt(L.m(a),t).map((e=>At(e,1))).first())||void 0===n?void 0:n.value;s&&(r+=`{type: ${k[a.type]}, value: ${s}}\n`)}return void 0!==i&&(r+=i.first().value),t.jb.trace(r),L.create(e)}));var jr=[{j:[{type:59,g:2}],callFunction:Gr,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:1,g:3}],callFunction:Gr,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}}];const Xr=(e,t,n,r,i)=>{throw e=void 0===r||r.F()?new U("err","http://www.w3.org/2005/xqt-errors","FOER0000"):r.first().value,t="",void 0===i||i.F()||(t=`: ${i.first().value}`),Error(`${e.localName}${t}`)};var qr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[],i:{type:63,g:3},callFunction:Xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0}],i:{type:63,g:3},callFunction:Xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},callFunction:Xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},callFunction(){throw Error("Not implemented: Using an error object in error is not supported")}}];function Vr(e){return"string"==typeof e?e:(e=(new q).getChildNodes(e).find((e=>8===e.nodeType)))?e.data:"some expression"}var zr=class extends Error{constructor(e,t){super(e),this.position={end:{ha:t.end.ha,line:t.end.line,offset:t.end.offset},start:{ha:t.start.ha,line:t.start.line,offset:t.start.offset}}}};function Yr(e,t){if(t instanceof Error)throw t;"string"!=typeof e&&(e=Vr(e));const n=ba(t);e=e.replace(/\r/g,"").split("\n");const r=Math.floor(Math.log10(Math.min(n.end.line+2,e.length)))+1;throw e=e.reduce(((e,t,i)=>{var a=i+1;if(2<n.start.line-a||2<a-n.end.line)return e;if(i=`${Array(r).fill(" ",0,Math.floor(Math.log10(a))+1-r).join("")}${a}: `,e.push(`${i}${t}`),a>=n.start.line&&a<=n.end.line){const r=a<n.end.line?t.length+i.length:n.end.ha-1+i.length;a=a>n.start.line?i.length:n.start.ha-1+i.length,t=" ".repeat(i.length)+Array.from(t.substring(0,a-i.length),(e=>"\t"===e?"\t":" ")).join("")+"^".repeat(r-a),e.push(t)}return e}),[]),t=wa(t).join("\n"),new zr(e.join("\n")+"\n\n"+t,n)}const Kr=Object.create(null);function Jr(e,t){const n=new Map;for(let t=0;t<e.length+1;++t)n.set(t,new Map);return function r(i,a){if(0===i)return a;if(0===a)return i;if(n.get(i).has(a))return n.get(i).get(a);var s=0;return e[i-1]!==t[a-1]&&(s=1),s=Math.min(r(i-1,a)+1,r(i,a-1)+1,r(i-1,a-1)+s),n.get(i).set(a,s),s}(e.length,t.length)}function Wr(e){const t=Kr[e]?Kr[e]:Object.keys(Kr).map((t=>({name:t,sb:Jr(e,t.slice(t.lastIndexOf(":")+1))}))).sort(((e,t)=>e.sb-t.sb)).slice(0,5).filter((t=>t.sb<e.length/2)).reduce(((e,t)=>e.concat(Kr[t.name])),[]).slice(0,5);return t.length?t.map((e=>`"Q{${e.namespaceURI}}${e.localName} (${e.j.map((e=>4===e?"...":S(e))).join(", ")})"`)).reduce(((e,t,n,r)=>0===n?e+t:e+(n!==r.length-1?", ":" or ")+t),"Did you mean ")+"?":"No similar functions found."}function Qr(e,t,n){var r=Kr[e+":"+t];return r&&(r=r.find((e=>e.j.some((e=>4===e))?e.j.length-1<=n:e.j.length===n)))?{j:r.j,arity:n,callFunction:r.callFunction,I:r.I,localName:t,namespaceURI:e,i:r.i}:null}function Zr(e,t,n,r,i){Kr[e+":"+t]||(Kr[e+":"+t]=[]),Kr[e+":"+t].push({j:n,arity:n.length,callFunction:i,I:!1,localName:t,namespaceURI:e,i:r})}var ei={xml:"http://www.w3.org/XML/1998/namespace",xs:"http://www.w3.org/2001/XMLSchema",fn:"http://www.w3.org/2005/xpath-functions",map:"http://www.w3.org/2005/xpath-functions/map",array:"http://www.w3.org/2005/xpath-functions/array",math:"http://www.w3.org/2005/xpath-functions/math",fontoxpath:"http://fontoxml.com/fontoxpath",local:"http://www.w3.org/2005/xquery-local-functions"},ti=class{constructor(e,t,n,r){this.Da=[Object.create(null)],this.Ea=Object.create(null),this.s=e,this.ia=Object.keys(t).reduce(((e,n)=>(void 0===t[n]||(e[n]=`Q{}${n}[0]`),e)),Object.create(null)),this.o=Object.create(null),this.h=Object.create(null),this.v=n,this.l=r,this.D=[]}va(e,t,n){return Qr(e,t,n)}eb(e,t){return e?null:(e=this.ia[t],this.o[t]||(this.o[t]={name:t}),e)}Sa(e,t){const n=this.l(e,t);if(n)this.D.push({cc:e,arity:t,Db:n});else if(""===e.prefix){if(this.v)return{namespaceURI:this.v,localName:e.localName}}else if(t=this.$(e.prefix,!0))return{namespaceURI:t,localName:e.localName};return n}$(e,t=!0){return t?ei[e]?ei[e]:(t=this.s(e),this.h[e]||(this.h[e]={namespaceURI:t,prefix:e}),void 0!==t||e?t:null):null}},ni=(e,t)=>(e=2===e.node.nodeType?`${e.node.nodeName}="${Z(t,e)}"`:e.node.outerHTML,Error(`XQTY0024: The node ${e} follows a node that is not an attribute node or a namespace node.`)),ri=e=>Error(`XQDY0044: The node name "${e.za()}" is invalid for a computed attribute constructor.`),ii=()=>Error("XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs."),ai=(e,t)=>Error(`XQST0049: The function or variable "Q{${e}}${t}" is declared more than once.`),si=()=>Error("XQST0060: Functions declared in a module or as an external function must reside in a namespace."),oi=()=>Error("XQST0066: A Prolog may contain at most one default function namespace declaration."),li=()=>Error("XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI."),ci=e=>Error(`XQDY0074: The value "${e}" of a name expressions cannot be converted to an expanded QName.`),ui=e=>Error(`XPST0081: The prefix "${e}" could not be resolved`);function pi(e,t){return`Q{${e||""}}${t}`}function di(e,t){for(let n=e.length-1;0<=n;--n)if(t in e[n])return e[n][t]}function hi(e){const t=new vi(e.o);for(let n=0;n<e.h+1;++n)t.D=[Object.assign(Object.create(null),t.D[0],e.D[n])],t.Da=[Object.assign(Object.create(null),t.Da[0],e.Da[n])],t.l=Object.assign(Object.create(null),e.l),t.Ea=e.Ea,t.v=e.v;return t}function mi(e){e.s++,e.h++,e.D[e.h]=Object.create(null),e.Da[e.h]=Object.create(null)}function fi(e,t,n,r,i){if(r=pi(t,n)+"~"+r,e.l[r])throw ai(t,n);e.l[r]=i}function gi(e,t,n){e.D[e.h][t]=n}function yi(e,t,n){return t=pi(t||"",n),e.Da[e.h][t]=`${t}[${e.s}]`}function bi(e,t,n,r){e.Ea[`${pi(t||"",n)}[${e.s}]`]=r}function wi(e){e.D.length=e.h,e.Da.length=e.h,e.h--}var vi=class{constructor(e){this.o=e,this.s=this.h=0,this.D=[Object.create(null)],this.l=Object.create(null),this.v=null,this.Ea=e&&e.Ea,this.Da=e&&e.Da}va(e,t,n,r=!1){const i=this.l[pi(e,t)+"~"+n];return!i||r&&i.wb?null===this.o?null:this.o.va(e,t,n,r):i}eb(e,t){const n=di(this.Da,pi(e,t));return n||(null===this.o?null:this.o.eb(e,t))}Sa(e,t){var n=e.prefix;const r=e.localName;return""===n&&this.v?{localName:r,namespaceURI:this.v}:n&&(n=this.$(n,!1))?{localName:r,namespaceURI:n}:null===this.o?null:this.o.Sa(e,t)}$(e,t=!0){const n=di(this.D,e||"");return void 0===n?null===this.o?void 0:this.o.$(e||"",t):n}};function xi(e,t){"*"===t||Array.isArray(t)||(t=[t]);for(let n=1;n<e.length;++n){if(!Array.isArray(e[n]))continue;const r=e[n];if("*"===t||t.includes(r[0]))return r}return null}function Ai(e){return 2>e.length?"":"object"==typeof e[1]?e[2]||"":e[1]||""}function _i(e,t){return Array.isArray(e)?"object"!=typeof(e=e[1])||Array.isArray(e)?null:t in e?e[t]:null:null}function Ei(e,t){return t.reduce(xi,e)}function Ci(e,t){const n=[];for(let r=1;r<e.length;++r){if(!Array.isArray(e[r]))continue;const i=e[r];"*"!==t&&i[0]!==t||n.push(i)}return n}function Ni(e){return{localName:Ai(e),namespaceURI:_i(e,"URI"),prefix:_i(e,"prefix")}}function Ti(e){const t=xi(e,"typeDeclaration");if(!t||xi(t,"voidSequenceType"))return{type:59,g:2};const n=e=>{switch(e[0]){case"documentTest":return 55;case"elementTest":return 54;case"attributeTest":return 47;case"piTest":return 57;case"commentTest":return 58;case"textTest":return 56;case"anyKindTest":return 53;case"anyItemType":return 59;case"anyFunctionTest":case"functionTest":case"typedFunctionTest":return 60;case"anyMapTest":case"typedMapTest":return 61;case"anyArrayTest":case"typedArrayTest":return 62;case"atomicType":return B([_i(e,"prefix"),Ai(e)].join(":"));case"parenthesizedItemType":return n(xi(e,"*"));default:throw Error(`Type declaration "${xi(t,"*")[0]}" is not supported.`)}};e={type:n(xi(t,"*")),g:3};let r=null;const i=xi(t,"occurrenceIndicator");switch(i&&(r=Ai(i)),r){case"*":return e.g=2,e;case"?":return e.g=0,e;case"+":return e.g=1,e;case"":case null:return e}}function ki(e,t,n){if("object"!=typeof e[1]||Array.isArray(e[1])){const r={};r[t]=n,e.splice(1,0,r)}else e[1][t]=n}function Ii(e,t,n){return(e<<20)+(t<<12)+(n.charCodeAt(0)<<8)+n.charCodeAt(1)}var Si={[Ii(2,2,"idivOp")]:5,[Ii(16,16,"addOp")]:16,[Ii(16,16,"subtractOp")]:16,[Ii(16,16,"divOp")]:4,[Ii(16,2,"multiplyOp")]:16,[Ii(16,2,"divOp")]:16,[Ii(2,16,"multiplyOp")]:16,[Ii(17,17,"addOp")]:17,[Ii(17,17,"subtractOp")]:17,[Ii(17,17,"divOp")]:4,[Ii(17,2,"multiplyOp")]:17,[Ii(17,2,"divOp")]:17,[Ii(2,17,"multiplyOp")]:17,[Ii(9,9,"subtractOp")]:17,[Ii(7,7,"subtractOp")]:17,[Ii(8,8,"subtractOp")]:17,[Ii(9,16,"addOp")]:9,[Ii(9,16,"subtractOp")]:9,[Ii(9,17,"addOp")]:9,[Ii(9,17,"subtractOp")]:9,[Ii(7,16,"addOp")]:7,[Ii(7,16,"subtractOp")]:7,[Ii(7,17,"addOp")]:7,[Ii(7,17,"subtractOp")]:7,[Ii(8,17,"addOp")]:8,[Ii(8,17,"subtractOp")]:8,[Ii(9,16,"addOp")]:9,[Ii(9,16,"subtractOp")]:9,[Ii(9,17,"addOp")]:9,[Ii(9,17,"subtractOp")]:9,[Ii(7,17,"addOp")]:7,[Ii(7,17,"subtractOp")]:7,[Ii(7,16,"addOp")]:7,[Ii(7,16,"subtractOp")]:7,[Ii(8,17,"addOp")]:8,[Ii(8,17,"subtractOp")]:8},Bi={[Ii(2,2,"addOp")]:(e,t)=>e+t,[Ii(2,2,"subtractOp")]:(e,t)=>e-t,[Ii(2,2,"multiplyOp")]:(e,t)=>e*t,[Ii(2,2,"divOp")]:(e,t)=>e/t,[Ii(2,2,"modOp")]:(e,t)=>e%t,[Ii(2,2,"idivOp")]:(e,t)=>Math.trunc(e/t),[Ii(16,16,"addOp")]:function(e,t){return new pt(e.ea+t.ea)},[Ii(16,16,"subtractOp")]:function(e,t){return new pt(e.ea-t.ea)},[Ii(16,16,"divOp")]:function(e,t){return e.ea/t.ea},[Ii(16,2,"multiplyOp")]:ht,[Ii(16,2,"divOp")]:function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:yearMonthDuration by NaN");if((e=Math.round(e.ea/t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:yearMonthDuration");return new pt(e<Number.MIN_SAFE_INTEGER||0===e?0:e)},[Ii(2,16,"multiplyOp")]:(e,t)=>ht(t,e),[Ii(17,17,"addOp")]:function(e,t){return new ye(e.ca+t.ca)},[Ii(17,17,"subtractOp")]:function(e,t){return new ye(e.ca-t.ca)},[Ii(17,17,"divOp")]:function(e,t){if(0===t.ca)throw Error("FOAR0001: Division by 0");return e.ca/t.ca},[Ii(17,2,"multiplyOp")]:xe,[Ii(17,2,"divOp")]:function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:dayTimeDuration by NaN");if((e=e.ca/t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:dayTimeDuration");return new ye(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)},[Ii(2,17,"multiplyOp")]:(e,t)=>xe(t,e),[Ii(9,9,"subtractOp")]:Fe,[Ii(7,7,"subtractOp")]:Fe,[Ii(8,8,"subtractOp")]:Fe,[Ii(9,16,"addOp")]:Pe,[Ii(9,16,"subtractOp")]:De,[Ii(9,17,"addOp")]:Pe,[Ii(9,17,"subtractOp")]:De,[Ii(7,16,"addOp")]:Pe,[Ii(7,16,"subtractOp")]:De,[Ii(7,17,"addOp")]:Pe,[Ii(7,17,"subtractOp")]:De,[Ii(8,17,"addOp")]:Pe,[Ii(8,17,"subtractOp")]:De,[Ii(9,16,"addOp")]:Pe,[Ii(9,16,"subtractOp")]:De,[Ii(9,17,"addOp")]:Pe,[Ii(9,17,"subtractOp")]:De,[Ii(7,17,"addOp")]:Pe,[Ii(7,17,"subtractOp")]:De,[Ii(7,16,"addOp")]:Pe,[Ii(7,16,"subtractOp")]:De,[Ii(8,17,"addOp")]:Pe,[Ii(8,17,"subtractOp")]:De};function Oi(e,t){return C(e,5)&&C(t,5)?5:C(e,4)&&C(t,4)?4:C(e,6)&&C(t,6)?6:3}const Fi=[2,16,17,9,7,8];function Pi(e,t,n){function r(e,t){return{U:i?i(e):e,V:a?a(t):t}}let i=null,a=null;C(t,19)&&(i=e=>At(e,3),t=3),C(n,19)&&(a=e=>At(e,3),n=3);const s=Fi.filter((e=>C(t,e))),o=Fi.filter((e=>C(n,e)));if(s.includes(2)&&o.includes(2)){const i=Bi[Ii(2,2,e)];let a=Si[Ii(2,2,e)];return a||=Oi(t,n),"divOp"===e&&5===a&&(a=4),"idivOp"===e?Di(r,i)[0]:(e,t)=>{const{U:n,V:s}=r(e,t);return y(i(n.value,s.value),a)}}for(const t of s)for(const n of o){const i=Bi[Ii(t,n,e)],a=Si[Ii(t,n,e)];if(i&&void 0!==a)return(e,t)=>{const{U:n,V:s}=r(e,t);return y(i(n.value,s.value),a)}}}function Di(e,t){return[(n,r)=>{const{U:i,V:a}=e(n,r);if(0===a.value)throw Error("FOAR0001: Divisor of idiv operator cannot be (-)0");if(Number.isNaN(i.value)||Number.isNaN(a.value)||!Number.isFinite(i.value))throw Error("FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF");return Number.isFinite(i.value)&&!Number.isFinite(a.value)?y(0,5):y(t(i.value,a.value),5)},5]}const Ri=Object.create(null);var Mi=class extends tr{constructor(e,t,n,r,i){super(t.o.add(n.o),[t,n],{B:!1},!1,r),this.A=t,this.L=n,this.l=e,this.s=i}h(e,t){return rt(er(this.A,e,t),t).N((n=>0===n.length?L.empty():rt(er(this.L,e,t),t).N((e=>{if(0===e.length)return L.empty();if(1<n.length||1<e.length)throw Error('XPTY0004: the operands of the "'+this.l+'" operator should be empty or singleton.');const t=n[0];if(e=e[0],this.s&&this.type)return L.m(this.s(t,e));var r=t.type,i=e.type,a=this.l;const s=`${r}~${i}~${a}`;let o=Ri[s];if(o||=Ri[s]=Pi(a,r,i),!(r=o))throw Error(`XPTY0004: ${this.l} not available for types ${k[t.type]} and ${k[e.type]}`);return L.m(r(t,e))}))))}};function Li(e,t,n){const r=Ni(Ei(e,["forClauseItem","typedVariableBinding","varName"]));(e=Ei(e,["forClauseItem","forExpr","sequenceExpr"]))&&(e=Ci(e,"*").map((e=>n(e,t))),e.includes(void 0)||e.includes(null)||1===(e=$i(e)).length&&Wi(t,r.localName,e[0]))}function $i(e){return e.filter(((e,t,n)=>n.findIndex((t=>t.type===e.type&&t.g===e.g))===t))}function Ui(e,t,n){const r=Ci(e,"*"),i=xi(e,"atomicType");if(!i)return{type:59,g:2};if(B(_i(i,"prefix")+":"+i[2])===t.type)if(1===r.length){if(3===t.g)return n}else if(e=xi(e,"occurrenceIndicator")[1],t.g===function(e){switch(e){case"*":return 2;case"?":return 0;case"+":return 1;default:return 3}}(e))return n}function Hi(e,t){Gi(e,t)}function Gi(e,t){var n=Ki.get(e[0]);if(n)return n(e,t);for(n=1;n<e.length;n++)e[n]&&Gi(e[n],t)}const ji=(e,t)=>{var n=Gi(xi(e,"firstOperand")[1],t);const r=Gi(xi(e,"secondOperand")[1],t);var i=e[0];if(n&&r){if(!(t=function(e,t,n){var r=[2,53,59,46,47];if(r.includes(t)||r.includes(n))return 2;let i=null,a=null;C(t,19)&&(i=e=>At(e,3),t=3),C(n,19)&&(a=e=>At(e,3),n=3);var s=Fi.filter((e=>C(t,e)));if(r=Fi.filter((e=>C(n,e))),s.includes(2)&&r.includes(2)){var o=Si[Ii(2,2,e)];return void 0===o&&(o=Oi(t,n)),"divOp"===e&&5===o&&(o=4),"idivOp"===e?Di((function(e,t){return{U:i?i(e):e,V:a?a(t):t}}),((e,t)=>Math.trunc(e/t)))[1]:o}for(o of s)for(const t of r)if(s=Si[Ii(o,t,e)],void 0!==s)return s}(i,n.type,r.type)))throw Error(`XPTY0004: ${i} not available for types ${S(n)} and ${S(r)}`);n={type:t,g:n.g},2!==t&&59!==t&&ki(e,"type",n),e=n}else e={type:2,g:3};return e},Xi=(e,t)=>{Gi(xi(e,"firstOperand")[1],t),Gi(xi(e,"secondOperand")[1],t);e:{switch(e[0]){case"orOp":case"andOp":ki(e,"type",t={type:0,g:3}),e=t;break e}e=void 0}return e},qi=(e,t)=>{Gi(xi(e,"firstOperand")[1],t),Gi(xi(e,"secondOperand")[1],t);e:{switch(e[0]){case"unionOp":case"intersectOp":case"exceptOp":ki(e,"type",t={type:53,g:2}),e=t;break e}e=void 0}return e},Vi=(e,t)=>(Gi(xi(e,"firstOperand")[1],t),Gi(xi(e,"secondOperand")[1],t),ki(e,"type",t={type:0,g:3}),t),zi=(e,t)=>{Gi(xi(e,"firstOperand")[1],t),Gi(xi(e,"secondOperand")[1],t),t=_i(Ei(e,["firstOperand","*"]),"type");const n=_i(Ei(e,["secondOperand","*"]),"type");return ki(e,"type",t={type:0,g:lt(t)||lt(n)?0:3}),t},Yi=(e,t)=>{Gi(xi(e,"firstOperand")[1],t),Gi(xi(e,"secondOperand")[1],t),t=_i(Ei(e,["firstOperand","*"]),"type");const n=_i(Ei(e,["secondOperand","*"]),"type");return ki(e,"type",t={type:0,g:lt(t)||lt(n)?0:3}),t},Ki=new Map([["unaryMinusOp",(e,t)=>((t=Gi(xi(e,"operand")[1],t))?C(t.type,2)?(ki(e,"type",t={type:t.type,g:t.g}),e=t):(ki(e,"type",t={type:3,g:3}),e=t):(ki(e,"type",t={type:2,g:2}),e=t),e)],["unaryPlusOp",(e,t)=>((t=Gi(xi(e,"operand")[1],t))?C(t.type,2)?(ki(e,"type",t={type:t.type,g:t.g}),e=t):(ki(e,"type",t={type:3,g:3}),e=t):(ki(e,"type",t={type:2,g:2}),e=t),e)],["addOp",ji],["subtractOp",ji],["divOp",ji],["idivOp",ji],["modOp",ji],["multiplyOp",ji],["andOp",Xi],["orOp",Xi],["sequenceExpr",(e,t)=>{const n=Ci(e,"*"),r=n.map((e=>Gi(e,t)));return function(e,t,n){return t=0===t?{type:53,g:2}:1===t?n[0]:n.includes(void 0)||n.includes(null)||1<(t=$i(n)).length?{type:59,g:2}:{type:t[0].type,g:2},t&&59!==t.type&&ki(e,"type",t),t}(e,n.length,r)}],["unionOp",qi],["intersectOp",qi],["exceptOp",qi],["stringConcatenateOp",(e,t)=>(Gi(xi(e,"firstOperand")[1],t),Gi(xi(e,"secondOperand")[1],t),ki(e,"type",t={type:1,g:3}),t)],["rangeSequenceExpr",(e,t)=>(Gi(xi(e,"startExpr")[1],t),Gi(xi(e,"endExpr")[1],t),ki(e,"type",t={type:5,g:1}),t)],["equalOp",Vi],["notEqualOp",Vi],["lessThanOrEqualOp",Vi],["lessThanOp",Vi],["greaterThanOrEqualOp",Vi],["greaterThanOp",Vi],["eqOp",zi],["neOp",zi],["ltOp",zi],["leOp",zi],["gtOp",zi],["geOp",zi],["isOp",Yi],["nodeBeforeOp",Yi],["nodeAfterOp",Yi],["pathExpr",(e,t)=>{const n=xi(e,"rootExpr");return n&&n[1]&&Gi(n[1],t),Ci(e,"stepExpr").map((e=>Gi(e,t))),function(e,t){var n=Ci(e,"stepExpr");if(!n)return{type:59,g:2};for(const e of n){e:{n=e;var r=t;let a=null;if(!n)break e;var i=Ci(n,"*");let s="";for(const e of i)switch(e[0]){case"filterExpr":a=_i(Ei(e,["*"]),"type");break;case"xpathAxis":s=e[1];t:{switch(s){case"attribute":a={type:47,g:2};break t;case"child":case"decendant":case"self":case"descendant-or-self":case"following-sibling":case"following":case"namespace":case"parent":case"ancestor":case"preceding-sibling":case"preceding":case"ancestor-or-self":a={type:53,g:2};break t}a=void 0}break;case"nameTest":if(i=Ni(e),null!==i.namespaceURI)break;if("attribute"===s&&!i.prefix)break;void 0!==(i=r.$(i.prefix||""))&&ki(e,"URI",i);break;case"lookup":a={type:59,g:2}}a&&59!==a.type&&ki(n,"type",a)}r=_i(e,"type")}return r&&59!==r.type&&ki(e,"type",r),r}(e,t)}],["contextItemExpr",()=>({type:59,g:2})],["ifThenElseExpr",(e,t)=>{var n=xi(e,"ifClause")||xi(Ci(e,"x:stackTrace")[0],"ifClause");const r=xi(e,"thenClause")||xi(Ci(e,"x:stackTrace")[1],"thenClause"),i=xi(e,"elseClause")||xi(Ci(e,"x:stackTrace")[2],"elseClause");return Gi(xi(n,"*"),t),n=Gi(xi(r,"*"),t),t=Gi(xi(i,"*"),t),n&&t&&n.type===t.type&&n.g===t.g?(59!==n.type&&ki(e,"type",n),e=n):e={type:59,g:2},e}],["instanceOfExpr",(e,t)=>(Gi(xi(e,"argExpr"),t),Gi(xi(e,"sequenceType"),t),ki(e,"type",t={type:0,g:3}),t)],["integerConstantExpr",e=>{const t={type:5,g:3};return ki(e,"type",t),t}],["doubleConstantExpr",e=>{const t={type:3,g:3};return ki(e,"type",t),t}],["decimalConstantExpr",e=>{const t={type:4,g:3};return ki(e,"type",t),t}],["stringConstantExpr",e=>{const t={type:1,g:3};return ki(e,"type",t),t}],["functionCallExpr",(e,t)=>(Ci(xi(e,"arguments"),"*").map((e=>Gi(e,t))),function(e,t){if(!t||!t.ga)return{type:59,g:2};const n=xi(e,"functionName");var r=Ni(n);let i=r.localName;var a=r.prefix;let s=r.namespaceURI;if(r=Ci(xi(e,"arguments"),"*"),null===s){if(!(a=t.ga.Sa({localName:i,prefix:a},r.length)))return{type:59,g:2};i=a.localName,s=a.namespaceURI,ki(n,"URI",s),n[2]=i}return(t=t.ga.va(s,i,r.length))&&63!==t.i.type?(59!==t.i.type&&ki(e,"type",t.i),t.i):{type:59,g:2}}(e,t))],["arrowExpr",(e,t)=>(Gi(xi(e,"argExpr")[1],t),function(e,t){if(!t||!t.ga)return{type:59,g:2};var n=xi(e,"EQName");if(!n)return{type:59,g:2};var r=Ni(n);n=r.localName;const i=r.prefix;return r=Ci(xi(e,"arguments"),"*"),(n=t.ga.Sa({localName:n,prefix:i},r.length))&&(t=t.ga.va(n.namespaceURI,n.localName,r.length+1))?(59!==t.i.type&&ki(e,"type",t.i),t.i):{type:59,g:2}}(e,t))],["dynamicFunctionInvocationExpr",(e,t)=>(Gi(Ei(e,["functionItem","*"]),t),(e=xi(e,"arguments"))&&Gi(e,t),{type:59,g:2})],["namedFunctionRef",(e,t)=>function(e,t){if(!t||!t.ga)return{type:59,g:2};const n=xi(e,"functionName");var r=Ni(n);let i=r.localName;var a=r.namespaceURI;const s=r.prefix;if(r=Number(Ei(e,["integerConstantExpr","value"])[1]),!a){if(!(a=t.ga.Sa({localName:i,prefix:s},r)))return{type:59,g:2};i=a.localName,ki(n,"URI",a=a.namespaceURI)}return(t=t.ga.va(a,i,r)||null)?(59!==t.i.type&&63!==t.i.type&&ki(e,"type",t.i),t.i):{type:59,g:2}}(e,t)],["inlineFunctionExpr",(e,t)=>(Gi(xi(e,"functionBody")[1],t),ki(e,"type",t={type:60,g:3}),t)],["castExpr",e=>{var t=Ei(e,["singleType","atomicType"]);return 59!==(t={type:B(_i(t,"prefix")+":"+t[2]),g:3}).type&&ki(e,"type",t),t}],["castableExpr",e=>{const t={type:0,g:3};return ki(e,"type",t),t}],["simpleMapExpr",(e,t)=>{const n=Ci(e,"pathExpr");let r;for(let e=0;e<n.length;e++)r=Gi(n[e],t);return null!=r?(59!==(t={type:r.type,g:2}).type&&ki(e,"type",t),e=t):e={type:59,g:2},e}],["mapConstructor",(e,t)=>(Ci(e,"mapConstructorEntry").map((e=>({key:Gi(Ei(e,["mapKeyExpr","*"]),t),value:Gi(Ei(e,["mapValueExpr","*"]),t)}))),function(e){const t={type:61,g:3};return ki(e,"type",t),t}(e))],["arrayConstructor",(e,t)=>(Ci(xi(e,"*"),"arrayElem").map((e=>Gi(e,t))),function(e){const t={type:62,g:3};return ki(e,"type",t),t}(e))],["unaryLookup",e=>(xi(e,"NCName"),{type:59,g:2})],["typeswitchExpr",(e,t)=>{const n=Gi(xi(e,"argExpr")[1],t),r=Ci(e,"typeswitchExprCaseClause").map((e=>Gi(Ei(e,["resultExpr"])[1],t)));return function(e,t,n,r){if(!t||n.includes(void 0))return{type:59,g:2};var i=Ci(e,"typeswitchExprCaseClause");for(let s=0;s<n.length;s++){var a=xi(i[s],"*");switch(a[0]){case"sequenceType":if(a=Ui(a,t,n[s]))return 59!==a.type&&ki(e,"type",a),a;continue;case"sequenceTypeUnion":for(r=Ci(a,"*"),i=0;2>i;i++)if(a=Ui(r[i],t,n[s]))return 59!==a.type&&ki(e,"type",a),a;default:return{type:59,g:2}}}return 59!==r.type&&ki(e,"type",r),r}(e,n,r,Gi(Ei(e,["typeswitchExprDefaultClause","resultExpr"])[1],t))}],["quantifiedExpr",(e,t)=>(Ci(e,"*").map((e=>Gi(e,t))),function(e){const t={type:0,g:3};return ki(e,"type",t),t}(e))],["x:stackTrace",(e,t)=>Gi((e=Ci(e,"*"))[0],t)],["queryBody",(e,t)=>Gi(e[1],t)],["flworExpr",(e,t)=>function(e,t){var n=Gi;let r=!1;for(var i=1;i<e.length;i++)switch(e[i][0]){case"letClause":Ji(t);var a=e[i],s=t,o=n,l=Ei(a,["letClauseItem","typedVariableBinding","varName"]);l=Ni(l),o=o((a=Ei(a,["letClauseItem","letExpr"]))[1],s),Wi(s,l.localName,o);break;case"forClause":r=!0,Ji(t),Li(e[i],t,n);break;case"whereClause":Ji(t),n(s=e[i],t),ki(s,"type",{type:0,g:3});break;case"orderByClause":Ji(t);break;case"returnClause":return s=n,ki(n=Ei(i=e[i],["*"]),"type",t=s(n,t)),ki(i,"type",t),(n=t)?(r&&(n={type:n.type,g:2}),59!==n.type&&ki(e,"type",n),n):{type:59,g:2};default:return(n=n(e[i],t))?(r&&(n={type:n.type,g:2}),59!==n.type&&ki(e,"type",n),n):{type:59,g:2}}if(!(0<t.h))throw Error("Variable scope out of bound");t.h--,t.o.pop(),t.v.pop()}(e,t)],["varRef",(e,t)=>{const n=Ni(xi(e,"name"));var r;e:{for(r=t.h;0<=r;r--){const e=t.o[r][n.localName];if(e){r=e;break e}}r=void 0}return r&&59!==r.type&&ki(e,"type",r),null===n.namespaceURI&&(void 0!==(t=t.$(n.prefix))&&ki(e,"URI",t)),r}]]);function Ji(e){e.h++,e.o.push({}),e.v.push({})}function Wi(e,t,n){if(e.o[e.h][t])throw Error(`Another variable of in the scope ${e.h} with the same name ${t} already exists`);e.o[e.h][t]=n}var Qi=class{constructor(e){this.h=0,this.ga=e,this.o=[{}],this.v=[{}]}$(e){for(let t=this.h;0<=t;t--){const n=this.v[t][e];if(void 0!==n)return n}return this.ga?this.ga.$(e):void 0}},Zi=class extends tr{constructor(e,t){super(new yr({external:1}),e,{B:e.every((e=>e.B))},!1,t),this.l=e}h(e,t){return 0===this.l.length?L.m(new oe([])):er(this.l[0],e,t).N((e=>L.m(new oe(e.map((e=>$(L.m(e))))))))}},ea=class extends tr{constructor(e,t){super(new yr({external:1}),e,{B:e.every((e=>e.B))},!1,t),this.l=e}h(e,t){return L.m(new oe(this.l.map((n=>$(er(n,e,t))))))}};function ta(e){if(null===e)throw Qe("context is absent, it needs to be present to use axes.");if(!C(e.type,53))throw Error("XPTY0020: Axes can only be applied to nodes.");return e.value}var na=class extends tr{constructor(e,t){t=t||{Qa:!1},super(e.o,[e],{R:"reverse-sorted",W:!1,subtree:!1,B:!1}),this.l=e,this.s=!!t.Qa}h(e,t){t=t.h,e=ta(e.M);var n=this.l.D();return n=n&&(n.startsWith("name-")||"type-1"===n)?"type-1":null,L.create(function(e,t,n){let r=t;return{next:()=>{if(!r)return A;const t=r;return r=ne(e,t,n),_(ce(t))}}}(t,this.s?e:ne(t,e,n),n)).filter((e=>this.l.l(e)))}};const ra=new Map([["type-1-or-type-2",["name","type-1","type-2"]],["type-1",["name"]],["type-2",["name"]]]);function ia(e,t){if(null===e)return t;if(null===t||e===t)return e;const n=e.startsWith("name-")?"name":e,r=t.startsWith("name-")?"name":t,i=ra.get(n);return void 0!==i&&i.includes(r)?t:void 0!==(t=ra.get(r))&&t.includes(n)?e:"empty"}var aa=class extends tr{constructor(e,t){super(new yr({attribute:1}),[e],{R:"unsorted",subtree:!0,W:!0,B:!1}),this.l=e,this.s=ia(this.l.D(),t)}h(e,t){return t=t.h,1!==(e=ta(e.M)).node.nodeType?L.empty():(e=J(t,e,this.s).filter((e=>"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI)).map((e=>ce(e))).filter((e=>this.l.l(e))),L.create(e))}D(){return"type-1"}},sa=class extends tr{constructor(e,t){super(e.o,[e],{R:"sorted",subtree:!0,W:!0,B:!1}),this.s=e,this.l=ia(t,e.D())}h(e,t){const n=t.h,r=ta(e.M);if(1!==(e=r.node.nodeType)&&9!==e)return L.empty();let i=null,a=!1;return L.create({next:()=>{for(;!a;){if(!i){if(i=ee(n,r,this.l),!i){a=!0;continue}return _(ce(i))}if(i=re(n,i,this.l))return _(ce(i));a=!0}return A}}).filter((e=>this.s.l(e)))}};function oa(e,t,n){const r=t.node.nodeType;if(1!==r&&9!==r)return{next:()=>A};let i=ee(e,t,n);return{next(){if(!i)return A;const t=i;return i=re(e,i,n),_(t)}}}var la=class extends tr{constructor(e,t){t=t||{Qa:!1},super(e.o,[e],{B:!1,W:!1,R:"sorted",subtree:!0}),this.l=e,this.s=!!t.Qa,this.A=(e=this.l.D())&&(e.startsWith("name-")||"type-1"===e)||"type-1-or-type-2"===e?"type-1":null}h(e,t){return e=function(e,t,n){const r=[_t(t)];return{next:t=>{if(0<r.length&&0!=(1&t)&&r.shift(),!r.length)return A;for(t=r[0].next(0);t.done;){if(r.shift(),!r.length)return A;t=r[0].next(0)}return r.unshift(oa(e,t.value,n)),_(ce(t.value))}}}(t=t.h,e=ta(e.M),this.A),this.s||e.next(0),L.create(e).filter((e=>this.l.l(e)))}};function ca(e,t,n){var r=e.node.nodeType;if(1!==r&&9!==r)return e;for(r=te(t,e,n);null!==r;){if(1!==r.node.nodeType)return r;r=te(t,e=r,n)}return e}function ua(e,t,n=!1,r){if(n){let n=t,i=!1;return{next:()=>{if(i)return A;if(Ct(n,t))return n=ca(t,e,r),Ct(n,t)?(i=!0,A):_(ce(n));const a=n.node.nodeType,s=9===a||2===a?null:ie(e,n,r);return null!==s?(n=ca(s,e,r),_(ce(n))):(n=9===a?null:ne(e,n,r),Ct(n,t)?(i=!0,A):_(ce(n)))}}}const i=[oa(e,t,r)];return{next:()=>{if(!i.length)return A;let t=i[0].next(0);for(;t.done;){if(i.shift(),!i.length)return A;t=i[0].next(0)}return i.unshift(oa(e,t.value,r)),_(ce(t.value))}}}var pa=class extends tr{constructor(e){super(e.o,[e],{R:"sorted",W:!0,subtree:!1,B:!1}),this.l=e,this.s=(e=this.l.D())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}h(e,t){return t=t.h,e=ta(e.M),L.create(function(e,t,n){const r=[];for(;t&&9!==t.node.nodeType;t=ne(e,t,null)){const i=re(e,t,n);i&&r.push(i)}let i=null;return{next:()=>{for(;i||r.length;){if(!i){i=ua(e,r[0],!1,n);var t=_(ce(r[0]));const a=re(e,r[0],n);return a?r[0]=a:r.shift(),t}if(!(t=i.next(0)).done)return t;i=null}return A}}}(t,e,this.s)).filter((e=>this.l.l(e)))}};var da=class extends tr{constructor(e,t){super(e.o,[e],{R:"sorted",W:!0,subtree:!1,B:!1}),this.l=e,this.s=ia(this.l.D(),t)}h(e,t){return t=t.h,e=ta(e.M),L.create(function(e,t,n){return{next:()=>(t=t&&re(e,t,n))?_(ce(t)):A}}(t,e,this.s)).filter((e=>this.l.l(e)))}},ha=class extends tr{constructor(e,t){super(e.o,[e],{R:"reverse-sorted",W:!0,subtree:!0,B:!1}),this.l=e,this.s=ia(t,this.l.D())}h(e,t){return(e=ne(t=t.h,e=ta(e.M),this.s))?(e=ce(e),this.l.l(e)?L.m(e):L.empty()):L.empty()}};var ma=class extends tr{constructor(e){super(e.o,[e],{B:!1,W:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=(e=this.l.D())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}h(e,t){return t=t.h,e=ta(e.M),L.create(function(e,t,n){const r=[];for(;t&&9!==t.node.nodeType;t=ne(e,t,null)){const i=ie(e,t,n);null!==i&&r.push(i)}let i=null;return{next:()=>{for(;i||r.length;){i||=ua(e,r[0],!0,n);var t=i.next(0);if(t.done){i=null,t=ie(e,r[0],n);const a=_(ce(r[0]));return null===t?r.shift():r[0]=t,a}return t}return A}}}(t,e,this.s)).filter((e=>this.l.l(e)))}};var fa=class extends tr{constructor(e,t){super(e.o,[e],{B:!1,W:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=ia(this.l.D(),t)}h(e,t){return t=t.h,e=ta(e.M),L.create(function(e,t,n){return{next:()=>(t=t&&ie(e,t,n))?_(ce(t)):A}}(t,e,this.s)).filter((e=>this.l.l(e)))}},ga=class extends tr{constructor(e,t){super(e.o,[e],{R:"sorted",subtree:!0,W:!0,B:!1}),this.l=e,this.s=ia(this.l.D(),t)}h(e){return ta(e.M),this.l.l(e.M)?L.m(e.M):L.empty()}D(){return this.s}},ya=class extends hr{constructor(e,t,n,r){super(e.o.add(t.o).add(n.o),[e,t,n],{B:e.B&&t.B&&n.B,W:t.W===n.W&&t.W,R:t.ia===n.ia?t.ia:"unsorted",subtree:t.subtree===n.subtree&&t.subtree},r),this.l=e}A(e,t,n){let r=null;const i=n[0](e);return L.create({next:t=>(r||(r=(i.fa()?n[1](e):n[2](e)).value),r.next(t))})}v(e){if(super.v(e),this.l.I)throw jn()}};function ba(e){return e.h instanceof Error?e.location:ba(e.h)}function wa(e){let t;return t=e.h instanceof zr?["Inner error:",e.h.message]:e.h instanceof Error?[e.h.toString()]:wa(e.h),t.push(`  at <${e.o}${e.Wa?` (${e.Wa})`:""}>:${e.location.start.line}:${e.location.start.ha} - ${e.location.end.line}:${e.location.end.ha}`),t}var va=class{constructor(e,t,n,r){this.location=e,this.o=t,this.Wa=n,this.h=r}},xa=class extends hr{constructor(e,t,n,r){super(n.o,[n],{B:n.B,W:n.W,R:n.ia,subtree:n.subtree}),this.L=t,this.P={end:{ha:e.end.ha,line:e.end.line,offset:e.end.offset},start:{ha:e.start.ha,line:e.start.line,offset:e.start.offset}},this.l=r}A(e,t,[n]){let r;try{r=n(e)}catch(e){throw new va(this.P,this.L,this.l,e)}return L.create({next:e=>{try{return r.value.next(e)}catch(e){throw new va(this.P,this.L,this.l,e)}}})}v(e){try{super.v(e)}catch(e){throw new va(this.P,this.L,this.l,e)}}D(){return this.Fa[0].D()}};function Aa(e,t,n,r){let i=[];const a=e.L(t,n,r,(n=>{if(e.l instanceof Ea){return dr(Aa(e.l,t,n,r),(e=>i=e))}let a=null;return L.create({next:()=>{for(;;){if(!a){var t=n.next(0);if(t.done)return A;t=e.l.s(t.value,r),a=dr(t,(e=>i=cr(i,e))).value}if(!(t=a.next(0)).done)return t;a=null}}})}));let s=!1;return{next:()=>{if(s)return A;const e=a.O();return s=!0,_(new nr(e,i))}}}function _a(e,t,n,r){return e.L(t,n,r,(n=>{if(e.l instanceof Ea)return _a(e.l,t,n,r);let i=null;return L.create({next:()=>{for(;;){if(!i){var t=n.next(0);if(t.done)return A;i=er(e.l,t.value,r).value}if(!(t=i.next(0)).done)return t;i=null}}})}))}var Ea=class extends tr{constructor(e,t,n,r){super(e,t,n,!0),this.l=r,this.I=this.l.I}h(e,t){return this.L(e,_t(e),t,(n=>{if(this.l instanceof Ea)return _a(this.l,e,n,t);let r=null;return L.create({next:e=>{for(;;){if(!r){var i=n.next(0);if(i.done)return A;r=er(this.l,i.value,t).value}if(!(i=r.next(e)).done)return i;r=null}}})}))}s(e,t){return Aa(this,e,_t(e),t)}v(e){super.v(e),this.I=this.l.I;for(const e of this.Fa)if(e!==this.l&&e.I)throw jn()}},Ca=class extends Ea{constructor(e,t,n,r){super(t.o.add(r.o),[t,r],{B:!1},r),this.P=e.prefix,this.ma=e.namespaceURI,this.Pb=e.localName,this.yb=null,this.A=n,this.La=null,this.ya=t}L(e,t,n,r){let i=null,a=null,s=0;return r({next:()=>{for(;;){if(!i){var e=t.next(0);if(e.done)return A;a=e.value,s=0,i=er(this.ya,a,n).value}const r=i.next(0);if(!r.done)return s++,e={[this.yb]:()=>L.m(r.value)},this.La&&(e[this.La]=()=>L.m(new T(5,s))),_(ze(a,e));i=null}}})}v(e){if(this.P&&(this.ma=e.$(this.P),!this.ma&&this.P))throw Error(`XPST0081: Could not resolve namespace for prefix ${this.P} in a for expression`);if(this.ya.v(e),mi(e),this.yb=yi(e,this.ma,this.Pb),this.A){if(this.A.prefix&&(this.A.namespaceURI=e.$(this.A.prefix),!this.A.namespaceURI&&this.A.prefix))throw Error(`XPST0081: Could not resolve namespace for prefix ${this.P} in the positionalVariableBinding in a for expression`);this.La=yi(e,this.A.namespaceURI,this.A.localName)}if(this.l.v(e),wi(e),this.ya.I)throw jn();this.l.I&&(this.I=!0)}},Na=class extends tr{constructor(e,t,n){super(new yr({external:1}),[n],{B:!1,R:"unsorted"}),this.P=e.map((({name:e})=>e)),this.A=e.map((({type:e})=>e)),this.s=null,this.L=t,this.l=n}h(e,t){const n=new H({j:this.A,arity:this.A.length,Ya:!0,I:this.l.I,localName:"dynamic-function",namespaceURI:"",i:this.L,value:(n,r,i,...a)=>(n=ze(Ge(e,-1,null,L.empty()),this.s.reduce(((e,t,n)=>(e[t]=$(a[n]),e)),Object.create(null))),er(this.l,n,t))});return L.m(n)}v(e){if(mi(e),this.s=this.P.map((t=>yi(e,t.namespaceURI,t.localName))),this.l.v(e),wi(e),this.l.I)throw Error("Not implemented: inline functions can not yet be updating.")}},Ta=class extends Ea{constructor(e,t,n){if(super(t.o.add(n.o),[t,n],{B:!1,W:n.W,R:n.ia,subtree:n.subtree},n),e.prefix||e.namespaceURI)throw Error("Not implemented: let expressions with namespace usage.");this.A=e.prefix,this.P=e.namespaceURI,this.La=e.localName,this.ma=t,this.ya=null}L(e,t,n,r){return r({next:()=>{var e=t.next(0);return e.done?A:_(e=ze(e=e.value,{[this.ya]:$(er(this.ma,e,n))}))}})}v(e){if(this.A&&(this.P=e.$(this.A),!this.P&&this.A))throw Error(`XPST0081: Could not resolve namespace for prefix ${this.A} using in a for expression`);if(this.ma.v(e),mi(e),this.ya=yi(e,this.P,this.La),this.l.v(e),wi(e),this.I=this.l.I,this.ma.I)throw jn()}},ka=class extends tr{constructor(e,t){let n;switch(super(new yr({}),[],{B:!0,R:"sorted"},!1,t),t.type){case 5:n=y(parseInt(e,10),t.type);break;case 1:n=y(e,t.type);break;case 4:case 3:n=y(parseFloat(e),t.type);break;default:throw new TypeError("Type "+t+" not expected in a literal")}this.l=()=>L.m(n)}h(){return this.l()}},Ia=class extends tr{constructor(e,t){super(new yr({external:1}),e.reduce(((e,{key:t,value:n})=>e.concat(t,n)),[]),{B:!1},!1,t),this.l=e}h(e,t){const n=this.l.map((n=>rt(er(n.key,e,t),t).X({default:()=>{throw Error("XPTY0004: A key of a map should be a single atomizable value.")},m:e=>e})));return ue(n,(n=>L.m(new he(n.map(((n,r)=>({key:n,value:$(er(this.l[r].value,e,t))})))))))}},Sa=class extends tr{constructor(e,t,n){super(new yr({external:1}),[],{B:!0},!1,n),this.s=t,this.A=e,this.l=null}h(){const e=new H({j:this.l.j,I:this.l.I,arity:this.s,localName:this.l.localName,namespaceURI:this.l.namespaceURI,i:this.l.i,value:this.l.callFunction});return L.m(e)}v(e){let t=this.A.namespaceURI,n=this.A.localName;const r=this.A.prefix;if(null===t){const i=e.Sa({localName:n,prefix:r},this.s);if(!i)throw Error(`XPST0017: The function ${r?r+":":""}${n} with arity ${this.s} could not be resolved. ${Wr(n)}`);t=i.namespaceURI,n=i.localName}if(this.l=e.va(t,n,this.s)||null,!this.l)throw e=this.A,Error(`XPST0017: Function ${e.namespaceURI?`Q{${e.namespaceURI}}`:e.prefix?`${e.prefix}:`:""}${e.localName} with arity of ${this.s} not registered. ${Wr(n)}`);super.v(e)}};const Ba={5:5,27:5,28:5,31:5,32:5,33:5,34:5,30:5,36:5,35:5,38:5,37:5,29:5,4:4,6:6,3:3};var Oa=class extends tr{constructor(e,t,n){super(t.o,[t],{B:!1},!1,n),this.s=t,this.l=e}h(e,t){return rt(er(this.s,e,t),t).N((e=>{if(0===e.length)return L.empty();var t=e[0];if(this.type)return e="+"===this.l?+t.value:-t.value,0===t.type&&(e=Number.NaN),L.m(y(e,this.type.type));if(1<e.length)throw Error("XPTY0004: The operand to a unary operator must be a sequence with a length less than one");return C(t.type,19)?(t=At(t,3).value,L.m(y("+"===this.l?t:-t,3))):C(t.type,2)?"+"===this.l?L.m(t):L.m(y(-1*t.value,Ba[t.type])):L.m(y(Number.NaN,3))}))}},Fa=class extends tr{constructor(e,t){super(e.reduce(((e,t)=>e.add(t.o)),new yr({})),e,{B:e.every((e=>e.B))},!1,t),this.l=e,this.s=e.reduce(((e,t)=>ia(e,t.D())),null)}h(e,t){let n=0,r=null,i=!1,a=null;if(null!==e){const t=e.M;null!==t&&C(t.type,53)&&(a=j(t.value))}return L.create({next:()=>{if(!i){for(;n<this.l.length;){if(!r){const s=this.l[n];if(null!==a&&null!==s.D()&&!a.includes(s.D()))return n++,i=!0,_(w);r=er(s,e,t)}if(!1===r.fa())return i=!0,_(w);r=null,n++}return i=!0,_(b)}return A}})}D(){return this.s}},Pa=class extends tr{constructor(e,t){let n;for(super(e.reduce(((e,t)=>0<gr(e,t.o)?e:t.o),new yr({})),e,{B:e.every((e=>e.B))},!1,t),t=0;t<e.length&&(void 0===n&&(n=e[t].D()),null!==n);++t)if(n!==e[t].D()){n=null;break}this.s=n,this.l=e}h(e,t){let n=0,r=null,i=!1,a=null;if(null!==e){const t=e.M;null!==t&&C(t.type,53)&&(a=j(t.value))}return L.create({next:()=>{if(!i){for(;n<this.l.length;){if(!r){const i=this.l[n];if(null!==a&&null!==i.D()&&!a.includes(i.D())){n++;continue}r=er(i,e,t)}if(!0===r.fa())return i=!0,_(b);r=null,n++}return i=!0,_(w)}return A}})}D(){return this.s}};function Da(e,t){let n;return L.create({next:r=>{for(;;){if(!n){var i=e.value.next(r);if(i.done)return A;n=nt(i.value,t)}if(!(i=n.value.next(r)).done)return i;n=null}}})}function Ra(e,t,n){function r(e,t){return{U:s?s(e):e,V:o?o(t):t}}function i(e){return C(t,e)&&C(n,e)}function a(e){return 0<e.filter((e=>C(t,e))).length&&0<e.filter((e=>C(n,e))).length}let s=null,o=null;if(C(t,19)&&C(n,19)?t=n=1:C(t,19)?(s=e=>At(e,n),t=n):C(n,19)&&(o=e=>At(e,t),n=t),C(t,23)&&C(n,23))return function(e,t){if("eqOp"===e)return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value.namespaceURI===i.value.namespaceURI&&r.value.localName===i.value.localName};if("neOp"===e)return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value.namespaceURI!==i.value.namespaceURI||r.value.localName!==i.value.localName};throw Error('XPTY0004: Only the "eq" and "ne" comparison is defined for xs:QName')}(e,r);if(i(0)||a([1,47,61])||a([2,47,61])||i(20)||i(22)||i(21)||a([1,20])){var l=function(e,t){switch(e){case"eqOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value===i.value};case"neOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value!==i.value};case"ltOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value<i.value};case"leOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value<=i.value};case"gtOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value>i.value};case"geOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value>=i.value}}}(e,r);if(void 0!==l)return l}if(i(16)&&(l=function(e,t){switch(e){case"ltOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value.ea<i.value.ea};case"leOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return me(r.value,i.value)||r.value.ea<i.value.ea};case"gtOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value.ea>i.value.ea};case"geOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return me(r.value,i.value)||r.value.ea>i.value.ea}}}(e,r),void 0!==l)||i(17)&&(l=function(e,t){switch(e){case"eqOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return me(r.value,i.value)};case"ltOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value.ca<i.value.ca};case"leOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return me(r.value,i.value)||r.value.ca<i.value.ca};case"gtOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return r.value.ca>i.value.ca};case"geOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return me(r.value,i.value)||r.value.ca>i.value.ca}}}(e,r),void 0!==l)||i(18)&&(l=function(e,t){switch(e){case"eqOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return me(r.value,i.value)};case"neOp":return(e,n)=>{const{U:r,V:i}=t(e,n);return!me(r.value,i.value)}}}(e,r),void 0!==l))return l;if((i(9)||i(7)||i(8))&&(l=function(e,t){switch(e){case"eqOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return Oe(i.value,a.value,qe(r))};case"neOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return!Oe(i.value,a.value,qe(r))};case"ltOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return e=qe(r),0>Be(i.value,a.value,e)};case"leOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return(e=Oe(i.value,a.value,qe(r)))||(r=qe(r),e=0>Be(i.value,a.value,r)),e};case"gtOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return e=qe(r),0<Be(i.value,a.value,e)};case"geOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return(e=Oe(i.value,a.value,qe(r)))||(r=qe(r),e=0<Be(i.value,a.value,r)),e}}}(e,r),void 0!==l))return l;if((i(11)||i(12)||i(13)||i(14)||i(15))&&(l=function(e,t){switch(e){case"eqOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return Oe(i.value,a.value,qe(r))};case"neOp":return(e,n,r)=>{const{U:i,V:a}=t(e,n);return!Oe(i.value,a.value,qe(r))}}}(e,r),void 0!==l))return l;throw Error(`XPTY0004: ${e} not available for ${k[t]} and ${k[n]}`)}const Ma=Object.create(null);function La(e,t,n){const r=`${t}~${n}~${e}`;let i=Ma[r];return i||=Ma[r]=Ra(e,t,n),i}var $a=class extends tr{constructor(e,t,n){super(t.o.add(n.o),[t,n],{B:!1}),this.l=t,this.A=n,this.s=e}h(e,t){const n=er(this.l,e,t),r=er(this.A,e,t),i=Da(n,t),a=Da(r,t);return i.X({empty:()=>L.empty(),m:()=>a.X({empty:()=>L.empty(),m:()=>{const t=i.first(),n=a.first();return La(this.s,t.type,n.type)(t,n,e)?L.aa():L.T()},multiple:()=>{throw Error("XPTY0004: Sequences to compare are not singleton.")}}),multiple:()=>{throw Error("XPTY0004: Sequences to compare are not singleton.")}})}};const Ua={equalOp:"eqOp",notEqualOp:"neOp",lessThanOrEqualOp:"leOp",lessThanOp:"ltOp",greaterThanOrEqualOp:"geOp",greaterThanOp:"gtOp"};var Ha=class extends tr{constructor(e,t,n){super(t.o.add(n.o),[t,n],{B:!1}),this.l=t,this.A=n,this.s=e}h(e,t){const n=er(this.l,e,t),r=er(this.A,e,t);return n.X({empty:()=>L.T(),default:()=>r.X({empty:()=>L.T(),default:()=>{const i=Da(n,t),a=Da(r,t);return function(e,t,n,r){return e=Ua[e],n.N((n=>t.filter((t=>{for(let s=0,o=n.length;s<o;++s){let o,l,c=n[s];var i=t.type,a=c.type;(C(i,19)||C(a,19))&&(C(i,2)?o=3:C(a,2)?l=3:C(i,17)?o=17:C(a,17)?l=17:C(i,16)?o=16:C(a,16)?l=16:C(i,19)?l=a:C(a,19)&&(o=i));const[u,p]=[l,o];if(i=u,a=p,i?t=At(t,i):a&&(c=At(c,a)),La(e,t.type,c.type)(t,c,r))return!0}return!1})).X({default:()=>L.aa(),empty:()=>L.T()})))}(this.s,i,a,e)}})})}};function Ga(e,t,n,r){if(!C(n,53)||!C(r,53))throw Error("XPTY0004: Sequences to compare are not nodes");switch(e){case"isOp":return function(e,t){return e!==t||47!==e&&53!==e&&54!==e&&55!==e&&56!==e&&57!==e&&58!==e?()=>!1:(e,t)=>Ct(e.first().value,t.first().value)}(n,r);case"nodeBeforeOp":return t?(e,n)=>0>St(t,e.first(),n.first()):void 0;case"nodeAfterOp":return t?(e,n)=>0<St(t,e.first(),n.first()):void 0;default:throw Error("Unexpected operator")}}var ja=class extends tr{constructor(e,t,n){super(t.o.add(n.o),[t,n],{B:!1}),this.l=t,this.A=n,this.s=e}h(e,t){const n=er(this.l,e,t),r=er(this.A,e,t);return n.X({empty:()=>L.empty(),multiple:()=>{throw Error("XPTY0004: Sequences to compare are not singleton")},m:()=>r.X({empty:()=>L.empty(),multiple:()=>{throw Error("XPTY0004: Sequences to compare are not singleton")},m:()=>{const i=n.first(),a=r.first();return Ga(this.s,t.h,i.type,a.type)(n,r,e)?L.aa():L.T()}})})}};function Xa(e,t,n,r){return n.N((n=>{if(n.some((e=>!C(e.type,53))))throw Error(`XPTY0004: Sequences given to ${e} should only contain nodes.`);return"sorted"===r?L.create(n):"reverse-sorted"===r?L.create(n.reverse()):L.create(Bt(t,n))}))}var qa=class extends tr{constructor(e,t,n,r){super(0<gr(t.o,n.o)?t.o:n.o,[t,n],{B:t.B&&n.B},!1,r),this.l=e,this.s=t,this.A=n}h(e,t){const n=Xa(this.l,t.h,er(this.s,e,t),this.s.ia);e=Xa(this.l,t.h,er(this.A,e,t),this.A.ia);const r=n.value,i=e.value;let a=null,s=null,o=!1,l=!1;return L.create({next:()=>{if(o)return A;for(;!l;){if(!a){var e=r.next(0);if(e.done)return o=!0,A;a=e.value}if(!s){if((e=i.next(0)).done){l=!0;break}s=e.value}if(Ct(a.value,s.value)){if(e=_(a),s=a=null,"intersectOp"===this.l)return e}else if(0>St(t.h,a,s)){if(e=_(a),a=null,"exceptOp"===this.l)return e}else s=null}return"exceptOp"===this.l?null!==a?(e=_(a),a=null,e):r.next(0):(o=!0,A)}})}},Va=class extends hr{constructor(e,t){super(e.reduce(((e,t)=>e.add(t.o)),new yr({})),e,{R:"unsorted",B:e.every((e=>e.B))},t)}A(e,t,n){return n.length?Je(n.map((t=>t(e)))):L.empty()}},za=class extends tr{constructor(e,t,n){super(new yr({}).add(e.o),[e,t],{B:e.B&&t.B},!1,n),this.l=e,this.s=t}h(e,t){const n=je(e,er(this.l,e,t));let r=null,i=null,a=!1;return L.create({next:e=>{for(;!a;){if(!r&&(r=n.next(e),r.done))return a=!0,A;i||=er(this.s,r.value,t);const s=i.value.next(e);if(!s.done)return s;r=i=null}}})}},Ya=class extends tr{constructor(e,t,n){if(super(e.o,[e],{B:!1}),this.l=B(t.prefix?`${t.prefix}:${t.localName}`:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: castable as expressions with a namespace URI.");this.A=e,this.s=n}h(e,t){const n=rt(er(this.A,e,t),t);return n.X({empty:()=>this.s?L.aa():L.T(),m:()=>n.map((e=>xt(e,this.l).u?b:w)),multiple:()=>L.T()})}},Ka=class extends tr{constructor(e,t,n){if(super(e.o,[e],{B:!1}),this.l=B(t.prefix?`${t.prefix}:${t.localName}`:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: casting expressions with a namespace URI.");this.A=e,this.s=n}h(e,t){const n=rt(er(this.A,e,t),t);return n.X({empty:()=>{if(!this.s)throw Error("XPTY0004: Sequence to cast is empty while target type is singleton.");return L.empty()},m:()=>n.map((e=>At(e,this.l))),multiple:()=>{throw Error("XPTY0004: Sequence to cast is not singleton or empty.")}})}};function Ja(e,t){const n=e.value;let r=null,i=!1;return L.create({next:()=>{for(;!i;){if(!r){var e=n.next(0);if(e.done)return i=!0,_(b);r=t(e.value)}if(e=r.fa(),r=null,!1===e)return i=!0,_(w)}return A}})}var Wa=class extends tr{constructor(e,t,n,r){super(e.o,[e],{B:!1},!1,r),this.A=e,this.s=t,this.l=n}h(e,t){const n=er(this.A,e,t);return n.X({empty:()=>"?"===this.l||"*"===this.l?L.aa():L.T(),multiple:()=>"+"===this.l||"*"===this.l?Ja(n,(n=>{const r=L.m(n);return n=Ge(e,0,n,r),er(this.s,n,t)})):L.T(),m:()=>Ja(n,(n=>{const r=L.m(n);return n=Ge(e,0,n,r),er(this.s,n,t)}))})}};function Qa(e,t){return!(null===e||null===t||!C(e.type,53)||!C(t.type,53))&&Ct(e.value,t.value)}function Za(e){let t=e.next(0);if(t.done)return L.empty();let n=null,r=null;return L.create({next(i){if(t.done)return A;let a;n||(n=t.value.value);do{if(a=n.next(i),a.done){if(t=e.next(0),t.done)return a;n=t.value.value}}while(a.done||Qa(a.value,r));return r=a.value,a}})}function es(e,t){const n=[];!function(){for(var e=t.next(0);!e.done;){const r=e.value.value;e={current:r.next(0),next:e=>r.next(e)},e.current.done||n.push(e),e=t.next(0)}}();let r=null,i=!1;return L.create({[Symbol.iterator](){return this},next:()=>{let t;i||(i=!0,n.every((e=>C(e.current.value.type,53)))&&n.sort(((t,n)=>St(e,t.current.value,n.current.value))));do{if(!n.length)return A;const r=n.shift();if(t=r.current,r.current=r.next(0),!C(t.value.type,53))return t;if(!r.current.done){let t=0,i=n.length-1,a=0;for(;t<=i;){a=Math.floor((t+i)/2);const s=St(e,r.current.value,n[a].current.value);if(0===s){t=a;break}0<s?t=a+1:i=a-1}n.splice(t,0,r)}}while(Qa(t.value,r));return r=t.value,t}})}var ts=class extends tr{constructor(e,t){super(e.reduce(((e,t)=>0<gr(e,t.o)?e:t.o),new yr({})),e,{B:e.every((e=>e.B))},!1,t),this.l=e}h(e,t){if(this.l.every((e=>"sorted"===e.ia))){let n=0;return es(t.h,{next:()=>n>=this.l.length?A:_(er(this.l[n++],e,t))}).map((e=>{if(!C(e.type,53))throw Error("XPTY0004: The sequences to union are not of type node()*");return e}))}return Je(this.l.map((n=>er(n,e,t)))).N((e=>{if(e.some((e=>!C(e.type,53))))throw Error("XPTY0004: The sequences to union are not of type node()*");return e=Bt(t.h,e),L.create(e)}))}};function ns(e){return e.every((e=>null===e||C(e.type,5)||C(e.type,4)))||null!==e.map((e=>e?it(e.type):null)).reduce(((e,t)=>null===t||t===e?e:null))?e:e.every((e=>null===e||C(e.type,1)||C(e.type,20)))?e.map((e=>e?At(e,1):null)):e.every((e=>null===e||C(e.type,4)||C(e.type,6)))?e.map((e=>e?At(e,6):e)):e.every((e=>null===e||C(e.type,4)||C(e.type,6)||C(e.type,3)))?e.map((e=>e?At(e,3):e)):null}var rs=class extends Ea{constructor(e,t){super(new yr({}),[t,...e.map((e=>e.ba))],{B:!1,W:!1,R:"unsorted",subtree:!1},t),this.A=e}L(e,t,n,r){if(this.A[1])throw Error("More than one order spec is not supported for the order by clause.");const i=[];let a,s,o=!1,l=null;const c=this.A[0];return L.create({next:()=>{if(!o){for(var u=t.next(0);!u.done;)i.push(u.value),u=t.next(0);if(u=i.map((e=>c.ba.h(e,n))).map((e=>rt(e,n))),u.find((e=>!e.F()&&!e.oa())))throw Error("XPTY0004: Order by only accepts empty or singleton sequences");if(a=u.map((e=>e.first())),a=a.map((e=>null===e?e:C(19,e.type)?At(e,1):e)),function(e){return(e=e.find((e=>!!e)))?it(e.type):null}(a)&&(a=ns(a),!a))throw Error("XPTY0004: Could not cast values");u=a.length,s=a.map(((e,t)=>t));for(let t=0;t<u;t++)if(t+1!==u)for(let n=t;0<=n;n--){const t=n,r=n+1;if(r===u)continue;const i=a[s[t]],o=a[s[r]];if(null!==o||null!==i){if(c.bc){if(null===i)continue;if(null===o&&null!==i){[s[t],s[r]]=[s[r],s[t]];continue}if(isNaN(o.value)&&null!==i&&!isNaN(i.value)){[s[t],s[r]]=[s[r],s[t]];continue}}else{if(null===o)continue;if(null===i&&null!==o){[s[t],s[r]]=[s[r],s[t]];continue}if(isNaN(i.value)&&null!==o&&!isNaN(o.value)){[s[t],s[r]]=[s[r],s[t]];continue}}La("gtOp",i.type,o.type)(i,o,e)&&([s[t],s[r]]=[s[r],s[t]])}}let p=c.Bb?0:a.length-1;l=r({next:()=>c.Bb?p>=a.length?A:_(i[s[p++]]):0>p?A:_(i[s[p--]])}).value,o=!0}return l.next(0)}})}},is=class extends tr{constructor(e){super(e?e.o:new yr({}),e?[e]:[],{R:"sorted",subtree:!1,W:!1,B:!1}),this.l=e}h(e,t){if(null===e.M)throw Qe("context is absent, it needs to be present to use paths.");var n=t.h;let r=e.M.value;for(;9!==r.node.nodeType;)if(r=ne(n,r),null===r)throw Error("XPDY0050: the root node of the context node is not a document node.");return n=L.m(ce(r)),this.l?er(this.l,Ge(e,0,n.first(),n),t):n}},as=class extends tr{constructor(e){super(new yr({}),[],{R:"sorted"},!1,e)}h(e){if(null===e.M)throw Qe('context is absent, it needs to be present to use the "." operator');return L.m(e.M)}};var ss=class extends tr{constructor(e,t){const n=e.every((e=>e.W)),r=e.every((e=>e.subtree));super(e.reduce(((e,t)=>e.add(t.o)),new yr({})),e,{B:!1,W:n,R:t?"sorted":"unsorted",subtree:r}),this.l=e,this.s=t}h(e,t){let n=!0;return this.l.reduce(((r,i,a)=>{const s=null===r?_t(e):je(e,r);let o;if(r={next:e=>{if((e=s.next(e)).done)return A;if(null!==e.value.M&&!C(e.value.M.type,53)&&0<a)throw Error("XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.");return _(er(i,e.value,t))}},this.s)switch(i.ia){case"reverse-sorted":const e=r;r={next:t=>(t=e.next(t)).done?t:_(t.value.N((e=>L.create(e.reverse()))))};case"sorted":if(i.subtree&&n){o=Za(r);break}o=es(t.h,r);break;case"unsorted":return Za(r).N((e=>L.create(function(e,t){let n=!1,r=!1;if(t.forEach((e=>{C(e.type,53)?n=!0:r=!0})),r&&n)throw Error("XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.");return n?Bt(e,t):t}(t.h,e))))}else o=Za(r);return n=n&&i.W,o}),null)}D(){return this.l[0].D()}},os=class extends tr{constructor(e,t){super(e.o.add(t.o),[e,t],{B:e.B&&t.B,W:e.W,R:e.ia,subtree:e.subtree}),this.s=e,this.l=t}h(e,t){const n=er(this.s,e,t);if(this.l.B){const r=er(this.l,e,t);if(r.F())return r;const i=r.first();if(C(i.type,2)){let e=i.value;if(!Number.isInteger(e))return L.empty();const t=n.value;let r=!1;return L.create({next:()=>{if(!r){for(let n=t.next(0);!n.done;n=t.next(0))if(1==e--)return r=!0,n;r=!0}return A}})}return r.fa()?n:L.empty()}const r=n.value;let i=null,a=0,s=null;return L.create({next:o=>{let l=!1;for(;(!i||!i.done)&&(i||(i=r.next(l?0:o),l=!0),!i.done);){s||=er(this.l,Ge(e,a,i.value,n),t);var c=s.first();c=null!==c&&(C(c.type,2)?c.value===a+1:s.fa()),s=null;const r=i.value;if(i=null,a++,c)return _(r)}return i}})}D(){return this.s.D()}};function ls(e,t,n){if(n=[n],C(e.type,62))if("*"===t)n.push(...e.h.map((e=>e())));else{if(!C(t.type,5))throw Error("XPTY0004: The key specifier is not an integer.");{const r=t.value;if(e.h.length<r||0>=r)throw Error("FOAY0001: Array index out of bounds");n.push(e.h[r-1]())}}else{if(!C(e.type,61))throw Error("XPTY0004: The provided context item is not a map or an array.");"*"===t?n.push(...e.h.map((e=>e.value()))):(e=e.h.find((e=>pe(e.key,t))))&&n.push(e.value())}return Je(n)}function cs(e,t,n,r,i){return"*"===t?ls(e,t,n):(t=$(t=er(t,r,i))().N((t=>t.reduce(((t,n)=>ls(e,n,t)),new N))),Je([n,t]))}var us=class extends tr{constructor(e,t){super(e.o,[e].concat("*"===t?[]:[t]),{B:e.B,R:e.ia,subtree:e.subtree}),this.l=e,this.s=t}h(e,t){return er(this.l,e,t).N((n=>n.reduce(((n,r)=>cs(r,this.s,n,e,t)),new N)))}D(){return this.l.D()}},ps=class extends tr{constructor(e,t){super(new yr({external:1}),"*"===e?[]:[e],{B:!1},!1,t),this.l=e}h(e,t){return cs(e.M,this.l,new N,e,t)}},ds=class extends tr{constructor(e,t,n,r){const i=t.map((e=>e.fb));t=t.map((e=>e.name)),super(i.reduce(((e,t)=>e.add(t.o)),n.o),i.concat(n),{B:!1},!1,r),this.s=e,this.A=t,this.L=i,this.P=n,this.l=null}h(e,t){let n=e;const r=this.l.map(((r,i)=>{const a=er(this.L[i],n,t).O();return n=ze(e,{[r]:()=>L.create(a)}),a}));if(r.some((e=>0===e.length)))return"every"===this.s?L.aa():L.T();const i=Array(r.length).fill(0);i[0]=-1;for(var a=!0;a;){a=!1;for(let n=0,o=i.length;n<o;++n){var s=r[n];if(!(++i[n]>s.length-1)){for(a=Object.create(null),s=0;s<i.length;s++){const e=r[s][i[s]];a[this.l[s]]=()=>L.m(e)}if(a=ze(e,a),(a=er(this.P,a,t)).fa()&&"some"===this.s)return L.aa();if(!a.fa()&&"every"===this.s)return L.T();a=!0;break}i[n]=0}}return"every"===this.s?L.aa():L.T()}v(e){this.l=[];for(let n=0,r=this.A.length;n<r;++n){this.L[n].v(e),mi(e);var t=this.A[n];const r=t.prefix?e.$(t.prefix):null;t=yi(e,r,t.localName),this.l[n]=t}this.P.v(e);for(let t=0,n=this.A.length;t<n;++t)wi(e)}},hs=class extends tr{constructor(e){super(e,[],{B:!1})}h(e){return this.l(e.M)?L.aa():L.T()}},ms=class extends hs{constructor(e){super(new yr({nodeType:1})),this.s=e}l(e){return!!C(e.type,53)&&(e=e.value.node.nodeType,3===this.s&&4===e||this.s===e)}D(){return`type-${this.s}`}},fs=class extends hs{constructor(e,t={kind:null}){const n=e.prefix,r=e.namespaceURI,i={};"*"!==(e=e.localName)&&(i.nodeName=1),i.nodeType=1,super(new yr(i)),this.s=e,this.L=r,this.A=n,this.P=t.kind}l(e){const t=C(e.type,54),n=C(e.type,47);return!(!t&&!n)&&(e=e.value,!(null!==this.P&&(1===this.P&&!t||2===this.P&&!n))&&(null===this.A&&""!==this.L&&"*"===this.s||("*"===this.A?"*"===this.s||this.s===e.node.localName:("*"===this.s||this.s===e.node.localName)&&(e.node.namespaceURI||null)===((""===this.A?t?this.L:null:this.L)||null))))}D(){return"*"===this.s?null===this.P?"type-1-or-type-2":`type-${this.P}`:`name-${this.s}`}v(e){if(null===this.L&&"*"!==this.A&&(this.L=e.$(this.A||"")||null,!this.L&&this.A))throw Error(`XPST0081: The prefix ${this.A} could not be resolved.`)}},gs=class extends hs{constructor(e){super(new yr({nodeName:1})),this.s=e}l(e){return C(e.type,57)&&e.value.node.target===this.s}D(){return"type-7"}},ys=class extends hs{constructor(e){super(new yr({})),this.s=e}l(e){return C(e.type,B(this.s.prefix?this.s.prefix+":"+this.s.localName:this.s.localName))}},bs=class extends tr{constructor(e,t,n){super(new yr({}),[],{B:!1,R:"unsorted"}),this.A=n,this.s=t,this.L=e,this.l=null}h(e,t){if(!e.ra[this.l]){if(this.P)return this.P(e,t);throw Error("XQDY0054: The variable "+this.A+" is declared but not in scope.")}return e.ra[this.l]()}v(e){if(null===this.s&&this.L&&(this.s=e.$(this.L)),this.l=e.eb(this.s||"",this.A),!this.l)throw Error("XPST0008, The variable "+this.A+" is not in scope.");(e=e.Ea[this.l])&&(this.P=e)}},ws=class extends Ea{constructor(e,t){super(new yr({}),[e,t],{B:!1,W:!1,R:"unsorted",subtree:!1},t),this.A=e}L(e,t,n,r){let i=null,a=null;return r({next:()=>{for(;;){if(!a){var e=t.next(0);if(e.done)return A;i=e.value,a=er(this.A,i,n)}e=a.fa();const r=i;if(a=i=null,e)return _(r)}}})}},vs=class{constructor(e){this.type=e}},xs=class extends vs{constructor(e){super("delete"),this.target=e}h(e){return{type:this.type,target:Hr(this.target,e,!1)}}},As=class extends vs{constructor(e,t,n){super(n),this.target=e,this.content=t}h(e){return{type:this.type,target:Hr(this.target,e,!1),content:this.content.map((t=>Hr(t,e,!0)))}}},_s=class extends As{constructor(e,t){super(e,t,"insertAfter")}},Es=class extends vs{constructor(e,t){super("insertAttributes"),this.target=e,this.content=t}h(e){return{type:this.type,target:Hr(this.target,e,!1),content:this.content.map((t=>Hr(t,e,!0)))}}},Cs=class extends As{constructor(e,t){super(e,t,"insertBefore")}},Ns=class extends As{constructor(e,t){super(e,t,"insertIntoAsFirst")}},Ts=class extends As{constructor(e,t){super(e,t,"insertIntoAsLast")}},ks=class extends As{constructor(e,t){super(e,t,"insertInto")}},Is=class extends vs{constructor(e,t){super("rename"),this.target=e,this.o=t.za?t:new U(t.prefix,t.namespaceURI,t.localName)}h(e){return{type:this.type,target:Hr(this.target,e,!1),newName:{prefix:this.o.prefix,namespaceURI:this.o.namespaceURI,localName:this.o.localName}}}},Ss=class extends vs{constructor(e,t){super("replaceElementContent"),this.target=e,this.text=t}h(e){return{type:this.type,target:Hr(this.target,e,!1),text:this.text?Hr(this.text,e,!0):null}}},Bs=class extends vs{constructor(e,t){super("replaceNode"),this.target=e,this.o=t}h(e){return{type:this.type,target:Hr(this.target,e,!1),replacement:this.o.map((t=>Hr(t,e,!0)))}}},Os=class extends vs{constructor(e,t){super("replaceValue"),this.target=e,this.o=t}h(e){return{type:this.type,target:Hr(this.target,e,!1),"string-value":this.o}}},Fs=(e,t)=>new Bs(e,t),Ps=class extends pr{constructor(e){super(new yr({}),[e],{B:!1,R:"unsorted"}),this.l=e}s(e,t){const n=ur(this.l)(e,t),r=t.h;let i,a;return{next:()=>{if(!i){const e=n.next(0);if(e.value.J.some((e=>!C(e.type,53))))throw Error("XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.");i=e.value.J,a=e.value.da}return i=i.filter((e=>ne(r,e.value))),_({da:cr(i.map((e=>new xs(e.value))),a),J:[]})}}}};function Ds(e,t,n,r,i,a){const s=t.h;return e.reduce((function e(t,n){return C(n.type,62)?(n.h.forEach((n=>n().O().forEach((n=>e(t,n))))),t):(t.push(n),t)}),[]).forEach(((e,o,l)=>{if(C(e.type,47)){if(i)throw a(e.value,s);n.push(e.value.node)}else if(C(e.type,46)||C(e.type,53)&&3===e.value.node.nodeType){const n=C(e.type,46)?At(nt(e,t).first(),1).value:Z(s,e.value);0!==o&&C(l[o-1].type,46)&&C(e.type,46)?(r.push({data:" "+n,Ra:!0,nodeType:3}),i=!0):n&&(r.push({data:""+n,Ra:!0,nodeType:3}),i=!0)}else if(C(e.type,55)){const o=[];Q(s,e.value).forEach((e=>o.push(ce(e)))),i=Ds(o,t,n,r,i,a)}else{if(!C(e.type,53)){if(C(e.type,60))throw et(e.type);throw Error(`Atomizing ${e.type} is not implemented.`)}r.push(e.value.node),i=!0}})),i}function Rs(e,t,n){const r=[],i=[];let a=!1;return e.forEach((e=>{a=Ds(e,t,r,i,a,n)})),{attributes:r,Xa:i}}function Ms(e,t,n,r,i){const a=[];switch(e){case 4:r.length&&a.push(new Es(t,r)),i.length&&a.push(new Ns(t,i));break;case 5:r.length&&a.push(new Es(t,r)),i.length&&a.push(new Ts(t,i));break;case 3:r.length&&a.push(new Es(t,r)),i.length&&a.push(new ks(t,i));break;case 2:r.length&&a.push(new Es(n,r)),i.length&&a.push(new Cs(t,i));break;case 1:r.length&&a.push(new Es(n,r)),i.length&&a.push(new _s(t,i))}return a}var Ls=class extends pr{constructor(e,t,n){super(new yr({}),[e,n],{B:!1,R:"unsorted"}),this.L=e,this.l=t,this.A=n}s(e,t){const n=ur(this.L)(e,t),r=ur(this.A)(e,t),i=t.h;let a,s,o,l,c,u;return{next:()=>{if(!a){var e=n.next(0);const r=Rs([e.value.J],t,Xn);a=r.attributes.map((e=>({node:e,G:null}))),s=r.Xa.map((e=>({node:e,G:null}))),o=e.value.da}if(!l){if(0===(e=r.next(0)).value.J.length)throw Zn();if(3<=this.l){if(1!==e.value.J.length)throw qn();if(!C(e.value.J[0].type,54)&&!C(e.value.J[0].type,55))throw qn()}else{if(1!==e.value.J.length)throw Vn();if(!(C(e.value.J[0].type,54)||C(e.value.J[0].type,56)||C(e.value.J[0].type,58)||C(e.value.J[0].type,57)))throw Vn();if(u=ne(i,e.value.J[0].value,null),null===u)throw Error(`XUDY0029: The target ${e.value.J[0].value.outerHTML} for inserting a node before or after must have a parent.`)}l=e.value.J[0],c=e.value.da}if(a.length){if(3<=this.l){if(!C(l.type,54))throw Error("XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.")}else if(1!==u.node.nodeType)throw Error("XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.");a.reduce(((e,t)=>{const n=t.node.prefix||"";var r=t.node.prefix||"";const i=t.node.namespaceURI,a=r?l.value.node.lookupNamespaceURI(r):null;if(a&&a!==i)throw Wn(i);if((r=e[r])&&i!==r)throw Qn(i);return e[n]=t.node.namespaceURI,e}),{})}return _({J:[],da:cr(Ms(this.l,l.value,u||null,a,s),o,c)})}}}};const $s=()=>Ze("Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types."),Us=/([A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])/,Hs=new RegExp(`${Us.source}${new RegExp(`(${Us.source}|[-.0-9-])`).source}*`,"g"),Gs=e=>!!(e=e.match(Hs))&&1===e.length;function js(e,t){return rt(t,e).X({m:e=>{if(C((e=e.first()).type,1)||C(e.type,19)){if(!Gs(e.value))throw Error(`XQDY0041: The value "${e.value}" of a name expressions cannot be converted to a NCName.`);return L.m(e)}throw $s()},default:()=>{throw $s()}}).value}function Xs(e,t,n){return rt(n,t).X({m:t=>{if(C((t=t.first()).type,23))return L.m(t);if(C(t.type,1)||C(t.type,19)){let n,r;if(1===(t=t.value.split(":")).length?t=t[0]:(n=t[0],r=e.$(n),t=t[1]),!Gs(t)||n&&!Gs(n))throw ci(n?`${n}:${t}`:t);if(n&&!r)throw ci(`${n}:${t}`);return L.m({type:23,value:new U(n,r,t)})}throw $s()},default:()=>{throw $s()}}).value}var qs=class extends pr{constructor(e,t){super(new yr({}),[e,t],{B:!1,R:"unsorted"}),this.A=e,this.L=t,this.l=void 0}s(e,t){const n=ur(this.A)(e,t),r=ur(this.L)(e,t);return{next:()=>{const e=n.next(0);var i=e.value.J;if(0===i.length)throw Zn();if(1!==i.length)throw Yn();if(!C(i[0].type,54)&&!C(i[0].type,47)&&!C(i[0].type,57))throw Yn();i=i[0];const a=r.next(0);e:{var s=this.l,o=L.create(a.value.J);switch(i.type){case 54:if(s=Xs(s,t,o).next(0).value.value,(o=i.value.node.lookupNamespaceURI(s.prefix))&&o!==s.namespaceURI)throw Wn(s.namespaceURI);break e;case 47:if((s=Xs(s,t,o).next(0).value.value).namespaceURI&&(o=i.value.node.lookupNamespaceURI(s.prefix))&&o!==s.namespaceURI)throw Wn(s.namespaceURI);break e;case 57:s=js(t,o).next(0).value.value,s=new U("",null,s);break e}s=void 0}return _({J:[],da:cr([new Is(i.value,s)],e.value.da,a.value.da)})}}}v(e){this.l=hi(e),super.v(e)}};var Vs=class extends pr{constructor(e,t,n){super(new yr({}),[t,n],{B:!1,R:"unsorted"}),this.L=e,this.l=t,this.A=n}s(e,t){const n=ur(this.l)(e,t);return e=ur(this.A)(e,t),this.L?function(e,t,n){let r,i,a,s,o=!1;return{next:()=>{if(o)return A;if(!a){var l=n.next(0);const t=rt(L.create(l.value.J),e).map((e=>At(e,1))).O().map((e=>e.value)).join(" ");a=0===t.length?null:{node:e.Ja.createTextNode(t),G:null},s=l.value.da}if(!r){if(0===(l=t.next(0)).value.J.length)throw Zn();if(1!==l.value.J.length)throw zn();if(!(C(l.value.J[0].type,54)||C(l.value.J[0].type,47)||C(l.value.J[0].type,56)||C(l.value.J[0].type,58)||C(l.value.J[0].type,57)))throw zn();r=l.value.J[0],i=l.value.da}if(C(r.type,54))return o=!0,_({J:[],da:cr([new Ss(r.value,a)],s,i)});if(C(r.type,47)||C(r.type,56)||C(r.type,58)||C(r.type,57)){if(l=a?Z(e.h,a):"",C(r.type,58)&&(l.includes("--")||l.endsWith("-")))throw Error(`XQDY0072: The content "${l}" for a comment node contains two adjacent hyphens or ends with a hyphen.`);if(C(r.type,57)&&l.includes("?>"))throw Error(`XQDY0026: The content "${l}" for a processing instruction node contains "?>".`);return o=!0,_({J:[],da:cr([new Os(r.value,l)],s,i)})}}}}(t,n,e):function(e,t,n){let r,i,a;return{next:()=>{if(!r){var s=n.next(0),o=Rs([s.value.J],e,Qn);r={attributes:o.attributes.map((e=>({node:e,G:null}))),Xa:o.Xa.map((e=>({node:e,G:null})))},i=s.value.da}if(0===(o=t.next(0)).value.J.length)throw Zn();if(1!==o.value.J.length)throw zn();if(!(C(o.value.J[0].type,54)||C(o.value.J[0].type,47)||C(o.value.J[0].type,56)||C(o.value.J[0].type,58)||C(o.value.J[0].type,57)))throw zn();if(a=ne(e.h,o.value.J[0].value,null),null===a)throw Error(`XUDY0009: The target ${o.value.J[0].value.outerHTML} for replacing a node must have a parent.`);if(s=o.value.J[0],o=o.value.da,C(s.type,47)){if(r.Xa.length)throw Error("XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.");r.attributes.reduce(((e,t)=>{const n=t.node.prefix||"";t=t.node.namespaceURI;var r=a.node.lookupNamespaceURI(n);if(r&&r!==t)throw Wn(t);if((r=e[n])&&t!==r)throw Qn(t);return e[n]=t,e}),{})}else if(r.attributes.length)throw Error("XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.");return _({J:[],da:cr([Fs(s.value,[].concat(r.attributes,r.Xa))],i,o)})}}}(t,n,e)}};function zs(e){switch(e.type){case"delete":return new xs({node:e.target,G:null});case"insertAfter":return new _s({node:e.target,G:null},e.content.map((e=>({node:e,G:null}))));case"insertBefore":return new Cs({node:e.target,G:null},e.content.map((e=>({node:e,G:null}))));case"insertInto":return new ks({node:e.target,G:null},e.content.map((e=>({node:e,G:null}))));case"insertIntoAsFirst":return new Ns({node:e.target,G:null},e.content.map((e=>({node:e,G:null}))));case"insertIntoAsLast":return new Ts({node:e.target,G:null},e.content.map((e=>({node:e,G:null}))));case"insertAttributes":return new Es({node:e.target,G:null},e.content.map((e=>({node:e,G:null}))));case"rename":return new Is({node:e.target,G:null},e.newName);case"replaceNode":return new Bs({node:e.target,G:null},e.replacement.map((e=>({node:e,G:null}))));case"replaceValue":return new Os({node:e.target,G:null},e["string-value"]);case"replaceElementContent":return new Ss({node:e.target,G:null},e.text?{node:e.text,G:null}:null);default:throw Error(`Unexpected type "${e.type}" when parsing a transferable pending update.`)}}function Ys(e,t,n){if(t.find((t=>Ct(t,e))))return!0;const r=ne(n,e);return!!r&&Ys(r,t,n)}var Ks=class extends pr{constructor(e,t,n){super(new yr({}),e.reduce(((e,t)=>(e.push(t.fb),e)),[t,n]),{B:!1,R:"unsorted"}),this.l=e,this.L=t,this.A=n,this.I=null}h(e,t){return dr(e=this.s(e,t),(()=>{}))}s(e,t){const n=t.h,r=t.Ja,i=t.Ma,a=[];let s,o,l;const c=[],u=[];return{next:()=>{if(c.length!==this.l.length)for(var p=c.length;p<this.l.length;p++){const n=this.l[p];var d=a[p];if(d||(a[p]=d=ur(n.fb)(e,t)),1!==(d=d.next(0)).value.J.length||!C(d.value.J[0].type,53))throw Error("XUTY0013: The source expression of a copy modify expression must return a single node.");const r=ce($r(d.value.J[0].value,t));c.push(r.value),u.push(d.value.da),e=ze(e,{[n.fc]:()=>L.m(r)})}return l||(s||=ur(this.L)(e,t),l=s.next(0).value.da),l.forEach((e=>{if(e.target&&!Ys(e.target,c,n))throw Error(`XUDY0014: The target ${e.target.node.outerHTML} must be a node created by the copy clause.`);if("put"===e.type)throw Error("XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.")})),p=l.map((e=>zs(e=e.h(t)))),or(p,n,r,i),o||=ur(this.A)(e,t),_({J:(p=o.next(0)).value.J,da:cr(p.value.da,...u)})}}}v(e){mi(e),this.l.forEach((t=>t.fc=yi(e,t.Jb.namespaceURI,t.Jb.localName))),super.v(e),wi(e),this.I=this.l.some((e=>e.fb.I))||this.A.I}};function Js(e,t){return{node:{nodeType:2,Ra:!0,nodeName:e.za(),namespaceURI:e.namespaceURI,prefix:e.prefix,localName:e.localName,name:e.za(),value:t},G:null}}var Ws=class extends tr{constructor(e,t){let n=t.nb||[];n=n.concat(e.Na||[]),super(new yr({}),n,{B:!1,R:"unsorted"}),e.Na?this.s=e.Na:this.name=new U(e.prefix,e.namespaceURI,e.localName),this.l=t,this.A=void 0}h(e,t){let n,r,i,a=!1;return L.create({next:()=>{if(a)return A;if(!r){if(this.s){if(!n){var s=this.s.h(e,t);n=Xs(this.A,t,s)}r=n.next(0).value.value}else r=this.name;if(r){if("xmlns"===r.prefix)throw ri(r);if(""===r.prefix&&"xmlns"===r.localName)throw ri(r);if("http://www.w3.org/2000/xmlns/"===r.namespaceURI)throw ri(r);if("xml"===r.prefix&&"http://www.w3.org/XML/1998/namespace"!==r.namespaceURI)throw ri(r);if(""!==r.prefix&&"xml"!==r.prefix&&"http://www.w3.org/XML/1998/namespace"===r.namespaceURI)throw ri(r)}}return this.l.nb?(s=this.l.nb,i||(i=Je(s.map((n=>rt(n.h(e,t),t).N((e=>L.m(y(e.map((e=>e.value)).join(" "),1))))))).N((e=>L.m(ce(Js(r,e.map((e=>e.value)).join("")))))).value),i.next(0)):(a=!0,_(ce(Js(r,this.l.value))))}})}v(e){if(this.A=hi(e),this.name&&this.name.prefix&&!this.name.namespaceURI){const t=e.$(this.name.prefix);if(void 0===t&&this.name.prefix)throw tt(this.name.prefix);this.name.namespaceURI=t||null}super.v(e)}},Qs=class extends tr{constructor(e){super(e?e.o:new yr({}),e?[e]:[],{B:!1,R:"unsorted"}),this.l=e}h(e,t){const n={data:"",Ra:!0,nodeType:8},r={node:n,G:null};return this.l?rt(e=er(this.l,e,t),t).N((e=>{if(e=e.map((e=>At(e,1).value)).join(" "),-1!==e.indexOf("--\x3e"))throw Error('XQDY0072: The contents of the data of a comment may not include "--\x3e"');return n.data=e,L.m(ce(r))})):L.m(ce(r))}},Zs=class extends tr{constructor(e,t,n,r){super(new yr({}),r.concat(t).concat(e.Na||[]),{B:!1,R:"unsorted"}),e.Na?this.s=e.Na:this.l=new U(e.prefix,e.namespaceURI,e.localName),this.P=n.reduce(((e,t)=>{if(t.prefix in e)throw Error(`XQST0071: The namespace declaration with the prefix ${t.prefix} has already been declared on the constructed element.`);return e[t.prefix||""]=t.uri,e}),{}),this.L=t,this.ma=r,this.A=void 0}h(e,t){let n,r,i,a,s,o=!1,l=!1,c=!1;return L.create({next:()=>{if(c)return A;if(o||(n||=Je(this.L.map((n=>er(n,e,t)))),r=n.O(),o=!0),!l){i||=this.ma.map((n=>er(n,e,t)));for(var u=[],p=0;p<i.length;p++){var d=i[p].O();u.push(d)}a=u,l=!0}if(this.s&&(s||(u=this.s.h(e,t),s=Xs(this.A,t,u)),this.l=s.next(0).value.value),"xmlns"===this.l.prefix||"http://www.w3.org/2000/xmlns/"===this.l.namespaceURI||"xml"===this.l.prefix&&"http://www.w3.org/XML/1998/namespace"!==this.l.namespaceURI||this.l.prefix&&"xml"!==this.l.prefix&&"http://www.w3.org/XML/1998/namespace"===this.l.namespaceURI)throw Error(`XQDY0096: The node name "${this.l.za()}" is invalid for a computed element constructor.`);const h={nodeType:1,Ra:!0,attributes:[],childNodes:[],nodeName:this.l.za(),namespaceURI:this.l.namespaceURI,prefix:this.l.prefix,localName:this.l.localName};for(u={node:h,G:null},r.forEach((e=>{h.attributes.push(e.value.node)})),(p=Rs(a,t,ni)).attributes.forEach((e=>{if(h.attributes.find((t=>t.namespaceURI===e.namespaceURI&&t.localName===e.localName)))throw Error(`XQDY0025: The attribute ${e.name} does not have an unique name in the constructed element.`);h.attributes.push(e)})),p.Xa.forEach((e=>{h.childNodes.push(e)})),p=0;p<h.childNodes.length;p++){if(!Y(d=h.childNodes[p])||3!==d.nodeType)continue;const e=h.childNodes[p-1];e&&Y(e)&&3===e.nodeType&&(e.data+=d.data,h.childNodes.splice(p,1),p--)}return c=!0,_(ce(u))}})}v(e){if(mi(e),Object.keys(this.P).forEach((t=>gi(e,t,this.P[t]))),this.Fa.forEach((t=>t.v(e))),this.L.reduce(((t,n)=>{if(n.name){if(n=`Q{${null===n.name.namespaceURI?e.$(n.name.prefix):n.name.namespaceURI}}${n.name.localName}`,t.includes(n))throw Error(`XQST0040: The attribute ${n} does not have an unique name in the constructed element.`);t.push(n)}return t}),[]),this.l&&null===this.l.namespaceURI){const t=e.$(this.l.prefix);if(void 0===t&&this.l.prefix)throw tt(this.l.prefix);this.l.namespaceURI=t}this.A=hi(e),wi(e)}};function eo(e){if(/^xml$/i.test(e))throw Error(`XQDY0064: The target of a created PI may not be "${e}"`)}function to(e,t){return{node:{data:t,Ra:!0,nodeName:e,nodeType:7,target:e},G:null}}var no=class extends tr{constructor(e,t){const n=e.xb?[e.xb].concat(t):[t];super(n.reduce(((e,t)=>e.add(t.o)),new yr({})),n,{B:!1,R:"unsorted"}),this.l=e,this.s=t}h(e,t){return rt(er(this.s,e,t),t).N((n=>{const r=n.map((e=>At(e,1).value)).join(" ");if(-1!==r.indexOf("?>"))throw Error('XQDY0026: The contents of the data of a processing instruction may not include "?>"');if(null!==this.l.Fb)return eo(n=this.l.Fb),L.m(ce(to(n,r)));n=er(this.l.xb,e,t);const i=js(t,n);return L.create({next:()=>{var e=i.next(0);return e.done?e:(eo(e=e.value.value),_(ce(to(e,r))))}})}))}},ro=class extends tr{constructor(e){super(e?e.o:new yr({}),e?[e]:[],{B:!1,R:"unsorted"}),this.l=e}h(e,t){return this.l?rt(e=er(this.l,e,t),t).N((e=>0===e.length?L.empty():(e={node:{data:e.map((e=>At(e,1).value)).join(" "),Ra:!0,nodeType:3},G:null},L.m(ce(e))))):L.empty()}},io=class extends hr{constructor(e,t,n,r){super(new yr({}),[e,...t.map((e=>e.pb)),n].concat(...t.map((e=>e.Ib.map((e=>e.Hb))))),{B:!1,W:!1,R:"unsorted",subtree:!1},r),this.L=e,this.l=t.length,this.P=t.map((e=>e.Ib))}A(e,t,n){return n[0](e).N((r=>{for(let i=0;i<this.l;i++)if(this.P[i].some((n=>{switch(n.dc){case"?":if(1<r.length)return!1;break;case"*":break;case"+":if(1>r.length)return!1;break;default:if(1!==r.length)return!1}const i=L.create(r);return r.every(((r,a)=>(r=Ge(e,a,r,i),er(n.Hb,r,t).fa())))})))return n[i+1](e);return n[this.l+1](e)}))}v(e){if(super.v(e),this.L.I)throw jn()}},ao=class extends hr{constructor(e,t,n,r){super(new yr({}),[e,n,...t.map((e=>e.pb))].concat(...t.map((e=>e.Gb.map((e=>e))))),{B:!1,W:!1,R:"unsorted",subtree:!1},r),this.L=e,this.l=t.length,this.P=t.map((e=>e.Gb))}A(e,t,n){const r=Da(n[0](e),t),[,i,...a]=n;return r.X({multiple:()=>{throw Error("XPTY0004: The operand for a switch expression should result in zero or one item")},default:()=>{const n=r.first(),s=!n;for(let r=0;r<this.l;r++){var o=this.P[r].map((n=>er(n,e,t)));for(const i of o)if(o=Da(i,t),o.F()){if(s)return a[r](e)}else{if(!o.oa())throw Error("XPTY0004: The operand for a switch case should result in zero or one item");if(!s&&(o=o.first(),Hn(e,t,null,n,o).next(0).value))return a[r](e)}}return i(e)}})}v(e){if(super.v(e),this.L.I)throw jn()}},so={Z:!1,sa:!1},oo={Z:!0,sa:!1},lo={Z:!0,sa:!0};function co(e){return e.Z?e.sa?lo:oo:so}function uo(e,t){switch(e[0]){case"andOp":var n=_i(e,"type");return new Fa(ho("andOp",e,co(t)),n);case"orOp":return n=_i(e,"type"),new Pa(ho("orOp",e,co(t)),n);case"unaryPlusOp":return n=xi(xi(e,"operand"),"*"),e=_i(e,"type"),new Oa("+",uo(n,t),e);case"unaryMinusOp":return n=xi(xi(e,"operand"),"*"),e=_i(e,"type"),new Oa("-",uo(n,t),e);case"addOp":case"subtractOp":case"multiplyOp":case"divOp":case"idivOp":case"modOp":var r=e[0],i=uo(Ei(e,["firstOperand","*"]),co(t));t=uo(Ei(e,["secondOperand","*"]),co(t));const a=_i(e,"type"),s=_i(Ei(e,["firstOperand","*"]),"type"),o=_i(Ei(e,["secondOperand","*"]),"type");return s&&o&&_i(e,"type")&&(n=Pi(r,s.type,o.type)),new Mi(r,i,t,a,n);case"sequenceExpr":return function(e,t){var n=Ci(e,"*").map((e=>uo(e,t)));return 1===n.length?n[0]:(n=_i(e,"type"),new Va(Ci(e,"*").map((e=>uo(e,t))),n))}(e,t);case"unionOp":return n=_i(e,"type"),new ts([uo(Ei(e,["firstOperand","*"]),co(t)),uo(Ei(e,["secondOperand","*"]),co(t))],n);case"exceptOp":case"intersectOp":return n=_i(e,"type"),new qa(e[0],uo(Ei(e,["firstOperand","*"]),co(t)),uo(Ei(e,["secondOperand","*"]),co(t)),n);case"stringConcatenateOp":return function(e,t){const n=_i(e,"type");return e=[Ei(e,["firstOperand","*"]),Ei(e,["secondOperand","*"])],new Ar(new Sa({localName:"concat",namespaceURI:"http://www.w3.org/2005/xpath-functions",prefix:""},e.length,n),e.map((e=>uo(e,co(t)))),n)}(e,t);case"rangeSequenceExpr":return function(e,t){const n=_i(e,"type");e=[xi(xi(e,"startExpr"),"*"),xi(xi(e,"endExpr"),"*")];const r=new Sa({localName:"to",namespaceURI:"http://fontoxpath/operators",prefix:""},e.length,n);return new Ar(r,e.map((e=>uo(e,co(t)))),n)}(e,t);case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":return fo("generalCompare",e,t);case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":return fo("valueCompare",e,t);case"isOp":case"nodeBeforeOp":case"nodeAfterOp":return fo("nodeCompare",e,t);case"pathExpr":return function(e,t){const n=_i(e,"type");var r=Ci(e,"stepExpr");let i=!1;var a=r.map((e=>{var r=xi(e,"xpathAxis");let a;var s=Ci(e,"*");const o=[];let l=null,c=!1;for(const e of s)switch(e[0]){case"lookup":o.push(["lookup",mo(e,t)]);break;case"predicate":case"predicates":for(const n of Ci(e,"*")){if(s=uo(n,co(t)),!c){const e=s.D();null===e?c=!0:l=ia(l,e)}o.push(["predicate",s])}}if(r)switch(i=!0,e=xi(e,"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard".split(" ")),e=po(e),Ai(r)){case"ancestor":a=new na(e,{Qa:!1});break;case"ancestor-or-self":a=new na(e,{Qa:!0});break;case"attribute":a=new aa(e,l);break;case"child":a=new sa(e,l);break;case"descendant":a=new la(e,{Qa:!1});break;case"descendant-or-self":a=new la(e,{Qa:!0});break;case"parent":a=new ha(e,l);break;case"following-sibling":a=new da(e,l);break;case"preceding-sibling":a=new fa(e,l);break;case"following":a=new pa(e);break;case"preceding":a=new ma(e);break;case"self":a=new ga(e,l)}else a=uo(r=Ei(e,["filterExpr","*"]),co(t));for(const e of o)switch(e[0]){case"lookup":a=new us(a,e[1]);break;case"predicate":a=new os(a,e[1])}return a.type=n,a}));return e=xi(e,"rootExpr"),!(r=i||null!==e||1<r.length)&&1===a.length||!e&&1===a.length&&"sorted"===a[0].ia?a[0]:e&&0===a.length?new is(null):(a=new ss(a,r),e?new is(a):a)}(e,t);case"contextItemExpr":return new as(_i(e,"type"));case"functionCallExpr":return function(e,t){const n=xi(e,"functionName"),r=Ci(xi(e,"arguments"),"*");return e=_i(e,"type"),new Ar(new Sa(Ni(n),r.length,e),r.map((e=>"argumentPlaceholder"===e[0]?null:uo(e,t))),e)}(e,t);case"inlineFunctionExpr":return function(e,t){const n=Ci(xi(e,"paramList"),"*"),r=Ei(e,["functionBody","*"]),i=_i(e,"type");return new Na(n.map((e=>({name:Ni(xi(e,"varName")),type:Ti(e)}))),Ti(e),r?uo(r,t):new Va([],i))}(e,t);case"arrowExpr":return function(e,t){const n=_i(e,"type");var r=Ei(e,["argExpr","*"]);e=Ci(e,"*").slice(1),r=[uo(r,t)];for(let a=0;a<e.length;a++)if("arguments"!==e[a][0]){if("arguments"===e[a+1][0]){var i=Ci(e[a+1],"*");r=r.concat(i.map((e=>"argumentPlaceholder"===e[0]?null:uo(e,t))))}i="EQName"===e[a][0]?new Sa(Ni(e[a]),r.length,n):uo(e[a],co(t)),r=[new Ar(i,r,n)]}return r[0]}(e,t);case"dynamicFunctionInvocationExpr":return function(e,t){const n=Ei(e,["functionItem","*"]),r=_i(e,"type");e=xi(e,"arguments");let i=[];return e&&(i=Ci(e,"*").map((e=>"argumentPlaceholder"===e[0]?null:uo(e,t)))),new Ar(uo(n,t),i,r)}(e,t);case"namedFunctionRef":return t=xi(e,"functionName"),n=_i(e,"type"),e=Ai(Ei(e,["integerConstantExpr","value"])),new Sa(Ni(t),parseInt(e,10),n);case"integerConstantExpr":return new ka(Ai(xi(e,"value")),{type:5,g:3});case"stringConstantExpr":return new ka(Ai(xi(e,"value")),{type:1,g:3});case"decimalConstantExpr":return new ka(Ai(xi(e,"value")),{type:4,g:3});case"doubleConstantExpr":return new ka(Ai(xi(e,"value")),{type:3,g:3});case"varRef":const{prefix:l,namespaceURI:c,localName:u}=Ni(xi(e,"name"));return new bs(l,c,u);case"flworExpr":return function(e,t){var n=Ci(e,"*");if(e=xi(n[n.length-1],"*"),1<(n=n.slice(0,-1)).length&&!t.Z)throw Error("XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed");return n.reduceRight(((e,n)=>{switch(n[0]){case"forClause":for(var r=(n=Ci(n,"*")).length-1;0<=r;--r){var i=n[r],a=Ei(i,["forExpr","*"]);const s=xi(i,"positionalVariableBinding");e=new Ca(Ni(Ei(i,["typedVariableBinding","varName"])),uo(a,co(t)),s?Ni(s):null,e)}return e;case"letClause":for(r=(n=Ci(n,"*")).length-1;0<=r;--r)a=Ei(i=n[r],["letExpr","*"]),e=new Ta(Ni(Ei(i,["typedVariableBinding","varName"])),uo(a,co(t)),e);return e;case"whereClause":for(r=(n=Ci(n,"*")).length-1;0<=r;--r)e=new ws(uo(n[r],t),e);return e;case"windowClause":case"groupByClause":case"countClause":throw Error(`Not implemented: ${n[0]} is not implemented yet.`);case"orderByClause":return function(e,t,n){return e=Ci(e,"*"),new rs(e.filter((e=>"stable"!==e[0])).map((e=>{var n=xi(e,"orderModifier"),r=n?xi(n,"orderingKind"):null;return n=n?xi(n,"emptyOrderingMode"):null,r=!r||"ascending"===Ai(r),n=!n||"empty least"===Ai(n),{ba:uo(Ei(e,["orderByExpr","*"]),t),Bb:r,bc:n}})),n)}(n,t,e);default:throw Error(`Not implemented: ${n[0]} is not supported in a flwor expression`)}}),uo(e,t))}(e,t);case"quantifiedExpr":return function(e,t){const n=_i(e,"type"),r=Ai(xi(e,"quantifier")),i=Ei(e,["predicateExpr","*"]);return e=Ci(e,"quantifiedExprInClause").map((e=>({name:Ni(Ei(e,["typedVariableBinding","varName"])),fb:uo(e=Ei(e,["sourceExpr","*"]),co(t))}))),new ds(r,e,uo(i,co(t)),n)}(e,t);case"ifThenElseExpr":return n=_i(e,"type"),r=xi(e,"ifClause")||Ci(e,"x:stackTrace")[0],i=xi(e,"thenClause")||Ci(e,"x:stackTrace")[1],e=xi(e,"elseClause")||Ci(e,"x:stackTrace")[2],new ya(uo(r,co(t)),uo(i,t),uo(e,t),n);case"instanceOfExpr":return n=uo(Ei(e,["argExpr","*"]),t),r=Ei(e,["sequenceType","*"]),i=Ei(e,["sequenceType","occurrenceIndicator"]),e=_i(e,"type"),new Wa(n,uo(r,co(t)),i?Ai(i):"",e);case"castExpr":return t=uo(xi(xi(e,"argExpr"),"*"),co(t)),n=xi(e,"singleType"),e=Ni(xi(n,"atomicType")),n=null!==xi(n,"optional"),new Ka(t,e,n);case"castableExpr":return t=uo(xi(xi(e,"argExpr"),"*"),co(t)),n=xi(e,"singleType"),e=Ni(xi(n,"atomicType")),n=null!==xi(n,"optional"),new Ya(t,e,n);case"simpleMapExpr":return function(e,t){const n=_i(e,"type");return Ci(e,"*").reduce(((e,r)=>null===e?uo(r,co(t)):new za(e,uo(r,co(t)),n)),null)}(e,t);case"mapConstructor":return function(e,t){const n=_i(e,"type");return new Ia(Ci(e,"mapConstructorEntry").map((e=>({key:uo(Ei(e,["mapKeyExpr","*"]),co(t)),value:uo(Ei(e,["mapValueExpr","*"]),co(t))}))),n)}(e,t);case"arrayConstructor":return function(e,t){const n=_i(e,"type"),r=Ci(e=xi(e,"*"),"arrayElem").map((e=>uo(xi(e,"*"),co(t))));switch(e[0]){case"curlyArray":return new Zi(r,n);case"squareArray":return new ea(r,n);default:throw Error("Unrecognized arrayType: "+e[0])}}(e,t);case"unaryLookup":return n=_i(e,"type"),new ps(mo(e,t),n);case"typeswitchExpr":return function(e,t){if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");const n=_i(e,"type"),r=uo(xi(xi(e,"argExpr"),"*"),t),i=Ci(e,"typeswitchExprCaseClause").map((e=>{const n=0===Ci(e,"sequenceTypeUnion").length?[xi(e,"sequenceType")]:Ci(xi(e,"sequenceTypeUnion"),"sequenceType");return{pb:uo(Ei(e,["resultExpr","*"]),t),Ib:n.map((e=>{const n=xi(e,"occurrenceIndicator");return{dc:n?Ai(n):"",Hb:uo(xi(e,"*"),t)}}))}}));return e=uo(Ei(e,["typeswitchExprDefaultClause","resultExpr","*"]),t),new io(r,i,e,n)}(e,t);case"switchExpr":return function(e,t){if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");const n=_i(e,"type"),r=uo(xi(xi(e,"argExpr"),"*"),t),i=Ci(e,"switchExprCaseClause").map((e=>{const n=Ci(e,"switchCaseExpr");return{pb:uo(Ei(e,["resultExpr","*"]),t),Gb:n.map((e=>uo(xi(e,"*"),t)))}}));return e=uo(Ei(e,["switchExprDefaultClause","resultExpr","*"]),t),new ao(r,i,e,n)}(e,t);case"elementConstructor":return function(e,t){if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");const n=Ni(xi(e,"tagName"));var r=xi(e,"attributeList");const i=r?Ci(r,"attributeConstructor").map((e=>uo(e,co(t)))):[];return r=r?Ci(r,"namespaceDeclaration").map((e=>{const t=xi(e,"prefix");return{prefix:t?Ai(t):"",uri:Ai(xi(e,"uri"))}})):[],e=(e=xi(e,"elementContent"))?Ci(e,"*").map((e=>uo(e,co(t)))):[],new Zs(n,i,r,e)}(e,t);case"attributeConstructor":return function(e,t){if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");const n=Ni(xi(e,"attributeName"));var r=xi(e,"attributeValue");return r=r?Ai(r):null,e=(e=xi(e,"attributeValueExpr"))?Ci(e,"*").map((e=>uo(e,co(t)))):null,new Ws(n,{value:r,nb:e})}(e,t);case"computedAttributeConstructor":return(n=xi(e,"tagName"))?n=Ni(n):(n=xi(e,"tagNameExpr"),n={Na:uo(xi(n,"*"),co(t))}),t=uo(xi(xi(e,"valueExpr"),"*"),co(t)),new Ws(n,{nb:[t]});case"computedCommentConstructor":if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return t=(e=xi(e,"argExpr"))?uo(xi(e,"*"),co(t)):null,new Qs(t);case"computedTextConstructor":if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return t=(e=xi(e,"argExpr"))?uo(xi(e,"*"),co(t)):null,new ro(t);case"computedElementConstructor":return function(e,t){var n=xi(e,"tagName");return n?n=Ni(n):(n=xi(e,"tagNameExpr"),n={Na:uo(xi(n,"*"),co(t))}),e=(e=xi(e,"contentExpr"))?Ci(e,"*").map((e=>uo(e,co(t)))):[],new Zs(n,[],[],e)}(e,t);case"computedPIConstructor":if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return n=xi(e,"piTargetExpr"),r=xi(e,"piTarget"),i=xi(e,"piValueExpr"),e=_i(e,"type"),new no({xb:n?uo(xi(n,"*"),co(t)):null,Fb:r?Ai(r):null},i?uo(xi(i,"*"),co(t)):new Va([],e));case"CDataSection":return new ka(Ai(e),{type:1,g:3});case"deleteExpr":return t=uo(Ei(e,["targetExpr","*"]),t),new Ps(t);case"insertExpr":switch(n=uo(Ei(e,["sourceExpr","*"]),t),(i=Ci(e,"*")[1])[0]){case"insertAfter":r=1;break;case"insertBefore":r=2;break;case"insertInto":r=(r=xi(i,"*"))?"insertAsFirst"===r[0]?4:5:3}return t=uo(Ei(e,["targetExpr","*"]),t),new Ls(n,r,t);case"renameExpr":return n=uo(Ei(e,["targetExpr","*"]),t),t=uo(Ei(e,["newNameExpr","*"]),t),new qs(n,t);case"replaceExpr":return n=!!xi(e,"replaceValue"),r=uo(Ei(e,["targetExpr","*"]),t),t=uo(Ei(e,["replacementExpr","*"]),t),new Vs(n,r,t);case"transformExpr":return function(e,t){const n=Ci(xi(e,"transformCopies"),"transformCopy").map((e=>{const n=Ni(xi(xi(e,"varRef"),"name"));return{fb:uo(xi(xi(e,"copySource"),"*"),t),Jb:new U(n.prefix,n.namespaceURI,n.localName)}})),r=uo(xi(xi(e,"modifyExpr"),"*"),t);return e=uo(xi(xi(e,"returnExpr"),"*"),t),new Ks(n,r,e)}(e,t);case"x:stackTrace":for(e=(n=e)[2];"x:stackTrace"===e[0];)n=e,e=e[2];return n=n[1],new xa(n,e[0],uo(e,t),n.Wa);case"ifClause":case"thenClause":case"elseClause":return uo(xi(e,"*"),t);default:return po(e)}}function po(e){switch(e[0]){case"nameTest":return new fs(Ni(e));case"piTest":return(e=xi(e,"piTarget"))?new gs(Ai(e)):new ms(7);case"commentTest":return new ms(8);case"textTest":return new ms(3);case"documentTest":return new ms(9);case"attributeTest":var t=(e=xi(e,"attributeName"))&&xi(e,"star");return!e||t?new ms(2):new fs(Ni(xi(e,"QName")),{kind:2});case"elementTest":return t=(e=xi(e,"elementName"))&&xi(e,"star"),!e||t?new ms(1):new fs(Ni(xi(e,"QName")),{kind:1});case"anyKindTest":return new ys({prefix:"",namespaceURI:null,localName:"node()"});case"anyMapTest":return new ys({prefix:"",namespaceURI:null,localName:"map(*)"});case"anyArrayTest":return new ys({prefix:"",namespaceURI:null,localName:"array(*)"});case"Wildcard":return xi(e,"star")?(t=xi(e,"uri"))?e=new fs({localName:"*",namespaceURI:Ai(t),prefix:""}):(t=xi(e,"NCName"),e="star"===xi(e,"*")[0]?new fs({localName:Ai(t),namespaceURI:null,prefix:"*"}):new fs({localName:"*",namespaceURI:null,prefix:Ai(t)})):e=new fs({localName:"*",namespaceURI:null,prefix:"*"}),e;case"atomicType":return new ys(Ni(e));case"anyItemType":return new ys({prefix:"",namespaceURI:null,localName:"item()"});default:throw Error("No selector counterpart for: "+e[0]+".")}}function ho(e,t,n){const r=[];return function t(i){const a=xi(xi(i,"firstOperand"),"*");i=xi(xi(i,"secondOperand"),"*"),a[0]===e?t(a):r.push(uo(a,n)),i[0]===e?t(i):r.push(uo(i,n))}(t),r}function mo(e,t){switch((e=xi(e,"*"))[0]){case"NCName":return new ka(Ai(e),{type:1,g:3});case"star":return"*";default:return uo(e,co(t))}}function fo(e,t,n){var r=Ei(t,["firstOperand","*"]);const i=Ei(t,["secondOperand","*"]);switch(r=uo(r,co(n)),n=uo(i,co(n)),e){case"valueCompare":return new $a(t[0],r,n);case"nodeCompare":return new ja(t[0],r,n);case"generalCompare":return new Ha(t[0],r,n)}}function go(e,t){return uo(e,t)}const yo=new Map;class bo{constructor(e,t,n,r,i,a){this.v=e,this.D=t,this.h=n,this.kb=r,this.o=i,this.l=a}}function wo(e,t,n,r,i,a,s){let o=yo.get(e);o||(o=Object.create(null),yo.set(e,o)),(t=o[e=t+(a?"_DEBUG":"")])||(t=o[e]=[]),t.push(new bo(Object.values(n.h),Object.values(n.o),i,Object.keys(r).map((e=>({namespaceURI:r[e],prefix:e}))),s,n.D))}function vo(e){var t=new q;if("http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://fontoxml.com/fontoxpath"!==e.namespaceURI&&"http://www.w3.org/2007/xquery-update-10"!==e.namespaceURI)throw Ze("The XML structure passed as an XQueryX program was not valid XQueryX");const n=["stackTrace"===e.localName?"x:stackTrace":e.localName],r=t.getAllAttributes(e);r&&0<r.length&&n.push(Array.from(r).reduce(((t,n)=>("comment"!==n.localName&&"start"!==n.localName&&"end"!==n.localName||"stackTrace"!==e.localName?"type"===n.localName?t[n.localName]=O(n.value):t[n.localName]=n.value:t[n.localName]=JSON.parse(n.value),t)),{})),t=t.getChildNodes(e);for(const e of t)switch(e.nodeType){case 1:n.push(vo(e));break;case 3:n.push(e.data)}return n}const xo=Object.create(null);var Ao=(e,t)=>{let n=xo[e];n||=xo[e]={Ia:[],Ta:[],pa:null,source:t.source};const r=n.pa||(()=>{});n.Ia=n.Ia.concat(t.Ia),n.Ta=n.Ta.concat(t.Ta),n.pa=e=>{r(e),t.pa&&t.pa(e)}},_o=(e,t)=>{const n=xo[t];if(!n)throw Error(`XQST0051: No modules found with the namespace uri ${t}`);n.Ia.forEach((n=>{n.cb&&fi(e,t,n.localName,n.arity,n)})),n.Ta.forEach((n=>{yi(e,t,n.localName),bi(e,t,n.localName,((e,t)=>er(n.ba,e,t)))}))},Eo=()=>{Object.keys(xo).forEach((e=>{if((e=xo[e]).pa)try{e.pa(e)}catch(t){e.pa=null,Yr(e.source,t)}e.pa=null}))};function Co(e){return e.replace(/(\x0D\x0A)|(\x0D(?!\x0A))/g,String.fromCharCode(10))}var No=t;function To(e,t){return(n,r)=>t.has(r)?t.get(r):(n=e(n,r),t.set(r,n),n)}function ko(e,t){return(0,No.delimited)(t,e,t)}function Io(e,t){return e.reverse().reduce(((e,t)=>(0,No.preceded)(t,e)),t)}function So(e,t,n,r){return(0,No.then)((0,No.then)(e,t,((e,t)=>[e,t])),n,(([e,t],n)=>r(e,t,n)))}function Bo(e,t,n,r,i){return(0,No.then)((0,No.then)((0,No.then)(e,t,((e,t)=>[e,t])),n,(([e,t],n)=>[e,t,n])),r,(([e,t,n],r)=>i(e,t,n,r)))}function Oo(e){return(0,No.map)(e,(e=>[e]))}function Fo(e,t){return(0,No.map)((0,No.or)(e),(()=>t))}function Po(e){return(t,n)=>(t=e.exec(t.substring(n)))&&0===t.index?(0,No.okWithValue)(n+t[0].length,t[0]):(0,No.error)(n,[e.source],!1)}var Do=(0,No.or)([(0,No.token)(" "),(0,No.token)("\t"),(0,No.token)("\r"),(0,No.token)("\n")]),Ro=(0,No.token)("(:"),Mo=(0,No.token)(":)"),Lo=(0,No.token)("(#"),$o=(0,No.token)("#)"),Uo=(0,No.token)("("),Ho=(0,No.token)(")"),Go=(0,No.token)("["),jo=(0,No.token)("]"),Xo=(0,No.token)("{"),qo=(0,No.token)("}"),Vo=(0,No.token)("{{"),zo=(0,No.token)("}}"),Yo=(0,No.token)("'"),Ko=(0,No.token)("''"),Jo=(0,No.token)('"'),Wo=(0,No.token)('""'),Qo=(0,No.token)("<![CDATA["),Zo=(0,No.token)("]]>"),el=(0,No.token)("/>"),tl=(0,No.token)("</"),nl=(0,No.token)("\x3c!--"),rl=(0,No.token)("--\x3e"),il=(0,No.token)("<?"),al=(0,No.token)("?>"),sl=(0,No.token)("&#x"),ol=(0,No.token)("&#"),ll=(0,No.token)(":*"),cl=(0,No.token)("*:"),ul=(0,No.token)(":="),pl=(0,No.token)("&"),dl=(0,No.token)(":"),hl=(0,No.token)(";"),ml=(0,No.token)("*"),fl=(0,No.token)("@"),gl=(0,No.token)("$"),yl=(0,No.token)("#"),bl=(0,No.token)("%"),wl=(0,No.token)("?"),vl=(0,No.token)("="),xl=(0,No.followed)((0,No.token)("!"),(0,No.not)((0,No.peek)(vl),[])),Al=(0,No.followed)((0,No.token)("|"),(0,No.not)((0,No.peek)((0,No.token)("|")),[])),_l=(0,No.token)("||"),El=(0,No.token)("!="),Cl=(0,No.token)("<"),Nl=(0,No.token)("<<"),Tl=(0,No.token)("<="),kl=(0,No.token)(">"),Il=(0,No.token)(">>"),Sl=(0,No.token)(">="),Bl=(0,No.token)(","),Ol=(0,No.token)("."),Fl=(0,No.token)(".."),Pl=(0,No.token)("+"),Dl=(0,No.token)("-"),Rl=(0,No.token)("/"),Ml=(0,No.token)("//"),Ll=(0,No.token)("=>"),$l=(0,No.token)("e"),Ul=(0,No.token)("E");(0,No.token)("l"),(0,No.token)("L"),(0,No.token)("m"),(0,No.token)("M");var Hl=(0,No.token)("Q");(0,No.token)("x"),(0,No.token)("X");var Gl=(0,No.token)("as"),jl=(0,No.token)("cast"),Xl=(0,No.token)("castable"),ql=(0,No.token)("treat"),Vl=(0,No.token)("instance"),zl=(0,No.token)("of"),Yl=(0,No.token)("node"),Kl=(0,No.token)("nodes"),Jl=(0,No.token)("delete"),Wl=(0,No.token)("value"),Ql=(0,No.token)("function"),Zl=(0,No.token)("map"),ec=(0,No.token)("element"),tc=(0,No.token)("attribute"),nc=(0,No.token)("schema-element"),rc=(0,No.token)("intersect"),ic=(0,No.token)("except"),ac=(0,No.token)("union"),sc=(0,No.token)("to"),oc=(0,No.token)("is"),lc=(0,No.token)("or"),cc=(0,No.token)("and"),uc=(0,No.token)("div"),pc=(0,No.token)("idiv"),dc=(0,No.token)("mod"),hc=(0,No.token)("eq"),mc=(0,No.token)("ne"),fc=(0,No.token)("lt"),gc=(0,No.token)("le"),yc=(0,No.token)("gt"),bc=(0,No.token)("ge"),wc=(0,No.token)("amp"),vc=(0,No.token)("quot"),xc=(0,No.token)("apos"),Ac=(0,No.token)("if"),_c=(0,No.token)("then"),Ec=(0,No.token)("else"),Cc=(0,No.token)("allowing"),Nc=(0,No.token)("empty"),Tc=(0,No.token)("at"),kc=(0,No.token)("in"),Ic=(0,No.token)("for"),Sc=(0,No.token)("let"),Bc=(0,No.token)("where"),Oc=(0,No.token)("collation"),Fc=(0,No.token)("group"),Pc=(0,No.token)("by"),Dc=(0,No.token)("order"),Rc=(0,No.token)("stable"),Mc=(0,No.token)("return"),Lc=(0,No.token)("array"),$c=(0,No.token)("document"),Uc=(0,No.token)("namespace"),Hc=(0,No.token)("text"),Gc=(0,No.token)("comment"),jc=(0,No.token)("processing-instruction"),Xc=(0,No.token)("lax"),qc=(0,No.token)("strict"),Vc=(0,No.token)("validate"),zc=(0,No.token)("type"),Yc=(0,No.token)("declare"),Kc=(0,No.token)("default"),Jc=(0,No.token)("boundary-space"),Wc=(0,No.token)("strip"),Qc=(0,No.token)("preserve"),Zc=(0,No.token)("no-preserve"),eu=(0,No.token)("inherit"),tu=(0,No.token)("no-inherit"),nu=(0,No.token)("greatest"),ru=(0,No.token)("least"),iu=(0,No.token)("copy-namespaces"),au=(0,No.token)("decimal-format"),su=(0,No.token)("case"),ou=(0,No.token)("typeswitch"),lu=(0,No.token)("some"),cu=(0,No.token)("every"),uu=(0,No.token)("satisfies"),pu=(0,No.token)("replace"),du=(0,No.token)("with"),hu=(0,No.token)("copy"),mu=(0,No.token)("modify"),fu=(0,No.token)("first"),gu=(0,No.token)("last"),yu=(0,No.token)("before"),bu=(0,No.token)("after"),wu=(0,No.token)("into"),vu=(0,No.token)("insert"),xu=(0,No.token)("rename"),Au=(0,No.token)("switch"),_u=(0,No.token)("variable"),Eu=(0,No.token)("external"),Cu=(0,No.token)("updating"),Nu=(0,No.token)("import"),Tu=(0,No.token)("schema"),ku=(0,No.token)("module"),Iu=(0,No.token)("base-uri"),Su=(0,No.token)("construction"),Bu=(0,No.token)("ordering"),Ou=(0,No.token)("ordered"),Fu=(0,No.token)("unordered"),Pu=(0,No.token)("option"),Du=(0,No.token)("context"),Ru=(0,No.token)("item"),Mu=(0,No.token)("xquery"),Lu=(0,No.token)("version"),$u=(0,No.token)("encoding"),Uu=(0,No.token)("document-node"),Hu=(0,No.token)("namespace-node"),Gu=(0,No.token)("schema-attribute"),ju=(0,No.token)("ascending"),Xu=(0,No.token)("descending"),qu=(0,No.token)("empty-sequence"),Vu=(0,No.token)("child::"),zu=(0,No.token)("descendant::"),Yu=(0,No.token)("attribute::"),Ku=(0,No.token)("self::"),Ju=(0,No.token)("descendant-or-self::"),Wu=(0,No.token)("following-sibling::"),Qu=(0,No.token)("following::"),Zu=(0,No.token)("parent::"),ep=(0,No.token)("ancestor::"),tp=(0,No.token)("preceding-sibling::"),np=(0,No.token)("preceding::"),rp=(0,No.token)("ancestor-or-self::"),ip=(0,No.token)("decimal-separator"),ap=(0,No.token)("grouping-separator"),sp=(0,No.token)("infinity"),op=(0,No.token)("minus-sign"),lp=(0,No.token)("NaN"),cp=(0,No.token)("per-mille"),up=(0,No.token)("zero-digit"),pp=(0,No.token)("digit"),dp=(0,No.token)("pattern-separator"),hp=(0,No.token)("exponent-separator"),mp=(0,No.token)("schema-attribute("),fp=(0,No.token)("document-node("),gp=(0,No.token)("processing-instruction("),yp=(0,No.token)("processing-instruction()"),bp=(0,No.token)("comment()"),wp=(0,No.token)("text()"),vp=(0,No.token)("namespace-node()"),xp=(0,No.token)("node()"),Ap=(0,No.token)("item()"),_p=(0,No.token)("empty-sequence()"),Ep=new Map,Cp=new Map,Np=(0,No.or)([Po(/[\t\n\r -\uD7FF\uE000\uFFFD]/),Po(/[\uD800-\uDBFF][\uDC00-\uDFFF]/)]),Tp=(0,No.preceded)((0,No.peek)((0,No.not)((0,No.or)([Ro,Mo]),['comment contents cannot contain "(:" or ":)"'])),Np),kp=(0,No.map)((0,No.delimited)(Ro,(0,No.star)((0,No.or)([Tp,function(e,t){return kp(e,t)}])),Mo,!0),(e=>e.join(""))),Ip=(0,No.or)([Do,kp]),Sp=(0,No.map)((0,No.plus)(Do),(e=>e.join(""))),Bp=To((0,No.map)((0,No.star)(Ip),(e=>e.join(""))),Ep),Op=To((0,No.map)((0,No.plus)(Ip),(e=>e.join(""))),Cp);const Fp=(0,No.or)([Po(/[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),(0,No.then)(Po(/[\uD800-\uDB7F]/),Po(/[\uDC00-\uDFFF]/),((e,t)=>e+t))]),Pp=(0,No.or)([Fp,Po(/[\-\.0-9\xB7\u0300-\u036F\u203F\u2040]/)]);var Dp=(0,No.then)(Fp,(0,No.star)(Pp),((e,t)=>e+t.join(""))),Rp=(0,No.map)(Dp,(e=>["prefix",e]));const Mp=(0,No.or)([Fp,dl]),Lp=(0,No.or)([Pp,dl]);(0,No.then)(Mp,(0,No.star)(Lp),((e,t)=>e+t.join("")));const $p=(0,No.map)(Dp,(e=>[{prefix:"",URI:null},e])),Up=(0,No.then)(Dp,(0,No.preceded)(dl,Dp),((e,t)=>[{prefix:e,URI:null},t]));var Hp=(0,No.or)([Up,$p]),Gp=(0,No.followed)(Io([Hl,Bp,Xo],(0,No.map)((0,No.star)(Po(/[^{}]/)),(e=>e.join("").replace(/\s+/g," ").trim()))),qo);const jp=(0,No.then)(Gp,Dp,((e,t)=>[e,t]));var Xp=(0,No.or)([(0,No.map)(jp,(e=>[{prefix:null,URI:e[0]},e[1]])),Hp]),qp=(0,No.or)([(0,No.map)(Xp,(e=>["QName",...e])),(0,No.map)(ml,(()=>["star"]))]),Vp=(0,No.map)((0,No.preceded)(gl,Xp),(e=>["varRef",["name",...e]])),zp=(0,No.peek)((0,No.or)([Uo,Jo,Yo,Ip])),Yp=(0,No.map)((0,No.or)([Vu,zu,Yu,Ku,Ju,Wu,Qu]),(e=>e.substring(0,e.length-2))),Kp=(0,No.map)((0,No.or)([Zu,ep,tp,np,rp]),(e=>e.substring(0,e.length-2))),Jp=So(pl,(0,No.or)([fc,yc,wc,vc,xc]),hl,((e,t,n)=>e+t+n)),Wp=(0,No.or)([So(sl,Po(/[0-9a-fA-F]+/),hl,((e,t,n)=>e+t+n)),So(ol,Po(/[0-9]+/),hl,((e,t,n)=>e+t+n))]),Qp=Fo([Wo],'"'),Zp=Fo([Ko],"'"),ed=Oo(Fo([bp],"commentTest")),td=Oo(Fo([wp],"textTest")),nd=Oo(Fo([vp],"namespaceTest")),rd=Oo(Fo([xp],"anyKindTest"));const id=Po(/[0-9]+/),ad=(0,No.then)((0,No.or)([(0,No.then)(Ol,id,((e,t)=>e+t)),(0,No.then)(id,(0,No.optional)((0,No.preceded)(Ol,Po(/[0-9]*/))),((e,t)=>e+(null!==t?"."+t:"")))]),So((0,No.or)([$l,Ul]),(0,No.optional)((0,No.or)([Pl,Dl])),id,((e,t,n)=>e+(t||"")+n)),((e,t)=>["doubleConstantExpr",["value",e+t]])),sd=(0,No.or)([(0,No.map)((0,No.preceded)(Ol,id),(e=>["decimalConstantExpr",["value","."+e]])),(0,No.then)((0,No.followed)(id,Ol),(0,No.optional)(id),((e,t)=>["decimalConstantExpr",["value",e+"."+(null!==t?t:"")]]))]);var od=(0,No.map)(id,(e=>["integerConstantExpr",["value",e]])),ld=(0,No.followed)((0,No.or)([ad,sd,od]),(0,No.peek)((0,No.not)(Po(/[a-zA-Z]/),["no alphabetical characters after numeric literal"]))),cd=(0,No.map)((0,No.followed)(Ol,(0,No.peek)((0,No.not)(Ol,["context item should not be followed by another ."]))),(()=>["contextItemExpr"])),ud=(0,No.or)([Lc,tc,Gc,Uu,ec,qu,Ql,Ac,Ru,Zl,Hu,Yl,jc,Gu,nc,Au,Hc,ou]),pd=Oo(Fo([wl],"argumentPlaceholder")),dd=(0,No.or)([wl,ml,Pl]),hd=(0,No.preceded)((0,No.peek)((0,No.not)(Po(/[{}<&]/),["elementContentChar cannot be {, }, <, or &"])),Np),md=(0,No.map)((0,No.delimited)(Qo,(0,No.star)((0,No.preceded)((0,No.peek)((0,No.not)(Zo,['CDataSection content may not contain "]]>"'])),Np)),Zo,!0),(e=>["CDataSection",e.join("")])),fd=(0,No.preceded)((0,No.peek)((0,No.not)(Po(/["{}<&]/),['quotAttrValueContentChar cannot be ", {, }, <, or &'])),Np),gd=(0,No.preceded)((0,No.peek)((0,No.not)(Po(/['{}<&]/),["aposAttrValueContentChar cannot be ', {, }, <, or &"])),Np),yd=(0,No.map)((0,No.star)((0,No.or)([(0,No.preceded)((0,No.peek)((0,No.not)(Dl,[])),Np),(0,No.map)(Io([Dl,(0,No.peek)((0,No.not)(Dl,[]))],Np),(e=>"-"+e))])),(e=>e.join(""))),bd=(0,No.map)((0,No.delimited)(nl,yd,rl,!0),(e=>["computedCommentConstructor",["argExpr",["stringConstantExpr",["value",e]]]]));const wd=(0,No.filter)(Dp,(e=>"xml"!==e.toLowerCase()),['A processing instruction target cannot be "xml"']),vd=(0,No.map)((0,No.star)((0,No.preceded)((0,No.peek)((0,No.not)(al,[])),Np)),(e=>e.join("")));var xd=(0,No.then)((0,No.preceded)(il,(0,No.cut)(wd)),(0,No.cut)((0,No.followed)((0,No.optional)((0,No.preceded)(Sp,vd)),al)),((e,t)=>["computedPIConstructor",["piTarget",e],["piValueExpr",["stringConstantExpr",["value",t]]]])),Ad=(0,No.map)(Ml,(()=>["stepExpr",["xpathAxis","descendant-or-self"],["anyKindTest"]])),_d=(0,No.or)([Xc,qc]),Ed=(0,No.map)((0,No.star)((0,No.followed)(Np,(0,No.peek)((0,No.not)($o,["Pragma contents should not contain '#)'"])))),(e=>e.join(""))),Cd=(0,No.map)((0,No.followed)((0,No.or)([hc,mc,fc,gc,yc,bc]),zp),(e=>e+"Op")),Nd=(0,No.or)([(0,No.followed)(Fo([oc],"isOp"),zp),Fo([Nl],"nodeBeforeOp"),Fo([Il],"nodeAfterOp")]),Td=(0,No.or)([Fo([vl],"equalOp"),Fo([El],"notEqualOp"),Fo([Tl],"lessThanOrEqualOp"),Fo([Cl],"lessThanOp"),Fo([Sl],"greaterThanOrEqualOp"),Fo([kl],"greaterThanOp")]),kd=(0,No.map)(Cu,(()=>["annotation",["annotationName","updating"]]));const Id=(0,No.or)([Qc,Zc]),Sd=(0,No.or)([eu,tu]);var Bd=(0,No.or)([ip,ap,sp,op,lp,bl,cp,up,pp,dp,hp]),Od=(0,No.map)(Io([Yc,Op,Jc,Op],(0,No.or)([Qc,Wc])),(e=>["boundarySpaceDecl",e])),Fd=(0,No.map)(Io([Yc,Op,Su,Op],(0,No.or)([Qc,Wc])),(e=>["constructionDecl",e])),Pd=(0,No.map)(Io([Yc,Op,Bu,Op],(0,No.or)([Ou,Fu])),(e=>["orderingModeDecl",e])),Dd=(0,No.map)(Io([Yc,Op,Kc,Op,Dc,Op,Nc,Op],(0,No.or)([nu,ru])),(e=>["emptyOrderDecl",e])),Rd=(0,No.then)(Io([Yc,Op,iu,Op],Id),Io([Bp,Bl,Bp],Sd),((e,t)=>["copyNamespacesDecl",["preserveMode",e],["inheritMode",t]]));function Md(e){switch(e[0]){case"constantExpr":case"varRef":case"contextItemExpr":case"functionCallExpr":case"sequenceExpr":case"elementConstructor":case"computedElementConstructor":case"computedAttributeConstructor":case"computedDocumentConstructor":case"computedTextConstructor":case"computedCommentConstructor":case"computedNamespaceConstructor":case"computedPIConstructor":case"orderedExpr":case"unorderedExpr":case"namedFunctionRef":case"inlineFunctionExpr":case"dynamicFunctionInvocationExpr":case"mapConstructor":case"arrayConstructor":case"stringConstructor":case"unaryLookup":return e}return["sequenceExpr",e]}function Ld(e){if(!(1<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e))throw Error("XQST0090: The character reference "+e+" ("+e.toString(16)+") does not reference a valid codePoint.")}function $d(e){return e.replace(/(&[^;]+);/g,(e=>{if(/^&#x/.test(e))return Ld(e=parseInt(e.slice(3,-1),16)),String.fromCodePoint(e);if(/^&#/.test(e))return Ld(e=parseInt(e.slice(2,-1),10)),String.fromCodePoint(e);switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return String.fromCharCode(34);case"&apos;":return String.fromCharCode(39)}throw Error('XPST0003: Unknown character reference: "'+e+'"')}))}function Ud(e,t,n){if(!e.length)return[];let r=[e[0]];for(let t=1;t<e.length;++t){const n=r[r.length-1];"string"==typeof n&&"string"==typeof e[t]?r[r.length-1]=n+e[t]:r.push(e[t])}if("string"==typeof r[0]&&0===r.length)return[];if(r=r.reduce(((e,t,i)=>{if("string"!=typeof t)e.push(t);else if(n&&/^\s*$/.test(t)){const n=r[i+1];(n&&"CDataSection"===n[0]||(i=r[i-1])&&"CDataSection"===i[0])&&e.push($d(t))}else e.push($d(t));return e}),[]),!r.length)return r;if(1<r.length||t)for(e=0;e<r.length;e++)"string"==typeof r[e]&&(r[e]=["stringConstantExpr",["value",r[e]]]);return r}function Hd(e){return e[0].prefix?e[0].prefix+":"+e[1]:e[1]}var Gd=(0,No.then)(Xp,(0,No.optional)(wl),((e,t)=>null!==t?["singleType",["atomicType",...e],["optional"]]:["singleType",["atomicType",...e]])),jd=(0,No.map)(Xp,(e=>["atomicType",...e]));const Xd=new Map;function qd(e){function t(e,t){return t.reduce(((e,t)=>[t[0],["firstOperand",e],["secondOperand",t[1]]]),e)}function n(e,t,n){return(0,No.then)(e,(0,No.star)((0,No.then)(ko(t,Bp),(0,No.cut)(e),((e,t)=>[e,t]))),n)}function r(e,t,n="firstOperand",r="secondOperand"){return(0,No.then)(e,(0,No.optional)((0,No.then)(ko(t,Bp),(0,No.cut)(e),((e,t)=>[e,t]))),((e,t)=>null===t?e:[t[0],[n,e],[r,t[1]]]))}function i(t){return e.mb?(e,n)=>{if(!(e=t(e,n)).success)return e;const r=c.has(n)?c.get(n):{offset:n,line:-1,ha:-1},i=c.has(e.offset)?c.get(e.offset):{offset:e.offset,line:-1,ha:-1};return c.set(n,r),c.set(e.offset,i),n=e.value.Wa,(0,No.okWithValue)(e.offset,["x:stackTrace",Object.assign({start:r,end:i},n?{Wa:n}:{}),e.value])}:t}function a(e,t){return K(e,t)}function s(e,t){return Me(e,t)}function o(e,t){return i((0,No.or)([kt,Pt,jt,Bt,lt,Ut,Dt,Ht,Rt,Lt,it]))(e,t)}function l(e,t){return n(o,Bl,((e,t)=>0===t.length?e:["sequenceExpr",e,...t.map((e=>e[1]))]))(e,t)}const c=new Map,u=(0,No.preceded)(Go,(0,No.followed)(ko(l,Bp),jo)),p=(0,No.map)(e.Za?(0,No.or)([ko((0,No.star)((0,No.or)([Jp,Wp,Qp,Po(/[^"&]/)])),Jo),ko((0,No.star)((0,No.or)([Jp,Wp,Zp,Po(/[^'&]/)])),Yo)]):(0,No.or)([ko((0,No.star)((0,No.or)([Qp,Po(/[^"]/)])),Jo),ko((0,No.star)((0,No.or)([Zp,Po(/[^']/)])),Yo)]),(e=>e.join(""))),d=(0,No.or)([(0,No.map)(Io([ec,Bp],(0,No.delimited)((0,No.followed)(Uo,Bp),(0,No.then)(qp,Io([Bp,Bl,Bp],Xp),((e,t)=>[["elementName",e],["typeName",...t]])),(0,No.preceded)(Bp,Ho))),(([e,t])=>["elementTest",e,t])),(0,No.map)(Io([ec,Bp],(0,No.delimited)(Uo,qp,Ho)),(e=>["elementTest",["elementName",e]])),(0,No.map)(Io([ec,Bp],(0,No.delimited)(Uo,Bp,Ho)),(()=>["elementTest"]))]),h=(0,No.or)([(0,No.map)(Xp,(e=>["QName",...e])),(0,No.map)(ml,(()=>["star"]))]),m=(0,No.or)([(0,No.map)(Io([tc,Bp],(0,No.delimited)((0,No.followed)(Uo,Bp),(0,No.then)(h,Io([Bp,Bl,Bp],Xp),((e,t)=>[["attributeName",e],["typeName",...t]])),(0,No.preceded)(Bp,Ho))),(([e,t])=>["attributeTest",e,t])),(0,No.map)(Io([tc,Bp],(0,No.delimited)(Uo,h,Ho)),(e=>["attributeTest",["attributeName",e]])),(0,No.map)(Io([tc,Bp],(0,No.delimited)(Uo,Bp,Ho)),(()=>["attributeTest"]))]),f=(0,No.map)(Io([nc,Bp,Uo],(0,No.followed)(Xp,Ho)),(e=>["schemaElementTest",...e])),g=(0,No.map)((0,No.delimited)(mp,ko(Xp,Bp),Ho),(e=>["schemaAttributeTest",...e])),y=(0,No.map)((0,No.preceded)(fp,(0,No.followed)(ko((0,No.optional)((0,No.or)([d,f])),Bp),Ho)),(e=>["documentTest",...e?[e]:[]])),b=(0,No.or)([(0,No.map)((0,No.preceded)(gp,(0,No.followed)(ko((0,No.or)([Dp,p]),Bp),Ho)),(e=>["piTest",["piTarget",e]])),Oo(Fo([yp],"piTest"))]),w=(0,No.or)([y,d,m,f,g,b,ed,td,nd,rd]),v=(0,No.or)([(0,No.map)((0,No.preceded)(cl,Dp),(e=>["Wildcard",["star"],["NCName",e]])),Oo(Fo([ml],"Wildcard")),(0,No.map)((0,No.followed)(Gp,ml),(e=>["Wildcard",["uri",e],["star"]])),(0,No.map)((0,No.followed)(Dp,ll),(e=>["Wildcard",["NCName",e],["star"]]))]),x=(0,No.or)([v,(0,No.map)(Xp,(e=>["nameTest",...e]))]),A=(0,No.or)([w,x]),_=(0,No.then)((0,No.optional)(fl),A,((e,t)=>null!==e||"attributeTest"===t[0]||"schemaAttributeTest"===t[0]?["stepExpr",["xpathAxis","attribute"],t]:["stepExpr",["xpathAxis","child"],t])),E=(0,No.or)([(0,No.then)(Yp,A,((e,t)=>["stepExpr",["xpathAxis",e],t])),_]),C=(0,No.map)(Fl,(()=>["stepExpr",["xpathAxis","parent"],["anyKindTest"]])),N=(0,No.or)([(0,No.then)(Kp,A,((e,t)=>["stepExpr",["xpathAxis",e],t])),C]),T=(0,No.map)((0,No.star)((0,No.preceded)(Bp,u)),(e=>0<e.length?["predicates",...e]:void 0)),k=(0,No.then)((0,No.or)([N,E]),T,((e,t)=>void 0===t?e:e.concat([t]))),I=(0,No.or)([ld,(0,No.map)(p,(t=>["stringConstantExpr",["value",e.Za?$d(t):t]]))]),S=(0,No.or)([(0,No.delimited)(Uo,ko(l,Bp),Ho),(0,No.map)((0,No.delimited)(Uo,Bp,Ho),(()=>["sequenceExpr"]))]),B=(0,No.or)([o,pd]),O=(0,No.map)((0,No.delimited)(Uo,ko((0,No.optional)((0,No.then)(B,(0,No.star)((0,No.preceded)(ko(Bl,Bp),B)),((e,t)=>[e,...t]))),Bp),Ho),(e=>null!==e?e:[])),F=(0,No.preceded)((0,No.not)(So(ud,Bp,Uo,(()=>{})),["cannot use reserved keyword for function names"]),i((0,No.then)(Xp,(0,No.preceded)(Bp,O),((e,t)=>{t=["functionCallExpr",["functionName",...e],null!==t?["arguments",...t]:["arguments"]];const n=e[0].prefix,r=e[0].URI;return e=e[1],t.Wa=n?`${n}:${e}`:r?`Q{${r}}${e}`:e,t})))),P=(0,No.then)(Xp,(0,No.preceded)(yl,od),((e,t)=>["namedFunctionRef",["functionName",...e],t])),D=(0,No.delimited)(Xo,ko((0,No.optional)(l),Bp),qo),R=(0,No.map)(D,(e=>e||["sequenceExpr"])),M=(0,No.or)([(0,No.map)(_p,(()=>[["voidSequenceType"]])),(0,No.then)(a,(0,No.optional)((0,No.preceded)(Bp,dd)),((e,t)=>[e,...null!==t?[["occurrenceIndicator",t]]:[]]))]),L=(0,No.then)(Io([bl,Bp],Xp),(0,No.optional)((0,No.followed)((0,No.then)(Io([Uo,Bp],I),(0,No.star)(Io([Bl,Bp],I)),((e,t)=>e.concat(t))),Ho)),((e,t)=>["annotation",["annotationName",...e],...t?["arguments",t]:[]])),$=(0,No.map)(Io([Ql,Bp,Uo,Bp,ml,Bp],Ho),(()=>["anyFunctionTest"])),U=(0,No.then)(Io([Ql,Bp,Uo,Bp],(0,No.optional)(n(M,Bl,((e,t)=>e.concat.apply(e,t.map((e=>e[1]))))))),Io([Bp,Ho,Op,Gl,Op],M),((e,t)=>["typedFunctionTest",["paramTypeList",["sequenceType",...e||[]]],["sequenceType",...t]])),H=(0,No.then)((0,No.star)(L),(0,No.or)([$,U]),((e,t)=>[t[0],...e,...t.slice(1)])),G=(0,No.map)(Io([Zl,Bp,Uo,Bp,ml,Bp],Ho),(()=>["anyMapTest"])),j=(0,No.then)(Io([Zl,Bp,Uo,Bp],jd),Io([Bp,Bl],(0,No.followed)(ko(M,Bp),Ho)),((e,t)=>["typedMapTest",e,["sequenceType",...t]])),X=(0,No.or)([G,j]),q=(0,No.map)(Io([Lc,Bp,Uo,Bp,ml,Bp],Ho),(()=>["anyArrayTest"])),V=(0,No.map)(Io([Lc,Bp,Uo],(0,No.followed)(ko(M,Bp),Ho)),(e=>["typedArrayTest",["sequenceType",...e]])),z=(0,No.or)([q,V]),Y=(0,No.map)((0,No.delimited)(Uo,ko(a,Bp),Ho),(e=>["parenthesizedItemType",e])),K=(0,No.or)([w,Oo(Fo([Ap],"anyItemType")),H,X,z,jd,Y]),J=(0,No.map)(Io([Gl,Op],M),(e=>["typeDeclaration",...e])),W=(0,No.then)((0,No.preceded)(gl,Xp),(0,No.optional)((0,No.preceded)(Op,J)),((e,t)=>["param",["varName",...e],...t?[t]:[]])),Q=n(W,Bl,((e,t)=>[e,...t.map((e=>e[1]))])),Z=Bo((0,No.star)(L),Io([Bp,Ql,Bp,Uo,Bp],(0,No.optional)(Q)),Io([Bp,Ho,Bp],(0,No.optional)((0,No.map)(Io([Gl,Bp],(0,No.followed)(M,Bp)),(e=>["typeDeclaration",...e])))),R,((e,t,n,r)=>["inlineFunctionExpr",...e,["paramList",...t||[]],...n?[n]:[],["functionBody",r]])),ee=(0,No.or)([P,Z]),te=(0,No.map)(o,(e=>["mapKeyExpr",e])),ne=(0,No.map)(o,(e=>["mapValueExpr",e])),re=(0,No.then)(te,(0,No.preceded)(ko(dl,Bp),ne),((e,t)=>["mapConstructorEntry",e,t])),ie=(0,No.preceded)(Zl,(0,No.delimited)(ko(Xo,Bp),(0,No.map)((0,No.optional)(n(re,ko(Bl,Bp),((e,t)=>[e,...t.map((e=>e[1]))]))),(e=>e?["mapConstructor",...e]:["mapConstructor"])),(0,No.preceded)(Bp,qo))),ae=(0,No.map)((0,No.delimited)(Go,ko((0,No.optional)(n(o,Bl,((e,t)=>[e,...t.map((e=>e[1]))].map((e=>["arrayElem",e]))))),Bp),jo),(e=>["squareArray",...null!==e?e:[]])),se=(0,No.map)((0,No.preceded)(Lc,(0,No.preceded)(Bp,D)),(e=>["curlyArray",...null!==e?[["arrayElem",e]]:[]])),oe=(0,No.map)((0,No.or)([ae,se]),(e=>["arrayConstructor",e])),le=(0,No.or)([Dp,od,S,ml]),ce=(0,No.map)((0,No.preceded)(wl,(0,No.preceded)(Bp,le)),(e=>"*"===e?["unaryLookup",["star"]]:"string"==typeof e?["unaryLookup",["NCName",e]]:["unaryLookup",e])),ue=(0,No.or)([Jp,Wp,Fo([Vo],"{"),Fo([zo],"}"),(0,No.map)(D,(e=>e||["sequenceExpr"]))]),pe=(0,No.or)([md,function(e,t){return be(e,t)},ue,hd]),de=(0,No.or)([(0,No.map)(fd,(e=>e.replace(/[\x20\x0D\x0A\x09]/g," "))),ue]),he=(0,No.or)([(0,No.map)(gd,(e=>e.replace(/[\x20\x0D\x0A\x09]/g," "))),ue]),me=(0,No.map)((0,No.or)([ko((0,No.star)((0,No.or)([Qp,de])),Jo),ko((0,No.star)((0,No.or)([Zp,he])),Yo)]),(e=>Ud(e,!1,!1))),fe=(0,No.then)(Hp,(0,No.preceded)(ko(vl,(0,No.optional)(Sp)),me),((e,t)=>{if(""===e[0].prefix&&"xmlns"===e[1]){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: A namespace declaration may not contain enclosed expressions");return["namespaceDeclaration",t.length?["uri",t[0]]:["uri"]]}if("xmlns"===e[0].prefix){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: The namespace declaration for 'xmlns:"+e[1]+"' may not contain enclosed expressions");return["namespaceDeclaration",["prefix",e[1]],t.length?["uri",t[0]]:["uri"]]}return["attributeConstructor",["attributeName"].concat(e),0===t.length?["attributeValue"]:1===t.length&&"string"==typeof t[0]?["attributeValue",t[0]]:["attributeValueExpr"].concat(t)]})),ge=(0,No.map)((0,No.star)((0,No.preceded)(Sp,(0,No.optional)(fe))),(e=>e.filter(Boolean))),ye=So((0,No.preceded)(Cl,Hp),ge,(0,No.or)([(0,No.map)(el,(()=>null)),(0,No.then)((0,No.preceded)(kl,(0,No.star)(pe)),Io([Bp,tl],(0,No.followed)(Hp,(0,No.then)((0,No.optional)(Sp),kl,(()=>null)))),((e,t)=>[Ud(e,!0,!0),t]))]),((e,t,n)=>{var r=n;if(n&&n.length){r=Hd(e);const t=Hd(n[1]);if(r!==t)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. "'+r+'" does not match "'+t+'"');r=n[0]}return["elementConstructor",["tagName",...e],...t.length?[["attributeList",...t]]:[],...r&&r.length?[["elementContent",...r]]:[]]})),be=(0,No.or)([ye,bd,xd]),we=(0,No.map)(Io([$c,Bp],D),(e=>["computedDocumentConstructor",...e?[["argExpr",e]]:[]])),ve=(0,No.map)(D,(e=>e?[["contentExpr",e]]:[])),xe=(0,No.then)(Io([ec,Bp],(0,No.or)([(0,No.map)(Xp,(e=>["tagName",...e])),(0,No.map)((0,No.delimited)(Xo,ko(l,Bp),qo),(e=>["tagNameExpr",e]))])),(0,No.preceded)(Bp,ve),((e,t)=>["computedElementConstructor",e,...t])),Ae=(0,No.then)((0,No.preceded)(tc,(0,No.or)([(0,No.map)(Io([zp,Bp],Xp),(e=>["tagName",...e])),(0,No.map)((0,No.preceded)(Bp,(0,No.delimited)(Xo,ko(l,Bp),qo)),(e=>["tagNameExpr",e]))])),(0,No.preceded)(Bp,D),((e,t)=>["computedAttributeConstructor",e,["valueExpr",t||["sequenceExpr"]]])),_e=(0,No.map)(D,(e=>e?[["prefixExpr",e]]:[])),Ee=(0,No.map)(D,(e=>e?[["URIExpr",e]]:[])),Ce=(0,No.then)(Io([Uc,Bp],(0,No.or)([Rp,_e])),(0,No.preceded)(Bp,Ee),((e,t)=>["computedNamespaceConstructor",...e,...t])),Ne=(0,No.map)(Io([Hc,Bp],D),(e=>["computedTextConstructor",...e?[["argExpr",e]]:[]])),Te=(0,No.map)(Io([Gc,Bp],D),(e=>["computedCommentConstructor",...e?[["argExpr",e]]:[]])),ke=Io([jc,Bp],(0,No.then)((0,No.or)([(0,No.map)(Dp,(e=>["piTarget",e])),(0,No.map)((0,No.delimited)(Xo,ko(l,Bp),qo),(e=>["piTargetExpr",e]))]),(0,No.preceded)(Bp,D),((e,t)=>["computedPIConstructor",e,...t?[["piValueExpr",t]]:[]]))),Ie=(0,No.or)([we,xe,Ae,Ce,Ne,Te,ke]),Se=(0,No.or)([be,Ie]),Be=(0,No.or)([I,Vp,S,cd,F,Se,ee,ie,oe,ce]),Oe=(0,No.map)(Io([wl,Bp],le),(e=>"*"===e?["lookup",["star"]]:"string"==typeof e?["lookup",["NCName",e]]:["lookup",e])),Fe=(0,No.then)((0,No.map)(Be,(e=>Md(e))),(0,No.star)((0,No.or)([(0,No.map)((0,No.preceded)(Bp,u),(e=>["predicate",e])),(0,No.map)((0,No.preceded)(Bp,O),(e=>["argumentList",e])),(0,No.preceded)(Bp,Oe)])),((e,t)=>{function n(){o&&1===a.length?s.push(["predicate",a[0]]):0!==a.length&&s.push(["predicates",...a]),a.length=0}function r(e){n(),0!==s.length?("sequenceExpr"===i[0][0]&&2<i[0].length&&(i=[["sequenceExpr",...i]]),i=[["filterExpr",...i],...s],s.length=0):e&&(i=[["filterExpr",...i]])}let i=[e];const a=[],s=[];let o=!1;for(const e of t)switch(e[0]){case"predicate":a.push(e[1]);break;case"lookup":o=!0,n(),s.push(e);break;case"argumentList":r(!1),1<i.length&&(i=[["sequenceExpr",["pathExpr",["stepExpr",...i]]]]),i=[["dynamicFunctionInvocationExpr",["functionItem",...i],...e[1].length?[["arguments",...e[1]]]:[]]];break;default:throw Error("unreachable")}return r(!0),i})),Pe=(0,No.or)([(0,No.map)(Fe,(e=>["stepExpr",...e])),k]),De=(0,No.followed)(Be,(0,No.peek)((0,No.not)((0,No.preceded)(Bp,(0,No.or)([u,O,Oe])),["primary expression not followed by predicate, argumentList, or lookup"]))),Re=(0,No.or)([So(Pe,(0,No.preceded)(Bp,Ad),(0,No.preceded)(Bp,s),((e,t,n)=>["pathExpr",e,t,...n])),(0,No.then)(Pe,(0,No.preceded)(ko(Rl,Bp),s),((e,t)=>["pathExpr",e,...t])),De,(0,No.map)(Pe,(e=>["pathExpr",e]))]),Me=(0,No.or)([So(Pe,(0,No.preceded)(Bp,Ad),(0,No.preceded)(Bp,s),((e,t,n)=>[e,t,...n])),(0,No.then)(Pe,(0,No.preceded)(ko(Rl,Bp),s),((e,t)=>[e,...t])),(0,No.map)(Pe,(e=>[e]))]),Le=(0,No.or)([(0,No.map)(Io([Rl,Bp],Me),(e=>["pathExpr",["rootExpr"],...e])),(0,No.then)(Ad,(0,No.preceded)(Bp,Me),((e,t)=>["pathExpr",["rootExpr"],e,...t])),(0,No.map)((0,No.followed)(Rl,(0,No.not)((0,No.preceded)(Bp,e.Za?Po(/[*<a-zA-Z]/):Po(/[*a-zA-Z]/)),["Single rootExpr cannot be by followed by something that can be interpreted as a relative path"])),(()=>["pathExpr",["rootExpr"]]))]),$e=To((0,No.or)([Re,Le]),Xd),Ue=(0,No.preceded)(Vc,(0,No.then)((0,No.optional)((0,No.or)([(0,No.map)((0,No.preceded)(Bp,_d),(e=>["validationMode",e])),(0,No.map)(Io([Bp,zc,Bp],Xp),(e=>["type",...e]))])),(0,No.delimited)((0,No.preceded)(Bp,Xo),ko(l,Bp),qo),((e,t)=>["validateExpr",...e?[e]:[],["argExpr",t]]))),He=(0,No.delimited)(Lo,(0,No.then)((0,No.preceded)(Bp,Xp),(0,No.optional)((0,No.preceded)(Op,Ed)),((e,t)=>t?["pragma",["pragmaName",e],["pragmaContents",t]]:["pragma",["pragmaName",e]])),(0,No.preceded)(Bp,$o)),Ge=(0,No.map)((0,No.followed)((0,No.plus)(He),(0,No.preceded)(Bp,(0,No.delimited)(Xo,ko((0,No.optional)(l),Bp),qo))),(e=>["extensionExpr",...e])),je=i(n($e,xl,((e,t)=>0===t.length?e:["simpleMapExpr","pathExpr"===e[0]?e:["pathExpr",["stepExpr",["filterExpr",Md(e)]]]].concat(t.map((e=>"pathExpr"===(e=e[1])[0]?e:["pathExpr",["stepExpr",["filterExpr",Md(e)]]])))))),Xe=(0,No.or)([Ue,Ge,je]),qe=(0,No.or)([(0,No.then)((0,No.or)([Fo([Dl],"unaryMinusOp"),Fo([Pl],"unaryPlusOp")]),(0,No.preceded)(Bp,(function(e,t){return qe(e,t)})),((e,t)=>[e,["operand",t]])),Xe]),Ve=(0,No.or)([(0,No.map)(Xp,(e=>["EQName",...e])),Vp,S]),ze=(0,No.then)(qe,(0,No.star)(Io([Bp,Ll,Bp],(0,No.then)(Ve,(0,No.preceded)(Bp,O),((e,t)=>[e,t])))),((e,t)=>t.reduce(((e,t)=>["arrowExpr",["argExpr",e],t[0],["arguments",...t[1]]]),e))),Ye=(0,No.then)(ze,(0,No.optional)(Io([Bp,jl,Op,Gl,zp,Bp],Gd)),((e,t)=>null!==t?["castExpr",["argExpr",e],t]:e)),Ke=(0,No.then)(Ye,(0,No.optional)(Io([Bp,Xl,Op,Gl,zp,Bp],Gd)),((e,t)=>null!==t?["castableExpr",["argExpr",e],t]:e)),Je=(0,No.then)(Ke,(0,No.optional)(Io([Bp,ql,Op,Gl,zp,Bp],M)),((e,t)=>null!==t?["treatExpr",["argExpr",e],["sequenceType",...t]]:e)),We=(0,No.then)(Je,(0,No.optional)(Io([Bp,Vl,Op,zl,zp,Bp],M)),((e,t)=>null!==t?["instanceOfExpr",["argExpr",e],["sequenceType",...t]]:e)),Qe=n(We,(0,No.followed)((0,No.or)([Fo([rc],"intersectOp"),Fo([ic],"exceptOp")]),zp),t),Ze=n(Qe,(0,No.or)([Fo([Al],"unionOp"),(0,No.followed)(Fo([ac],"unionOp"),zp)]),t),et=n(Ze,(0,No.or)([Fo([ml],"multiplyOp"),(0,No.followed)(Fo([uc],"divOp"),zp),(0,No.followed)(Fo([pc],"idivOp"),zp),(0,No.followed)(Fo([dc],"modOp"),zp)]),t),tt=n(et,(0,No.or)([Fo([Dl],"subtractOp"),Fo([Pl],"addOp")]),t),nt=n(r(tt,(0,No.followed)(Fo([sc],"rangeSequenceExpr"),zp),"startExpr","endExpr"),Fo([_l],"stringConcatenateOp"),t),rt=n(r(nt,(0,No.or)([Cd,Nd,Td])),(0,No.followed)(Fo([cc],"andOp"),zp),t),it=n(rt,(0,No.followed)(Fo([lc],"orOp"),zp),t),at=i((0,No.map)(l,(e=>["ifClause",e]))),st=i((0,No.map)(o,(e=>["thenClause",e]))),ot=i((0,No.map)(o,(e=>["elseClause",e]))),lt=(0,No.then)((0,No.then)(Io([Ac,Bp,Uo,Bp],at),Io([Bp,Ho,Bp,_c,zp,Bp],st),((e,t)=>[e,t])),Io([Bp,Ec,zp,Bp],ot),((e,t)=>["ifThenElseExpr",e[0],e[1],t])),ct=(0,No.delimited)(Cc,Op,Nc),ut=(0,No.map)(Io([Tc,Op,gl],Xp),(e=>["positionalVariableBinding",...e])),pt=function(e,t,n,r,i,a){return(0,No.then)((0,No.then)((0,No.then)((0,No.then)(e,t,((e,t)=>[e,t])),n,(([e,t],n)=>[e,t,n])),r,(([e,t,n],r)=>[e,t,n,r])),i,(([e,t,n,r],i)=>a(e,t,n,r,i)))}((0,No.preceded)(gl,(0,No.cut)(Xp)),(0,No.cut)((0,No.preceded)(Bp,(0,No.optional)(J))),(0,No.cut)((0,No.preceded)(Bp,(0,No.optional)(ct))),(0,No.cut)((0,No.preceded)(Bp,(0,No.optional)(ut))),(0,No.cut)((0,No.preceded)(ko(kc,Bp),o)),((e,t,n,r,i)=>["forClauseItem",["typedVariableBinding",["varName",...e,...t?[t]:[]]],...n?[["allowingEmpty"]]:[],...r?[r]:[],["forExpr",i]])),dt=Io([Ic,Op],n(pt,Bl,((e,t)=>["forClause",e,...t.map((e=>e[1]))]))),ht=So((0,No.preceded)(gl,Xp),(0,No.preceded)(Bp,(0,No.optional)(J)),(0,No.preceded)(ko(ul,Bp),o),((e,t,n)=>["letClauseItem",["typedVariableBinding",["varName",...e],...t?[t]:[]],["letExpr",n]])),mt=(0,No.map)(Io([Sc,Bp],n(ht,Bl,((e,t)=>[e,...t.map((e=>e[1]))]))),(e=>["letClause",...e])),ft=(0,No.or)([dt,mt]),gt=(0,No.map)(Io([Bc,zp,Bp],o),(e=>["whereClause",e])),yt=(0,No.map)((0,No.preceded)(gl,Xp),(e=>["varName",...e])),bt=(0,No.then)((0,No.preceded)(Bp,(0,No.optional)(J)),(0,No.preceded)(ko(ul,Bp),o),((e,t)=>["groupVarInitialize",...e?[["typeDeclaration",...e]]:[],["varValue",t]])),wt=So(yt,(0,No.optional)(bt),(0,No.optional)((0,No.map)((0,No.preceded)(ko(Oc,Bp),p),(e=>["collation",e]))),((e,t,n)=>["groupingSpec",e,...t?[t]:[],...n?[n]:[]])),vt=n(wt,Bl,((e,t)=>[e,...t.map((e=>e[1]))])),xt=(0,No.map)(Io([Fc,Op,Pc,Bp],vt),(e=>["groupByClause",...e])),At=So((0,No.optional)((0,No.or)([ju,Xu])),(0,No.optional)(Io([Bp,Nc,Bp],(0,No.or)([nu,ru].map((e=>(0,No.map)(e,(e=>"empty "+e))))))),(0,No.preceded)(Bp,(0,No.optional)(Io([Oc,Bp],p))),((e,t,n)=>e||t||n?["orderModifier",...e?[["orderingKind",e]]:[],...t?[["emptyOrderingMode",t]]:[],...n?[["collation",n]]:[]]:null)),_t=(0,No.then)(o,(0,No.preceded)(Bp,At),((e,t)=>["orderBySpec",["orderByExpr",e],...t?[t]:[]])),Et=n(_t,Bl,((e,t)=>[e,...t.map((e=>e[1]))])),Ct=(0,No.then)((0,No.or)([(0,No.map)(Io([Dc,Op],Pc),(()=>!1)),(0,No.map)(Io([Rc,Op,Dc,Op],Pc),(()=>!0))]),(0,No.preceded)(Bp,Et),((e,t)=>["orderByClause",...e?[["stable"]]:[],...t])),Nt=(0,No.or)([ft,gt,xt,Ct]),Tt=(0,No.map)(Io([Mc,Bp],o),(e=>["returnClause",e])),kt=So(ft,(0,No.cut)((0,No.star)((0,No.preceded)(Bp,Nt))),(0,No.cut)((0,No.preceded)(Bp,Tt)),((e,t,n)=>["flworExpr",e,...t,n])),It=n(M,Al,((e,t)=>0===t.length?["sequenceType",...e]:["sequenceTypeUnion",["sequenceType",...e],...t.map((e=>["sequenceType",...e[1]]))])),St=So(Io([su,Bp],(0,No.optional)((0,No.preceded)(gl,(0,No.followed)((0,No.followed)(Xp,Op),Gl)))),(0,No.preceded)(Bp,It),Io([Op,Mc,Op],o),((e,t,n)=>["typeswitchExprCaseClause"].concat(e?[["variableBinding",...e]]:[],[t],[["resultExpr",n]]))),Bt=Bo((0,No.preceded)(ou,ko((0,No.delimited)(Uo,ko(l,Bp),Ho),Bp)),(0,No.plus)((0,No.followed)(St,Bp)),Io([Kc,Op],(0,No.optional)((0,No.preceded)(gl,(0,No.followed)(Xp,Op)))),Io([Mc,Op],o),((e,t,n,r)=>["typeswitchExpr",["argExpr",e],...t,["typeswitchExprDefaultClause",...n||[],["resultExpr",r]]])),Ot=So((0,No.preceded)(gl,Xp),(0,No.optional)((0,No.preceded)(Op,J)),(0,No.preceded)(ko(kc,Op),o),((e,t,n)=>["quantifiedExprInClause",["typedVariableBinding",["varName",...e],...t?[t]:[]],["sourceExpr",n]])),Ft=n(Ot,Bl,((e,t)=>[e,...t.map((e=>e[1]))])),Pt=So((0,No.or)([lu,cu]),(0,No.preceded)(Op,Ft),(0,No.preceded)(ko(uu,Bp),o),((e,t,n)=>["quantifiedExpr",["quantifier",e],...t,["predicateExpr",n]])),Dt=(0,No.map)(Io([Jl,Op,(0,No.or)([Kl,Yl]),Op],o),(e=>["deleteExpr",["targetExpr",e]])),Rt=So(Io([pu,Op],(0,No.optional)(Io([Wl,Op,zl],Op))),Io([Yl,Op],o),(0,No.preceded)(ko(du,Op),o),((e,t,n)=>e?["replaceExpr",["replaceValue"],["targetExpr",t],["replacementExpr",n]]:["replaceExpr",["targetExpr",t],["replacementExpr",n]])),Mt=(0,No.then)(Vp,(0,No.preceded)(ko(ul,Bp),o),((e,t)=>["transformCopy",e,["copySource",t]])),Lt=So(Io([hu,Op],n(Mt,Bl,((e,t)=>[e,...t.map((e=>e[1]))]))),Io([Bp,mu,Op],o),(0,No.preceded)(ko(Mc,Op),o),((e,t,n)=>["transformExpr",["transformCopies",...e],["modifyExpr",t],["returnExpr",n]])),$t=(0,No.or)([(0,No.followed)((0,No.map)((0,No.optional)((0,No.followed)(Io([Gl,Op],(0,No.or)([(0,No.map)(fu,(()=>["insertAsFirst"])),(0,No.map)(gu,(()=>["insertAsLast"]))])),Op)),(e=>e?["insertInto",e]:["insertInto"])),wu),(0,No.map)(bu,(()=>["insertAfter"])),(0,No.map)(yu,(()=>["insertBefore"]))]),Ut=So(Io([vu,Op,(0,No.or)([Kl,Yl]),Op],o),(0,No.preceded)(Op,$t),(0,No.preceded)(Op,o),((e,t,n)=>["insertExpr",["sourceExpr",e],t,["targetExpr",n]])),Ht=(0,No.then)(Io([xu,Op,Yl,Bp],o),Io([Op,Gl,Op],o),((e,t)=>["renameExpr",["targetExpr",e],["newNameExpr",t]])),Gt=(0,No.then)((0,No.plus)((0,No.then)((0,No.map)(Io([su,Op],(0,No.cut)(o)),(e=>["switchCaseExpr",e])),(0,No.cut)(Op),(e=>e))),(0,No.cut)(Io([Mc,Op],(0,No.cut)(o))),((e,t)=>["switchExprCaseClause",...e,["resultExpr",t]])),jt=So(Io([Au,Bp,Uo],(0,No.cut)(l)),(0,No.cut)(Io([Bp,Ho,(0,No.cut)(Bp)],(0,No.plus)((0,No.followed)(Gt,Bp)))),(0,No.cut)(Io([Kc,Op,Mc,Op],o)),((e,t,n)=>["switchExpr",["argExpr",e],...t,["switchExprDefaultClause",["resultExpr",n]]])),Xt=(0,No.map)(l,(e=>["queryBody",e])),qt=Io([Yc,Op,Uc,Op],(0,No.cut)((0,No.then)(Dp,(0,No.preceded)(ko(vl,Bp),p),((e,t)=>["namespaceDecl",["prefix",e],["uri",t]])))),Vt=(0,No.then)(Io([_u,Op,gl,Bp],(0,No.then)(Xp,(0,No.optional)((0,No.preceded)(Bp,J)),((e,t)=>[e,t]))),(0,No.cut)((0,No.or)([(0,No.map)(Io([Bp,ul,Bp],o),(e=>["varValue",e])),(0,No.map)(Io([Op,Eu],(0,No.optional)(Io([Bp,ul,Bp],o))),(e=>["external",...e?[["varValue",e]]:[]]))])),(([e,t],n)=>["varDecl",["varName",...e],...null!==t?[t]:[],n])),zt=Bo(Io([Ql,Op,(0,No.cut)((0,No.peek)((0,No.not)((0,No.followed)(ud,(0,No.not)(dl,[""])),["Cannot use reserved function name"])))],Xp),(0,No.cut)(Io([Bp,Uo,Bp],(0,No.optional)(Q))),(0,No.cut)(Io([Bp,Ho],(0,No.optional)(Io([Op,Gl,Op],M)))),(0,No.cut)((0,No.preceded)(Bp,(0,No.or)([(0,No.map)(R,(e=>["functionBody",e])),(0,No.map)(Eu,(()=>["externalDefinition"]))]))),((e,t,n,r)=>["functionDecl",["functionName",...e],["paramList",...t||[]],...n?[["typeDeclaration",...n]]:[],r])),Yt=Io([Yc,Op],(0,No.then)((0,No.star)((0,No.followed)((0,No.or)([L,kd]),Op)),(0,No.or)([Vt,zt]),((e,t)=>[t[0],...e,...t.slice(1)]))),Kt=(0,No.then)(Io([Yc,Op,Kc,Op],(0,No.or)([ec,Ql])),Io([Op,Uc,Op],p),((e,t)=>["defaultNamespaceDecl",["defaultNamespaceCategory",e],["uri",t]])),Jt=(0,No.or)([(0,No.map)((0,No.followed)(Io([Uc,Op],Dp),(0,No.preceded)(Bp,vl)),(e=>["namespacePrefix",e])),(0,No.map)(Io([Kc,Op,ec,Op],Uc),(()=>["defaultElementNamespace"]))]),Wt=Io([Nu,Op,Tu],So((0,No.optional)((0,No.preceded)(Op,Jt)),(0,No.preceded)(Bp,p),(0,No.optional)((0,No.then)(Io([Op,Tc,Op],p),(0,No.star)(Io([Bp,Bl,Bp],p)),((e,t)=>[e,...t]))),((e,t,n)=>["schemaImport",...e?[e]:[],["targetNamespace",t],...n?[n]:[]]))),Qt=Io([Nu,Op,ku],So((0,No.optional)((0,No.followed)(Io([Op,Uc,Op],Dp),(0,No.preceded)(Bp,vl))),(0,No.preceded)(Bp,p),(0,No.optional)((0,No.then)(Io([Op,Tc,Op],p),(0,No.star)(Io([Bp,Bl,Bp],p)),((e,t)=>[e,...t]))),((e,t)=>["moduleImport",["namespacePrefix",e],["targetNamespace",t]]))),Zt=(0,No.or)([Wt,Qt]),en=(0,No.map)(Io([Yc,Op,Kc,Op,Oc,Op],p),(e=>["defaultCollationDecl",e])),tn=(0,No.map)(Io([Yc,Op,Iu,Op],p),(e=>["baseUriDecl",e])),nn=(0,No.then)(Io([Yc,Op],(0,No.or)([(0,No.map)(Io([au,Op],Xp),(e=>["decimalFormatName",...e])),(0,No.map)(Io([Kc,Op],au),(()=>null))])),(0,No.star)((0,No.then)((0,No.preceded)(Op,Bd),(0,No.preceded)(ko(vl,Op),p),((e,t)=>["decimalFormatParam",["decimalFormatParamName",e],["decimalFormatParamValue",t]]))),((e,t)=>["decimalFormatDecl",...e?[e]:[],...t])),rn=(0,No.or)([Od,en,tn,Fd,Pd,Dd,Rd,nn]),an=(0,No.then)(Io([Yc,Op,Pu,Op],Xp),(0,No.preceded)(Op,p),((e,t)=>["optionDecl",["optionName",e],["optionContents",t]])),sn=(0,No.then)(Io([Yc,Op,Du,Op,Ru],(0,No.optional)(Io([Op,Gl],K))),(0,No.or)([(0,No.map)((0,No.preceded)(ko(ul,Bp),o),(e=>["varValue",e])),(0,No.map)(Io([Op,Eu],(0,No.optional)((0,No.preceded)(ko(ul,Bp),o))),(()=>["external"]))]),((e,t)=>["contextItemDecl",...e?[["contextItemType",e]]:[],t])),on=(0,No.then)((0,No.star)((0,No.followed)((0,No.or)([Kt,rn,qt,Zt]),(0,No.cut)(ko(hl,Bp)))),(0,No.star)((0,No.followed)((0,No.or)([sn,Yt,an]),(0,No.cut)(ko(hl,Bp)))),((e,t)=>0===e.length&&0===t.length?null:["prolog",...e,...t])),ln=Io([ku,Op,Uc,Op],(0,No.then)((0,No.followed)(Dp,ko(vl,Bp)),(0,No.followed)(p,ko(hl,Bp)),((e,t)=>["moduleDecl",["prefix",e],["uri",t]]))),cn=(0,No.then)(ln,(0,No.preceded)(Bp,on),((e,t)=>["libraryModule",e,...t?[t]:[]])),un=(0,No.then)(on,(0,No.preceded)(Bp,Xt),((e,t)=>["mainModule",...e?[e]:[],t])),pn=(0,No.map)(Io([Mu,Bp],(0,No.followed)((0,No.or)([(0,No.then)((0,No.preceded)($u,Op),p,(e=>["encoding",e])),(0,No.then)(Io([Lu,Op],p),(0,No.optional)(Io([Op,$u,Op],p)),((e,t)=>[["version",e],...t?[["encoding",t]]:[]]))]),(0,No.preceded)(Bp,hl))),(e=>["versionDecl",...e])),dn=(0,No.then)((0,No.optional)(ko(pn,Bp)),(0,No.or)([cn,un]),((e,t)=>["module",...e?[e]:[],t])),hn=(0,No.complete)(ko(dn,Bp));return(e,t)=>{c.clear(),t=hn(e,t);let n=1,r=1;for(let t=0;t<e.length+1;t++){if(c.has(t)){const e=c.get(t);e.line=r,e.ha=n}"\n"===e[t]?(r++,n=1):n++}return t}}const Vd=qd({mb:!1,Za:!1}),zd=qd({mb:!0,Za:!1}),Yd=qd({mb:!1,Za:!0}),Kd=qd({mb:!0,Za:!0});function Jd(e,t){var n=!!t.Z;if(t=!!t.debug,Ep.clear(),Cp.clear(),Xd.clear(),!0===(n=n?t?Kd(e,0):Yd(e,0):t?zd(e,0):Vd(e,0)).success)return n.value;throw t=(e=e.substring(0,n.offset).split("\n"))[e.length-1].length+1,new va({start:{offset:n.offset,line:e.length,ha:t},end:{offset:n.offset+1,line:e.length,ha:t+1}},"","",Error(`XPST0003: Failed to parse script. Expected ${[...new Set(n.expected)]}`))}const Wd="http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map".split(" ");function Qd(e,t,n,r){const i=[],a=[];Ci(e,"*").forEach((e=>{switch(e[0]){case"moduleImport":case"namespaceDecl":case"defaultNamespaceDecl":case"functionDecl":case"varDecl":break;default:throw Error("Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules")}}));const s=new Set;Ci(e,"moduleImport").forEach((e=>{const n=Ai(xi(e,"namespacePrefix"));if(e=Ai(xi(e,"targetNamespace")),s.has(e))throw Error(`XQST0047: The namespace "${e}" is imported more than once.`);s.add(e),gi(t,n,e)})),Ci(e,"namespaceDecl").forEach((e=>{const n=Ai(xi(e,"prefix"));if(e=Ai(xi(e,"uri")),"xml"===n||"xmlns"===n)throw li();if("http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"===e)throw li();gi(t,n,e)}));let o=null,l=null;for(const t of Ci(e,"defaultNamespaceDecl")){const e=Ai(xi(t,"defaultNamespaceCategory")),n=Ai(xi(t,"uri"));if(!n)throw si();if("http://www.w3.org/XML/1998/namespace"===n||"http://www.w3.org/2000/xmlns/"===n)throw li();if("function"===e){if(o)throw oi();o=n}else if("element"===e){if(l)throw oi();l=n}}o&&(t.v=o),l&&gi(t,"",l),Ci(e,"functionDecl").forEach((e=>{!function(e,t,n,r,i){var a=xi(e,"functionName"),s=_i(a,"prefix")||"";let o=_i(a,"URI");const l=Ai(a);if(null===o&&(o=""===s?null===t.v?"http://www.w3.org/2005/xpath-functions":t.v:t.$(s),!o&&s))throw ui(s);if(Wd.includes(o))throw ii();if(s=Ci(e,"annotation").map((e=>xi(e,"annotationName"))),a=s.every((e=>!_i(e,"URI")&&"private"!==Ai(e))),s=s.some((e=>!_i(e,"URI")&&"updating"===Ai(e))),!o)throw si();const c=Ti(e),u=Ci(xi(e,"paramList"),"param"),p=u.map((e=>xi(e,"varName"))),d=u.map((e=>Ti(e)));if(e=xi(e,"functionBody")){if(t.va(o,l,d.length))throw ai(o,l);if(!i)return;const u=go(e[1],{sa:!1,Z:!0}),h=new vi(t),m=p.map((e=>{let n=_i(e,"URI");const r=_i(e,"prefix");return e=Ai(e),r&&null===n&&(n=t.$(r||"")),yi(h,n,e)}));i=s?{j:d,arity:p.length,callFunction:(e,t,n,...r)=>(e=ze(Ge(e,-1,null,L.empty()),m.reduce(((e,t,n)=>(e[t]=$(r[n]),e)),Object.create(null))),u.s(e,t)),wb:!1,I:!0,cb:a,localName:l,namespaceURI:o,i:c}:{j:d,arity:p.length,callFunction:(e,t,n,...r)=>(e=ze(Ge(e,-1,null,L.empty()),m.reduce(((e,t,n)=>(e[t]=$(r[n]),e)),Object.create(null))),er(u,e,t)),wb:!1,I:!1,cb:a,localName:l,namespaceURI:o,i:c},n.push({ba:u,Eb:h}),r.push({arity:p.length,ba:u,Ab:i,localName:l,namespaceURI:o,cb:a})}else{if(s)throw Error("Updating external function declarations are not supported");i={j:d,arity:p.length,callFunction:(e,t,n,...r)=>{const i=n.va(o,l,p.length,!0);if(!i)throw Error(`XPST0017: Function Q{${o}}${l} with arity of ${p.length} not registered. ${Wr(l)}`);if(i.i.type!==c.type||i.j.some(((e,t)=>e.type!==d[t].type)))throw Error("External function declaration types do not match actual function");return i.callFunction(e,t,n,...r)},wb:!0,I:!1,localName:l,namespaceURI:o,cb:a,i:c}}fi(t,o,l,p.length,i)}(e,t,i,a,n)}));const c=[];return Ci(e,"varDecl").forEach((e=>{const r=Ni(xi(e,"varName"));let a=r.namespaceURI;if(null===a&&(a=t.$(r.prefix),!a&&r.prefix))throw ui(r.prefix);if(Wd.includes(a))throw ii();var s=xi(e,"external");let o,l;if(e=xi(e,"varValue"),null!==s?null!==(s=xi(s,"varValue"))&&(o=xi(s,"*")):null!==e&&(o=xi(e,"*")),c.some((e=>e.namespaceURI===a&&e.localName===r.localName)))throw Error(`XQST0049: The variable ${a?`Q{${a}}`:""}${r.localName} has already been declared.`);if(yi(t,a||"",r.localName),n&&(o&&(l=go(o,{sa:!1,Z:!0})),o&&!function(e,t,n){return(e=e.Ea[pi(t,n)])?e:null}(t,a||"",r.localName))){let e=null;bi(t,a,r.localName,((t,n)=>(e||(e=$(er(l,t,n))),e()))),i.push({ba:l,Eb:new vi(t)}),c.push({ba:l,localName:r.localName,namespaceURI:a})}})),a.forEach((e=>{if(!e.Ab.I&&e.ba.I)throw jn(`The function Q{${e.namespaceURI}}${e.localName} is updating but the %updating annotation is missing.`)})),{Ia:a.map((e=>e.Ab)),Ta:c,source:r,pa:e=>{s.forEach((e=>{_o(t,e)})),i.forEach((({ba:t,Eb:n})=>{s.forEach((e=>{_o(n,e)})),e.Ia.forEach((e=>{n.va(e.namespaceURI,e.localName,e.arity,!0)||e.cb&&fi(n,e.namespaceURI,e.localName,e.arity,e)})),e.Ta.forEach((e=>{n.eb(e.namespaceURI,e.localName)||yi(n,e.namespaceURI,e.localName)})),t.v(n)}))}}}function Zd(e,t,n,r,i,a,s){const o=t.Z?"XQuery":"XPath";return n=t.Ha?null:function(e,t,n,r,i,a,s,o){return(e=yo.get(e))&&(t=e[t+(a?"_DEBUG":"")])&&(t=t.find((e=>e.o===s&&e.v.every((e=>n(e.prefix)===e.namespaceURI))&&e.D.every((e=>void 0!==r[e.name]))&&e.kb.every((e=>i[e.prefix]===e.namespaceURI))&&e.l.every((e=>{const t=o(e.cc,e.arity);return t&&t.namespaceURI===e.Db.namespaceURI&&t.localName===e.Db.localName})))))?{ba:t.h,hc:!1}:null}(e,o,n,r,i,t.debug,a,s),null!==n?{state:n.hc?1:2,ba:n.ba}:{state:0,Zb:"string"==typeof e?Jd(e,t):vo(e)}}function eh(e,t,n,r,i,a,s){const o=new ti(n,r,a,s),l=new vi(o);switch(0<Object.keys(i).length&&Eo(),Object.keys(i).forEach((e=>{const t=i[e];_o(l,t),gi(l,e,t)})),"string"==typeof e&&(e=Co(e)),(n=Zd(e,t,n,r,i,a,s)).state){case 2:return{ga:l,ba:n.ba};case 1:return n.ba.v(l),wo(e,t.Z?"XQuery":"XPath",o,i,n.ba,t.debug,a),{ga:l,ba:n.ba};case 0:return n=function(e,t,n,r){const i=xi(e,"mainModule");if(!i)throw Error("Can not execute a library module.");const a=xi(i,"prolog");if(a){if(!t.Z)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");Eo(),(r=Qd(a,n,!0,r)).pa(r)}return Gi(e,new Qi(n)),uo(e=Ei(i,["queryBody","*"]),t)}(n.Zb,t,l,e),n.v(l),t.Ha||wo(e,t.Z?"XQuery":"XPath",o,i,n,t.debug,a),{ga:l,ba:n}}}function th(e,t,n,r){e=e.first();const i=t.first().h.reduce(((e,t)=>(e[t.key.value]=$(t.value()),e)),Object.create(null));t=i["."]?i["."]():L.empty(),delete i["."];try{const{ba:a,ga:s}=eh(function(e){if(C(e.type,1))return e.value;if(C(e.type,54))return e.value.node;throw Ze(`Unable to convert selector argument of type ${k[e.type]} to either an ${k[1]} or an ${k[54]} representing an XQueryX program while calling 'fontoxpath:evaluate'`)}(e),{sa:!1,Z:!0,debug:r.debug,Ha:r.Ha},(e=>n.$(e)),Object.keys(i).reduce(((e,t)=>(e[t]=t,e)),{}),{},"http://www.w3.org/2005/xpath-functions",((e,t)=>n.Sa(e,t))),o=!t.F(),l=new Ye({M:o?t.first():null,Aa:o?0:-1,ta:t,ra:Object.keys(i).reduce(((e,t)=>(e[s.eb(null,t)]=i[t],e)),Object.create(null))});return{ic:a.h(l,r).value,ec:e}}catch(t){Yr(e.value,t)}}function nh(e,t,n){if(1!==t.node.nodeType&&9!==t.node.nodeType)return[];const r=Q(e,t).reduce(((t,r)=>{for(const i of nh(e,r,n))t.push(i);return t}),[]);return n(t)&&r.unshift(t),r}const rh=(e,t,n,r,i)=>{if(!(e=i.first()))throw Qe("The context is absent, it needs to be present to use id function.");if(!C(e.type,53))throw Ze("The context item is not a node, it needs to be node to use id function.");const a=t.h,s=r.O().reduce(((e,t)=>(t.value.split(/\s+/).forEach((t=>{e[t]=!0})),e)),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=ne(a,t)))throw Error("FODC0001: the root node of the target node is not a document node.");return t=nh(a,t,(e=>1===e.node.nodeType&&(!(!(e=W(a,e,"id"))||!s[e])&&(s[e]=!1,!0)))),L.create(t.map((e=>ce(e))))},ih=(e,t,n,r,i)=>{if(!(e=i.first()))throw Qe("The context is absent, it needs to be present to use idref function.");if(!C(e.type,53))throw Ze("The context item is not a node, it needs to be node to use idref function.");const a=t.h,s=r.O().reduce(((e,t)=>(e[t.value]=!0,e)),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=ne(a,t)))throw Error("FODC0001: the root node of the context node is not a document node.");return t=nh(a,t,(e=>1===e.node.nodeType&&(!!(e=W(a,e,"idref"))&&e.split(/\s+/).some((e=>s[e]))))),L.create(t.map((e=>ce(e))))};function ah(e){switch(typeof e){case"object":return Array.isArray(e)?L.m(new oe(e.map((e=>$(ah(e)))))):null===e?L.empty():L.m(new he(Object.keys(e).map((t=>({key:y(t,1),value:$(ah(e[t]))})))));case"number":return L.m(y(e,3));case"string":return L.m(y(e,1));case"boolean":return e?L.aa():L.T();default:throw Error("Unexpected type in JSON parse")}}const sh=(e,t,n,r,i)=>{const a=L.m(y("duplicates",1)),s=(e=de(0,0,0,i,a)).F()?"use-first":e.first().value;return r.N((e=>L.m(new he(e.reduce(((e,t)=>(t.h.forEach((t=>{const n=e.findIndex((e=>pe(e.key,t.key)));if(0<=n)switch(s){case"reject":throw Error("FOJS0003: Duplicate encountered when merging maps.");case"use-last":return void e.splice(n,1,t);case"combine":return void e.splice(n,1,{key:t.key,value:$(L.create(e[n].value().O().concat(t.value().O())))});default:return}e.push(t)})),e)),[])))))};function oh(e,t,n){let r=1;const i=e.value;e=e.Pa(!0);let a=null;const s=Math.max(t-1,0);return-1!==e&&(a=Math.max(0,(null===n?e:Math.max(0,Math.min(e,n+(t-1))))-s)),L.create({next:e=>{for(;r<t;)i.next(e),r++;return null!==n&&r>=t+n?A:(e=i.next(e),r++,e)}},a)}function lh(e){return e.map((e=>C(e.type,19)?At(e,3):e))}function ch(e){if((e=lh(e)).some((e=>Number.isNaN(e.value))))return[y(NaN,3)];if(!(e=ns(e)))throw Error("FORG0006: Incompatible types to be converted to a common type");return e}const uh=(e,t,n,r,i,a)=>ue([i,a],(([e,t])=>{if(1/0===e.value)return L.empty();if(-1/0===e.value)return t&&1/0===t.value?L.empty():r;if(t){if(isNaN(t.value))return L.empty();1/0===t.value&&(t=null)}return isNaN(e.value)?L.empty():oh(r,Math.round(e.value),t?Math.round(t.value):null)})),ph=(e,t,n,r,i)=>{if(r.F())return i;if(!(e=ns(e=lh(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((e=>C(e.type,2))))throw Error("FORG0006: items passed to fn:sum are not all numeric.");return t=e.reduce(((e,t)=>e+t.value),0),e.every((e=>C(e.type,5)))?L.m(y(t,5)):e.every((e=>C(e.type,3)))?L.m(y(t,3)):e.every((e=>C(e.type,4)))?L.m(y(t,4)):L.m(y(t,6))};var dh=[].concat(kr,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"boolean",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:(e,t,n,r)=>r.fa()?L.aa():L.T()},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"true",j:[],i:{type:0,g:3},callFunction:()=>L.aa()},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"not",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:(e,t,n,r)=>!1===r.fa()?L.aa():L.T()},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"false",j:[],i:{type:0,g:3},callFunction:()=>L.T()}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"last",j:[],i:{type:5,g:3},callFunction:e=>{if(null===e.M)throw Qe("The fn:last() function depends on dynamic context, which is absent.");let t=!1;return L.create({next:()=>{if(t)return A;const n=e.ta.Pa();return t=!0,_(y(n,5))}},1)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"position",j:[],i:{type:5,g:3},callFunction:e=>{if(null===e.M)throw Qe("The fn:position() function depends on dynamic context, which is absent.");return L.m(y(e.Aa+1,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-dateTime",j:[],i:{type:10,g:3},callFunction:e=>L.m(y(Xe(e),10))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-date",j:[],i:{type:7,g:3},callFunction:e=>L.m(y(ke(Xe(e),7),7))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-time",j:[],i:{type:8,g:3},callFunction:e=>L.m(y(ke(Xe(e),8),8))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"implicit-timezone",j:[],i:{type:17,g:3},callFunction:e=>L.m(y(qe(e),17))}],Sr,Lr,jr,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"years-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.bb(),5))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"months-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.ab(),5))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"days-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.$a(),5))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getHours(),5))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getMinutes(),5))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-duration",j:[{type:18,g:0}],i:{type:4,g:0},callFunction:(e,t,n,r)=>r.F()?r:L.m(y(r.first().value.getSeconds(),4))}],qr,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},callFunction:rh},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2}],i:{type:54,g:2},callFunction:(e,t,n,r)=>rh(e,t,0,r,L.m(e.M))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},callFunction:ih},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2}],i:{type:53,g:2},callFunction:(e,t,n,r)=>ih(e,t,0,r,L.m(e.M))}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"parse-json",j:[{type:1,g:3}],i:{type:59,g:0},callFunction:(e,t,n,r)=>{let i;try{i=JSON.parse(r.first().value)}catch(e){throw Error("FOJS0001: parsed JSON string contains illegal JSON.")}return ah(i)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"contains",j:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},callFunction:(e,t,n,r,i)=>ue([r,i],(([e,t])=>e.h.some((e=>pe(e.key,t)))?L.aa():L.T()))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"entry",j:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r,i)=>r.map((e=>new he([{key:e,value:$(i)}])))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"for-each",j:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},callFunction:(e,t,n,r,i)=>ue([r,i],(([r,i])=>Je(r.h.map((r=>i.value.call(void 0,e,t,n,L.m(r.key),r.value()))))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"get",j:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},callFunction:de},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"keys",j:[{type:61,g:3}],i:{type:46,g:2},callFunction:(e,t,n,r)=>ue([r],(([e])=>L.create(e.h.map((e=>e.key)))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},callFunction:sh},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r)=>sh(e,0,0,r,L.m(new he([{key:y("duplicates",1),value:()=>L.m(y("use-first",1))}])))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"put",j:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r,i,a)=>ue([r,i],(([e,t])=>{const n=(e=e.h.concat()).findIndex((e=>pe(e.key,t)));return 0<=n?e.splice(n,1,{key:t,value:$(a)}):e.push({key:t,value:$(a)}),L.m(new he(e))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"remove",j:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r,i)=>ue([r],(([e])=>{const t=e.h.concat();return i.N((e=>(e.forEach((e=>{const n=t.findIndex((t=>pe(t.key,e)));0<=n&&t.splice(n,1)})),L.m(new he(t)))))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"size",j:[{type:61,g:3}],i:{type:5,g:3},callFunction:(e,t,n,r)=>r.map((e=>y(e.h.length,5)))}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pi",j:[],i:{type:3,g:3},callFunction:()=>L.m(y(Math.PI,3))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.pow(Math.E,e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.pow(10,e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.log(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.log10(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pow",j:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},callFunction:(e,t,n,r,i)=>i.N((([e])=>r.map((t=>1!==Math.abs(t.value)||Number.isFinite(e.value)?y(Math.pow(t.value,e.value),3):y(1,3)))))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sqrt",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.sqrt(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.sin(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"cos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.cos(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"tan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.tan(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"asin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.asin(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"acos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.acos(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(Math.atan(e.value),3)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan2",j:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},callFunction:(e,t,n,r,i)=>i.N((([e])=>r.map((t=>y(Math.atan2(t.value,e.value),3)))))}],Fn,an,[{namespaceURI:"http://fontoxpath/operators",localName:"to",j:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},callFunction:(e,t,n,r,i)=>{if(e=r.first(),i=i.first(),null===e||null===i)return L.empty();let a=e.value;return i=i.value,a>i?L.empty():L.create({next:()=>_(y(a++,5))},i-a+1)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"QName",j:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},callFunction:(e,t,n,r,i)=>ue([r,i],(([e,t])=>{if(!st(t=t.value,23))throw Error("FOCA0002: The provided QName is invalid.");if(null===(e=e&&e.value||null)&&t.includes(":"))throw Error("FOCA0002: The URI of a QName may not be empty if a prefix is provided.");if(r.F())return L.m(y(new U("",null,t),23));if(!t.includes(":"))return L.m(y(new U("",e,t),23));const[n,i]=t.split(":");return L.m(y(new U(n,e,i),23))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"prefix-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:(e,t,n,r)=>ue([r],(([e])=>null===e?L.empty():(e=e.value).prefix?L.m(y(e.prefix,24)):L.empty()))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"local-name-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(e.value.localName,24)))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"namespace-uri-from-QName",j:[{type:23,g:0}],i:{type:20,g:0},callFunction:(e,t,n,r)=>r.map((e=>y(e.value.namespaceURI||"",20)))}],[{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r.X({empty:()=>L.aa(),multiple:()=>L.T(),m:()=>L.T()}),localName:"empty",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r.X({empty:()=>L.T(),multiple:()=>L.aa(),m:()=>L.aa()}),localName:"exists",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>oh(r,1,1),localName:"head",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>oh(r,2,null),localName:"tail",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],callFunction:(e,t,n,r,i,a)=>r.F()?a:a.F()?r:(e=r.O(),0>(i=i.first().value-1)?i=0:i>e.length&&(i=e.length),t=e.slice(i),L.create(e.slice(0,i).concat(a.O(),t))),localName:"insert-before",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3}],callFunction:(e,t,n,r,i)=>(e=i.first().value,!(r=r.O()).length||1>e||e>r.length||r.splice(e-1,1),L.create(r)),localName:"remove",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r.N((e=>L.create(e.reverse()))),localName:"reverse",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3}],callFunction:(e,t,n,r,i)=>uh(0,0,0,r,i,L.empty()),localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],callFunction:uh,localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r,localName:"unordered",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>{const i=rt(r,t).O();return L.create(i).filter(((e,t)=>i.slice(0,t).every((t=>!Rn(e,t)))))},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:1,g:3}],callFunction(){throw Error("FOCH0002: No collations are supported")},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:46,g:3}],callFunction:(e,t,n,r,i)=>i.N((([n])=>rt(r,t).map(((t,r)=>La("eqOp",t.type,n.type)(t,n,e)?y(r+1,5):y(-1,5))).filter((e=>-1!==e.value)))),localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],callFunction(){throw Error("FOCH0002: No collations are supported")},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:59,g:2},{type:59,g:2}],callFunction:(e,t,n,r,i)=>{let a=!1;const s=$n(e,t,n,r,i);return L.create({next:()=>{if(a)return A;const e=s.next(0);return e.done?e:(a=!0,_(y(e.value,0)))}})},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],callFunction(){throw Error("FOCH0002: No collations are supported")},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{let i=!1;return L.create({next:()=>{if(i)return A;const e=r.Pa();return i=!0,_(y(e,5))}})},localName:"count",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>{if(r.F())return r;if(!(e=ns(e=lh(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((e=>C(e.type,2))))throw Error("FORG0006: items passed to fn:avg are not all numeric.");return t=e.reduce(((e,t)=>e+t.value),0)/e.length,e.every((e=>C(e.type,5)||C(e.type,3)))?L.m(y(t,3)):e.every((e=>C(e.type,4)))?L.m(y(t,4)):L.m(y(t,6))},localName:"avg",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>r.F()?r:(e=ch(r.O()),L.m(e.reduce(((e,t)=>e.value<t.value?t:e)))),localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction(){throw Error("FOCH0002: No collations are supported")},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>r.F()?r:(e=ch(r.O()),L.m(e.reduce(((e,t)=>e.value>t.value?t:e)))),localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction(){throw Error("FOCH0002: No collations are supported")},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>ph(e,t,0,r,L.m(y(0,5))),localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:3}},{j:[{type:46,g:2},{type:46,g:0}],callFunction:ph,localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(!r.F()&&!r.oa())throw Error("FORG0003: The argument passed to fn:zero-or-one contained more than one item.");return r},localName:"zero-or-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(r.F())throw Error("FORG0004: The argument passed to fn:one-or-more was empty.");return r},localName:"one-or-more",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:1}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(!r.oa())throw Error("FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.");return r},localName:"exactly-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:3}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,i)=>{if(r.F())return r;const a=i.first(),s=a.o;if(1!==s.length)throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.filter((r=>{if(r=Mt(s[0],L.m(r),t,"fn:filter",!1),!(r=a.value.call(void 0,e,t,n,r)).oa()||!C(r.first().type,0))throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.first().value}))},localName:"filter",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,i)=>{if(r.F())return r;const a=i.first(),s=a.o;if(1!==s.length)throw Error("XPTY0004: signature of function passed to fn:for-each is incompatible.");const o=r.value;let l;return L.create({next:r=>{for(;;){if(!l){var i=o.next(0);if(i.done)return i;i=Mt(s[0],L.m(i.value),t,"fn:for-each",!1),l=a.value.call(void 0,e,t,n,i).value}if(!(i=l.next(r)).done)return i;l=null}}})},localName:"for-each",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,i,a)=>{if(r.F())return r;const s=a.first(),o=s.o;if(2!==o.length)throw Error("XPTY0004: signature of function passed to fn:fold-left is incompatible.");return r.N((r=>r.reduce(((r,i)=>(r=Mt(o[0],r,t,"fn:fold-left",!1),i=Mt(o[1],L.m(i),t,"fn:fold-left",!1),s.value.call(void 0,e,t,n,r,i))),i)))},localName:"fold-left",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,i,a)=>{if(r.F())return r;const s=a.first(),o=s.o;if(2!==o.length)throw Error("XPTY0004: signature of function passed to fn:fold-right is incompatible.");return r.N((r=>r.reduceRight(((r,i)=>(r=Mt(o[0],r,t,"fn:fold-right",!1),i=Mt(o[1],L.m(i),t,"fn:fold-right",!1),s.value.call(void 0,e,t,n,i,r))),i)))},localName:"fold-right",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(!t.Ua)throw Error("serialize() called but no xmlSerializer set in execution parameters.");if(!(e=r.O()).every((e=>C(e.type,53))))throw Error("Expected argument to fn:serialize to resolve to a sequence of Nodes.");return L.m(y(e.map((e=>t.Ua.serializeToString(Hr(e.value,t,!1)))).join(""),1))},localName:"serialize",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}],yn,[{j:[{type:59,g:3},{type:61,g:3}],callFunction:(e,t,n,r,i)=>{let a,s;return L.create({next:()=>{a||({ic:a,ec:s}=th(r,i,n,t));try{return a.next(0)}catch(e){Yr(s.value,e)}}})},localName:"evaluate",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:59,g:2}},{j:[],callFunction:()=>L.m(y("3.33.0",1)),localName:"version",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:1,g:3}}],[{j:[{type:23,g:3},{type:5,g:3}],callFunction:(e,t,n,r,i)=>ue([r,i],(([e,t])=>{const r=n.va(e.value.namespaceURI,e.value.localName,t.value);return null===r?L.empty():(e=new H({j:r.j,arity:t.value,localName:e.value.localName,namespaceURI:e.value.namespaceURI,i:r.i,value:r.callFunction}),L.m(e))})),localName:"function-lookup",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{g:0,type:60}},{j:[{type:60,g:3}],callFunction:(e,t,n,r)=>ue([r],(([e])=>e.Ya()?L.empty():L.m(y(new U("",e.l,e.D),23)))),localName:"function-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:60,g:3}],callFunction:(e,t,n,r)=>ue([r],(([e])=>L.m(y(e.v,5)))),localName:"function-arity",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}}]);class hh{constructor(e){this.h=e}createAttributeNS(e,t){return this.h.createAttributeNS(e,t)}createCDATASection(e){return this.h.createCDATASection(e)}createComment(e){return this.h.createComment(e)}createDocument(){return this.h.createDocument()}createElementNS(e,t){return this.h.createElementNS(e,t)}createProcessingInstruction(e,t){return this.h.createProcessingInstruction(e,t)}createTextNode(e){return this.h.createTextNode(e)}}var mh=Symbol("IS_XPATH_VALUE_SYMBOL");function fh(e){return e&&"object"==typeof e&&"lookupNamespaceURI"in e?t=>e.lookupNamespaceURI(t||null):()=>null}function gh(e){return({prefix:t,localName:n})=>t?null:{namespaceURI:e,localName:n}}function yh(e,t,n,r,i,a){null==r&&(r=r||{});const s=i?{jb:i.logger||{trace:console.log.bind(console)},Ma:i.documentWriter,kb:i.moduleImports,Cb:i.namespaceResolver,ac:i.functionNameResolver,Ja:i.nodesFactory,Ua:i.xmlSerializer}:{jb:{trace:console.log.bind(console)},kb:{},Cb:null,Ja:null,Ma:null,Ua:null},o=new ae(null===n?new q:n);n=s.kb||Object.create(null);var l=void 0===i.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":i.defaultFunctionNamespaceURI;const c=eh(e,a,s.Cb||fh(t),r,n,l,s.ac||gh(l));e=t?Ue(0,t):L.empty(),t=!s.Ja&&a.Z?new rr(t):new hh(s.Ja),n=s.Ma?new z(s.Ma):V,l=s.Ua;const u=Object.keys(r).reduce(((e,t)=>{const n=r[t];return e[`Q{}${t}[0]`]=n&&"object"==typeof n&&mh in n?()=>L.create(n.zb):()=>Ue(0,r[t]),e}),Object.create(null));let p;for(const e of Object.keys(c.ga.Ea))u[e]||(u[e]=()=>(0,c.ga.Ea[e])(p,d));p=new Ye({M:e.first(),Aa:0,ta:e,ra:u});const d=new Ke(a.debug,a.Ha,o,t,n,i.currentContext,new Map,s.jb,l);return{tb:p,ub:d,ba:c.ba}}function bh(e,t){const n={};let r=0,i=!1,a=null;return{next:()=>{if(i)return A;for(;r<e.h.length;){const i=e.h[r].key.value;if(!a){const o=e.h[r];var s=o.value().X({default:e=>e,multiple:()=>{throw Error(`Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key ${o.key.value} holds multiple items`)}}).first();if(null===s){n[i]=null,r++;continue}a=vh(s,t)}s=a.next(0),a=null,n[i]=s.value,r++}return i=!0,_(n)}}}function wh(e,t){const n=[];let r=0,i=!1,a=null;return{next:()=>{if(i)return A;for(;r<e.h.length;){if(!a){var s=e.h[r]().X({default:e=>e,multiple:()=>{throw Error("Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.")}}).first();if(null===s){n[r++]=null;continue}a=vh(s,t)}s=a.next(0),a=null,n[r++]=s.value}return i=!0,_(n)}}}function vh(e,t){if(C(e.type,61))return bh(e,t);if(C(e.type,62))return wh(e,t);if(C(e.type,23)){const t=e.value;return{next:()=>_(`Q{${t.namespaceURI||""}}${t.localName}`)}}switch(e.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:const n=e.value;return{next:()=>_(Ie(n))};case 47:case 53:case 54:case 55:case 56:case 57:case 58:const r=e.value;return{next:()=>_(Hr(r,t,!1))};default:return{next:()=>_(e.value)}}}dh.forEach((e=>{Zr(e.namespaceURI,e.localName,e.j,e.i,e.callFunction)}));var xh={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};function Ah(e,t,n,r){switch(n){case 3:return t.fa();case 2:return(t=rt(t,r).O()).length?t.map((e=>At(e,1).value)).join(" "):"";case 10:return(t=rt(t,r).O()).length?t.map((e=>e.value+"")):[];case 1:return null!==(t=t.first())&&C(t.type,2)?t.value:NaN;case 9:if(null===(t=t.first()))return null;if(!C(t.type,53))throw Error("Expected XPath "+Vr(e)+" to resolve to Node. Got "+k[t.type]);return Hr(t.value,r,!1);case 7:if(!(t=t.O()).every((e=>C(e.type,53))))throw Error("Expected XPath "+Vr(e)+" to resolve to a sequence of Nodes.");return t.map((e=>Hr(e.value,r,!1)));case 11:if(1!==(t=t.O()).length)throw Error("Expected XPath "+Vr(e)+" to resolve to a single map.");if(!C((t=t[0]).type,61))throw Error("Expected XPath "+Vr(e)+" to resolve to a map");return bh(t,r).next(0).value;case 12:if(1!==(t=t.O()).length)throw Error("Expected XPath "+Vr(e)+" to resolve to a single array.");if(!C((t=t[0]).type,62))throw Error("Expected XPath "+Vr(e)+" to resolve to an array");return wh(t,r).next(0).value;case 13:return t.O().map((t=>{if(!C(t.type,2))throw Error("Expected XPath "+Vr(e)+" to resolve to numbers");return t.value}));case 99:const n=t.value;let i=null,a=!1;const s=()=>{for(;!a;){if(!i){var e=n.next(0);if(e.done){a=!0;break}i=vh(e.value,r)}return e=i.next(0),i=null,e}return Promise.resolve({done:!0,value:null})};return"asyncIterator"in Symbol?{[Symbol.asyncIterator](){return this},next:()=>new Promise((e=>e(s()))).catch((t=>{Yr(e,t)}))}:{next:()=>new Promise((e=>e(s())))};case 14:return t.O().map((e=>vh(e,r).next(0).value));default:return(t=t.O()).every((e=>C(e.type,53)&&!C(e.type,47)))?(t=t.map((e=>Hr(e.value,r,!1))),1===t.length?t[0]:t):1===t.length?C((t=t[0]).type,62)?wh(t,r).next(0).value:C(t.type,61)?bh(t,r).next(0).value:nt(t,r).first().value:rt(L.create(t),r).O().map((e=>e.value))}}xh[xh.ANY]="ANY",xh[xh.NUMBER]="NUMBER",xh[xh.STRING]="STRING",xh[xh.BOOLEAN]="BOOLEAN",xh[xh.NODES]="NODES",xh[xh.FIRST_NODE]="FIRST_NODE",xh[xh.STRINGS]="STRINGS",xh[xh.MAP]="MAP",xh[xh.ARRAY]="ARRAY",xh[xh.NUMBERS]="NUMBERS",xh[xh.ALL_RESULTS]="ALL_RESULTS",xh[xh.ASYNC_ITERATOR]="ASYNC_ITERATOR";let _h=!1,Eh=null;var Ch={getPerformanceSummary(){const e=Eh.getEntriesByType("measure").filter((e=>e.name.startsWith("XPath: ")));return Array.from(e.reduce(((e,t)=>{var n=t.name.substring(7);return e.has(n)?((n=e.get(n)).times+=1,n.totalDuration+=t.duration):e.set(n,{xpath:n,times:1,totalDuration:t.duration,average:0}),e}),new Map).values()).map((e=>(e.average=e.totalDuration/e.times,e))).sort(((e,t)=>t.totalDuration-e.totalDuration))},setPerformanceImplementation(e){Eh=e},startProfiling(){if(null===Eh)throw Error("Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile");Eh.clearMarks(),Eh.clearMeasures(),_h=!0},stopProfiling(){_h=!1}};let Nh=0;const Th=(e,t,n,r,i,a)=>{if(i=i||0,!e||"string"!=typeof e&&!("nodeType"in e))throw new TypeError("Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.");let s,o;a=a||{};try{const i=yh(e,t,n||null,r||{},a,{sa:"XQueryUpdate3.1"===a.language,Z:"XQuery3.1"===a.language||"XQueryUpdate3.1"===a.language,debug:!!a.debug,Ha:!!a.disableCache});var l=i.tb;s=i.ub,o=i.ba}catch(t){Yr(e,t)}if(o.I)throw Error("XUST0001: Updating expressions should be evaluated as updating expressions");if(3===i&&t&&"object"==typeof t&&"nodeType"in t&&(n=o.D(),t=X(t),null!==n&&!t.includes(n)))return!1;try{t=e,_h&&("string"!=typeof t&&(t=Vr(t)),Eh.mark(`${t}${0===Nh?"":"@"+Nh}`),Nh++);const n=Ah(e,er(o,l,s),i,s);return i=e,_h&&("string"!=typeof i&&(i=Vr(i)),Nh--,l=`${i}${0===Nh?"":"@"+Nh}`,Eh.measure(`XPath: ${i}`,l),Eh.clearMarks(l)),n}catch(t){Yr(e,t)}};function kh(e,t,n,r,i){return Th(e,t,n,r,Th.Mb,i)}function Ih(e,t,n,r){return{pendingUpdateList:e.da.map((e=>e.h(r))),xdmValue:Ah(t,L.create(e.J),n,r)}}function Sh(e,t,n){return{code:e,ua:t,H:n,isAstAccepted:!0}}function Bh(e){return{isAstAccepted:!1,reason:e}}function Oh(e,t){return e.isAstAccepted?t(e):e}function Fh(e,t){return e.isAstAccepted?t(e):[e,null]}function Ph(e,t,n){return Oh(e,(e=>{switch(e.ua.type){case 0:return e;case 1:return Oh(mm(n,e,"nodes"),(e=>Oh(mm(n,t,"contextItem"),(t=>Sh(`(function () {\n\t\t\t\t\t\t\tconst { done, value } = ${e.code}(${t.code}).next();\n\t\t\t\t\t\t\treturn done ? null : value;\n\t\t\t\t\t\t})()`,{type:0},[...e.H,...t.H])))));default:throw Error(`invalid generated code type to convert to value: ${e.ua.type}`)}}))}function Dh(e,t,n,r){return e=Ph(e,n,r),t&&0===t.type&&3===t.g?e:Oh(e,(e=>Sh(`!!${e.code}`,{type:0},e.H)))}function Rh(e,t,n){return t?e.isAstAccepted&&0!==e.ua.type?Bh("Atomization only implemented for single value"):C(t.type,1)?e:C(t.type,47)?Oh(mm(n,e,"attr"),(e=>Sh(`(${e.code} ? domFacade.getData(${e.code}) : null)`,{type:0},e.H))):Bh("Atomization only implemented for string and attribute"):Bh("Can not atomize value if type was not annotated")}function Mh(e,t,n,r){return r=Rh(e=Ph(e,n,r),t,r),lt(t)?Oh(r,(e=>Sh(`${e.code} ?? ''`,{type:0},e.H))):r}function Lh(e,t,n){return Oh(mm(n,e,"node"),(e=>1===e.ua.type?e:t&&!C(t.type,53)?Bh("Can not evaluate to node if expression does not result in nodes"):Sh(`(function () {\n\t\t\t\tif (${e.code} !== null && !${e.code}.nodeType) {\n\t\t\t\t\tthrow new Error('XPDY0050: The result of the expression was not a node');\n\t\t\t\t}\n\t\t\t\treturn ${e.code};\n\t\t\t})()`,{type:0},e.H)))}function $h(e,t){return Oh(e,(e=>Oh(t,(t=>{if(0!==e.ua.type||0!==t.ua.type)throw Error("can only use emitAnd with value expressions");return Sh(`${e.code} && ${t.code}`,{type:0},[...e.H,...t.H])}))))}function Uh(e,t,n,r){return(e=Ei(e,[t,"*"]))?r.h(e,n,r):[Bh(`${t} expression not found`),null]}Object.assign(Th,{jc:14,ANY_TYPE:0,Lb:12,Mb:99,BOOLEAN_TYPE:3,Ob:9,Rb:11,Tb:7,Ub:13,NUMBER_TYPE:1,Vb:10,STRING_TYPE:2,kc:"XPath3.1",lc:"XQuery3.1",Yb:"XQueryUpdate3.1"}),Object.assign(Th,{ALL_RESULTS_TYPE:14,ANY_TYPE:0,ARRAY_TYPE:12,ASYNC_ITERATOR_TYPE:99,BOOLEAN_TYPE:3,FIRST_NODE_TYPE:9,MAP_TYPE:11,NODES_TYPE:7,NUMBERS_TYPE:13,NUMBER_TYPE:1,STRINGS_TYPE:10,STRING_TYPE:2,XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"});const Hh={equalOp:"eqOp",notEqualOp:"neOp",lessThanOrEqualOp:"leOp",lessThanOp:"ltOp",greaterThanOrEqualOp:"geOp",greaterThanOp:"gtOp"},Gh={eqOp:"eqOp",neOp:"neOp",leOp:"geOp",ltOp:"gtOp",geOp:"leOp",gtOp:"ltOp"};function jh(e,t,n,r){const i=_i(Ei(e,["firstOperand","*"]),"type"),a=_i(Ei(e,["secondOperand","*"]),"type");if(!i||!a)return Bh("Can not generate code for value compare without both types");var s=[47,1];if(!s.includes(i.type)||!s.includes(a.type))return Bh(`Unsupported types in compare: [${k[i.type]}, ${k[a.type]}]`);if(!(s=new Map([["eqOp","==="],["neOp","!=="]])).has(t))return Bh(t+" not yet implemented");const o=s.get(t);return[t]=Uh(e,"firstOperand",n,r),t=Rh(t=Ph(t,n,r),i,r),Oh(mm(r,t,"first"),(t=>{var[s]=Uh(e,"secondOperand",n,r);return s=Rh(s=Ph(s,n,r),a,r),Oh(mm(r,s,"second"),(e=>{const n=[];return lt(i)&&n.push(`${t.code} === null`),lt(a)&&n.push(`${e.code} === null`),Sh(`(${n.length?`${n.join(" || ")} ? null : `:""}${t.code} ${o} ${e.code})`,{type:0},[...t.H,...e.H])}))}))}function Xh(e,t,n,r,i,a){var s=_i(Ei(e,[t,"*"]),"type");const o=_i(Ei(e,[n,"*"]),"type");if(!s||!o)return Bh("Can not generate code for general compare without both types");var l=[47,1];if(!l.includes(s.type)||!l.includes(o.type))return Bh(`Unsupported types in compare: [${k[s.type]}, ${k[o.type]}]`);if(!(l=new Map([["eqOp","==="],["neOp","!=="]])).has(r))return Bh(r+" not yet implemented");const c=l.get(r);return[t]=Uh(e,t,i,a),s=Rh(t=Ph(t,i,a),s,a),Oh(mm(a,s,"single"),(t=>{const[r]=Uh(e,n,i,a);return Oh(mm(a,r,"multiple"),(e=>{if(1!==e.ua.type)return Bh("can only generate general compare for a single value and a generator");const n=gm(a,fm(a,"n")),r=Rh(n,o,a);return Oh(i,(i=>Oh(r,(r=>Sh(`(function () {\n\t\t\t\t\t\t\t\t\tfor (const ${n.code} of ${e.code}(${i.code})) {\n\t\t\t\t\t\t\t\t\t\t${r.H.join("\n")}\n\t\t\t\t\t\t\t\t\t\tif (${r.code} ${c} ${t.code}) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})()`,{type:0},[...t.H,...n.H,...i.H,...e.H])))))}))}))}function qh(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}const Vh={"false#0":function(){return Sh("false",{type:0},[])},"local-name#0":Qh,"local-name#1":Qh,"name#0":Wh,"name#1":Wh,"not#1":function(e,t,n){var r=Ei(e,["arguments","*"]);return e=_i(r,"type"),[r]=n.h(r,t,n),Oh(t=Dh(r,e,t,n),(e=>Sh(`!${e.code}`,{type:0},e.H)))},"true#0":function(){return Sh("true",{type:0},[])}},zh={"http://fontoxml.com/fontoxpath":["version#0"],"":["root#1","path#1"]};function Yh(e,t,n,r){if(e.length!==t.length||t.some((e=>4===e)))return Bh("Not supported: variadic function or mismatch in argument count");if(0===e.length)return Sh("",{type:0},[]);const[i,...a]=e,[s,...o]=t;return e=mm(r,function(e,t,n,r){const[i]=r.h(e,n,r);if(e=_i(e,"type"),!t||2===t.g||1===t.g)return Bh("Not supported: sequence arguments with multiple items");if(C(t.type,53))return Lh(t=Ph(i,n,r),e,r);switch(t.type){case 59:return Ph(i,n,r);case 0:return Dh(i,e,n,r);case 1:return Mh(i,e,n,r)}return Bh(`Argument types not supported: ${e?k[e.type]:"unknown"} -> ${k[t.type]}`)}(i,s,n,r),"arg"),0===a.length?e:Oh(e,(e=>Oh(Yh(a,o,n,r),(t=>Sh(`${e.code}, ${t.code}`,{type:0},[...e.H,...t.H])))))}function Kh(e,t,n){const{localName:r,namespaceURI:i}=Ni(xi(e,"functionName")),a=Ci(xi(e,"arguments"),"*");var s=a.length;const o=`${r}#${s}`,l=i===n.D;if(l){const r=Vh[o];if(void 0!==r)return r(e,t,n)}return(e=zh[l?"":i])&&!e.includes(o)?Bh(`Not supported: built-in function not on allow list: ${o}`):(s=Qr(i,r,s))?s.I?Bh("Not supported: updating functions"):(t=Oh(t=Yh(a,s.j,t,n),(e=>Sh(`runtimeLib.callFunction(domFacade, ${qh(i)}, ${qh(r)}, [${e.code}], options)`,{type:0},e.H))),function(e,t){return Oh(e,(e=>t&&2!==t.g&&1!==t.g&&([0,1].includes(t.type)||C(t.type,53))?e:Bh(`Function return type ${k[t.type]} not supported`)))}(t,s.i)):Bh(`Unknown function / arity: ${o}`)}function Jh(e,t,n,r){if((e=Ei(e,["arguments","*"]))&&"contextItemExpr"!==e[0]){const r=_i(e,"type");if(!r||!C(r.type,53))return Bh("name function only implemented if arg is a node");[e]=n.h(e,t,n)}else e=function(e,t){return Oh(mm(t,e,"contextItem"),(e=>Sh(e.code,{type:0},[...e.H,`if (${e.code} === undefined || ${e.code} === null) {\n\t\t\t\t\tthrow errXPDY0002('The function which was called depends on dynamic context, which is absent.');\n\t\t\t\t}`])))}(t,n);return Oh(mm(n,t=Ph(e,t,n),"arg"),(e=>Sh(`(${e.code} ? ${r(e.code)} : '')`,{type:0},e.H)))}function Wh(e,t,n){return Jh(e,t,n,(e=>`(((${e}.prefix || '').length !== 0 ? ${e}.prefix + ':' : '')\n\t\t+ (${e}.localName || ${e}.target || ''))`))}function Qh(e,t,n){return Jh(e,t,n,(e=>`(${e}.localName || ${e}.target || '')`))}function Zh(e,t,n,r){const[i,a]=Uh(e,"firstOperand",n,r);var s=_i(Ei(e,["firstOperand","*"]),"type");s=Dh(i,s,n,r);const[o,l]=Uh(e,"secondOperand",n,r);s=Oh(s,(i=>{var a=_i(Ei(e,["secondOperand","*"]),"type");return Oh(a=Dh(o,a,n,r),(e=>Sh(`(${i.code} ${t} ${e.code})`,{type:0},[...i.H,...e.H])))}));return[s,"&&"===t?ia(a,l):a===l?a:null]}function em(e,t,n){return Oh(e,(e=>Oh(t,(t=>Oh(n,(n=>Sh(`for (${e.code}) {\n\t\t\t\t\t\t${t.H.join("\n")}\n\t\t\t\t\t\tif (!(${t.code})) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${n.H.join("\n")}\n\t\t\t\t\t\t${n.code}\n\t\t\t\t\t}`,{type:2},e.H)))))))}function tm(e,t,n,r,i){const a=t?`, "${t}"`:"";return t=Oh(r,(e=>Oh(i,(t=>Sh(`let ${e.code} = domFacade.getFirstChild(${t.code}${a});\n\t\t\t\t\t\t\t${e.code};\n\t\t\t\t\t\t\t${e.code} = domFacade.getNextSibling(${e.code}${a})`,{type:2},[...e.H,...t.H]))))),em(t,e,n)}function nm(e,t,n,r,i){const a=ia(t,"type-2"),s=Oh(i,(e=>Sh(`(${e.code} && ${e.code}.nodeType === /*ELEMENT_NODE*/ 1 ? domFacade.getAllAttributes(${e.code}${a?`, "${a}"`:""}) : [])`,{type:0},e.H)));return t=Oh(r,(e=>Oh(s,(t=>Sh(`const ${e.code} of ${t.code}`,{type:2},[...e.H,...t.H]))))),em(t,e,n)}function rm(e,t,n,r,i){const a=t?`, "${t}"`:"";return t=Oh(i,(e=>Sh(`domFacade.getParentNode(${e.code}${a})`,{type:0},e.H))),im(r,t,e,n)}function im(e,t,n,r){const i=$h(e,n);return Oh(e,(e=>Oh(t,(t=>Oh(i,(n=>Oh(r,(r=>Sh(`const ${e.code} = ${t.code};\n\t\t\t\t\t\t${n.H.join("\n")}\n\t\t\t\t\t\tif (${n.code}) {\n\t\t\t\t\t\t\t${r.H.join("\n")}\n\t\t\t\t\t\t\t${r.code}\n\t\t\t\t\t\t}`,{type:2},[...e.H,...t.H])))))))))}const am={Wb:"textTest",Nb:"elementTest",Sb:"nameTest",Xb:"Wildcard",Kb:"anyKindTest"};var sm=Object.values(am);function om(e,t,n,r){!function(e,t){if(null===e.namespaceURI&&"*"!==e.prefix){if(!(t=t.$(e.prefix||"")||null)&&e.prefix)throw Error(`XPST0081: The prefix ${e.prefix} could not be resolved.`);e.namespaceURI=t}}(e,r);const i=e.prefix,a=e.namespaceURI,s=e.localName;return Fh(n,(e=>{var n=Sh(t?`${e.code}.nodeType\n\t\t\t\t\t\t&& (${e.code}.nodeType === /*ELEMENT_NODE*/ 1\n\t\t\t\t\t\t|| ${e.code}.nodeType === /*ATTRIBUTE_NODE*/ 2)`:`${e.code}.nodeType\n\t\t\t\t\t\t&& ${e.code}.nodeType === /*ELEMENT_NODE*/ 1`,{type:0},[]);if("*"===i)return"*"===s?[n,t?"type-1-or-type-2":"type-1"]:[$h(n,Sh(`${e.code}.localName === ${qh(s)}`,{type:0},[])),`name-${s}`];n="*"===s?n:$h(n,Sh(`${e.code}.localName === ${qh(s)}`,{type:0},[]));var r=Sh(qh(a),{type:0},[]);return r=""===i&&t?Oh(r,(t=>Sh(`${e.code}.nodeType === /*ELEMENT_NODE*/ 1 ? ${t.code} : null`,{type:0},t.H))):r,r=Oh(r,(t=>Sh(`(${e.code}.namespaceURI || null) === ((${t.code}) || null)`,{type:0},t.H))),[$h(n,r),`name-${s}`]}))}function lm(e,t,n,r){var i=e[0];switch(i){case am.Nb:return function(e,t,n){const r=(e=xi(e,"elementName"))&&xi(e,"star");return null===e||r?[Oh(t,(e=>Sh(`${e.code}.nodeType === /*ELEMENT_NODE*/ 1`,{type:0},[]))),"type-1"]:om(e=Ni(xi(e,"QName")),!1,t,n)}(e,n,r);case am.Wb:return function(e){return[Oh(e,(e=>Sh(`(${e.code}.nodeType === /*TEXT_NODE*/ 3 ||\n\t\t\t\t${e.code}.nodeType === /* CDATA_SECTION_NODE */ 4)`,{type:0},[]))),"type-3"]}(n);case am.Sb:return om(Ni(e),t,n,r);case am.Xb:return xi(e,"star")?null!==(i=xi(e,"uri"))?e=om({localName:"*",namespaceURI:Ai(i),prefix:""},t,n,r):(i=xi(e,"NCName"),e="star"===xi(e,"*")[0]?om({localName:Ai(i),namespaceURI:null,prefix:"*"},t,n,r):om({localName:"*",namespaceURI:null,prefix:Ai(i)},t,n,r)):e=om({localName:"*",namespaceURI:null,prefix:"*"},t,n,r),e;case am.Kb:return function(e){return[Oh(e,(e=>Sh(`!!${e.code}.nodeType`,{type:0},[]))),null]}(n);default:return[Bh(`Test not implemented: '${i}`),null]}}function cm(e,t,n){const[r,i]=n.h(e,t,n);return[Dh(r,_i(e,"type"),t,n),i]}function um(e,t,n){e=e?Ci(e,"*"):[];const[r,i]=e.reduce((([e,r],i)=>{if(!e)return cm(i,t,n);let a=r;return Fh(e,(e=>{const[s,o]=cm(i,t,n);return a=ia(r,o),[Oh(s,(t=>Sh(`${e.code} && ${t.code}`,{type:0},[...e.H,...t.H]))),a]}))}),[null,null]);return[r?Oh(r,(e=>Sh(`(function () {\n\t\t\t\t\t\t\t${e.H.join("\n")}\n\t\t\t\t\t\t\treturn ${e.code};\n\t\t\t\t\t\t})()`,{type:0},[]))):null,i]}function pm(e,t,n,r){if(0===e.length)return[Oh(n,(e=>Sh(`yield ${e.code};`,{type:2},e.H))),null];const[i,...a]=e;if(0<Ci(i,"lookup").length)return[Bh("Unsupported: lookups"),null];const s=gm(r,fm(r,"contextItem"));e=xi(i,"predicates");const[o,l]=um(e,s,r);if(e=xi(i,"xpathAxis")){var c=xi(i,sm);if(!c)return[Bh("Unsupported test in step"),null];var u=Ai(e);t="attribute"===u||"self"===u&&t;const[p,d]=lm(c,t,s,r);return c=null===o?p:$h(p,o),u=ia(d,l),[t]=pm(a,t,s,r),function(e,t,n,r,i,a){switch(e=Ai(e)){case"attribute":return[nm(t,n,r,i,a),"type-1"];case"child":return[tm(t,n,r,i,a),null];case"parent":return[rm(t,n,r,i,a),null];case"self":return[im(i,a,t,r),n];default:return[Bh(`Unsupported: the ${e} axis`),null]}}(e,c,u,t,s,n)}if(!(e=Ei(i,["filterExpr","*"])))return[Bh("Unsupported: unknown step type"),null];const[p,d]=r.h(e,n,r);return[Oh(p,(e=>{const t=0===a.length?Sh("",{type:2},[]):Sh(`if (${s.code} !== null && !${s.code}.nodeType) {\n\t\t\t\t\t\t\t\t\tthrow new Error('XPTY0019: The result of E1 in a path expression E1/E2 should evaluate to a sequence of nodes.');\n\t\t\t\t\t\t\t\t}`,{type:2},[]),[i]=pm(a,!0,s,r),l=null===o?i:Oh(o,(e=>Oh(i,(t=>Sh(`if (${e.code}) {\n\t\t\t\t\t\t\t\t\t${t.H.join("\n")}\n\t\t\t\t\t\t\t\t\t${t.code}\n\t\t\t\t\t\t\t\t}`,{type:2},e.H)))));return Oh(l,(r=>{switch(e.ua.type){case 1:return Oh(n,(n=>Sh(`for (const ${s.code} of ${e.code}(${n.code})) {\n\t\t\t\t\t\t\t\t\t${r.H.join("\n")}\n\t\t\t\t\t\t\t\t\t${r.code}\n\t\t\t\t\t\t\t\t}`,{type:2},[...s.H,...e.H,...t.H])));case 0:return Sh(`const ${s.code} = ${e.code};\n\t\t\t\t\t\t\t${t.code}\n\t\t\t\t\t\t\tif (${s.code} !== null) {\n\t\t\t\t\t\t\t\t${r.H.join("\n")}\n\t\t\t\t\t\t\t\t${r.code}\n\t\t\t\t\t\t\t}`,{type:2},[...s.H,...e.H,...t.H]);default:return Bh("Unsupported generated code type for filterExpr")}}))})),d]}function dm(e,t,n){const r=Ci(e,"stepExpr");if(1===r.length){const e=xi(r[0],"xpathAxis");if(e&&"self"===Ai(e))return function(e,t,n){return Fh(t,(t=>{if(0<Ci(e,"lookup").length)return[Bh("Unsupported: lookups"),null];var r=xi(e,"predicates");const[i,a]=um(r,t,n);if(!(r=xi(e,sm)))return[Bh("Unsupported test in step"),null];const[s,o]=lm(r,!0,t,n);r=null===i?s:$h(s,i);const l=ia(o,a);return[Oh(r,(e=>Sh(`((${e.code}) ? ${t.code} : null)`,{type:0},[...t.H,...e.H]))),l]}))}(r[0],t,n)}const i=gm(n,fm(n,"contextItem"));t=(e=xi(e,"rootExpr"))?mm(n,function(e){return Oh(e,(e=>Sh(`(function () {\n\t\t\t\tlet n = ${e.code};\n\t\t\t\twhile (n.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\t\t\tn = domFacade.getParentNode(n);\n\t\t\t\t\tif (n === null) {\n\t\t\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn n;\n\t\t\t})()`,{type:0},e.H)))}(i),"root"):i;const[a,s]=pm(r,!e,t,n);return[Oh(a,(e=>Sh(`(function* (${i.code}) {\n\t\t\t${e.H.join("\n")}\n\t\t\t${e.code}\n\t\t})`,{type:1},[]))),s]}function hm(e,t,n){const r=e[0];switch(r){case"contextItemExpr":return[t,null];case"pathExpr":return dm(e,t,n);case"andOp":return Zh(e,"&&",t,n);case"orOp":return Zh(e,"||",t,n);case"stringConstantExpr":return[Sh(e=qh(e=xi(e,"value")[1]||""),{type:0},[]),null];case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":case"nodeBeforeOp":case"nodeAfterOp":e:switch(r){case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":e=jh(e,r,t,n);break e;case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":const i=_i(Ei(e,["firstOperand","*"]),"type"),a=_i(Ei(e,["secondOperand","*"]),"type");e=i&&a?3===i.g&&3===a.g?jh(e,Hh[r],t,n):3===i.g?Xh(e,"firstOperand","secondOperand",Hh[r],t,n):3===a.g?Xh(e,"secondOperand","firstOperand",Gh[Hh[r]],t,n):Bh("General comparison for sequences is not implemented"):Bh("types of compare are not known");break e;default:e=Bh(`Unsupported compare type: ${r}`)}return[e,null];case"functionCallExpr":return[Kh(e,t,n),null];default:return[Bh(`Unsupported: the base expression '${r}'.`),null]}}function mm(e,t,n){return Oh(t,(t=>{var r=e.o.get(t);return r||(r=Sh(r=fm(e,n),t.ua,[...t.H,`const ${r} = ${t.code};`]),e.o.set(t,r),e.o.set(r,r)),r}))}function fm(e,t="v"){const n=e.v.get(t)||0;return e.v.set(t,n+1),`${t}${n}`}function gm(e,t){return t=Sh(t,{type:0},[]),e.o.set(t,t),t}function ym(e){const t=Ci(e,"*");if("pathExpr"===e[0])return!0;for(const e of t)if(ym(e))return!0;return!1}class bm extends Error{constructor(e,t,n){var r=e.stack;r&&(r.includes(e.message)&&(r=r.substr(r.indexOf(e.message)+e.message.length).trim()),(r=r.split("\n")).splice(10),r=r.map((e=>e.startsWith("    ")||e.startsWith("\t")?e:`    ${e}`)),r=r.join("\n")),super(`Custom XPath function Q{${n}}${t} raised:\n${e.message}\n${r}`)}}function wm(e,t,n){return 0===t.g?e.F()?null:vh(e.first(),n).next(0).value:2===t.g||1===t.g?e.O().map((e=>{if(C(e.type,47))throw Error("Cannot pass attribute nodes to custom functions");return vh(e,n).next(0).value})):vh(e.first(),n).next(0).value}var vm={callFunction(e,t,n,r,i){const a=Qr(t,n,r.length);if(!a)throw Error("function not found for codegen function call");t=new Ye({M:null,Aa:0,ta:L.empty(),ra:{}});const s=new ae(e);return e=new Ke(!1,!1,s,null,null,i?i.currentContext:null,null),r=a.callFunction(t,e,null,...r.map(((e,t)=>Ue(0,e,a.j[t])))),wm(r,{type:59,g:0},e)},errXPDY0002:Qe};const xm={"http://www.w3.org/2005/XQueryX":"xqx","http://www.w3.org/2007/xquery-update-10":"xquf","http://fontoxml.com/fontoxpath":"x"};function Am(e,t,n,r,i){if("string"==typeof n)return 0===n.length?null:t.createTextNode(n);if(!Array.isArray(n))throw new TypeError("JsonML element should be an array or string");var a=function(e,t){switch(e){case"copySource":case"insertAfter":case"insertAsFirst":case"insertAsLast":case"insertBefore":case"insertInto":case"modifyExpr":case"newNameExpr":case"replacementExpr":case"replaceValue":case"returnExpr":case"sourceExpr":case"targetExpr":case"transformCopies":case"transformCopy":return{localName:e,lb:t||"http://www.w3.org/2005/XQueryX"};case"deleteExpr":case"insertExpr":case"renameExpr":case"replaceExpr":case"transformExpr":return{localName:e,lb:"http://www.w3.org/2007/xquery-update-10"};case"x:stackTrace":return{localName:"stackTrace",lb:"http://fontoxml.com/fontoxpath"};default:return{localName:e,lb:"http://www.w3.org/2005/XQueryX"}}}(n[0],r);r=a.localName,a=a.lb;const s=t.createElementNS(a,xm[a]+":"+r),o=n[1];var l=1;if("object"==typeof o&&!Array.isArray(o)){if(null!==o)for(var c of Object.keys(o))null!==(l=o[c])&&("type"===c?void 0!==l&&e.setAttributeNS(s,a,"fontoxpath:"+c,S(l)):("start"!==c&&"end"!==c&&"comment"!==c||"stackTrace"!==r||(l=JSON.stringify(l)),i&&"prefix"===c&&""===l||e.setAttributeNS(s,a,xm[a]+":"+c,l)));l=2}for(let r=l,o=n.length;r<o;++r)c=Am(e,t,n[r],a,i),null!==c&&e.insertBefore(s,c,null);return s}const _m=new Map;function Em(e){var t;e:{if(t=yo.get(e))for(const e of Object.keys(t))if(t[e]&&t[e].length){t=t[e][0].h;break e}t=null}if(t)return t;if(_m.has(e))return _m.get(e);if(null===(t=Ei(t="string"==typeof e?Jd(e,{Z:!1}):vo(e),["mainModule","queryBody","*"])))throw Error("Library modules do not have a specificity");return t=go(t,{sa:!1,Z:!1}),_m.set(e,t),t}var Cm=new q;return void 0!==n&&(n.compareSpecificity=function(e,t){return gr(Em(e).o,Em(t).o)},n.compileXPathToJavaScript=function(e,t,n){if(n=n||{},t=t||0,"string"==typeof e){e=Co(e);var r={Z:"XQuery3.1"===n.language||"XQueryUpdate3.1"===n.language,debug:!1};try{var i=Jd(e,r)}catch(t){Yr(e,t)}}else i=vo(e);if(!(e=xi(i,"mainModule")))return Bh("Unsupported: XQuery Library modules are not supported.");if(xi(e,"prolog"))return Bh("Unsupported: XQuery Prologs are not supported.");if(r=void 0===n.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":n.defaultFunctionNamespaceURI,e=new class{constructor(e,t){this.o=new Map,this.v=new Map,this.$=e,this.D=t,this.h=hm}}(n.namespaceResolver||fh(null),r),Gi(i,n=new Qi(new vi(new ti(e.$,{},r,n.functionNameResolver||gh("http://www.w3.org/2005/xpath-functions"))))),n=xi(i,"mainModule"))if(xi(n,"prolog"))e=Bh("Unsupported: XQuery.");else{var a=Ei(n,["queryBody","*"]);n=gm(e,"contextItem"),[r]=e.h(a,n,e);e:switch(a=_i(a,"type"),t){case 9:e=Lh(t=Ph(r,n,e),a,e);break e;case 7:e=function(e,t,n,r){return Oh(e,(e=>{switch(e.ua.type){case 1:return Oh(mm(r,e,"nodes"),(e=>Oh(mm(r,n,"contextItem"),(t=>Sh(`Array.from(${e.code}(${t.code}))`,{type:0},[...e.H,...t.H])))));case 0:return Oh(mm(r,Lh(e,t,r),"node"),(e=>Sh(`(${e.code} === null ? [] : [${e.code}])`,{type:0},e.H)));default:return Bh("Unsupported code type to evaluate to nodes")}}))}(r,a,n,e);break e;case 3:e=Dh(r,a,n,e);break e;case 2:e=Mh(r,a,n,e);break e;default:e=Bh(`Unsupported: the return type '${t}'.`)}e.isAstAccepted&&(e=`\n\t\t${e.H.join("\n")}\n\t\treturn ${e.code};`,t="\n\treturn (contextItem, domFacade, runtimeLib, options) => {\n\t\tconst {\n\t\t\terrXPDY0002,\n\t\t} = runtimeLib;",ym(i)&&(t+='\n\t\tif (!contextItem) {\n\t\t\tthrow errXPDY0002("Context is needed to evaluate the given path expression.");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error("Context item must be subtype of node().");\n\t\t}\n\t\t'),e={code:t+(e+"}\n//# sourceURL=generated.js"),isAstAccepted:!0})}else e=Bh("Unsupported: Can not execute a library module.");return e},n.domFacade=Cm,n.evaluateXPath=Th,n.evaluateXPathToArray=function(e,t,n,r,i){return Th(e,t,n,r,Th.Lb,i)},n.evaluateXPathToAsyncIterator=kh,n.evaluateXPathToBoolean=function(e,t,n,r,i){return Th(e,t,n,r,Th.BOOLEAN_TYPE,i)},n.evaluateXPathToFirstNode=function(e,t,n,r,i){return Th(e,t,n,r,Th.Ob,i)},n.evaluateXPathToMap=function(e,t,n,r,i){return Th(e,t,n,r,Th.Rb,i)},n.evaluateXPathToNodes=function(e,t,n,r,i){return Th(e,t,n,r,Th.Tb,i)},n.evaluateXPathToNumber=function(e,t,n,r,i){return Th(e,t,n,r,Th.NUMBER_TYPE,i)},n.evaluateXPathToNumbers=function(e,t,n,r,i){return Th(e,t,n,r,Th.Ub,i)},n.evaluateXPathToString=function(e,t,n,r,i){return Th(e,t,n,r,Th.STRING_TYPE,i)},n.evaluateXPathToStrings=function(e,t,n,r,i){return Th(e,t,n,r,Th.Vb,i)},n.evaluateUpdatingExpression=async function(e,t,n,r,i){let a,s,o;i=i||{},Eo();try{const o=yh(e,t,n||null,r||{},i||{},{sa:!0,Z:!0,debug:!!i.debug,Ha:!!i.disableCache});var l=o.tb;a=o.ub,s=o.ba}catch(t){Yr(e,t)}if(!s.I){for(l=[],e=kh(e,t,n,r,Object.assign(Object.assign({},i),{language:"XQueryUpdate3.1"})),t=await e.next();!t.done;t=await e.next())l.push(t.value);return Promise.resolve({pendingUpdateList:[],xdmValue:l})}try{o=s.s(l,a).next(0)}catch(t){Yr(e,t)}return Ih(o.value,e,i.returnType,a)},n.evaluateUpdatingExpressionSync=function(e,t,n,r,i){let a,s,o,l;i=i||{},Eo();try{const l=yh(e,t,n||null,r||{},i||{},{sa:!0,Z:!0,debug:!!i.debug,Ha:!!i.disableCache});a=l.tb,s=l.ub,o=l.ba}catch(t){Yr(e,t)}if(!o.I)return{pendingUpdateList:[],xdmValue:Th(e,t,n,r,i.i,Object.assign(Object.assign({},i),{language:Th.Yb}))};try{l=o.s(a,s).next(0)}catch(t){Yr(e,t)}return Ih(l.value,e,i.returnType,s)},n.executeJavaScriptCompiledXPath=(e,t,n,r)=>(n=n||new q,e()(null!=t?t:null,n,vm,r)),n.executePendingUpdateList=function(e,t,n,r){t=new ae(t||new q),r=r?new z(r):V,n=n?n=new hh(n):null,e=e.map(zs),or(e,t,n,r)},n.getBucketForSelector=function(e){return Em(e).D()},n.getBucketsForNode=X,n.precompileXPath=function(e){return Promise.resolve(e)},n.registerXQueryModule=function(e,t={debug:!1}){try{var n=Jd(e,{Z:!0,debug:t.debug})}catch(t){Yr(e,t)}if(Hi(n,new Qi),!(t=xi(n,"libraryModule")))throw Error("XQuery module must be declared in a library module.");n=xi(t,"moduleDecl");var r=xi(n,"uri");const i=Ai(r);if(r=Ai(n=xi(n,"prefix")),gi(n=new vi(new ti((()=>null),Object.create(null),"http://www.w3.org/2005/xpath-functions",gh("http://www.w3.org/2005/xpath-functions"))),r,i),null!==(t=xi(t,"prolog"))){let r;try{r=Qd(t,n,!0,e)}catch(t){Yr(e,t)}r.Ia.forEach((({namespaceURI:e})=>{if(i!==e)throw Error("XQST0048: Functions and variables declared in a module must reside in the module target namespace.")})),Ao(i,r)}else Ao(i,{Ia:[],Ta:[],pa:null,source:e});return i},n.registerCustomXPathFunction=function(e,t,n,r){const{namespaceURI:i,localName:a}=function(e){if("object"==typeof e)return e;if(2!==(e=e.split(":")).length)throw Error("Do not register custom functions in the default function namespace");const[t,n]=e;if(!(e=ei[t])){if(e=`generated_namespace_uri_${t}`,ei[t])throw Error("Prefix already registered: Do not register the same prefix twice.");ei[t]=e}return{localName:n,namespaceURI:e}}(e);if(!i)throw si();const s=t.map((e=>O(e))),o=O(n);Zr(i,a,s,o,(function(e,t,n){var l=Array.from(arguments);l.splice(0,3),l=l.map(((e,n)=>wm(e,s[n],t)));const c={currentContext:t.o,domFacade:t.h.h};let u;try{u=r.apply(void 0,[c,...l])}catch(e){throw new bm(e,a,i)}return u&&"object"==typeof u&&Object.getOwnPropertySymbols(u).includes(mh)?L.create(u.zb):Ue(t.h,u,o)}))},n.parseScript=function(e,t,n,r=V){let i;e=Co(e);try{i=Jd(e,{Z:"XQuery3.1"===t.language||"XQueryUpdate3.1"===t.language,debug:t.debug})}catch(t){Yr(e,t)}var a=new ti(t.namespaceResolver||(()=>null),{},void 0===t.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":t.defaultFunctionNamespaceURI,t.functionNameResolver||(()=>null));a=new vi(a);var s=xi(i,["mainModule","libraryModule"]),o=xi(s,"moduleDecl");if(o){gi(a,Ai(xi(o,"prefix")),o=Ai(xi(o,"uri")))}return(s=xi(s,"prolog"))&&Qd(s,a,!1,e),!1!==t.annotateAst&&Hi(i,new Qi(a)),a=new q,t=Am(r,n,i,null,!1===t.mc),r.insertBefore(t,n.createComment(e),a.getFirstChild(t)),t},n.profiler=Ch,n.createTypedValueFactory=function(e){return(t,n)=>(t=$e(new ae(null===n?new q:n),t,O(e)),{[mh]:!0,zb:t})},n.finalizeModuleRegistration=Eo,n.Language={XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"},n.ReturnType=xh),n}.call("undefined"==typeof window?void 0:window,Ls,no);ro.compareSpecificity,ro.compileXPathToJavaScript;const io=ro.createTypedValueFactory,ao=ro.domFacade;ro.evaluateUpdatingExpression,ro.evaluateUpdatingExpressionSync;const so=ro.evaluateXPath;ro.evaluateXPathToArray,ro.evaluateXPathToAsyncIterator;const oo=ro.evaluateXPathToBoolean,lo=ro.evaluateXPathToFirstNode;ro.evaluateXPathToMap;const co=ro.evaluateXPathToNodes,uo=ro.evaluateXPathToNumber;ro.evaluateXPathToNumbers;const po=ro.evaluateXPathToString,ho=ro.evaluateXPathToStrings;ro.executeJavaScriptCompiledXPath,ro.executePendingUpdateList,ro.finalizeModuleRegistration,ro.getBucketForSelector;const mo=ro.getBucketsForNode;ro.Language;const fo=ro.parseScript;ro.precompileXPath,ro.profiler;const go=ro.registerCustomXPathFunction,yo=ro.registerXQueryModule;ro.ReturnType;class bo{constructor(e){this._onNodeTouched=e}getAllAttributes(e){return Array.from(e.attributes)}getAttribute(e,t){return e.getAttribute(t)}getChildNodes(e,t){const n=Array.from(e.childNodes).filter((e=>!t||mo(e).includes(t)));return n.forEach((e=>this._onNodeTouched(e))),n}getData(e){return e.nodeType===Node.ATTRIBUTE_NODE?(this._onNodeTouched(e),e.value):(this._onNodeTouched(e.parentNode),e.data)}getFirstChild(e,t){for(const n of e.childNodes)if(!t||mo(n).includes(t))return this._onNodeTouched(n),n;return null}getLastChild(e,t){const n=e.getChildNodes().filter((e=>!t||mo(e).includes(t))),r=n[n.length-1];return r||null}getNextSibling(e,t){for(let n=e.nextSibling;n;n=n.nextSibling)if(!t||mo(n).includes(t))return this._onNodeTouched(n),n;return null}getParentNode(e){return e.parentNode}getPreviousSibling(e,t){for(let{previousSibling:n}=e;n;n=n.previousSibling)if(!t||mo(n).includes(t))return n;return null}}class wo{static createNodesFromXPath(e,t,n){t||(t=document.implementation.createDocument(null,null,null));const r=e.split("/");let i=null,a=null;for(const e of r)if(e)if(e.startsWith("@")){const t=e.slice(1);if(!a)throw new Error("Cannot create an attribute without a parent element.");a.setAttribute(t,"")}else{const[r,s]=e.includes(":")?e.split(":"):[null,e],o=r?wo.lookupNamespace(n,r):null,l=o?t.createElementNS(o,e):t.createElement(s);i?a.appendChild(l):i=l,a=l}if(!i)throw new Error("Invalid XPath; no root element could be created.");return i}static lookupNamespace(e,t){return e.getAttribute(`xmlns:${t}`)}static querySelectorAll(e,t){const n=[t],r=[];for(;n.length;){const t=n.shift();for(const e of Array.from(t.children).reverse())n.unshift(e);t.matches&&t.matches("template")&&n.unshift(t.content),t.matches&&t.matches(e)&&r.push(t)}return r}static contains(e,t){for(;t;){if(t===e)return!0;t=t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t.parentNode}return!1}static getClosest(e,t){for(;t&&!t.matches||!t.matches(e);)if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)if(t.nodeType!==Node.ATTRIBUTE_NODE){if(t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t.matches("fx-fore"))return null;if(!(t=t.parentNode))return null}else t=t.ownerElement;else t=t.host;return t}static getParentBindingElement(e){return!e.parentNode||e.parentNode.nodeType===Node.DOCUMENT_NODE&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?null:this.getClosest("[ref],fx-repeatitem",e.parentNode)}static isAbsolutePath(e){return null!=e&&(e.startsWith("/")||e.startsWith("instance(")||e.startsWith("$"))}static isSelfReference(e){return"."===e||"./text()"===e||"text()"===e||""===e||null===e}static getInstanceId(e,t){if(!e)return"default";if(e.startsWith("instance()"))return"default";if(e.startsWith("instance(")){const t=e.substring(e.indexOf("(")+1);return t.substring(1,t.indexOf(")")-1)}if(e.startsWith("$")){const n=e.match(/\$(?<variableName>[a-zA-Z0-9\-\_]+).*/)?.groups?.variableName;let r=t;for(;r&&!("inScopeVariables"in r);)r=r.nodeType===Node.ATTRIBUTE_NODE?r.ownerElement:r.parentNode;const i=r?.inScopeVariables?.get(n);return i?this.getInstanceId(i.valueQuery,i):null}return null}static resolveInstance(e,t){let n=wo.getInstanceId(t,e);if(n||(n=wo.getInstanceId(e.getAttribute("ref"),e)),null!==n)return n;const r=wo.getParentBindingElement(e);return r?this.resolveInstance(r,t):"default"}static getDocPath(e){const t=po("path()",e),n=wo.shortenPath(t);return n.startsWith("/")?`${n}`:`/${n}`}static getPath(e,t){const n=po("path()",e),r=wo.shortenPath(n);return r.startsWith("/")?`$${t}${r}`:`$${t}/${r}`}static shortenPath(e){const t=e.replaceAll(/(Q{(.*?)\})/g,""),n=t.substring(1,t.length);return n.substring(n.indexOf("/"),t.length)}static getBasePath(e){return e.split(":")[0]}}function vo(e,t,n,r){const i={};return function(a){if(i[a])return;const s={},o=[],l=[];for(l.push({node:a,processed:!1});l.length>0;){const a=l[l.length-1],{processed:c}=a,{node:u}=a;if(c)l.pop(),o.pop(),s[u]=!1,i[u]=!0,t&&0!==e[u].length||n.push(u);else{if(i[u]){l.pop();continue}if(s[u]){if(r){l.pop();continue}throw o.push(u),window.dispatchEvent(new CustomEvent("compute-exception",{composed:!1,bubbles:!0,detail:{path:o,message:"cyclic graph"}})),new Error(`Cyclic at ${o}`)}s[u]=!0,o.push(u);const t=e[u];for(let e=t.length-1;e>=0;e-=1)l.push({node:t[e],processed:!1});a.processed=!0}}}}function xo(e){this.nodes={},this.outgoingEdges={},this.incomingEdges={},this.circular=e&&!!e.circular}function Ao(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=(new DOMParser).parseFromString(['<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">','  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>','  <xsl:strip-space elements="*"/>','  <xsl:template match="text()">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">',"    <xsl:copy>",'        <xsl:apply-templates select="node()|@*"/>',"    </xsl:copy>","  </xsl:template>","</xsl:stylesheet>"].join("\n"),"application/xml"),r=new XSLTProcessor;r.importStylesheet(n);const i=r.transformToDocument(t);return(new XMLSerializer).serializeToString(i)}xo.prototype={size(){return Object.keys(this.nodes).length},addNode(e,t){this.hasNode(e)||(this.nodes[e]=2===arguments.length?t:e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])},removeNode(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach((t=>{Object.keys(t).forEach((n=>{const r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)}),this)})))},hasNode(e){return Object.prototype.hasOwnProperty.call(this.nodes,e)},getNodeData(e){if(this.hasNode(e))return this.nodes[e];throw new Error(`Node does not exist: ${e}`)},setNodeData(e,t){if(!this.hasNode(e))throw new Error(`Node does not exist: ${e}`);this.nodes[e]=t},addDependency(e,t){if(!this.hasNode(e))throw new Error(`Node does not exist: ${e}`);if(!this.hasNode(t))throw new Error(`Node does not exist: ${t}`);return-1===this.outgoingEdges[e].indexOf(t)&&this.outgoingEdges[e].push(t),-1===this.incomingEdges[t].indexOf(e)&&this.incomingEdges[t].push(e),!0},removeDependency(e,t){let n;this.hasNode(e)&&(n=this.outgoingEdges[e].indexOf(t),n>=0&&this.outgoingEdges[e].splice(n,1)),this.hasNode(t)&&(n=this.incomingEdges[t].indexOf(e),n>=0&&this.incomingEdges[t].splice(n,1))},clone(){const e=this,t=new xo;return Object.keys(e.nodes).forEach((n=>{t.nodes[n]=e.nodes[n],t.outgoingEdges[n]=e.outgoingEdges[n].slice(0),t.incomingEdges[n]=e.incomingEdges[n].slice(0)})),t},directDependenciesOf(e){if(this.hasNode(e))return this.outgoingEdges[e].slice(0);throw new Error(`Node does not exist: ${e}`)},directDependantsOf(e){if(this.hasNode(e))return this.incomingEdges[e].slice(0);throw new Error(`Node does not exist: ${e}`)},dependenciesOf(e,t){if(this.hasNode(e)){const n=[];vo(this.outgoingEdges,t,n,this.circular)(e);const r=n.indexOf(e);return r>=0&&n.splice(r,1),n}throw new Error(`Node does not exist: ${e}`)},dependantsOf(e,t){if(this.hasNode(e)){const n=[];vo(this.incomingEdges,t,n,this.circular)(e);const r=n.indexOf(e);return r>=0&&n.splice(r,1),n}throw new Error(`Node does not exist: ${e}`)},entryNodes(){const e=this;return Object.keys(this.nodes).filter((t=>0===e.incomingEdges[t].length))},overallOrder(e){const t=this,n=[],r=Object.keys(this.nodes);if(0===r.length)return n;if(!this.circular){const e=vo(this.outgoingEdges,!1,[],this.circular);r.forEach((t=>{e(t)}))}const i=vo(this.outgoingEdges,e,n,this.circular);return r.filter((e=>0===t.incomingEdges[e].length)).forEach((e=>{i(e)})),this.circular&&r.filter((e=>-1===n.indexOf(e))).forEach((e=>i(e))),n}},xo.prototype.directDependentsOf=xo.prototype.directDependantsOf,xo.prototype.dependentsOf=xo.prototype.dependantsOf;const _o="http://www.w3.org/2002/xforms",Eo=new Map,Co=[];function No(e,t,n){return Eo.has(e)?Eo.get(e).set(t,n):Eo.set(e,new Map)}const To=e=>{if(!e)return"http://www.w3.org/1999/xhtml"};function ko(e,t,n=null){t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t.nodeType===Node.ATTRIBUTE_NODE&&(t=t.ownerElement),t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(t=t.parentNode.host);const r=("fx-fore"===t.localName?t:t.closest("fx-fore")).querySelectorAll(`[id='${e}']`);if(1===r.length){const e=r[0];return n&&e.localName!==n?null:e}const i=co("outermost(ancestor-or-self::fx-fore[1]/(descendant::fx-fore|descendant::*[@id = $id]))[not(self::fx-fore)]",t,null,{id:e},{namespaceResolver:To});if(0===i.length)return null;if(1===i.length&&oo("(ancestor::fx-fore | ancestor::fx-repeat)[last()]/self::fx-fore",i[0],null,null,{namespaceResolver:To})){const e=i[0];return n&&e.localName!==n?null:e}for(const e of co("ancestor::fx-repeatitem => reverse()",t,null,null,{namespaceResolver:To})){const t=i.filter((t=>wo.contains(e,t)));switch(t.length){case 0:break;case 1:{const e=t[0];return n&&e.localName!==n?null:e}default:{const e=t.find((e=>co("every $ancestor of ancestor::fx-repeatitem satisfies $ancestor is $ancestor/../child::fx-repeatitem[../@repeat-index]",e,null,{})));return e?n&&e.localName!==n?null:e:null}}}return null}const Io=(new DOMParser).parseFromString("<xml />","text/xml"),So=new Map;function Bo(e,t){const n=function(e,t){return Eo.has(e)&&Eo.get(e).get(t)||null}(e,t);if(n)return n;let r=function(e){if(!e.includes("instance"))return[];if(So.has(e))return So.get(e);const t=fo(e,{},Io),n=ho('descendant::xqx:functionCallExpr\n\t\t\t\t[xqx:functionName = "instance"]\n\t\t\t\t/xqx:arguments\n\t\t\t\t/xqx:stringConstantExpr\n\t\t\t\t/xqx:value',t,null,{},{namespaceResolver:e=>"xqx"===e?"http://www.w3.org/2005/XQueryX":void 0});return So.set(e,n),n}(e);if(0===r.length){const n=t.parentNode&&t.parentNode.nodeType===t.ELEMENT_NODE&&t.parentNode.closest("[ref]");if(n){const r=Bo(n.getAttribute("ref"),n);return No(e,t,r),r}r=["default"]}if(1===r.length){let n;if("default"===r[0]){const e=lo("ancestor-or-self::fx-fore[1]",t,null,null,{namespaceResolver:To});n=e&&e.querySelector("fx-instance")}else n=ko(r[0],t,"fx-instance");if(n&&n.hasAttribute("xpath-default-namespace")){const r=n.getAttribute("xpath-default-namespace"),i=e=>{if(!e)return r};return No(e,t,i),i}}r.length;const i=po("ancestor-or-self::*/@xpath-default-namespace[last()]",t)||"",a=function(e){return""===e?i:po('ancestor-or-self::*/@*[name() = "xmlns:" || $prefix][last()]',t,null,{prefix:e})};return No(e,t,a),a}function Oo(e,t,n){return(t&&t.ownerDocument||t)===window.document?To:Bo(e,n)}function Fo({prefix:e,localName:t},n){switch(t){case"context":case"base64encode":case"boolean-from-string":case"current":case"depends":case"event":case"fore-attr":case"index":case"instance":case"json2xml":case"xml2Json":case"log":case"parse":case"local-date":case"local-dateTime":case"logtree":case"uri":case"uri-fragment":case"uri-host":case"uri-param":case"uri-path":case"uri-relpath":case"uri-port":case"uri-query":case"uri-scheme":case"uri-scheme-specific-part":return{namespaceURI:_o,localName:t};default:return""===e&&Co.includes(t)?{namespaceURI:"http://www.w3.org/2005/xquery-local-functions",localName:t}:"fn"===e||""===e?{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:t}:"local"===e?{namespaceURI:"http://www.w3.org/2005/xquery-local-functions",localName:t}:null}}function Po(e){let t=e;for(;t&&!("inScopeVariables"in t);)t=t.nodeType===Node.ATTRIBUTE_NODE?t.ownerElement:t.parentNode;if(!t)return{};const n={};if(t.inScopeVariables)for(const e of t.inScopeVariables.keys()){const r=t.inScopeVariables.get(e);r&&(r.nodeType?n[e]=r.value:n[e]=r)}return n}function Do(e,t,n,r={},i={}){try{const a=Oo(e,t,n),s=Po(n);return so(e,t,null,{...s,...r},so.ALL_RESULTS_TYPE,{debug:!0,currentContext:{formElement:n,variables:r},moduleImports:{xf:_o},functionNameResolver:Fo,namespaceResolver:a,language:i.language||so.XPATH_3_1_LANGUAGE})}catch(t){return n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}})),[]}}function Ro(e,t,n){try{const r=Oo(e,t,n),i=Po(n);return lo(e,t,null,i,{defaultFunctionNamespaceURI:_o,moduleImports:{xf:_o},currentContext:{formElement:n},functionNameResolver:Fo,namespaceResolver:r})}catch(t){n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}}))}}function Mo(e,t,n){try{const r=Oo(e,t,n),i=Po(n);return co(e,t,null,i,{currentContext:{formElement:n},functionNameResolver:Fo,moduleImports:{xf:_o},namespaceResolver:r})}catch(t){n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}}))}}function Lo(e,t,n){try{const r=Oo(e,t,n),i=Po(n);return oo(e,t,null,i,{currentContext:{formElement:n},functionNameResolver:Fo,moduleImports:{xf:_o},namespaceResolver:r})}catch(t){n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}}))}}function $o(e,t,n,r=null){try{const i=Oo(e,t,n),a=Po(n);return po(e,t,r,a,{currentContext:{formElement:n},functionNameResolver:Fo,moduleImports:{xf:_o},namespaceResolver:i})}catch(t){n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}}))}}function Uo(e,t,n,r=null){try{const i=Oo(e,t,n),a=Po(n);return uo(e,t,r,a,{currentContext:{formElement:n},functionNameResolver:Fo,moduleImports:{xf:_o},namespaceResolver:i})}catch(t){n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}}))}}const Ho=(e,t)=>{const n=e.currentContext.formElement;let r=null;if(r=t?ko(t,n):wo.getParentBindingElement(n),r){if("FX-REPEAT"===r.nodeName){const{nodeset:e}=r;for(let t=n;t;t=t.parentNode)if(t.parentNode===r){return e[Array.from(t.parentNode.children).indexOf(t)]}}return r.nodeset}return n.getInScopeContext()};function Go(e,t){if(t&&t.nodeType===Node.ELEMENT_NODE&&t.children){const n=document.createElement("details");n.setAttribute("data-path",t.nodeName);const r=document.createElement("summary");let i,a=` <${t.nodeName}`;Array.from(t.attributes).forEach((e=>{a+=` ${e.nodeName}="${e.nodeValue}"`})),t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&""!==t.firstChild.data.trim()?(i=t.firstChild.nodeValue,a+=`>${i}</${t.nodeName}>`):a+=">",r.textContent=a,n.appendChild(r),0!==t.childElementCount?n.setAttribute("open","open"):r.setAttribute("style","list-style:none;"),e.appendChild(n),Array.from(t.children).forEach((e=>{Go(n,e)}))}}go({namespaceURI:_o,localName:"context"},[],"item()?",Ho),go({namespaceURI:_o,localName:"context"},["xs:string"],"item()?",Ho),go({namespaceURI:_o,localName:"current"},["xs:string"],"item()?",((e,t)=>(e.currentContext.formElement,null))),go({namespaceURI:_o,localName:"element"},["xs:string"],"item()?",((e,t)=>{e.currentContext.formElement;return document.createElement(t)})),go({namespaceURI:_o,localName:"log"},["xs:string?"],"xs:string?",((e,t)=>{const{formElement:n}=e.currentContext,r=ko(t,n,"fx-instance");if(r&&"json"!==r.getAttribute("type")){return Ao((new XMLSerializer).serializeToString(r.getDefaultContext()))}return null})),go({namespaceURI:_o,localName:"fore-attr"},["xs:string?"],"xs:string?",((e,t)=>{const{formElement:n}=e.currentContext;let r=n;n.nodeType===Node.TEXT_NODE&&(r=n.parentNode);const i=r.closest("fx-fore");return i.hasAttribute(t)?i.getAttribute(t):null})),go({namespaceURI:_o,localName:"parse"},["xs:string?"],"element()?",((e,t)=>(new DOMParser).parseFromString(t,"application/xml").firstElementChild)),go({namespaceURI:_o,localName:"logtree"},["xs:string?"],"element()?",((e,t)=>{const{formElement:n}=e.currentContext,r=ko(t,n,"fx-instance");if(r){const t=document.createElement("div");t.setAttribute("class","logtree");const n=e.currentContext.formElement,i=n.querySelector(".logtree");i&&i.parentNode.removeChild(i);const a=Go(t,r.getDefaultContext());a&&n.appendChild(a)}return null}));const jo=(e,t)=>{const n=lo("ancestor-or-self::fx-fore[1]",e.currentContext.formElement,null,null,{namespaceResolver:To});let r=null;null===t||"default"===t?r=n.getModel().getDefaultInstance():(r=n.getModel().getInstance(t),r||document.querySelector("fx-fore").dispatchEvent(new CustomEvent("error",{composed:!0,bubbles:!0,detail:{origin:"functions",message:`Instance not found '${t}'`,level:"Error"}})));const i=r.getDefaultContext();return i||null};go({namespaceURI:_o,localName:"index"},["xs:string?"],"xs:integer?",((e,t)=>{const{formElement:n}=e.currentContext;if(null===t)return 1;const r=ko(t,n,"fx-repeat");return r?r.getAttribute("index"):Number(1)})),go({namespaceURI:_o,localName:"instance"},[],"item()?",(e=>jo(e,null))),go({namespaceURI:_o,localName:"instance"},["xs:string?"],"item()?",jo);go({namespaceURI:_o,localName:"json2xml"},["item()?"],"item()?",((e,t)=>{const n=(e,t)=>{const r=typeof e;if("number"===r)t.setAttribute("type","number"),t.textContent=e.toString();else if("boolean"===r)t.setAttribute("type","boolean"),t.textContent=e.toString();else if(null===e){const e=document.createElement("_");e.setAttribute("type","null"),t.appendChild(e)}else"string"===r?t.textContent=e.replace(/[^\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD]/g,(e=>`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`)):Array.isArray(e)?(t.setAttribute("type","array"),e.forEach((e=>{const r=document.createElement("_");n(e,r),r.textContent=e,t.appendChild(r)}))):"object"===r&&(t.setAttribute("type","object"),Object.entries(e).forEach((([e,r])=>{if(r){const i=document.createElement(e.replace(/[^a-zA-Z0-9_]/g,"_"));n(r,i),t.appendChild(i)}})))},r=document.createElement("json");return Array.isArray(t)?r.setAttribute("type","array"):r.setAttribute("type","object"),n(t,r),r}));function Xo(e,t){const n=t.split(".");return 1==n.length?e[n[0]]:Xo(e[n[0]],n.slice(1).join("."))}function qo(e){return wo.getClosest("fx-fore",e)}function Vo(e,t){const n=wo.getClosest("[ref]",e),r=wo.getClosest("fx-fore",e),i=function(e){return qo(e).getModel()}(e);if(null!==n){return r===n.closest("fx-fore")?n.nodeset:i.getDefaultInstance().getDefaultContext()}if(wo.isAbsolutePath(t)){const n=wo.getInstanceId(t,e);return n?i.getInstance(n).getDefaultContext():i.getDefaultInstance().getDefaultContext()}return i.getDefaultInstance().getDefaultContext()}function zo(e,t){const n=function(e){return e&&e.nodeType&&e.nodeType===Node.ATTRIBUTE_NODE?e.ownerElement:e.nodeType===Node.ELEMENT_NODE?e:e.parentNode}(e);if("FX-FORE"===n.nodeName){const e=n.getModel().getDefaultInstance()?.getDefaultContext();return e||zo(n.parentNode,t)}const r=wo.getClosest("[ref]",n.parentNode);if(r&&("FX-GROUP"===r.nodeName||"FX-CONTROL"===r.nodeName))return r.nodeset;const i=n.matches("[iterate]")?n:wo.getClosest("[iterate]",n.parentNode);if(i&&i.currentContext)return i.currentContext;const a=wo.getClosest("fx-repeatitem",n);if(a)return"context"===e.nodeName?Ro(e.nodeValue,a.nodeset,qo(n)):a.nodeset;const s=n.closest(".fx-repeatitem");if(s){const e=s.parentNode,t=Array.from(e.children).indexOf(s);return wo.getClosest("fx-repeat-attributes",n).nodeset[t]}if(n.hasAttribute("context")){const e=Vo(n.parentNode,t);return Ro(n.getAttribute("context"),e,qo(n))}if(e.nodeType===Node.ATTRIBUTE_NODE&&"context"===e.nodeName){const r=Vo(e.ownerElement.parentNode,t);return Ro(e.ownerElement.getAttribute("context"),r,qo(n))}if(e.nodeType===Node.ATTRIBUTE_NODE&&"ref"===e.nodeName){if(e.ownerElement.hasAttribute("context")){const r=Vo(e.ownerElement.parentNode,t);return Ro(e.ownerElement.getAttribute("context"),r,qo(n))}return Vo(n.parentNode,t)}return Vo(n,t)}go({namespaceURI:_o,localName:"xmltoJson"},["item()?"],"item()?",((e,t)=>{const n=e=>e.nodeType===Node.TEXT_NODE,r=e=>{if((e=>e.nodeType===Node.ELEMENT_NODE)(e)){const t={};if(e.hasAttributes()&&(t.type=e.getAttribute("type")),1===e.childNodes.length&&n(e.firstChild))return e.textContent;for(const n of e.childNodes){const e=n.nodeName,i=r(n);t[e]?(Array.isArray(t[e])||(t[e]=[t[e]]),t[e].push(i)):t[e]=i}return t}if(n(e))return e.textContent},i=(new DOMParser).parseFromString(t,"application/xml").documentElement;return r(i)})),go({namespaceURI:_o,localName:"depends"},["node()*"],"item()?",((e,t)=>t[0])),go({namespaceURI:_o,localName:"event"},["xs:string?"],"item()?",((e,t)=>{if(!t)return null;for(let n=e.currentContext.formElement;n;n=n.parentNode)if(n.currentEvent)return n.currentEvent.detail&&"object"==typeof n.currentEvent.detail&&t in n.currentEvent.detail?n.currentEvent.detail[t]:t.includes(".")?Xo(n.currentEvent,t):n.currentEvent[t]||null;return null})),yo(`\n    module namespace xf="${_o}";\n\n    declare %public function xf:boolean-from-string($str as xs:string) as xs:boolean {\n        lower-case($str) = "true" or $str = "1"\n    };\n`),go({namespaceURI:_o,localName:"base64encode"},["xs:string?"],"xs:string?",((e,t)=>btoa(t))),go({namespaceURI:_o,localName:"local-date"},[],"xs:string?",((e,t)=>(new Date).toLocaleDateString())),go({namespaceURI:_o,localName:"local-dateTime"},[],"xs:string?",((e,t)=>(new Date).toLocaleString())),go({namespaceURI:_o,localName:"uri"},[],"xs:string?",((e,t)=>window.location.href)),go({namespaceURI:_o,localName:"uri-fragment"},[],"xs:string?",((e,t)=>window.location.hash)),go({namespaceURI:_o,localName:"uri-host"},[],"xs:string?",((e,t)=>window.location.host)),go({namespaceURI:_o,localName:"uri-query"},[],"xs:string?",((e,t)=>window.location.search)),go({namespaceURI:_o,localName:"uri-relpath"},[],"xs:string?",((e,t)=>{const n=new URL(window.location.href).pathname;return n.substring(0,n.lastIndexOf("/")+1)})),go({namespaceURI:_o,localName:"uri-path"},[],"xs:string?",((e,t)=>new URL(window.location.href).pathname)),go({namespaceURI:_o,localName:"uri-port"},[],"xs:string?",((e,t)=>window.location.port)),go({namespaceURI:_o,localName:"uri-param"},["xs:string?"],"xs:string?",((e,t)=>{if(!t)return null;const{search:n}=window.location;return new URLSearchParams(n).get(t)||""})),go({namespaceURI:_o,localName:"uri-scheme"},[],"xs:string?",((e,t)=>new URL(window.location.href).protocol)),go({namespaceURI:_o,localName:"uri-scheme-specific-part"},[],"xs:string?",((e,t)=>{const n=window.location.href;return n.substring(n.indexOf(":")+1,n.length)}));class Yo{static async loadHtml(e){try{const t=await fetch(e,{method:"GET",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"text/html"}}),n=t.headers.get("content-type").toLowerCase();if(n.startsWith("text/html"))return t.text();Yo.dispatch(this,"error",{message:`Response has wrong contentType '${n}'. Should be 'text/html'`,level:"Error"})}catch(t){Yo.dispatch(this,"error",{message:`Html couldn't be loaded from '${e}'`,level:"Error"})}}static async loadForeFromSrc(e,t,n){if(!t)return Yo.dispatch(this,"error",{detail:{message:"No 'src' attribute present"}}),null;const r=await Yo.loadHtml(t),i=(new DOMParser).parseFromString(r,"text/html").querySelector(n);if(!i)return void Yo.dispatch(this,"error",{detail:{message:`Fore element not found in '${t}'. Maybe wrapped within 'template' element?`}});i.setAttribute("from-src",t);const a=e.attributes;return Array.from(a).forEach((e=>{"src"!==e.name&&i.setAttribute(e.name,e.value)})),e.replaceWith(i),i}static buildPredicates(e){let t="";return Array.from(e.attributes).forEach((e=>{t+=`[@${e.nodeName}]`})),t}static isWidget(e){if(e?.classList.contains("widget"))return!0;let t=e.parentNode;for(;t&&"FX-CONTROL"!==t.nodeName;){if(t?.classList?.contains("widget"))return!0;t=t.parentNode}return!1}static getDomNodeIndexString(e){const t=[];let n=e;for(;n&&n.parentNode;){const e=n.parentNode;if(e.childNodes&&e.childNodes.length>0){const r=[...e.childNodes].indexOf(n);t.unshift(r)}n=e}return t.join(".")}static getExpression(e){return e.startsWith("{")&&e.endsWith("}")?e.substring(1,e.length-1):e}static getFore(e){return e.nodeType===Node.TEXT_NODE?e.parentNode.closest("fx-fore"):e.closest("fx-fore")}static get ACTION_ELEMENTS(){return["FX-ACTION","FX-DELETE","FX-DISPATCH","FX-HIDE","FX-INSERT","FX-LOAD","FX-MESSAGE","FX-REBUILD","FX-RECALCULATE","FX-REFRESH","FX-RENEW","FX-RELOAD","FX-REPLACE","FX-RESET","FX-RETAIN","FX-RETURN","FX-REVALIDATE","FX-SEND","FX-SETFOCUS","FX-SETINDEX","FX-SETVALUE","FX-SHOW","FX-TOGGLE","FX-UPDATE"]}static createUUID(){const e=[],t="0123456789abcdef";for(let n=0;n<36;n+=1)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";return e.join("")}static get XFORMS_NAMESPACE_URI(){return"http://www.w3.org/2002/xforms"}static isActionElement(e){return Yo.ACTION_ELEMENTS.includes(e)}static get UI_ELEMENTS(){return["FX-ALERT","FX-CONTROL","FX-DIALOG","FX-FILENAME","FX-MEDIATYPE","FX-GROUP","FX-HINT","FX-ITEMS","FX-OUTPUT","FX-RANGE","FX-REPEAT","FX-REPEATITEM","FX-REPEAT-ATTRIBUTES","FX-SWITCH","FX-SECRET","FX-SELECT","FX-SUBMIT","FX-TEXTAREA","FX-TRIGGER","FX-UPLOAD","FX-VAR"]}static get MODEL_ELEMENTS(){return["FX-BIND","FX-FUNCTION","FX-MODEL","FX-INSTANCE","FX-SUBMISSION"]}static isUiElement(e){return Yo.UI_ELEMENTS.includes(e),Yo.UI_ELEMENTS.includes(e)}static async refreshChildren(e,t){const n=new Promise((n=>{const{children:r}=e;if(r)for(const e of Array.from(r)){if("FX-FORE"===e.nodeName.toUpperCase())break;if(Yo.isUiElement(e.nodeName)&&"function"==typeof e.refresh){const n=e;if(!t)continue;if(!0===t){n.refresh(t);continue}if("object"!=typeof t)continue;if("index-function"===t.reason&&n.dependencies.isInvalidatedByIndexFunction()){n.refresh(t);continue}if(n.dependencies.isInvalidatedByChildlistChanges(t.elementLocalnamesWithChanges)){n.refresh(t);continue}}!0!==e.inert&&Yo.refreshChildren(e,t)}n("done")}));return n}static copyDom(e){const t=(new DOMParser).parseFromString("<fx-fore></fx-fore>","text/html").querySelector("fx-fore");return this.convertFromSimple(e,t),t.removeAttribute("convert"),t}static convertFromSimple(e,t){const n=e.childNodes;n&&Array.from(n).forEach((e=>{const n=`FX-${e.nodeName.toUpperCase()}`;if(Yo.MODEL_ELEMENTS.includes(n)||Yo.UI_ELEMENTS.includes(n)||Yo.ACTION_ELEMENTS.includes(n)){const r=t.ownerDocument.createElement(n);t.appendChild(r),Yo.copyAttributes(e,r),Yo.convertFromSimple(e,r)}else{if(e.nodeType===Node.TEXT_NODE){const n=t.ownerDocument.createTextNode(e.textContent);t.appendChild(n)}if(e.nodeType===Node.ELEMENT_NODE){const n=t.ownerDocument.createElement(e.nodeName);t.appendChild(n),Yo.copyAttributes(e,t),Yo.convertFromSimple(e,n)}}}))}static copyAttributes(e,t){return Array.from(e.attributes).forEach((e=>{t.setAttribute(e.nodeName,e.nodeValue)}))}static getContentType(e,t){return"application/x-www-form-urlencoded"===t?"application/x-www-form-urlencoded; charset=UTF-8":"xml"===e.type?"application/xml; charset=UTF-8":"json"===e.type?"application/json":null}static async handleResponse(e){const{status:t}=e;if(t>=400)throw alert(`response status:  ${t} - failed to load data for '${this.src}' - stopping.`),new Error(`failed to load data - status: ${t}`);const n=e.headers.get("content-type").toLowerCase();if(n.startsWith("text/html"))return e.text().then((e=>(new DOMParser).parseFromString(e,"text/html")));if(n.startsWith("text/plain")||n.startsWith("text/markdown"))return e.text();if(n.startsWith("application/json"))return e.json();if(n.startsWith("application/xml")){const t=await e.text();return(new DOMParser).parseFromString(t,"application/xml")}return"done"}static fadeInElement(e){let t=()=>(e.getAnimations&&e.getAnimations().map((e=>e.finish())),t=e.animate({opacity:[0,1]},600),t.finished);return t()}static fadeOutElement(e,t){let n=()=>(e.getAnimations&&e.getAnimations().map((e=>e.finish())),n=e.animate({opacity:[1,0]},t),n.finished);return n()}static async dispatch(e,t,n){if(!wo.contains(e?.ownerDocument,e))return;const r=new CustomEvent(t,{composed:!1,bubbles:!0,detail:n});r.listenerPromises=[],e.dispatchEvent(r),r.listenerPromises.length&&await Promise.all(r.listenerPromises)}static formatXml(e){const t=(e=e.replace(/(>)(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n");for(let e=0;e<t.length;e++){const n=t[e];Boolean(n.match(/<.+\/>/)),Boolean(n.match(/<\/.+>/)),Boolean(n.match(/<[^!].*>/))}}static stringifiedComponent(e){return`<${e.localName} ${Array.from(e.attributes).map((e=>`${e.name}="${e.value}"`)).join(" ")}></${e.localName}>`}}Yo.READONLY_DEFAULT=!1,Yo.REQUIRED_DEFAULT=!1,Yo.RELEVANT_DEFAULT=!0,Yo.CONSTRAINT_DEFAULT=!0,Yo.TYPE_DEFAULT="xs:string";class Ko extends HTMLElement{constructor(){super(),this.model=this.parentNode,this.attachShadow({mode:"open"}),this.originalInstance=null,this.partialInstance=null,this.credentials=""}connectedCallback(){this.hasAttribute("src")&&(this.src=this.getAttribute("src")),this.hasAttribute("id")?this.id=this.getAttribute("id"):this.id="default",this.credentials=this.hasAttribute("credentials")?this.getAttribute("credentials"):"same-origin",["same-origin","include","omit"].includes(this.credentials),this.hasAttribute("type")?this.type=this.getAttribute("type"):(this.type="xml",this.setAttribute("type",this.type));this.shadowRoot.innerHTML="\n            <style>\n                \n            :host {\n                display: none;\n            }\n            :host * {\n                display:none;\n            }\n            ::slotted(*){\n                display:none;\n            }\n        \n            </style>\n            \n        \n        ",this.partialInstance={}}async init(){return await this._initInstance(),this.dispatchEvent(new CustomEvent("instance-loaded",{composed:!0,bubbles:!0,detail:{instance:this}})),this}reset(){this.instanceData=this.originalInstance.cloneNode(!0)}evalXPath(e){const t=this.parentElement.parentElement;return Ro(e,this.getDefaultContext(),t)}getInstanceData(){return this.instanceData||this.createInstanceData(),this.instanceData}setInstanceData(e){e?this._setInitialData(e):this.createInstanceData()}getDefaultContext(){const e=this.getInstanceData();return"xml"===this.type?e.firstElementChild:e}async _initInstance(){if("#querystring"===this.src){const e=new URLSearchParams(location.search),t=(new DOMParser).parseFromString("<data></data>","application/xml"),n=t.firstElementChild;for(const r of e){const e=t.createElement(r[0]);e.appendChild(t.createTextNode(r[1])),n.appendChild(e)}this._setInitialData(t)}else this.src?await this._loadData():0!==this.childNodes.length&&this._useInlineData()}createInstanceData(){if("xml"===this.type){const e=(new DOMParser).parseFromString("<data></data>","application/xml");this.instanceData=e,this.originalInstance=this.instanceData.cloneNode(!0)}"json"===this.type&&(this.instanceData={},this.originalInstance=[...this.instanceData]),"text"===this.type&&(this.instanceData=this.innerText,this.originalInstance=this.innerText)}async _loadData(){const e=`${this.src}`;if(e.startsWith("localStore")){const t=e.substring(e.indexOf(":")+1),n=(new DOMParser).parseFromString("<data></data>","application/xml");if(this.instanceData=n,!t)return;const r=localStorage.getItem(t);if(!r)return void this._useInlineData();const i=(new DOMParser).parseFromString(r,"application/xml");return void n.firstElementChild.replaceWith(i.firstElementChild)}const t=Yo.getContentType(this,"get");try{const n=await fetch(e,{method:"GET",credentials:this.credentials,mode:"cors",headers:{"Content-Type":t}}),r=await async function(e,t){const{status:n}=t;if(n>=400)throw alert(`response status:  ${n} - failed to load data for '${e.src}' - stopping.`),new Error(`failed to load data - status: ${n}`);const r=t.headers.get("content-type").toLowerCase();if(r.startsWith("text/html"))return t.text().then((e=>(new DOMParser).parseFromString(e,"text/html")));if(r.startsWith("text/"))return t.text();if(r.startsWith("application/json"))return t.json();if(r.startsWith("application/xml")||r.startsWith("text/xml")){const e=await t.text();return(new DOMParser).parseFromString(e,"application/xml")}throw new Error(`unable to handle response content type: ${r}`)}(this,n);this._setInitialData(r)}catch(e){throw new Error(`failed loading data ${e}`)}}_setInitialData(e){this.instanceData=e,e.nodeType?this.originalInstance=this.instanceData.cloneNode(!0):this.originalInstance={...this.instanceData}}_getContentType(){return"xml"===this.type?"application/xml":"json"===this.type?"application/json":null}_useInlineData(){if("xml"===this.type){const e=(new DOMParser).parseFromString(this.innerHTML,"application/xml");this._setInitialData(e)}else"json"===this.type?this._setInitialData(JSON.parse(this.textContent)):"html"===this.type?this._setInitialData(this.firstElementChild.children):"text"===this.type&&this._setInitialData(this.textContent)}}customElements.get("fx-instance")||customElements.define("fx-instance",Ko);class Jo{constructor(e,t,n,r,i,a,s,o,l,c){this.path=e,this.ref=t,this.constraint=a,this.readonly=n,this.relevant=r,this.required=i,this.type=s,this.node=o,this.bind=l,this.changed=!1,this.alerts=[],this.boundControls=[],this.instanceId=c}get value(){return this.node?this.node.nodeType?this.node.nodeType===Node.ATTRIBUTE_NODE?this.node.nodeValue:this.node.textContent:this.node:null}set value(e){e.nodeType===Node.DOCUMENT_NODE?(this.node.replaceWith(e.firstElementChild),this.node=e.firstElementChild):e.nodeType===Node.ELEMENT_NODE?(this.node.replaceWith(e),this.node=e):this.node.nodeType===Node.ATTRIBUTE_NODE?this.node.nodeValue=e:this.node.textContent=e}addAlert(e){this.alerts.includes(e)||this.alerts.push(e)}cleanAlerts(){this.alerts=[]}}class Wo extends HTMLElement{constructor(){super(),this.instances=[],this.modelItems=[],this.defaultContext={},this.changed=[],this.inited=!1,this.modelConstructed=!1,this.attachShadow({mode:"open"}),this.computes=0,this.fore={}}get formElement(){return this.parentElement}connectedCallback(){this.setAttribute("inert","true"),this.shadowRoot.innerHTML="\n            <slot></slot>\n        ",this.skipUpdate=!1,this.fore=this.parentNode}static lazyCreateModelItem(e,t,n,r){const i=wo.resolveInstance(r,t);if(e.parentNode.createNodes&&null==n){const n=new Jo(void 0,t,Yo.READONLY_DEFAULT,!1,Yo.REQUIRED_DEFAULT,Yo.CONSTRAINT_DEFAULT,Yo.TYPE_DEFAULT,null,this,i);return e.registerModelItem(n),n}let a,s={};if(null==n)return null;s=n.nodeType===Node.TEXT_NODE?n.parentNode:n,n.nodeType?a=wo.getPath(n,i):(a=null,s=n);const o=new Jo(a,t,Yo.READONLY_DEFAULT,Yo.RELEVANT_DEFAULT,Yo.REQUIRED_DEFAULT,Yo.CONSTRAINT_DEFAULT,Yo.TYPE_DEFAULT,s,this,i);return e.registerModelItem(o),o}async modelConstruct(){Yo.dispatch(this,"model-construct",{model:this});const e=this.querySelectorAll("fx-instance");if(e.length>0){const t=[];e.forEach((e=>{t.push(e.init())})),await Promise.all(t),this.instances=Array.from(e),this.modelConstructed=!0,await Yo.dispatch(this,"model-construct-done",{model:this}),this.inited=!0,this.updateModel()}else this.modelConstructed=!0,await this.dispatchEvent(new CustomEvent("model-construct-done",{composed:!1,bubbles:!0,detail:{model:this}}));const t=Array.from(this.querySelectorAll("fx-functionlib"));await Promise.all(t.map((e=>e.readyPromise))),this.inited=!0}registerModelItem(e){this.modelItems.push(e)}updateModel(){this.rebuild(),this.recalculate(),this.revalidate()}rebuild(){this.mainGraph=new xo(!1),this.modelItems=[];const e=this.querySelectorAll("fx-model > fx-bind");0!==e.length?(e.forEach((e=>{e.init(this)})),Yo.dispatch(this,"rebuild-done",{maingraph:this.mainGraph})):this.skipUpdate=!0}recalculate(){if(this.mainGraph)if(this.computes=0,this.subgraph=new xo(!1),0!==this.changed.length){this.changed.forEach((e=>{if(this.subgraph.addNode(e.path,e.node),this.mainGraph.hasNode(e.path)){const t=this.mainGraph.dependantsOf(e.path,!1).reverse();0!==t.length&&t.forEach((t=>{const n=this.mainGraph.getNodeData(t);if(this.subgraph.addNode(t,n),t.includes(":")){const r=t.substring(0,t.indexOf(":"));this.subgraph.addNode(r,n);0!==this.mainGraph.dependentsOf(e.path,!1).indexOf(t)&&this.subgraph.addDependency(t,e.path)}}))}}));this.subgraph.overallOrder(!1).forEach((e=>{if(this.mainGraph.hasNode(e)){const t=this.mainGraph.getNodeData(e);this.compute(t,e)}}));const e=[...this.changed];this.formElement.toRefresh=e,this.changed=[],Yo.dispatch(this,"recalculate-done",{graph:this.subgraph,computes:this.computes})}else{this.mainGraph.overallOrder(!1).forEach((e=>{const t=this.mainGraph.getNodeData(e);this.compute(t,e)})),Yo.dispatch(this,"recalculate-done",{graph:this.mainGraph,computes:this.computes})}}compute(e,t){const n=this.getModelItem(e);if(n&&t.includes(":")){const e=t.split(":")[1];if(e){const t=n.bind[e];if("calculate"===e){const e=Do(t,n.node,this);n.value=e,n.readonly=!0}else if("constraint"!==e&&"type"!==e&&t){const r=Lo(t,n.node,this);n[e]=r}}this.computes+=1}}revalidate(){if(0===this.modelItems.length)return!0;let e=!0;return this.modelItems.forEach((t=>{const{bind:n}=t;if(n){if("function"==typeof n.hasAttribute&&n.hasAttribute("constraint")){const r=n.getAttribute("constraint");if(r&&t.node){const n=Lo(r,t.node,this);t.constraint=n,this.formElement.addToRefresh(t),n||(e=!1)}}if("function"==typeof n.hasAttribute&&n.hasAttribute("required")){const r=n.getAttribute("required");if(r){const n=Lo(r,t.node,this);t.required=n,this.formElement.addToRefresh(t),t.node.textContent||(e=!1)}}}})),e}addChanged(e){this.inited&&this.changed.push(e)}getModelItem(e){return this.modelItems.find((t=>t.node===e))}getDefaultContext(){return this.instances[0].getDefaultContext()}getDefaultInstance(){return this.instances.length?this.instances[0]:this.getInstance("default")}getDefaultInstanceData(){return this.instances[0].getInstanceData()}getInstance(e){let t;if("default"===e&&(t=this.instances[0]),!t){t=Array.from(this.instances).find((t=>t.id===e)),this.fore.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?this.fore.parentNode.host.closest("fx-fore"):this.fore.parentNode.closest("fx-fore")}if(!t){const n=this.fore.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?this.fore.parentNode.host.closest("fx-fore"):this.fore.parentNode.closest("fx-fore");if(n){t=n.getModel().instances.filter((e=>e.hasAttribute("shared"))).find((t=>t.id===e))}}return t||("default"===e?this.getDefaultInstance():(!t&&this.fore.strict&&Yo.dispatch(this,"error",{origin:this,message:`Instance '${e}' does not exist`,level:"Error"}),null))}evalBinding(e){return this.instances[0].evalXPath(e)}}Wo.dataChanged=!1,customElements.get("fx-model")||customElements.define("fx-model",Wo);class Qo{constructor(){this._xpaths=new Set,this._parentDependencies=null}isInvalidatedByIndexFunction(){for(const e of this._xpaths)if(e.includes("index("))return!0;return!!this._parentDependencies?.isInvalidatedByIndexFunction()}isInvalidatedByChildlistChanges(e){const t=["//","ancestor","descendant","element(","*","..","following","preceding"];for(const n of this._xpaths){if(t.some((e=>n.includes(e))))return!0;if(e.some((e=>n.includes(e))))return!0}return!!this._parentDependencies?.isInvalidatedByChildlistChanges(e)}addXPath(e){this._xpaths.add(e)}resetDependencies(){this._xpaths.clear()}setParentDependencies(e){this._parentDependencies=e}}class Zo extends HTMLElement{static get properties(){return{context:{type:Object},model:{type:Object},modelItem:{type:Object},nodeset:{type:Object},ref:{type:String},inScopeVariables:{type:Map}}}constructor(){super(),this.context=null,this.model=null,this.modelItem=null,this.ref=this.hasAttribute("ref")?this.getAttribute("ref"):"",this.inScopeVariables=new Map,this.dependencies=new Qo}connectedCallback(){this.parentElement&&this.dependencies.setParentDependencies(this.parentElement?.closest("[ref]")?.dependencies)}getModel(){if(this.model)return this.model;return this.getOwnerForm().querySelector("fx-model")}getOwnerForm(){let e=this;for(;e&&e.parentNode;){if("FX-FORE"===e.nodeName.toUpperCase())return e;e=e.parentNode instanceof DocumentFragment?e.parentNode.host:e.parentNode}return e}evalInContext(){this.dependencies.resetDependencies();if(!this.getModel())return;let e;if(this.hasAttribute("context")&&(e=zo(this.getAttributeNode("context")||this,this.context)),this.hasAttribute("ref")&&(e=zo(this.getAttributeNode("ref")||this,this.ref),this.dependencies.addXPath(this.ref)),e||0===this.getModel().instances.length||(e=this.getModel().getDefaultInstance().getDefaultContext()),""===this.ref)this.nodeset=e;else if(Array.isArray(e))this.nodeset=Do(this.ref,e[0],this);else{if(!e)return;const{nodeType:t}=e;t&&!wo.isAbsolutePath(this.ref)?this.nodeset=Ro(this.ref,e,this):[this.nodeset]=Do(this.ref,e,this)}}evaluateAttributeTemplateExpression(e,t){const n=e.match(/{[^}]*}/g);return n&&n.forEach((n=>{const r=n.substring(1,n.length-1),i=$o(r,zo(t,r),this),a=e.replaceAll(n,i);e=a})),e}isNotBound(){return!this.hasAttribute("ref")}isBound(){return this.hasAttribute("ref")}getBindingExpr(){if(this.hasAttribute("ref"))return this.getAttribute("ref");const e=wo.getClosest("[ref]",this.parentNode);return e?e.getAttribute("ref"):"instance()"}getInstance(){if(this.ref.startsWith("instance(")){const e=wo.getInstanceId(this.ref);return this.getModel().getInstance(e)}return this.getModel().getInstance("default")}_getParentBindingElement(e){if(e.parentNode.host){const{host:t}=e.parentNode;if(t.hasAttribute("ref"))return t}else if(e.parentNode){if(e.parentNode.hasAttribute("ref"))return this.parentNode;this._getParentBindingElement(this.parentNode)}return null}getModelItem(){if(!this.getModel())return;const e=this.getModel().getModelItem(this.nodeset);e&&(this.modelItem=e);const t=wo.getClosest("fx-repeatitem",this);let n;if(t){const{index:e}=t;n=Array.isArray(this.nodeset)?this.getModel().getModelItem(this.nodeset[e-1]):this.getModel().getModelItem(this.nodeset)}else n=this.nodeset?this.getModel().getModelItem(this.nodeset):null;if(!n){const e=Wo.lazyCreateModelItem(this.getModel(),this.ref,this.nodeset,this);return this.modelItem=e,e}return this.modelItem=n,n}getValue(){if(this.hasAttribute("value")){const e=this.getAttribute("value");try{return $o(e,zo(this,e),this.getOwnerForm())}catch(e){Yo.dispatch(this,"error",{message:e})}}return this.textContent?this.textContent:null}getInScopeContext(){return zo(this.getAttributeNode("ref")||this,this.ref)}setInScopeVariables(e){this.inScopeVariables=e}}class el extends Zo{constructor(){super(),this.nodeset=[],this.model={},this.contextNode={},this.inited=!1}connectedCallback(){this.constraint=this.getAttribute("constraint"),this.ref=this.getAttribute("ref"),this.readonly=this.getAttribute("readonly"),this.required=this.getAttribute("required"),this.relevant=this.getAttribute("relevant"),this.type=this.hasAttribute("type")?this.getAttribute("type"):el.TYPE_DEFAULT,this.calculate=this.getAttribute("calculate")}init(e){this.model=e,this._getInstanceId(),this.bindType=this.getModel().getInstance(this.instanceId).type,"xml"===this.bindType&&(this._evalInContext(),this._buildBindGraph(),this._createModelItems()),this._processChildren(e)}_buildBindGraph(){"xml"===this.bindType&&this.nodeset.forEach((e=>{const t=wo.resolveInstance(this,this.ref),n=wo.getPath(e,t);this.model.mainGraph.addNode(n,e),this.calculate&&(this.model.mainGraph.addNode(`${n}:calculate`,e),this.model.mainGraph.addDependency(n,`${n}:calculate`));const r=this._getReferencesForProperty(this.calculate,e);if(0!==r.length&&this._addDependencies(r,e,n,"calculate"),!this.calculate){const t=this._getReferencesForProperty(this.readonly,e);0!==t.length?this._addDependencies(t,e,n,"readonly"):this.readonly&&this.model.mainGraph.addNode(`${n}:readonly`,e)}const i=this._getReferencesForProperty(this.required,e);0!==i.length?this._addDependencies(i,e,n,"required"):this.required&&this.model.mainGraph.addNode(`${n}:required`,e);const a=this._getReferencesForProperty(this.relevant,e);0!==a.length?this._addDependencies(a,e,n,"relevant"):this.relevant&&this.model.mainGraph.addNode(`${n}:relevant`,e);const s=this._getReferencesForProperty(this.constraint,e);0!==s.length?this._addDependencies(s,e,n,"constraint"):this.constraint&&(this.model.mainGraph.addNode(`${n}:constraint`,e),this.model.mainGraph.addDependency(n,`${n}:constraint`))}))}_addDependencies(e,t,n,r){const i=`${n}:${r}`;0!==e.length?(this.model.mainGraph.hasNode(i)||this.model.mainGraph.addNode(i,t),e.forEach((e=>{const t=wo.resolveInstance(this,n),r=wo.getPath(e,t);r.endsWith("text()[1]")||(this.model.mainGraph.hasNode(r)||this.model.mainGraph.addNode(r,e),this.model.mainGraph.addDependency(i,r))}))):this.model.mainGraph.addNode(i,t)}_processChildren(e){const t=this.querySelectorAll(":scope > fx-bind");Array.from(t).forEach((t=>{t.init(e)}))}getAlert(){if(this.hasAttribute("alert"))return this.getAttribute("alert");const e=this.querySelector("fx-alert");return e?e.innerHTML:null}_evalInContext(){const e=zo(this.getAttributeNode("ref")||this,this.ref);if(this.nodeset=[],""===this.ref||null===this.ref)this.nodeset=e;else if(Array.isArray(e))e.forEach((t=>{if(wo.isSelfReference(this.ref))this.nodeset=e;else if(this.ref){Mo(this.ref,t,this).forEach((e=>{this.nodeset.push(e)}))}}));else{"xml"===this.getModel().getInstance(this.instanceId).type?this.nodeset=Mo(this.ref,e,this):this.nodeset=this.ref}}_createModelItems(){Array.isArray(this.nodeset)?Array.from(this.nodeset).forEach((e=>{this._createModelItem(e)})):this._createModelItem(this.nodeset)}_createModelItem(e){if(wo.isSelfReference(this.ref)){const e=wo.getClosest("fx-bind[ref]",this.parentElement);return void(e&&(e.required=this.required))}const t=e,n=wo.resolveInstance(this,this.ref),r=wo.getPath(e,n),i=new Jo(r,this.getBindingExpr(),el.READONLY_DEFAULT,el.RELEVANT_DEFAULT,el.REQUIRED_DEFAULT,el.CONSTRAINT_DEFAULT,this.type,t,this,n),a=this.getAlert();a&&i.addAlert(a),this.getModel().registerModelItem(i)}_getReferencesForProperty(e){return e?this.getReferences(e):[]}getReferences(e){const t=new Set,n=new bo((e=>t.add(e)));return this.nodeset.forEach((t=>{$o(e,t,this,n)})),Array.from(t.values())}_initBooleanModelItemProperty(e,t){return Lo(this[e],t,this)}static shortenPath(e){const t=e.split("/");let n="";for(let e=2;e<t.length;e+=1){const r=t[e];if(-1!==r.indexOf("{}")){n+=`/${r.split("{}")[1]}`}else n+=`/${r}`}return n}_getInstanceId(){const e=this.getBindingExpr();if(e.startsWith("instance("))this.instanceId=wo.getInstanceId(e);else{if(!this.instanceId&&"FX-BIND"===this.parentNode.nodeName){let e=this.parentNode;for(;e&&!this.instanceId;){const t=e.getBindingExpr();if(t.startsWith("instance("))return void(this.instanceId=wo.getInstanceId(t));if("FX-BIND"!==e.parentNode.nodeName){this.instanceId="default";break}e=e.parentNode}}this.instanceId="default"}}}el.READONLY_DEFAULT=!1,el.REQUIRED_DEFAULT=!1,el.RELEVANT_DEFAULT=!0,el.CONSTRAINT_DEFAULT=!0,el.TYPE_DEFAULT="xs:string",customElements.get("fx-bind")||customElements.define("fx-bind",el);class tl extends Zo{constructor(){super(),this.attachShadow({mode:"open"}),this._url="",this._socket=null,this._heartbeatInterval=tl._defaultHeartbeatInterval,this._heartbeatTimer=null,this._messageFormat=tl._defaultMessageFormat,this._onMessage=this._onMessage.bind(this)}_render(){const e=`\n            <slot></slot>\n${"xml"===this._messageFormat?'<fx-replace id="replace" ref="."></fx-replace>':'<fx-setvalue id="setvalue" ref="."></fx-setvalue>'}\n        `;this.shadowRoot.innerHTML=`\n            <style>\n                \n            :host {\n                display: none;\n            }\n        \n            </style>\n            ${e}\n        `}static get observedAttributes(){return["url","heartbeat","message-format"]}connectedCallback(){this.hasAttribute("url")&&(this._url=this.getAttribute("url")),this.hasAttribute("heartbeat")&&(this._heartbeatInterval=parseInt(this.getAttribute("heartbeat")),this._setupHeartbeat()),this.hasAttribute("message-format")&&(this._messageFormat=this.getAttribute("message-format")),this._render(),this.getOwnerForm().addEventListener("model-construct-done",(e=>{this._connect(),this.evalInContext()}))}disconnectedCallback(){this._disconnect()}attributeChangedCallback(e,t,n){switch(e){case"url":this._url=n,this._connect();break;case"heartbeat":this._heartbeatInterval=parseInt(n),this._setupHeartbeat();break;case"messageformat":this._messageFormat=n}}send(e){if(this.evalInContext(),e=this.nodeset,!this._socket||this._socket.readyState!==WebSocket.OPEN)throw new Error("WebSocket is not connected");{let t;switch(this._messageFormat){case"json":t=JSON.stringify(e);break;case"xml":t=(new XMLSerializer).serializeToString(e);break;case"text":t=e.textContent;break;default:throw new Error(`Unsupported message format: ${this._messageFormat}`)}this._sendMessage(t)}}_connect(){this._disconnect(),this._url&&(this._socket=new WebSocket(this._url),this._socket.addEventListener("open",this._onOpen.bind(this)),this._socket.addEventListener("message",this._onMessage),this._socket.addEventListener("close",this._onClose.bind(this)))}_disconnect(){this._socket&&(this._socket.removeEventListener("open",this._onOpen.bind(this)),this._socket.removeEventListener("message",(e=>this._onMessage(e))),this._socket.removeEventListener("close",this._onClose.bind(this)),this._socket.close(),this._socket=null),this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}_onOpen(e){this.dispatchEvent(new CustomEvent("open",{detail:e}))}_onMessage(e){let t;switch(this._messageFormat){case"json":t=JSON.parse(e.data);break;case"xml":t=(new DOMParser).parseFromString(e.data,"application/xml"),this.getModelItem().value=t,Wo.dataChanged=!0,this.getModel().changed.push(this.modelItem),this.getModel().updateModel(),this.getOwnerForm().refresh(!0);break;case"text":t=e.data;break;default:throw new Error(`Unsupported message format: ${this._messageFormat}`)}Yo.dispatch(this,"channel-message",{message:t})}_onClose(e){this.dispatchEvent(new CustomEvent("close",{detail:e}))}_setupHeartbeat(){this._heartbeatInterval>0?(this._heartbeatTimer&&clearInterval(this._heartbeatTimer),this._heartbeatTimer=setInterval((()=>{this._sendMessage("")}),this._heartbeatInterval)):this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}_sendMessage(e){this._socket&&this._socket.readyState===WebSocket.OPEN&&this._socket.send(e)}static get _defaultHeartbeatInterval(){return 0}static get _defaultMessageFormat(){return"json"}get url(){return this._url}set url(e){this.setAttribute("url",e)}get heartbeat(){return this._heartbeatInterval}set heartbeat(e){this.setAttribute("heartbeat",e)}get messageformat(){return this._messageFormat}set messageformat(e){this.setAttribute("messageformat",e)}}customElements.get("fx-connection")||customElements.define("fx-connection",tl)
/*!
 * Toastify js 1.11.2
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */;class nl{constructor(e){this.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},this.version="1.11.2",this.options={},this.toastElement=null,this._rootElement=document.body,this._init(e)}showToast(){if(this.toastElement=this._buildToast(),"string"==typeof this.options.selector?this._rootElement=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||this.options.selector instanceof ShadowRoot?this._rootElement=this.options.selector:this._rootElement=document.body,!this._rootElement)throw"Root element is not defined";return this._rootElement.insertBefore(this.toastElement,this._rootElement.firstChild),this._reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((()=>{this._removeElement(this.toastElement)}),this.options.duration)),this}hideToast(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this._removeElement(this.toastElement)}_init(e){this.options=Object.assign(this.defaults,e),this.options.backgroundColor,this.toastElement=null,this.options.gravity="bottom"===e.gravity?"toastify-bottom":"toastify-top",this.options.stopOnFocus=void 0===e.stopOnFocus||e.stopOnFocus,e.backgroundColor&&(this.options.style.background=e.backgroundColor)}_buildToast(){if(!this.options)throw"Toastify is not initialized";let e=document.createElement("div");e.className=`toastify on ${this.options.className}`,e.className+=` toastify-${this.options.position}`,e.className+=` ${this.options.gravity}`;for(const t in this.options.style)e.style[t]=this.options.style[t];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){let t=document.createElement("img");t.src=this.options.avatar,t.className="toastify-avatar","left"==this.options.position?e.appendChild(t):e.insertAdjacentElement("afterbegin",t)}if(!0===this.options.close){let t=document.createElement("span");t.innerHTML="&#10006;",t.className="toast-close",t.addEventListener("click",(e=>{e.stopPropagation(),this._removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}));const n=window.innerWidth>0?window.innerWidth:screen.width;"left"==this.options.position&&n>360?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}if(this.options.stopOnFocus&&this.options.duration>0&&(e.addEventListener("mouseover",(t=>{window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(()=>{e.timeOutValue=window.setTimeout((()=>{this._removeElement(e)}),this.options.duration)}))),void 0!==this.options.destination&&e.addEventListener("click",(e=>{e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination})),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",(e=>{e.stopPropagation(),this.options.onClick()})),"object"==typeof this.options.offset){const t=this._getAxisOffsetAValue("x",this.options),n=this._getAxisOffsetAValue("y",this.options),r="left"==this.options.position?t:`-${t}`,i="toastify-top"==this.options.gravity?n:`-${n}`;e.style.transform=`translate(${r},${i})`}return e}_removeElement(e){e.className=e.className.replace(" on",""),window.setTimeout((()=>{this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),this._reposition()}),400)}_reposition(){let e,t={top:15,bottom:15},n={top:15,bottom:15},r={top:15,bottom:15},i=this._rootElement.querySelectorAll(".toastify");for(let a=0;a<i.length;a++){e=!0===i[a].classList.contains("toastify-top")?"toastify-top":"toastify-bottom";let s=i[a].offsetHeight;e=e.substr(9,e.length-1);let o=15;(window.innerWidth>0?window.innerWidth:screen.width)<=360?(i[a].style[e]=`${r[e]}px`,r[e]+=s+o):!0===i[a].classList.contains("toastify-left")?(i[a].style[e]=`${t[e]}px`,t[e]+=s+o):(i[a].style[e]=`${n[e]}px`,n[e]+=s+o)}}_getAxisOffsetAValue(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:`${t.offset[e]}px`:"0px"}}function rl(e){return new nl(e)}class il extends HTMLElement{static get properties(){return{avatar:{type:String},backgroundColor:{type:String},callback:{type:String},classProp:{type:String},close:{type:Boolean},destination:{type:String},duration:{type:Number},escapeMarkup:{type:Boolean},gravity:{type:String},newWindow:{type:Boolean},oldestFirst:{type:Boolean},position:{type:String},selector:{type:String},stopOnFocus:{type:Boolean},text:{type:String}}}constructor(){super(),this.attachShadow({mode:"open"})}_initVar(e,t){return this.hasAttribute(e)?this.getAttribute(e):t}connectedCallback(){this.avatar=this._initVar("avatar",""),this.backgroundColor=this._initVar("backgroundColor",""),this.callback=this._initVar("callback",{}),this.classProp=this._initVar("data-class",""),this.close="true"===this._initVar("close",!1),this.destination=this._initVar("destination",void 0),this.duration=Number(this._initVar("duration",3e3)),this.escapeMarkup="true"===this._initVar("escapeMarkup","true"),this.gravity=this._initVar("gravity","top"),this.newWindow="true"===this._initVar("newWindow","false"),this.offSet=this._initVar("offSet",{}),this.oldestFirst="true"===this._initVar("oldestFirst","true"),this.position=this._initVar("position","right"),this.stopOnFocus="true"===this._initVar("stopOnFocus","true"),this.text=this._initVar("text","");this.shadowRoot.innerHTML=`\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        ${this.renderHTML}\n    `,this.addEventListener("jinn-toast",(e=>{this.showToast(e.detail.text)}))}disconnectedCallback(){this.removeEventListener("jinn-toast",this.showToast)}showToast(e){new rl({avatar:this.avatar,className:this.classProp,close:this.close,destination:this.destination,duration:this.duration,escapeMarkup:this.escapeMarkup,gravity:this.gravity,newWindow:!1,offset:this.offset,oldestFirst:this.oldestFirst,position:this.position,node:this.shadowRoot,stopOnFocus:this.stopOnFocus,text:e}).showToast()}renderHTML(){return"\n      <slot></slot>\n    "}}customElements.get("jinn-toast")||window.customElements.define("jinn-toast",il);const al=(e,t)=>class extends e{static get properties(){return{...e.properties,dnd:{type:Boolean}}}constructor(){super()}connectedCallback(){this.drop=e=>this._drop(e),this.addEventListener("drop",this.drop),this.dragOver=e=>this._dragOver(e),this.addEventListener("dragover",this.dragOver),this.dragLeave=e=>this._dragLeave(e),this.addEventListener("dragleave",this.dragLeave),this.dragEnd=e=>this._dragEnd(e),this.addEventListener("dragend",this._dragEnd)}disconnectedCallback(){this.removeEventListener("drop",this.drop),this.removeEventListener("dragover",this.dragOver),this.removeEventListener("dragleave",this.dragLeave),this.removeEventListener("dragend",this.dragEnd)}_dragOver(e){if(e.target.classList.contains("no-drop"))return!1;e.stopPropagation();const t=e.target.closest("fx-repeatitem");if(!this.getOwnerForm().draggedItem)return;if(this===this.getOwnerForm().draggedItem)return;const{draggedItem:n}=this.getOwnerForm();this.accepts(n)?this.classList.remove("no-drop"):this.classList.add("no-drop");const r=this.hasAttribute("id")?this:this.closest("[id]"),i=n.hasAttribute("id")?n:n.closest("[id]");r?.id===i?.id&&(t!==this.getOwnerForm().draggedItem&&this.classList.add("drag-over"),e.preventDefault())}_dragLeave(e){this.classList.remove("drag-over"),this.classList.remove("no-drop")}_dragEnd(e){const t=this.getOwnerForm().draggedItem;"copy"===t.getAttribute("drop-action")&&t.remove(),this.classList.remove("drag-over")}_getDataNode(){const e=this.getOwnerForm().draggedItem?.getModelItem()?.node;if(!e)return null;const{draggedItem:t}=this.getOwnerForm(),n=this.hasAttribute("id")?this:this.closest("[id]"),r=t.hasAttribute("id")?t:t.closest("[id]");return n?.id!==r?.id?null:e}accepts(e){if(!this.hasAttribute("accept"))return;const t=this.getAttribute("accept");return e.matches(t)}_drop(e){if(this.classList.remove("drag-over"),e.stopPropagation(),"fx-droptarget"===this.localName){this.children.length;let{draggedItem:t}=this.getOwnerForm();if("copy"===t.getAttribute("drop-action")&&(t=t.cloneNode(!0)),!this.accepts(t))return void this.classList.remove("no-drop");if(t===this)return;if("fx-droptarget"===t.localName){if(this.hasAttribute("drop-position"))return this.replaceChildren(t),void e.preventDefault();this.parentNode.lastElementChild===this?(this.parentNode.append(t),e.stopImmediatePropagation()):t===this.previousElementSibling?this.parentNode.insertBefore(t,this.nextElementSibling):this.parentNode.insertBefore(t,this)}else this.appendChild(t);return e.preventDefault(),this.getOwnerForm().getModel().updateModel(),void this.getOwnerForm().refresh(!0)}const t=this._getDataNode();if(t){if("fx-repeat"===this.localName){e.preventDefault();let n=this.nodeset;if(Array.isArray(n)&&!n.length){zo(this.getAttributeNode("ref")||this,this.ref).append(t)}else n=n[n.length-1],n.after(t)}else if("fx-repeatitem"===this.localName){const e=this.getModelItem().node;e.previousSibling===t?e.after(t):e.before(t)}this.getOwnerForm().getModel().updateModel(),this.getOwnerForm().refresh(!0)}}};class sl extends(al(Zo)){static get properties(){return{...super.properties,index:{type:Number},template:{type:Object},focusOnCreate:{type:String},initDone:{type:Boolean},repeatIndex:{type:Number},repeatSize:{type:Number},nodeset:{type:Array}}}constructor(){super(),this.ref="",this.dataTemplate=[],this.isDraggable=null,this.focusOnCreate="",this.initDone=!1,this.repeatIndex=1,this.nodeset=[],this.inited=!1,this.host={},this.index=1,this.repeatSize=0,this.attachShadow({mode:"open",delegatesFocus:!0})}get repeatSize(){return this.querySelectorAll(":scope > .fx-repeatitem").length}set repeatSize(e){super.repeatSize=e}setIndex(e){this.index=e;const t=this.querySelector("[data-ref]").querySelectorAll(":scope > *");this.applyIndex(t[this.index-1])}applyIndex(e){this._removeIndexMarker(),e&&e.setAttribute("repeat-index","")}get index(){return parseInt(this.getAttribute("index"),10)}set index(e){this.setAttribute("index",e)}_getRepeatedItems(){return this.querySelector("[data-ref]").children}async connectedCallback(){this.ref=this.getAttribute("ref"),this.addEventListener("item-changed",(e=>{const{item:t}=e.detail,n=this._getRepeatedItems(),r=Array.from(n).indexOf(t);this.applyIndex(n[r]),this.index=r+1})),document.addEventListener("index-changed",(e=>{if(e.stopPropagation(),!e.target===this)return;const{index:t}=e.detail;this.index=Number(t),this.applyIndex(this.children[t-1])})),this.mutationObserver=new MutationObserver((e=>{if("childList"===e[0].type){const t=e[0].addedNodes[0];if(t){const e=wo.resolveInstance(this,this.ref),n=wo.getPath(t,e);Yo.dispatch(this,"path-mutated",{path:n,index:this.index})}}})),this.getOwnerForm().registerLazyElement(this);this.shadowRoot.innerHTML="\n            <style>\n                \n      :host{\n      }\n       .fade-out-bottom {\n          -webkit-animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n          animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n      }\n      .fade-out-bottom {\n          -webkit-animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n          animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n      }\n   \n            </style>\n            \n          <slot></slot>\n    \n        "}async init(){const e=new Promise((e=>{this._evalNodeset(),this._initTemplate(),this.setAttribute("index",this.index),this.inited=!0,e("done")}));return e}_getRef(){return this.getAttribute("ref")}_evalNodeset(){const e=zo(this.getAttributeNode("ref")||this,this.ref);this.mutationObserver&&e.nodeName&&this.mutationObserver.observe(e,{childList:!0,subtree:!0});const t=Do(this.ref,e,this);1===t.length&&Array.isArray(t[0])?this.nodeset=t[0]:this.nodeset=t}async refresh(e){this.inited||this.init(),this._evalNodeset();let t=this.querySelectorAll(".fx-repeatitem"),n=t.length,r=1;Array.isArray(this.nodeset)&&(r=this.nodeset.length);const i=r;if(i<n)for(let e=n;e>i;e-=1){const n=t[e-1];n.parentNode.removeChild(n),this.getOwnerForm().unRegisterLazyElement(n),this.getOwnerForm().someInstanceDataStructureChanged=!0}if(i>n)for(let e=n+1;e<=i;e+=1){const t=this._clone();if(!t)return;this.querySelector("[data-ref]").appendChild(t),t.classList.add("fx-repeatitem"),t.setAttribute("index",e),t.addEventListener("click",this._dispatchIndexChange),t.addEventListener("focusin",this._dispatchIndexChange),this.getOwnerForm().someInstanceDataStructureChanged=!0}t=this.querySelectorAll(":scope > .fx-repeatitem"),n=t.length;for(let e=0;e<n;e+=1){const n=t[e];this.getOwnerForm().registerLazyElement(n),n.nodeset!==this.nodeset[e]&&(n.nodeset=this.nodeset[e])}this.getOwnerForm().lazyRefresh&&!e||Yo.refreshChildren(this,e),this.setIndex(this.index)}_dispatchIndexChange(){this.dispatchEvent(new CustomEvent("item-changed",{composed:!1,bubbles:!0,detail:{item:this,index:this.index}}))}_fadeOut(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()}_fadeIn(e){e&&(e.style.opacity=0,e.style.display=this.display,function t(){let n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}())}async _initTemplate(){this.template=this.querySelector("template"),this.template&&this.shadowRoot.appendChild(this.template)}_initVariables(e){const t=new Map(this.inScopeVariables);e.setInScopeVariables(t),function e(n){for(const r of n.children)"setInScopeVariables"in r&&r.setInScopeVariables(t),e(r)}(e)}_clone(){if(this.template=this.shadowRoot.querySelector("template"),this.template)return this.template.content.firstElementChild.cloneNode(!0)}_removeIndexMarker(){const e=this.querySelector("[data-ref]");Array.from(e.children).forEach((e=>{e.removeAttribute("repeat-index")}))}setInScopeVariables(e){this.inScopeVariables=new Map(e)}}customElements.get("fx-repeat-attributes")||window.customElements.define("fx-repeat-attributes",sl);const ol="clean",ll="dirty";class cl extends HTMLElement{static get properties(){return{createNodes:{type:Boolean},ignoreExpressions:{type:String},mergePartial:{type:Boolean},lazyRefresh:{type:Boolean},model:{type:Object},ready:{type:Boolean},strict:{type:Boolean},validateOn:{type:String},version:{type:String}}}constructor(){super(),this.version="Version: 2.6.0 - built on June 10, 2025 12:47:23",this.model={},this.inited=!1,this.addEventListener("message",this._displayMessage),this.addEventListener("error",this._logError),this.addEventListener("warn",this._displayWarning),window.addEventListener("compute-exception",(e=>{})),this.ready=!1,this.storedTemplateExpressionByNode=new Map,this.outermostHandler=null,this.copiedElements=new WeakSet,this.dirtyState=ol,this.showConfirmation=!1;this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>\n                \n            :host {\n                display: block;\n            }\n            :host ::slotted(fx-model){\n                display:none;\n            }\n\n            #modalMessage .dialogActions{\n                text-align:center;\n            }\n            .overlay {\n              position: fixed;\n              top: 0;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              background: rgba(0, 0, 0, 0.7);\n              transition: all 500ms;\n              visibility: hidden;\n              opacity: 0;\n              z-index:10;\n            }\n            .overlay.show {\n              visibility: visible;\n              opacity: 1;\n            }\n\n            .popup {\n              margin: 70px auto;\n              background: #fff;\n              border-radius: 5px;\n              width: 30%;\n              position: relative;\n              transition: all 5s ease-in-out;\n                            padding: 20px;\n\n            }\n            .popup h2 {\n              margin-top: 0;\n              width:100%;\n              background:#eee;\n              position:absolute;\n              top:0;\n              right:0;\n              left:0;\n              height:40px;\n             border-radius: 5px;\n\n            }\n            .popup .close {\n                position: absolute;\n                top: 3px;\n                right: 10px;\n                transition: all 200ms;\n                font-size: 30px;\n                font-weight: bold;\n                text-decoration: none;\n                color: #333;\n            }\n            .popup .close:focus{\n                outline:none;\n            }\n\n            .popup .close:hover {\n                color: #06D85F;\n            }\n            #messageContent{\n                margin-top:40px;\n            }\n            .warning{\n                background:orange;\n            }\n        \n            </style>\n            \n\x3c!--           <slot name="errors"></slot> --\x3e\n           <jinn-toast id="message" gravity="bottom" position="left"></jinn-toast>\n           <jinn-toast id="sticky" gravity="bottom" position="left" duration="-1" close="true" data-class="sticky-message"></jinn-toast>\n           <jinn-toast id="error" text="error" duration="-1" data-class="error" close="true" position="right" gravity="top" escape-markup="false"></jinn-toast>\n           <jinn-toast id="warn" text="warning" duration="5000" data-class="warning" position="left" gravity="top"></jinn-toast>\n           <slot id="default"></slot>\n           <slot name="messages"></slot>\n           <div id="modalMessage" class="overlay">\n                <div class="popup">\n                   <h2></h2>\n                    <a class="close" href="#"  onclick="event.target.parentNode.parentNode.classList.remove(\'show\')" autofocus>&times;</a>\n                    <div id="messageContent"></div>\n                </div>\n           </div>\n           <slot name="event"></slot>\n        \n        ',this.toRefresh=[],this.initialRun=!0,this._scanForNewTemplateExpressionsNextRefresh=!1,this.repeatsFromAttributesCreated=!1,this.validateOn=this.hasAttribute("validate-on")?this.getAttribute("validate-on"):"update",this.mergePartial=!1,this.createNodes=!!this.hasAttribute("create-nodes"),this._localNamesWithChanges=new Set,this.setAttribute("role","form")}connectedCallback(){if(this.style.visibility="hidden",this.strict=!!this.hasAttribute("strict"),this.ignoreExpressions=this.hasAttribute("ignore-expressions")?this.getAttribute("ignore-expressions"):null,this.lazyRefresh=this.hasAttribute("refresh-on-view"),this.lazyRefresh){const e={root:null,rootMargin:"0px",threshold:.3};this.intersectionObserver=new IntersectionObserver(this.handleIntersect,e)}if(this.src=this.hasAttribute("src")?this.getAttribute("src"):null,this.src)return void this._loadFromSrc();this._injectDevtools();this.shadowRoot.querySelector("slot#default").addEventListener("slotchange",(async e=>{if(this.inited)return;if(this.hasAttribute("convert"))return void this.replaceWith(Yo.copyDom(this));this.ignoreExpressions&&(this.ignoredNodes=Array.from(this.querySelectorAll(this.ignoreExpressions)));let t=e.target.assignedElements().find((e=>"FX-MODEL"===e.nodeName.toUpperCase()));if(!t){const e=document.createElement("fx-model");return this.appendChild(e),void(t=e)}if(!t.inited){const e=new Map;!function t(n){for(const r of n.children)"setInScopeVariables"in r&&r.setInScopeVariables(e),t(r)}(this),await t.modelConstruct(),this._handleModelConstructDone()}this.model=t,this._createRepeatsFromAttributes(),this.inited=!0})),this.addEventListener("path-mutated",(()=>{this.someInstanceDataStructureChanged=!0})),this.addEventListener("refresh",(()=>{this.refresh(!0)})),this.hasAttribute("show-confirmation")&&(this.showConfirmation=!0)}_injectDevtools(){if(this.ownerDocument.querySelector("fx-devtools"))return;const{search:e}=window.location,t=new URLSearchParams(e);if(t.has("inspect")){const e=document.createElement("fx-devtools");document.body.appendChild(e)}if(t.has("lens")){const e=document.createElement("fx-lens");document.body.appendChild(e),e.setAttribute("open","open")}}addToRefresh(e){this.toRefresh.find((t=>t.path===e.path))||this.toRefresh.push(e)}signalChangeToElement(e){this._localNamesWithChanges.add(e)}scanForNewTemplateExpressionsNextRefresh(){this._scanForNewTemplateExpressionsNextRefresh=!0}markAsClean(){this.addEventListener("value-changed",(()=>{this.dirtyState=ll}),{once:!0}),this.dirtyState=ol}async _loadFromSrc(){await Yo.loadForeFromSrc(this,this.src,"fx-fore")}handleIntersect(e,t){e.forEach((e=>{const{target:t}=e;Yo.getFore(t).initialRun||e.isIntersecting&&(t.classList.add("loaded"),"function"==typeof t.refresh?t.refresh(t,!0):Yo.refreshChildren(t,!0))})),e[0].target.getOwnerForm().dispatchEvent(new CustomEvent("refresh-done"))}evaluateToNodes(e,t){return Mo(e,t,this)}disconnectedCallback(){this.removeEventListener("dragstart",this.dragstart)}async forceRefresh(){Yo.refreshChildren(this,!0),this._updateTemplateExpressions(),this._scanForNewTemplateExpressionsNextRefresh=!1,this._processTemplateExpressions(),Yo.dispatch(this,"refresh-done",{})}async refresh(e){if(this.isRefreshing)return;!0!==e&&this._localNamesWithChanges.size>0&&(e={...e||{reason:void 0},elementLocalnamesWithChanges:Array.from(this._localNamesWithChanges)},this._localNamesWithChanges.clear()),this.isRefreshing=!0,e||this.initialRun||0===this.toRefresh.length?this.inited&&Yo.refreshChildren(this,e):this.refreshChanged(e),(e||this.initialRun||this._scanForNewTemplateExpressionsNextRefresh)&&(this._updateTemplateExpressions(),this._scanForNewTemplateExpressionsNextRefresh=!1),this._processTemplateExpressions(),this.style.visibility="visible",Yo.dispatch(this,"refresh-done",{});const t=Array.from(this.querySelectorAll("fx-fore"));for(const e of t)e.ready&&await e.refresh(!0);this.isRefreshing=!1}refreshChanged(e){this.toRefresh.forEach((t=>{const n=t.boundControls;n&&n.forEach((t=>{t.refresh(e)}));const{mainGraph:r}=this.getModel();if(r&&r.hasNode(t.path)){const n=this.getModel().mainGraph.dependentsOf(t.path,!1);0!==n.length&&n.forEach((t=>{const n=wo.getBasePath(t);this.getModel().modelItems.find((e=>e.path===n)).boundControls.forEach((t=>{t.refresh(e)}))}))}})),this.toRefresh=[]}_updateTemplateExpressions(){const e=Mo("(descendant-or-self::*!(text(), @*))[contains(., '{')][substring-after(., '{') => contains('}')][not(ancestor-or-self::fx-model)]",this,this);this.storedTemplateExpressions||(this.storedTemplateExpressions=[]),Array.from(e).forEach((e=>{if((e.nodeType===Node.ATTRIBUTE_NODE?e.ownerElement:e.parentNode).closest("fx-fore")!==this)return;if(this.storedTemplateExpressionByNode.has(e))return;const t=this._getTemplateExpression(e);t&&this.storedTemplateExpressionByNode.set(e,t)})),this._processTemplateExpressions()}_processTemplateExpressions(){for(const e of Array.from(this.storedTemplateExpressionByNode.keys())){if(e.nodeType===Node.ATTRIBUTE_NODE){if(!wo.contains(this,e.ownerElement)){this.storedTemplateExpressionByNode.delete(e);continue}}else if(!wo.contains(this,e)){this.storedTemplateExpressionByNode.delete(e);continue}this._processTemplateExpression({node:e,expr:this.storedTemplateExpressionByNode.get(e)})}}_processTemplateExpression(e){const{expr:t}=e,{node:n}=e;this.evaluateTemplateExpression(t,n)}evaluateTemplateExpression(e,t){if(t.nodeType===Node.ATTRIBUTE_NODE&&t.ownerElement.closest("[nonrelevant]"))return;if(t.nodeType===Node.TEXT_NODE&&t.parentNode.closest("[nonrelevant]"))return;if(t.nodeType===Node.ELEMENT_NODE&&t.closest("[nonrelevant]"))return;const n=e.replace(/{[^}]*}/g,(e=>{if("{}"===e)return e;const n=e.substring(1,e.length-1),r=zo(t,n);if(!r)return(t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ATTRIBUTE_NODE)&&t.parentNode,e;const i=wo.getInstanceId(n);i?this.getModel().getInstance(i):this.getModel().getDefaultInstance();try{return $o(n,r,t,null)}catch(t){return e}}));if(t.nodeType===Node.ATTRIBUTE_NODE){const e=t.ownerElement;e.getAttribute(t.nodeName)!==n&&e.setAttribute(t.nodeName,n)}else t.nodeType===Node.TEXT_NODE&&t.textContent!==n&&(t.textContent=n)}_getTemplateExpression(e){if(this.ignoredNodes){e.nodeType===Node.ATTRIBUTE_NODE&&(e=e.ownerElement);const t=this.ignoredNodes.find((t=>t.contains(e)));if(t)return null}return e.nodeType===Node.ATTRIBUTE_NODE?e.value:e.nodeType===Node.TEXT_NODE?e.textContent.trim():null}_handleModelConstructDone(){this.markAsClean(),this.showConfirmation&&window.addEventListener("beforeunload",(e=>this.dirtyState===ll&&(e.preventDefault(),!0))),this._initUI()}async _lazyCreateInstance(){const e=this.querySelector("fx-model"),t=this.parentNode.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?this.parentNode.closest("fx-fore"):null;if(this.parentNode.nodeType,Node.DOCUMENT_FRAGMENT_NODE,t){if(0!==t.getModel().instances.filter((e=>e.hasAttribute("shared"))).length)return}try{if(0===e.instances.length){const t=document.createElement("fx-instance");e.appendChild(t);const n=document.implementation.createDocument(null,"data",null);this._generateInstance(this,n.firstElementChild),t.instanceData=n,e.instances.push(t),Yo.dispatch(this,"instance-loaded",{instance:this})}}catch(e){}}_generateInstance(e,t){if(e.hasAttribute("ref")&&!Yo.isActionElement(e.nodeName)){const n=e.getAttribute("ref");if(n.includes("/")){n.split("/").forEach((n=>{t=this._generateNode(t,n,e)}))}else t=this._generateNode(t,n,e)}if(e.hasChildNodes()){const n=e.children;for(let e=0;e<n.length;e+=1)this._generateInstance(n[e],t)}return t}_generateNode(e,t,n){const r=e.ownerDocument.createElement(t);return 0===n.children.length&&(r.textContent=n.textContent),e.appendChild(r),e=r}async _initUI(){this.initialRun&&(this.classList.add("initialRun"),await this._lazyCreateInstance(),this.createNodes&&this.initData(),await this.refresh(!0),this.classList.add("fx-ready"),document.body.classList.add("fx-ready"),this.ready=!0,this.initialRun=!1,Yo.dispatch(this,"ready",{}),this.addEventListener("dragstart",this._handleDragStart),this.handleDrop=e=>this._handleDrop(e),this.ownerDocument.body.addEventListener("drop",this.handleDrop),this.ownerDocument.body.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move"})))}initData(e=this){const t=Array.from(e.querySelectorAll("fx-control[ref],fx-upload[ref],fx-group[ref],fx-repeat[ref], fx-switch[ref]"));e.matches("fx-repeatitem")&&t.unshift(e);for(let e=0;e<t.length;e++){const n=t[e];if(n.matches("fx-repeatitem")||n.parentNode.closest("fx-control")||n.evalInContext(),null!==n.nodeset)continue;const r=t[e-1];if(r.contains(n)){const e=r.nodeset,t=n.ref;if(e.querySelector(`[ref="${t}"]`))continue;const i=this._createNodes(t,e);e.insertBefore(i,e.firstChild),n.evalInContext();continue}const i=wo.getParentBindingElement(n);let a=null;for(let n=e-1;n>0;--n){const e=t[n];if(wo.getParentBindingElement(e)===i){a=e;break}}if(!a)throw new Error("Unexpected! there must be a sibling right?");const s=i.nodeset,o=n.ref;let l=a.nodeset;const c=this._createNodes(o,s);for(;l?.parentNode&&l?.parentNode!==s;)l=l.parentNode;s.insertBefore(c,l.nextElementSibling),n.evalInContext()}}_createNodes(e,t){let n;return e.includes("/")?(n=wo.createNodesFromXPath(e,t.ownerDocument,this),n):wo.createNodesFromXPath(e,t.ownerDocument,this)}_handleDragStart(e){const t=e.target.closest('[draggable="true"]');this.originalDraggedItem=t,"copy"===t.getAttribute("drop-action")?(e.dataTransfer.dropEffect="copy",e.dataTransfer.effectAllowed="copy",this.draggedItem=t.cloneNode(!0),this.draggedItem.setAttribute("drop-action","move"),this.copiedElements.add(this.draggedItem)):(e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",this.draggedItem=t)}_handleDrop(e){this.draggedItem&&("none"===e.dataTransfer.dropEffect&&this.copiedElements.has(this.originalDraggedItem)&&this.originalDraggedItem.remove(),this.originalDraggedItem=null,this.draggedItem=null,e.stopPropagation())}registerLazyElement(e){this.intersectionObserver&&this.intersectionObserver.observe(e)}unRegisterLazyElement(e){this.intersectionObserver&&this.intersectionObserver.unobserve(e)}getModel(){return this.querySelector("fx-model")}_displayMessage(e){const{level:t}=e.detail,n=e.detail.message;this._showMessage(t,n),e.stopPropagation()}_displayError(e){const t=e.detail.message;this.shadowRoot.querySelector("#error").showToast(t)}_displayWarning(e){const t=e.detail.message,n=wo.shortenPath($o("path()",e.target,this));this.shadowRoot.querySelector("#warn").showToast(`WARN: ${n}:${t}`)}_logError(e){e.stopPropagation(),e.preventDefault(),e.detail.expr,this.strict&&this._displayError(e)}_copyToClipboard(e){navigator.clipboard.writeText(e.value)}_showMessage(e,t){if("modal"===e)this.shadowRoot.getElementById("messageContent").innerText=t,this.shadowRoot.getElementById("modalMessage").classList.add("show");else if("sticky"===e||"error"===e||"warn"===e)this.shadowRoot.querySelector(`#${e}`).showToast(t);else{this.shadowRoot.querySelector("#message").showToast(t)}}_createRepeatsFromAttributes(){if(this.repeatsFromAttributesCreated)return;const e=this.querySelectorAll("[data-ref]");e&&Array.from(e).forEach((e=>{if(e.closest("fx-control"))return;const t=e.parentNode.closest("table");let n;n=t?t.cloneNode(!0):e.cloneNode(!0);const r=new sl;r.setAttribute("ref",e.getAttribute("data-ref")),r.appendChild(n),t?(t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t)):(e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e)),e.setAttribute("insertPoint","")})),this.repeatsFromAttributesCreated=!0}}cl.outermostHandler=null,cl.draggedItem=null,customElements.get("fx-fore")||customElements.define("fx-fore",cl);class ul{static handleRelevance(e){const t=e.getModelItem();t&&t.relevant?(e.removeAttribute("nonrelevant"),e.setAttribute("relevant",""),Yo.dispatch(this,"relevant",{})):(e.removeAttribute("relevant"),e.setAttribute("nonrelevant",""),Yo.dispatch(this,"nonrelevant",{}))}static selectRelevant(e,t){return"xml"===t?ul._relevantXmlNodes(e):e.nodeset}static _relevantXmlNodes(e){if("keep"===e.getAttribute("nonrelevant"))return e.nodeset;const t=e.getModel().getModelItem(e.nodeset);if(t&&!t.relevant)return null;const n=e.nodeset.cloneNode(!1);return 0===e.nodeset.children.length&&ul._isRelevant(e,e.nodeset)?e.nodeset:ul._filterRelevant(e,e.nodeset,n)}static _filterRelevant(e,t,n){const{childNodes:r}=t;return Array.from(r).forEach((t=>{if(ul._isRelevant(e,t)){const r=t.cloneNode(!1);n.appendChild(r);const{attributes:i}=t;return i&&Array.from(i).forEach((t=>{"empty"!==e.nonrelevant||ul._isRelevant(e,t)?ul._isRelevant(e,t)?r.setAttribute(t.nodeName,t.value):r.removeAttribute(t.nodeName):r.setAttribute(t.nodeName,"")})),ul._filterRelevant(e,t,r)}return null})),n}static _isRelevant(e,t){const n=e.getModel().getModelItem(t);return(t.nodeType!==Node.ATTRIBUTE_NODE||""!==t.nodeValue)&&(!n||!!n.relevant)}}class pl extends Zo{constructor(){super(),this.attachShadow({mode:"open"}),this.credentials="",this.parameters=new Map}connectedCallback(){this.methods=["get","put","post","delete","head","urlencoded-post"],this.model=this.parentNode,this.hasAttribute("id"),this.id=this.getAttribute("id"),this.instance=this.hasAttribute("instance")?this.getAttribute("instance"):null,this.into=this.hasAttribute("into")?this.getAttribute("into"):null,this.method=this.hasAttribute("method")?this.getAttribute("method"):"get",this.nonrelevant=this.hasAttribute("nonrelevant")?this.getAttribute("nonrelevant"):"remove",this.replace=this.hasAttribute("replace")?this.getAttribute("replace"):"all",this.serialization=this.hasAttribute("serialization")?this.getAttribute("serialization"):"xml",this.mediatype=this.hasAttribute("mediatype")?this.getAttribute("mediatype"):"application/xml",this.responseMediatype=this.hasAttribute("responsemediatype")?this.getAttribute("responsemediatype"):this.mediatype,this.url=this.hasAttribute("url")?this.getAttribute("url"):null,this.targetref=this.hasAttribute("targetref")?this.getAttribute("targetref"):null,this.validate=this.getAttribute("validate")?this.getAttribute("validate"):"true",this.credentials=this.hasAttribute("credentials")?this.getAttribute("credentials"):"same-origin",["same-origin","include","omit"].includes(this.credentials),this.shadowRoot.innerHTML=this.renderHTML()}renderHTML(){return"\n      <slot></slot>\n    "}async submit(){await Yo.dispatch(this,"submit",{submission:this}),await this._submit()}async _submit(){this.evalInContext();const e=this.getModel();if(e.recalculate(),"true"===this.validate&&"get"!==this.method){if(!e.revalidate())return this.getOwnerForm().classList.add("submit-validation-failed"),Yo.dispatch(this,"submit-error",{status:0,message:"validation failed"}),void this.getModel().parentNode.refresh(!0)}await this._serializeAndSend()}_getProperty(e){return this.parameters.has(e)?this.parameters.get(e):this.getAttribute(e)}async _serializeAndSend(){const e=this._getProperty("url"),t=this.evaluateAttributeTemplateExpression(e,this),n=this.getInstance();n||Yo.dispatch(this,"warn",{message:`instance not found ${n.getAttribute("id")}`});const r=n.getAttribute("type");let i;if("none"===this.serialization)i=void 0;else{const e=ul.selectRelevant(this,r);i=this._serialize(r,e)}if("get"===this.method.toLowerCase()&&(i=void 0),t.startsWith("#echo")){const e=this._parse(i,n);return this._handleResponse(e),Yo.dispatch(this,"submit-done",{}),void this.parameters.clear()}if(t.startsWith("localStore:")){if("get"===this.method||"consume"===this.method){this.replace="instance";const e=t.substring(t.indexOf(":")+1),r=localStorage.getItem(e);if(!r)return Yo.dispatch(this,"submit-error",{status:400,message:`Error reading key ${e} from localstorage`}),void this.parameters.clear();const i=this._parse(r,n);this._handleResponse(i),"consume"===this.method&&localStorage.removeItem(e),Yo.dispatch(this,"submit-done",{})}if("post"===this.method){const e=t.substring(t.indexOf(":")+1);localStorage.setItem(e,i),this._handleResponse(n.instanceData),Yo.dispatch(this,"submit-done",{})}if("delete"===this.method){const e=t.substring(t.indexOf(":")+1);localStorage.removeItem(e);const n=(new DOMParser).parseFromString("<data></data>","application/xml");this.replace="instance",this._handleResponse(n),Yo.dispatch(this,"submit-done",{})}return}const a=this._getHeaders();if(this.methods.includes(this.method.toLowerCase()))try{const e=await fetch(t,{method:this.method,credentials:this.credentials,mode:"cors",headers:a,body:i});if(!e.ok||e.status>400)return void Yo.dispatch(this,"submit-error",{status:e.status,message:`Error during submit ${this.id}`});const n=e.headers.get("content-type").toLowerCase();if(n.startsWith("text/")){const r=await e.text();this._handleResponse(r,t,n)}else if(n.startsWith("application/json")){const r=await e.json();this._handleResponse(r,t,n)}else if(n.startsWith("application/xml")){const r=await e.text(),i=(new DOMParser).parseFromString(r,"application/xml");this._handleResponse(i,t,n)}else{const r=await e.blob();this._handleResponse(r,t,n)}Yo.dispatch(this,"submit-done",{})}catch(e){Yo.dispatch(this,"submit-error",{status:500,error:e.message})}finally{this.parameters.clear();const e=document.querySelector("[download]");e&&document.body.removeChild(e)}else Yo.dispatch(this,"error",{message:`Unknown method ${this.method}`})}_parse(e,t){let n=null;return e&&"xml"===t.getAttribute("type")&&(n=(new DOMParser).parseFromString(e,"application/xml")),e&&"json"===t.getAttribute("type")&&(n=JSON.parse(e)),e&&"text"===t.getAttribute("type")&&(n=e),n}_serialize(e,t){if("application/x-www-form-urlencoded"===this.serialization){const e=new URLSearchParams;return Array.from(t.children).forEach((t=>{e.append(t.nodeName,t.textContent)})),e}if("xml"===e){return(new XMLSerializer).serializeToString(t)}if("json"===e)return JSON.stringify(t);if("text"===e)return t;throw new Error("unknown instance type ",e)}_getHeaders(){const e=new Headers,t=this.getInstance(),n=Yo.getContentType(t,this.serialization);e.append("Content-Type",n),e.has("Accept")&&e.delete("Accept");const r=this.querySelectorAll("fx-header");return Array.from(r).forEach((t=>{const{name:n}=t,r=t.getValue();e.append(n,r)})),e}_getUrlExpr(){return this.storedTemplateExpressions.find((e=>"url"===e.node.nodeName))}_getTargetInstance(){let e;if(e=this.instance?this.model.getInstance(this.instance):this.model.getInstance("default"),!e)throw new Error(`target instance not found: ${e}`);return e}_handleResponse(e,t,n){const r=this._getTargetInstance();if("instance"===this.replace){if(!r)throw new Error(`target instance not found: ${r}`);if(this.targetref){const[t]=Do(this.targetref,r.instanceData.firstElementChild,this);if("application/xml"===this.responseMediatype||"text/html"===this.responseMediatype){const n=e.firstElementChild;t.parentNode.replaceChild(n,t)}this.responseMediatype.startsWith("text/")&&(t.textContent=e),this.responseMediatype}else if(this.into){const[t]=Do(this.into,r.instanceData.firstElementChild,this);e.nodeType===Node.DOCUMENT_NODE?t.appendChild(e.firstElementChild):t.innerHTML=e}else{const t=e;r.instanceData=t}this.model.inited&&(this.model.updateModel(),this.getOwnerForm().refresh(!0))}if("download"===this.replace){const t=this._getProperty("target"),r=document.createElement("a");r.setAttribute("download",t),r.setAttribute("href",`data:${n},${e}`),document.body.appendChild(r),r.click()}if("all"===this.replace){const n=this._getProperty("target");if(n&&"_blank"===n){const t=window.open("","_blank");t.document.write(`<pre>${e}</pre>`),t.document.close()}else document.open(),document.write(e),document.close(),window.location.href=t}if("target"===this.replace){const t=this._getProperty("target"),r=document.querySelector(t);if(r){if(n.startsWith("text/html")&&(r.innerHTML=e),this.responseMediatype.startsWith("image/svg")){(new DOMParser).parseFromString(e,"image/svg+xml");const t=URL.createObjectURL(e);r.src=t}}else Yo.dispatch(this,"submit-error",{message:`targetNode for selector ${t} not found`})}"redirect"===this.replace&&(window.location.href=e)}}customElements.get("fx-submission")||customElements.define("fx-submission",pl);class dl extends Zo{constructor(){if(super(),this.style.display="none",this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="",!this.hasAttribute("name"))throw new Error('required attribute "name" missing');this.name=this.getAttribute("name")}connectedCallback(){this.shadowRoot.innerHTML=""}}customElements.get("fx-header")||customElements.define("fx-header",dl);const hl=io("item()*");class ml extends Zo{constructor(){super(),this.attachShadow({mode:"open"}),this.name="",this.valueQuery="",this.value=null,this.precedingVariables=[]}connectedCallback(){this.name=this.getAttribute("name"),this.valueQuery=this.getAttribute("value")}refresh(){const e=zo(this,this.valueQuery),t=Do(this.valueQuery,e,this,this.precedingVariables);this.value=hl(t,ao)}setInScopeVariables(e){e.has(this.name)?Yo.dispatch(this,"xforms-binding-error",{}):(e.set(this.name,this),this.inScopeVariables=new Map(e))}}customElements.get("fx-var")||customElements.define("fx-var",ml);class fl extends Zo{constructor(){super()}connectedCallback(){super.connectedCallback(),this.ondemand=!!this.hasAttribute("on-demand"),this.wasOnDemandInitially=this.ondemand,this.ondemand&&(this.addEventListener("show-control",(()=>{this.removeAttribute("on-demand")})),this.addTrashIcon())}activate(){this.removeAttribute("on-demand"),this.style.display="",this.isBound()&&this.refresh(!0),Yo.dispatch(this,"show-group",{})}attributeChangedCallback(e,t,n){"on-demand"===e&&(this.ondemand=null!==n,n||this.wasOnDemandInitially?(this.wasOnDemandInitially=!0,this.addTrashIcon()):this.removeTrashIcon())}static get observedAttributes(){return["on-demand"]}addTrashIcon(){if(!this.closest("[show-icon]"))return;if(this.querySelector(".trash"))return;const e=document.createElement("span");e.innerHTML='\n  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"\n       stroke="currentColor" stroke-width="2" stroke-linecap="round"\n       stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.94 17.94C16.13 19.12 14.13 20 12 20C7 20 2.73 15.88 1 12C1.6 10.66 2.43 9.47 3.46 8.48M10.58 10.58C10.21 11.01 10 11.5 10 12C10 13.11 10.89 14 12 14C12.5 14 12.99 13.79 13.42 13.42M6.53 6.53C7.87 5.54 9.39 5 12 5C17 5 21.27 9.12 23 12C22.4 13.34 21.57 14.53 20.54 15.52M1 1L23 23"/>\n  </svg>\n',e.classList.add("trash"),e.setAttribute("title","Hide"),e.style.cursor="pointer",e.style.marginLeft="0.5em",e.addEventListener("click",(e=>{e.stopPropagation(),this.setAttribute("on-demand","true"),this.style.display="none",document.dispatchEvent(new CustomEvent("update-control-menu")),Yo.dispatch(this,"hide-control",{})})),this.appendChild(e)}removeTrashIcon(){const e=this.querySelector(".trash");e&&e.remove()}}customElements.get("ui-element")||customElements.define("ui-element",fl);class gl extends fl{constructor(){super(),this.value=null,this.display=this.style.display,this.required=!1,this.readonly=!1,this.widget=null,this.visited=!1,this.force=!1,this.ondemand=!1}getWidget(){throw new Error("You have to implement the method getWidget!")}async refresh(e){e&&(this.force=!0);const t=this.value;var n,r,i;if(!this.isNotBound()&&(this.evalInContext(),this.oldVal=this.nodeset?this.nodeset:null,this.isBound())){if(!this.nodeset){if(this.closest("[create]")){let e,t,n;if(this.ref.includes("/")){t=this.ref.substring(0,this.ref.indexOf("/"));n=Ro(t,zo(this.parentNode,this.ref),this),n&&n.nodeType===Node.ELEMENT_NODE&&(this.ref.includes("@")?(e=this.ref.substring(this.ref.indexOf("/")+2),n.setAttribute(e,"")):Yo.dispatch(this,"warn",{message:'"create" is not implemented for elements'}))}else{const t=zo(this,this.ref);this.ref.includes("@")?(e=this.ref.substring(this.ref.indexOf("@")+1),t.setAttribute(e,"")):Yo.dispatch(this,"warn",{message:'"create" is not implemented for elements'})}}else this.setAttribute("nonrelevant","");return}if(this.modelItem=this.getModelItem(),this.modelItem instanceof Jo){if(this.hasAttribute("as")&&"node"===this.getAttribute("as")?(this.modelItem.node=this.nodeset,this.value=this.modelItem.node):this.value=this.modelItem.value,this.modelItem.boundControls.includes(this)||this.modelItem.boundControls.push(this),await this.updateWidgetValue(),this.handleModelItemProperties(),this.getOwnerForm().initialRun&&Yo.dispatch(this,"init",{}),!this.getOwnerForm().ready)return;if("fx-control"!==this.localName&&"fx-upload"!==this.localName)return;n=this.oldVal,r=t,i=this.value,null!==n&&null!==r&&(i&&r&&i.nodeType&&r.nodeType?i.outerHTML!==r.outerHTML:r!==i)&&(this.getModel(),Yo.dispatch(this,"value-changed",{path:this.modelItem.path,value:this.modelItem.value,oldvalue:t,instanceId:this.modelItem.instanceId,foreId:this.getOwnerForm().id}))}}}refreshFromModelItem(e){}async updateWidgetValue(){throw new Error("You have to implement the method updateWidgetValue!")}handleModelItemProperties(){this.handleRequired(),this.handleReadonly(),this.getOwnerForm().ready&&this.handleValid(),this.handleRelevant()}_getForm(){return this.getModel().parentNode}_dispatchEvent(e){this.getOwnerForm().ready&&Yo.dispatch(this,e,{})}handleRequired(){this.widget=this.getWidget();const e=this.isRequired();if(!this.modelItem.required)return this.widget.removeAttribute("required"),this.removeAttribute("required"),void(e!==this.modelItem.required&&this._dispatchEvent("optional"));(this.visited||this.force)&&(""===this.modelItem.value?(this.classList.add("isEmpty"),this._toggleValid(!1)):(this.classList.remove("isEmpty"),this._toggleValid(!0))),this.widget.setAttribute("required",""),this.setAttribute("required",""),e!==this.modelItem.required&&this._dispatchEvent("required")}_updateRequired(){this.modelItem.required?((this.visited||this.force)&&(""===this.modelItem.value?(this.classList.add("isEmpty"),this._toggleValid(!1)):(this.classList.remove("isEmpty"),this._toggleValid(!0))),this.widget.setAttribute("required",""),this.setAttribute("required",""),this._dispatchEvent("required")):(this.widget.removeAttribute("required"),this.removeAttribute("required"),this._dispatchEvent("optional"))}_toggleValid(e){e?(this.removeAttribute("invalid"),this.setAttribute("valid","")):(this.removeAttribute("valid"),this.setAttribute("invalid",""))}handleReadonly(){this.isReadonly()!==this.modelItem.readonly&&(this.modelItem.readonly&&(this.widget.setAttribute("readonly",""),this.setAttribute("readonly",""),this._dispatchEvent("readonly")),this.modelItem.readonly||(this.widget.removeAttribute("readonly"),this.removeAttribute("readonly"),this._dispatchEvent("readwrite")))}handleValid(){if(this.isValid()!==this.modelItem.constraint)if(this.modelItem.constraint)this._dispatchEvent("valid"),this.setAttribute("valid",""),this.removeAttribute("invalid");else{if(this.setAttribute("invalid",""),this.removeAttribute("valid"),0!==this.modelItem.alerts.length){if(!this.querySelector("fx-alert")){const{alerts:e}=this.modelItem;e.forEach((e=>{const t=document.createElement("fx-alert");t.innerHTML=e,this.appendChild(t)}))}}this._dispatchEvent("invalid")}}handleRelevant(){const e=this.modelItem.node;if(this.removeAttribute("relevant"),this.removeAttribute("nonrelevant"),Array.isArray(e)&&0===e.length)return this._dispatchEvent("nonrelevant"),void this.setAttribute("nonrelevant","");this.isEnabled()!==this.modelItem.relevant&&(this.modelItem.relevant?(this._dispatchEvent("relevant"),this.setAttribute("relevant","")):(this._dispatchEvent("nonrelevant"),this.setAttribute("nonrelevant","")))}isRequired(){return this.hasAttribute("required")}isValid(){return!this.hasAttribute("invalid")}isReadonly(){return this.hasAttribute("readonly")}isEnabled(){return!this.hasAttribute("nonrelevant")}_fadeOut(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()}_fadeIn(e,t){e.style.opacity=0,e.style.display=t||"block",function t(){let n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}()}}customElements.get("fx-abstract-control")||window.customElements.define("fx-abstract-control",gl);class yl extends gl{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.innerHTML="\n        <style>\n            \n      :host {\n        height: auto;\n        font-size: 0.8em;\n        font-weight: 400;\n        color: red;\n      }\n    \n        </style>\n        \n      <slot></slot>\n    \n    "}getWidget(){return this}async updateWidgetValue(){this.innerHTML=this.value}}function bl(e,t,n=300){let r;return(...i)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(e,i)}),n)}}customElements.get("fx-alert")||customElements.define("fx-alert",yl);class wl extends gl{constructor(){super(),this.inited=!1,this.nodeset=null,this.attachShadow({mode:"open"})}static get properties(){return{...gl.properties,credentials:{type:String},initial:{type:Boolean},src:{type:String}}}_getValueOfWidget(){return"selectedOptions"===this.valueProp?[...this.widget.selectedOptions].map((e=>e.value)).join(" "):this.widget[this.valueProp]}connectedCallback(){this.initial=this.hasAttribute("initial")?this.getAttribute("initial"):null,this.src=this.hasAttribute("src")?this.getAttribute("src"):null,this.loaded=!1,this.initialNode=null,this.debounceDelay=this.hasAttribute("debounce")?this.getAttribute("debounce"):null,this.updateEvent=this.hasAttribute("update-event")?this.getAttribute("update-event"):"blur",this.label=this.hasAttribute("label")?this.getAttribute("label"):null;this.credentials=this.hasAttribute("credentials")?this.getAttribute("credentials"):"same-origin",["same-origin","include","omit"].includes(this.credentials),this.shadowRoot.innerHTML=`\n            <style>\n                \n      :host {\n        display: flex;\n        align-items: center;\n        gap: 0.4em;\n        position: relative;\n      }\n      .trash {\n        position: absolute;\n        right:0;\n        top:0;\n        cursor: pointer;\n        color: #888;\n        font-size: 0.65rem;\n        align-self: center;\n      }\n      .trash:hover {\n        color: red;\n      }\n      \n            </style>\n            ${this.renderHTML(this.ref)}\n        `,this.widget=this.getWidget(),this.addEventListener("mousedown",(e=>{Yo.isWidget(e.target)||e.target?.classList.contains("fx-hint")||e.preventDefault(),this.widget.focus()}));const e=this.widget.hasAttribute("multiple")?"selectedOptions":"value";this.valueProp=this.hasAttribute("value-prop")?this.getAttribute("value-prop"):e;let t=this.widget;if(this.hasAttribute("listen-on")){const e=this.getAttribute("listen-on"),n=this.querySelector(e);n&&(t=n)}this.addEventListener("keyup",(()=>{Wo.dataChanged=!0})),"enter"===this.updateEvent&&(this.widget.addEventListener("keyup",(e=>{13===e.keyCode&&(e.preventDefault(),this.setValue(this._getValueOfWidget()))})),this.updateEvent="blur"),this.debounceDelay?t.addEventListener(this.updateEvent,bl(this,(()=>{this.setValue(this._getValueOfWidget())}),this.debounceDelay)):(t.addEventListener(this.updateEvent,(e=>{this.setValue(this._getValueOfWidget())})),t.addEventListener("blur",(e=>{this.setValue(this._getValueOfWidget())}),{once:!0})),this.addEventListener("return",(e=>{const t=e.detail.nodeset;e.stopPropagation(),this._replaceNode(t)})),this.widget.addEventListener("focus",(()=>{})),this.template=this.querySelector("template"),this.boundInitialized=!1,this.static=!!this.widget.hasAttribute("static"),super.connectedCallback()}activate(){this.removeAttribute("on-demand"),this.style.display="",this.refresh(!0),Yo.dispatch(this,"show-control",{}),requestAnimationFrame((()=>{this.getWidget()?.focus()}))}_debounce(e,t=300){let n;return(...r)=>{const i=this;clearTimeout(n),n=setTimeout((()=>{e.apply(i,r)}),t)}}setValue(e){const t=this.getModelItem();if(this.getAttribute("class")?this.classList.add("visited"):this.setAttribute("class","visited"),t?.readonly)return;if("node"===this.getAttribute("as")){const e=this.shadowRoot.getElementById("replace"),n=this.getWidget()[this.valueProp];return e.replace(this.nodeset,n),void(t&&n&&n!==t.value&&(t.value=n,Wo.dataChanged=!0,e.actionPerformed()))}const n=this.shadowRoot.getElementById("setvalue");n.setValue(t,e),this.modelItem instanceof Jo&&!this.modelItem?.boundControls.includes(this)&&this.modelItem.boundControls.push(this),n.actionPerformed(!1)}_replaceNode(e){e.nodeType===Node.ATTRIBUTE_NODE?this.modelItem.node.nodeValue=e.nodeValue:e.nodeType===Node.ELEMENT_NODE?this.modelItem.node.replaceWith(e.cloneNode(!0)):e.nodeType===Node.TEXT_NODE?this.modelItem.node.nodeValue=e.textContent:Yo.dispatch(this,"warn",{message:"trying to replace a node that is neither an Attribute, Elemment or Text node"})}renderHTML(e){return this.hasAttribute("on-demand"),this.closest("[show-icon]"),`\n            ${this.label?`${this.label}`:""}\n              <slot></slot>\n            ${this.hasAttribute("as")&&"node"===this.getAttribute("as")?'<fx-replace id="replace" ref=".">':`<fx-setvalue id="setvalue" ref="${e}"></fx-setvalue>`}\n\n        `}getWidget(){if(this.widget)return this.widget;let e=this.querySelector(".widget");if(e||(e=this.querySelector("input"),e&&!e.classList.contains("widget")&&e.classList.add("widget")),!e){const e=document.createElement("input");return e.classList.add("widget"),e.setAttribute("type","text"),this.appendChild(e),e}return e}async updateWidgetValue(){this.value?(this.setAttribute("has-value",""),Yo.dispatch(this,"show-control")):this.removeAttribute("has-value");let{widget:e}=this;if(e||(e=this),"checked"!==this.valueProp)if("radio"!==this.widget.type)if("selectedOptions"!==this.valueProp)if(this.hasAttribute("as")){const t=this.getAttribute("as");if("text"===t){const t=new XMLSerializer,n=Yo.prettifyXml(t.serializeToString(this.nodeset));e.value=n}if("node"===t&&this.nodeset!==e.value){const t=this.nodeset;if(e.value&&t!==this.widget.value)return void(e.value=this.nodeset.cloneNode(!0));e.value=this.nodeset.cloneNode(!0)}}else{if(this.src&&!this.loaded&&this.modelItem.relevant)return this.initial&&(this.initialNode=Ro(this.initial,this.nodeset,this)),await this._loadForeFromSrc(),void(this.loaded=!0);e.value!==this.value&&(e.value=this.value)}else{const e=new Set(this.value.split(" "));for(const t of[...this.widget.querySelectorAll("option")])e.has(t.value)?t.selected=!0:t.selected=!1}else{const e=this.querySelector(`input[value=${this.value}]`);e&&(e.checked=!0)}else"true"===this.value?e.checked=!0:e.checked=!1}async _loadForeFromSrc(){try{const e=await fetch(this.src,{method:"GET",credentials:this.credentials,mode:"cors",headers:{"Content-Type":"text/html"}});let t;t=e.headers.get("content-type").toLowerCase().startsWith("text/html")?await e.text().then((e=>(new DOMParser).parseFromString(e,"text/html"))):"done";const n=t.querySelector("fx-fore"),r=document.importNode(n,!0);r.classList.add("widget"),r.addEventListener("model-construct-done",(e=>{const t=r.querySelector("fx-instance");if(this.initial){const e=(new DOMParser).parseFromString("<data></data>","application/xml");this.initialNode=Ro(this.initial,this.nodeset,this),e.firstElementChild.appendChild(this.initialNode.cloneNode(!0)),t.instanceData=e}r.model=r.querySelector("fx-model"),r.model.updateModel(),r.refresh(!0)}),{once:!0});const i=this.querySelector("input");this.hasAttribute("shadow")?(i.parentNode.removeChild(i),this.shadowRoot.appendChild(r)):this.loaded||i.replaceWith(r),n||Yo.dispatch("error",{detail:{message:`Fore element not found in '${this.src}'. Maybe wrapped within 'template' element?`}}),Yo.dispatch("loaded",{detail:{fore:n}})}catch(e){Yo.dispatch(this,"error",{origin:this,message:`control couldn't be loaded from src '${this.src}'`,level:"Error"})}}getTemplate(){return this.querySelector("template")}async refresh(e){super.refresh(e);const t=this.getWidget();this._handleBoundWidget(t),this._handleDataAttributeBinding(),Yo.refreshChildren(this,e)}_handleDataAttributeBinding(){const e=this.querySelector("[data-ref]");e&&e.closest("fx-control")===this&&(this.boundList=e,e.getAttribute("data-ref"),this._handleBoundWidget(e))}_handleBoundWidget(e){if(this.boundInitialized&&this.static)return;const t=e.hasAttribute("ref")?e.getAttribute("ref"):e.getAttribute("data-ref");if(e&&t){const n=Do(t,zo(this,t),this),{children:r}=e;if(Array.from(r).forEach((e=>{"template"!==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)})),Array.isArray(n)&&0===n.length)return;const{template:i}=this;if(i){if("SELECT"===this.widget.nodeName&&this.widget.hasAttribute("selection")&&"open"===this.widget.getAttribute("selection")){const e=this.template.firstElementChild,t=document.createElement("option");this.widget.insertBefore(t,e)}if(0!==n.length){const e=document.createDocumentFragment();Array.from(n).forEach((t=>{const n=this.createEntry();e.appendChild(n),this.updateEntry(n,t)})),this.template.parentNode.appendChild(e)}else{const e=this.createEntry();this.template.parentNode.appendChild(e),this.updateEntry(e,n)}this.boundInitialized=!0}if("selectedOptions"===this.valueProp){const e=new Set(this.value.split(" ")),t=this.getWidget().querySelectorAll("option");for(const n of[...t])e.has(n.value)?n.selected=!0:n.selected=!1}}}updateEntry(e,t){const n=e.getAttribute("value");if(!n)return;const r=n,i=$o(r.substring(1,r.length-1),t,e);if(e.setAttribute("value",i),this.value===i&&e.setAttribute("selected","selected"),e.hasAttribute("title")){let n=e.getAttribute("title");n=n.substring(1,n.length-1);const r=$o(n,t,e);e.setAttribute("title",r)}const a=e.textContent.trim();this.evalLabel(a,t,e)}evalLabel(e,t,n){const r=e.substring(1,e.length-1);if(!r)return;const i=$o(r,t,this);n.textContent=i}createEntry(){return this.template.content.firstElementChild.cloneNode(!0)}_getValueAttribute(e){let t;return Array.from(e.attributes).forEach((e=>{-1!==e.value.indexOf("{")&&(t=e)})),t}}customElements.get("fx-control")||window.customElements.define("fx-control",wl);class vl extends fl{static get properties(){return{...super.properties}}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback(),this.src=this.hasAttribute("src")?this.getAttribute("src"):null;this.shadowRoot.innerHTML="\n            <style>\n                \n        :host {\n            display: block;\n        }\n    \n            </style>\n            \n      <slot></slot>\n    \n    ",""!==this.ref&&this.getOwnerForm().registerLazyElement(this)}async refresh(e){!e&&this.hasAttribute("refresh-on-view")||this.isBound()&&(this.evalInContext(),this.modelItem=this.getModelItem(),this.modelItem&&!this.modelItem.boundControls.includes(this)&&this.modelItem.boundControls.push(this),this.handleModelItemProperties())}handleModelItemProperties(){this.handleRelevant()}_getForm(){return this.getModel().parentNode}handleRelevant(){if(!this.modelItem)return this.removeAttribute("relevant",""),this.setAttribute("nonrelevant",""),void this.dispatchEvent(new CustomEvent("disabled",{}));this.isEnabled()!==this.modelItem.enabled&&(this.modelItem.relevant?(this.removeAttribute("nonrelevant",""),this.setAttribute("relevant",""),this.dispatchEvent(new CustomEvent("enabled",{}))):(this.removeAttribute("relevant",""),this.setAttribute("nonrelevant",""),this.dispatchEvent(new CustomEvent("disabled",{}))))}isReadonly(){return!!this.hasAttribute("readonly")}isEnabled(){return"none"!==this.style.display}}customElements.get("fx-container")||window.customElements.define("fx-container",vl);class xl extends vl{static get properties(){return{...super.properties,collapse:{type:Boolean,reflect:!0}}}constructor(){super(),this.collapse=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","group")}render(){return"\n      <slot></slot>\n    "}handleModelItemProperties(){this.handleRelevant()}initializeChildren(e){Array.from(e.children).forEach((e=>{if(Yo.isUiElement(e.nodeName))e.init(this.model);else if(0!==e.children.length){Array.from(e.children).forEach((e=>{this.initializeChildren(e)}))}}))}async refresh(e){super.refresh(e),Yo.refreshChildren(this,!!e)}activate(){this.removeAttribute("on-demand"),this.style.display="",this.isBound()&&this.refresh(!0),Yo.dispatch(this,"show-group",{})}}customElements.get("fx-group")||window.customElements.define("fx-group",xl);class Al extends gl{static get styles(){return"\n      :host {\n        display: block;\n        height: auto;\n        font-size: 0.8em;\n        font-weight: 400;\n        font-style: italic;\n      }\n    "}static get properties(){return{...super.properties}}render(){return"\n      <slot></slot>\n    "}}customElements.get("fx-hint")||customElements.define("fx-hint",Al);class _l extends gl{constructor(){super(),this.attachShadow({mode:"open"}),this.valueAttr=this.hasAttribute("value")?this.getAttribute("value"):null,this.readonly=!0}connectedCallback(){this.shadowRoot.innerHTML='\n            <style>\n                \n          :host {\n            display: inline-block;\n            max-width:100%;\n          }\n          #widget {\n            display: inline-block;\n          }\n          .label{\n            display: inline-block;\n          }\n          #value{\n            max-width:100%;\n          }\n        \n            </style>\n            \n            <slot name="label"></slot>\n            \n            <span id="value">\n                <slot name="default"></slot>\n            </span>\n        \n        ',this.mediatype=this.hasAttribute("mediatype")?this.getAttribute("mediatype"):null}async refresh(){this.ref&&await super.refresh(),this.valueAttr&&(this.value=this.getValue(),await this.updateWidgetValue())}getValue(){try{const e=zo(this,this.valueAttr);return this.hasAttribute("html")?Do(this.valueAttr,e,this)[0]:function(e,t,n,r=null){try{const i=Oo(e,t,n);return ho(e,t,r,{},{currentContext:{formElement:n},functionNameResolver:Fo,moduleImports:{xf:_o},namespaceResolver:i})}catch(t){n.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{origin:n,message:`Expression '${e}' failed`,expr:e,level:"Error"}}))}}(this.valueAttr,e,this)[0]}catch(e){Yo.dispatch(this,"error",{message:e})}return null}getWidget(){return this.shadowRoot.getElementById("value")}handleReadonly(){this.setAttribute("readonly","readonly")}async updateWidgetValue(){const e=this.shadowRoot.getElementById("value");if(e.innerHTML="","html"!==this.mediatype){if("image"===this.mediatype){const t=document.createElement("img");return t.setAttribute("src",this.value),this.innerHTML="",void e.appendChild(t)}e.innerHTML=this.value}else if(this.modelItem.node){this.shadowRoot.querySelector("#default");const{node:t}=this.modelItem;if(t.nodeType)return void e.append(t);const n=(new DOMParser).parseFromString(t,"text/html").body.childNodes;return void Array.from(n).forEach((t=>{e.append(t)}))}}isReadonly(){return!0}}customElements.get("fx-output")||customElements.define("fx-output",_l);class El extends(al(Zo)){static get properties(){return{...super.properties,inited:{type:Boolean}}}constructor(){super(),this.inited=!1,this.addEventListener("click",this._dispatchIndexChange),this.addEventListener("focusin",this._dispatchIndexChange),this.attachShadow({mode:"open",delegatesFocus:!0}),this.dropTarget=null}connectedCallback(){super.connectedCallback(),this.display=this.style.display;this.shadowRoot.innerHTML="\n            \n           <slot></slot>\n        \n        ",this.getOwnerForm().registerLazyElement(this),this.ref=`${this.parentNode.ref}`,this.tabindex=0}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._dispatchIndexChange),this.removeEventListener("focusin",this._handleFocus)}init(){this.inited=!0}_dispatchIndexChange(){this.parentNode.index!==this.index&&this.dispatchEvent(new CustomEvent("item-changed",{composed:!1,bubbles:!0,detail:{item:this,index:this.index}}))}refresh(e){this.modelItem=this.getModelItem(),this.modelItem.boundControls.includes(this)||(this.modelItem.boundControls.push(this),this.modelItem&&!this.modelItem.relevant?(this.removeAttribute("relevant"),this.setAttribute("nonrelevant","")):(this.removeAttribute("nonrelevant"),this.setAttribute("relevant",""))),Yo.refreshChildren(this,e)}}customElements.get("fx-repeatitem")||window.customElements.define("fx-repeatitem",El);class Cl extends(al(fl)){static get properties(){return{...super.properties,index:{type:Number},template:{type:Object},focusOnCreate:{type:String},initDone:{type:Boolean},repeatIndex:{type:Number},nodeset:{type:Array}}}constructor(){super(),this.ref="",this.dataTemplate=[],this.isDraggable=null,this.dropTarget=null,this.focusOnCreate="",this.initDone=!1,this.repeatIndex=1,this.nodeset=[],this.inited=!1,this.index=1,this.repeatSize=0,this.attachShadow({mode:"open",delegatesFocus:!0})}get repeatSize(){return this.querySelectorAll(":scope > fx-repeatitem").length}set repeatSize(e){this.size=e}setIndex(e){this.index=e;const t=this.querySelectorAll(":scope > fx-repeatitem");this.applyIndex(t[this.index-1]),this.getOwnerForm().refresh({reason:"index-function",elementLocalnamesWithChanges:[]})}applyIndex(e){this._removeIndexMarker(),e&&e.setAttribute("repeat-index","")}get index(){return parseInt(this.getAttribute("index"),10)}set index(e){this.setAttribute("index",e)}_getRef(){return this.getAttribute("ref")}connectedCallback(){super.connectedCallback(),this.ref=this.getAttribute("ref"),this.dependencies.addXPath(this.ref),this.addEventListener("item-changed",(e=>{const{item:t}=e.detail,n=Array.from(this.children).indexOf(t);this.setIndex(n+1)})),document.addEventListener("index-changed",(e=>{if(e.stopPropagation(),!e.target===this)return;const{index:t}=e.detail;this.index=parseInt(t,10),this.applyIndex(this.children[t-1])})),this.mutationObserver=new MutationObserver((e=>{if("childList"===e[0].type){const t=e[0].addedNodes[0];if(t){const e=wo.resolveInstance(this,this.ref),n=wo.getPath(t,e);Yo.dispatch(this,"path-mutated",{path:n,index:this.index})}}})),this.getOwnerForm().registerLazyElement(this);this.shadowRoot.innerHTML='\n            <style>\n                \n      :host{\n      }\n       .fade-out-bottom {\n          -webkit-animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n          animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n      }\n      .fade-out-bottom {\n          -webkit-animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n          animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n      }\n   \n            </style>\n            \n          <slot name="header"></slot>\n          <slot></slot>\n          <slot name="footer"></slot>\n        \n        '}_createNewRepeatItem(){const e=document.createElement("fx-repeatitem");this.isDraggable&&(e.setAttribute("draggable","true"),e.setAttribute("tabindex",0));const t=this._clone();return e.appendChild(t),e}init(){this._evalNodeset(),this._initTemplate(),this._initRepeatItems(),this.setAttribute("index",this.index),this.inited=!0}_evalNodeset(){const e=zo(this.getAttributeNode("ref")||this,this.ref);this.mutationObserver&&e.nodeName&&this.mutationObserver.observe(e,{childList:!0,subtree:!0});const t=Do(this.ref,e,this);1===t.length&&Array.isArray(t[0])?this.nodeset=t[0]:this.nodeset=t}async refresh(e){this.inited||this.init(),this._evalNodeset();const t=this.querySelectorAll(":scope > fx-repeatitem"),n=t.length;let r=1;Array.isArray(this.nodeset)&&(r=this.nodeset.length);const i=r;if(i<n)for(let e=n;e>i;e-=1){const n=t[e-1];n.parentNode.removeChild(n),this.getOwnerForm().unRegisterLazyElement(n)}if(i>n)for(let e=n+1;e<=i;e+=1){const t=this._createNewRepeatItem();this.appendChild(t),this._initVariables(t),t.nodeset=this.nodeset[e-1],t.index=e,this.getOwnerForm().createNodes&&this.getOwnerForm().initData(t),this.getOwnerForm().scanForNewTemplateExpressionsNextRefresh()}for(let e=0;e<n;e+=1){const n=t[e];this.getOwnerForm().registerLazyElement(n),n.nodeset!==this.nodeset[e]&&(n.nodeset=this.nodeset[e])}this.getOwnerForm().lazyRefresh&&!e||Yo.refreshChildren(this,e),this.setIndex(this.index)}_fadeOut(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()}_fadeIn(e){e&&(e.style.opacity=0,e.style.display=this.display,function t(){let n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}())}_initTemplate(){this.template=this.querySelector("template"),this.dropTarget=this.template.getAttribute("drop-target"),this.isDraggable=this.template.hasAttribute("draggable")?this.template.getAttribute("draggable"):null,null===this.template&&this.dispatchEvent(new CustomEvent("no-template-error",{composed:!0,bubbles:!0,detail:{message:`no template found for repeat:${this.id}`}})),this.shadowRoot.appendChild(this.template)}_initRepeatItems(){this.nodeset.forEach(((e,t)=>{const n=this._createNewRepeatItem();if(n.nodeset=this.nodeset[t],n.index=t+1,this.appendChild(n),this.getOwnerForm().createNodes){this.getOwnerForm().initData(n);const e=n.nodeset.cloneNode(!0);this.clearTextValues(e),this.createdNodeset=e}1===n.index&&this.applyIndex(n),Yo.dispatch(this,"item-created",{nodeset:n.nodeset,pos:t+1}),this._initVariables(n)}))}clearTextValues(e){if(e){if(e.nodeType===Node.TEXT_NODE&&(e.nodeValue=""),e.nodeType===Node.ELEMENT_NODE)for(const t of Array.from(e.attributes))t.value="";for(const t of e.childNodes)this.clearTextValues(t)}}_initVariables(e){const t=new Map(this.inScopeVariables);e.setInScopeVariables(t),function e(n){for(const r of n.children)"setInScopeVariables"in r&&r.setInScopeVariables(t),e(r)}(e)}_clone(){this.template=this.shadowRoot.querySelector("template");const e=this.template.content.cloneNode(!0);return document.importNode(e,!0)}_removeIndexMarker(){Array.from(this.children).forEach((e=>{e.removeAttribute("repeat-index")}))}setInScopeVariables(e){this.inScopeVariables=new Map(e)}}customElements.get("fx-repeat")||window.customElements.define("fx-repeat",Cl);class Nl extends vl{constructor(){super(),this.formerCase={},this.selectedCase=null,this.cases=null,this.visitedResetted=!1}connectedCallback(){super.connectedCallback&&super.connectedCallback();this.shadowRoot.innerHTML="\n        <style>\n            \n       :host ::slotted(fx-case.selected-case){\n        display: block;\n    }\n    \n        </style>\n        \n       <slot></slot>\n    \n    ",this.cases=[],this.formerCase=null,this.selectedCase=null}async refresh(e){super.refresh(e),0===this.cases.length&&(this.cases=Array.from(this.querySelectorAll(":scope > fx-case"))),this.isBound()&&this._handleBoundSwitch(),this.selectedCase||(this.selectedCase=this.cases[0],this.toggle(this.selectedCase)),Yo.refreshChildren(this.selectedCase,e)}_dispatchEvents(){this.selectedCase!==this.formerCase&&(this.formerCase&&this.formerCase!==this.selectedCase&&Yo.dispatch(this.formerCase,"deselect",{}),this.selectedCase.classList.contains("selected-case")&&Yo.dispatch(this.selectedCase,"select",{}))}_resetVisited(){if(this.visitedResetted)return;const e=this.selectedCase.querySelectorAll(".visited");Array.from(e).forEach((e=>{e.classList.remove("visited")})),this.visitedResetted=!0}_handleBoundSwitch(){Array.from(this.cases).forEach((e=>{e.getAttribute("name")===this.modelItem?.value&&this.toggle(e)}))}async replaceCase(e,t){this.cases.splice(this.cases.indexOf(e),1,t),e===this.selectedCase?(this.selectedCase=t,this.formerCase=t,t.classList.add("selected-case"),t.classList.remove("deselected-case"),t.inert=!1,this.getOwnerForm().scanForNewTemplateExpressionsNextRefresh()):(t.classList.add("deselected-case"),t.classList.remove("selected-case"),t.inert=!0)}toggle(e){this.selectedCase=e,Array.from(this.cases).forEach((e=>{e===this.selectedCase?(e.classList.remove("deselected-case"),e.classList.add("selected-case"),e.inert=!1):(e.classList.remove("selected-case"),e.classList.add("deselected-case"),e.inert=!0,this._resetVisited())})),this.selectedCase!==e&&(this.selectedCase=e),this._dispatchEvents(),this.formerCase=this.selectedCase,this.getOwnerForm().scanForNewTemplateExpressionsNextRefresh(),this.getOwnerForm().getModel().updateModel()}}customElements.get("fx-switch")||window.customElements.define("fx-switch",Nl);class Tl extends gl{connectedCallback(){this.attachShadow({mode:"open"}),this.ref=this.hasAttribute("ref")?this.getAttribute("ref"):null,this.debounceDelay=this.hasAttribute("debounce")?this.getAttribute("debounce"):null;this.shadowRoot.innerHTML=`\n                <style>\n                    \n          :host {\n            cursor:pointer;\n          }\n        \n                </style>\n                ${this.renderHTML()}\n        `;const e=this.shadowRoot.querySelector("slot");e.addEventListener("slotchange",(()=>{const t=e.assignedElements({flatten:!0});t[0].getAttribute("tabindex")||t[0].setAttribute("tabindex","0"),"BUTTON"!==t[0].nodeName&&t[0].setAttribute("role","button");const n=t[0];this.addEventListener("mousedown",(e=>{e.target.focus()})),this.debounceDelay?this.addEventListener("click",function(e,t,n=300){let r;return(...i)=>{r||t.apply(e,i),clearTimeout(r),r=setTimeout((()=>(r=void 0,null)),n)}}(this,(e=>{this.performActions(e)}),this.debounceDelay)):n.addEventListener("click",(e=>this.performActions(e))),this.widget=n,"BUTTON"!==n.nodeName&&n.addEventListener("keypress",(e=>{"Space"!==e.code&&"Enter"!==e.code||this.performActions(e)}))}))}renderHTML(){return"\n            <slot></slot>\n    "}getWidget(){return this.widget}async updateWidgetValue(){return null}handleReadonly(){super.handleReadonly(),this.widget.hasAttribute("readonly")?this.widget.setAttribute("disabled","disabled"):this.widget.removeAttribute("disabled")}async performActions(e){const t=this.closest("fx-repeatitem");t&&t.click(),this.querySelectorAll("fx-var").forEach((e=>e.refresh()));for(let t=0;t<this.children.length;t+=1){const n=this.children[t];if("function"==typeof n.execute){if(e&&(e.preventDefault(),e.stopPropagation(),e.type&&n.event&&e.type!==n.event))return;await n.execute(e)}}}async refresh(){super.refresh()}}customElements.get("fx-trigger")||customElements.define("fx-trigger",Tl);class kl extends vl{static get properties(){return{...super.properties,label:{type:String},name:{type:String},selected:{type:String},selector:{type:String},src:{type:String}}}connectedCallback(){this.hasAttribute("label")&&(this.label=this.getAttribute("label")),this.hasAttribute("name")&&(this.name=this.getAttribute("name")),this.hasAttribute("selected")&&(this.selected=this.getAttribute("selected")),this.selector=this.hasAttribute("selector")?this.getAttribute("selector"):"fx-case",this.hasAttribute("src")&&(this.src=this.getAttribute("src"));const e=`\n           ${this.label?`<span>${this.label}</span>`:""}\n           <slot></slot>\n        `;this.shadowRoot.innerHTML=`\n            <style>\n                \n            :host {\n                visibility: none;\n            }\n        \n            </style>\n            ${e}\n        `,this.addEventListener("select",(async()=>{const e=this.getOwnerForm();if(this.src){const{parentNode:e}=this,t=await this._loadFromSrc();if(!t)return void Yo.dispatch(this,"error",{detail:{message:"HTML page couldn't be loaded"}});await e.replaceCase(this,t)}e.getModel().updateModel(),e.refresh(!0)}))}async _loadFromSrc(){return Yo.loadForeFromSrc(this,this.src,this.selector)}}customElements.get("fx-case")||window.customElements.define("fx-case",kl);class Il extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const e=this.closest("fx-fore");this.render("\n          :host {\n            position:absolute;\n            display: block;\n            width:var(--inspector-handle-width);\n            background:var(--inspector-bg);\n            top:0;\n            right:0;\n            bottom:0;\n            height: 100%;\n            background: var(--inspector-bg);\n            color: white;\n            /*max-height: 33%;*/\n            overflow: scroll;\n            transition:width 0.3s ease;\n            z-index:100;\n          }\n          :host([open]){\n            width: 30%;\n          }\n          details{\n            margin:1rem;\n          }\n          .main{\n            padding-left:var(--inspector-handle-width);\n            color:var(--inspector-color);\n            overflow:scroll;\n            height:100%;\n          }\n          pre{\n            background:var(--inspector-pre-bg);\n            color:var(--inspector-color);\n            overflow:scroll;\n            padding:0.2rem;\n          }\n          .handle{\n            display:block;\n            height:100%;\n            width:var(--inspector-handle-width);\n            background:var(--inspector-handle-bg);\n            opacity:0.7;\n            position:absolute;\n            left:0;\n            color:white;\n            cursor:pointer;\n          }\n          .handle:hover{\n            opacity:1;\n          }\n          .handle::before{\n            content: 'Data Inspector';\n            white-space: nowrap;\n            transform: rotate(-90deg);\n            display: inline-block;\n            position: absolute;\n            left: -85px;\n            width: 200px;\n            top: 40px;\n          }\n          summary{\n            cursor:pointer;\n          }\n        "),e.addEventListener("refresh-done",(()=>{this.update()}))}update(){try{const e=this.shadowRoot.querySelectorAll("pre"),t=this.closest("fx-fore");Array.from(e).forEach((e=>{const n=t.getModel().getInstance(e.getAttribute("id"));"xml"===n.getAttribute("type")&&(e.innerText=this.serializeDOM(n.instanceData)),"json"===n.getAttribute("type")&&(e.innerText=JSON.stringify(n.instanceData,void 0,2))}))}catch(e){}}render(e){const t=this.closest("fx-fore"),n=Array.from(t.querySelectorAll("fx-instance"));this.shadowRoot.innerHTML=`\n            <style>\n                ${e}\n            </style>\n            <div class="main">\n            <slot></slot>\n            <span class="handle"></span>\n                ${n.map((e=>`\n                  <details>\n                      <summary>${e.id}</summary>\n                      <pre id="${e.id}"></pre>\n                  </details>\n                `))}\n            </div>\n        `;this.shadowRoot.querySelector(".handle").addEventListener("click",(e=>{this.hasAttribute("open")?this.removeAttribute("open"):this.setAttribute("open","open")}))}serializeDOM(e){if(!e)return;return Ao((new XMLSerializer).serializeToString(e))}}customElements.get("fx-inspector")||customElements.define("fx-inspector",Il);class Sl extends HTMLElement{static get properties(){return{id:String}}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.innerHTML=this.render("\n          :host {\n            display:none;\n            height: 100vh;\n            width:100vw;\n            position:fixed;\n            left:0;\n            top:0;\n            right:0;\n            bottom:0;\n            transition:opacity 0.4s linear;\n          }\n\n        "),this.id=this.getAttribute("id");const e=this.querySelector(".close-dialog");e&&e.addEventListener("click",(()=>{this.classList.remove("show")})),this.setAttribute("role","dialog"),this.setAttribute("aria-modal","false"),this.focus()}render(e){return`\n      <style>\n          ${e}\n      </style>\n      <slot></slot>\n    `}showModal(){window.addEventListener("keyup",(e=>{"Escape"===e.key&&this.hide()}),{once:!0}),this.classList.add("show")}async close(){await Yo.fadeOutElement(this,400),this.classList.remove("show")}}customElements.get("fx-dialog")||customElements.define("fx-dialog",Sl);class Bl extends wl{static get properties(){return{...super.properties,valueAttr:{type:String}}}constructor(){super(),this.valueAttr=this.hasAttribute("value")?this.getAttribute("value"):null}connectedCallback(){super.connectedCallback(),this.addEventListener("mousedown",(e=>{if(Yo.isWidget(e.target)||(e.preventDefault(),e.stopImmediatePropagation()),"LABEL"===e.target.nodeName){ko(e.target.getAttribute("for"),this).focus()}})),this.addEventListener("mousedown",(e=>{if(this.querySelectorAll("[value]"),"LABEL"===e.target.nodeName){ko(e.target.getAttribute("for"),this).focus()}})),this.addEventListener("click",(e=>{e.preventDefault,e.stopPropagation();const t=this.querySelectorAll("[value]");let n;"LABEL"===e.target.nodeName&&(n=ko(e.target.getAttribute("for"),this),n.checked=!n.checked);let r="";Array.from(t).forEach((e=>{e.checked&&(r+=` ${e.getAttribute("value")}`)})),this.setAttribute("value",r.trim());const i=wo.getClosest("[ref]",this.parentNode);if(!i)return;const a=i.getModelItem(),s=this.shadowRoot.getElementById("setvalue");s.setValue(a,r.trim()),s.actionPerformed()}))}getWidget(){return this}async updateWidgetValue(){const e=wo.getClosest("[ref]",this.parentNode);e&&(this.value=e.value),this.setAttribute("value",this.value)}updateEntry(e,t){const n=Yo.createUUID(),r=e.querySelector("label"),i=Yo.getExpression(r.textContent);if(t.nodeType){const e=$o(i,t,this);r.textContent=e}else{const e=Yo.getExpression(i);r.textContent=t[e]}r.setAttribute("for",n);const a=e.querySelector("[value]"),s=a.value,o=Yo.getExpression(s);let l;l=t.nodeType?$o(o,t,e):t[o];const c=` ${l} `,u=` ${this.getAttribute("value")} `;a.value=l,a.setAttribute("id",n),-1!==u.indexOf(c)&&(a.checked=!0)}}customElements.get("fx-items")||customElements.define("fx-items",Bl);class Ol extends(al(Zo)){}customElements.get("fx-droptarget")||window.customElements.define("fx-droptarget",Ol);class Fl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.eventName="",this.shortName="",this.shortInfo="",this.shortPath="",this.xpath=""}connectedCallback(){this.eventName=this.getAttribute("event-name"),this.shortName=this.getAttribute("short-name"),this.shortInfo=this.hasAttribute("short-info")?this.getAttribute("short-info"):"",this.xpath=this.getAttribute("xpath");const e=`\n       <details class="info send">\n              <summary>\n                <span class="log-name"><a href="#" title="${`/${this.xpath.substring(this.xpath.indexOf("/fx-fore"),this.xpath.length)}`.replaceAll("fx-","")}" data-path="${this.xpath}">${this.shortName}</a></span>\n                <span class="short-info">${this.shortInfo}</span>\n                <span class="event-name">${this.eventName}</span>                    \n              </summary>\n            <slot></slot>\n        </details>\n    `;this.shadowRoot.innerHTML=`\n        <style>\n            \n      :host {\n        height: auto;\n        font-size: 0.8em;\n        font-weight: 400;\n\n      }\n\n      a,a:link,a:visited{\n        color:black;\n      }\n      a{\n        position:relative;\n      }\n      a[alt]:hover::after {\n        content:attr(alt);\n        position:absolute; \n        left:0;\n        top:1em;\n        border.thin solid;\n        padding:0.5em;\n        background:white;\n        z-index:1;\n        min-width:5em;\n        border:thin solid;\n        white-space:nowrap;\n        overflow-wrap:break-word;\n      }\n\n     .info{\n        padding:0 0.5em;\n        margin:0.1rem 0;\n        background:white;\n        position:relative;\n        border:1px solid #ddd;\n        border-radius:1em;       \n        box-shadow: 1px 1px 5px 0px rgba(79, 136, 183, 0.8);\n      }\n      :host(.action) .info{\n        border-radius:0;\n        border-color:steelblue;\n      }\n\n      .info label{\n        grid-area:left;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .info a{\n        grid-area:right;\n        justify-self:end;\n      }\n      .info:hover{\n        outline:3px solid lightblue;       \n        transition:height 0.4s;\n      }\n\n       summary{\n        padding:1em;\n        display:flex;\n        flex-wrap:wrap;\n        padding:0.5em 0;\n        cursor:pointer;\n        gap:0.25em;\n      }\n/*\n      .log-name{\n        font-size:1.2em;\n      }\n      .log-name, .short-info{\n        width:10em;\n      }\n*/\n      .event-name{\n        width:12em;\n        text-align:right;\n        }\n      .short-info{\n        flex:3;\n        overflow:hidden;\n        white-space:nowrap;\n        text-overflow:ellipsis;\n      }\n    \n        </style>\n        ${e}\n    `}}customElements.get("fx-log-item")||customElements.define("fx-log-item",Fl);class Pl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.listenTo=[],this.listeners=[]}connectedCallback(){localStorage.getItem("fx-log-settings")?this.listenTo=JSON.parse(localStorage.getItem("fx-log-settings")):this.listenTo=Pl.defaultSettings();this.shadowRoot.innerHTML='\n        <style>\n            \n      :host {\n        display:block;\n        position:relative;\n        width:100%;\n        border:thin solid #efefef;\n        font-family: Verdana, Sans;\n\n        margin:0;\n        border:thin solid #ddd;\n      }\n      .boxes{\n        column-width:14rem;\n        overflow:auto;\n        margin-bottom:5em;\n        padding:1em;\n      }\n      .boxes > span{\n        display:inline-block;\n        width:14rem;\n      }\n      \n      .buttons{\n        position:absolute;\n        top:0;\n        right:0;\n      }\n      .buttons button{\n        padding:0;\n      }\n      button{\n        float:right;\n      }\n      button{\n        border:none;\n        background:transparent;\n        width:2.25rem;\n        height:2.25rem;\n        cursor:pointer;\n      }\n      button#reset{\n        padding:0;\n        height:1rem;\n      }\n      header{\n        padding:0.5rem;\n        margin:0;\n        border-bottom:2px solid #ddd;\n      }\n      #settings{\n        padding:1em;\n      }\n      \n    \n        </style>\n        \n        <section id="settings">\n            <header>log settings <button id="reset">reset</button></header>\n            <div class="boxes"></div>\n        </section>\n    \n    ',window.document.querySelector("fx-fore");const e=this.shadowRoot.querySelector(".boxes");this.listenTo.forEach((t=>{const n=document.createElement("span");e.append(n);const r=document.createElement("label");r.setAttribute("title",t.description),r.setAttribute("for",t.name),r.innerText=t.name;const i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("name",t.name),i.setAttribute("id",t.name),t.show&&i.setAttribute("checked",""),n.append(i),n.append(r),i.addEventListener("click",(e=>{if(!e.target.checked){document.querySelector("fx-fore").removeEventListener(t.name,this._log)}const n=this.listenTo.find((e=>e.name===t.name));e.target.checked?n.show=!0:n.show=!1,localStorage.setItem("fx-log-settings",JSON.stringify(this.listenTo))}))}));this.shadowRoot.querySelector("#reset").addEventListener("click",(e=>{localStorage.removeItem("fx-log-settings"),window.location.reload()}))}static defaultSettings(){return[{name:"action-performed",show:!1,description:"fires after an action has been performed"},{name:"click",show:!1,description:""},{name:"deleted",show:!1,description:"fires after a delete action has been executed"},{name:"deselect",show:!1,description:"fires when fx-case is deselected"},{name:"dialog-hidden",show:!1,description:"fires after fx-dialog has been hidden"},{name:"dialog-shown",show:!1,description:"fired when a dialog has been shown"},{name:"error",show:!1,description:"fires after an error occurred"},{name:"execute-action",show:!0,description:"fires when an action executes"},{name:"init",show:!1,description:"fires when a control initializes"},{name:"index-changed",show:!1,description:"fires when the repeat index changes"},{name:"insert",show:!1,description:"fires when an fx-insert is executed"},{name:"instance-loaded",show:!1,description:"fires after an fx-instance has been loaded"},{name:"invalid",show:!1,description:"fires after a control became invalid"},{name:"item-changed",show:!1,description:"fires when a repeat item was changed"},{name:"item-created",show:!1,description:"fires when a repeat item was created"},{name:"loaded",show:!1,description:"fires after a fx-load has loaded"},{name:"model-construct",show:!1,description:"fires when a model gets constructed"},{name:"model-construct-done",show:!1,description:"fires after model initialization"},{name:"nonrelevant",show:!1,description:"fires after an fx-control became nonrelevant"},{name:"optional",show:!1,description:"fires after an fx-control became optional"},{name:"outermost-action-end",show:!1,description:"fires when an outermost action block is finished"},{name:"outermost-action-start",show:!1,description:"fires when an outermost action block is started"},{name:"path-mutated",show:!1,description:"fires when a path in a repeat has been mutated"},{name:"readonly",show:!1,description:"fires after an fx-control became readonly"},{name:"readwrite",show:!1,description:"fires after an fx-control became readwrite"},{name:"ready",show:!1,description:"fires after a fx-fore page has been completely initialized"},{name:"rebuild-done",show:!1,description:"fires after a rebuild has taken place"},{name:"recalculate-done",show:!1,description:"fires after a recalculate has taken place"},{name:"refresh-done",show:!1,description:"fires after a refresh has been done"},{name:"relevant",show:!1,description:"fires after a fx-control has become relevant"},{name:"reload",show:!1,description:"fires when a fx-reload action executes"},{name:"required",show:!1,description:"fires after an fx-control has become required"},{name:"return",show:!1,description:"fires after a fx-return returned"},{name:"select",show:!1,description:"fires when an fx-case has been selected"},{name:"submit",show:!1,description:"fires before a submission takes place"},{name:"submit-done",show:!1,description:"fires after a submission has successfully been executed"},{name:"submit-error",show:!1,description:"fires when a submission returned an error"},{name:"valid",show:!1,description:"fires after a fx-control has become valid"},{name:"value-changed",show:!1,description:"fires after a fx-control has changed its value"}]}_log(e,t){const n=e.target.nodeName;if("FX-ACTION-LOG"===n)return;const r=document.createElement("div");r.classList.add("log-row");const i=this._logDetails(e);if(e.detail&&0===Object.keys(e.detail).length&&Object.getPrototypeOf(e.detail)===Object.prototype&&r.classList.add("no-detail"),r.innerHTML=i,this.outermost){if("outermost-action-start"===e.type)return;this.outermostAppender||(this.outermostAppender=document.createElement("ul"),t.append(this.outermostAppender));const n=document.createElement("li");n.append(r),this.outermostAppender.append(n)}else t.append(r);this.parentPath&&"FX-ACTION"!==n&&r.classList.add("nested");const a=e.target;r.addEventListener("click",(e=>{this._highlight(a)}));const s=r.querySelector(".event-target");s&&s.addEventListener("click",(e=>{document.querySelectorAll(".fx-action-log-debug").forEach((e=>{e.classList.remove("fx-action-log-debug")})),a.dispatchEvent(new CustomEvent("log-action",{composed:!1,bubbles:!0,cancelable:!0,detail:{target:a}})),a.classList.add("fx-action-log-debug"),a.setAttribute("data-name",a.nodeName),this._highlight(a)}))}_logDetails(e){const t=e.type,n=wo.getPath(e.target),r=n.substring(n.indexOf("/fx-fore"),n.length),i=`/${r}`,a=r.replaceAll("fx-","");switch(this.parentPath&&!i.startsWith(this.parentPath)&&(this.parentPath=null),t){case"deleted":const{deletedNodes:n}=e.detail,r=new XMLSerializer;let s="";return n.forEach((e=>{s+=r.serializeToString(e)})),`\n                <fx-log-item event-name="${t}"\n                             xpath="${i}"\n                             short-info="${e.detail.ref}"\n                             short-name="${e.target.nodeName.toLowerCase()}">\n                    <section class="details">\n                        <header>Details</header>\n                        <section>\n                            <span class="key">Deleted Nodes</span>\n                            <textarea class="value" rows="5">${s.trim()}</textarea>\n                        </section>\n                    </section>\n                </fx-log-item>\n                `;case"outermost-action-start":return"start";case"outermost-action-end":return"";case"execute-action":const o=e.detail.action;return this._renderAction(o,i,a,e);default:return`\n                <fx-log-item event-name="${t}"\n                             xpath="${i}"\n                             short-name="${e.target.nodeName.toLowerCase()}">\n                             \n                    <section class="details">\n                      ${this._listEventDetails(e)}\n                    </section>\n                </fx-log-item>\n            `}}_renderAction(e,t,n,r){switch(e.nodeName.split("-")[1],e.nodeName){case"FX-ACTION":return this.parentPath=t,`\n                <fx-log-item event-name="${r.detail.event}"\n                             xpath="${t}"\n                             short-name="ACTION" class="action">\n                    <section class="details">\n                      <header>Attributes</header>\n                      <section>\n                      ${Array.from(e.attributes).map((e=>`\n                        <span class="key">${e.nodeName}</span>\n                        <span class="value">${e.nodeValue}</span>\n                      `)).join("")}                 \n                      </section>\n                    </section>\n                </fx-log-item>  \n            `;case"FX-MESSAGE":const n=r.detail.action.messageTextContent;return`\n                    <fx-log-item event-name="${r.detail.event}"\n                                 xpath="${t}"\n                                 short-name="MESSAGE"\n                                 short-info="${n}" class="action">\n                        <section class="details">\n                            <span>${n}</span>\n                        </section>\n                    </fx-log-item>\n                `;case"FX-SEND":const i=document.querySelector(`#${r.detail.action.getAttribute("submission")}`);return`\n                <fx-log-item short-name="SEND"\n                             short-info="${i.id}"\n                             event-name="${r.detail.event}"\n                             xpath="${t}" class="action">\n                        <section class="details">\n                          <header>Submission</header>\n                          <section class="attributes">\n                          ${Array.from(i.attributes).map((e=>`\n                            <span class="key">${e.nodeName}</span>\n                            <span class="value">${e.nodeValue}</span>\n                          `)).join("")}                 \n                          </section>  \n                        </section>\n               </fx-log-item>\n                `;case"FX-SETVALUE":return`\n                <fx-log-item short-name="SETVALUE"\n                             short-info="${wo.getPath(r.target.nodeset)}"\n                             event-name="${"FX-CONTROL"===r.target.nodeName?r.target.updateEvent:r.detail.event}"\n                             xpath="${t}" class="action">\n                      <section class="details">\n                          <span class="key">value</span>\n                          <span class="value">${r.detail.value}</span>\n                      </section>\n                </fx-log-item>\n                `;default:return`\n                    <fx-log-item event-name="${r.detail.event}" \n                                short-name="${r.target.nodeName}"\n                                xpath="${t}"\n                                class="action">\n                          <section class="details">\n                          </section>\n                    </fx-log-item>\n                    `}}_listEventDetails(e){return e.detail&&0===Object.keys(e.detail).length&&Object.getPrototypeOf(e.detail)===Object.prototype?"":`${Object.keys(e.detail).map((e=>`<span>${e}</span>`))}`}_listAttributes(e){return""}_highlight(e){const t=e.style.backgroundColor,n=e.style.transition;e.style.transition="background 1s",e.style.backgroundColor="#FFA500",setTimeout((()=>{e.style.backgroundColor=t,setTimeout((()=>{e.style.transition=n}),400)}),400),window.document.dispatchEvent(new CustomEvent("log-active-element",{detail:{target:e}}))}}customElements.get("fx-log-settings")||customElements.define("fx-log-settings",Pl);class Dl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.listenTo=[],this.listeners=[]}connectedCallback(){localStorage.getItem("fx-action-log-filters")?this.listenTo=JSON.parse(localStorage.getItem("fx-action-log-filters")):this.listenTo=Pl.defaultSettings(),localStorage.getItem("fx-log-settings")?this.listenTo=JSON.parse(localStorage.getItem("fx-log-settings")):this.listenTo=Pl.defaultSettings();this.shadowRoot.innerHTML='\n        <style>\n            \n      :host {\n        display:block;\n        position:relative;\n        width:100%;\n        border:thin solid #efefef;\n        background:transparent;\n        font-family: Verdana, Sans;\n        margin:0;\n        padding:0.25rem;\n      }\n      a,a:link,a:visited{\n        color:black;\n      }\n      a{\n        position:relative;\n      }\n      a[alt]:hover::after {\n        content:attr(alt);\n        position:absolute; \n        left:0;\n        bottom:-0.5em;\n        border:thin solid;\n        padding:0.5em;\n        background:white;\n        z-index:1;\n        min-width:5em;\n        border:thin solid;\n        max-width:90%;\n      }\n     .details{\n        padding:0.25em 0;\n      }\n\n      .key{\n        width:20%;\n        display:inline-block;\n        min-width:5rem;\n        border-bottom:1px solid #ddd;\n        background:#efefef;\n        vertical-align:top;\n      }\n      .value{\n        display:inline-block;\n        width:60%;\n        \n      }\n      \n      .buttons{\n        position:absolute;\n        top:0;\n        right:0;\n      }\n      .buttons button{\n        padding:0;\n      }\n      button{\n        float:right;\n      }\n      button{\n        border:none;\n        background:transparent;\n        width:2.25rem;\n        height:2.25rem;\n        cursor:pointer;\n      }\n      button#reset{\n        padding:0;\n        height:1rem;\n      }\n     .info{\n        padding:0 0.5em;\n        margin:0.1rem 0;\n        background:white;\n        position:relative;\n        display:grid;\n        grid-template-areas: "left right"\n                    "bottom .";\n        grid-template-columns: 75% 25%;\n      }\n      .info a{\n        grid-area:right;\n        justify-self:end;\n      }\n      .details > section{\n        display:flex;\n        flex-wrap:wrap;\n        padding:0.5em 0;\n      }\n      fx-log-item{\n      }\n      header{\n        padding:0.5rem;\n        margin:0;\n        border-bottom:2px solid #ddd;\n      }\n      \n      .info:hover{\n        outline:3px solid lightblue;       \n        transition:height 0.4s;\n      }\n\n      ol{\n        background: #efefef;\n        padding: 0.5em 0 0 2em;\n        border-left:3px solid red;\n      }\n     \n      .event-name{\n        display:inline-block;\n      }\n      #log{\n        margin-bottom:10em;\n        margin-right:2em;\n      }\n      .log-row{\n        margin:0;\n        padding:0;\n        position:relative;\n        font-size:0.8em;\n        border-left:4px solid transparent;\n        padding-left:5px;\n        width:calc(100% - 2em);\n        margin-bottom:0.25em;\n      }\n      .log-row summary{\n        display:flex;\n        flex-wrap:wrap;\n        padding:0.5em 0;\n        cursor:pointer;\n      }\n      .log-row summary > span {\n        width:calc(90% div 3);\n      }\n\n      .log-name{\n        position:relative;\n      }\n      .short-info{\n        flex:3;\n        overflow:hidden;\n        white-space:nowrap;\n        text-overflow:ellipsis;\n      }\n      .log-row.no-detail summary{\n        position:relative;\n      }\n      .log-row.no-detail summary{\n        list-style:none;\n        padding-left:1rem;\n      }\n      .log-row.no-detail summary::-webkit-details-marker {\n        display: none;\n      }\n      .log-row.nested{\n        margin-left:1em;\n      }\n      .nested .event-name{\n        display:none;\n      }\n      \n      .setvalue .value{\n        background:lightyellow;\n      }\n       summary{\n        padding:1em;\n        border-bottom:2px solid #ddd;\n      }\n      .outer-details{\n        height:100%;\n        overflow:auto;\n        margin-top:2rem;\n        background:rgba(250, 250, 250, 0.9);\n      }\n      \n      .outer-details > header{\n        position:absolute;\n        top:-1px;\n        width:calc(100% - 2rem);\n        border-bottom:2px solid #ddd;\n        font-size:1rem;\n        height:1rem;\n     }\n      .outer-details > summary{\n        font-size:1em;\n      }\n      ul{\n        list-style:none;\n        padding:0;\n        margin:0.1em 0;\n        border-left:3px solid steelblue;\n        padding:0.1em 0;\n      }\n      ul .log-row{\n        padding-left:3px;\n        width:calc(100% - 1em);\n      }\n    \n        </style>\n        \n      <section open class="outer-details">\n        <header>Log \n            <span class="buttons">\n                <button id="del"" title="empty log - Ctrl+d">\n                    <svg viewBox="0 0 24 24" style="width:24px;height:24px;" preserveAspectRatio="xMidYMid meet" focusable="true"><g><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></g></svg></a>\n                </button>\n            </span>\n        </header>\n        <div id="log"></div>\n      </section>\n    \n    ',window.document.querySelector("fx-fore");const e=this.shadowRoot.querySelector("#log");this.listenTo.forEach((t=>{t.show&&document.addEventListener(t.name,(t=>{this._log(t,e)}))})),document.addEventListener("outermost-action-start",(e=>{this.outermost=!0}),{capture:!0}),document.addEventListener("outermost-action-end",(e=>{this.outermost=!1,this.outermostAppender=null}),{capture:!0});this.shadowRoot.querySelector("#del").addEventListener("click",(e=>{this.shadowRoot.querySelector("#log").innerHTML=""})),document.addEventListener("keydown",(e=>{e.ctrlKey&&"d"===e.key&&(this.shadowRoot.querySelector("#log").innerHTML="")}))}_defaultSettings(){this.listenTo=[{name:"action-performed",show:!1,description:"fires after an action has been performed"},{name:"click",show:!1,description:""},{name:"deleted",show:!1,description:"fires after a delete action has been executed"},{name:"deselect",show:!1,description:"fires when fx-case is deselected"},{name:"dialog-hidden",show:!1,description:"fires after fx-dialog has been hidden"},{name:"dialog-shown",show:!1,description:"fired when a dialog has been shown"},{name:"error",show:!1,description:"fires after an error occurred"},{name:"execute-action",show:!0,description:"fires when an action executes"},{name:"init",show:!1,description:"fires when a control initializes"},{name:"index-changed",show:!1,description:"fires when the repeat index changes"},{name:"insert",show:!1,description:"fires when an fx-insert is executed"},{name:"instance-loaded",show:!1,description:"fires after an fx-instance has been loaded"},{name:"invalid",show:!1,description:"fires after a control became invalid"},{name:"item-changed",show:!1,description:"fires when a repeat item was changed"},{name:"item-created",show:!1,description:"fires when a repeat item was created"},{name:"loaded",show:!1,description:"fires after a fx-load has loaded"},{name:"model-construct",show:!1,description:"fires when a model gets constructed"},{name:"model-construct-done",show:!1,description:"fires after model initialization"},{name:"nonrelevant",show:!1,description:"fires after an fx-control became nonrelevant"},{name:"optional",show:!1,description:"fires after an fx-control became optional"},{name:"outermost-action-end",show:!1,description:"fires when an outermost action block is finished"},{name:"outermost-action-start",show:!1,description:"fires when an outermost action block is started"},{name:"path-mutated",show:!1,description:"fires when a path in a repeat has been mutated"},{name:"readonly",show:!1,description:"fires after an fx-control became readonly"},{name:"readwrite",show:!1,description:"fires after an fx-control became readwrite"},{name:"ready",show:!1,description:"fires after a fx-fore page has been completely initialized"},{name:"rebuild-done",show:!1,description:"fires after a rebuild has taken place"},{name:"recalculate-done",show:!1,description:"fires after a recalculate has taken place"},{name:"refresh-done",show:!1,description:"fires after a refresh has been done"},{name:"relevant",show:!1,description:"fires after a fx-control has become relevant"},{name:"reload",show:!1,description:"fires when a fx-reload action executes"},{name:"required",show:!1,description:"fires after an fx-control has become required"},{name:"return",show:!1,description:"fired by embedded Fore controls to return their bound value"},{name:"select",show:!1,description:"fires when an fx-case has been selected"},{name:"submit",show:!1,description:"fires before a submission takes place"},{name:"submit-done",show:!1,description:"fires after a submission has successfully been executed"},{name:"submit-error",show:!1,description:"fires when a submission returned an error"},{name:"valid",show:!1,description:"fires after a fx-control has become valid"},{name:"value-changed",show:!1,description:"fires after a fx-control has changed its value"}]}_log(e,t){const n=e.target.nodeName;if("FX-ACTION-LOG"===n)return;const r=document.createElement("div");r.classList.add("log-row");const i=this._logDetails(e);if(e.detail&&0===Object.keys(e.detail).length&&Object.getPrototypeOf(e.detail)===Object.prototype&&r.classList.add("no-detail"),r.innerHTML=i,this.outermost){if("outermost-action-start"===e.type)return;this.outermostAppender||(this.outermostAppender=document.createElement("ul"),t.append(this.outermostAppender));const n=document.createElement("li");n.append(r),this.outermostAppender.append(n)}else t.append(r);this.parentPath&&"FX-ACTION"!==n&&r.classList.add("nested");const a=e.target;r.addEventListener("click",(e=>{this._highlight(a)}));const s=r.querySelector(".event-target");s&&s.addEventListener("click",(e=>{document.querySelectorAll(".fx-action-log-debug").forEach((e=>{e.classList.remove("fx-action-log-debug")})),a.dispatchEvent(new CustomEvent("log-action",{composed:!1,bubbles:!0,cancelable:!0,detail:{target:a}})),a.classList.add("fx-action-log-debug"),a.setAttribute("data-name",a.nodeName),this._highlight(a)}))}_logDetails(e){const t=e.type,n=wo.getDocPath(e.target),r=n.substring(n.indexOf("/fx-fore"),n.length),i=`/${r}`,a=r.replaceAll("fx-","");switch(this.parentPath&&!i.startsWith(this.parentPath)&&(this.parentPath=null),t){case"deleted":const{deletedNodes:n}=e.detail,r=new XMLSerializer;let s="";return n.forEach((e=>{s+=r.serializeToString(e)})),`\n                <fx-log-item event-name="${t}"\n                             xpath="${i}"\n                             short-info="${e.detail.ref}"\n                             short-name="${e.target.nodeName.toLowerCase()}">\n                    <section class="details">\n                        <header>Details</header>\n                        <section>\n                            <span class="key">Deleted Nodes</span>\n                            <textarea class="value" rows="5">${s.trim()}</textarea>\n                        </section>\n                    </section>\n                </fx-log-item>\n                `;case"outermost-action-start":return"start";case"outermost-action-end":return"";case"execute-action":const o=e.detail.action;return this._renderAction(o,i,a,e);default:return`\n                <fx-log-item event-name="${t}"\n                             xpath="${i}"\n                             short-name="${e.target.nodeName.toLowerCase()}">\n                             \n                    <section class="details">\n                      ${this._listEventDetails(e)}\n                    </section>\n                </fx-log-item>\n            `}}_renderAction(e,t,n,r){let i;switch(e.nodeName.split("-")[1],e.nodeName){case"FX-ACTION":return this.parentPath=t,i=r.target.currentEvent?r.target.currentEvent.type:r.detail.event?r.detail.event:"",`\n                <fx-log-item event-name="${i}"\n                             xpath="${t}"\n                             short-name="ACTION"\n                              data-path="${r.detail.path}" \n                              class="action">\n                    <section class="details">\n                      <header>Attributes</header>\n                      <section>\n                      ${Array.from(e.attributes).map((e=>`\n                        <span class="key">${e.nodeName}</span>\n                        <span class="value">${e.nodeValue}</span>\n                      `)).join("")}                 \n                      </section>\n                    </section>\n                </fx-log-item>  \n            `;case"FX-MESSAGE":const n=r.detail.action.messageTextContent;return`\n                    <fx-log-item event-name="${r.detail.event}"\n                                 xpath="${t}"\n                                 short-name="MESSAGE"\n                                 short-info="${n}" class="action">\n                        <section class="details">\n                            <span>${n}</span>\n                        </section>\n                    </fx-log-item>\n                `;case"FX-SEND":const a=document.querySelector(`#${r.detail.action.getAttribute("submission")}`),s=r.detail.event?r.detail.event:"";return`\n                <fx-log-item short-name="SEND"\n                             short-info="${a.getAttribute("id")}"\n                             event-name="${s}"\n                             xpath="${t}" class="action"\n                             data-path="${r.detail.path}" >\n                        <section class="details">\n                          <header>Submission</header>\n                          <section class="attributes">\n                          ${Array.from(a.attributes).map((e=>`\n                            <span class="key">${e.nodeName}</span>\n                            <span class="value">${e.nodeValue}</span>\n                          `)).join("")}                 \n                          </section>  \n                        </section>\n               </fx-log-item>\n                `;case"FX-SETVALUE":return`\n                <fx-log-item short-name="SETVALUE"\n                             short-info="${wo.getPath(r.target.nodeset)}"\n                             event-name="${"FX-CONTROL"===r.target.nodeName?r.target.updateEvent:r.detail.event?r.detail.event:""}"\n                             xpath="${t}"\n                             data-path="${r.detail.path}" class="action">\n                      <section class="details">\n                          <span class="key">value</span>\n                          <span class="value">${r.detail.value}</span>\n                      </section>\n                </fx-log-item>\n                `;default:return i=r.target.currentEvent?r.target.currentEvent.type:r.detail.event?r.detail.event:"",`\n                    <fx-log-item event-name="${i}" \n                                short-name="${r.target.nodeName}"\n                                xpath="${t}"\n                                data-path="${r.detail.path}" \n                                class="action">\n                          <section class="details">\n                          </section>\n                    </fx-log-item>\n                    `}}_listEventDetails(e){return e.detail&&0===Object.keys(e.detail).length&&Object.getPrototypeOf(e.detail)===Object.prototype?"":`${Object.keys(e.detail).map((e=>`<span>${e}</span>`))}`}_listAttributes(e){return""}_highlight(e){const t=e.style.backgroundColor,n=e.style.transition;e.style.transition="background 1s",e.style.backgroundColor="#FFA500",setTimeout((()=>{e.style.backgroundColor=t,setTimeout((()=>{e.style.transition=n}),400)}),400),window.document.dispatchEvent(new CustomEvent("log-active-element",{detail:{target:e}}))}}function Rl(e,t){e.classList.add(t)}function Ml(e,t){e.classList.remove(t)}function Ll(e,t){if("object"!=typeof e)throw new Error(`containsOnlyText: Expected argument node of type object, ${typeof e} given.`);let n=!1,r=null;if(t=t||!1)for(let t=0,i=e.childNodes.length;t<i&&(r=e.childNodes[t],n=r.nodeType===Node.TEXT_NODE||r.nodeType===Node.COMMENT_NODE||r.nodeType===Node.CDATA_SECTION_NODE,n);t+=1);else n=e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE||e.nodeType===Node.CDATA_SECTION_NODE;return n}function $l(e,t){const n=document.createElement(e);t=t||{};for(const e of Object.keys(t))n.setAttribute(e,t[e]);return n}function Ul(e,t){const n=$l("span",{class:"adi-opt"});return n.innerHTML=`<label><input type="checkbox" data-opt="${e}">${t}</label>`,n}customElements.get("fx-action-log")||customElements.define("fx-action-log",Dl);class Hl{constructor(e,t){this.sourceNodeByInspectorNodeLookup=new Map,this.uiView=null,this.menuView=null,this.domView=null,this.attrView=null,this.optsView=null,this.activeElement=null,this.vertResizing=!1,this.horizResizing=!1,this.pathScrolling=null,this.elemLookup=!1,this.styleBackup="",this.xPos=0,this.delegatedEvents=[],this.options={align:"right",split:50,minSplit:30,visible:!0,saving:!1,transparent:!0,omitEmptyText:!0,makeVisible:!0,foldText:!0,nodeTypes:[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.COMMENT_NODE,Node.DOCUMENT_NODE]},"#document"===t?(this.instanceId="#document",this.document=window.document,this.isInstanceViewer=!1):(this.instanceId=t.id,!t||t.localName,this.document=t.getInstanceData(),this.isInstanceViewer=!0,this.options.foldText=!1),this.drawUI(e),this.registerEvents(),this.drawDOM(this.document,this.domView.querySelector(".adi-tree-view"),!0),document.addEventListener("execute-action",(e=>this.processExecuteAction))}getSelected(){if(!this.activeElement)return null;let e=document;return e=this.sourceNodeByInspectorNodeLookup.get(this.activeElement),e}loadOptions(){let e={};e=JSON.parse(window.localStorage.getItem("ADI.options"))||{};for(const t of Object.keys(e))this.options[t]=e[t]}saveOptions(){this.options.saving&&window.localStorage.setItem("ADI.options",JSON.stringify(this.options))}hasRequiredNodes(e){if("object"!=typeof e)throw new Error(`hasRequiredNodes: Expected argument node of type object, ${typeof e} given.`);if(e.hasChildNodes())for(let t=0,n=e.childNodes.length;t<n;t+=1){const n=e.childNodes[t];if(this.options.nodeTypes.includes(n.nodeType))return!0}return!1}newTreeNode(e){if("object"!=typeof e)throw new Error(`newTreeNode: Expected argument node of type object, ${typeof e} given.`);const t=this.hasRequiredNodes(e);let n=!1,r=e.nodeName.startsWith("FX-")?`adi-node ${e.nodeName.toLowerCase()}`:"";e.nodeName.startsWith("FX-")&&(r=`adi-node ${e.nodeName.toLowerCase()}`,r+=Yo.isActionElement(e.nodeName)?" action":"");const i=$l("li",{class:r});if(e===this.uiView)return null;if(t&&i.appendChild($l("span",{class:"adi-trigger"})),this.options.omitEmptyText&&e.nodeType===Node.TEXT_NODE&&(n=function(e){if("object"!=typeof e)throw new Error(`isEmptyTextNode: Expected argument node of type object, ${typeof e} given.`);return/^\s*$/.test(e.textContent)}(e)),!n){const n=$l("span");this.sourceNodeByInspectorNodeLookup.set(n,e),this.sourceNodeByInspectorNodeLookup.set(e,n);let r=null;if(Ll(e))e.nodeType===Node.COMMENT_NODE?(Rl(n,"adi-comment-node"),"string"==typeof n.innerText&&(n.innerText=`\x3c!-- ${e.textContent} --\x3e`)):(Rl(n,"adi-text-node"),n.textContent=e.textContent);else if(Rl(n,"adi-normal-node"),e.nodeType!==Node.DOCUMENT_NODE){const i=Array.from(e.attributes).filter((e=>!!this.isInstanceViewer||"style"!==e.name)).map((e=>`${e.name}="${e.value}"`)).join(" ");n.textContent=`<${e.nodeName.toLowerCase()}${i?` ${i}`:""}>`,t&&(r=$l("span"),Rl(r,"adi-end-node"),r.textContent=`</${e.nodeName.toLowerCase()}>`)}else n.textContent=e.nodeName.toLowerCase();return i.appendChild(n),e.nodeName.startsWith("FX-")&&(n.classList.add("fore-node"),n.classList.add(e.nodeName.toLowerCase())),r&&(i.appendChild(r),e.nodeName.startsWith("FX-")&&r.classList.add("fore-node")),i}return null}drawDOM(e,t,n){if("object"!=typeof e)throw new Error(`drawDOM: Expected argument root of type object, ${typeof e} given.`);let r=null,i=!0;const a=t.nodeName.startsWith("FX-")?`adi-node ${node.nodeName.toLowerCase()}`:"";n&&-1!==this.options.nodeTypes.indexOf(e.nodeType)&&(t.innerHTML="",r=this.newTreeNode(e),this.hasRequiredNodes(e)&&(r.appendChild($l("ul",{"data-open":!0,class:a})),Rl(r.querySelector(".adi-trigger"),"opened")),t.appendChild(r),t=t.querySelector("ul"));for(let n=0,s=e.childNodes.length;n<s;n+=1){const s=e.childNodes[n],o=this.hasRequiredNodes(s);if(-1!==this.options.nodeTypes.indexOf(s.nodeType)&&(r=this.newTreeNode(s),r)){if(o&&(i=!this.options.foldText||!Ll(s,!0),"HEAD"===s.nodeName&&(i=!1),"SELECT"===s.nodeName&&(i=!1),"FX-INSTANCE"===s.nodeName&&(i=!1),s.nodeType===Node.DOCUMENT_NODE?r.appendChild($l("ul",{"data-open":i,class:a})):r.insertBefore($l("ul",{"data-open":i,class:a}),r.lastChild),Rl(r.querySelector(".adi-trigger"),i?"opened":"closed")),t.appendChild(r),this.getSelected()===s){const e=r.querySelector("span.adi-normal-node");e?.classList?.add("adi-active-node"),this.activeElement=e,r.scrollIntoView({block:"nearest",behavior:"instant"})}o&&this.drawDOM(s,r.querySelector("ul"),!1)}}}toggleOptions(){-1!==this.optsView.className.indexOf("adi-hidden")?Ml(this.optsView,"adi-hidden"):(Rl(this.optsView,"adi-hidden"),this.attrView.querySelector(".adi-content").innerHTML="",this.refreshUI(),this.drawDOM(document,this.domView.querySelector(".adi-tree-view"),!0),this.options.saving?this.saveOptions():window.localStorage.removeItem("ADI.options"))}drawUI(e){this.uiView=$l("div",{id:"adi-wrapper",class:this.options.transparent?"transparent":""}),this.domView=$l("div",{id:"adi-dom-view"});const t=$l("div",{class:"adi-content",id:"detailsView"}),n=$l("ul",{class:"adi-tree-view"}),r=$l("div",{class:"adi-path-wrap"}),i=$l("span",{class:"adi-path-left"}),a=$l("span",{class:"adi-path-right"});this.menuView=$l("div",{id:"adi-panel"});const s=$l("div",{class:"adi-menu-wrap"}),o=$l("a",{class:"adi-menu-config",title:"Settings"}),l=$l("a",{class:"adi-menu-lookup",title:"Lookup tool"});if(this.optsView=function(){const e=$l("div",{id:"adi-opts-view",class:"adi-hidden"}),t=$l("span",{class:"adi-opt-heading"}),n=$l("span",{class:"adi-opt-heading"}),r=$l("span",{class:"adi-opt-close"});return t.textContent="General options",n.textContent="Observed nodes",e.appendChild(t),e.appendChild(Ul("saving","Enable saving of settings")),e.appendChild(Ul("makeVisible","Scroll to the active element in DOM View")),e.appendChild(Ul("omitEmptyText","Hide empty text nodes")),e.appendChild(Ul("foldText","Fold the text nodes")),e.appendChild(Ul("transparent","Enable transparent background")),e.appendChild(n),e.appendChild(Ul("nodeTypes-3","Text node")),e.appendChild(Ul("nodeTypes-8","Comment node")),e.appendChild(r),e}(),t.appendChild(n),this.domView.appendChild(this.menuView),this.domView.appendChild(t),r.appendChild(i),r.appendChild(a),s.appendChild(l),s.appendChild(o),this.menuView.appendChild(r),this.menuView.appendChild(s),this.uiView.appendChild(this.optsView),this.uiView.appendChild(this.domView),!this.isInstanceViewer){this.attrView=$l("div",{id:"adi-attr-view"});const e=$l("div",{class:"adi-content"});this.attrView.appendChild(e),this.uiView.appendChild(this.attrView)}e.appendChild(this.uiView),this.refreshUI(!0)}refreshUI(e){null!==this.uiView&&(e&&this.loadOptions(),e&&(this.optsView.querySelector('[data-opt="transparent"]').checked=this.options.transparent,this.optsView.querySelector('[data-opt="saving"]').checked=this.options.saving,this.optsView.querySelector('[data-opt="omitEmptyText"]').checked=this.options.omitEmptyText,this.optsView.querySelector('[data-opt="makeVisible"]').checked=this.options.makeVisible,this.optsView.querySelector('[data-opt="foldText"]').checked=this.options.foldText,this.optsView.querySelector('[data-opt="nodeTypes-3"]').checked=-1!==this.options.nodeTypes.indexOf(3),this.optsView.querySelector('[data-opt="nodeTypes-8"]').checked=-1!==this.options.nodeTypes.indexOf(8)),this.uiView.className=this.options.transparent?"transparent":"",this.domView.querySelector(".adi-content").style.height=`${this.domView.clientHeight}px`,this.isInstanceViewer||(this.attrView.querySelector(".adi-content").style.height=this.attrView.clientHeight-this.menuView.clientHeight+"px"),Rl(this.uiView,this.options.align))}toggleVisibilityUI(){null!==this.uiView&&(this.uiView.style.display=this.options.visible?"none":"block",this.options.visible=!this.options.visible,this.saveOptions())}drawAttrs(e){if(this.isInstanceViewer)return;const t=this.attrView.querySelector(".adi-content");t.innerHTML="";const n=document.createElement("header");n.innerText="Attributes",t.appendChild(n),[...e.attributes].forEach((e=>{"style"!==e.name&&t.appendChild(function(e,t){const n=$l("span",{class:"adi-attr"});switch(e.toLowerCase()){case"defaultaction":n.innerHTML=`<label>${e}: <select data-attr="${e}" value="${t}"><option>perform</option><option>cancel</option></label>`;break;case"delay":n.innerHTML=`<label>${e}: <input type="number" data-attr="${e}" value="${t}" readonly="readonly"></label>`;break;default:n.innerHTML=`<label>${e}: <input type="text" data-attr="${e}" value="${t}" readonly="readonly"></label>`}return n}(e.name,e.value))}))}changeAttribute(e){const t=e?e.target:window.event.srcElement,n=t.getAttribute("data-attr"),r=t.value,i=this.getSelected();""===r?i.removeAttribute(n):i.setAttribute(n,r)}changeOption(e){const t=e?e.target:window.event.srcElement,n=t.getAttribute("data-opt"),r=t.checked;if(-1!==n.indexOf("nodeTypes")){const e=parseInt(n.match(/\d+/)[0],10);r?this.options.nodeTypes.push(e):this.options.nodeTypes.splice(this.options.nodeTypes.indexOf(e),1)}else this.options[n]=r}processKey(e){if(272===((e=e||window.event).keyCode||e.which))this.toggleVisibilityUI()}verticalResize(e){if(!this.vertResizing)return;e=e||window.event,document.documentElement.style.cursor="e-resize";const t=this.options.width+this.xPos-e.clientX;t>=this.options.minWidth&&(this.options.width=t,this.xPos=e.clientX,this.refreshUI(),this.saveOptions())}horizontalResize(e){if(!this.horizResizing)return;e=e||window.event,document.documentElement.style.cursor="n-resize";const t=Math.floor(e.clientY/this.uiView.clientHeight*100);t>=this.options.minSplit&&t<=100-this.options.minSplit&&(this.options.split=t,this.refreshUI(),this.saveOptions())}processExecuteAction(e){this.refreshUI()}handleActive(e){let t=e?e.detail?.target||e.target:window.event.srcElement;const n=this.domView.querySelector(".adi-active-node");if(n&&Ml(n,"adi-active-node"),!t||t.nodeType===Node.DOCUMENT_NODE)return;if(t&&t.classList&&t.classList.contains("adi-end-node")&&(t=t.parentNode.querySelector(".adi-normal-node")),this.activeElement=t,Rl(t,"adi-active-node"),this.options.makeVisible){this.domView.querySelector(".adi-content").scrollIntoView({block:"center",behavior:"instant"})}const r=this.getSelected();if(this.drawAttrs(r),r&&"function"==typeof r.getModelItem&&r.getModelItem()?.node){let e=r.modelItem.node;e?.nodeType===Node.ATTRIBUTE_NODE&&(e=e.ownerElement),window.document.dispatchEvent(new CustomEvent("log-active-element",{detail:{target:e}}))}}highlightElement(e){let t=e?e.target:window.event.srcElement;t.classList.contains("adi-end-node")&&(t=t.parentNode.querySelector(".adi-normal-node"));const n=this.sourceNodeByInspectorNodeLookup.get(t);n&&n.ownerDocument===window.document&&n&&("mouseover"===e.type?(this.styleBackup=n.getAttribute("style")||"",n.setAttribute("style",`outline: 2px solid blue; ${this.styleBackup}`)):""===this.styleBackup?n.removeAttribute("style"):n.setAttribute("style",this.styleBackup))}handleLookup(e){const t=e?e.detail?.target||e.target:window.event.srcElement;if(!this.document.contains(t))return;if(t.nodeType===Node.DOCUMENT_NODE)return;if(-1!==t.className.indexOf("adi-menu-lookup"))return this.elemLookup?(Ml(t,"adi-active"),this.elemLookup=!1,this.removeEvent(document.body,"mouseover",this.handleLookup,!0),this.removeEvent(document.body,"mouseout",this.handleLookup,!0),void this.removeEvent(document.body,"click",this.handleLookup,!0)):(Rl(t,"adi-active"),this.elemLookup=!0,this.addEventDelegate(document.body,"mouseover",this.handleLookup,!1,"*",!0,"adi-wrapper"),this.addEventDelegate(document.body,"mouseout",this.handleLookup,!1,"*",!0,"adi-wrapper"),void this.addEventDelegate(document.body,"click",this.handleLookup,!1,"*",!0,"adi-wrapper"));if("mouseover"===e.type)return this.styleBackup=t.getAttribute("style")||"",void t.setAttribute("style",`outline: 1px dashed red; ${this.styleBackup}`);if("mouseout"===e.type)return void t.setAttribute("style",this.styleBackup);this.elemLookup=!1,Ml(this.menuView.querySelector(".adi-menu-lookup"),"adi-active"),t.setAttribute("style",this.styleBackup),this.removeEvent(document.body,"mouseover",this.handleLookup,!0),this.removeEvent(document.body,"mouseout",this.handleLookup,!0),this.removeEvent(document.body,"click",this.handleLookup,!0),function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1}(e);const n=this.sourceNodeByInspectorNodeLookup.get(t);if(!n)return;if(n&&n.click(),!n.parentNode)return;let r,i=n.parentNode;for(i.querySelector("ul")&&i.querySelector("ul").setAttribute("data-open","true");i!==this.domView.querySelector(".adi-content");)-1!==i.className.indexOf("adi-node")&&(r=i.querySelector(".adi-trigger"),r&&(Ml(r,"closed"),Rl(r,"opened")),i=i.parentNode,i.setAttribute("data-open","true")),i=i.parentNode;this.options.makeVisible&&n.scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"}),t.scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"})}addEventDelegate(e,t,n,r,i,a,s){const o=e=>{const t=e?e.target:window.event.srcElement,r=i.substr(1);let a=!1;if(s){let e=t;for(;e!==document;){if(e.id===s)return;e=e.parentNode}}a=0===i.indexOf("#")?t.id===r:0===i.indexOf(".")?-1!==t.className.indexOf(r):"*"===i||t.nodeName.toLowerCase()===i,a&&n(e)};a&&this.delegatedEvents.push({handle:o,elem:e,fn:n,evt:t}),e.addEventListener(t,o,r)}removeEvent(e,t,n,r){if("object"!=typeof e)throw new Error(`addEvent: Expected argument elem of type object, ${typeof e} given.`);let i=null;if(r)for(let r=0,a=this.delegatedEvents.length;r<a;r+=1)if(i=this.delegatedEvents[r],i.elem===e&&i.evt===t&&i.fn===n){n=i.handle,this.delegatedEvents.splice(r,1);break}}registerEvents(){const e=()=>{if("#document"!==this.instanceId){const e=window.document.querySelector(`#${this.instanceId}`);this.document=e.getInstanceData()}this.drawDOM(this.document,this.domView.querySelector(".adi-tree-view"),!0)};document.addEventListener("instance-loaded",e),document.addEventListener("value-changed",e),document.addEventListener("ready",e),document.addEventListener("mouseup",(()=>{document.documentElement.style.cursor="default",this.vertResizing=!1,this.horizResizing=!1}),!1),document.addEventListener("mousemove",(e=>this.verticalResize(e)),!1),document.addEventListener("mousemove",(e=>this.horizontalResize(e)),!1),window.addEventListener("resize",(e=>this.refreshUI(e)),!1),document.addEventListener("keypress",(e=>this.processKey(e)),!1),document.addEventListener("log-active-element",(e=>this.handleLookup(e)),!1);this.addEventDelegate(this.domView,"click",(e=>{const t=e?e.target:window.event.srcElement,n=t.parentNode.querySelector("ul");"true"===n.getAttribute("data-open")?(Ml(t,"opened"),Rl(t,"closed"),n.setAttribute("data-open","false")):(Ml(t,"closed"),Rl(t,"opened"),n.setAttribute("data-open","true"))}),!1,".adi-trigger"),this.addEventDelegate(this.domView,"click",(e=>this.handleActive(e)),!1,".adi-normal-node"),this.addEventDelegate(this.domView,"click",(e=>this.handleActive(e)),!1,".adi-end-node"),this.addEventDelegate(this.domView,"mouseover",(e=>{Rl((e?e.target:window.event.srcElement).parentNode.querySelector(".adi-normal-node"),"hover")}),!1,".adi-end-node"),this.addEventDelegate(this.domView,"mouseout",(e=>{Ml((e?e.target:window.event.srcElement).parentNode.querySelector(".adi-normal-node"),"hover")}),!1,".adi-end-node"),this.addEventDelegate(this.domView,"mouseover",(e=>this.highlightElement(e)),!1,".adi-end-node"),this.addEventDelegate(this.domView,"mouseover",(e=>this.highlightElement(e)),!1,".adi-normal-node"),this.addEventDelegate(this.domView,"mouseout",(e=>this.highlightElement(e)),!1,".adi-end-node"),this.addEventDelegate(this.domView,"mouseout",(e=>this.highlightElement(e)),!1,".adi-normal-node"),this.menuView.querySelector(".adi-menu-lookup").addEventListener("click",(e=>this.handleLookup(e)),!1),document.addEventListener("handle-active",(e=>{if(e.detail.selected===this.getSelected())return;const{selected:t}=e.detail,n=this.sourceNodeByInspectorNodeLookup.get(t);if(this.options.makeVisible){const e=this.domView.querySelector(".adi-content");(n.offsetTop>=e.clientHeight||n.offsetTop<=e.scrollTop)&&(e.scrollTop=n.offsetTop-Math.floor(e.clientHeight/2))}this.drawAttrs(this.getSelected())})),document.addEventListener("execute-action",(e=>this.processExecuteAction(event)),{capture:!0}),this.addEventDelegate(this.optsView,"change",(e=>this.changeOption(e)),!1,"input"),this.addEventDelegate(this.optsView,"click",(e=>this.toggleOptions(e)),!1,".adi-opt-close"),this.menuView.querySelector(".adi-menu-config").addEventListener("click",(e=>this.toggleOptions(e)),!1),this.isInstanceViewer||this.addEventDelegate(this.attrView,"change",this.changeAttribute,!1,"input")}}class Gl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.instanceName=null,this.instance=null}connectedCallback(){this.render(),this.instance?this.shadowRoot.querySelector("#focus-button").style="display: none":this.setupFocusButton()}setInstance(e){this.instance=e}disconnectedCallback(){this.adiInstance=null}setupFocusButton(){let e="",t=null;const n=()=>{""===e?t.removeAttribute("style"):t.setAttribute("style",e),t=null},r=r=>{const{target:i}=r;if("mouseover"===r.type)return e=i.getAttribute("style")||"",i.setAttribute("style",`outline: 2px solid blue; ${e}`),void(t=i);t&&n()},i=this.shadowRoot.querySelector("#focus-button");let a=!1;const s=window.document.head.appendChild(document.createElement("style")),o=()=>{a=!1,window.document.body.removeEventListener("click",l),i.classList.remove("selected-btn"),s.innerHTML="",document.body.style.cursor="auto",window.document.body.removeEventListener("mouseover",r),window.document.body.removeEventListener("mouseout",r),t&&n()},l=e=>{o(),e.preventDefault(),e.stopPropagation(),e.target!==i&&window.document.dispatchEvent(new CustomEvent("log-active-element",{detail:{target:e.target}}))},c=()=>{a=!0,i.classList.add("selected-btn"),document.body.style.cursor="crosshair",window.document.body.removeEventListener("click",l),s.innerHTML='fx-fore::before { color:blue; content: "Sub fore!" } fx-fore {border: solid 1px blue}',window.document.body.addEventListener("click",l),window.document.body.addEventListener("mouseover",r),window.document.body.addEventListener("mouseout",r)};window.document.addEventListener("keyup",(e=>{a&&"Escape"===e.code?o():!a&&"KeyI"===e.code&&e.ctrlKey&&c()})),i.addEventListener("click",(e=>{a?o():c(),e.preventDefault(),e.stopPropagation()}))}render(){this.shadowRoot.innerHTML="\n          <style>\n              \n      @import '../../resources/fore.css';\n      \n        :host {\n          display:block;\n          background:transparent;\n        }\n        body {\n            -webkit-animation: bugfix infinite 1s;\n            font-size:1rem;\n        }\n        \n        @-webkit-keyframes bugfix {\n            from {\n                padding: 0\n            }\n            to {\n                padding: 0\n            }\n        }\n        .adi-content {\n            position: relative;\n            overflow: auto;\n            box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            height: 100% !important;\n            padding:0;\n            font-size:0.8em;\n        }\n        .adi-content header{\n            padding:0.5rem;\n            // background:rgba(255, 255, 255, 0.2);\n            border-bottom:2px solid #ddd;\n            border-collapse:collapse;\n        }\n        .adi-content > * {\n            padding:0 0.25em;\n        }\n        \n        #adi-wrapper {\n            top: 0;\n            font-family: \"Segoe UI\", Arial;\n            font-size: 1.1rem;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            position:relative;\n            height:calc(100% - 8rem);\n            display:flex;\n        }\n        \n        #adi-wrapper.left {\n            left: 0\n        }\n        \n        #adi-wrapper.right {\n            right: 0\n        }\n        \n        #adi-wrapper.transparent {\n            background: rgba(250, 250, 250, 0.9)\n        }\n        \n        #adi-panel {\n            position:fixed;\n            top:0;\n            /*bottom: 0;*/\n            right: 0;\n            height: 24px;\n            background: #d4d4d4;\n            border-top: 1px solid #bbc5c9\n        }\n        \n        #adi-panel .adi-path-wrap {\n            position:absolute;\n            bottom: 0;\n            left: 0;\n            width: 80%;\n            height: 24px;\n            padding: 0 13px 0 18px;\n            line-height: 24px;\n            overflow: hidden;\n            box-sizing: border-box;\n            -moz-box-sizing: border-box\n        }\n        \n        #adi-panel .adi-path-wrap.adi-overflowing .adi-path-left, \n        #adi-panel .adi-path-wrap.adi-overflowing .adi-path-right {\n            display: block\n        }\n        \n        #adi-panel .adi-path {\n            height: 24px;\n            overflow: hidden;\n            white-space: nowrap\n        }\n        \n        #adi-panel .adi-path-left, #adi-panel .adi-path-right {\n            display: none;\n            position: absolute;\n            top: 0;\n            width: 8px;\n            height: 24px;\n            background-repeat: no-repeat;\n            background-position: center center;\n            opacity: .7\n        }\n        \n        #adi-panel .adi-path-left:hover, #adi-panel .adi-path-right:hover {\n            opacity: 1\n        }\n        \n        #adi-panel .adi-path-left {\n            left: 7px;\n            background-image: url('img/left_shift.png')\n        }\n        \n        #adi-panel .adi-path-right {\n            position:absolute;\n            right: 2px;\n            background-image: url('/resources/scripts/dom-inspector/img/right_shift.png')\n        }\n        \n        #adi-panel .adi-menu-wrap {\n            bottom: 0;\n            right: 24px;\n            width: 50px;\n            height: 24px\n        }\n        \n        #adi-panel .adi-menu-lookup, #adi-panel .adi-menu-config {\n            display: block;\n            float: left;\n            width: 24px;\n            height: 24px;\n            border-left: 1px solid #bbc5c9;\n            background-position: center center;\n            background-repeat: no-repeat;\n            opacity: .7;\n            border-radius: 0\n        }\n        \n        #adi-panel .adi-menu-lookup:hover, #adi-panel .adi-menu-config:hover {\n            background-color: #c5d9d8;\n            opacity: 1\n        }\n        \n        #adi-panel .adi-menu-lookup.adi-active, #adi-panel .adi-menu-config.adi-active {\n            background-color: #fafafa;\n            opacity: 1\n        }\n        \n        #adi-panel .adi-menu-lookup {\n            background-image: url('/resources/scripts/dom-inspector/img/lookup.png')\n        }\n        \n        #adi-panel .adi-menu-config {\n            background-image: url('/resources/scripts/dom-inspector/img/config.png')\n        }\n        \n        \n        \n        #adi-vert-split {\n            position: fixed;\n            top: 0;\n            width: 4px;\n            height: 100%;\n            cursor: e-resize;\n            border-width: 0 1px 0 0;\n            background: #bbc5c9;\n            border-color: #768285;\n            border-style: solid;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n        \n        #adi-vert-split:hover {\n            background: #c5d9d8;\n        }\n        \n        \n        #adi-dom-view {\n            border-right:2px solid #ddd;\n            overflow:auto;\n            flex-grow:3;\n        }\n        \n        #adi-dom-view ul {\n            margin: 0;\n            padding: 0;\n            list-style: none\n        }\n        \n        #adi-dom-view ul[data-open=true] {\n            display: block\n        }\n        \n        #adi-dom-view ul[data-open=false] {\n            display: none\n        }\n        \n        #adi-dom-view ul ul {\n            margin: 4px 0\n        }\n        \n        #adi-dom-view ul li {\n            padding-left: 1em;\n            padding-bottom: 0.125em;\n            margin: 0;\n            padding-top: 0.125em;        \n        }\n        \n        \n        \n        \n        \n        \n        \n        #adi-dom-view .adi-normal-node, \n        #adi-dom-view .adi-end-node {\n            margin-right: 5px;\n            padding: 0 6px 0px;\n            background: #d2e8ff;\n            border-radius: 8px;\n            cursor: default;\n            font-size:0.8rem;\n        }\n        #adi-dom-view .adi-text-node:after, #adi-dom-view .adi-comment-node:after {\n            content: '\"'\n        }\n        \n        #adi-dom-view .adi-text-node:before, #adi-dom-view .adi-comment-node:before {\n            content: '\"'\n        }\n        \n        #adi-dom-view .adi-comment-node {\n            color: #999;\n            font-style: italic\n        }\n        \n        #adi-dom-view .adi-text-node, #adi-dom-view .adi-comment-node {\n            display: block;\n            padding: 3px 8px;\n            color: #444;\n            background: #fff;\n            border-radius: 8px\n        }\n        \n        #adi-dom-view .adi-normal-node:hover, \n        #adi-dom-view .adi-normal-node.hover, \n        #adi-dom-view .adi-end-node:hover, \n        #adi-dom-view .adi-end-node.hover {\n            background: var(--paper-grey-700);\n            color:white;\n        }\n        \n       #adi-dom-view .adi-normal-node:hover ~ span,\n       #adi-dom-view .adi-normal-node.hover ~ span,\n       #adi-dom-view .adi-end-node:hover ~ span,\n       #adi-dom-view .adi-end-node.hover ~ span {\n            background: var(--paper-grey-700);\n            color:white;\n        }\n        \n        #adi-dom-view .adi-normal-node.adi-active-node, \n        #adi-dom-view .adi-end-node.adi-active-node {\n            background: var(--paper-grey-700);\n            color:white;\n        }\n        \n        #adi-dom-view .adi-normal-node.adi-active-node ~ span,\n        #adi-dom-view .adi-end-node.adi-active-node ~ span {\n            background: var(--paper-grey-700);\n            color:white;\n        }\n        \n        \n        \n        \n        \n        \n        #adi-dom-view .adi-trigger {\n            display: inline-block;\n            width: 10px;\n            height: 10px;\n            margin: 0 5px 0 -13px;\n            opacity: .7\n        }\n        \n        #adi-dom-view .adi-trigger.closed {\n            // background: url('/resources/scripts/dom-inspector/img/node_closed.png') no-repeat;\n        }   \n        #adi-dom-view .adi-trigger.closed::before {\n            content:'\\25B8';\n        }\n        \n        #adi-dom-view .adi-trigger.opened {\n            // background: url('/resources/scripts/dom-inspector/img/node_opened.png') no-repeat\n        }\n        #adi-dom-view .adi-trigger.opened::before{\n            content:'\\25BE';\n        }\n        \n        #adi-dom-view .adi-trigger:hover {\n            opacity: 1\n        }\n        \n        #adi-opts-view {\n            position: relative;\n            height: 100%;\n            padding: 0 15px;\n            background: #fff\n        }\n        \n        #adi-opts-view.adi-hidden {\n            display: none\n        }\n        \n        #adi-opts-view .adi-opt-heading, #adi-opts-view .adi-opt {\n            display: block;\n            padding: 5px 0\n        }\n        \n        #adi-opts-view .adi-opt-heading {\n            padding: 20px 0 10px;\n            font-size: 1rem;\n        }\n        \n        #adi-opts-view .adi-opt-heading:first-child {\n            padding-top: 10px\n        }\n        \n        #adi-opts-view .adi-opt input {\n            margin-right: 6px\n        }\n        \n        #adi-opts-view .adi-opt-close {\n            position: absolute;\n            top: 5px;\n            right: 28px;\n            width: 16px;\n            height: 16px;\n            background: url('/resources/scripts/dom-inspector/img/options_close.png') no-repeat;\n            opacity: .7;\n        }\n        \n        #adi-opts-view .adi-opt-close:hover {\n            opacity: 1;\n        }\n        \n        #adi-attr-view {\n            top: 0.5rem;\n            border: 1px solid #ddd;\n            overflow: auto;\n            padding: 0.25em;\n            height: calc(90% - 1em);\n            min-width: 10rem;\n            position: absolute;\n            z-index: 10;\n            right: 0.5rem;\n            background:rgba(255,255,255,0.85);\n        }\n        #adi-attr-view > .adi-content{\n            height:calc(100% - 5em);\n            overflow:auto;\n        }\n        \n        #adi-attr-view .adi-attr {\n            display: block;\n            padding: 0.25em;\n        }\n        \n        #adi-attr-view hr {\n            height: 1px;\n            border: none\n        }\n        \n        #adi-attr-view input[type=text] {\n            width: calc(100% - 0.5em);\n            margin-top: 3px;\n            padding: 2px;\n        }\n        \n        #adi-horiz-split {\n            height: 4px;\n            cursor: n-resize;\n            border-width: 0 0 1px 0;\n            background: #bbc5c9;\n            border-color: #768285;\n            border-style: solid;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n        \n        #adi-horiz-split:hover {\n            background: #c5d9d8;\n        }\n        \n        #adi-dom-view .fore-node{\n            background: var(--paper-blue-700);\n            font-size:1.1em;\n             color:white;\n        }\n        #adi-dom-view .adi-normal-node.fore-node:hover {\n            background: var(--paper-grey-700);\n            color:white;\n        }\n        #adi-dom-view .adi-end-node.fore-node{\n            background: var(--paper-blue-700);\n            font-size:1em;\n            color:white;\n       }\n\n        #adi-dom-view .adi-node .adi-active-node.fore-node,\n        #adi-dom-view .adi-node.action .adi-active-node.fore-node,\n        #adi-dom-view .adi-node.action .adi-active-node.fore-node ~ .adi-end-node\n         {\n            background: var(--paper-grey-700);\n            color:white;\n        }\n        \n        #adi-dom-view .adi-node.fx-fore{\n            background:var(--paper-blue-grey-50); \n        }\n        #adi-dom-view .adi-node.fx-model{\n            background:var(--paper-blue-grey-100); \n            padding:0.25em 0;\n        }       \n               \n        #adi-dom-view .adi-node.action .fore-node {\n            background:var(--paper-blue-grey-100);\n            color:black;\n            font-family:monospace;\n        }\n                    \n        .toggleView{\n            /*width:20px;*/\n            /*height: 20px;*/\n        }\n        input, select{\n            display: block;\n        }\n        header{\n            background:rgba(255, 255, 255, 0.2);\n        }\n\n        .selected-btn { color: orange }\n      \n          </style>\n          \n        <slot name=\"header\"></slot>\n        <button id=\"focus-button\">Focus</button>\n        <slot></slot>\n      \n      ",!this.hasAttribute("instance")||this.getAttribute("instance"),this.adiInstance=new Hl(this.shadowRoot,this.hasAttribute("instance")?this.instance:"#document")}verticalResize(e){if(!this.vertResizing)return;e=e||window.event,document.documentElement.style.cursor="e-resize";const t=this.options.width+this.xPos-e.clientX;t>=this.options.minWidth&&(this.options.width=t,this.xPos=e.clientX,this.refreshUI(),this.saveOptions())}}customElements.get("fx-dom-inspector")||customElements.define("fx-dom-inspector",Gl);class jl extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.instanceElement=null,this.foreSelector=null}connectedCallback(){this.container=this.querySelector(".json-path-picker-container"),this.foreSelector=this.hasAttribute("fore")?this.getAttribute("fore"):"fx-fore",this.render()}render(){const e=this.hasAttribute("instance")?this.getAttribute("instance"):"default";if(!document.querySelector(this.foreSelector))throw new Error(`this '${this.foreSelector}' does not match a fx-fore element`);this.shadowRoot.innerHTML=`\n          <style>\n              \n        @import '../../resources/fore.css';\n      \n        :host {\n          display:block;\n          font-size:0.8em;\n          background:rgba(250, 250, 250, 0.9);\n        }\n        .container{\n            margin-left:1em;\n        }\n        .header{\n            margin-left:0;\n        }\n\n        ::slot[name='header']{\n            margin-left:-1em;\n        }\n        /* Syntax highlighting for JSON objects */\n        ul.json-dict, ol.json-array {\n          list-style-type: none;\n          margin: 0 0 0 1px;\n          border-left: 1px dotted #ccc;\n          padding-left: 2em;\n        }\n        .json-string {\n          // color: #0B7500;\n        }\n        .json-literal {\n          color: #1A01CC;\n          font-weight: bold;\n        }\n        \n        /* Toggle button */\n        a.json-toggle {\n          position: relative;\n          color: inherit;\n          text-decoration: none;\n        }\n        a.json-toggle:focus {\n          outline: none;\n        }\n        a.json-toggle:before {\n          content: "\\25BC"; /* down arrow */\n          position: absolute;\n          display: inline-block;\n          width: 1em;\n          left: -1.2em;\n          font-size:0.8em;\n        }\n        a.json-toggle.collapsed:before {\n          content: "\\25B6"; /* left arrow */\n        }\n        \n        /* Collapsable placeholder links */\n        a.json-placeholder {\n          color: #aaa;\n          padding: 0 1em;\n          text-decoration: none;\n        }\n        a.json-placeholder:hover {\n          text-decoration: underline;\n        }\n        \n        /* Copy path icon */\n        .pick-path {\n          color: lightgray;\n          cursor: pointer;\n          margin-left: 3px;\n        }\n        \n        .pick-path:hover {\n          color: darkgray;\n        }\n        \n      \n          </style>\n          <slot name="header">\n            <header class="header">${e}</header>\n          </slot>\n          <slot></slot>\n          \n          <div class="container"></div>\n      \n      `;const t=document.querySelector(`#${e}`);if(!t||"FX-INSTANCE"!==t.nodeName||"json"!==t.getAttribute("type"))throw new Error(`this '${e}' does not match an fx-instance element or is not of type JSON`);const n=this.shadowRoot.querySelector(".container"),r=t.instanceData;let i=this.json2html(r,{outputWithQuotes:!0});this.isCollapsable(r)&&(i="<a href='#' class=\"json-toggle\"></a>".concat(i)),n.innerHTML=i;this.shadowRoot.querySelectorAll(".json-toggle").forEach((e=>{e.addEventListener("click",this._handleToggleEvent.bind(this))}))}disconnectedCallback(){}_isHidden(e){const t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||"none"===window.getComputedStyle(e).display}_handleToggleEvent(e){const t=e.target;t.classList.toggle("collapsed");const n=this._siblings(t,"ul.json-dict, ol.json-array",(e=>{e.style.display=""===e.style.display||"block"===e.style.display?"none":"block"}));for(let e=0;e<n.length;e+=1)if(this._isHidden(n[e])){const t=n[e].children;let r=0;for(let e=0;e<t.length;e+=1)"LI"===t[e].tagName&&(r+=1);const i=r+(r>1?" items":" item");n[e].insertAdjacentHTML("afterend",'<a href class="json-placeholder">'.concat(i,"</a>"))}else this._siblings(n[e],".json-placeholder",(e=>e.parentNode.removeChild(e)));e.stopPropagation(),e.preventDefault()}_siblings(e,t,n){const r=[];for(let n=0;n<e.parentNode.children.length;n+=1){const i=e.parentNode.children[n];i!==e&&"string"==typeof t&&i.matches(t)&&r.push(i)}if(n&&"function"==typeof n)for(let e=0;e<r.length;e+=1)n(r[e]);return r}json2html(e,t){let n="";if("string"==typeof e){const t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");this.isUrl(t)?n+='<a href="'.concat(t,'" class="json-string">').concat(t,"</a>"):n+='<span class="json-string">"'.concat(t,'"</span>')}else if("number"==typeof e)n+='<span class="json-literal">'.concat(e,"</span>");else if("boolean"==typeof e)n+='<span class="json-literal">'.concat(e,"</span>");else if(null===e)n+='<span class="json-literal">null</span>';else if(e instanceof Array)if(e.length>0){n+='[<ol class="json-array">';for(let r=0;r<e.length;r+=1)n+='<li data-key-type="array" data-key="'.concat(r,'">'),this.isCollapsable(e[r])&&(n+='<a href="#" class="json-toggle"></a>'),n+=this.json2html(e[r],t),r<e.length-1&&(n+=","),n+="</li>";n+="</ol>]"}else n+="[]";else if("object"===this._typeof(e)){let r=Object.keys(e).length;if(r>0){n+='{<ul class="json-dict">';for(const i in e)if(e.hasOwnProperty(i)){n+='<li data-key-type="object" data-key="'.concat(i,'">');const a=t.outputWithQuotes?'<span class="json-string">"'.concat(i,'"</span>'):i;this.isCollapsable(e[i])?n+="<a href='#' class=\"json-toggle\">".concat(a,"</a>"):n+=a,n+=": ".concat(this.json2html(e[i],t)),r-=1,r>0&&(n+=","),n+="</li>"}n+="</ul>}"}else n+="{}"}return n}isUrl(e){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#:.?+=&%@!\-/]))?/.test(e)}_typeof(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?this._typeof=function(e){return typeof e}:this._typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},this._typeof(e)}isCollapsable(e){return e instanceof Object&&Object.keys(e).length>0}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,n){"data"===e&&(this.jsonTextarea.value=n,this.updateTree(n))}updateTree(e){try{this.data=JSON.parse(e),this.treeView.innerHTML="",this.treeView.appendChild(this.createTreeView(this.data,""))}catch(e){alert("Invalid JSON")}}createTreeView(e,t){const n=document.createElement("ul");if(n.classList.add("jp-ul"),Array.isArray(e))e.forEach(((e,r)=>{const i=document.createElement("li");i.classList.add("jp-li");const a=`${t}[${r}]`;i.appendChild(this.createItemView(a,e)),n.appendChild(i)}));else if("object"==typeof e&&null!==e)Object.keys(e).forEach((r=>{const i=document.createElement("li");i.classList.add("jp-li");const a=`${t}.${r}`;i.appendChild(this.createItemView(a,e[r])),n.appendChild(i)}));else{const r=document.createElement("li");r.classList.add("jp-li"),r.appendChild(this.createItemView(t,e)),n.appendChild(r)}return n}}customElements.get("fx-json-instance")||customElements.define("fx-json-instance",jl);class Xl extends HTMLElement{static get properties(){return{fore:{type:Object,description:"The fx-fore element the devtools are attached to"},instances:{type:Array,description:"Instances of selected Fore element"},selector:{type:String,description:"optional selector to attach to a certain fx-fore element with given id"}}}constructor(){super(),this.attachShadow({mode:"open"}),Object.keys(this.constructor.properties).forEach((e=>{const t=this.constructor.properties[e],n=t.attribute||e,r=this.getAttribute(n)||t.default,i=t.type(r);this[e]=i})),this.isResizing=!1,this.lastY=0,this.defaultHeight="40vh",this.buttonByInstanceId=new Map;const e=e=>{this.fore=e,this.instances=[...this.fore.getModel().instances];const t=this.shadowRoot.querySelector(".instances header");t.textContent="Data ",this.instances.forEach((e=>{const n=document.createElement("button");n.setAttribute("type","button"),n.textContent=e.id,t.appendChild(n),this.buttonByInstanceId.set(e.id,n),n.addEventListener("click",(()=>this.selectInstance(e.id)))})),this.instances.length&&this.selectInstance(this.instances[0].id)},t=document.querySelector("fx-fore");t&&(t.inited?e(t):t.addEventListener("model-construct-done",(()=>e(t)))),window.document.addEventListener("log-active-element",(t=>{const n=t?t.detail?.target||t.target:window.event.srcElement,r=n.nodeType===Node.DOCUMENT_NODE?null:n.closest("fx-fore");r&&e(r);const i=this.instances.find((e=>"xml"===e.type&&e.instanceData.contains(n)));i&&this.selectInstance(i.id)}))}_getInstanceForTarget(e){this.instances.forEach((t=>"xml"===t.type&&t.instanceData.contains(e)||"json"===t.type?t:void 0))}selectInstance(e){const t=this.buttonByInstanceId.get(e);if(!t)return;if(t.classList.contains("selected-btn"))return;const n=this.shadowRoot.querySelector(".selected-btn");n&&n.classList.remove("selected-btn"),t.classList.add("selected-btn");const r=this.shadowRoot.querySelector(".instance-panel");r.innerHTML="",this.instances=[...this.fore.querySelectorAll("fx-instance")];const i=Array.from(this.instances).find((t=>t.id===e)),a=this._renderInstancePanel(i);r.append(a)}connectedCallback(){this.render()}_startResize(e){this.isResizing=!0,this.lastY=e.clientY}_resizePanel(e){if(!this.isResizing)return;const t=e.clientY-this.lastY;this.style.height=this.offsetHeight-t+"px",this.lastHeight=this.style.height,this.lastY=e.clientY}_stopResize(e){e.preventDefault(),e.stopPropagation(),this.isResizing=!1,document.body.style.height="inherit",document.body.style.width="inherit";const t=document.body.scrollHeight+this.offsetHeight;document.body.style.height=`${t}px`}render(){const e=`\n        <section class="wrapper">\n            <slot></slot>\n            <details class="fx-devtools" open>\n                <div class="resizer"></div>\n                <summary>Fore Glass \n                    <div>\n                        <svg preserveAspectRatio="xMidYMid meet" focusable="true" style="width: 24px;height: 24px; margin-bottom:-1px;" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">\n                            <g role="button" id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"></path></g>\n                        </svg>\n                        <button class="optionsBtn" id="optionsTrigger">&#9881;</button>                    \n                    </div>\n                </summary>\n                <section class="panels">\n                    <section class="log">\n                        <fx-action-log selector="${this.selector}"></fx-action-log>\n                    </section>\n                    <section class="dom">\n                        <fx-dom-inspector>\n                            <header slot="header">Document</header>\n                        </fx-dom-inspector>\n                    </section>\n                    <section class="instances">\n                        <header></header>\n                        <div class="instance-panel">\n                        </div>\n                    </section>\n                    <section id="options">\n                        <fx-log-settings></fx-log-settings>\n                    </section>\n                </section>\n            </details>\n        </section>\n      `;this.shadowRoot.innerHTML=`\n          <style>\n              \n      @import '../../resources/fore.css';\n      \n        :host {\n          display:block;\n          position:fixed;\n          bottom:0;\n          left:0;\n          width:100vw;\n          height:var(--fx-devtools-height);\n          font-style:inherit;\n          font-family: 'Verdana' , 'Sans';\n          font-size:1em;\n          max-width:100vw;\n          height:3em;\n        }\n        :host(.open){\n            height:40vh;\n        }\n        \n        fx-action-log{\n            height:100%;\n        }\n        fx-dom-inspector{\n            max-height:100%;\n            height:100%;\n            position:relative;\n        }\n        body {\n        }\n        details{\n            height:100%;\n            background:#ebf6ff;\n        }\n        .dom{\n            width:45%;\n            border-left:1px solid #999;\n            position:relative\n        }\n        .dom fx-minimap{\n            position:absolute;\n            right:0;\n            top:0;\n            width:5rem;\n            height:6rem;\n        }\n        header{\n            padding:0.5rem;\n            border-bottom:2px solid #ddd;\n            font-size:1rem;\n        }\n        header button{\n            margin:0 0.5em;\n            border:thin solid #999;\n            padding:0 0.5em;\n            cursor:pointer;\n        }\n        header button:hover{\n            background:white;\n        }\n        \n        header button.selected-btn{\n            background:steelblue;\n            color:white;\n        }\n        .instances{\n            width:35%;\n            border-left:1px solid #999;\n        }\n        .instance-panel{\n            height:100%;\n            overflow:auto;\n        }\n        .panels{\n            display:grid;\n            grid-template-columns:20% 50% 30%;\n            height:100%;\n            width:100%;\n            max-height:100%;\n            border-top:thin solid #ddd;\n        }\n        .panels > section {\n            min-height:20rem;\n/*\n            background:#efefef;\n*/\n            position:relative;\n            display:inline-block;\n            height:100%;\n            width:auto;\n        }\n        #options{\n            display:none;\n        }\n        #options.open{\n            position:absolute;\n            z-index:10;\n            left:0;\n            top:3em;\n            height:100%;\n            display:block;\n            padding:0;\n            background:rgba(255,255,255,0.95);\n            width:100%;\n        }\n        .optionsBtn{\n            font-size:2rem;\n        }\n        details[open] .optionsBtn{\n            display:inline;\n        }\n        .resizer{\n            width:100vw;\n            height:6px;\n            background:rgba(215,220,235,0.3);\n            cursor: ns-resize;\n            position:absolute;\n            top:0;\n            \n        }\n        summary{\n            height:3rem;\n            padding:0 1em;\n            border-bottom:2px solid #ddd;\n            display:flex;\n            justify-content:space-between;\n            align-items:center;\n            color:rgba(0,0,0,0.7);\n            background: rgba(235, 255, 255, 0.2);\n            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n            backdrop-filter: blur(5px);\n            -webkit-backdrop-filter: blur(5px);\n            border: 1px solid rgba(255, 255, 255, 0.3);\n            \n            color:white;\n            font-weight:300;\n                      background: rgb(119,119,119);\n          background: linear-gradient(90deg, rgba(0,85,159,0.75) 0%, rgba(56,154,252,0.5) 50%, rgba(255,255,255,0.1) 100%);\n\n        }\n        summary button{\n            padding:0;\n            border:0;\n            background:transparent;\n        }\n        .wrapper{\n            height:100%;\n        }\n        .vertDevider{\n            background:#ddd;\n            width:4px;\n            height:100%;\n            cursor: ew-resize;\n        }\n      \n          </style>\n          ${e}\n      `,this.resizer=this.shadowRoot.querySelector(".resizer"),this.resizer.addEventListener("mousedown",this._startResize.bind(this)),document.addEventListener("mousemove",this._resizePanel.bind(this)),document.addEventListener("mouseup",this._stopResize.bind(this));const t=this.shadowRoot.querySelector("#optionsTrigger");t.addEventListener("click",(()=>{const e=this.shadowRoot.querySelector("#options");e.classList.toggle("open"),e.classList.contains("open")?t.style.background="lightsteelblue":t.style.background="transparent"}));this.shadowRoot.querySelector(".fx-devtools").addEventListener("click",(e=>{"DIV"===e.target.nodeName&&e.target.classList.contains("resizer")||(e.target.parentNode.open?(this.removeAttribute("open"),this.lastHeight=this.style.height,this.style.height="3em"):(this.setAttribute("open",""),this.style.height=this.lastHeight?this.lastHeight:"40vh"))})),this.classList.add("open")}_handleOpen(e){document.body.style.height=""}_renderInstancePanel(e){if("xml"===e.type){const t=document.createElement("fx-dom-inspector");return t.setInstance(e),t.setAttribute("instance",e.id),t}if("json"===e.type){const t=document.createElement("fx-json-instance");t.setAttribute("instance",e.id);const n=document.createElement("span");return n.setAttribute("slot","header"),t.append(n),t}}}customElements.get("fx-devtools")||customElements.define("fx-devtools",Xl);class ql extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.src=""}connectedCallback(){this.src=this.getAttribute("src");const e=`\n          <fx-fore src="${this.src}">\n          </fx-fore>\n          <slot id="default"></slot>\n        `;this.shadowRoot.innerHTML=`\n            <style>\n                \n          :host {\n            display:block;\n          }\n        \n            </style>\n            ${e}\n        `;this.shadowRoot.querySelector("#default").addEventListener("slotchange",(async e=>{const t=e.target.assignedElements().filter((e=>"LINK"===e.nodeName.toUpperCase()));if(!t)return;const n=[...document.styleSheets].map((e=>{if(t.find((t=>t.href===e.href)))try{return[...e.cssRules].map((e=>e.cssText)).join("")}catch(e){}})).filter(Boolean).join("\n"),r=new CSSStyleSheet;r.replaceSync(n),this.shadowRoot.adoptedStyleSheets=[r]}));const t=this.querySelector("fx-action");if(t){const e=t.cloneNode(!0);this.removeChild(t);this.shadowRoot.querySelector("fx-fore").appendChild(e)}}}customElements.get("fore-component")||customElements.define("fore-component",ql);class Vl extends gl{constructor(){super(),this.inited=!1,this.attachShadow({mode:"open"})}static get properties(){return{...gl.properties,accept:{type:String},fileNameExpr:{type:String},mimetypeExpr:{type:String}}}connectedCallback(){this.updateEvent="change",this.accept=this.hasAttribute("accept")?this.getAttribute("accept"):"",this.label=this.hasAttribute("label")?this.getAttribute("label"):null;this.shadowRoot.innerHTML=`\n            <style>\n                \n            :host{\n                display:inline-block;\n            }\n        \n            </style>\n            ${this.renderHTML(this.ref)}\n        `,this.widget=this.getWidget(),this.addEventListener("mousedown",(e=>{Yo.isWidget(e.target)||e.target?.classList.contains("fx-hint")||e.preventDefault(),this.widget.focus()}));let e=this.widget;this.debounceDelay?e.addEventListener(this.updateEvent,bl(this,(()=>{this._importUploadedContent()}),this.debounceDelay)):e.addEventListener(this.updateEvent,(async e=>{this._importUploadedContent(e)})),this.boundInitialized=!1,this.fileNameExpr=this.getAttribute("filename"),this.mimetypeExpr=this.getAttribute("mimetype")}async _importUploadedContent(e){const t=e.target.files[0];this.evalInContext();const n=Ro(this.fileNameExpr,this.nodeset,this.getOwnerForm());n&&(this.fileName=n.nodeValue=t.name),this.mimetype=t.type;const r=Ro(this.mimetypeExpr,this.nodeset,this.getOwnerForm());r&&(r.nodeValue=this.mimetype);let i=await this._readFile(t);if(t.type.endsWith("xml")){i=(new DOMParser).parseFromString(i,"application/xml").firstElementChild}this.setValue(i)}async _readFile(e){return new Promise(((t,n)=>{const r=new FileReader,i=e.type.startsWith("text/"),a=i?"readAsText":"readAsDataURL";r.onload=()=>{const e=r.result;if(i)t(e);else{const n=e.split(",")[1];t(n)}},r.onerror=()=>n(new Error("Error reading file")),r[a](e)}))}setValue(e){this.value=e;const t=this.getModelItem();if(this.mimetype.endsWith("xml"))this.nodeset.textContent="",this.nodeset.append(document.importNode(e,!0));else if(t.value=e,this.mimetype.startsWith("text/")){const t=this.nodeset.ownerDocument.createCDATASection(e);this.nodeset.textContent="",this.nodeset.append(t)}else this.nodeset.textContent="",this.nodeset.append(e);this.getAttribute("class")?this.classList.add("visited"):this.setAttribute("class","visited"),t?.readonly||(this.modelItem instanceof Jo&&!this.modelItem?.boundControls.includes(this)&&this.modelItem.boundControls.push(this),this.getModel(),Yo.dispatch(this,"value-changed",{path:this.modelItem.path,value:this.modelItem.value,oldvalue:"",instanceId:this.modelItem.instanceId,foreId:this.getOwnerForm().id}),this.getModel().updateModel(),this.getOwnerForm().refresh(!0))}renderHTML(e){return`\n            ${this.label?`${this.label}`:""}\n            <slot></slot>\n            <input type="file" ${""!==this.accept?`accept="${this.accept}"`:""}>\n            <fx-setvalue id="setvalue" ref="${e}"></fx-setvalue>\n        `}getWidget(){return this.shadowRoot.querySelector("input")}async updateWidgetValue(){let{widget:e}=this;e||(e=this),e.value,this.value}async refresh(e){super.refresh(e),Yo.refreshChildren(this,e)}evalLabel(e,t,n){const r=e.substring(1,e.length-1);if(!r)return;const i=$o(r,t,this);n.textContent=i}createEntry(){return this.template.content.firstElementChild.cloneNode(!0)}_getValueAttribute(e){let t;return Array.from(e.attributes).forEach((e=>{-1!==e.value.indexOf("{")&&(t=e)})),t}}async function zl(e){return new Promise((t=>setTimeout((()=>t()),e)))}customElements.get("fx-upload")||window.customElements.define("fx-upload",Vl);class Yl extends Zo{static get properties(){return{...super.properties,defaultAction:{type:String},delay:{type:Number},detail:{type:Object},event:{type:Object},handler:{type:Object},ifExpr:{type:String},iterateExpr:{type:String},needsUpdate:{type:Boolean},observer:{type:Object},phase:{type:String},propagate:{type:String},target:{type:String},whileExpr:{type:String}}}constructor(){super(),this.detail={},this.needsUpdate=!1}disconnectedCallback(){}connectedCallback(){super.connectedCallback(),this.setAttribute("inert","true"),this.style.display="none",this.propagate=this.hasAttribute("propagate")?this.getAttribute("propagate"):"continue",this.repeatContext=void 0,this.hasAttribute("event")&&(this.event=this.getAttribute("event")),this.hasAttribute("defaultAction")?this.defaultAction=this.getAttribute("defaultAction"):this.defaultAction="perform",this.hasAttribute("phase")?this.phase=this.getAttribute("phase"):this.phase="default",this.ifExpr=this.hasAttribute("if")?this.getAttribute("if"):null,this.whileExpr=this.hasAttribute("while")?this.getAttribute("while"):null,this.delay=this.hasAttribute("delay")?Number(this.getAttribute("delay")):0,this.iterateExpr=this.hasAttribute("iterate")?this.getAttribute("iterate"):null,this._addUpdateListener()}_addUpdateListener(){if(this.target=this.getAttribute("target"),this.target)if("#window"===this.target)window.addEventListener(this.event,(e=>this.execute(e)),{capture:"capture"===this.phase});else if("#document"===this.target)document.addEventListener(this.event,(e=>this.execute(e)),{capture:"capture"===this.phase});else{if(this.targetElement=ko(this.target,this),!this.targetElement)return;this?.targetElement.addEventListener(this.event,(e=>this.execute(e)),{capture:"capture"===this.phase})}else{if(this.targetElement=this.parentNode,!this.targetElement||this.targetElement.nodeType!==Node.ELEMENT_NODE)return;this.targetElement.addEventListener(this.event,(e=>this.execute(e)),{capture:"capture"===this.phase})}}async performSafe(){try{return await this.perform(),!0}catch(e){return await Yo.dispatch(this,"error",{origin:this,message:"Action execution failed",expr:wo.getDocPath(this),level:"Error"}),!1}}async execute(e){if(!this.getModel().modelConstructed)return;if(this.event&&this.event,e&&e.target.nodeType!==Node.DOCUMENT_NODE&&e.target!==window&&e.target.closest("fx-fore")&&e.target.closest("fx-fore")!==this.closest("fx-fore"))return;"stop"===this.propagate&&e.stopPropagation(),"cancel"===this.defaultAction&&e.preventDefault();let t=()=>{};e&&e.listenerPromises&&e.listenerPromises.push(new Promise((e=>{t=e}))),null===cl.outermostHandler&&(cl.outermostHandler=this,this.dispatchEvent(new CustomEvent("outermost-action-start",{composed:!0,bubbles:!0,cancelable:!0,detail:{cause:e?.type}}))),e&&(this.currentEvent=e),this.needsUpdate=!1;try{this.evalInContext()}catch(e){}if(this.targetElement&&this.targetElement.nodeset&&(this.nodeset=this.targetElement.nodeset),this.iterateExpr)return await this.handleIterateExpr(),void this._finalizePerform(t);if(!this.ifExpr||Lo(this.ifExpr,zo(this),this)){if(this.whileExpr)return await this.handleWhileExpr(),void this._finalizePerform(t);if(this.delay&&(await zl(this.delay),!wo.contains(this.getOwnerForm(),this)))return this.actionPerformed(),void t();await this.performSafe(),this._finalizePerform(t)}else this._finalizePerform(t)}async handleWhileExpr(){await zl(this.delay||0),wo.contains(this.getOwnerForm(),this)&&Lo(this.whileExpr,zo(this),this)&&this.performSafe()&&(this.delay?this.handleWhileExpr():await this.handleWhileExpr())}async handleIterateExpr(){try{const e=Do(this.iterateExpr,zo(this),this);if(0===e.length)return;if(!wo.contains(this.getOwnerForm(),this))return;for(const t of e)if(this.delay&&await zl(this.delay||0),this.currentContext=t,!await this.performSafe())return}finally{this.currentContext=null}}_finalizePerform(e){this.currentEvent=null,this.actionPerformed(),cl.outermostHandler===this&&(cl.outermostHandler=null,this.dispatchEvent(new CustomEvent("outermost-action-end",{composed:!0,bubbles:!0,cancelable:!0}))),e()}async perform(){(this.isBound()||"FX-ACTION"===this.nodeName)&&this.evalInContext(),this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}}))}actionPerformed(){const e=this.getModel();e&&e.inited&&(cl.outermostHandler&&!wo.contains(cl.outermostHandler.ownerDocument,cl.outermostHandler)&&(cl.outermostHandler=null),!this.needsUpdate||cl.outermostHandler!==this&&cl.outermostHandler?this.needsUpdate&&(cl.outermostHandler.needsUpdate=!0):(e.recalculate(),e.revalidate(),this.getOwnerForm().refresh(!0),this.dispatchActionPerformed()))}dispatchActionPerformed(){Yo.dispatch(this,"action-performed",{})}}Yl.dataChanged=!1,customElements.get("abstract-action")||window.customElements.define("abstract-action",Yl);class Kl extends Yl{static get properties(){return{...Yl.properties,ref:{type:String},repeat:{type:String},clear:{type:String}}}constructor(){super(),this.repeat=""}connectedCallback(){super.connectedCallback(),this.ref=this.getAttribute("ref"),this.repeat=this.getAttribute("repeat")}async perform(){super.perform(),this._dataFromTemplate(),this.needsUpdate=!0}actionPerformed(){super.actionPerformed(),this._dispatch()}_dataFromTemplate(){const e=this.getInScopeContext(),t=this.getOwnerForm(),n=t.querySelector(`#${this.repeat}`),r=n.shadowRoot.querySelector("template"),i=e.ownerDocument.createElement(n.ref),a=this._generateInstance(r.content,i);e.appendChild(a),t.signalChangeToElement(e.localName),t.signalChangeToElement(a.localName)}_dispatch(){const e=ko(this.repeat,this);Yo.dispatch(e,"index-changed",{index:e.nodeset.length})}_clear(e){let t=e.firstChild;const n=e.attributes;for(let e=0;e<n.length;e+=1)n[e].value="";for(;t;)1===t.nodeType&&t.hasAttributes()&&(t.textContent=""),this._clear(t),t=t.nextSibling}_generateInstance(e,t){if(1===e.nodeType&&e.hasAttribute("ref")){const n=e.getAttribute("ref");let r;"."===n||(n.startsWith("@")?t.setAttribute(n.substring(1),""):(r=document.createElement(n),t.appendChild(r),0===e.children.length&&(r.textContent=e.textContent)))}if(e.hasChildNodes()){const n=e.children;for(let e=0;e<n.length;e+=1)this._generateInstance(n[e],t)}return t}getInstanceId(){return this.ref.startsWith("instance(")?"not implemented":"default"}}customElements.get("fx-append")||window.customElements.define("fx-append",Kl);class Jl extends Yl{static get properties(){return{...super.properties,ref:{type:String}}}async perform(){const e=zo(this.getAttributeNode("ref")||this,this.ref);this.nodeset=Mo(this.ref,e,this);const t=wo.resolveInstance(this,this.ref),n=this.getModel().getInstance(t),r=Yo.getDomNodeIndexString(this.nodeset),i=this.nodeset;this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event,path:r}}));const a=this.getOwnerForm();let s;if(Array.isArray(i)){if(0===i.length)return;s=i[0].parentNode,a.signalChangeToElement(s.localName),i.forEach((e=>{this._deleteNode(s,e),a.signalChangeToElement(e.localName)}))}else s=i.parentNode,a.signalChangeToElement(s.localName),this._deleteNode(s,i),a.signalChangeToElement(i.localName);await Yo.dispatch(n,"deleted",{ref:r,deletedNodes:i,instanceId:t,foreId:a.id}),this.needsUpdate=!0}_deleteNode(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return;if(t.nodeType===Node.DOCUMENT_NODE)return;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return;if(null===t.parentNode)return;this.getModelItem().readonly||e.removeChild(t)}actionPerformed(){this.getModel().rebuild(),super.actionPerformed()}}customElements.get("fx-delete")||window.customElements.define("fx-delete",Jl);class Wl extends Yl{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.control=this.hasAttribute("control")?this.getAttribute("control"):null}async perform(){this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}}));const e=`#${this.control}`;let t=document.querySelector(e);if(!t)return void Yo.dispatch(this,"error",{origin:this,message:`Instance '${this.control}' not found`,level:"Error"});const n=t.closest("fx-repeatitem");n&&(t=n.querySelector(e),this._focus(t));const r=t.closest("fx-repeatitem, .fx-repeatitem");if(r){t=r.parentNode.querySelector(`[repeat-index] ${e}`)}this._focus(t),this.hasAttribute("select")&&this._select(t)}_focus(e){e&&"function"==typeof e.getWidget&&e.getWidget().focus(),e&&e.nodeType===Node.ELEMENT_NODE&&e.click()}_select(e){e&&e.getWidget().select()}}customElements.get("fx-setfocus")||window.customElements.define("fx-setfocus",Wl);class Ql extends Yl{static get properties(){return{...super.properties,at:{type:Number},position:{type:Number},origin:{type:Object},keepValues:{type:Boolean}}}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback&&super.connectedCallback();this.shadowRoot.innerHTML="\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        <slot></slot>\n    ",this.at=Number(this.hasAttribute("at")?this.getAttribute("at"):0),this.position=this.hasAttribute("position")?this.getAttribute("position"):"after",this.origin=this.hasAttribute("origin")?this.getAttribute("origin"):null,this.keepValues=!!this.hasAttribute("keep-values")}_cloneOriginSequence(e,t){let n;if(this.origin){let t;try{if(this.origin.startsWith("#")&&this.getOwnerForm().createNodes){n=this.getOwnerForm().querySelector(this.origin).createdNodeset.cloneNode(!0)}else t=Ro(this.origin,e,this),Array.isArray(t)&&0===t.length&&(n=null),n=t.cloneNode(!0)}catch(e){}}else t&&(n=this._cloneTargetSequence(t),n&&!this.keepValues&&this._clear(n));return n}_getInsertIndex(e,t){return 0===t.length?null:this.hasAttribute("at")?Uo(this.getAttribute("at"),e,this):t.length}async perform(){let e,t,n=[];const r=zo(this),i=this.getOwnerForm();this.hasAttribute("context")&&([t]=Mo(this.getAttribute("context"),r,i),e=r),this.hasAttribute("ref")&&(e||(e=zo(this.getAttributeNode("ref"),this.ref)),n=Mo(this.ref,e,this));const a=this._cloneOriginSequence(e,n);if(!a)return;let s,o;if(0===n.length)if(t)s=t,t.appendChild(a),i.signalChangeToElement(s.localName),i.signalChangeToElement(a.localName),o=1;else if(!e&&this.getOwnerForm().createNodes){const t=this.getOwnerForm().querySelector(this.origin);e=zo(t,t.ref),s=e,e.appendChild(a),o=e.length-1}else s=e,e.appendChild(a),o=1;else{if(this.hasAttribute("at")?(o=Uo(this.getAttribute("at"),e,this),s=n[o-1]):(o=n.length,s=n[n.length-1]),!s){o=1,s=n;o=Uo("count(preceding::*)",n,this.getOwnerForm())+1}this.position&&"before"===this.position&&(s.parentNode.insertBefore(a,s),i.signalChangeToElement(s.parentNode),i.signalChangeToElement(a.localName)),this.position&&"after"===this.position&&(o+=1,this.hasAttribute("context")&&this.hasAttribute("ref")?e.append(a):this.hasAttribute("context")?(o=1,s.prepend(a),i.signalChangeToElement(s),i.signalChangeToElement(a.localName)):(s.insertAdjacentElement("afterend",a),i.signalChangeToElement(s),i.signalChangeToElement(a.localName)))}const l=wo.resolveInstance(this,this.ref),c=this.getModel().getInstance(l),u=wo.getPath(s.parentNode,l),p=Yo.getDomNodeIndexString(a);return this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event,path:p}})),Yo.dispatch(c,"insert",{"inserted-nodes":a,"insert-location-node":s,position:this.position,instanceId:l,foreId:i.id}),document.dispatchEvent(new CustomEvent("index-changed",{composed:!0,bubbles:!0,detail:{insertedNodes:a,index:o}})),this.needsUpdate=!0,[u]}_cloneTargetSequence(e){return Array.isArray(e)&&0!==e.length?e[e.length-1].cloneNode(!0):!Array.isArray(e)&&e?e.cloneNode(!0):null}actionPerformed(e){this.getModel().rebuild(),super.actionPerformed()}_clear(e){const t=e.attributes;for(let e=0;e<t.length;e+=1)t[e].value="";e.textContent&&(e.textContent="");let n=e.firstChild;for(;n;)1===n.nodeType&&n.hasAttributes()&&(n.textContent=""),this._clear(n),n=n.nextSibling}}customElements.get("fx-insert")||window.customElements.define("fx-insert",Ql);class Zl extends Yl{constructor(){super(),this.attachShadow({mode:"open"})}static get properties(){return{...Yl.properties,modelItem:void 0,messageTextContent:{type:String,get value(){return"here!"}}}}connectedCallback(){super.connectedCallback(),this.event=this.hasAttribute("event")?this.getAttribute("event"):"",this.level=this.hasAttribute("level")?this.getAttribute("level"):"ephemeral",this.message="",this.messageTextContent=this.textContent;this.shadowRoot.innerHTML=`\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        ${this.renderHTML()}\n    `}renderHTML(){return"\n        <slot></slot>\n    "}async perform(){super.perform(),this.hasAttribute("value")?this.message=this._getValue():(this.getOwnerForm().evaluateTemplateExpression(this.messageTextContent,this.firstChild),this.message=this.textContent),this.dispatchEvent(new CustomEvent("message",{composed:!1,bubbles:!0,detail:{level:this.level,message:this.message}}))}_getValue(){if(this.hasAttribute("value")){const e=this.getAttribute("value");try{return $o(e,zo(this,e),this)}catch(e){Yo.dispatch(this,"error",{message:e})}}return this.textContent?this.textContent:null}}customElements.get("fx-message")||window.customElements.define("fx-message",Zl);class ec extends Yl{static get properties(){return{...super.properties,ref:{type:String},valueAttr:{type:String}}}constructor(){super(),this.ref="",this.valueAttr=""}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),!this.hasAttribute("ref"))throw new Error('fx-setvalue must specify a "ref" attribute');this.ref=this.getAttribute("ref"),this.valueAttr=this.getAttribute("value")}async perform(){super.perform();let{value:e}=this;if(null!==this.valueAttr){const t=zo(this,this.valueAttr);[e]=Do(this.valueAttr,t,this,this.detail)}else e=""!==this.textContent?this.textContent:"";e?.nodeType&&e.nodeType===Node.ATTRIBUTE_NODE&&(e=e.nodeValue);const t=this.getModelItem();this.setValue(t,e)}dispatchExecute(){}setValue(e,t){const n=e;if(n&&n.value!==t){const r=Yo.getDomNodeIndexString(e.node),i=this.event,a=this;this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:a,event:i,value:t,path:r}})),t?.nodeType?(t.nodeType===Node.ELEMENT_NODE&&(n.value=t),t.nodeType===Node.ATTRIBUTE_NODE&&(n.value=t.getValue()),t.nodeType===Node.TEXT_NODE&&(n.value=t.textContent)):(n.value=t,n.node.textContent=t),this.getModel().changed.push(e),this.needsUpdate=!0}}}customElements.get("fx-setvalue")||window.customElements.define("fx-setvalue",ec);class tc extends Yl{constructor(){super(),this.value="",this.url=null,this.target=null}connectedCallback(){super.connectedCallback(),this.submission=this.getAttribute("submission"),this.url=this.hasAttribute("url")?this.getAttribute("url"):null,this.target=this.hasAttribute("target")?this.getAttribute("target"):null,this.connection=this.hasAttribute("connection")?this.getAttribute("connection"):null}async perform(){if(super.perform(),this.getOwnerForm().classList.remove("submit-validation-failed"),this.connection){return null===this.getModel().querySelector(`#${this.connection}`)?void this.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,cancelable:!0,detail:{id:this.id,origin:this,message:`<fx-connection id="${this.connection}"> not found`,expr:wo.getDocPath(this),level:"Error"}})):void this._emitToChannel()}const e=this.getModel().querySelector(`#${this.submission}`);if(null!==e){if(this.url){const t=this.evaluateAttributeTemplateExpression(this.url,this);e.parameters.set("url",t)}if(this.target){const t=this.evaluateAttributeTemplateExpression(this.target,this);e.parameters.set("target",t)}await e.submit(),"instance"===e.replace&&(this.getModel().updateModel(),this.getOwnerForm().refresh())}else this.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,cancelable:!0,detail:{id:this.id,origin:this,message:`<fx-submission id="${this.submission}"> not found`,expr:wo.getDocPath(this),level:"Error"}}))}_emitToChannel(){const e=this.getModel().querySelector(`#${this.connection}`);null!==e&&e.send()}}customElements.get("fx-send")||window.customElements.define("fx-send",tc);class nc extends Yl{connectedCallback(){super.connectedCallback(),this.hasAttribute("case")&&(this.case=this.getAttribute("case"))}async perform(){if(super.perform(),this.case){const e=this.getOwnerForm().querySelector(`#${this.case}`);if(!e)return void Yo.dispatch(this,"error",{message:`fx-case id not found: ${this.case}`});e.parentNode.toggle(e)}this.needsUpdate=!0}}customElements.get("fx-toggle")||window.customElements.define("fx-toggle",nc);class rc extends Yl{static get properties(){return{...super.properties,name:{type:String},targetid:{type:String},details:{type:String}}}constructor(){super(),this.name=null,this.targetid=null,this.details=null,this.attachShadow({mode:"open"})}connectedCallback(){if(super.connectedCallback(),this.name=this.getAttribute("name"),!this.name)throw new Error("no event specified for dispatch",this);this.targetid=this.hasAttribute("targetid")?this.getAttribute("targetid"):null}async perform(){super.perform();const e=this.querySelectorAll("fx-property"),t={};if(Array.from(e).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value"),i=e.getAttribute("expr");if(i){if(r)throw new Error('if "expr" is given there must not be a "value" attribute');const[e]=Do(i,this.getInScopeContext(),this);let a=null;if(e.nodeName){a=(new XMLSerializer).serializeToString(e)}t[n]=a||e}r&&(t[n]=r)})),this.targetid){let e=ko(this.targetid,this.parentNode,null);if(e||(e=document.getElementById(this.targetid)),!e)throw new Error(`targetid ${this.targetid} does not exist in document`);e.dispatchEvent(new CustomEvent(this.name,{composed:!0,bubbles:!0,detail:t}))}else document.dispatchEvent(new CustomEvent(this.name,{composed:!0,bubbles:!0,detail:t}))}}customElements.get("fx-dispatch")||window.customElements.define("fx-dispatch",rc);class ic extends Yl{async perform(){this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}})),this.getModel().updateModel()}}customElements.get("fx-update")||window.customElements.define("fx-update",ic);class ac extends Yl{async perform(){if(this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}})),this.hasAttribute("self")){const e=wo.getClosest("fx-control",this);if(e)return void e.refresh()}if(this.hasAttribute("force"))this.getOwnerForm().forceRefresh();else if(this.hasAttribute("control")){const e=ko(this.getAttribute("control"),this);e&&Yo.isUiElement(e.nodeName)&&"function"==typeof e.refresh&&e.refresh()}else this.getOwnerForm().refresh()}}customElements.get("fx-refresh")||window.customElements.define("fx-refresh",ac);class sc extends Yl{static get properties(){return{...super.properties,with:{type:String},replaceNode:Object}}constructor(){super(),this.with=""}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.with=this.getAttribute("with")}async perform(){super.perform();const e=Ro(this.with,this.nodeset,this);e&&this.replace(this.nodeset,e)}actionPerformed(){this.getModel().rebuild(),super.actionPerformed()}replace(e,t){if(e&&t&&e.nodeName&&t.nodeName){if(e.nodeType===Node.ATTRIBUTE_NODE){const{ownerElement:n}=e;n.setAttribute(t.nodeName,t.textContent),n.removeAttribute(e.nodeName)}else if(e.nodeType===Node.ELEMENT_NODE){const n=t.cloneNode(!0);e.replaceWith(n)}this.needsUpdate=!0}}}customElements.get("fx-replace")||window.customElements.define("fx-replace",sc);class oc extends Yl{connectedCallback(){super.connectedCallback&&super.connectedCallback()}async perform(){super.perform();const e=new CustomEvent("return",{composed:!0,bubbles:!0,detail:{nodeset:this.nodeset}});this.getOwnerForm().dispatchEvent(e)}}customElements.get("fx-return")||window.customElements.define("fx-return",oc);class lc extends Yl{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.src=this.hasAttribute("src")?this.getAttribute("src"):null;this.shadowRoot.innerHTML="\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        <slot></slot>\n    "}async perform(){super.perform();const{children:e}=this;if(this.src){this.innerHTML="";const e=document.createElement("script");e.src=this.src,this.appendChild(e)}else{for(const t of e){if("fx-var"===t.localName)continue;const e=t;e.detail=this.detail,await e.execute()}this.dispatchActionPerformed(),this.needsUpdate=!0}}}customElements.get("fx-action")||window.customElements.define("fx-action",lc);class cc extends lc{static get properties(){return{...lc.properties,message:{type:String}}}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.message=this.hasAttribute("message")?this.getAttribute("message"):null}async perform(){window.confirm(this.message)&&await super.perform()}}customElements.get("fx-confirm")||window.customElements.define("fx-confirm",cc);class uc extends lc{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.dialog=this.getAttribute("dialog"),this.dialog||Yo.dispatch(this,"error",{message:"dialog does not exist"})}async perform(){this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}}));const e=ko(this.dialog,this);e.showModal(),Yo.dispatch(e,"dialog-shown",{})}}customElements.get("fx-show")||window.customElements.define("fx-show",uc);class pc extends Yl{static get properties(){return{...super.properties,dialog:{type:String}}}connectedCallback(){super.connectedCallback(),this.dialog=this.getAttribute("dialog"),this.dialog||Yo.dispatch(this,"error",{message:"dialog does not exist"})}async perform(){this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}}));const e=ko(this.dialog,this);e.close(),Yo.dispatch(e,"dialog-hidden",{})}}customElements.get("fx-hide")||window.customElements.define("fx-hide",pc);class dc extends Yl{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.addEventListener("reload",(()=>{window.location.reload()}),{once:!0})}async perform(){this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}})),Yo.dispatch(this,"reload",{})}}customElements.get("fx-reload")||window.customElements.define("fx-reload",dc);class hc extends Yl{static get properties(){return{...super.properties,instance:{type:String}}}connectedCallback(){super.connectedCallback(),this.instance=this.getAttribute("instance"),this.instance||Yo.dispatch(this,"error",{message:"instance does not exist"})}async perform(){this.dispatchEvent(new CustomEvent("execute-action",{composed:!0,bubbles:!0,cancelable:!0,detail:{action:this,event:this.event}}));this.getModel().getInstance(this.instance).reset(),this.needsUpdate=!0}}customElements.get("fx-reset")||window.customElements.define("fx-reset",hc);class mc extends Yl{static get properties(){return{...super.properties,attachTo:{type:String},url:{type:String}}}constructor(){super(),this.attachShadow({mode:"open"}),this.url="",this.replace=!1}connectedCallback(){super.connectedCallback(),this.attachTo=this.hasAttribute("attach-to")?this.getAttribute("attach-to"):"_self",this.replace=!!this.hasAttribute("replace"),this.awaitEvent=this.hasAttribute("await")?this.getAttribute("await"):"",this.url=this.hasAttribute("url")?this.getAttribute("url"):"";this.shadowRoot.innerHTML=`\n            <style>\n                \n            :host{\n                display:none;\n            }\n        \n            </style>\n            ${this.renderHTML()}`}disconnectedCallback(){this.targetElement.removeEventListener(this.event,(e=>this.execute(e)))}renderHTML(){return"\n        <slot></slot>\n    "}async perform(){await super.perform();const e=this.querySelector("template");if(e){const t=e.content.cloneNode(!0),n=document.importNode(t,!0);if(this.attachTo.startsWith("#")){const e=ko(this.attachTo.substring(1),this);for(;e.firstChild;)e.removeChild(e.firstChild);if(this.awaitEvent){let t;const r=new Promise((e=>{t=e})),i=()=>{t(),e.removeEventListener(this.awaitEvent,i)};return this.replace?this.parentNode.replaceChild(n,e):e.appendChild(n),e.addEventListener(this.awaitEvent,i),await r,this.needsUpdate=!0,void Yo.dispatch(this,"loaded",{attachPoint:this.attachTo,content:n})}e.appendChild(n),this.needsUpdate=!0}return void Yo.dispatch(this,"loaded",{})}if(!this.url)return void this.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,cancelable:!0,detail:{origin:this,message:"neither template element nor Url was specified.",level:"Error"}}));const t=this.evaluateAttributeTemplateExpression(this.url,this);"_blank"===this.attachTo&&window.open(this.url),"_self"===this.attachTo&&(window.location.href=this.url);try{const e=await fetch(t,{method:"GET",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"text/html"}}),n=await e.text();this.attachTo||(this.innerHtml=n),this._attachToElement(n),Yo.dispatch(this,"loaded",{url:this.url})}catch(e){throw new Error(`failed loading data ${e}`)}}_attachToElement(e){let t;if(e.nodeType)t=e;else try{t=(new DOMParser).parseFromString(e,"text/html").firstElementChild}catch(e){Yo.dispatch(this,"error",{message:"parsing of content as HTML failed"})}if(this.attachTo.startsWith("_")||this.attachTo.startsWith("#")||Yo.dispatch(this,"error",{message:'valid values for "attach-to" start with "_" or "#"'}),this.attachTo.startsWith("#")){const e=ko(this.attachTo.substring(1),this);if(e.innerHTML="",t.querySelector("fx-fore"))return void e.append(t.querySelector("fx-fore").cloneNode(!0));const n=t.querySelector("body").cloneNode(!0);e.appendChild(n.firstElementChild)}}_evaluateUrlExpression(){const e=this.getAttribute("url");if(!e)throw new Error("url not specified");return e.replace(/{[^}]*}/g,(e=>{if("{}"===e)return e;const t=e.substring(1,e.length-1),n=zo(this,t);if(!n)return e;const r=wo.getInstanceId(t);r?this.getModel().getInstance(r):this.getModel().getDefaultInstance();try{return $o(t,n,this,null)}catch(t){return e}}))}}customElements.get("fx-load")||window.customElements.define("fx-load",mc);class fc extends Yl{static get properties(){return{...super.properties,ref:{type:String},valueAttr:{type:String},value:{type:Boolean}}}constructor(){super(),this.ref="",this.valueAttr="",this.value=!1}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),!this.hasAttribute("ref"))throw new Error('fx-togglealue must specify a "ref" attribute');this.ref=this.getAttribute("ref")}async perform(){super.perform();const e=this.getModelItem();"true"===e.value?e.node.textContent="false":e.node.textContent="true",this.needsUpdate=!0}}customElements.get("fx-toggleboolean")||window.customElements.define("fx-toggleboolean",fc);class gc extends Yl{static get properties(){return{...super.properties,action:{type:String},fn:{type:String}}}constructor(){super(),this.action="",this.fn=""}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),this.hasAttribute("action"))this.action=this.getAttribute("action");else{if(!this.hasAttribute("function"))throw new Error('fx-call must specify an "action" or "function" attribute');this.fn=this.getAttribute("function")}}async perform(){super.perform(),this.action&&await this._callAction(),this.fn&&this._callFunction()}async _callAction(){const e=document.querySelector(`#${this.action}`);e?await e.perform():Yo.dispatch(this,"error",{origin:this,message:`Action '${this.action}' not found`,expr:wo.getDocPath(this),level:"Error"})}_callFunction(){const e=zo(this,"instance()");Do(this.fn,e,this)}}customElements.get("fx-call")||window.customElements.define("fx-call",gc);class yc extends Yl{static get properties(){return{...super.properties,ref:{type:String},attrName:{type:String},attrValue:{type:String}}}constructor(){super(),this.ref="",this.attrName="",this.attrValue=""}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),!this.hasAttribute("ref"))throw new Error('fx-setvalue must specify a "ref" attribute');this.ref=this.getAttribute("ref"),this.attrName=this.hasAttribute("name")?this.getAttribute("name"):null,this.attrValue=this.hasAttribute("value")?this.getAttribute("value"):"",this.attrName||Yo.dispatch("this","error",{message:"name or value not specified"})}async perform(){super.perform();const e=this.getModelItem();e.node.nodeType===Node.ELEMENT_NODE?(e.node.setAttribute(this.attrName,this.attrValue),this.needsUpdate=!0):Yo.dispatch("this","error",{message:"referenced item is not an element"})}}customElements.get("fx-setattribute")||window.customElements.define("fx-setattribute",yc);class bc extends lc{connectedCallback(){super.connectedCallback(),"FX-MODEL"===this.parentNode.nodeName?this.parentNode.addEventListener("model-construct-done",(e=>{super.perform()})):Yo.dispatch(this,"error",{message:"parent is not a model"})}}customElements.get("fx-construct-done")||window.customElements.define("fx-construct-done",bc);class wc extends Yl{constructor(){super()}async perform(){this.getOwnerForm().markAsClean()}}customElements.get("fx-unmodified")||window.customElements.define("fx-unmodified",wc);class vc extends gl{connectedCallback(){this.attachShadow({mode:"open"}),this.selectExpr=this.getAttribute("select");this.shadowRoot.innerHTML='\n      <style>\n      :host {\n        display: inline-block;\n        position: relative;\n      }\n\n      .menu {\n        display: none;\n        position: absolute;\n        top: 100%;\n        left: 0;\n        z-index: 10;\n        background: white;\n        border: 1px solid #ccc;\n        padding: 0.5em;\n        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n        min-width: 10em;\n        white-space:nowrap;\n      }\n\n      .menu.visible {\n        display: block;\n      }\n\n      .menu a {\n        display: block;\n        padding: 0.25em 0.5em;\n        text-decoration: none;\n        color: black;\n        cursor: pointer;\n      }\n\n      .menu a:hover {\n        background-color: #eee;\n      }\n    </style>\n      <slot></slot>\n      <div class="menu" part="menu"></div>\n    ',this.menuEl=this.shadowRoot.querySelector(".menu");const e=this.shadowRoot.querySelector("slot");e.addEventListener("slotchange",(()=>{const t=e.assignedNodes({flatten:!0}).find((e=>e.nodeType===Node.ELEMENT_NODE&&"BUTTON"===e.tagName));t&&t.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.updateMenu(),this.menuEl.classList.toggle("visible")}))})),document.addEventListener("update-control-menu",(()=>{this.updateMenu()})),document.addEventListener("click",(e=>{this.contains(e.target)||this.shadowRoot.contains(e.target)||this.menuEl.classList.remove("visible")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.menuEl.classList.remove("visible")})),"hide-on-empty"===this.getAttribute("mode")&&this.getOwnerForm().addEventListener("ready",(()=>{const e=document.querySelector(this.selectExpr);if(!e)return;e.querySelectorAll(".widget").forEach((e=>{const t=e.value?.trim(),n=e.closest("fx-control");!n||""!==t&&null!=t||n.setAttribute("on-demand","true")})),this.updateMenu()}));document.querySelector(this.selectExpr)?.addEventListener("show-control",(e=>{this.updateMenu()})),this.updateMenu()}updateMenu(){const e=document.querySelector(this.selectExpr);if(!e)return;let t=[];t=e.hasAttribute("on-demand")?"FX-REPEAT"===e.nodeName?[e]:[e,...e.querySelectorAll("[on-demand]")]:Array.from(e.querySelectorAll("[on-demand]")),this._currentTargets=t,this.menuEl.innerHTML="";const n=this.shadowRoot.querySelector("slot").assignedNodes({flatten:!0}).find((e=>e.nodeType===Node.ELEMENT_NODE&&"BUTTON"===e.tagName));n&&(n.disabled=0===t.length),0!==t.length?t.forEach(((e,t)=>{let n=e.getAttribute("aria-label");n||(n=e.querySelector("label")?.textContent.trim()||`Item ${t+1}`);const r=document.createElement("a");r.href="#",r.textContent=n,r.addEventListener("click",(t=>{t.preventDefault(),"function"==typeof e.activate&&e.activate(),this.menuEl.classList.remove("visible"),requestAnimationFrame((()=>{this.updateMenu()}))})),this.menuEl.appendChild(r)})):this.menuEl.classList.remove("visible")}}function xc(e,t){e.signature;const n=e.type??"text/xpath",r=e.signature.match(/(?:(?<prefix>[a-zA-Z_\-][a-zA-Z0-9_\-]*):)?(?<localName>[a-zA-Z_\-][a-zA-Z0-9_\-]*\s*)\((?<params>(?:[^()]*|\([^()]*\))*)\)\s*(?:as\s+(?<returnType>.*))?/);if(!r)throw new Error(`Function signature ${e.signature} could not be parsed`);const{prefix:i,localName:a,params:s,returnType:o}=r.groups,l="local"!==i&&i?`${i}:${a}`:{namespaceURI:"http://www.w3.org/2005/xquery-local-functions",localName:a};i||Co.push(a);const c=s?s.split(",").map((e=>{const t=e.match(/(?<variableName>\$[^\s]+)(?:\sas\s(?<varType>[^\s]+))/);if(!t)throw new Error(`Param ${e} could not be parsed`);const{variableName:n,varType:r}=t.groups;return{variableName:n,variableType:r||"item()*"}})):[];switch(n){case"text/javascript":{const n=new Function("_domFacade",...c.map((e=>e.variableName)),"form",e.functionBody);go(l,c.map((e=>e.variableType)),o||"item()*",((...e)=>n.apply(t.getInScopeContext(),[...e,t.getOwnerForm()])));break}case"text/xquf":case"text/xquery":case"text/xpath":{const r=c.map((e=>io(e.variableType))),i="text/xpath"===n?"XPath3.1":"text/xquery"===n?"XQuery3.1":"XQueryUpdate3.1",a=(n,...a)=>Do(e.functionBody,t.getInScopeContext(),t.getOwnerForm(),c.reduce(((e,t,i)=>(e[t.variableName.replace("$","")]=r[i](a[i],n),e)),{}),{language:i});go(l,c.map((e=>e.variableType)),o||"item()*",a);break}default:throw new Error(`Unexpected mimetype ${n} for function`)}}customElements.get("fx-control-menu")||customElements.define("fx-control-menu",vc);class Ac extends Zo{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.style.display="none",this.signature=this.hasAttribute("signature")?this.getAttribute("signature"):null,this.type=this.hasAttribute("type")?this.getAttribute("type"):null,this.shadowRoot.innerHTML="<slot></slot>",this.override=this.hasAttribute("override")?this.getAttribute("override"):"true",this.functionBody=this.innerText,xc(this,this)}}customElements.get("fx-function")||customElements.define("fx-function",Ac);class _c extends Zo{constructor(){super(),this._resolve=null,this.readyPromise=new Promise((e=>this._resolveLoading=e))}async connectedCallback(){this.style.display="none";const e=this.getAttribute("src"),t=await fetch(e);t.ok;const n=await t.text(),r=(new DOMParser).parseFromString(n,"text/html"),i=Array.from(r.querySelectorAll("fx-function"));for(const e of i){xc({type:e.getAttribute("type"),signature:e.getAttribute("signature"),functionBody:e.innerText},this)}this._resolveLoading(void 0)}}customElements.get("fx-functionlib")||customElements.define("fx-functionlib",_c);class Ec extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.href=""}connectedCallback(){this.href=this.getAttribute("href");const e=`\n            <a href="${this.href}">\n                <div class="logo-corner">\n                    <img class="logo fore" src="/doc/light-blue1.png" alt="Fore">\n                </div>\n            </a>\n        `;this.shadowRoot.innerHTML=`\n            <style>\n                \n          :host {\n            display: block;\n            max-width:100%;\n          }\n          .logo-corner {\n            transform: rotate(-74deg);\n            position: fixed;\n            z-index:100;\n            right: -2.5rem;\n            top: -2.9rem;\n            width: 6rem;\n            height: 5rem;\n            /* background: ghostwhite; */\n            border: thin solid lightsteelblue;\n            background: rgba(255, 255, 255, 0.3);\n            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);\n            backdrop-filter: blur(4.3px);\n            -webkit-backdrop-filter: blur(4.3px);\n            border: 1px solid rgba(255, 255, 255, 0.3);\n            border-top-left-radius: 0.2rem;\n            border:2px solid white;\n        }\n        .logo-corner:hover{\n            // background: ghostwhite;\n            box-shadow: 0 6px 40px rgba(0, 0, 0, 0.7);\n        }\n        \n        .logo-corner .logo {\n            width: 3rem;\n            position: absolute;\n            top: 1.25rem;\n            left: -0.4rem;\n            transform: rotate(75deg);\n        }\n        \n        \n            </style>\n            ${e}\n        `}}customElements.get("fore-corner")||customElements.define("fore-corner",Ec);
