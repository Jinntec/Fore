/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const e=!(window.ShadyDOM&&window.ShadyDOM.inUse);let t,n;function r(n){t=(!n||!n.shimcssproperties)&&(e||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(n=window.ShadyCSS.cssBuild);const i=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?t=window.ShadyCSS.nativeCss:window.ShadyCSS?(r(window.ShadyCSS),window.ShadyCSS=void 0):r(window.WebComponents&&window.WebComponents.flags);const o=t;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class s{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function a(e){return l(function(e){let t=new s;t.start=0,t.end=e.length;let n=t;for(let r=0,i=e.length;r<i;r++)if(e[r]===h){n.rules||(n.rules=[]);let e=n,t=e.rules[e.rules.length-1]||null;n=new s,n.start=r+1,n.parent=e,n.previous=t,e.rules.push(n)}else e[r]===p&&(n.end=r+1,n=n.parent||t);return t}(e=e.replace(d.comments,"").replace(d.port,"")),e)}function l(e,t){let n=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=n.trim(),e.parent){let r=e.previous?e.previous.end:e.parent.start;n=t.substring(r,e.start-1),n=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(){let e=arguments[1],t=6-e.length;for(;t--;)e="0"+e;return"\\"+e}))}(n),n=n.replace(d.multipleSpaces," "),n=n.substring(n.lastIndexOf(";")+1);let i=e.parsedSelector=e.selector=n.trim();e.atRule=0===i.indexOf(g),e.atRule?0===i.indexOf(m)?e.type=c.MEDIA_RULE:i.match(d.keyframesRule)&&(e.type=c.KEYFRAMES_RULE,e.keyframesName=e.selector.split(d.multipleSpaces).pop()):0===i.indexOf(f)?e.type=c.MIXIN_RULE:e.type=c.STYLE_RULE}let r=e.rules;if(r)for(let e,n=0,i=r.length;n<i&&(e=r[n]);n++)l(e,t);return e}function u(e,t,n=""){let r="";if(e.cssText||e.rules){let n=e.rules;if(n&&!function(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&0===t.selector.indexOf(f)}(n))for(let e,i=0,o=n.length;i<o&&(e=n[i]);i++)r=u(e,t,r);else r=t?e.cssText:function(e){return function(e){return e.replace(d.mixinApply,"").replace(d.varApply,"")}(e=function(e){return e.replace(d.customProp,"").replace(d.mixinProp,"")}(e))}(e.cssText),r=r.trim(),r&&(r="  "+r+"\n")}return r&&(e.selector&&(n+=e.selector+" "+h+"\n"),n+=r,e.selector&&(n+=p+"\n\n")),n}const c={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},h="{",p="}",d={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},f="--",m="@media",g="@",y=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,v=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,w=/@media\s(.*)/,b=new Set;function x(e){const t=e.textContent;if(!b.has(t)){b.add(t);const e=document.createElement("style");e.setAttribute("shady-unscoped",""),e.textContent=t,document.head.appendChild(e)}}function A(e){return e.hasAttribute("shady-unscoped")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function _(e,t){return e?("string"==typeof e&&(e=a(e)),t&&E(e,t),u(e,o)):""}function k(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=a(e.textContent)),e.__cssRules||null}function E(e,t,n,r){if(!e)return;let i=!1,o=e.type;if(r&&o===c.MEDIA_RULE){let t=e.selector.match(w);t&&(window.matchMedia(t[1]).matches||(i=!0))}o===c.STYLE_RULE?t(e):n&&o===c.KEYFRAMES_RULE?n(e):o===c.MIXIN_RULE&&(i=!0);let s=e.rules;if(s&&!i)for(let e,i=0,o=s.length;i<o&&(e=s[i]);i++)E(e,t,n,r)}function C(e,t){let n=e.indexOf("var(");if(-1===n)return t(e,"","","");let r=function(e,t){let n=0;for(let r=t,i=e.length;r<i;r++)if("("===e[r])n++;else if(")"===e[r]&&0==--n)return r;return-1}(e,n+3),i=e.substring(n+4,r),o=e.substring(0,n),s=C(e.substring(r+1),t),a=i.indexOf(",");return-1===a?t(o,i.trim(),"",s):t(o,i.substring(0,a).trim(),i.substring(a+1).trim(),s)}window.ShadyDOM&&window.ShadyDOM.wrap;function S(e){if(void 0!==n)return n;if(void 0===e.__cssBuild){const t=e.getAttribute("css-build");if(t)e.__cssBuild=t;else{const t=function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;if(t instanceof Comment){const e=t.textContent.trim().split(":");if("css-build"===e[0])return e[1]}return""}(e);""!==t&&function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),e.__cssBuild=t}}return e.__cssBuild||""}function O(e){return""!==S(e)}function T(e,t){for(let n in t)null===n?e.style.removeProperty(n):e.style.setProperty(n,t[n])}function N(e,t){const n=window.getComputedStyle(e).getPropertyValue(t);return n?n.trim():""}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const B=/;\s*/m,I=/^\s*(initial)|(inherit)\s*$/,P=/\s*!important/;class M{constructor(){this._map={}}set(e,t){e=e.trim(),this._map[e]={properties:t,dependants:{}}}get(e){return e=e.trim(),this._map[e]||null}}let D=null;class R{constructor(){this._currentElement=null,this._measureElement=null,this._map=new M}detectMixin(e){return function(e){const t=v.test(e)||y.test(e);return v.lastIndex=0,y.lastIndex=0,t}(e)}gatherStyles(t){const n=function(t){const n=[],r=t.querySelectorAll("style");for(let t=0;t<r.length;t++){const i=r[t];A(i)?e||(x(i),i.parentNode.removeChild(i)):(n.push(i.textContent),i.parentNode.removeChild(i))}return n.join("").trim()}(t.content);if(n){const e=document.createElement("style");return e.textContent=n,t.content.insertBefore(e,t.content.firstChild),e}return null}transformTemplate(e,t){void 0===e._gatheredStyle&&(e._gatheredStyle=this.gatherStyles(e));const n=e._gatheredStyle;return n?this.transformStyle(n,t):null}transformStyle(e,t=""){let n=k(e);return this.transformRules(n,t),e.textContent=_(n),n}transformCustomStyle(e){let t=k(e);return E(t,(e=>{":root"===e.selector&&(e.selector="html"),this.transformRule(e)})),e.textContent=_(t),t}transformRules(e,t){this._currentElement=t,E(e,(e=>{this.transformRule(e)})),this._currentElement=null}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),":root"===e.selector&&(e.selector=":host > *")}transformCssText(e,t){return e=e.replace(y,((e,n,r,i)=>this._produceCssProperties(e,n,r,i,t))),this._consumeCssProperties(e,t)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let t=e;for(;t.parent;)t=t.parent;const n={};let r=!1;return E(t,(t=>{r=r||t===e,r||t.selector===e.selector&&Object.assign(n,this._cssTextToMap(t.parsedCssText))})),n}_consumeCssProperties(e,t){let n=null;for(;n=v.exec(e);){let r=n[0],i=n[1],o=n.index,s=o+r.indexOf("@apply"),a=o+r.length,l=e.slice(0,s),u=e.slice(a),c=t?this._fallbacksFromPreviousRules(t):{};Object.assign(c,this._cssTextToMap(l));let h=this._atApplyToCssProperties(i,c);e=`${l}${h}${u}`,v.lastIndex=o+h.length}return e}_atApplyToCssProperties(e,t){e=e.replace(B,"");let n=[],r=this._map.get(e);if(r||(this._map.set(e,{}),r=this._map.get(e)),r){let i,o,s;this._currentElement&&(r.dependants[this._currentElement]=!0);const a=r.properties;for(i in a)s=t&&t[i],o=[i,": var(",e,"_-_",i],s&&o.push(",",s.replace(P,"")),o.push(")"),P.test(a[i])&&o.push(" !important"),n.push(o.join(""))}return n.join("; ")}_replaceInitialOrInherit(e,t){let n=I.exec(t);return n&&(t=n[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),t}_cssTextToMap(e,t=!1){let n,r,i=e.split(";"),o={};for(let e,s,a=0;a<i.length;a++)e=i[a],e&&(s=e.split(":"),s.length>1&&(n=s[0].trim(),r=s.slice(1).join(":"),t&&(r=this._replaceInitialOrInherit(n,r)),o[n]=r));return o}_invalidateMixinEntry(e){if(D)for(let t in e.dependants)t!==this._currentElement&&D(t)}_produceCssProperties(e,t,n,r,i){if(n&&C(n,((e,t)=>{t&&this._map.get(t)&&(r=`@apply ${t};`)})),!r)return e;let o=this._consumeCssProperties(""+r,i),s=e.slice(0,e.indexOf("--")),a=this._cssTextToMap(o,!0),l=a,u=this._map.get(t),c=u&&u.properties;c?l=Object.assign(Object.create(c),a):this._map.set(t,l);let h,p,d=[],f=!1;for(h in l)p=a[h],void 0===p&&(p="initial"),c&&!(h in c)&&(f=!0),d.push(`${t}_-_${h}: ${p}`);return f&&this._invalidateMixinEntry(u),u&&(u.properties=l),n&&(s=`${e};${s}`),`${s}${d.join("; ")};`}}R.prototype.detectMixin=R.prototype.detectMixin,R.prototype.transformStyle=R.prototype.transformStyle,R.prototype.transformCustomStyle=R.prototype.transformCustomStyle,R.prototype.transformRules=R.prototype.transformRules,R.prototype.transformRule=R.prototype.transformRule,R.prototype.transformTemplate=R.prototype.transformTemplate,R.prototype._separator="_-_",Object.defineProperty(R.prototype,"invalidCallback",{get:()=>D,set(e){D=e}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const F={},L="_applyShimCurrentVersion",U="_applyShimNextVersion",$="_applyShimValidatingVersion",H=Promise.resolve();
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function G(e){let t=F[e];t&&function(e){e[L]=e[L]||0,e[$]=e[$]||0,e[U]=(e[U]||0)+1}(t)}function j(e){return e[L]===e[U]}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let z,V=null,X=window.HTMLImports&&window.HTMLImports.whenReady||null;function q(e){requestAnimationFrame((function(){X?X(e):(V||(V=new Promise((e=>{z=e})),"complete"===document.readyState?z():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&z()}))),V.then((function(){e&&e()})))}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const W="__shadyCSSCachedStyle";let Y=null,Q=null;class K{constructor(){this.customStyles=[],this.enqueued=!1,q((()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()}))}enqueueDocumentValidation(){!this.enqueued&&Q&&(this.enqueued=!0,q(Q))}addCustomStyle(e){e.__seenByShadyCSS||(e.__seenByShadyCSS=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[W])return e[W];let t;return t=e.getStyle?e.getStyle():e,t}processStyles(){const e=this.customStyles;for(let t=0;t<e.length;t++){const n=e[t];if(n[W])continue;const r=this.getStyleForCustomStyle(n);if(r){const e=r.__appliedElement||r;Y&&Y(e),n[W]=e}}return e}}K.prototype.addCustomStyle=K.prototype.addCustomStyle,K.prototype.getStyleForCustomStyle=K.prototype.getStyleForCustomStyle,K.prototype.processStyles=K.prototype.processStyles,Object.defineProperties(K.prototype,{transformCallback:{get:()=>Y,set(e){Y=e}},validateCallback:{get:()=>Q,set(e){let t=!1;Q||(t=!0),Q=e,t&&this.enqueueDocumentValidation()}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Z=new R;class J{constructor(){this.customStyleInterface=null,Z.invalidCallback=G}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{Z.transformCustomStyle(e)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame((()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()}))})}prepareTemplate(e,t){if(this.ensure(),O(e))return;F[t]=e;let n=Z.transformTemplate(e,t);e._styleAst=n}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let t=0;t<e.length;t++){let n=e[t],r=this.customStyleInterface.getStyleForCustomStyle(n);r&&Z.transformCustomStyle(r)}this.customStyleInterface.enqueued=!1}}styleSubtree(e,t){if(this.ensure(),t&&T(e,t),e.shadowRoot){this.styleElement(e);let t=e.shadowRoot.children||e.shadowRoot.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}else{let t=e.children||e.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}}styleElement(e){this.ensure();let{is:t}=function(e){let t=e.localName,n="",r="";return t?t.indexOf("-")>-1?n=t:(r=t,n=e.getAttribute&&e.getAttribute("is")||""):(n=e.is,r=e.extends),{is:n,typeExtension:r}}(e),n=F[t];if((!n||!O(n))&&n&&!j(n)){(function(e){return!j(e)&&e[$]===e[U]})(n)||(this.prepareTemplate(n,t),function(e){e[$]=e[U],e._validating||(e._validating=!0,H.then((function(){e[L]=e[U],e._validating=!1})))}(n));let r=e.shadowRoot;if(r){let e=r.querySelector("style");e&&(e.__cssRules=n._styleAst,e.textContent=_(n._styleAst))}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const t=new J;let r=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(e,n,r){t.flushCustomStyles(),t.prepareTemplate(e,n)},prepareTemplateStyles(e,t,n){window.ShadyCSS.prepareTemplate(e,t,n)},prepareTemplateDom(e,t){},styleSubtree(e,n){t.flushCustomStyles(),t.styleSubtree(e,n)},styleElement(e){t.flushCustomStyles(),t.styleElement(e)},styleDocument(e){t.flushCustomStyles(),t.styleDocument(e)},getComputedStyleValue:(e,t)=>N(e,t),flushCustomStyles(){t.flushCustomStyles()},nativeCss:o,nativeShadow:e,cssBuild:n,disableRuntime:i},r&&(window.ShadyCSS.CustomStyleInterface=r)}window.ShadyCSS.ApplyShim=Z,
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(e,t){return e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ee,te,ne=/(url\()([^)]*)(\))/g,re=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function ie(e,t){if(e&&re.test(e))return e;if("//"===e)return e;if(void 0===ee){ee=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",ee="http://a/c%20d"===e.href}catch(e){}}if(t||(t=document.baseURI||window.location.href),ee)try{return new URL(e,t).href}catch(t){return e}return te||(te=document.implementation.createHTMLDocument("temp"),te.base=te.createElement("base"),te.head.appendChild(te.base),te.anchor=te.createElement("a"),te.body.appendChild(te.anchor)),te.base.href=t,te.anchor.href=e,te.anchor.href||e}function oe(e,t){return e.replace(ne,(function(e,n,r,i){return n+"'"+ie(r.replace(/["']/g,""),t)+"'"+i}))}function se(e){return e.substring(0,e.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const ae=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const le=ae&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch(e){return!1}})();let ue=window.Polymer&&window.Polymer.rootPath||se(document.baseURI||window.location.href),ce=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,he=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,pe=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,de=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,fe=window.Polymer&&window.Polymer.legacyOptimizations||!1,me=window.Polymer&&window.Polymer.legacyWarnings||!1,ge=window.Polymer&&window.Polymer.syncInitialRender||!1,ye=window.Polymer&&window.Polymer.legacyUndefined||!1,ve=window.Polymer&&window.Polymer.orderedComputed||!1,we=window.Polymer&&window.Polymer.removeNestedTemplates||!1,be=window.Polymer&&window.Polymer.fastDomIf||!1,xe=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,Ae=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,_e=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,ke=0;const Ee=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let n=ke++;return function(r){let i=r.__mixinSet;if(i&&i[n])return r;let o=t,s=o.get(r);if(!s){s=e(r),o.set(r,s);let t=Object.create(s.__mixinSet||i||null);t[n]=!0,s.__mixinSet=t}return s}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Ce={},Se={};function Oe(e,t){Ce[e]=Se[e.toLowerCase()]=t}function Te(e){return Ce[e]||Se[e.toLowerCase()]}class Ne extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let n=Te(e);return n&&t?n.querySelector(t):n}return null}attributeChangedCallback(e,t,n,r){t!==n&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=ie(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=se(t)}return this.__assetpath}register(e){if(e=e||this.id){if(pe&&void 0!==Te(e))throw Oe(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,Oe(e,this),this.querySelector("style")}}}Ne.prototype.modules=Ce,customElements.define("dom-module",Ne);function Be(e){return Ne.import(e)}function Ie(e){const t=oe((e.body?e.body:e).textContent,e.baseURI),n=document.createElement("style");return n.textContent=t,n}function Pe(e){const t=e.trim().split(/\s+/),n=[];for(let e=0;e<t.length;e++)n.push(...Me(t[e]));return n}function Me(e){const t=Be(e);if(!t)return[];if(void 0===t._styles){const e=[];e.push(...Re(t));const n=t.querySelector("template");n&&e.push(...De(n,t.assetpath)),t._styles=e}return t._styles}function De(e,t){if(!e._styles){const n=[],r=e.content.querySelectorAll("style");for(let e=0;e<r.length;e++){let i=r[e],o=i.getAttribute("include");o&&n.push(...Pe(o).filter((function(e,t,n){return n.indexOf(e)===t}))),t&&(i.textContent=oe(i.textContent,t)),n.push(i)}e._styles=n}return e._styles}function Re(e){const t=[],n=e.querySelectorAll("link[rel=import][type~=css]");for(let e=0;e<n.length;e++){let r=n[e];if(r.import){const e=r.import,n=r.hasAttribute("shady-unscoped");if(n&&!e._unscopedStyle){const t=Ie(e);t.setAttribute("shady-unscoped",""),e._unscopedStyle=t}else e._style||(e._style=Ie(e));t.push(n?e._unscopedStyle:e._style)}}return t}function Fe(e){let t=Be(e);if(t&&void 0===t._cssText){let e=function(e){let t="",n=Re(e);for(let e=0;e<n.length;e++)t+=n[e].textContent;return t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(t),n=t.querySelector("template");n&&(e+=function(e,t){let n="";const r=De(e,t);for(let e=0;e<r.length;e++){let t=r[e];t.parentNode&&t.parentNode.removeChild(t),n+=t.textContent}return n}(n,t.assetpath)),t._cssText=e||null}return t&&t._cssText||""}const Le=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/;function Ue(e){return e.indexOf(".")>=0}function $e(e){let t=e.indexOf(".");return-1===t?e:e.slice(0,t)}function He(e,t){return 0===e.indexOf(t+".")}function Ge(e,t){return 0===t.indexOf(e+".")}function je(e,t,n){return t+n.slice(e.length)}function ze(e){if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=e[n].toString().split(".");for(let e=0;e<r.length;e++)t.push(r[e])}return t.join(".")}return e}function Ve(e){return Array.isArray(e)?ze(e).split("."):e.toString().split(".")}function Xe(e,t,n){let r=e,i=Ve(t);for(let e=0;e<i.length;e++){if(!r)return;r=r[i[e]]}return n&&(n.path=i.join(".")),r}function qe(e,t,n){let r=e,i=Ve(t),o=i[i.length-1];if(i.length>1){for(let e=0;e<i.length-1;e++){if(r=r[i[e]],!r)return}r[o]=n}else r[t]=n;return i.join(".")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const We={},Ye=/-[a-z]/g,Qe=/([A-Z])/g;function Ke(e){return We[e]||(We[e]=e.indexOf("-")<0?e:e.replace(Ye,(e=>e[1].toUpperCase())))}function Ze(e){return We[e]||(We[e]=e.replace(Qe,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Je=0,et=0,tt=[],nt=0,rt=!1,it=document.createTextNode("");new window.MutationObserver((function(){rt=!1;const e=tt.length;for(let t=0;t<e;t++){let e=tt[t];if(e)try{e()}catch(e){setTimeout((()=>{throw e}))}}tt.splice(0,e),et+=e})).observe(it,{characterData:!0});const ot={after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},st={run:e=>(rt||(rt=!0,it.textContent=nt++),tt.push(e),Je++),cancel(e){const t=e-et;if(t>=0){if(!tt[t])throw new Error("invalid async handle: "+e);tt[t]=null}}},at=st,lt=Ee((e=>class extends e{static createProperties(e){const t=this.prototype;for(let n in e)n in t||t._createPropertyAccessor(n)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,n){let r=this.__data[e],i=this._shouldPropertyChange(e,t,r);return i&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=r),this.__data[e]=t,this.__dataPending[e]=t),i}_isPropertyPending(e){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,at.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())})))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const e=this.__data,t=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(e,t,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,n)),this.__dataCounter--}_shouldPropertiesChange(e,t,n){return Boolean(t)}_propertiesChanged(e,t,n){}_shouldPropertyChange(e,t,n){return n!==t&&(n==n||t==t)}attributeChangedCallback(e,t,n,r){t!==n&&this._attributeToProperty(e,n),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,n,r)}_attributeToProperty(e,t,n){if(!this.__serializing){const r=this.__dataAttributes,i=r&&r[e]||e;this[i]=this._deserializeValue(t,n||this.constructor.typeForProperty(i))}}_propertyToAttribute(e,t,n){this.__serializing=!0,n=arguments.length<3?this[e]:n,this._valueToNodeAttribute(this,n,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,n){const r=this._serializeValue(t);"class"!==n&&"name"!==n&&"slot"!==n||(e=Le(e)),void 0===r?e.removeAttribute(n):e.setAttribute(n,r)}_serializeValue(e){return"boolean"==typeof e?e?"":void 0:null!=e?e.toString():void 0}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}})),ut={};let ct=HTMLElement.prototype;for(;ct;){let e=Object.getOwnPropertyNames(ct);for(let t=0;t<e.length;t++)ut[e[t]]=!0;ct=Object.getPrototypeOf(ct)}const ht=Ee((e=>{const t=lt(e);return class extends t{static createPropertiesForAttributes(){let e=this.observedAttributes;for(let t=0;t<e.length;t++)this.prototype._createPropertyAccessor(Ke(e[t]))}static attributeNameForProperty(e){return Ze(e)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const n=this;n.hasAttribute(e)||this._valueToNodeAttribute(n,t,e)}_serializeValue(e){if("object"==typeof e){if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}}return super._serializeValue(e)}_deserializeValue(e,t){let n;switch(t){case Object:try{n=JSON.parse(e)}catch(t){n=e}break;case Array:try{n=JSON.parse(e)}catch(e){n=null}break;case Date:n=isNaN(e)?String(e):Number(e),n=new Date(n);break;default:n=super._deserializeValue(e,t)}return n}_definePropertyAccessor(e,t){!function(e,t){if(!ut[t]){let n=e[t];void 0!==n&&(e.__data?e._setPendingProperty(t,n):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=n))}}(this,e),super._definePropertyAccessor(e,t)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}})),pt={"dom-if":!0,"dom-repeat":!0};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let dt=!1,ft=!1;function mt(e){(function(){if(!dt){dt=!0;const e=document.createElement("textarea");e.placeholder="a",ft=e.placeholder===e.textContent}return ft})()&&"textarea"===e.localName&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function gt(e){let t=e.getAttribute("is");if(t&&pt[t]){let n=e;for(n.removeAttribute("is"),e=n.ownerDocument.createElement(t),n.parentNode.replaceChild(e,n),e.appendChild(n);n.attributes.length;)e.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return e}function yt(e,t){let n=t.parentInfo&&yt(e,t.parentInfo);if(!n)return e;for(let e=n.firstChild,r=0;e;e=e.nextSibling)if(t.parentIndex===r++)return e}function vt(e,t,n,r){r.id&&(t[r.id]=n)}function wt(e,t,n){if(n.events&&n.events.length)for(let r,i=0,o=n.events;i<o.length&&(r=o[i]);i++)e._addMethodEventListenerToNode(t,r.name,r.value,e)}function bt(e,t,n,r){n.templateInfo&&(t._templateInfo=n.templateInfo,t._parentTemplateInfo=r)}const xt=Ee((e=>class extends e{static _parseTemplate(e,t){if(!e._templateInfo){let n=e._templateInfo={};n.nodeInfoList=[],n.nestedTemplate=Boolean(t),n.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,n,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,n){return this._parseTemplateNode(e.content,t,n)}static _parseTemplateNode(e,t,n){let r=!1,i=e;return"template"!=i.localName||i.hasAttribute("preserve-content")?"slot"===i.localName&&(t.hasInsertionPoint=!0):r=this._parseTemplateNestedTemplate(i,t,n)||r,mt(i),i.firstChild&&this._parseTemplateChildNodes(i,t,n),i.hasAttributes&&i.hasAttributes()&&(r=this._parseTemplateNodeAttributes(i,t,n)||r),r||n.noted}static _parseTemplateChildNodes(e,t,n){if("script"!==e.localName&&"style"!==e.localName)for(let r,i=e.firstChild,o=0;i;i=r){if("template"==i.localName&&(i=gt(i)),r=i.nextSibling,i.nodeType===Node.TEXT_NODE){let n=r;for(;n&&n.nodeType===Node.TEXT_NODE;)i.textContent+=n.textContent,r=n.nextSibling,e.removeChild(n),n=r;if(t.stripWhiteSpace&&!i.textContent.trim()){e.removeChild(i);continue}}let s={parentIndex:o,parentInfo:n};this._parseTemplateNode(i,t,s)&&(s.infoIndex=t.nodeInfoList.push(s)-1),i.parentNode&&o++}}static _parseTemplateNestedTemplate(e,t,n){let r=e,i=this._parseTemplate(r,t);return(i.content=r.content.ownerDocument.createDocumentFragment()).appendChild(r.content),n.templateInfo=i,!0}static _parseTemplateNodeAttributes(e,t,n){let r=!1,i=Array.from(e.attributes);for(let o,s=i.length-1;o=i[s];s--)r=this._parseTemplateNodeAttribute(e,t,n,o.name,o.value)||r;return r}static _parseTemplateNodeAttribute(e,t,n,r,i){return"on-"===r.slice(0,3)?(e.removeAttribute(r),n.events=n.events||[],n.events.push({name:r.slice(3),value:i}),!0):"id"===r&&(n.id=i,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e,t){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let n=(t=t||this.constructor._parseTemplate(e)).nodeInfoList,r=t.content||e.content,i=document.importNode(r,!0);i.__noInsertionPoint=!t.hasInsertionPoint;let o=i.nodeList=new Array(n.length);i.$={};for(let e,r=0,s=n.length;r<s&&(e=n[r]);r++){let n=o[r]=yt(i,e);vt(0,i.$,n,e),bt(0,n,e,t),wt(this,n,e)}return i}_addMethodEventListenerToNode(e,t,n,r){let i=function(e,t,n){return e=e._methodHost||e,function(t){e[n]&&e[n](t,t.detail)}}(r=r||e,0,n);return this._addEventListenerToNode(e,t,i),i}_addEventListenerToNode(e,t,n){e.addEventListener(t,n)}_removeEventListenerFromNode(e,t,n){e.removeEventListener(t,n)}}));
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let At=0;const _t=[],kt={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Et=/[A-Z]/;function Ct(e,t,n){let r=e[t];if(r){if(!e.hasOwnProperty(t)&&(r=e[t]=Object.create(e[t]),n))for(let e in r){let t=r[e],n=r[e]=Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[e]}}else r=e[t]={};return r}function St(e,t,n,r,i,o){if(t){let s=!1;const a=At++;for(let l in n){let u=t[i?$e(l):l];if(u)for(let t,c=0,h=u.length;c<h&&(t=u[c]);c++)t.info&&t.info.lastRun===a||i&&!Tt(l,t.trigger)||(t.info&&(t.info.lastRun=a),t.fn(e,l,n,r,t.info,i,o),s=!0)}return s}return!1}function Ot(e,t,n,r,i,o,s,a){let l=!1,u=t[s?$e(r):r];if(u)for(let t,c=0,h=u.length;c<h&&(t=u[c]);c++)t.info&&t.info.lastRun===n||s&&!Tt(r,t.trigger)||(t.info&&(t.info.lastRun=n),t.fn(e,r,i,o,t.info,s,a),l=!0);return l}function Tt(e,t){if(t){let n=t.name;return n==e||!(!t.structured||!He(n,e))||!(!t.wildcard||!Ge(n,e))}return!0}function Nt(e,t,n,r,i){let o="string"==typeof i.method?e[i.method]:i.method,s=i.property;o?o.call(e,e.__data[s],r[s]):i.dynamicFn}function Bt(e,t,n){let r=$e(t);if(r!==t){return It(e,Ze(r)+"-changed",n[t],t),!0}return!1}function It(e,t,n,r){let i={value:n,queueProperty:!0};r&&(i.path=r),Le(e).dispatchEvent(new CustomEvent(t,{detail:i}))}function Pt(e,t,n,r,i,o){let s=(o?$e(t):t)!=t?t:null,a=s?Xe(e,s):e.__data[t];s&&void 0===a&&(a=n[t]),It(e,i.eventName,a,s)}function Mt(e,t,n,r,i){let o=e.__data[t];ce&&(o=ce(o,i.attrName,"attribute",e)),e._propertyToAttribute(t,i.attrName,o)}function Dt(e,t,n,r){let i=e[kt.COMPUTE];if(i)if(ve){At++;const o=function(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const n=e[kt.COMPUTE];let r,{counts:i,ready:o,total:s}=function(e){const t=e.__computeInfo,n={},r=e[kt.COMPUTE],i=[];let o=0;for(let e in t){const r=t[e];o+=n[e]=r.args.filter((e=>!e.literal)).length+(r.dynamicFn?1:0)}for(let e in r)t[e]||i.push(e);return{counts:n,ready:i,total:o}}(e);for(;r=o.shift();){t.set(r,t.size);const e=n[r];e&&e.forEach((e=>{const t=e.info.methodInfo;--s,0==--i[t]&&o.push(t)}))}e.constructor.__orderedComputedDeps=t}return t}(e),s=[];for(let e in t)Ft(e,i,s,o,r);let a;for(;a=s.shift();)Lt(e,"",t,n,a)&&Ft(a.methodInfo,i,s,o,r);Object.assign(n,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null}else{let o=t;for(;St(e,i,o,n,r);)Object.assign(n,e.__dataOld),Object.assign(t,e.__dataPending),o=e.__dataPending,e.__dataPending=null}}const Rt=(e,t,n)=>{let r=0,i=t.length-1,o=-1;for(;r<=i;){const s=r+i>>1,a=n.get(t[s].methodInfo)-n.get(e.methodInfo);if(a<0)r=s+1;else{if(!(a>0)){o=s;break}i=s-1}}o<0&&(o=i+1),t.splice(o,0,e)},Ft=(e,t,n,r,i)=>{const o=t[i?$e(e):e];if(o)for(let t=0;t<o.length;t++){const s=o[t];s.info.lastRun===At||i&&!Tt(e,s.trigger)||(s.info.lastRun=At,Rt(s.info,n,r))}};function Lt(e,t,n,r,i){let o=Vt(e,t,n,r,i);if(o===_t)return!1;let s=i.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[s]?e._setPendingProperty(s,o,!0):(e[s]=o,!1)}function Ut(e,t,n,r,i,o,s){n.bindings=n.bindings||[];let a={kind:r,target:i,parts:o,literal:s,isCompound:1!==o.length};if(n.bindings.push(a),function(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}(a)){let{event:e,negate:t}=a.parts[0];a.listenerEvent=e||Ze(i)+"-changed",a.listenerNegate=t}let l=t.nodeInfoList.length;for(let n=0;n<a.parts.length;n++){let r=a.parts[n];r.compoundIndex=n,$t(e,t,a,r,l)}}function $t(e,t,n,r,i){if(!r.literal)if("attribute"===n.kind&&"-"===n.target[0]);else{let o=r.dependencies,s={index:i,binding:n,part:r,evaluator:e};for(let n=0;n<o.length;n++){let r=o[n];"string"==typeof r&&(r=Qt(r),r.wildcard=!0),e._addTemplatePropertyEffect(t,r.rootProperty,{fn:Ht,info:s,trigger:r})}}}function Ht(e,t,n,r,i,o,s){let a=s[i.index],l=i.binding,u=i.part;if(o&&u.source&&t.length>u.source.length&&"property"==l.kind&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let r=n[t];t=je(u.source,l.target,t),a._setPendingPropertyOrPath(t,r,!1,!0)&&e._enqueueClient(a)}else{let s=i.evaluator._evaluateBinding(e,u,t,n,r,o);s!==_t&&function(e,t,n,r,i){i=function(e,t,n,r){if(n.isCompound){let i=e.__dataCompoundStorage[n.target];i[r.compoundIndex]=t,t=i.join("")}"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t));return t}(t,i,n,r),ce&&(i=ce(i,n.target,n.kind,t));if("attribute"==n.kind)e._valueToNodeAttribute(t,i,n.target);else{let r=n.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[r]?t[kt.READ_ONLY]&&t[kt.READ_ONLY][r]||t._setPendingProperty(r,i)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,r,i)}}(e,a,l,u,s)}}function Gt(e,t){if(t.isCompound){let n=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),r=t.parts,i=new Array(r.length);for(let e=0;e<r.length;e++)i[e]=r[e].literal;let o=t.target;n[o]=i,t.literal&&"property"==t.kind&&("className"===o&&(e=Le(e)),e[o]=t.literal)}}function jt(e,t,n){if(n.listenerEvent){let r=n.parts[0];e.addEventListener(n.listenerEvent,(function(e){!function(e,t,n,r,i){let o,s=e.detail,a=s&&s.path;a?(r=je(n,r,a),o=s&&s.value):o=e.currentTarget[n],o=i?!o:o,t[kt.READ_ONLY]&&t[kt.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,o,!0,Boolean(a))||s&&s.queueProperty||t._invalidateProperties()}(e,t,n.target,r.source,r.negate)}))}}function zt(e,t,n,r,i,o){o=t.static||o&&("object"!=typeof o||o[t.methodName]);let s={methodName:t.methodName,args:t.args,methodInfo:i,dynamicFn:o};for(let i,o=0;o<t.args.length&&(i=t.args[o]);o++)i.literal||e._addPropertyEffect(i.rootProperty,n,{fn:r,info:s,trigger:i});return o&&e._addPropertyEffect(t.methodName,n,{fn:r,info:s}),s}function Vt(e,t,n,r,i){let o=e._methodHost||e,s=o[i.methodName];if(s){let r=e._marshalArgs(i.args,t,n);return r===_t?_t:s.apply(o,r)}i.dynamicFn}const Xt=[],qt=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function Wt(e){let t="";for(let n=0;n<e.length;n++){t+=e[n].literal||""}return t}function Yt(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:Xt};if(t[2].trim()){return function(e,t){return t.args=e.map((function(e){let n=Qt(e);return n.literal||(t.static=!1),n}),this),t}(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function Qt(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t,value:"",literal:!1},r=t[0];switch("-"===r&&(r=t[1]),r>="0"&&r<="9"&&(r="#"),r){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.rootProperty=$e(t),n.structured=Ue(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n}function Kt(e,t,n){let r=Xe(e,n);return void 0===r&&(r=t[n]),r}function Zt(e,t,n,r){const i={indexSplices:r};ye&&!e._overrideLegacyUndefined&&(t.splices=i),e.notifyPath(n+".splices",i),e.notifyPath(n+".length",t.length),ye&&!e._overrideLegacyUndefined&&(i.indexSplices=[])}function Jt(e,t,n,r,i,o){Zt(e,t,n,[{index:r,addedCount:i,removed:o,object:t,type:"splice"}])}const en=Ee((e=>{const t=xt(ht(e));return class extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return kt}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(tn.length){let e=tn[tn.length-1];e._enqueueClient(this),this.__dataHost=e}}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[kt.READ_ONLY];for(let n in e)t&&t[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=e[n])}_addPropertyEffect(e,t,n){this._createPropertyAccessor(e,t==kt.READ_ONLY);let r=Ct(this,t,!0)[e];r||(r=this[t][e]=[]),r.push(n)}_removePropertyEffect(e,t,n){let r=Ct(this,t,!0)[e],i=r.indexOf(n);i>=0&&r.splice(i,1)}_hasPropertyEffect(e,t){let n=this[t];return Boolean(n&&n[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,kt.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,kt.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,kt.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,kt.COMPUTE)}_setPendingPropertyOrPath(e,t,n,r){if(r||$e(Array.isArray(e)?e[0]:e)!==e){if(!r){let n=Xe(this,e);if(!(e=qe(this,e,t))||!super._shouldPropertyChange(e,t,n))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,n))return function(e,t,n){let r=e.__dataLinkedPaths;if(r){let i;for(let o in r){let s=r[o];Ge(o,t)?(i=je(o,s,t),e._setPendingPropertyOrPath(i,n,!0,!0)):Ge(s,t)&&(i=je(s,o,t),e._setPendingPropertyOrPath(i,n,!0,!0))}}}(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,n);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,n){n===e[t]&&"object"!=typeof n||("className"===t&&(e=Le(e)),e[t]=n)}_setPendingProperty(e,t,n){let r=this.__dataHasPaths&&Ue(e),i=r?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,i[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),r?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(r||this[kt.NOTIFY]&&this[kt.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=n),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let n=e[t];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let n in e)!t&&this[kt.READ_ONLY]&&this[kt.READ_ONLY][n]||this._setPendingPropertyOrPath(n,e[n],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,t,n){let r,i=this.__dataHasPaths;this.__dataHasPaths=!1,Dt(this,t,n,i),r=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(t,n,i),this._flushClients(),St(this,this[kt.REFLECT],t,n,i),St(this,this[kt.OBSERVE],t,n,i),r&&function(e,t,n,r,i){let o,s,a=e[kt.NOTIFY],l=At++;for(let s in t)t[s]&&(a&&Ot(e,a,l,s,n,r,i)||i&&Bt(e,s,n))&&(o=!0);o&&(s=e.__dataHost)&&s._invalidateProperties&&s._invalidateProperties()}(this,r,t,n,i),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,t,n){this[kt.PROPAGATE]&&St(this,this[kt.PROPAGATE],e,t,n),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,e,t,n)}_runEffectsForTemplate(e,t,n,r){const i=(t,r)=>{St(this,e.propertyEffects,t,n,r,e.nodeList);for(let i=e.firstChild;i;i=i.nextSibling)this._runEffectsForTemplate(i,t,n,r)};e.runEffects?e.runEffects(i,t,r):i(t,r)}linkPaths(e,t){e=ze(e),t=ze(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=ze(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let n={path:""};Zt(this,Xe(this,e,n),n.path,t)}get(e,t){return Xe(t||this,e)}set(e,t,n){n?qe(n,e,t):this[kt.READ_ONLY]&&this[kt.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let n={path:""},r=Xe(this,e,n),i=r.length,o=r.push(...t);return t.length&&Jt(this,r,n.path,i,t.length,[]),o}pop(e){let t={path:""},n=Xe(this,e,t),r=Boolean(n.length),i=n.pop();return r&&Jt(this,n,t.path,n.length,0,[i]),i}splice(e,t,n,...r){let i,o={path:""},s=Xe(this,e,o);return t<0?t=s.length-Math.floor(-t):t&&(t=Math.floor(t)),i=2===arguments.length?s.splice(t):s.splice(t,n,...r),(r.length||i.length)&&Jt(this,s,o.path,t,r.length,i),i}shift(e){let t={path:""},n=Xe(this,e,t),r=Boolean(n.length),i=n.shift();return r&&Jt(this,n,t.path,0,0,[i]),i}unshift(e,...t){let n={path:""},r=Xe(this,e,n),i=r.unshift(...t);return t.length&&Jt(this,r,n.path,0,t.length,[]),i}notifyPath(e,t){let n;if(1==arguments.length){let r={path:""};t=Xe(this,e,r),n=r.path}else n=Array.isArray(e)?ze(e):e;this._setPendingPropertyOrPath(n,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){var n;this._addPropertyEffect(e,kt.READ_ONLY),t&&(this["_set"+(n=e,n[0].toUpperCase()+n.substring(1))]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,n){let r={property:e,method:t,dynamicFn:Boolean(n)};this._addPropertyEffect(e,kt.OBSERVE,{fn:Nt,info:r,trigger:{name:e}}),n&&this._addPropertyEffect(t,kt.OBSERVE,{fn:Nt,info:r,trigger:{name:t}})}_createMethodObserver(e,t){let n=Yt(e);if(!n)throw new Error("Malformed observer expression '"+e+"'");zt(this,n,kt.OBSERVE,Vt,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,kt.NOTIFY,{fn:Pt,info:{eventName:Ze(e)+"-changed",property:e}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]||this._addPropertyEffect(e,kt.REFLECT,{fn:Mt,info:{attrName:t}})}_createComputedProperty(e,t,n){let r=Yt(t);if(!r)throw new Error("Malformed computed expression '"+t+"'");const i=zt(this,r,kt.COMPUTE,Lt,e,n);Ct(this,"__computeInfo")[e]=i}_marshalArgs(e,t,n){const r=this.__data,i=[];for(let o=0,s=e.length;o<s;o++){let{name:s,structured:a,wildcard:l,value:u,literal:c}=e[o];if(!c)if(l){const e=Ge(s,t),i=Kt(r,n,e?t:s);u={path:e?t:s,value:i,base:e?Xe(r,s):i}}else u=a?Kt(r,n,s):r[s];if(ye&&!this._overrideLegacyUndefined&&void 0===u&&e.length>1)return _t;i[o]=u}return i}static addPropertyEffect(e,t,n){this.prototype._addPropertyEffect(e,t,n)}static createPropertyObserver(e,t,n){this.prototype._createPropertyObserver(e,t,n)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,n){this.prototype._createComputedProperty(e,t,n)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let n=this.constructor._parseTemplate(e),r=this.__preBoundTemplateInfo==n;if(!r)for(let e in n.propertyEffects)this._createPropertyAccessor(e);if(t)if(n=Object.create(n),n.wasPreBound=r,this.__templateInfo){const t=e._parentTemplateInfo||this.__templateInfo,r=t.lastChild;n.parent=t,t.lastChild=n,n.previousSibling=r,r?r.nextSibling=n:t.firstChild=n}else this.__templateInfo=n;else this.__preBoundTemplateInfo=n;return n}static _addTemplatePropertyEffect(e,t,n){(e.hostProps=e.hostProps||{})[t]=!0;let r=e.propertyEffects=e.propertyEffects||{};(r[t]=r[t]||[]).push(n)}_stampTemplate(e,t){t=t||this._bindTemplate(e,!0),tn.push(this);let n=super._stampTemplate(e,t);if(tn.pop(),t.nodeList=n.nodeList,!t.wasPreBound){let e=t.childNodes=[];for(let t=n.firstChild;t;t=t.nextSibling)e.push(t)}return n.templateInfo=t,function(e,t){let{nodeList:n,nodeInfoList:r}=t;if(r.length)for(let t=0;t<r.length;t++){let i=r[t],o=n[t],s=i.bindings;if(s)for(let t=0;t<s.length;t++){let n=s[t];Gt(o,n),jt(o,e,n)}o.__dataHost=e}}(this,t),this.__dataClientsReady&&(this._runEffectsForTemplate(t,this.__data,null,!1),this._flushClients()),n}_removeBoundDom(e){const t=e.templateInfo,{previousSibling:n,nextSibling:r,parent:i}=t;n?n.nextSibling=r:i&&(i.firstChild=r),r?r.previousSibling=n:i&&(i.lastChild=n),t.nextSibling=t.previousSibling=null;let o=t.childNodes;for(let e=0;e<o.length;e++){let t=o[e];Le(Le(t).parentNode).removeChild(t)}}static _parseTemplateNode(e,n,r){let i=t._parseTemplateNode.call(this,e,n,r);if(e.nodeType===Node.TEXT_NODE){let t=this._parseBindings(e.textContent,n);t&&(e.textContent=Wt(t)||" ",Ut(this,n,r,"text","textContent",t),i=!0)}return i}static _parseTemplateNodeAttribute(e,n,r,i,o){let s=this._parseBindings(o,n);if(s){let t=i,o="property";Et.test(i)?o="attribute":"$"==i[i.length-1]&&(i=i.slice(0,-1),o="attribute");let a=Wt(s);return a&&"attribute"==o&&("class"==i&&e.hasAttribute("class")&&(a+=" "+e.getAttribute(i)),e.setAttribute(i,a)),"attribute"==o&&"disable-upgrade$"==t&&e.setAttribute(i,""),"input"===e.localName&&"value"===t&&e.setAttribute(t,""),e.removeAttribute(t),"property"===o&&(i=Ke(i)),Ut(this,n,r,o,i,s,a),!0}return t._parseTemplateNodeAttribute.call(this,e,n,r,i,o)}static _parseTemplateNestedTemplate(e,n,r){let i=t._parseTemplateNestedTemplate.call(this,e,n,r);const o=e.parentNode,s=r.templateInfo,a="dom-if"===o.localName,l="dom-repeat"===o.localName;we&&(a||l)&&(o.removeChild(e),(r=r.parentInfo).templateInfo=s,r.noted=!0,i=!1);let u=s.hostProps;if(be&&a)u&&(n.hostProps=Object.assign(n.hostProps||{},u),we||(r.parentInfo.noted=!0));else{let e="{";for(let t in u){Ut(this,n,r,"property","_host_"+t,[{mode:e,source:t,dependencies:[t],hostProp:!0}])}}return i}static _parseBindings(e,t){let n,r=[],i=0;for(;null!==(n=qt.exec(e));){n.index>i&&r.push({literal:e.slice(i,n.index)});let o=n[1][0],s=Boolean(n[2]),a=n[3].trim(),l=!1,u="",c=-1;"{"==o&&(c=a.indexOf("::"))>0&&(u=a.substring(c+2),a=a.substring(0,c),l=!0);let h=Yt(a),p=[];if(h){let{args:e,methodName:n}=h;for(let t=0;t<e.length;t++){let n=e[t];n.literal||p.push(n)}let r=t.dynamicFns;(r&&r[n]||h.static)&&(p.push(n),h.dynamicFn=!0)}else p.push(a);r.push({source:a,mode:o,negate:s,customEvent:l,signature:h,dependencies:p,event:u}),i=qt.lastIndex}if(i&&i<e.length){let t=e.substring(i);t&&r.push({literal:t})}return r.length?r:null}static _evaluateBinding(e,t,n,r,i,o){let s;return s=t.signature?Vt(e,n,r,0,t.signature):n!=t.source?Xe(e,t.source):o&&Ue(n)?Xe(e,n):e.__data[n],t.negate&&(s=!s),s}}})),tn=[];const nn=Ee((e=>{const t=lt(e);function n(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof i?t:null}function r(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const n=e.properties;n&&(t=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(e){const t={};for(let n in e){const r=e[n];t[n]="function"==typeof r?{type:r}:r}return t}(n))}e.__ownProperties=t}return e.__ownProperties}class i extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const e=this._properties;this.__observedAttributes=e?Object.keys(e).map((e=>this.prototype._addPropertyToAttributeMap(e))):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=n(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=r(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=n(this);this.__properties=Object.assign({},e&&e._properties,r(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return i})),rn=window.ShadyCSS&&window.ShadyCSS.cssBuild,on=Ee((e=>{const t=nn(en(e));function n(e,t,n,r){n.computed&&(n.readOnly=!0),n.computed&&(e._hasReadOnlyEffect(t)||e._createComputedProperty(t,n.computed,r)),n.readOnly&&!e._hasReadOnlyEffect(t)?e._createReadOnlyProperty(t,!n.computed):!1===n.readOnly&&e._hasReadOnlyEffect(t),n.reflectToAttribute&&!e._hasReflectEffect(t)?e._createReflectedProperty(t):!1===n.reflectToAttribute&&e._hasReflectEffect(t),n.notify&&!e._hasNotifyEffect(t)?e._createNotifyingProperty(t):!1===n.notify&&e._hasNotifyEffect(t),n.observer&&e._createPropertyObserver(t,n.observer,r[n.observer]),e._addPropertyToAttributeMap(t)}function r(e,t,n,r){if(!rn){const i=t.content.querySelectorAll("style"),o=De(t),s=function(e){let t=Be(e);return t?Re(t):[]}(n),a=t.content.firstElementChild;for(let n=0;n<s.length;n++){let i=s[n];i.textContent=e._processStyleText(i.textContent,r),t.content.insertBefore(i,a)}let l=0;for(let t=0;t<o.length;t++){let n=o[t],s=i[l];s!==n?(n=n.cloneNode(!0),s.parentNode.insertBefore(n,s)):l++,n.textContent=e._processStyleText(n.textContent,r)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,n),_e&&rn&&le){const n=t.content.querySelectorAll("style");if(n){let t="";Array.from(n).forEach((e=>{t+=e.textContent,e.parentNode.removeChild(e)})),e._styleSheet=new CSSStyleSheet,e._styleSheet.replaceSync(t)}}}return class extends t{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){t._finalizeClass.call(this);const e=((n=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",n))||(n.__ownObservers=n.hasOwnProperty(JSCompiler_renameProperty("observers",n))?n.observers:null),n.__ownObservers);var n;e&&this.createObservers(e,this._properties),this._prepareTemplate()}static _prepareTemplate(){let e=this.template;e&&("string"==typeof e?e=null:fe||(e=e.cloneNode(!0))),this.prototype._template=e}static createProperties(e){for(let t in e)n(this.prototype,t,e[t],e)}static createObservers(e,t){const n=this.prototype;for(let r=0;r<e.length;r++)n._createMethodObserver(e[r],t)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const e=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==e?e:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(e){let t=null;if(e&&(!pe||de)&&(t=Ne.import(e,"template"),pe&&!t))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${e}`);return t}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(e){this._template=e}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=this.importMeta;if(e)this._importPath=se(e.url);else{const e=Ne.import(this.is);this._importPath=e&&e.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=ue,this.importPath=this.constructor.importPath;let e=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let n in t){let r=t[n];"value"in r&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[n]=r)}}return e.__propertyDefaults}(this.constructor);if(e)for(let t in e){let n=e[t];if(this._canApplyPropertyDefault(t)){let e="function"==typeof n.value?n.value.call(this):n.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e}}}_canApplyPropertyDefault(e){return!this.hasOwnProperty(e)}static _processStyleText(e,t){return oe(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const n=this.importPath;r(this,t,e,n?ie(n):""),this.prototype._bindTemplate(t)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(e){const t=Le(this);if(t.attachShadow)return e?(t.shadowRoot||(t.attachShadow({mode:"open",shadyUpgradeFragment:e}),t.shadowRoot.appendChild(e),this.constructor._styleSheet&&(t.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),ge&&window.ShadyDOM&&window.ShadyDOM.flushInitial(t.shadowRoot),t.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}resolveUrl(e,t){return!t&&this.importPath&&(t=ie(this.importPath)),ie(e,t)}static _parseTemplateContent(e,n,r){return n.dynamicFns=n.dynamicFns||this._properties,t._parseTemplateContent.call(this,e,n,r)}static _addTemplatePropertyEffect(e,n,r){return me&&!(n in this._properties)&&(!r.info.part.signature||!r.info.part.signature.static)&&!r.info.part.hostProp&&e.nestedTemplate,t._addTemplatePropertyEffect.call(this,e,n,r)}}}));
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class sn{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run((()=>{this._timer=null,an.delete(this),this._callback()}))}cancel(){this.isActive()&&(this._cancelAsync(),an.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(e,t,n){return e instanceof sn?e._cancelAsync():e=new sn,e.setConfig(t,n),e}}let an=new Set;const ln=function(e){an.add(e)},un=function(){const e=Boolean(an.size);return an.forEach((e=>{try{e.flush()}catch(e){setTimeout((()=>{throw e}))}})),e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let cn="string"==typeof document.head.style.touchAction,hn="__polymerGestures",pn="__polymerGesturesHandled",dn="__polymerGesturesTouchAction",fn=["mousedown","mousemove","mouseup","click"],mn=[0,1,4,2],gn=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function yn(e){return fn.indexOf(e)>-1}let vn=!1;function wn(e){if(!yn(e)&&"touchend"!==e)return cn&&vn&&he?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){vn=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let bn=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const xn=[],An={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},_n={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function kn(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let n=e.getRootNode();if(e.id){let r=n.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<r.length;e++)t.push(r[e])}}return t}let En=function(e){let t=e.sourceCapabilities;var n;if((!t||t.firesTouchEvents)&&(e[pn]={skip:!0},"click"===e.type)){let t=!1,r=Bn(e);for(let e=0;e<r.length;e++){if(r[e].nodeType===Node.ELEMENT_NODE)if("label"===r[e].localName)xn.push(r[e]);else if(n=r[e],An[n.localName]){let n=kn(r[e]);for(let e=0;e<n.length;e++)t=t||xn.indexOf(n[e])>-1}if(r[e]===On.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation()}};function Cn(e){let t=bn?["click"]:fn;for(let n,r=0;r<t.length;r++)n=t[r],e?(xn.length=0,document.addEventListener(n,En,!0)):document.removeEventListener(n,En,!0)}function Sn(e){let t=e.type;if(!yn(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!gn&&(t=mn[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let On={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function Tn(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function Nn(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",(function(e){On.mouse.mouseIgnoreJob||Cn(!0),On.mouse.target=Bn(e)[0],On.mouse.mouseIgnoreJob=sn.debounce(On.mouse.mouseIgnoreJob,ot.after(2500),(function(){Cn(),On.mouse.target=null,On.mouse.mouseIgnoreJob=null}))}),!!vn&&{passive:!0});const Bn=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],In={},Pn=[];function Mn(e){const t=Bn(e);return t.length>0?t[0]:e.target}function Dn(e){let t,n=e.type,r=e.currentTarget.__polymerGestures;if(!r)return;let i=r[n];if(i){if(!e[pn]&&(e[pn]={},"touch"===n.slice(0,5))){let t=e.changedTouches[0];if("touchstart"===n&&1===e.touches.length&&(On.touch.id=t.identifier),On.touch.id!==t.identifier)return;cn||"touchstart"!==n&&"touchmove"!==n||function(e){let t=e.changedTouches[0],n=e.type;if("touchstart"===n)On.touch.x=t.clientX,On.touch.y=t.clientY,On.touch.scrollDecided=!1;else if("touchmove"===n){if(On.touch.scrollDecided)return;On.touch.scrollDecided=!0;let n=function(e){let t="auto",n=Bn(e);for(let e,r=0;r<n.length;r++)if(e=n[r],e[dn]){t=e[dn];break}return t}(e),r=!1,i=Math.abs(On.touch.x-t.clientX),o=Math.abs(On.touch.y-t.clientY);e.cancelable&&("none"===n?r=!0:"pan-x"===n?r=o>i:"pan-y"===n&&(r=i>o)),r?e.preventDefault():Hn("track")}}(e)}if(t=e[pn],!t.skip){for(let n,r=0;r<Pn.length;r++)n=Pn[r],i[n.name]&&!t[n.name]&&n.flow&&n.flow.start.indexOf(e.type)>-1&&n.reset&&n.reset();for(let r,o=0;o<Pn.length;o++)r=Pn[o],i[r.name]&&!t[r.name]&&(t[r.name]=!0,r[n](e))}}}function Rn(e,t,n){return!!In[t]&&(function(e,t,n){let r=In[t],i=r.deps,o=r.name,s=e[hn];s||(e[hn]=s={});for(let t,n,r=0;r<i.length;r++)t=i[r],bn&&yn(t)&&"click"!==t||(n=s[t],n||(s[t]=n={_count:0}),0===n._count&&e.addEventListener(t,Dn,wn(t)),n[o]=(n[o]||0)+1,n._count=(n._count||0)+1);e.addEventListener(t,n),r.touchAction&&Un(e,r.touchAction)}(e,t,n),!0)}function Fn(e,t,n){return!!In[t]&&(function(e,t,n){let r=In[t],i=r.deps,o=r.name,s=e[hn];if(s)for(let t,n,r=0;r<i.length;r++)t=i[r],n=s[t],n&&n[o]&&(n[o]=(n[o]||1)-1,n._count=(n._count||1)-1,0===n._count&&e.removeEventListener(t,Dn,wn(t)));e.removeEventListener(t,n)}(e,t,n),!0)}function Ln(e){Pn.push(e);for(let t=0;t<e.emits.length;t++)In[e.emits[t]]=e}function Un(e,t){cn&&e instanceof HTMLElement&&st.run((()=>{e.style.touchAction=t})),e[dn]=t}function $n(e,t,n){let r=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(r.detail=n,Le(e).dispatchEvent(r),r.defaultPrevented){let e=n.preventer||n.sourceEvent;e&&e.preventDefault&&e.preventDefault()}}function Hn(e){let t=function(e){for(let t,n=0;n<Pn.length;n++){t=Pn[n];for(let n,r=0;r<t.emits.length;r++)if(n=t.emits[r],n===e)return t}return null}(e);t.info&&(t.info.prevent=!0)}function Gn(e,t,n,r){t&&$n(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:r,prevent:function(e){return Hn(e)}})}function jn(e,t,n){if(e.prevent)return!1;if(e.started)return!0;let r=Math.abs(e.x-t),i=Math.abs(e.y-n);return r>=5||i>=5}function zn(e,t,n){if(!t)return;let r,i=e.moves[e.moves.length-2],o=e.moves[e.moves.length-1],s=o.x-e.x,a=o.y-e.y,l=0;i&&(r=o.x-i.x,l=o.y-i.y),$n(t,"track",{state:e.state,x:n.clientX,y:n.clientY,dx:s,dy:a,ddx:r,ddy:l,sourceEvent:n,hover:function(){return function(e,t){let n=document.elementFromPoint(e,t),r=n;for(;r&&r.shadowRoot&&!window.ShadyDOM;){let i=r;if(r=r.shadowRoot.elementFromPoint(e,t),i===r)break;r&&(n=r)}return n}(n.clientX,n.clientY)}})}function Vn(e,t,n){let r=Math.abs(t.clientX-e.x),i=Math.abs(t.clientY-e.y),o=Mn(n||t);!o||_n[o.localName]&&o.hasAttribute("disabled")||(isNaN(r)||isNaN(i)||r<=25&&i<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=Mn(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let n=t.getBoundingClientRect(),r=e.pageX,i=e.pageY;return!(r>=n.left&&r<=n.right&&i>=n.top&&i<=n.bottom)}return!1}(t))&&(e.prevent||$n(o,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:n}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/Ln({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Nn(this.info)},mousedown:function(e){if(!Sn(e))return;let t=Mn(e),n=this;Tn(this.info,(function(e){Sn(e)||(Gn("up",t,e),Nn(n.info))}),(function(e){Sn(e)&&Gn("up",t,e),Nn(n.info)})),Gn("down",t,e)},touchstart:function(e){Gn("down",Mn(e),e.changedTouches[0],e)},touchend:function(e){Gn("up",Mn(e),e.changedTouches[0],e)}}),Ln({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Nn(this.info)},mousedown:function(e){if(!Sn(e))return;let t=Mn(e),n=this,r=function(e){let r=e.clientX,i=e.clientY;jn(n.info,r,i)&&(n.info.state=n.info.started?"mouseup"===e.type?"end":"track":"start","start"===n.info.state&&Hn("tap"),n.info.addMove({x:r,y:i}),Sn(e)||(n.info.state="end",Nn(n.info)),t&&zn(n.info,t,e),n.info.started=!0)};Tn(this.info,r,(function(e){n.info.started&&r(e),Nn(n.info)})),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=Mn(e),n=e.changedTouches[0],r=n.clientX,i=n.clientY;jn(this.info,r,i)&&("start"===this.info.state&&Hn("tap"),this.info.addMove({x:r,y:i}),zn(this.info,t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=Mn(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),zn(this.info,t,n))}}),Ln({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){Sn(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){Sn(e)&&Vn(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){Vn(this.info,e.changedTouches[0],e)}});const Xn=Ee((e=>class extends e{_addEventListenerToNode(e,t,n){Rn(e,t,n)||super._addEventListenerToNode(e,t,n)}_removeEventListenerFromNode(e,t,n){Fn(e,t,n)||super._removeEventListenerFromNode(e,t,n)}})),qn=/:host\(:dir\((ltr|rtl)\)\)/g,Wn=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,Yn=/:dir\((?:ltr|rtl)\)/,Qn=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),Kn=[];
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let Zn=null,Jn="";function er(){Jn=document.documentElement.getAttribute("dir")}function tr(e){if(!e.__autoDirOptOut){e.setAttribute("dir",Jn)}}function nr(){er(),Jn=document.documentElement.getAttribute("dir");for(let e=0;e<Kn.length;e++)tr(Kn[e])}const rr=Ee((e=>{Qn||Zn||(er(),Zn=new MutationObserver(nr),Zn.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=ht(e);class n extends t{static _processStyleText(e,n){return e=t._processStyleText.call(this,e,n),!Qn&&Yn.test(e)&&(e=this._replaceDirInCssText(e),this.__activateDir=!0),e}static _replaceDirInCssText(e){let t=e;return t=t.replace(qn,':host([dir="$1"])'),t=t.replace(Wn,':host([dir="$2"]) $1'),t}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(Zn&&Zn.takeRecords().length&&nr(),Kn.push(this),tr(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const e=Kn.indexOf(this);e>-1&&Kn.splice(e,1)}}}return n.__activateDir=!1,n}));
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let ir=!1,or=[],sr=[];function ar(){ir=!0,requestAnimationFrame((function(){ir=!1,function(e){for(;e.length;)lr(e.shift())}(or),setTimeout((function(){!function(e){for(let t=0,n=e.length;t<n;t++)lr(e.shift())}(sr)}))}))}function lr(e){const t=e[0],n=e[1],r=e[2];try{n.apply(t,r)}catch(e){setTimeout((()=>{throw e}))}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function ur(){document.body.removeAttribute("unresolved")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function cr(e,t,n){return{index:e,removed:t,addedCount:n}}"interactive"===document.readyState||"complete"===document.readyState?ur():window.addEventListener("DOMContentLoaded",ur);function hr(e,t,n,r,i,o){let s,a=0,l=0,u=Math.min(n-t,o-i);if(0==t&&0==i&&(a=function(e,t,n){for(let r=0;r<n;r++)if(!dr(e[r],t[r]))return r;return n}(e,r,u)),n==e.length&&o==r.length&&(l=function(e,t,n){let r=e.length,i=t.length,o=0;for(;o<n&&dr(e[--r],t[--i]);)o++;return o}(e,r,u-a)),i+=a,o-=l,(n-=l)-(t+=a)==0&&o-i==0)return[];if(t==n){for(s=cr(t,[],0);i<o;)s.removed.push(r[i++]);return[s]}if(i==o)return[cr(t,[],n-t)];let c=function(e){let t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];for(;t>0||n>0;){if(0==t){i.push(2),n--;continue}if(0==n){i.push(3),t--;continue}let o,s=e[t-1][n-1],a=e[t-1][n],l=e[t][n-1];o=a<l?a<s?a:s:l<s?l:s,o==s?(s==r?i.push(0):(i.push(1),r=s),t--,n--):o==a?(i.push(3),t--,r=a):(i.push(2),n--,r=l)}return i.reverse(),i}(function(e,t,n,r,i,o){let s=o-i+1,a=n-t+1,l=new Array(s);for(let e=0;e<s;e++)l[e]=new Array(a),l[e][0]=e;for(let e=0;e<a;e++)l[0][e]=e;for(let n=1;n<s;n++)for(let o=1;o<a;o++)if(dr(e[t+o-1],r[i+n-1]))l[n][o]=l[n-1][o-1];else{let e=l[n-1][o]+1,t=l[n][o-1]+1;l[n][o]=e<t?e:t}return l}(e,t,n,r,i,o));s=void 0;let h=[],p=t,d=i;for(let e=0;e<c.length;e++)switch(c[e]){case 0:s&&(h.push(s),s=void 0),p++,d++;break;case 1:s||(s=cr(p,[],0)),s.addedCount++,p++,s.removed.push(r[d]),d++;break;case 2:s||(s=cr(p,[],0)),s.addedCount++,p++;break;case 3:s||(s=cr(p,[],0)),s.removed.push(r[d]),d++}return s&&h.push(s),h}function pr(e,t){return hr(e,0,e.length,t,0,t.length)}function dr(e,t){return e===t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function fr(e){return"slot"===e.localName}let mr=class{static getFlattenedNodes(e){const t=Le(e);return fr(e)?t.assignedNodes({flatten:!0}):Array.from(t.childNodes).map((e=>fr(e)?Le(e).assignedNodes({flatten:!0}):[e])).reduce(((e,t)=>e.concat(t)),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){fr(this._target)?this._listenSlots([this._target]):Le(this._target).children&&(this._listenSlots(Le(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,(e=>{this._processMutations(e)})):(this._nativeChildrenObserver=new MutationObserver((e=>{this._processMutations(e)})),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){fr(this._target)?this._unlistenSlots([this._target]):Le(this._target).children&&(this._unlistenSlots(Le(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,st.run((()=>this.flush())))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let n=e[t];n.addedNodes&&this._listenSlots(n.addedNodes),n.removedNodes&&this._unlistenSlots(n.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),n=pr(t,this._effectiveNodes);for(let t,r=0;r<n.length&&(t=n[r]);r++)for(let n,r=0;r<t.removed.length&&(n=t.removed[r]);r++)e.removedNodes.push(n);for(let r,i=0;i<n.length&&(r=n[i]);i++)for(let n=r.index;n<r.index+r.addedCount;n++)e.addedNodes.push(t[n]);this._effectiveNodes=t;let r=!1;return(e.addedNodes.length||e.removedNodes.length)&&(r=!0,this.callback.call(this._target,e)),r}_listenSlots(e){for(let t=0;t<e.length;t++){let n=e[t];fr(n)&&n.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let n=e[t];fr(n)&&n.removeEventListener("slotchange",this._boundSchedule)}}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const gr=function(){let e,t;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=un()}while(e||t)},yr=Element.prototype,vr=yr.matches||yr.matchesSelector||yr.mozMatchesSelector||yr.msMatchesSelector||yr.oMatchesSelector||yr.webkitMatchesSelector,wr=function(e,t){return vr.call(e,t)};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class br{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e}observeNodes(e){return new mr(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(Le(this.node).contains(e))return!0;let t=e,n=e.ownerDocument;for(;t&&t!==n&&t!==this.node;)t=Le(t).parentNode||Le(t).host;return t===this.node}getOwnerRoot(){return Le(this.node).getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?Le(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],t=Le(this.node).assignedSlot;for(;t;)e.push(t),t=Le(t).assignedSlot;return e}importNode(e,t){let n=this.node instanceof Document?this.node:this.node.ownerDocument;return Le(n).importNode(e,t)}getEffectiveChildNodes(){return mr.getFlattenedNodes(this.node)}queryDistributedElements(e){let t=this.getEffectiveChildNodes(),n=[];for(let r,i=0,o=t.length;i<o&&(r=t[i]);i++)r.nodeType===Node.ELEMENT_NODE&&wr(r,e)&&n.push(r);return n}get activeElement(){let e=this.node;return void 0!==e._activeElement?e._activeElement:e.activeElement}}function xr(e,t){for(let n=0;n<t.length;n++){let r=t[n];Object.defineProperty(e,r,{get:function(){return this.node[r]},configurable:!0})}}class Ar{constructor(e){this.event=e}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}br.prototype.cloneNode,br.prototype.appendChild,br.prototype.insertBefore,br.prototype.removeChild,br.prototype.replaceChild,br.prototype.setAttribute,br.prototype.removeAttribute,br.prototype.querySelector,br.prototype.querySelectorAll,br.prototype.parentNode,br.prototype.firstChild,br.prototype.lastChild,br.prototype.nextSibling,br.prototype.previousSibling,br.prototype.firstElementChild,br.prototype.lastElementChild,br.prototype.nextElementSibling,br.prototype.previousElementSibling,br.prototype.childNodes,br.prototype.children,br.prototype.classList,br.prototype.textContent,br.prototype.innerHTML;let _r=br;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(br.prototype).forEach((t=>{"activeElement"!=t&&(e.prototype[t]=br.prototype[t])})),xr(e.prototype,["classList"]),_r=e,Object.defineProperties(Ar.prototype,{localTarget:{get(){const e=this.event.currentTarget,t=e&&kr(e).getOwnerRoot(),n=this.path;for(let e=0;e<n.length;e++){const r=n[e];if(kr(r).getOwnerRoot()===t)return r}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else!function(e,t){for(let n=0;n<t.length;n++){let r=t[n];e[r]=function(){return this.node[r].apply(this.node,arguments)}}}(br.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),xr(br.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(e,t){for(let n=0;n<t.length;n++){let r=t[n];Object.defineProperty(e,r,{get:function(){return this.node[r]},set:function(e){this.node[r]=e},configurable:!0})}}(br.prototype,["textContent","innerHTML","className"]);const kr=function(e){if((e=e||document)instanceof _r)return e;if(e instanceof Ar)return e;let t=e.__domApi;return t||(t=e instanceof Event?new Ar(e):new _r(e),e.__domApi=t),t},Er=window.ShadyDOM,Cr=window.ShadyCSS;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Sr(e,t){return Le(e).getRootNode()===t}
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
const Or=e=>{for(;e;){const t=Object.getOwnPropertyDescriptor(e,"observedAttributes");if(t)return t.get;e=Object.getPrototypeOf(e.prototype).constructor}return()=>[]};Ee((e=>{const t=on(e);let n=Or(t);return class extends t{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return n.call(this).concat("disable-upgrade")}_initializeProperties(){this.hasAttribute("disable-upgrade")?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}attributeChangedCallback(e,t,n,r){"disable-upgrade"==e?this.__isUpgradeDisabled&&null==n&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,Le(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(e,t,n,r)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}}));let Tr=window.ShadyCSS;const Nr=Ee((e=>{const t=Xn(on(e)),n=rn?t:rr(t),r=Or(n),i={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class o extends n{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(e,t,n){(this.__dataAttributes&&this.__dataAttributes[e]||"disable-upgrade"===e)&&this.attributeChangedCallback(e,t,n,null)}setAttribute(e,t){if(Ae&&!this._legacyForceObservedAttributes){const n=this.getAttribute(e);super.setAttribute(e,t),this.__attributeReaction(e,n,String(t))}else super.setAttribute(e,t)}removeAttribute(e){if(Ae&&!this._legacyForceObservedAttributes){const t=this.getAttribute(e);super.removeAttribute(e),this.__attributeReaction(e,t,null)}else super.removeAttribute(e)}static get observedAttributes(){return Ae&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],this.prototype),this.__observedAttributes):r.call(this).concat("disable-upgrade")}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(e,t,n,r){t!==n&&("disable-upgrade"==e?this.__isUpgradeDisabled&&null==n&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,Le(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(e,t,n,r),this.attributeChanged(e,t,n)))}attributeChanged(e,t,n){}_initializeProperties(){if(fe&&this.hasAttribute("disable-upgrade"))this.__isUpgradeDisabled=!0;else{let e=Object.getPrototypeOf(this);e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))||(this._registered(),e.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),Ae&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const e=this.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.__attributeReaction(n.name,null,n.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,n){this._propertyToAttribute(e,t,n)}serializeValueToAttribute(e,t,n){this._valueToNodeAttribute(n||this,e,t)}extend(e,t){if(!e||!t)return e||t;let n=Object.getOwnPropertyNames(t);for(let r,i=0;i<n.length&&(r=n[i]);i++){let n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}return e}mixin(e,t){for(let n in t)e[n]=t[n];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,n){n=n||{},t=null==t?{}:t;let r=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});r.detail=t;let i=n.node||this;return Le(i).dispatchEvent(r),r}listen(e,t,n){e=e||this;let r=this.__boundListeners||(this.__boundListeners=new WeakMap),i=r.get(e);i||(i={},r.set(e,i));let o=t+n;i[o]||(i[o]=this._addMethodEventListenerToNode(e,t,n,this))}unlisten(e,t,n){e=e||this;let r=this.__boundListeners&&this.__boundListeners.get(e),i=t+n,o=r&&r[i];o&&(this._removeEventListenerFromNode(e,t,o),r[i]=null)}setScrollDirection(e,t){Un(t||this,i[e]||"auto")}$$(e){return this.root.querySelector(e)}get domHost(){let e=Le(this).getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){const e=kr(this);window.ShadyDOM&&e.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return kr(this).getEffectiveChildNodes()}queryDistributedElements(e){return kr(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let n,r=0;n=e[r];r++)n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?kr(t).getDistributedNodes():[]}getContentChildren(e){let t=this.getContentChildNodes(e).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}));return t}isLightDescendant(e){const t=this;return t!==e&&Le(t).contains(e)&&Le(t).getRootNode()===Le(e).getRootNode()}isLocalDescendant(e){return this.root===Le(e).getRootNode()}scopeSubtree(e,t=!1){return function(e,t=!1){if(!Er||!Cr)return null;if(!Er.handlesDynamicScoping)return null;const n=Cr.ScopingShim;if(!n)return null;const r=n.scopeForNode(e),i=Le(e).getRootNode(),o=e=>{if(!Sr(e,i))return;const t=Array.from(Er.nativeMethods.querySelectorAll.call(e,"*"));t.push(e);for(let e=0;e<t.length;e++){const o=t[e];if(!Sr(o,i))continue;const s=n.currentScopeForNode(o);s!==r&&(""!==s&&n.unscopeNode(o,s),n.scopeNode(o,r))}};if(o(e),t){const t=new MutationObserver((e=>{for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.addedNodes.length;e++){const t=n.addedNodes[e];t.nodeType===Node.ELEMENT_NODE&&o(t)}}}));return t.observe(e,{childList:!0,subtree:!0}),t}return null}(e,t)}getComputedStyleValue(e){return Tr.getComputedStyleValue(this,e)}debounce(e,t,n){return this._debouncers=this._debouncers||{},this._debouncers[e]=sn.debounce(this._debouncers[e],n>0?ot.after(n):st,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return!(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush()}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel()}async(e,t){return t>0?ot.run(e.bind(this),t):~st.run(e.bind(this))}cancelAsync(e){e<0?st.cancel(~e):ot.cancel(e)}create(e,t){let n=document.createElement(e);if(t)if(n.setProperties)n.setProperties(t);else for(let e in t)n[e]=t[e];return n}elementMatches(e,t){return wr(t||this,e)}toggleAttribute(e,t){let n=this;return 3===arguments.length&&(n=arguments[2]),1==arguments.length&&(t=!n.hasAttribute(e)),t?(Le(n).setAttribute(e,""),!0):(Le(n).removeAttribute(e),!1)}toggleClass(e,t,n){n=n||this,1==arguments.length&&(t=!n.classList.contains(e)),t?n.classList.add(e):n.classList.remove(e)}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e}translate3d(e,t,n,r){r=r||this,this.transform("translate3d("+e+","+t+","+n+")",r)}arrayDelete(e,t){let n;if(Array.isArray(e)){if(n=e.indexOf(t),n>=0)return e.splice(n,1)}else{if(n=Xe(this,e).indexOf(t),n>=0)return this.splice(e,n,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t)}}_log(...e){this._logger("log",e)}_warn(...e){this._logger("warn",e)}_error(...e){this._logger("error",e)}_logf(e,...t){return["[%s::%s]",this.is,e,...t]}}return o.prototype.is="",o})),Br={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},Ir={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},Pr=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},Ir);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Mr(e,t,n,r){!function(e,t,n){const r=e._noAccessors,i=Object.getOwnPropertyNames(e);for(let o=0;o<i.length;o++){let s=i[o];if(!(s in n))if(r)t[s]=e[s];else{let n=Object.getOwnPropertyDescriptor(e,s);n&&(n.configurable=!0,Object.defineProperty(t,s,n))}}}(t,e,r);for(let e in Br)t[e]&&(n[e]=n[e]||[],n[e].push(t[e]))}function Dr(e,t,n){t=t||[];for(let r=e.length-1;r>=0;r--){let i=e[r];i&&(Array.isArray(i)?Dr(i,t):t.indexOf(i)<0&&(!n||n.indexOf(i)<0)&&t.unshift(i))}return t}function Rr(e,t){for(const n in t){const r=e[n],i=t[n];e[n]=!("value"in i)&&r&&"value"in r?Object.assign({value:r.value},i):i}}const Fr=Nr(HTMLElement);function Lr(e,t,n){let r;const i={};class o extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(r)for(let e,t=0;t<r.length;t++)e=r[t],e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const t={};if(r)for(let e=0;e<r.length;e++)Rr(t,r[e].properties);return Rr(t,e.properties),t}static get observers(){let t=[];if(r)for(let e,n=0;n<r.length;n++)e=r[n],e.observers&&(t=t.concat(e.observers));return e.observers&&(t=t.concat(e.observers)),t}created(){super.created();const e=i.created;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}_registered(){const e=o.prototype;if(!e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))){e.__hasRegisterFinished=!0,super._registered(),fe&&s(e);const t=Object.getPrototypeOf(this);let n=i.beforeRegister;if(n)for(let e=0;e<n.length;e++)n[e].call(t);if(n=i.registered,n)for(let e=0;e<n.length;e++)n[e].call(t)}}_applyListeners(){super._applyListeners();const e=i.listeners;if(e)for(let t=0;t<e.length;t++){const n=e[t];if(n)for(let e in n)this._addMethodEventListenerToNode(this,e,n[e])}}_ensureAttributes(){const e=i.hostAttributes;if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e in n)this._ensureAttribute(e,n[e])}super._ensureAttributes()}ready(){super.ready();let e=i.ready;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attached(){super.attached();let e=i.attached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}detached(){super.detached();let e=i.detached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attributeChanged(e,t,n){super.attributeChanged();let r=i.attributeChanged;if(r)for(let i=0;i<r.length;i++)r[i].call(this,e,t,n)}}if(n){Array.isArray(n)||(n=[n]);let e=t.prototype.behaviors;r=Dr(n,null,e),o.prototype.behaviors=e?e.concat(n):r}const s=t=>{r&&function(e,t,n){for(let r=0;r<t.length;r++)Mr(e,t[r],n,Pr)}(t,r,i),Mr(t,e,i,Ir)};return fe||s(o.prototype),o.generatedFrom=e,o}const Ur=function(e){let t;return t="function"==typeof e?e:Ur.Class(e),e._legacyForceObservedAttributes&&(t.prototype._legacyForceObservedAttributes=e._legacyForceObservedAttributes),customElements.define(t.is,t),t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function $r(e,t,n,r,i){let o;i&&(o="object"==typeof n&&null!==n,o&&(r=e.__dataTemp[t]));let s=r!==n&&(r==r||n==n);return o&&s&&(e.__dataTemp[t]=n),s}Ur.Class=function(e,t){let n=t?t(Fr):Fr;return n=Lr(e,n,e.behaviors),n.is=n.prototype.is=e.is,n};const Hr=Ee((e=>class extends e{_shouldPropertyChange(e,t,n){return $r(this,e,t,n,!0)}})),Gr=Ee((e=>class extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(e,t,n){return $r(this,e,t,n,this.mutableData)}}));Hr._mutablePropertyChange=$r;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let jr=null;function zr(){return jr}zr.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:zr,writable:!0}});const Vr=en(zr),Xr=Hr(Vr);const qr=en(class{});function Wr(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(Boolean(e)!=Boolean(r.__hideTemplateChildren__))if(r.nodeType===Node.TEXT_NODE)e?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if("slot"===r.localName)if(e)r.__polymerReplaced__=document.createComment("hidden-slot"),Le(Le(r).parentNode).replaceChild(r.__polymerReplaced__,r);else{const e=r.__polymerReplaced__;e&&Le(Le(e).parentNode).replaceChild(r,e)}else r.style&&(e?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=e,r._showHideChildren&&r._showHideChildren(e)}}class Yr extends qr{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=[];this.children=t;for(let e=this.root.firstChild;e;e=e.nextSibling)t.push(e),e.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(e&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let t in e)this._setPendingProperty(t,e[t])}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,t,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,(e=>{e.model=this,n(e)}));else{let r=this.__dataHost.__dataHost;r&&r._addEventListenerToNode(e,t,n)}}_showHideChildren(e){Wr(e,this.children)}_setUnmanagedPropertyToNode(e,t,n){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(e,t,n)}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}Yr.prototype.__dataHost,Yr.prototype.__templatizeOptions,Yr.prototype._methodHost,Yr.prototype.__templatizeOwner,Yr.prototype.__hostProps;const Qr=Hr(Yr);function Kr(e){let t=e.__dataHost;return t&&t._methodHost||t}function Zr(e,t,n){let r=n.mutableData?Qr:Yr;ni.mixin&&(r=ni.mixin(r));let i=class extends r{};return i.prototype.__templatizeOptions=n,i.prototype._bindTemplate(e),function(e,t,n,r){let i=n.hostProps||{};for(let t in r.instanceProps){delete i[t];let n=r.notifyInstanceProp;n&&e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:ti(t,n)})}if(r.forwardHostProp&&t.__dataHost)for(let t in i)n.hasHostProps||(n.hasHostProps=!0),e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,n){e.__dataHost._setPendingPropertyOrPath("_host_"+t,n[t],!0,!0)}})}(i,e,t,n),i}function Jr(e,t,n,r){let i=n.forwardHostProp;if(i&&t.hasHostProps){const o="template"==e.localName;let s=t.templatizeTemplateClass;if(!s){if(o){let e=n.mutableData?Xr:Vr;class r extends e{}s=t.templatizeTemplateClass=r}else{const n=e.constructor;class r extends n{}s=t.templatizeTemplateClass=r}let a=t.hostProps;for(let e in a)s.prototype._addPropertyEffect("_host_"+e,s.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:ei(e,i)}),s.prototype._createNotifyingProperty("_host_"+e);me&&r&&function(e,t,n){const r=n.constructor._properties,{propertyEffects:i}=e,{instanceProps:o}=t;for(let e in i)if(!(r[e]||o&&o[e])){const t=i[e];for(let e=0;e<t.length;e++){const{part:n}=t[e].info;if(!n.signature||!n.signature.static)break}}}(t,n,r)}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),o)!function(e,t){jr=e,Object.setPrototypeOf(e,t.prototype),new t,jr=null}(e,s),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else{Object.setPrototypeOf(e,s.prototype);const n=t.hostProps;for(let t in n)if(t="_host_"+t,t in e){const n=e[t];delete e[t],e.__data[t]=n}}}}function ei(e,t){return function(e,n,r){t.call(e.__templatizeOwner,n.substring("_host_".length),r[n])}}function ti(e,t){return function(e,n,r){t.call(e.__templatizeOwner,e,n,r[n])}}function ni(e,t,n){if(pe&&!Kr(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(n=n||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let r=(t?t.constructor:Yr)._parseTemplate(e),i=r.templatizeInstanceClass;i||(i=Zr(e,r,n),r.templatizeInstanceClass=i);const o=Kr(e);Jr(e,r,n,o);let s=class extends i{};return s.prototype._methodHost=o,s.prototype.__dataHost=e,s.prototype.__templatizeOwner=t,s.prototype.__hostProps=r.hostProps,s}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ri=!1;function ii(){if(fe&&!ae){if(!ri){ri=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const oi=Xn(Gr(en(HTMLElement)));customElements.define("dom-bind",class extends oi{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),pe)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(e,t,n,r){this.mutableData=!0}connectedCallback(){ii()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){Le(Le(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let t=new MutationObserver((()=>{if(e=this.querySelector("template"),!e)throw new Error("dom-bind requires a <template> child");t.disconnect(),this.render()}));return void t.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class si{constructor(e){this.value=e.toString()}toString(){return this.value}}function ai(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof si)return function(e){if(e instanceof si)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}const li=function(e,...t){const n=document.createElement("template");return n.innerHTML=t.reduce(((t,n,r)=>t+ai(n)+e[r+1]),e[0]),n},ui=on(HTMLElement),ci=Gr(ui);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class hi extends ci{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!xe,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),ii()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=Le(Le(this).parentNode);for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){const e=this;let t=this.template=e._templateInfo?e:this.querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()}));return e.observe(this,{childList:!0}),!1}let n={};n[this.as]=!0,n[this.indexAs]=!0,n[this.itemsIndexAs]=!0,this.__ctor=ni(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:n,forwardHostProp:function(e,t){let n=this.__instances;for(let r,i=0;i<n.length&&(r=n[i]);i++)r.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,n){if((r=this.as)===(i=t)||He(r,i)||Ge(r,i)){let r=e[this.itemsIndexAs];t==this.as&&(this.items[r]=n);let i=je(this.as,`${JSCompiler_renameProperty("items",this)}.${r}`,t);this.notifyPath(i,n)}var r,i}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,n=this.__getMethodHost();return function(){return n[t].apply(n,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let n=0;n<t.length;n++)0===e.indexOf(t[n])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(e){this.items&&Array.isArray(this.items),this.__handleItemPath(e.path,e.value)||("items"===e.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(e,t=0){this.__renderDebouncer=sn.debounce(this.__renderDebouncer,t>0?ot.after(t):st,e.bind(this)),ln(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),gr()}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[];const t=this.__sortAndFilterItems(e),n=this.__calculateLimit(t.length);this.__updateInstances(e,n,t),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame((()=>this.__continueChunking()))),this._setRenderedItemCount(this.__instances.length),xe&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(e){let t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=n;return this.__filterFn&&(t=t.filter(((t,n,r)=>this.__filterFn(e[t],n,r)))),this.__sortFn&&t.sort(((t,n)=>this.__sortFn(e[t],e[n]))),t}__calculateLimit(e){let t=e;const n=this.__instances.length;if(this.initialCount){let r;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(t=Math.min(e,this.initialCount),r=Math.max(t-n,0),this.__chunkCount=r||1):(r=Math.min(Math.max(e-n,0),this.__chunkCount),t=Math.min(n+r,e)),this.__shouldMeasureChunk=r===this.__chunkCount,this.__shouldContinueChunking=t<e,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,t}__continueChunking(){if(this.__shouldMeasureChunk){const e=performance.now()-this.__renderStartTime,t=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*t)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(e,t,n){const r=this.__itemsIdxToInstIdx={};let i;for(i=0;i<t;i++){let t=this.__instances[i],o=n[i],s=e[o];r[o]=i,t?(t._setPendingProperty(this.as,s),t._setPendingProperty(this.indexAs,i),t._setPendingProperty(this.itemsIndexAs,o),t._flushProperties()):this.__insertInstance(s,i,o)}for(let e=this.__instances.length-1;e>=i;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];const n=Le(t.root);for(let e=0;e<t.children.length;e++){let r=t.children[e];n.appendChild(r)}return t}__attachInstance(e,t){let n=this.__instances[e];t.insertBefore(n.root,this)}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1)}__stampInstance(e,t,n){let r={};return r[this.as]=e,r[this.indexAs]=t,r[this.itemsIndexAs]=n,new this.__ctor(r)}__insertInstance(e,t,n){const r=this.__stampInstance(e,t,n);let i=this.__instances[t+1],o=i?i.children[0]:this;return Le(Le(this).parentNode).insertBefore(r.root,o),this.__instances[t]=r,r}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let n=e.slice(6),r=n.indexOf("."),i=r<0?n:n.substring(0,r);if(i==parseInt(i,10)){let e=r<0?"":n.substring(r+1);this.__handleObservedPaths(e);let o=this.__itemsIdxToInstIdx[i],s=this.__instances[o];if(s){let n=this.as+(e?"."+e:"");s._setPendingPropertyOrPath(n,t,!1,!0),s._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return function(e,t){let n;for(;t;)if(n=t.__dataHost?t:t.__templatizeInstance){if(n.__dataHost==e)return n;t=n.__dataHost}else t=Le(t).parentNode;return null}(this.template,e)}}customElements.define(hi.is,hi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class pi extends ui{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=sn.debounce(this.__renderDebouncer,st,(()=>this.__render())),ln(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const e=Le(this).parentNode;e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Le(e).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),ii()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const e=this;let t=e._templateInfo?e:Le(e).querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!Le(this).querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render()}));return e.observe(this,{childList:!0}),!1}this.__template=t}return!0}__ensureInstance(){let e=Le(this).parentNode;if(this.__hasInstance()){let t=this.__getInstanceNodes();if(t&&t.length){if(Le(this).previousSibling!==t[t.length-1])for(let n,r=0;r<t.length&&(n=t[r]);r++)Le(e).insertBefore(n,this)}}else{if(!e)return!1;if(!this.__ensureTemplate())return!1;this.__createAndInsertInstance(e)}return!0}render(){gr()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),xe&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(e){}__teardownInstance(){}_showHideChildren(){}}const di=be?class extends pi{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(e){const t=this.__dataHost||this;if(pe&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const n=t._bindTemplate(this.__template,!0);n.runEffects=(e,t,n)=>{let r=this.__syncInfo;if(this.if)r&&(this.__syncInfo=null,this._showHideChildren(),t=Object.assign(r.changedProps,t)),e(t,n);else if(this.__instance)if(r||(r=this.__syncInfo={runEffects:e,changedProps:{}}),n)for(const e in t){const t=$e(e);r.changedProps[t]=this.__dataHost[t]}else Object.assign(r.changedProps,t)},this.__instance=t._stampTemplate(this.__template,n),Le(e).insertBefore(this.__instance,this)}__syncHostProperties(){const e=this.__syncInfo;e&&(this.__syncInfo=null,e.runEffects(e.changedProps,!1))}__teardownInstance(){const e=this.__dataHost||this;this.__instance&&(e._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,Wr(e,this.__instance.templateInfo.childNodes)),e||this.__syncHostProperties()}}:class extends pi{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(e){this.__ctor||(this.__ctor=ni(this.__template,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[$e(e)]=!0))}})),this.__instance=new this.__ctor,Le(e).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=Le(e[0]).parentNode;if(t){t=Le(t);for(let n,r=0;r<e.length&&(n=e[r]);r++)t.removeChild(n)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let e=this.__invalidProps;if(e){this.__invalidProps=null;for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__instance._flushProperties()}}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,this.__instance._showHideChildren(e)),e||this.__syncHostProperties()}};customElements.define(di.is,di);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let fi=Ee((e=>{let t=on(e);return class extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(e,t){let n=t.path;if(n==JSCompiler_renameProperty("items",this)){let n=t.base||[],r=this.__lastItems;if(e!==this.__lastMulti&&this.clearSelection(),r){let e=pr(n,r);this.__applySplices(e)}this.__lastItems=n,this.__lastMulti=e}else if(t.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(t.value.indexSplices);else{let e=n.slice(`${JSCompiler_renameProperty("items",this)}.`.length),t=parseInt(e,10);e.indexOf(".")<0&&e==t&&this.__deselectChangedIdx(t)}}__applySplices(e){let t=this.__selectedMap;for(let n=0;n<e.length;n++){let r=e[n];t.forEach(((e,n)=>{e<r.index||(e>=r.index+r.removed.length?t.set(n,e+r.addedCount-r.removed.length):t.set(n,-1))}));for(let e=0;e<r.addedCount;e++){let n=r.index+e;t.has(this.items[n])&&t.set(this.items[n],n)}}this.__updateLinks();let n=0;t.forEach(((e,r)=>{e<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null,t.delete(r)):n++}))}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let e=0;this.__selectedMap.forEach((t=>{t>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${t}`,`${JSCompiler_renameProperty("selected",this)}.${e++}`)}))}else this.__selectedMap.forEach((e=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${e}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${e}`)}))}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(e){return this.__selectedMap.has(e)}isIndexSelected(e){return this.isSelected(this.items[e])}__deselectChangedIdx(e){let t=this.__selectedIndexForItemIndex(e);if(t>=0){let e=0;this.__selectedMap.forEach(((n,r)=>{t==e++&&this.deselect(r)}))}}__selectedIndexForItemIndex(e){let t=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${e}`];if(t)return parseInt(t.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(e){let t=this.__selectedMap.get(e);if(t>=0){let n;this.__selectedMap.delete(e),this.multi&&(n=this.__selectedIndexForItemIndex(t)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null}}deselectIndex(e){this.deselect(this.items[e])}select(e){this.selectIndex(this.items.indexOf(e))}selectIndex(e){let t=this.items[e];this.isSelected(t)?this.toggle&&this.deselectIndex(e):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(t,e),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),t):this.selected=this.selectedItem=t)}}})),mi=fi(ui);class gi extends mi{static get is(){return"array-selector"}static get template(){return null}}customElements.define(gi.is,gi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const yi=new K;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,n){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,n){},styleSubtree(e,t){yi.processStyles(),T(e,t)},styleElement(e){yi.processStyles()},styleDocument(e){yi.processStyles(),T(document.body,e)},getComputedStyleValue:(e,t)=>N(e,t),flushCustomStyles(){},nativeCss:o,nativeShadow:e,cssBuild:n,disableRuntime:i}),window.ShadyCSS.CustomStyleInterface=yi;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const vi=window.ShadyCSS.CustomStyleInterface;class wi extends HTMLElement{constructor(){super(),this._style=null,vi.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const t=e.getAttribute("include");return t&&(e.removeAttribute("include"),e.textContent=function(e){let t=e.trim().split(/\s+/),n="";for(let e=0;e<t.length;e++)n+=Fe(t[e]);return n}(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",wi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const bi=Nr(HTMLElement).prototype,xi=Ur({_template:li`<style>:host{display:inline-block;position:fixed;clip:rect(0,0,0,0)}</style><div aria-live$="[[mode]]">[[_text]]</div>`,is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},timeout:{type:Number,value:150},_text:{type:String,value:""}},created:function(){xi.instance||(xi.instance=this),document.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(e){this._text="",this.async((function(){this._text=e}),this.timeout)},_onIronAnnounce:function(e){e.detail&&e.detail.text&&this.announce(e.detail.text)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/xi.instance=null,xi.requestAvailability=function(){xi.instance||(xi.instance=document.createElement("iron-a11y-announcer")),document.body?document.body.appendChild(xi.instance):document.addEventListener("load",(function(){document.body.appendChild(xi.instance)}))};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
class Ai{constructor(e){Ai[" "](e),this.type=e&&e.type||"default",this.key=e&&e.key,e&&"value"in e&&(this.value=e.value)}get value(){var e=this.type,t=this.key;if(e&&t)return Ai.types[e]&&Ai.types[e][t]}set value(e){var t=this.type,n=this.key;t&&n&&(t=Ai.types[t]=Ai.types[t]||{},null==e?delete t[n]:t[n]=e)}get list(){if(this.type){var e=Ai.types[this.type];return e?Object.keys(e).map((function(e){return _i[this.type][e]}),this):[]}}byKey(e){return this.key=e,this.value}}Ai[" "]=function(){},Ai.types={};var _i=Ai.types;Ur({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function(e,t,n){var r=new Ai({type:e,key:t});return void 0!==n&&n!==r.value?r.value=n:this.value!==r.value&&(this.value=r.value),r},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(e){e&&(this.value=this)},byKey:function(e){return new Ai({type:this.type,key:e}).value}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
let ki=null;const Ei={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:"_invalidChanged"}},registered:function(){ki=new Ai({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},get _validator(){return ki&&ki.byKey(this.validator)},hasValidator:function(){return null!=this._validator},validate:function(e){return void 0===e&&void 0!==this.value?this.invalid=!this._getValidity(this.value):this.invalid=!this._getValidity(e),!this.invalid},_getValidity:function(e){return!this.hasValidator()||this._validator.validate(e)}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
if(Ur({_template:li`<style>:host{display:inline-block}</style><slot id="content"></slot>`,is:"iron-input",behaviors:[Ei],properties:{bindValue:{type:String,value:""},value:{type:String,computed:"_computeValue(bindValue)"},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:["_bindValueChanged(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},created:function(){xi.requestAvailability(),this._previousValidInput="",this._patternAlreadyChecked=!1},attached:function(){this._observer=kr(this).observeNodes(function(e){this._initSlottedInput()}.bind(this))},detached:function(){this._observer&&(kr(this).unobserveNodes(this._observer),this._observer=null)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0],this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value),this.fire("iron-input-ready")},get _patternRegExp(){var e;if(this.allowedPattern)e=new RegExp(this.allowedPattern);else if("number"===this.inputElement.type)e=/[0-9.,e-]/;return e},_bindValueChanged:function(e,t){t&&(void 0===e?t.value=null:e!==t.value&&(this.inputElement.value=e),this.autoValidate&&this.validate(),this.fire("bind-value-changed",{value:e}))},_onInput:function(){this.allowedPattern&&!this._patternAlreadyChecked&&(this._checkPatternValidity()||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.inputElement.value=this._previousValidInput));this.bindValue=this._previousValidInput=this.inputElement.value,this._patternAlreadyChecked=!1},_isPrintable:function(e){var t=8==e.keyCode||9==e.keyCode||13==e.keyCode||27==e.keyCode,n=19==e.keyCode||20==e.keyCode||45==e.keyCode||46==e.keyCode||144==e.keyCode||145==e.keyCode||e.keyCode>32&&e.keyCode<41||e.keyCode>111&&e.keyCode<124;return!(t||0==e.charCode&&n)},_onKeypress:function(e){if(this.allowedPattern||"number"===this.inputElement.type){var t=this._patternRegExp;if(t&&!(e.metaKey||e.ctrlKey||e.altKey)){this._patternAlreadyChecked=!0;var n=String.fromCharCode(e.charCode);this._isPrintable(e)&&!t.test(n)&&(e.preventDefault(),this._announceInvalidCharacter("Invalid character "+n+" not entered."))}}},_checkPatternValidity:function(){var e=this._patternRegExp;if(!e)return!0;for(var t=0;t<this.inputElement.value.length;t++)if(!e.test(this.inputElement.value[t]))return!1;return!0},validate:function(){if(!this.inputElement)return this.invalid=!1,!0;var e=this.inputElement.checkValidity();return e&&(this.required&&""===this.bindValue?e=!1:this.hasValidator()&&(e=Ei.validate.call(this,this.bindValue))),this.invalid=!e,this.fire("iron-input-validate"),e},_announceInvalidCharacter:function(e){this.fire("iron-announce",{text:e})},_computeValue:function(e){return e}}),!window.polymerSkipLoadingFontRoboto){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.crossOrigin="anonymous",e.href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic",document.head.appendChild(e)}
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const Ci=li`<custom-style><style is="custom-style">html{--paper-font-common-base:{font-family:Roboto,Noto,sans-serif;-webkit-font-smoothing:antialiased};--paper-font-common-code:{font-family:'Roboto Mono',Consolas,Menlo,monospace;-webkit-font-smoothing:antialiased};--paper-font-common-expensive-kerning:{text-rendering:optimizeLegibility};--paper-font-common-nowrap:{white-space:nowrap;overflow:hidden;text-overflow:ellipsis};--paper-font-display4:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:112px;font-weight:300;letter-spacing:-.044em;line-height:120px};--paper-font-display3:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:56px;font-weight:400;letter-spacing:-.026em;line-height:60px};--paper-font-display2:{@apply --paper-font-common-base;font-size:45px;font-weight:400;letter-spacing:-.018em;line-height:48px};--paper-font-display1:{@apply --paper-font-common-base;font-size:34px;font-weight:400;letter-spacing:-.01em;line-height:40px};--paper-font-headline:{@apply --paper-font-common-base;font-size:24px;font-weight:400;letter-spacing:-.012em;line-height:32px};--paper-font-title:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:20px;font-weight:500;line-height:28px};--paper-font-subhead:{@apply --paper-font-common-base;font-size:16px;font-weight:400;line-height:24px};--paper-font-body2:{@apply --paper-font-common-base;font-size:14px;font-weight:500;line-height:24px};--paper-font-body1:{@apply --paper-font-common-base;font-size:14px;font-weight:400;line-height:20px};--paper-font-caption:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:12px;font-weight:400;letter-spacing:.011em;line-height:20px};--paper-font-menu:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:13px;font-weight:500;line-height:24px};--paper-font-button:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:14px;font-weight:500;letter-spacing:.018em;line-height:24px;text-transform:uppercase};--paper-font-code2:{@apply --paper-font-common-code;font-size:14px;font-weight:700;line-height:20px};--paper-font-code1:{@apply --paper-font-common-code;font-size:14px;font-weight:500;line-height:20px};}</style></custom-style>`;Ci.setAttribute("style","display: none;"),document.head.appendChild(Ci.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Si={attached:function(){this.fire("addon-attached")},update:function(e){}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/Ur({_template:li`<style>:host{display:inline-block;float:right;@apply --paper-font-caption;@apply --paper-input-char-counter;}:host([hidden]){display:none!important}:host(:dir(rtl)){float:left}</style><span>[[_charCounterStr]]</span>`,is:"paper-input-char-counter",behaviors:[Si],properties:{_charCounterStr:{type:String,value:"0"}},update:function(e){if(e.inputElement){e.value=e.value||"";var t=e.value.toString().length.toString();e.inputElement.hasAttribute("maxlength")&&(t+="/"+e.inputElement.getAttribute("maxlength")),this._charCounterStr=t}}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Oi=li`<custom-style><style is="custom-style">[hidden]{display:none!important}</style></custom-style><custom-style><style is="custom-style">html{--layout:{display:-ms-flexbox;display:-webkit-flex;display:flex};--layout-inline:{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex};--layout-horizontal:{@apply --layout;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row};--layout-horizontal-reverse:{@apply --layout;-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse};--layout-vertical:{@apply --layout;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column};--layout-vertical-reverse:{@apply --layout;-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse};--layout-wrap:{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap};--layout-wrap-reverse:{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse};--layout-flex-auto:{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto};--layout-flex-none:{-ms-flex:none;-webkit-flex:none;flex:none};--layout-flex:{-ms-flex:1 1 .000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:.000000001px;flex-basis:.000000001px};--layout-flex-2:{-ms-flex:2;-webkit-flex:2;flex:2};--layout-flex-3:{-ms-flex:3;-webkit-flex:3;flex:3};--layout-flex-4:{-ms-flex:4;-webkit-flex:4;flex:4};--layout-flex-5:{-ms-flex:5;-webkit-flex:5;flex:5};--layout-flex-6:{-ms-flex:6;-webkit-flex:6;flex:6};--layout-flex-7:{-ms-flex:7;-webkit-flex:7;flex:7};--layout-flex-8:{-ms-flex:8;-webkit-flex:8;flex:8};--layout-flex-9:{-ms-flex:9;-webkit-flex:9;flex:9};--layout-flex-10:{-ms-flex:10;-webkit-flex:10;flex:10};--layout-flex-11:{-ms-flex:11;-webkit-flex:11;flex:11};--layout-flex-12:{-ms-flex:12;-webkit-flex:12;flex:12};--layout-start:{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start};--layout-center:{-ms-flex-align:center;-webkit-align-items:center;align-items:center};--layout-end:{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end};--layout-baseline:{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline};--layout-start-justified:{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start};--layout-center-justified:{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center};--layout-end-justified:{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end};--layout-around-justified:{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around};--layout-justified:{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between};--layout-center-center:{@apply --layout-center;@apply --layout-center-justified;};--layout-self-start:{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start};--layout-self-center:{-ms-align-self:center;-webkit-align-self:center;align-self:center};--layout-self-end:{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end};--layout-self-stretch:{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch};--layout-self-baseline:{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline};--layout-start-aligned:{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start};--layout-end-aligned:{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end};--layout-center-aligned:{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center};--layout-between-aligned:{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between};--layout-around-aligned:{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around};--layout-block:{display:block};--layout-invisible:{visibility:hidden!important};--layout-relative:{position:relative};--layout-fit:{position:absolute;top:0;right:0;bottom:0;left:0};--layout-scroll:{-webkit-overflow-scrolling:touch;overflow:auto};--layout-fullbleed:{margin:0;height:100vh};--layout-fixed-top:{position:fixed;top:0;left:0;right:0};--layout-fixed-right:{position:fixed;top:0;right:0;bottom:0};--layout-fixed-bottom:{position:fixed;right:0;bottom:0;left:0};--layout-fixed-left:{position:fixed;top:0;bottom:0;left:0};}</style></custom-style>`;Oi.setAttribute("style","display: none;"),document.head.appendChild(Oi.content);var Ti=document.createElement("style");Ti.textContent="[hidden] { display: none !important; }",document.head.appendChild(Ti);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Ni=li`<custom-style><style is="custom-style">html{--google-red-100:#f4c7c3;--google-red-300:#e67c73;--google-red-500:#db4437;--google-red-700:#c53929;--google-blue-100:#c6dafc;--google-blue-300:#7baaf7;--google-blue-500:#4285f4;--google-blue-700:#3367d6;--google-green-100:#b7e1cd;--google-green-300:#57bb8a;--google-green-500:#0f9d58;--google-green-700:#0b8043;--google-yellow-100:#fce8b2;--google-yellow-300:#f7cb4d;--google-yellow-500:#f4b400;--google-yellow-700:#f09300;--google-grey-100:#f5f5f5;--google-grey-300:#e0e0e0;--google-grey-500:#9e9e9e;--google-grey-700:#616161;--paper-red-50:#ffebee;--paper-red-100:#ffcdd2;--paper-red-200:#ef9a9a;--paper-red-300:#e57373;--paper-red-400:#ef5350;--paper-red-500:#f44336;--paper-red-600:#e53935;--paper-red-700:#d32f2f;--paper-red-800:#c62828;--paper-red-900:#b71c1c;--paper-red-a100:#ff8a80;--paper-red-a200:#ff5252;--paper-red-a400:#ff1744;--paper-red-a700:#d50000;--paper-pink-50:#fce4ec;--paper-pink-100:#f8bbd0;--paper-pink-200:#f48fb1;--paper-pink-300:#f06292;--paper-pink-400:#ec407a;--paper-pink-500:#e91e63;--paper-pink-600:#d81b60;--paper-pink-700:#c2185b;--paper-pink-800:#ad1457;--paper-pink-900:#880e4f;--paper-pink-a100:#ff80ab;--paper-pink-a200:#ff4081;--paper-pink-a400:#f50057;--paper-pink-a700:#c51162;--paper-purple-50:#f3e5f5;--paper-purple-100:#e1bee7;--paper-purple-200:#ce93d8;--paper-purple-300:#ba68c8;--paper-purple-400:#ab47bc;--paper-purple-500:#9c27b0;--paper-purple-600:#8e24aa;--paper-purple-700:#7b1fa2;--paper-purple-800:#6a1b9a;--paper-purple-900:#4a148c;--paper-purple-a100:#ea80fc;--paper-purple-a200:#e040fb;--paper-purple-a400:#d500f9;--paper-purple-a700:#aa00ff;--paper-deep-purple-50:#ede7f6;--paper-deep-purple-100:#d1c4e9;--paper-deep-purple-200:#b39ddb;--paper-deep-purple-300:#9575cd;--paper-deep-purple-400:#7e57c2;--paper-deep-purple-500:#673ab7;--paper-deep-purple-600:#5e35b1;--paper-deep-purple-700:#512da8;--paper-deep-purple-800:#4527a0;--paper-deep-purple-900:#311b92;--paper-deep-purple-a100:#b388ff;--paper-deep-purple-a200:#7c4dff;--paper-deep-purple-a400:#651fff;--paper-deep-purple-a700:#6200ea;--paper-indigo-50:#e8eaf6;--paper-indigo-100:#c5cae9;--paper-indigo-200:#9fa8da;--paper-indigo-300:#7986cb;--paper-indigo-400:#5c6bc0;--paper-indigo-500:#3f51b5;--paper-indigo-600:#3949ab;--paper-indigo-700:#303f9f;--paper-indigo-800:#283593;--paper-indigo-900:#1a237e;--paper-indigo-a100:#8c9eff;--paper-indigo-a200:#536dfe;--paper-indigo-a400:#3d5afe;--paper-indigo-a700:#304ffe;--paper-blue-50:#e3f2fd;--paper-blue-100:#bbdefb;--paper-blue-200:#90caf9;--paper-blue-300:#64b5f6;--paper-blue-400:#42a5f5;--paper-blue-500:#2196f3;--paper-blue-600:#1e88e5;--paper-blue-700:#1976d2;--paper-blue-800:#1565c0;--paper-blue-900:#0d47a1;--paper-blue-a100:#82b1ff;--paper-blue-a200:#448aff;--paper-blue-a400:#2979ff;--paper-blue-a700:#2962ff;--paper-light-blue-50:#e1f5fe;--paper-light-blue-100:#b3e5fc;--paper-light-blue-200:#81d4fa;--paper-light-blue-300:#4fc3f7;--paper-light-blue-400:#29b6f6;--paper-light-blue-500:#03a9f4;--paper-light-blue-600:#039be5;--paper-light-blue-700:#0288d1;--paper-light-blue-800:#0277bd;--paper-light-blue-900:#01579b;--paper-light-blue-a100:#80d8ff;--paper-light-blue-a200:#40c4ff;--paper-light-blue-a400:#00b0ff;--paper-light-blue-a700:#0091ea;--paper-cyan-50:#e0f7fa;--paper-cyan-100:#b2ebf2;--paper-cyan-200:#80deea;--paper-cyan-300:#4dd0e1;--paper-cyan-400:#26c6da;--paper-cyan-500:#00bcd4;--paper-cyan-600:#00acc1;--paper-cyan-700:#0097a7;--paper-cyan-800:#00838f;--paper-cyan-900:#006064;--paper-cyan-a100:#84ffff;--paper-cyan-a200:#18ffff;--paper-cyan-a400:#00e5ff;--paper-cyan-a700:#00b8d4;--paper-teal-50:#e0f2f1;--paper-teal-100:#b2dfdb;--paper-teal-200:#80cbc4;--paper-teal-300:#4db6ac;--paper-teal-400:#26a69a;--paper-teal-500:#009688;--paper-teal-600:#00897b;--paper-teal-700:#00796b;--paper-teal-800:#00695c;--paper-teal-900:#004d40;--paper-teal-a100:#a7ffeb;--paper-teal-a200:#64ffda;--paper-teal-a400:#1de9b6;--paper-teal-a700:#00bfa5;--paper-green-50:#e8f5e9;--paper-green-100:#c8e6c9;--paper-green-200:#a5d6a7;--paper-green-300:#81c784;--paper-green-400:#66bb6a;--paper-green-500:#4caf50;--paper-green-600:#43a047;--paper-green-700:#388e3c;--paper-green-800:#2e7d32;--paper-green-900:#1b5e20;--paper-green-a100:#b9f6ca;--paper-green-a200:#69f0ae;--paper-green-a400:#00e676;--paper-green-a700:#00c853;--paper-light-green-50:#f1f8e9;--paper-light-green-100:#dcedc8;--paper-light-green-200:#c5e1a5;--paper-light-green-300:#aed581;--paper-light-green-400:#9ccc65;--paper-light-green-500:#8bc34a;--paper-light-green-600:#7cb342;--paper-light-green-700:#689f38;--paper-light-green-800:#558b2f;--paper-light-green-900:#33691e;--paper-light-green-a100:#ccff90;--paper-light-green-a200:#b2ff59;--paper-light-green-a400:#76ff03;--paper-light-green-a700:#64dd17;--paper-lime-50:#f9fbe7;--paper-lime-100:#f0f4c3;--paper-lime-200:#e6ee9c;--paper-lime-300:#dce775;--paper-lime-400:#d4e157;--paper-lime-500:#cddc39;--paper-lime-600:#c0ca33;--paper-lime-700:#afb42b;--paper-lime-800:#9e9d24;--paper-lime-900:#827717;--paper-lime-a100:#f4ff81;--paper-lime-a200:#eeff41;--paper-lime-a400:#c6ff00;--paper-lime-a700:#aeea00;--paper-yellow-50:#fffde7;--paper-yellow-100:#fff9c4;--paper-yellow-200:#fff59d;--paper-yellow-300:#fff176;--paper-yellow-400:#ffee58;--paper-yellow-500:#ffeb3b;--paper-yellow-600:#fdd835;--paper-yellow-700:#fbc02d;--paper-yellow-800:#f9a825;--paper-yellow-900:#f57f17;--paper-yellow-a100:#ffff8d;--paper-yellow-a200:#ffff00;--paper-yellow-a400:#ffea00;--paper-yellow-a700:#ffd600;--paper-amber-50:#fff8e1;--paper-amber-100:#ffecb3;--paper-amber-200:#ffe082;--paper-amber-300:#ffd54f;--paper-amber-400:#ffca28;--paper-amber-500:#ffc107;--paper-amber-600:#ffb300;--paper-amber-700:#ffa000;--paper-amber-800:#ff8f00;--paper-amber-900:#ff6f00;--paper-amber-a100:#ffe57f;--paper-amber-a200:#ffd740;--paper-amber-a400:#ffc400;--paper-amber-a700:#ffab00;--paper-orange-50:#fff3e0;--paper-orange-100:#ffe0b2;--paper-orange-200:#ffcc80;--paper-orange-300:#ffb74d;--paper-orange-400:#ffa726;--paper-orange-500:#ff9800;--paper-orange-600:#fb8c00;--paper-orange-700:#f57c00;--paper-orange-800:#ef6c00;--paper-orange-900:#e65100;--paper-orange-a100:#ffd180;--paper-orange-a200:#ffab40;--paper-orange-a400:#ff9100;--paper-orange-a700:#ff6500;--paper-deep-orange-50:#fbe9e7;--paper-deep-orange-100:#ffccbc;--paper-deep-orange-200:#ffab91;--paper-deep-orange-300:#ff8a65;--paper-deep-orange-400:#ff7043;--paper-deep-orange-500:#ff5722;--paper-deep-orange-600:#f4511e;--paper-deep-orange-700:#e64a19;--paper-deep-orange-800:#d84315;--paper-deep-orange-900:#bf360c;--paper-deep-orange-a100:#ff9e80;--paper-deep-orange-a200:#ff6e40;--paper-deep-orange-a400:#ff3d00;--paper-deep-orange-a700:#dd2c00;--paper-brown-50:#efebe9;--paper-brown-100:#d7ccc8;--paper-brown-200:#bcaaa4;--paper-brown-300:#a1887f;--paper-brown-400:#8d6e63;--paper-brown-500:#795548;--paper-brown-600:#6d4c41;--paper-brown-700:#5d4037;--paper-brown-800:#4e342e;--paper-brown-900:#3e2723;--paper-grey-50:#fafafa;--paper-grey-100:#f5f5f5;--paper-grey-200:#eeeeee;--paper-grey-300:#e0e0e0;--paper-grey-400:#bdbdbd;--paper-grey-500:#9e9e9e;--paper-grey-600:#757575;--paper-grey-700:#616161;--paper-grey-800:#424242;--paper-grey-900:#212121;--paper-blue-grey-50:#eceff1;--paper-blue-grey-100:#cfd8dc;--paper-blue-grey-200:#b0bec5;--paper-blue-grey-300:#90a4ae;--paper-blue-grey-400:#78909c;--paper-blue-grey-500:#607d8b;--paper-blue-grey-600:#546e7a;--paper-blue-grey-700:#455a64;--paper-blue-grey-800:#37474f;--paper-blue-grey-900:#263238;--dark-divider-opacity:0.12;--dark-disabled-opacity:0.38;--dark-secondary-opacity:0.54;--dark-primary-opacity:0.87;--light-divider-opacity:0.12;--light-disabled-opacity:0.3;--light-secondary-opacity:0.7;--light-primary-opacity:1.0}</style></custom-style>`;Ni.setAttribute("style","display: none;"),document.head.appendChild(Ni.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Bi=li`<custom-style><style is="custom-style">html{--primary-text-color:var(--light-theme-text-color);--primary-background-color:var(--light-theme-background-color);--secondary-text-color:var(--light-theme-secondary-color);--disabled-text-color:var(--light-theme-disabled-color);--divider-color:var(--light-theme-divider-color);--error-color:var(--paper-deep-orange-a700);--primary-color:var(--paper-indigo-500);--light-primary-color:var(--paper-indigo-100);--dark-primary-color:var(--paper-indigo-700);--accent-color:var(--paper-pink-a200);--light-accent-color:var(--paper-pink-a100);--dark-accent-color:var(--paper-pink-a400);--light-theme-background-color:#ffffff;--light-theme-base-color:#000000;--light-theme-text-color:var(--paper-grey-900);--light-theme-secondary-color:#737373;--light-theme-disabled-color:#9b9b9b;--light-theme-divider-color:#dbdbdb;--dark-theme-background-color:var(--paper-grey-900);--dark-theme-base-color:#ffffff;--dark-theme-text-color:#ffffff;--dark-theme-secondary-color:#bcbcbc;--dark-theme-disabled-color:#646464;--dark-theme-divider-color:#3c3c3c;--text-primary-color:var(--dark-theme-text-color);--default-primary-color:var(--primary-color)}</style></custom-style>`;Bi.setAttribute("style","display: none;"),document.head.appendChild(Bi.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Ii=li`<custom-style><style is="custom-style">html{--paper-input-container-shared-input-style:{position:relative;outline:0;box-shadow:none;padding:0;margin:0;width:100%;max-width:100%;background:0 0;border:none;color:var(--paper-input-container-input-color,var(--primary-text-color));-webkit-appearance:none;text-align:inherit;vertical-align:var(--paper-input-container-input-align,bottom);@apply --paper-font-subhead;};}</style></custom-style>`;Ii.setAttribute("style","display: none;"),document.head.appendChild(Ii.content),Ur({_template:li`<style>:host{display:block;padding:8px 0;@apply --paper-input-container;}:host([inline]){display:inline-block}:host([disabled]){pointer-events:none;opacity:.33;@apply --paper-input-container-disabled;}:host([hidden]){display:none!important}[hidden]{display:none!important}.floated-label-placeholder{@apply --paper-font-caption;}.underline{height:2px;position:relative}.focused-line{@apply --layout-fit;border-bottom:2px solid var(--paper-input-container-focus-color,var(--primary-color));-webkit-transform-origin:center center;transform-origin:center center;-webkit-transform:scale3d(0,1,1);transform:scale3d(0,1,1);@apply --paper-input-container-underline-focus;}.underline.is-highlighted .focused-line{-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform .25s;transition:transform .25s;@apply --paper-transition-easing;}.underline.is-invalid .focused-line{border-color:var(--paper-input-container-invalid-color,var(--error-color));-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform .25s;transition:transform .25s;@apply --paper-transition-easing;}.unfocused-line{@apply --layout-fit;border-bottom:1px solid var(--paper-input-container-color,var(--secondary-text-color));@apply --paper-input-container-underline;}:host([disabled]) .unfocused-line{border-bottom:1px dashed;border-color:var(--paper-input-container-color,var(--secondary-text-color));@apply --paper-input-container-underline-disabled;}.input-wrapper{@apply --layout-horizontal;@apply --layout-center;position:relative}.input-content{@apply --layout-flex-auto;@apply --layout-relative;max-width:100%}.input-content ::slotted(.paper-input-label),.input-content ::slotted(label){position:absolute;top:0;left:0;width:100%;font:inherit;color:var(--paper-input-container-color,var(--secondary-text-color));-webkit-transition:-webkit-transform .25s,width .25s;transition:transform .25s,width .25s;-webkit-transform-origin:left top;transform-origin:left top;min-height:1px;@apply --paper-font-common-nowrap;@apply --paper-font-subhead;@apply --paper-input-container-label;@apply --paper-transition-easing;}.input-content ::slotted(.paper-input-label):before,.input-content ::slotted(label):before{@apply --paper-input-container-label-before;}.input-content ::slotted(.paper-input-label):after,.input-content ::slotted(label):after{@apply --paper-input-container-label-after;}.input-content.label-is-floating ::slotted(.paper-input-label),.input-content.label-is-floating ::slotted(label){-webkit-transform:translateY(-75%) scale(.75);transform:translateY(-75%) scale(.75);width:133%;@apply --paper-input-container-label-floating;}:host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label),:host(:dir(rtl)) .input-content.label-is-floating ::slotted(label){right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top}.input-content.label-is-highlighted ::slotted(.paper-input-label),.input-content.label-is-highlighted ::slotted(label){color:var(--paper-input-container-focus-color,var(--primary-color));@apply --paper-input-container-label-focus;}.input-content.is-invalid ::slotted(.paper-input-label),.input-content.is-invalid ::slotted(label){color:var(--paper-input-container-invalid-color,var(--error-color))}.input-content.label-is-hidden ::slotted(.paper-input-label),.input-content.label-is-hidden ::slotted(label){visibility:hidden}.input-content ::slotted(.paper-input-input),.input-content ::slotted(input),.input-content ::slotted(iron-autogrow-textarea),.input-content ::slotted(iron-input),.input-content ::slotted(textarea){@apply --paper-input-container-shared-input-style;color:var(--paper-input-container-input-color,var(--primary-text-color));@apply --paper-input-container-input;}.input-content ::slotted(input)::-webkit-inner-spin-button,.input-content ::slotted(input)::-webkit-outer-spin-button{@apply --paper-input-container-input-webkit-spinner;}.input-content.focused ::slotted(.paper-input-input),.input-content.focused ::slotted(input),.input-content.focused ::slotted(iron-autogrow-textarea),.input-content.focused ::slotted(iron-input),.input-content.focused ::slotted(textarea){@apply --paper-input-container-input-focus;}.input-content.is-invalid ::slotted(.paper-input-input),.input-content.is-invalid ::slotted(input),.input-content.is-invalid ::slotted(iron-autogrow-textarea),.input-content.is-invalid ::slotted(iron-input),.input-content.is-invalid ::slotted(textarea){@apply --paper-input-container-input-invalid;}.prefix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-prefix;}.suffix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-suffix;}.input-content ::slotted(input){min-width:0}.input-content ::slotted(textarea){resize:none}.add-on-content{position:relative}.add-on-content.is-invalid ::slotted(*){color:var(--paper-input-container-invalid-color,var(--error-color))}.add-on-content.is-highlighted ::slotted(*){color:var(--paper-input-container-focus-color,var(--primary-color))}</style><div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]"></div><div class="input-wrapper"><span class="prefix"><slot name="prefix"></slot></span><div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer"><slot name="label"></slot><slot name="input"></slot></div><span class="suffix"><slot name="suffix"></slot></span></div><div class$="[[_computeUnderlineClass(focused,invalid)]]"><div class="unfocused-line"></div><div class="focused-line"></div></div><div class$="[[_computeAddOnContentClass(focused,invalid)]]"><slot name="add-on"></slot></div>`,is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,iron-input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Ke(this.attrForValue)},get _inputElement(){return kr(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this.__isFirstValueUpdate=!0,this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput),this._inputElementValue&&""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(e){this._addons||(this._addons=[]);var t=e.target;-1===this._addons.indexOf(t)&&(this._addons.push(t),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(e){this._handleValueAndAutoValidate(e.target)},_onValueChanged:function(e){var t=e.target;this.__isFirstValueUpdate&&(this.__isFirstValueUpdate=!1,void 0===t.value||""===t.value)||this._handleValueAndAutoValidate(e.target)},_handleValue:function(e){var t=this._inputElementValue;t||0===t||"number"===e.type&&!e.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:e,value:t,invalid:this.invalid})},_handleValueAndAutoValidate:function(e){var t;this.autoValidate&&e&&(t=e.validate?e.validate(this._inputElementValue):e.checkValidity(),this.invalid=!t);this._handleValue(e)},_onIronInputValidate:function(e){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(e){for(var t,n=0;t=this._addons[n];n++)t.update(e)},_computeInputContentClass:function(e,t,n,r,i){var o="input-content";if(e)i&&(o+=" label-is-hidden"),r&&(o+=" is-invalid");else{var s=this.querySelector("label");t||i?(o+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",r?o+=" is-invalid":n&&(o+=" label-is-highlighted")):(s&&(this.$.labelAndInputContainer.style.position="relative"),r&&(o+=" is-invalid"))}return n&&(o+=" focused"),o},_computeUnderlineClass:function(e,t){var n="underline";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n},_computeAddOnContentClass:function(e,t){var n="add-on-content";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
Ur({_template:li`<style>:host{display:inline-block;visibility:hidden;color:var(--paper-input-container-invalid-color,var(--error-color));@apply --paper-font-caption;@apply --paper-input-error;position:absolute;left:0;right:0}:host([invalid]){visibility:visible}#a11yWrapper{visibility:hidden}:host([invalid]) #a11yWrapper{visibility:visible}</style><div id="a11yWrapper"><slot></slot></div>`,is:"paper-input-error",behaviors:[Si],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(e){this._setInvalid(e.invalid)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Pi={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1}},attached:function(){},detached:function(){}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/var Mi={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},Di={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},Ri={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},Fi=/[a-z0-9*]/,Li=/U\+/,Ui=/^arrow/,$i=/^space(bar)?/,Hi=/^escape$/;function Gi(e,t){var n="";if(e){var r=e.toLowerCase();" "===r||$i.test(r)?n="space":Hi.test(r)?n="esc":1==r.length?t&&!Fi.test(r)||(n=r):n=Ui.test(r)?r.replace("arrow",""):"multiply"==r?"*":r}return n}function ji(e,t){return e.key?Gi(e.key,t):e.detail&&e.detail.key?Gi(e.detail.key,t):(n=e.keyIdentifier,r="",n&&(n in Mi?r=Mi[n]:Li.test(n)?(n=parseInt(n.replace("U+","0x"),16),r=String.fromCharCode(n).toLowerCase()):r=n.toLowerCase()),r||function(e){var t="";return Number(e)&&(t=e>=65&&e<=90?String.fromCharCode(32+e):e>=112&&e<=123?"f"+(e-112+1):e>=48&&e<=57?String(e-48):e>=96&&e<=105?String(e-96):Di[e]),t}(e.keyCode)||"");var n,r}function zi(e,t){return ji(t,e.hasModifiers)===e.key&&(!e.hasModifiers||!!t.shiftKey==!!e.shiftKey&&!!t.ctrlKey==!!e.ctrlKey&&!!t.altKey==!!e.altKey&&!!t.metaKey==!!e.metaKey)}function Vi(e){return e.trim().split(" ").map((function(e){return function(e){return 1===e.length?{combo:e,key:e,event:"keydown"}:e.split("+").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n[1];return r in Ri?(e[Ri[r]]=!0,e.hasModifiers=!0):(e.key=r,e.event=i||"keydown"),e}),{combo:e.split(":").shift()})}(e)}))}const Xi={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(e,t){this._imperativeKeyBindings[e]=t,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(e,t){for(var n=Vi(t),r=0;r<n.length;++r)if(zi(n[r],e))return!0;return!1},_collectKeyBindings:function(){var e=this.behaviors.map((function(e){return e.keyBindings}));return-1===e.indexOf(this.keyBindings)&&e.push(this.keyBindings),e},_prepKeyBindings:function(){for(var e in this._keyBindings={},this._collectKeyBindings().forEach((function(e){for(var t in e)this._addKeyBinding(t,e[t])}),this),this._imperativeKeyBindings)this._addKeyBinding(e,this._imperativeKeyBindings[e]);for(var t in this._keyBindings)this._keyBindings[t].sort((function(e,t){var n=e[0].hasModifiers;return n===t[0].hasModifiers?0:n?-1:1}))},_addKeyBinding:function(e,t){Vi(e).forEach((function(e){this._keyBindings[e.event]=this._keyBindings[e.event]||[],this._keyBindings[e.event].push([e,t])}),this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach((function(e){var t=this._keyBindings[e],n=this._onKeyBindingEvent.bind(this,t);this._boundKeyHandlers.push([this.keyEventTarget,e,n]),this.keyEventTarget.addEventListener(e,n)}),this)},_unlistenKeyEventListeners:function(){for(var e,t,n,r;this._boundKeyHandlers.length;)t=(e=this._boundKeyHandlers.pop())[0],n=e[1],r=e[2],t.removeEventListener(n,r)},_onKeyBindingEvent:function(e,t){if(this.stopKeyboardEventPropagation&&t.stopPropagation(),!t.defaultPrevented)for(var n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];if(zi(r,t)&&(this._triggerKeyHandler(r,i,t),t.defaultPrevented))return}},_triggerKeyHandler:function(e,t,n){var r=Object.create(e);r.keyboardEvent=n;var i=new CustomEvent(e.event,{detail:r,cancelable:!0});this[t].call(this,i),i.defaultPrevented&&n.preventDefault()}},qi={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(e){this._setFocused("focus"===e.type)},_disabledChanged:function(e,t){this.setAttribute("aria-disabled",e?"true":"false"),this.style.pointerEvents=e?"none":"",e?(this._oldTabIndex=this.getAttribute("tabindex"),this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(null===this._oldTabIndex?this.removeAttribute("tabindex"):this.setAttribute("tabindex",this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}},Wi={NextLabelID:1,NextAddonID:1,NextInputID:1},Yi={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$||(this.$={}),this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId)),this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy(),!ui&&this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(e,t){return e=e?e+" "+t:t},_onAddonAttached:function(e){var t=kr(e).rootTarget;if(t.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,t.id);else{var n="paper-input-add-on-"+Wi.NextAddonID++;t.id=n,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,n)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(e){qi._focusBlurHandler.call(this,e),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(e){var t=this.getAttribute("tabindex");this._shiftTabPressed=!0,this.setAttribute("tabindex","-1"),this.async((function(){this.setAttribute("tabindex",t),this._shiftTabPressed=!1}),1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(e){try{var t=this.inputElement.selectionStart;this.value=e,this.inputElement.selectionStart=t,this.inputElement.selectionEnd=t}catch(t){this.value=e}},_computeAlwaysFloatLabel:function(e,t){return t||e},_updateAriaLabelledBy:function(){var e,t=kr(this.root).querySelector("label");t?(t.id?e=t.id:(e="paper-input-label-"+Wi.NextLabelID++,t.id=e),this._ariaLabelledBy=e):this._ariaLabelledBy=""},_generateInputId:function(){this._inputId&&""!==this._inputId||(this._inputId="input-"+Wi.NextInputID++)},_onChange:function(e){this.shadowRoot&&this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var e=document.activeElement;e instanceof HTMLElement&&e!==document.body&&e!==document.documentElement||this._focusableElement.focus()}}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
Ur({is:"paper-input",_template:li`<style>:host{display:block}:host([focused]){outline:0}:host([hidden]){display:none!important}input{min-width:0}iron-input>input{@apply --paper-input-container-shared-input-style;font-family:inherit;font-weight:inherit;font-size:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;text-shadow:inherit;color:inherit;cursor:inherit}input:disabled{@apply --paper-input-container-input-disabled;}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{@apply --paper-input-container-input-webkit-spinner;}input::-webkit-clear-button{@apply --paper-input-container-input-webkit-clear;}input::-webkit-calendar-picker-indicator{@apply --paper-input-container-input-webkit-calendar-picker-indicator;}input::-webkit-input-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}input:-moz-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}input::-moz-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}input::-ms-clear{@apply --paper-input-container-ms-clear;}input::-ms-reveal{@apply --paper-input-container-ms-reveal;}input:-ms-input-placeholder{color:var(--paper-input-container-color,var(--secondary-text-color))}label{pointer-events:none}</style><paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><slot name="prefix" slot="prefix"></slot><label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label><iron-input bind-value="{{value}}" slot="input" class="input-element" id$="[[_inputId]]" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]"><input aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]" role$="[[inputRole]]" aria-haspopup$="[[inputAriaHaspopup]]"></iron-input><slot name="suffix" slot="suffix"></slot><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container>`,behaviors:[[qi,Xi,Yi],Pi],properties:{value:{type:String},inputRole:{type:String,value:void 0},inputAriaHaspopup:{type:String,value:void 0}},get _focusableElement(){return this.inputElement._inputElement},listeners:{"iron-input-ready":"_onIronInputReady"},_onIronInputReady:function(){this.$.nativeInput||(this.$.nativeInput=this.$$("input")),this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.$.nativeInput.type)&&(this.alwaysFloatLabel=!0),this.inputElement.bindValue&&this.$.container._handleValueAndAutoValidate(this.inputElement)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Qi={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(e){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required","true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked,this.fire("iron-change")},_valueChanged:function(){void 0!==this.value&&null!==this.value||(this.value="on")}},Ki=[Pi,Ei,Qi],Zi={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(e){this._detectKeyboardFocus(e),e||this._setPressed(!1)},_detectKeyboardFocus:function(e){this._setReceivedFocusFromKeyboard(!this.pointerDown&&e)},_userActivate:function(e){this.active!==e&&(this.active=e,this.fire("change"))},_downHandler:function(e){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(e){var t=e.detail.keyboardEvent,n=kr(t).localTarget;this.isLightDescendant(n)||(t.preventDefault(),t.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(e){var t=e.detail.keyboardEvent,n=kr(t).localTarget;this.isLightDescendant(n)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async((function(){this.click()}),1)},_pressedChanged:function(e){this._changedButtonState()},_ariaActiveAttributeChanged:function(e,t){t&&t!=e&&this.hasAttribute(t)&&this.removeAttribute(t)},_activeChanged:function(e,t){this.toggles?this.setAttribute(this.ariaActiveAttribute,e?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Ji=[Xi,Zi];
/**
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
var eo={distance:function(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function to(e){this.element=e,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function no(e){this.element=e,this.color=window.getComputedStyle(e).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),kr(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}to.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(e,t){var n=eo.distance(e,t,0,0),r=eo.distance(e,t,this.width,0),i=eo.distance(e,t,0,this.height),o=eo.distance(e,t,this.width,this.height);return Math.max(n,r,i,o)}},no.MAX_RADIUS=300,no.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var e;return this.mouseDownStart?(e=eo.now()-this.mouseDownStart,this.mouseUpStart&&(e-=this.mouseUpElapsed),e):0},get mouseUpElapsed(){return this.mouseUpStart?eo.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var e=this.containerMetrics.width*this.containerMetrics.width,t=this.containerMetrics.height*this.containerMetrics.height,n=1.1*Math.min(Math.sqrt(e+t),no.MAX_RADIUS)+5,r=1.1-n/no.MAX_RADIUS*.2,i=this.mouseInteractionSeconds/r,o=n*(1-Math.pow(80,-i));return Math.abs(o)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var e=.3*this.mouseUpElapsedSeconds,t=this.opacity;return Math.max(0,Math.min(e,t))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,no.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,no.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new to(this.element)},draw:function(){var e,t,n;this.wave.style.opacity=this.opacity,e=this.radius/(this.containerMetrics.size/2),t=this.xNow-this.containerMetrics.width/2,n=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+t+"px, "+n+"px)",this.waveContainer.style.transform="translate3d("+t+"px, "+n+"px, 0)",this.wave.style.webkitTransform="scale("+e+","+e+")",this.wave.style.transform="scale3d("+e+","+e+",1)"},downAction:function(e){var t=this.containerMetrics.width/2,n=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=eo.now(),this.center?(this.xStart=t,this.yStart=n,this.slideDistance=eo.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=e?e.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=e?e.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=t,this.yEnd=n,this.slideDistance=eo.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(e){this.isMouseDown&&(this.mouseUpStart=eo.now())},remove:function(){kr(kr(this.waveContainer).parentNode).removeChild(this.waveContainer)}},Ur({_template:li`<style>:host{display:block;position:absolute;border-radius:inherit;overflow:hidden;top:0;left:0;right:0;bottom:0;pointer-events:none}:host([animating]){-webkit-transform:translate(0,0);transform:translate3d(0,0,0)}#background,#waves,.wave,.wave-container{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%}#background,.wave{opacity:0}#waves,.wave{overflow:hidden}.wave,.wave-container{border-radius:50%}:host(.circle) #background,:host(.circle) #waves{border-radius:50%}:host(.circle) .wave-container{overflow:hidden}</style><div id="background"></div><div id="waves"></div>`,is:"paper-ripple",behaviors:[Xi],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){11==kr(this).parentNode.nodeType?this.keyEventTarget=kr(this).getOwnerRoot().host:this.keyEventTarget=kr(this).parentNode;var e=this.keyEventTarget;this.listen(e,"up","uiUpAction"),this.listen(e,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var e=0;e<this.ripples.length;++e)if(!this.ripples[e].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async((function(){this.upAction()}),1)},uiDownAction:function(e){this.noink||this.downAction(e)},downAction:function(e){this.holdDown&&this.ripples.length>0||(this.addRipple().downAction(e),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(e){this.noink||this.upAction(e)},upAction:function(e){this.holdDown||(this.ripples.forEach((function(t){t.upAction(e)})),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor="",this.fire("transitionend")},addRipple:function(){var e=new no(this);return kr(this.$.waves).appendChild(e.waveContainer),this.$.background.style.backgroundColor=e.color,this.ripples.push(e),this._setAnimating(!0),e},removeRipple:function(e){var t=this.ripples.indexOf(e);t<0||(this.ripples.splice(t,1),e.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var e,t;for(e=0;e<this.ripples.length;++e)(t=this.ripples[e]).draw(),this.$.background.style.opacity=t.outerOpacity,t.isOpacityFullyDecayed&&!t.isRestingAtMaxRadius&&this.removeRipple(t);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},animateRipple:function(){return this.animate()},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(e,t){void 0!==t&&(e?this.downAction():this.upAction())}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const ro={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(e){Zi._downHandler.call(this,e),this.pressed&&this.ensureRipple(e)},ensureRipple:function(e){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var t=this._rippleContainer||this.root;if(t&&kr(t).appendChild(this._ripple),e){var n=kr(this._rippleContainer||this),r=kr(e).rootTarget;n.deepContains(r)&&this._ripple.uiDownAction(e)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(e){this.hasRipple()&&(this._ripple.noink=e)}},io={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(e){e&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=e)},_createRipple:function(){var e=ro._createRipple();return e.id="ink",e.setAttribute("center",""),e.classList.add("circle"),e}},oo=[[Ji,qi,ro,io],Ki,{_checkedChanged:function(){Qi._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){ro._buttonStateChanged.call(this),this.disabled||this.isAttached&&(this.checked=this.active)}}],so=li`<style>:host{display:inline-block;white-space:nowrap;cursor:pointer;--calculated-paper-checkbox-size:var(--paper-checkbox-size, 18px);--calculated-paper-checkbox-ink-size:var(--paper-checkbox-ink-size, -1px);@apply --paper-font-common-base;line-height:0;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none!important}:host(:focus){outline:0}.hidden{display:none}#checkboxContainer{display:inline-block;position:relative;width:var(--calculated-paper-checkbox-size);height:var(--calculated-paper-checkbox-size);min-width:var(--calculated-paper-checkbox-size);margin:var(--paper-checkbox-margin,initial);vertical-align:var(--paper-checkbox-vertical-align,middle);background-color:var(--paper-checkbox-unchecked-background-color,transparent)}#ink{position:absolute;top:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size))/ 2);left:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size))/ 2);width:var(--calculated-paper-checkbox-ink-size);height:var(--calculated-paper-checkbox-ink-size);color:var(--paper-checkbox-unchecked-ink-color,var(--primary-text-color));opacity:.6;pointer-events:none}#ink:dir(rtl){right:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size))/ 2);left:auto}#ink[checked]{color:var(--paper-checkbox-checked-ink-color,var(--primary-color))}#checkbox{position:relative;box-sizing:border-box;height:100%;border:solid 2px;border-color:var(--paper-checkbox-unchecked-color,var(--primary-text-color));border-radius:2px;pointer-events:none;-webkit-transition:background-color 140ms,border-color 140ms;transition:background-color 140ms,border-color 140ms;-webkit-transition-duration:var(--paper-checkbox-animation-duration,140ms);transition-duration:var(--paper-checkbox-animation-duration,140ms)}#checkbox.checked #checkmark{-webkit-animation:checkmark-expand 140ms ease-out forwards;animation:checkmark-expand 140ms ease-out forwards;-webkit-animation-duration:var(--paper-checkbox-animation-duration,140ms);animation-duration:var(--paper-checkbox-animation-duration,140ms)}@-webkit-keyframes checkmark-expand{0%{-webkit-transform:scale(0,0) rotate(45deg)}100%{-webkit-transform:scale(1,1) rotate(45deg)}}@keyframes checkmark-expand{0%{transform:scale(0,0) rotate(45deg)}100%{transform:scale(1,1) rotate(45deg)}}#checkbox.checked{background-color:var(--paper-checkbox-checked-color,var(--primary-color));border-color:var(--paper-checkbox-checked-color,var(--primary-color))}#checkmark{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-bottom-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-color:var(--paper-checkbox-checkmark-color,#fff);-webkit-transform-origin:97% 86%;transform-origin:97% 86%;box-sizing:content-box}#checkmark:dir(rtl){-webkit-transform-origin:50% 14%;transform-origin:50% 14%}#checkboxLabel{position:relative;display:inline-block;vertical-align:middle;padding-left:var(--paper-checkbox-label-spacing,8px);white-space:normal;line-height:normal;color:var(--paper-checkbox-label-color,var(--primary-text-color));@apply --paper-checkbox-label;}:host([checked]) #checkboxLabel{color:var(--paper-checkbox-label-checked-color,var(--paper-checkbox-label-color,var(--primary-text-color)));@apply --paper-checkbox-label-checked;}#checkboxLabel:dir(rtl){padding-right:var(--paper-checkbox-label-spacing,8px);padding-left:0}#checkboxLabel[hidden]{display:none}:host([disabled]) #checkbox{opacity:.5;border-color:var(--paper-checkbox-unchecked-color,var(--primary-text-color))}:host([disabled][checked]) #checkbox{background-color:var(--paper-checkbox-unchecked-color,var(--primary-text-color));opacity:.5}:host([disabled]) #checkboxLabel{opacity:.65}#checkbox.invalid:not(.checked){border-color:var(--paper-checkbox-error-color,var(--error-color))}</style><div id="checkboxContainer"><div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]"><div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div></div></div><div id="checkboxLabel"><slot></slot></div>`;
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/so.setAttribute("strip-whitespace",""),Ur({_template:so,is:"paper-checkbox",behaviors:[oo],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function(){var e,t,n;e=this,t=function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim()){var e=this.getComputedStyleValue("--calculated-paper-checkbox-size").trim(),t="px",n=e.match(/[A-Za-z]+$/);null!==n&&(t=n[0]);var r=parseFloat(e),i=8/3*r;"px"===t&&(i=Math.floor(i))%2!=r%2&&i++,this.updateStyles({"--paper-checkbox-ink-size":i+t})}},ir||ar(),sr.push([e,t,n])},_computeCheckboxClass:function(e,t){var n="";return e&&(n+="checked "),t&&(n+="invalid"),n},_computeCheckmarkClass:function(e){return e?"":"hidden"},_createRipple:function(){return this._rippleContainer=this.$.checkboxContainer,io._createRipple.call(this)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const ao=li`<custom-style><style is="custom-style">html{--shadow-transition:{transition:box-shadow .28s cubic-bezier(.4,0,.2,1)};--shadow-none:{box-shadow:none};--shadow-elevation-2dp:{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)};--shadow-elevation-3dp:{box-shadow:0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12),0 3px 3px -2px rgba(0,0,0,.4)};--shadow-elevation-4dp:{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.4)};--shadow-elevation-6dp:{box-shadow:0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12),0 3px 5px -1px rgba(0,0,0,.4)};--shadow-elevation-8dp:{box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.4)};--shadow-elevation-12dp:{box-shadow:0 12px 16px 1px rgba(0,0,0,.14),0 4px 22px 3px rgba(0,0,0,.12),0 6px 7px -4px rgba(0,0,0,.4)};--shadow-elevation-16dp:{box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.4)};--shadow-elevation-24dp:{box-shadow:0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12),0 11px 15px -7px rgba(0,0,0,.4)};}</style></custom-style>`;ao.setAttribute("style","display: none;"),document.head.appendChild(ao.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const lo=li`<dom-module id="paper-material-styles"><template><style>html{--paper-material:{display:block;position:relative};--paper-material-elevation-1:{@apply --shadow-elevation-2dp;};--paper-material-elevation-2:{@apply --shadow-elevation-4dp;};--paper-material-elevation-3:{@apply --shadow-elevation-6dp;};--paper-material-elevation-4:{@apply --shadow-elevation-8dp;};--paper-material-elevation-5:{@apply --shadow-elevation-16dp;};}.paper-material{@apply --paper-material;}.paper-material[elevation="1"]{@apply --paper-material-elevation-1;}.paper-material[elevation="2"]{@apply --paper-material-elevation-2;}.paper-material[elevation="3"]{@apply --paper-material-elevation-3;}.paper-material[elevation="4"]{@apply --paper-material-elevation-4;}.paper-material[elevation="5"]{@apply --paper-material-elevation-5;}:host{--paper-material:{display:block;position:relative};--paper-material-elevation-1:{@apply --shadow-elevation-2dp;};--paper-material-elevation-2:{@apply --shadow-elevation-4dp;};--paper-material-elevation-3:{@apply --shadow-elevation-6dp;};--paper-material-elevation-4:{@apply --shadow-elevation-8dp;};--paper-material-elevation-5:{@apply --shadow-elevation-16dp;};}:host(.paper-material){@apply --paper-material;}:host(.paper-material[elevation="1"]){@apply --paper-material-elevation-1;}:host(.paper-material[elevation="2"]){@apply --paper-material-elevation-2;}:host(.paper-material[elevation="3"]){@apply --paper-material-elevation-3;}:host(.paper-material[elevation="4"]){@apply --paper-material-elevation-4;}:host(.paper-material[elevation="5"]){@apply --paper-material-elevation-5;}</style></template></dom-module>`;lo.setAttribute("style","display: none;"),document.head.appendChild(lo.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const uo={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var e=1;this.disabled?e=0:this.active||this.pressed?e=4:this.receivedFocusFromKeyboard&&(e=3),this._setElevation(e)},_computeKeyboardClass:function(e){this.toggleClass("keyboard-focus",e)},_spaceKeyDownHandler:function(e){Zi._spaceKeyDownHandler.call(this,e),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(e){Zi._spaceKeyUpHandler.call(this,e),this.hasRipple()&&this._ripple.uiUpAction()}},co=[Ji,qi,ro,uo],ho=li`<style include="paper-material-styles">:host{@apply --layout-inline;@apply --layout-center-center;position:relative;box-sizing:border-box;min-width:5.14em;margin:0 .29em;background:0 0;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent;font:inherit;text-transform:uppercase;outline-width:0;border-radius:3px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:pointer;z-index:0;padding:.7em .57em;@apply --paper-font-common-base;@apply --paper-button;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}:host([hidden]){display:none!important}:host([raised].keyboard-focus){font-weight:700;@apply --paper-button-raised-keyboard-focus;}:host(:not([raised]).keyboard-focus){font-weight:700;@apply --paper-button-flat-keyboard-focus;}:host([disabled]){background:0 0;color:#a8a8a8;cursor:auto;pointer-events:none;@apply --paper-button-disabled;}:host([disabled][raised]){background:#eaeaea}:host([animated]){@apply --shadow-transition;}paper-ripple{color:var(--paper-button-ink-color)}</style><slot></slot>`;ho.setAttribute("strip-whitespace",""),Ur({_template:ho,is:"paper-button",behaviors:[co],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?uo._calculateElevation.apply(this):this._setElevation(0)}}),function(e){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links={},this.options=e||g.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t._label=/(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,t.def=c(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=c(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=c(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",t.html=c(t.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,t._tag).getRegex(),t.paragraph=c(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag","<"+t._tag).getRegex(),t.blockquote=c(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=m({},t),t.gfm=m({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=c(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex(),t.tables=m({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n){var r,i,o,s,a,l,u,c,h,p,d;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(n&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),d=(s=o[2]).length>1,this.tokens.push({type:"list_start",ordered:d,start:d?+s:""}),r=!1,p=(o=o[0].match(this.rules.item)).length,c=0;c<p;c++)u=(l=o[c]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==p-1&&(s===(a=t.bullet.exec(o[c+1])[0])||s.length>1&&a.length>1||(e=o.slice(c+1).join("\n")+e,c=p-1)),i=r||/\n\n(?!\s*$)/.test(l),c!==p-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(n&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),o[3]&&(o[3]=o[3].substring(1,o[3].length-1)),h=o[1].toLowerCase(),this.tokens.links[h]||(this.tokens.links[h]={href:o[2],title:o[3]});else if(n&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(n&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function i(e,t){if(this.options=t||g.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function o(e){this.options=e||{}}function s(){}function a(e){this.tokens=[],this.token=null,this.options=e||g.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function c(e,t){return e=e.source,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function h(e,t){return p[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?p[" "+e]=e+"/":p[" "+e]=e.replace(/[^/]*$/,"")),e=p[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=c(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=c(r.link).replace("inside",r._inside).replace("href",r._href).getRegex(),r.reflink=c(r.reflink).replace("inside",r._inside).getRegex(),r.normal=m({},r),r.pedantic=m({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=m({},r.normal,{escape:c(r.escape).replace("])","~|])").getRegex(),url:c(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",r._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(r.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),r.breaks=m({},r.gfm,{br:c(r.br).replace("{2,}","*").getRegex(),text:c(r.gfm.text).replace("{2,}","*").getRegex()}),i.rules=r,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?"mailto:"+(n=l(this.mangle(i[1]))):n=l(i[1]),o+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):l(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){o+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(l(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=this.renderer.text(l(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else i[0]=this.rules._backpedal.exec(i[0])[0],e=e.substring(i[0].length),"@"===i[2]?r="mailto:"+(n=l(i[0])):(n=l(i[0]),r="www."===i[1]?"http://"+n:n),o+=this.renderer.link(r,null,n);return o},i.prototype.outputLink=function(e,t){var n=l(t.href),r=t.title?l(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,l(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},o.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+l(t,!0)+'">'+(n?e:l(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:l(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(u(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return n}this.options.baseUrl&&!d.test(e)&&(e=h(this.options.baseUrl,e));var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},o.prototype.image=function(e,t,n){this.options.baseUrl&&!d.test(e)&&(e=h(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},o.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},a.parse=function(e,t){return new a(t).parse(e)},a.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,m({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",o="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(i,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s,a);case"list_item_start":for(o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var p={},d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function m(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof t){r||(r=t,t=null);var i,o,s=(t=m({},g.defaults,t||{})).highlight,u=0;try{i=n.lex(e,t)}catch(e){return r(e)}o=i.length;var c=function(e){if(e)return t.highlight=s,r(e);var n;try{n=a.parse(i,t)}catch(t){e=t}return t.highlight=s,e?r(e):r(null,n)};if(!s||s.length<3)return c();if(delete t.highlight,!o)return c();for(;u<i.length;u++)!function(e){"code"!==e.type?--o||c():s(e.text,e.lang,(function(t,n){return t?c(t):null==n||n===e.text?--o||c():(e.text=n,e.escaped=!0,void(--o||c()))}))}(i[u])}else try{return t&&(t=m({},g.defaults,t)),a.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||g.defaults).silent)return"<p>An error occurred:</p><pre>"+l(e.message+"",!0)+"</pre>";throw e}}f.exec=f,g.options=g.setOptions=function(e){return m(g.defaults,e),g},g.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1,baseUrl:null},g.Parser=a,g.parser=a.parse,g.Renderer=o,g.TextRenderer=s,g.Lexer=n,g.lexer=n.lex,g.InlineLexer=i,g.inlineLexer=i.output,g.parse=g,"undefined"!=typeof module&&"object"==typeof exports?module.exports=g:"function"==typeof define&&define.amd?define((function(){return g})):e.marked=g}("undefined"!=typeof window?window:global);var po=Object.freeze({__proto__:null});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/window.marked||(window.marked=po)
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/,Ur({_template:li`<style>:host{display:block}</style><slot name="markdown-html"><div id="content"></div></slot>`,is:"marked-element",properties:{markdown:{type:String,value:null},breaks:{type:Boolean,value:!1},pedantic:{type:Boolean,value:!1},renderer:{type:Function,value:null},sanitize:{type:Boolean,value:!1},sanitizer:{type:Function,value:null},disableRemoteSanitization:{type:Boolean,value:!1},smartypants:{type:Boolean,value:!1},callback:{type:Function,value:null},xhr:{type:Object,notify:!0,readOnly:!0}},observers:["render(markdown, breaks, pedantic, renderer, sanitize, sanitizer, smartypants, callback)"],ready:function(){this.markdown||(this._markdownElement=kr(this).querySelector('[type="text/markdown"]'),this._markdownElement&&(this._markdownElement.src&&this._request(this._markdownElement.src),""!==this._markdownElement.textContent.trim()&&(this.markdown=this._unindent(this._markdownElement.textContent)),new MutationObserver(this._onScriptAttributeChanged.bind(this)).observe(this._markdownElement,{attributes:!0})))},attached:function(){this._attached=!0,this._outputElement=this.outputElement,this.render()},detached:function(){this._attached=!1},unindent:function(e){return this._unindent(e)},get outputElement(){return kr(this).queryDistributedElements('[slot="markdown-html"]')[0]||this.$.content},render:function(){if(this._attached)if(this.markdown){var e=new marked.Renderer;this.renderer&&this.renderer(e);var t={renderer:e,highlight:this._highlight.bind(this),breaks:this.breaks,sanitize:this.sanitize,sanitizer:this.sanitizer,pedantic:this.pedantic,smartypants:this.smartypants};kr(this._outputElement).innerHTML=marked(this.markdown,t,this.callback),this.fire("marked-render-complete",{},{composed:!0})}else kr(this._outputElement).innerHTML=""},_highlight:function(e,t){return this.fire("syntax-highlight",{code:e,lang:t},{composed:!0}).detail.code||e},_unindent:function(e){if(!e)return e;var t=e.replace(/\t/g,"  ").split("\n"),n=t.reduce((function(e,t){if(/^\s*$/.test(t))return e;var n=t.match(/^(\s*)/)[0].length;return null===e||n<e?n:e}),null);return t.map((function(e){return e.substr(n)})).join("\n")},_request:function(e){this._setXhr(new XMLHttpRequest);var t=this.xhr;if(t.readyState>0)return null;t.addEventListener("error",this._handleError.bind(this)),t.addEventListener("loadend",function(e){var t=this.xhr.status||0;0===t||t>=200&&t<300?(this.sanitize=!this.disableRemoteSanitization,this.markdown=e.target.response):this._handleError(e),this.fire("marked-loadend",e)}.bind(this)),t.open("GET",e),t.setRequestHeader("Accept","text/markdown"),t.send()},_handleError:function(e){this.fire("marked-request-error",e,{cancelable:!0}).defaultPrevented||(this.markdown="Failed loading markdown source")},_onScriptAttributeChanged:function(e){"src"===e[0].attributeName&&this._request(this._markdownElement.src)}});var fo=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(o=i.util.objId(t),n[o])return n[o];for(var s in r={},n[o]=r,t)t.hasOwnProperty(s)&&(r[s]=e(t[s],n));return r;case"Array":return o=i.util.objId(t),n[o]?n[o]:(r=[],n[o]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e&&!t.test(e.className);)e=e.parentElement;return e?(e.className.match(t)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],s={};for(var a in o)if(o.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=o[a])}var u=r[e];return r[e]=s,i.languages.DFS(i.languages,(function(t,n){n===u&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,r,o){o=o||{};var s=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],r||a);var l=t[a],u=i.util.type(l);"Object"!==u||o[s(l)]?"Array"!==u||o[s(l)]||(o[s(l)]=!0,e(l,n,a,o)):(o[s(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,s=0;o=r.elements[s++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(n,r,o){var s=i.util.getLanguage(n),a=i.languages[s];n.className=n.className.replace(t,"").replace(/\s+/g," ")+" language-"+s;var l=n.parentElement;l&&"pre"===l.nodeName.toLowerCase()&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+s);var u={element:n,language:s,grammar:a,code:n.textContent};function c(e){u.highlightedCode=e,i.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,i.hooks.run("after-highlight",u),i.hooks.run("complete",u),o&&o.call(u.element)}if(i.hooks.run("before-sanity-check",u),(l=u.element.parentElement)&&"pre"===l.nodeName.toLowerCase()&&!l.hasAttribute("tabindex")&&l.setAttribute("tabindex","0"),!u.code)return i.hooks.run("complete",u),void(o&&o.call(u.element));if(i.hooks.run("before-highlight",u),u.grammar)if(r&&e.Worker){var h=new Worker(i.filename);h.onmessage=function(e){c(e.data)},h.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else c(i.highlight(u.code,u.grammar,u.language));else c(i.util.encode(u.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};return i.hooks.run("before-tokenize",r),r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return u(i,i.head,e),a(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function s(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function a(e,t,n,r,l,h){for(var p in n)if(n.hasOwnProperty(p)&&n[p]){var d=n[p];d=Array.isArray(d)?d:[d];for(var f=0;f<d.length;++f){if(h&&h.cause==p+","+f)return;var m=d[f],g=m.inside,y=!!m.lookbehind,v=!!m.greedy,w=m.alias;if(v&&!m.pattern.global){var b=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,b+"g")}for(var x=m.pattern||m,A=r.next,_=l;A!==t.tail&&!(h&&_>=h.reach);_+=A.value.length,A=A.next){var k=A.value;if(t.length>e.length)return;if(!(k instanceof o)){var E,C=1;if(v){if(!(E=s(x,_,e,y)))break;var S=E.index,O=E.index+E[0].length,T=_;for(T+=A.value.length;S>=T;)T+=(A=A.next).value.length;if(_=T-=A.value.length,A.value instanceof o)continue;for(var N=A;N!==t.tail&&(T<O||"string"==typeof N.value);N=N.next)C++,T+=N.value.length;C--,k=e.slice(_,T),E.index-=_}else if(!(E=s(x,0,k,y)))continue;S=E.index;var B=E[0],I=k.slice(0,S),P=k.slice(S+B.length),M=_+k.length;h&&M>h.reach&&(h.reach=M);var D=A.prev;if(I&&(D=u(t,D,I),_+=I.length),c(t,D,C),A=u(t,D,new o(p,g?i.tokenize(B,g):B,w,B)),P&&u(t,A,P),C>1){var R={cause:p+","+f,reach:M};a(e,t,n,A.prev,_,R),h&&R.reach>h.reach&&(h.reach=R.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function u(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function c(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(o.classes,s):o.classes.push(s)),i.hooks.run("wrap",o);var a="";for(var l in o.attributes)a+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+a+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,s=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),s&&e.close()}),!1),i):i;var h=i.util.currentScript();function p(){i.manual||i.highlightAll()}if(h&&(i.filename=h.src,h.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var d=document.readyState;"loading"===d||"interactive"===d&&h&&h.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */"undefined"!=typeof module&&module.exports&&(module.exports=fo),"undefined"!=typeof global&&(global.Prism=fo),fo.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?\]\]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},fo.languages.markup.tag.inside["attr-value"].inside.entity=fo.languages.markup.entity,fo.languages.markup.doctype.inside["internal-subset"].inside=fo.languages.markup,fo.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(fo.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:fo.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:fo.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},fo.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(fo.languages.markup.tag,"addAttribute",{value:function(e,t){fo.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:fo.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),fo.languages.html=fo.languages.markup,fo.languages.mathml=fo.languages.markup,fo.languages.svg=fo.languages.markup,fo.languages.xml=fo.languages.extend("markup",{}),fo.languages.ssml=fo.languages.xml,fo.languages.atom=fo.languages.xml,fo.languages.rss=fo.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(fo),fo.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},fo.languages.javascript=fo.languages.extend("clike",{"class-name":[fo.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),fo.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,fo.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:fo.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:fo.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:fo.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:fo.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:fo.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),fo.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:fo.languages.javascript}},string:/[\s\S]+/}}}),fo.languages.markup&&(fo.languages.markup.tag.addInlined("script","javascript"),fo.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),fo.languages.js=fo.languages.javascript,function(){if(void 0!==fo&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",r="loaded",i='pre[data-src]:not([data-src-status="loaded"]):not([data-src-status="loading"])',o=/\blang(?:uage)?-([\w-]+)\b/i;fo.hooks.add("before-highlightall",(function(e){e.selector+=", "+i})),fo.hooks.add("before-sanity-check",(function(o){var a=o.element;if(a.matches(i)){o.code="",a.setAttribute(t,n);var l=a.appendChild(document.createElement("CODE"));l.textContent="Loading";var u=a.getAttribute("data-src"),c=o.language;if("none"===c){var h=(/\.(\w+)$/.exec(u)||[,"none"])[1];c=e[h]||h}s(l,c),s(a,c);var p=fo.plugins.autoloader;p&&p.loadLanguages(c);var d=new XMLHttpRequest;d.open("GET",u,!0),d.onreadystatechange=function(){var e,n;4==d.readyState&&(d.status<400&&d.responseText?(a.setAttribute(t,r),l.textContent=d.responseText,fo.highlightElement(l)):(a.setAttribute(t,"failed"),d.status>=400?l.textContent=(e=d.status,n=d.statusText," Error "+e+" while fetching file: "+n):l.textContent=" Error: File does not exist or is empty"))},d.send(null)}})),fo.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(i),r=0;t=n[r++];)fo.highlightElement(t)}},fo.fileHighlight=function(){fo.plugins.fileHighlight.highlight.apply(this,arguments)}}function s(e,t){var n=e.className;n=n.replace(o," ")+" language-"+t,e.className=n.replace(/\s+/g," ").trim()}}();Ur({is:"prism-highlighter",properties:{languages:{type:Object,value:function(){return{}}}},ready:function(){this._handler=this._highlight.bind(this)},attached:function(){(this.parentNode.host||this.parentElement).addEventListener("syntax-highlight",this._handler)},detached:function(){(this.parentNode.host||this.parentElement).removeEventListener("syntax-highlight",this._handler)},_highlight:function(e){if(e.detail&&e.detail.code){e.stopPropagation();var t=e.detail;t.code=Prism.highlight(t.code,this._detectLang(t.code,t.lang))}else bi._warn("Malformed","syntax-highlight","event:",e.detail)},_detectLang:function(e,t){if(!t)return e.match(/^\s*</)?Prism.languages.markup:Prism.languages.javascript;if(this.languages[t])return this.languages[t];if(Prism.languages[t])return Prism.languages[t];switch(t.substr(0,2)){case"js":case"es":return Prism.languages.javascript;case"c":return Prism.languages.clike;default:return Prism.languages.markup}}});
/**
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const mo=li`<dom-module id="prism-theme-default"><template><style>code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></template></dom-module>`;document.head.appendChild(mo.content),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
Ur({_template:li`<style include="prism-theme-default">:host{display:block;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);margin-bottom:40px;@apply --demo-snippet;}.demo{display:block;border-bottom:1px solid #e0e0e0;background-color:#fff;margin:0;padding:20px;@apply --demo-snippet-demo;}.code-container{margin:0;background-color:#f5f5f5;font-size:13px;overflow:auto;position:relative;padding:0 20px;z-index:-1;@apply --demo-snippet-code;}.code{margin:0;background-color:var(--google-grey-100);font-size:10px;overflow:auto;@apply --demo-snippet-code;}.code>pre{margin:0;padding:0 0 10px 0}button{position:absolute;top:0;right:0;text-transform:uppercase;border:none;cursor:pointer;background:#e0e0e0}</style><prism-highlighter></prism-highlighter><div class="demo"><slot id="content"></slot></div><div class="code-container"><marked-element markdown="[[_markdown]]" id="marked"><div class="code" slot="markdown-html" id="code"></div></marked-element></div>`,is:"demo-snippet",properties:{_markdown:{type:String}},attached:function(){this._observer=kr(this.$.content).observeNodes(function(e){this._updateMarkdown()}.bind(this))},detached:function(){this._observer&&(kr(this.$.content).unobserveNodes(this._observer),this._observer=null)},_updateMarkdown:function(){var e=kr(this).queryDistributedElements("template")[0];if(e){var t=this.$.marked.unindent(e.innerHTML);t=(t=t.replace(/ class=""/g,"")).replace(/=""/g,""),this._markdown="```\n"+t+"\n```",e.hasAttribute("is")||(kr(this.$.content).unobserveNodes(this._observer),this._observer=null,kr(this).appendChild(document.importNode(e.content,!0))),this.dispatchEvent(new CustomEvent("dom-ready"))}else this._markdown=""},_copyToClipboard:function(){var e=document.createRange();e.selectNodeContents(this.$.code);var t=window.getSelection();t.removeAllRanges(),t.addRange(e);var n=!1;try{n=document.execCommand("copy"),this.$.copyButton.textContent="done"}catch(e){this.$.copyButton.textContent="error"}return setTimeout(this._resetCopyButtonState.bind(this),1e3),t.removeAllRanges(),n},_resetCopyButtonState:function(){this.$.copyButton.textContent="copy"}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const go=li`<dom-module id="demo-pages-shared-styles"><template><style>body{font-family:Roboto,Noto,sans-serif;font-size:14px;margin:0;padding:24px;background-color:#fafafa}.horizontal-section-container{@apply --layout-horizontal;@apply --layout-center-justified;@apply --layout-wrap;}.vertical-section-container{@apply --layout-vertical;@apply --center-justified;}.centered{max-width:600px;margin-left:auto;margin-right:auto}demo-snippet.centered-demo{--demo-snippet-demo:{@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center-justified;};}</style></template></dom-module>`;function yo(e,t,n,r){const i={op:t,func:n,data:r};return e.push(i),i}function vo(e,t){return e}go.setAttribute("style","display: none;"),document.head.appendChild(go.content),(()=>{var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=class{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),u.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),u.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new p(this),i=new p(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new p(this,e)}iterRange(e,t=this.length){return new d(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new f(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new l(e):u.from(l.split(e,[])):a.empty}},l=class extends a{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new m(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new l(h(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=c(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new l(t,e.length+i.length));else{let e=t.length>>1;n.push(new l(t.slice(0,e)),new l(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof l))return super.replace(e,t,n);let r=c(this.text,c(n.text,h(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new l(r,i):u.from(l.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new l(n,r)),n=[],r=-1);return r>-1&&t.push(new l(n,r)),t}},u=class extends a{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new u(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof u))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new l(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,c=-1,h=[];function p(e){let t;if(e.lines>i&&e instanceof u)for(let t of e.children)p(t);else e.lines>o&&(a>o||!a)?(d(),s.push(e)):e instanceof l&&a&&(t=h[h.length-1])instanceof l&&e.lines+t.lines<=32?(a+=e.lines,c+=e.length+1,h[h.length-1]=new l(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&d(),a+=e.lines,c+=e.length+1,h.push(e))}function d(){0!=a&&(s.push(1==h.length?h[0]:u.from(h,c)),c=-1,a=h.length=0)}for(let t of e)p(t);return d(),1==s.length?s[0]:new u(s,t)}};function c(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function h(e,t,n){return c(e,[""],t,n)}a.empty=new l([""],0);var p=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof l?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof l?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof l){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof l?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},d=class{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new p(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}},f=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(a.prototype[Symbol.iterator]=function(){return this.iter()},p.prototype[Symbol.iterator]=d.prototype[Symbol.iterator]=f.prototype[Symbol.iterator]=function(){return this});var m=class{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}},g="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<g.length;e++)g[e]+=g[e-1];function y(e){for(let t=1;t<g.length;t+=2)if(g[t]>e)return g[t-1]<=e;return!1}function v(e){return e>=127462&&e<=127487}function w(e,t,n=!0,r=!0){return(n?b:x)(e,t,r)}function b(e,t,n){if(t==e.length)return t;t&&A(e.charCodeAt(t))&&_(e.charCodeAt(t-1))&&t--;let r=k(e,t);for(t+=C(r);t<e.length;){let i=k(e,t);if(8205==r||8205==i||n&&y(i))t+=C(i),r=i;else{if(!v(i))break;{let n=0,r=t-2;for(;r>=0&&v(k(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function x(e,t,n){for(;t>0;){let r=b(e,t-2,n);if(r<t)return r;t--}return 0}function A(e){return e>=56320&&e<57344}function _(e){return e>=55296&&e<56320}function k(e,t){let n=e.charCodeAt(t);if(!_(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return A(r)?r-56320+(n-55296<<10)+65536:n}function E(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function C(e){return e<65536?1:2}var S=/\r\n?|\n/,O=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(O||(O={})),T=class{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){P(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new T(e)}composeDesc(e){return this.empty?e:e.empty?this:D(this,e)}mapDesc(e,t=!1){return e.empty?this:M(this,e,t)}mapPos(e,t=-1,n=O.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=O.Simple&&l>=e&&(n==O.TrackDel&&r<e&&l>e||n==O.TrackBefore&&r<e||n==O.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new T(e)}},N=class extends T{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return P(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return M(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let l=r>>1;for(;n.length<l;)n.push(a.empty);n.push(o?e.slice(i,i+o):a.empty)}i+=o}return new N(t,n)}compose(e){return this.empty?e:e.empty?this:D(this,e,!0)}map(e,t=!1){return e.empty?this:M(this,e,t,!0)}iterChanges(e,t=!1){P(this,e,t)}get desc(){return new T(this.sections)}filter(e){let t=[],n=[],r=[],i=new R(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);B(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;B(t,e,o),o>0&&I(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);B(t,e,-1),B(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new N(t,n),filtered:new T(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function l(e=!1){if(!e&&!r.length)return;o<t&&B(r,t-o,-1);let n=new N(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(u){if(Array.isArray(u))for(let t of u)e(t);else if(u instanceof N){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),s=s?s.compose(u.map(s)):u}else{let{from:e,to:s=e,insert:c}=u;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let h=c?"string"==typeof c?a.of(c.split(n||S)):c:a.empty,p=h.length;if(e==s&&0==p)return;e<o&&l(),e>o&&B(r,e-o,-1),B(r,s-e,p),I(i,r,h),o=s}}(e),l(!s),s}static empty(e){return new N(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(a.empty);n[r]=a.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new N(t,n)}};function B(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function I(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(a.empty);e.push(n)}}function P(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let l=e.sections[s++],u=e.sections[s++];if(u<0)i+=l,o+=l;else{let c=i,h=o,p=a.empty;for(;c+=l,h+=u,u&&r&&(p=p.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)l=e.sections[s++],u=e.sections[s++];t(i,c,o,h,p),i=c,o=h}}}function M(e,t,n,r=!1){let i=[],o=r?[]:null,s=new R(e),a=new R(t);for(let e=0,t=0;;)if(-1==s.ins)e+=s.len,s.next();else if(-1==a.ins&&t<e){let n=Math.min(a.len,e-t);a.forward(n),B(i,n,-1),t+=n}else if(a.ins>=0&&(s.done||t<e||t==e&&(a.len<s.len||a.len==s.len&&!n))){for(B(i,a.ins,-1);e>t&&!s.done&&e+s.len<t+a.len;)e+=s.len,s.next();t+=a.len,a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?new N(i,o):new T(i);throw new Error("Mismatched change set lengths")}{let n=0,r=e+s.len;for(;;)if(a.ins>=0&&t>e&&t+a.len<r)n+=a.ins,t+=a.len,a.next();else{if(!(-1==a.ins&&t<r))break;{let e=Math.min(a.len,r-t);n+=e,a.forward(e),t+=e}}B(i,n,s.ins),o&&I(o,i,s.text),e=r,s.next()}}}function D(e,t,n=!1){let r=[],i=n?[]:null,o=new R(e),s=new R(t);for(let e=!1;;){if(o.done&&s.done)return i?new N(r,i):new T(r);if(0==o.ins)B(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;B(r,t,n,e),i&&n&&I(i,r,s.text)}else-1==s.ins?(B(r,o.off?0:o.len,t,e),i&&I(i,r,o.textBit(t))):(B(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&I(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}}else B(r,0,s.ins,e),i&&I(i,r,s.text),s.next()}}var R=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?a.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?a.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},F=class{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new F(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return L.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return L.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return L.range(e.anchor,e.head)}},L=class{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:L.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new L([this.main])}addRange(e,t=!0){return L.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,L.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new L(e.ranges.map((e=>F.fromJSON(e))),e.main)}static single(e,t=e){return new L([L.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return U(e.slice(),t);n=i.to}return new L(e,t)}static cursor(e,t=0,n,r){return new F(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(r??33554431)<<5)}static range(e,t,n){let r=(n??33554431)<<5;return t<e?new F(t,e,24|r):new F(e,t,r|(t>e?4:0))}};function U(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?L.range(s,o):L.range(o,s))}}return new L(e,t)}function $(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}var H=0,G=class{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.extensions=i,this.id=H++,this.default=e([])}static define(e={}){return new G(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:j),!!e.static,e.enables)}of(e){return new z([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new z(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new z(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}};function j(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}var z=class{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=H++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,u=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&u.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||X(e,u)){let t=n(e);if(s?!V(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a=n(e),l=t.config.address[i];if(null!=l){let n=ae(t,l);if(this.dependencies.every((n=>n instanceof G?t.facet(n)===e.facet(n):!(n instanceof Y)||t.field(n,!1)==e.field(n,!1)))||(s?V(a,n,r):r(a,n)))return e.values[o]=n,0}return e.values[o]=a,1}}}};function V(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function X(e,t){let n=!1;for(let r of t)1&se(e,r)&&(n=!0);return n}function q(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=ae(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)se(e,t);return e.values[s]=a(e),1},update(e,n){if(!X(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=X(e,r),l=i.config.facets[t.id],u=i.facet(t);if(l&&!o&&j(n,l))return e.values[s]=u,0;let c=a(e);return t.compare(c,u)?(e.values[s]=u,0):(e.values[s]=c,1)}}}var W=G.define({static:!0}),Y=class{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new Y(H++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(W).find((e=>e.field==this));return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,W.of({field:this,create:e})]}get extension(){return this}},Q=4,K=3,Z=2,J=1;function ee(e){return t=>new ne(t,e)}var te={highest:ee(0),high:ee(J),default:ee(Z),low:ee(K),lowest:ee(Q)},ne=class{constructor(e,t){this.inner=e,this.prec=t}},re=class{of(e){return new ie(this,e)}reconfigure(e){return re.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},ie=class{constructor(e,t){this.compartment=e,this.inner=t}},oe=class{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof ie&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof ie){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof ne)o(e.inner,e.prec);else if(e instanceof Y)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof z)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,s);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,Z),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))n instanceof Y?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));let u=n?.config.facets;for(let e in i){let t=i[e],r=t[0].facet,o=u&&u[e]||[];if(t.every((e=>0==e.type)))if(s[r.id]=a.length<<1|1,j(o,t))a.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[r.id]=l.length<<1,l.push((e=>q(e,r,t)))}}let c=l.map((e=>e(s)));return new oe(e,o,c,s,a,i)}};function se(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function ae(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}var le=G.define(),ue=G.define({combine:e=>e.some((e=>e)),static:!0}),ce=G.define({combine:e=>e.length?e[0]:void 0,static:!0}),he=G.define(),pe=G.define(),de=G.define(),fe=G.define({combine:e=>!!e.length&&e[0]}),me=class{constructor(e,t){this.type=e,this.value=t}static define(){return new ge}},ge=class{of(e){return new me(this,e)}},ye=class{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new ye(this.type,t)}is(e){return this.type==e}static define(e={}){return new class{constructor(e){this.map=e}of(e){return new ye(this,e)}}(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}};ye.reconfigure=ye.define(),ye.appendConfig=ye.define();var ve=class{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&$(n,t.newLength),i.some((e=>e.type==ve.time))||(this.annotations=i.concat(ve.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ve.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}};function we(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function be(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=N.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:ye.mapEffects(e.effects,i).concat(ye.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function xe(e,t,n){let r=t.selection,i=ke(t.annotations);return t.userEvent&&(i=i.concat(ve.userEvent.of(t.userEvent))),{changes:t.changes instanceof N?t.changes:N.of(t.changes||[],n,e.facet(ce)),selection:r&&(r instanceof L?r:L.single(r.anchor,r.head)),effects:ke(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function Ae(e,t,n){let r=xe(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let o=!!t[i].sequential;r=be(r,xe(e,t[i],o?r.changes.newLength:e.doc.length),o)}let i=new ve(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(de),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=be(e,xe(t,o,e.changes.newLength),!0))}return r==e?e:new ve(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(he)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:we(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=N.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.invertedDesc}e=new ve(t,r,e.selection&&e.selection.map(i),ye.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(pe);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof ve?i:Array.isArray(i)&&1==i.length&&i[0]instanceof ve?i[0]:Ae(t,ke(i),!1)}return e}(i):i)}ve.time=me.define(),ve.userEvent=me.define(),ve.addToHistory=me.define(),ve.remote=me.define();var _e=[];function ke(e){return null==e?_e:Array.isArray(e)?e:[e]}var Ee,Ce=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Ce||(Ce={})),Se=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{Ee=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Oe(e){return t=>{if(!/\S/.test(t))return Ce.Space;if(function(e){if(Ee)return Ee.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Se.test(n)))return!0}return!1}(t))return Ce.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Ce.Word;return Ce.Other}}var Te=class{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)se(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return se(this,n),ae(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return Ae(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(re.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(t.value.compartment,t.value.extension)):t.is(ye.reconfigure)?(n=null,r=t.value):t.is(ye.appendConfig)&&(n=null,r=ke(r).concat(t.value));n?t=e.startState.values.slice():(n=oe.resolve(r,i,this),t=new Te(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values),new Te(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:L.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=ke(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let u=r.mapDesc(a,!0);i.push(s.range.map(u)),r=r.compose(l),o=ye.mapEffects(o,l).concat(ye.mapEffects(ke(s.effects),u))}return{changes:r,selection:L.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof N?e:N.of(e,this.doc.length,this.facet(Te.lineSeparator))}toText(e){return a.of(e.split(this.facet(Te.lineSeparator)||S))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(se(this,t),ae(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Y&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n){let i=n[t],o=e[t];r.push(i.init((e=>i.spec.fromJSON(o,e))))}return Te.create({doc:e.doc,selection:L.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=oe.resolve(e.extensions||[],new Map),n=e.doc instanceof a?e.doc:a.of((e.doc||"").split(t.staticFacet(Te.lineSeparator)||S)),r=e.selection?e.selection instanceof L?e.selection:L.single(e.selection.anchor,e.selection.head):L.single(0);return $(r,n.length),t.staticFacet(ue)||(r=r.asSingle()),new Te(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Te.tabSize)}get lineBreak(){return this.facet(Te.lineSeparator)||"\n"}get readOnly(){return this.facet(fe)}phrase(e){for(let t of this.facet(Te.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(le))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Oe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=w(t,o,!1);if(i(t.slice(e,o))!=Ce.Word)break;o=e}for(;s<r;){let e=w(t,s);if(i(t.slice(s,e))!=Ce.Word)break;s=e}return o==s?null:L.range(o+n,s+n)}};function Ne(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o!==i&&void 0!==i){if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}Te.allowMultipleSelections=ue,Te.tabSize=G.define({combine:e=>e.length?e[0]:4}),Te.lineSeparator=ce,Te.readOnly=fe,Te.phrases=G.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),Te.languageData=le,Te.changeFilter=he,Te.transactionFilter=pe,Te.transactionExtender=de,re.reconfigure=ye.define();var Be=class{eq(e){return this==e}range(e,t=e){return new Ie(e,t,this)}};Be.prototype.startSide=Be.prototype.endSide=0,Be.prototype.point=!1,Be.prototype.mapMode=O.TrackDel;var Ie=class{constructor(e,t,n){this.from=e,this.to=t,this.value=n}};function Pe(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}var Me=class{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,u,c=this.value[a],h=this.from[a]+e,p=this.to[a]+e;if(h==p){let e=t.mapPos(h,c.startSide,c.mapMode);if(null==e||(l=u=e,c.startSide!=c.endSide&&(u=t.mapPos(h,c.endSide),u<l)))continue}else if(l=t.mapPos(h,c.startSide),u=t.mapPos(p,c.endSide),l>u||l==u&&c.startSide>0&&c.endSide<=0)continue;(u-l||c.endSide-c.startSide)<0||(o<0&&(o=l),c.point&&(s=Math.max(s,u-l)),n.push(c),r.push(l-o),i.push(u-o))}return{mapped:n.length?new Me(r,i,n,s):null,pos:o}}},De=class{constructor(e,t,n=De.empty,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(Pe)),this.isEmpty)return t.length?De.of(t):this;let s=new Le(this,null,-1).goto(0),a=0,l=[],u=new Re;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];u.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&u.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(u.addInner(s.from,s.to,s.value)||l.push(new Ie(s.from,s.to,s.value))),s.next());return u.finishInner(this.nextLayer.isEmpty&&!l.length?De.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new De(n,t,i,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return Ue.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ue.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=Fe(o,s,n),l=new He(o,a,i),u=new He(s,a,i);n.iterGaps(((e,t,n)=>Ge(l,e,u,t,n,r))),n.empty&&0==n.length&&Ge(l,0,u,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=1e9);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=Fe(i,o),a=new He(i,s,0).goto(n),l=new He(o,s,0).goto(n);for(;;){if(a.to!=l.to||!je(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new He(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point?(r.point(s,e,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(e)+(o.to>e?1:0)):e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e)),o.to>n)break;s=o.to,o.next()}return a}static of(e,t=!1){let n=new Re;for(let r of e instanceof Ie?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Pe(t,r)>0)return e.slice().sort(Pe);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}};De.empty=new De([],[],null,-1),De.empty.nextLayer=De.empty;var Re=class{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Me(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Re)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(De.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=new De(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function Fe(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null!=o&&(n?n.mapPos(o):o)==e.chunkPos[t]&&!n?.touchesRange(o,o+e.chunk[t].length)&&i.add(e.chunk[t])}return i}var Le=class{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},Ue=class{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new Le(o,t,n,i));return 1==r.length?r[0]:new Ue(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)$e(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)$e(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$e(this.heap,0)}}};function $e(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}var He=class{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ue.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ze(this.active,e),ze(this.activeTo,e),ze(this.activeRank,e),this.minActive=Xe(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;Ve(this.active,t,n),Ve(this.activeTo,t,r),Ve(this.activeRank,t,i),e&&Ve(e,t,this.cursor.from),this.minActive=Xe(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ze(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let i=this.cursor.value;if(i.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){let t=0;for(;t<n.length&&n[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}};function Ge(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&je(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!je(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function je(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function ze(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Ve(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Xe(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function qe(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=w(e,i));return r}function We(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=w(e,r)}return!0===r?-1:e.length}var Ye,Qe,Ke=typeof Symbol>"u"?"__":Symbol.for(""),Ze=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},et=class{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),u=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,u)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||u)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Je[Ke]||1;return Je[Ke]=e+1,""+e.toString(36)}static mount(e,t){(e[Ze]||new nt(e)).mount(Array.isArray(t)?t:[t])}},tt=null,nt=class{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(tt)return e.adoptedStyleSheets=[tt.sheet].concat(e.adoptedStyleSheets),e[Ze]=tt;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),tt=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Ze]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}},rt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},it={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},ot=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),st=typeof navigator<"u"&&/Apple Computer/.test(navigator.vendor),at=typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),lt=typeof navigator<"u"&&/Mac/.test(navigator.platform),ut=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ct=ot&&(lt||+ot[1]<57)||at&&lt;for(Ye=0;Ye<10;Ye++)rt[48+Ye]=rt[96+Ye]=String(Ye);for(Ye=1;Ye<=24;Ye++)rt[Ye+111]="F"+Ye;for(Ye=65;Ye<=90;Ye++)rt[Ye]=String.fromCharCode(Ye+32),it[Ye]=String.fromCharCode(Ye);for(Qe in rt)it.hasOwnProperty(Qe)||(it[Qe]=rt[Qe]);function ht(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function pt(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function dt(e,t){if(!t.anchorNode)return!1;try{return pt(e,t.anchorNode)}catch{return!1}}function ft(e){return 3==e.nodeType?Et(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function mt(e,t,n,r){return!!n&&(yt(e,t,n,r,-1)||yt(e,t,n,r,1))}function gt(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function yt(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:vt(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=gt(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?vt(e):0}}}function vt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var wt={left:0,right:0,top:0,bottom:0};function bt(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function xt(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}var At,_t=null;function kt(e){if(e.setActive)return e.setActive();if(_t)return e.focus(_t);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==_t?{get preventScroll(){return _t={preventScroll:!0},!0}}:void 0),!_t){_t=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function Et(e,t,n=t){let r=At||(At=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function Ct(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function St(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}var Ot=class{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Ot(e.parentNode,gt(e),t)}static after(e,t){return new Ot(e.parentNode,gt(e)+1,t)}},Tt=[],Nt=class{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,n=this.dom,r=null;for(let i of this.children){if(i.dirty){if(!i.dom&&(t=r?r.nextSibling:n.firstChild)){let e=Nt.get(t);(!e||!e.parent&&e.constructor==i.constructor)&&i.reuseDOM(t)}i.sync(e),i.dirty=0}if(t=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&t!=i.dom&&(e.written=!0),i.dom.parentNode==n)for(;t&&t!=i.dom;)t=Bt(t);else n.insertBefore(i.dom,t);r=i.dom}for(t=r?r.nextSibling:n.firstChild,t&&e&&e.node==n&&(e.written=!0);t;)t=Bt(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==vt(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Nt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,u=n;a<this.children.length;a++){let n=this.children[a],c=l+n.length;if(l<e&&c>t)return n.domBoundsAround(e,t,l);if(c>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=u;break}u=c,l=c+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Tt){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new It(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,i,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}};function Bt(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Nt.prototype.breakAfter=0;var It=class{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}};function Pt(e,t,n,r,i,o,s,a,l){let{children:u}=e,c=u.length?u[t]:null,h=o.length?o[o.length-1]:null,p=h?h.breakAfter:s;if(!(t==r&&c&&!s&&!p&&o.length<2&&c.merge(n,i,o.length?h:null,0==n,a,l))){if(r<u.length){let e=u[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!p&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):e?.breakAfter&&(h?h.breakAfter=1:s=1),r++}for(c&&(c.breakAfter=s,n>0&&(!s&&o.length&&c.merge(n,c.length,o[0],!1,a,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,a,0),t++));t<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!u[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<u.length&&!u[t-1].breakAfter&&u[r].merge(0,0,u[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function Mt(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:u,off:c}=s.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,Pt(e,u,c,a,l,r,0,i,o)}var Dt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Rt=typeof document<"u"?document:{documentElement:{style:{}}},Ft=/Edge\/(\d+)/.exec(Dt.userAgent),Lt=/MSIE \d/.test(Dt.userAgent),Ut=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dt.userAgent),$t=!!(Lt||Ut||Ft),Ht=!$t&&/gecko\/(\d+)/i.test(Dt.userAgent),Gt=!$t&&/Chrome\/(\d+)/.exec(Dt.userAgent),jt="webkitFontSmoothing"in Rt.documentElement.style,zt=!$t&&/Apple Computer/.test(Dt.vendor),Vt=zt&&(/Mobile\/\w+/.test(Dt.userAgent)||Dt.maxTouchPoints>2),Xt={mac:Vt||/Mac/.test(Dt.platform),windows:/Win/.test(Dt.platform),linux:/Linux|X11/.test(Dt.platform),ie:$t,ie_version:Lt?Rt.documentMode||6:Ut?+Ut[1]:Ft?+Ft[1]:0,gecko:Ht,gecko_version:Ht?+(/Firefox\/(\d+)/.exec(Dt.userAgent)||[0,0])[1]:0,chrome:!!Gt,chrome_version:Gt?+Gt[1]:0,ios:Vt,android:/Android\b/.test(Dt.userAgent),webkit:jt,safari:zt,webkit_version:jt?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Rt.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},qt=class extends Nt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof qt&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new qt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ot(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Yt(this.dom,e,t)}},Wt=class extends Nt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(St(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof Wt&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(Mt(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=s,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Wt(this.mark,t,o)}domAtPos(e){return tn(this.dom,this.children,e)}coordsAt(e,t){return rn(this,e,t)}};function Yt(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?Xt.chrome||Xt.gecko||(t?(i--,s=1):(o++,s=-1)):n<0?i--:o++;let a=Et(e,i,o).getClientRects();if(!a.length)return wt;let l=a[(s?s<0:n>=0)?0:a.length-1];return Xt.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?bt(l,s<0):l||null}var Qt=class extends Nt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Qt)(e,t,n)}split(e){let t=Qt.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Qt&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Qt&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return a.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):a.empty}domAtPos(e){return 0==e?Ot.before(this.dom):Ot.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return wt;for(let t=e>0?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:bt(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},Kt=class extends Qt{domAtPos(e){let{topView:t,text:n}=this.widget;return t?Zt(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new Ot(n,Math.min(e,n.nodeValue.length)))):new Ot(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?Jt(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?Zt(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>Yt(r,e,t))):Yt(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}};function Zt(e,t,n,r,i,o){if(n instanceof Wt){for(let s of n.children){let n=pt(s.dom,r),a=n?r.nodeValue.length:s.length;if(e<a||e==a&&s.getSide()<=0)return n?Zt(e,t,s,r,i,o):i(s,e,t);e-=a}return i(n,n.length,-1)}return n.dom==r?o(e,t):i(n,e,t)}function Jt(e,t,n,r){if(n instanceof Wt)for(let i of n.children){let n=0,o=pt(i.dom,r);if(pt(i.dom,e))return n+(o?Jt(e,t,i,r):i.localPosFromDOM(e,t));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}var en=class extends Nt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof en&&e.side==this.side}split(){return new en(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Ot.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=function(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof qt){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof Wt&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return a.empty}};function tn(e,t,n){let r=0;for(let i=0;r<t.length;r++){let o=t[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(n>i&&n<s&&o.dom.parentNode==e)return o.domAtPos(n-i);if(n<=i)break;i=s}}for(;r>0;r--){let n=t[r-1].dom;if(n.parentNode==e)return Ot.after(n)}return new Ot(e,0)}function nn(e,t,n){let r,{children:i}=e;n>0&&t instanceof Wt&&i.length&&(r=i[i.length-1])instanceof Wt&&r.mark.eq(t.mark)?nn(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function rn(e,t,n){for(let r=0,i=0;i<e.children.length;i++){let o,s=e.children[i],a=r+s.length;if((n<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||i+1==e.children.length||(o=e.children[i+1]).length||o.getSide()>0)){let e=0;if(a==r){if(s.getSide()<=0)continue;e=n=-s.getSide()}let i=s.coordsAt(Math.max(0,t-r),n);return e&&i?bt(i,n<0):i}r=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let i=ft(r);return i[i.length-1]||null}function on(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function sn(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function an(e,t,n){if(t)for(let r in t)n&&r in n||e.removeAttribute(r);if(n)for(let r in n)t&&t[r]==n[r]||e.setAttribute(r,n[r])}qt.prototype.children=Qt.prototype.children=en.prototype.children=Tt;var ln=class{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}},un=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(un||(un={})),cn=class extends Be{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new hn(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new dn(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=fn(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new dn(e,t,n,r,e.widget||null,!0)}static line(e){return new pn(e)}static set(e,t=!1){return De.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}};cn.none=De.empty;var hn=class extends cn{constructor(e){let{start:t,end:n}=fn(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof hn&&this.tagName==e.tagName&&this.class==e.class&&sn(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};hn.prototype.point=!1;var pn=class extends cn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof pn&&sn(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};pn.prototype.mapMode=O.TrackBefore,pn.prototype.point=!0;var dn=class extends cn{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?O.TrackBefore:O.TrackAfter:O.TrackDel}get type(){return this.startSide<this.endSide?un.WidgetRange:this.startSide<=0?un.WidgetBefore:un.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof dn&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};function fn(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:n??t,end:r??t}}function mn(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}dn.prototype.point=!0;var gn=class extends Nt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof gn))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),Mt(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new gn;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){sn(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){nn(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=on(t,this.attrs||{})),n&&(this.attrs=on({class:n},this.attrs||{}))}domAtPos(e){return tn(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(St(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(an(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&Nt.get(n)instanceof Wt;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(t=Nt.get(n))||void 0===t?void 0:t.isEditable)||Xt.ios&&this.children.some((e=>e instanceof qt))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof qt))return null;let n=ft(t.dom);if(1!=n.length)return null;e+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return rn(this,e,t)}become(e){return!1}get type(){return un.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof gn)return i;if(o>t)break}r=o+i.breakAfter}return null}},yn=class extends Nt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof yn&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?Ot.before(this.dom):Ot.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new yn(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return Tt}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):a.empty}domBoundsAround(){return null}become(e){return e instanceof yn&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},vn=class{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof yn&&e.type==un.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new gn),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(wn(new en(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(wn(new qt(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof dn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof dn)if(n.block){let{type:e}=n;e==un.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new yn(n.widget||new bn("div"),s,e))}else{let o=Qt.create(n.widget||new bn("span"),s,n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||n.startSide<=0),u=this.getLine();2==this.pendingBuffer&&!a&&(this.pendingBuffer=0),this.flushBuffer(r),a&&(u.append(wn(new en(1),r),i),i=r.length+Math.max(0,i-r.length)),u.append(wn(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new vn(e,t,n,i);return o.openEnd=De.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}};function wn(e,t){for(let n of t)e=new Wt(n,[e],e.length);return e}var bn=class extends ln{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}},xn=[],An=G.define(),_n=G.define(),kn=G.define(),En=G.define(),Cn=G.define(),Sn=G.define(),On=G.define({combine:e=>e.some((e=>e))}),Tn=class{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new Tn(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}},Nn=ye.define({map:(e,t)=>e.map(t)});function Bn(e,t,n){let r=e.facet(En);r.length?r[0](t):window.onerror&&window.onerror(String(t),n,void 0,void 0,t)}var In=G.define({combine:e=>!e.length||e[0]}),Pn=0,Mn=G.define(),Dn=class{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){let{eventHandlers:n,provide:r,decorations:i}=t||{};return new Dn(Pn++,e,n,(e=>{let t=[Mn.of(e)];return i&&t.push(Un.of((t=>{let n=t.plugin(e);return n?i(n):cn.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return Dn.define((t=>new e(t)),t)}},Rn=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Bn(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Bn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(t){Bn(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},Fn=G.define(),Ln=G.define(),Un=G.define(),$n=G.define(),Hn=G.define(),Gn=G.define(),jn=class{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new jn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,u=a?a.fromB:1e9;for(;i<t.length&&t[i]<u;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(u,r);if(o<=a&&new jn(o+l,a+l,o,a).addToSet(n),r>u)break;i+=2}if(!a)return n;new jn(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}},zn=class{constructor(e,t,n=xn){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=N.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new jn(e,t,n,i)))),this.changedRanges=r;let i=e.hasFocus;i!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=i,this.flags|=1)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}},Vn=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Vn||(Vn={})),Xn=Vn.LTR,qn=Vn.RTL;function Wn(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}var Yn=Wn("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Qn=Wn("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Kn=Object.create(null),Zn=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);Kn[t]=n,Kn[n]=-t}function Jn(e){return e<=247?Yn[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Qn[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203||8204==e?256:1}var er=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,tr=class{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?qn:Xn}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}},nr=[];function rr(e){return[new tr(0,e,0)]}var ir="";function or(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=tr.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let u=i==(l.dir==n),c=w(e.text,s,u);if(ir=e.text.slice(Math.min(s,c),Math.max(s,c)),c!=l.side(i,n))return L.cursor(c+e.from,u?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?L.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):L.cursor(c+e.from,i?-1:1,l.level):L.cursor(i?e.to:e.from,i?-1:1,n)}var sr="",ar=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Te.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=sr}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=Nt.get(r),o=Nt.get(e);(i&&o?i.breakAfter:(i?i.breakAfter:lr(r))||lr(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=Nt.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}};function lr(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}var ur=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},cr=class extends Nt{constructor(e){super(),this.view=e,this.compositionDeco=cn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new gn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new jn(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=cn.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=pr(e);if(!n)return cn.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:u}=e,c=3==o.nodeType?o.nodeValue:new ar([],u).readRange(o.firstChild,null).text;if(l-a<c.length)if(u.doc.sliceString(a,Math.min(u.doc.length,a+c.length),sr)==c)l=a+c.length;else{if(u.doc.sliceString(Math.max(0,l-c.length),l,sr)!=c)return cn.none;a=l-c.length}else if(u.doc.sliceString(a,l,sr)!=c)return cn.none;let h=Nt.get(o);return h instanceof Kt?h=h.widget.topView:h&&(h.parent=null),cn.set(cn.replace({widget:new dr(o,s,h)}).range(a,l))}(this.view,e.changes)),(Xt.ie||Xt.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new class{constructor(){this.changes=[]}compareRange(e,t){mn(e,t,this.changes)}comparePoint(e,t){mn(e,t,this.changes)}};return De.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=jn.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let e=Xt.chrome||Xt.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof yn&&e.widget instanceof hr&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:u,openStart:c,openEnd:h}=vn.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:p,off:d}=n.findPos(o,1),{i:f,off:m}=n.findPos(i,-1);Pt(this,f,m,p,d,l,u,c,h)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||Xt.ios&&this.view.inputState.rapidCompositionStart)return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(Xt.gecko&&r.empty&&function(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}(i)){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=o=new Ot(e,0),n=!0}let s=this.view.observer.selectionRange;(n||!s.focusNode||!mt(i.node,i.offset,s.anchorNode,s.anchorOffset)||!mt(o.node,o.offset,s.focusNode,s.focusOffset))&&(this.view.observer.ignore((()=>{Xt.android&&Xt.chrome&&this.dom.contains(s.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(s.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=ht(this.root);if(r.empty){if(Xt.gecko){let e=function(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}(i.node,i.offset);if(e&&3!=e){let t=fr(i.node,i.offset,1==e?1:-1);t&&(i=new Ot(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=s.cursorBidiLevel&&(s.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(i.node,i.offset),e.extend(o.node,o.offset);else{let t=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),t.setEnd(o.node,o.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new Ot(s.anchorNode,s.anchorOffset),this.impreciseHead=o.precise?null:new Ot(s.focusNode,s.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=ht(this.root);if(!e.empty||!e.assoc||!t.modify)return;let n=gn.find(this,e.head);if(!n)return;let r=n.posAtStart;if(e.head==r||e.head==r+n.length)return;let i=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!i||!o||i.bottom>o.top)return;let s=this.domAtPos(e.head+e.assoc);t.collapse(s.node,s.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(In)?this.root.activeElement==this.dom:dt(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let e=Nt.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof gn)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=un.WidgetBefore&&i.type!=un.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==un.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Vn.LTR;for(let e=0,l=0;l<this.children.length;l++){let u=this.children[l],c=e+u.length;if(c>r)break;if(e>=n){let n=u.dom.getBoundingClientRect();if(t.push(n.height),o){let t=u.dom.lastChild,r=t?ft(t):[];if(r.length){let t=r[r.length-1],o=a?t.right-n.left:n.right-t.left;o>s&&(s=o,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Vn.RTL:Vn.LTR}measureTextSize(){for(let e of this.children)if(e instanceof gn){let t=e.measureTextSize();if(t)return t}let e,t,n=document.createElement("div");return n.className="cm-line",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=ft(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new It(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(cn.replace({widget:new hr(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return cn.set(e)}updateDeco(){let e=this.view.state.facet(Un).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,o=0,s=0,a=0;for(let e of this.view.state.facet(Hn).map((e=>e(this.view))))if(e){let{left:t,right:n,top:r,bottom:l}=e;null!=t&&(i=Math.max(i,t)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,u=l.defaultView;for(let c=e;c;)if(1==c.nodeType){let e,h=c==l.body;if(h)e=xt(u);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}let t=c.getBoundingClientRect();e={left:t.left,right:t.left+c.clientWidth,top:t.top,bottom:t.top+c.clientHeight}}let p=0,d=0;if("nearest"==i)t.top<e.top?(d=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+d&&(d=t.bottom-e.bottom+d+s)):t.bottom>e.bottom&&(d=t.bottom-e.bottom+s,n<0&&t.top-d<e.top&&(d=-(e.top+d-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;d=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(p=-(e.left-t.left+o),n>0&&t.right>e.right+p&&(p=t.right-e.right+p+o)):t.right>e.right&&(p=t.right-e.right+o,n<0&&t.left<e.left+p&&(p=-(e.left+p-t.left+o))):p=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,p||d)if(h)u.scrollBy(p,d);else{if(d){let e=c.scrollTop;c.scrollTop+=d,d=c.scrollTop-e}if(p){let e=c.scrollLeft;c.scrollLeft+=p,p=c.scrollLeft-e}t={left:t.left-p,top:t.top-d,right:t.right-p,bottom:t.bottom-d}}if(h)break;c=c.assignedSlot||c.parentNode,r=i="nearest"}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Vn.LTR)}};var hr=class extends ln{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function pr(e){let t=e.observer.selectionRange,n=t.focusNode&&fr(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof gn){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!Nt.get(t);)t=t.previousSibling;let i=t?Nt.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof gn)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}var dr=class extends ln{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Kt}};function fr(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=vt(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}function mr(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function gr(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function yr(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function vr(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function wr(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function br(e,t,n){let r,i,o,s,a,l,u,c;for(let h=e.firstChild;h;h=h.nextSibling){let e=ft(h);for(let p=0;p<e.length;p++){let d=e[p];i&&yr(i,d)&&(d=vr(wr(d,i.bottom),i.top));let f=mr(t,d),m=gr(n,d);if(0==f&&0==m)return 3==h.nodeType?xr(h,t,n):br(h,t,n);(!r||s>m||s==m&&o>f)&&(r=h,i=d,o=f,s=m),0==f?n>d.bottom&&(!u||u.bottom<d.bottom)?(a=h,u=d):n<d.top&&(!c||c.top>d.top)&&(l=h,c=d):u&&yr(u,d)?u=wr(u,d.bottom):c&&yr(c,d)&&(c=vr(c,d.top))}}if(u&&u.bottom>=n?(r=a,i=u):c&&c.top<=n&&(r=l,i=c),!r)return{node:e,offset:0};let h=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?xr(r,h,n):o||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:br(r,h,n)}function xr(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=Et(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let u=r[l];if(u.top==u.bottom)continue;s||(s=t-u.left);let c=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=t&&u.right+1>=t&&c<o){let n=t>=(u.left+u.right)/2,r=n;if((Xt.chrome||Xt.gecko)&&Et(e,a).getBoundingClientRect().left==u.right&&(r=!n),c<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=c}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function Ar(e,{x:t,y:n},r,i=-1){var o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:u}=e.viewState,c=n-l;if(c<0)return 0;if(c>u)return e.state.doc.length;for(let t=e.defaultLineHeight/2,n=!1;s=e.elementAtHeight(c),s.type!=un.Text;)for(;c=i>0?s.bottom+t:s.top-t,!(c>=0&&c<=u);){if(n)return r?null:0;n=!0,i=-i}n=l+c;let h=s.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:_r(e,a,s,t,n);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:_r(e,a,s,t,n);let p=e.dom.ownerDocument,d=e.root.elementFromPoint?e.root:p,f=d.elementFromPoint(t,n);f&&!e.contentDOM.contains(f)&&(f=null),f||(t=Math.max(a.left+1,Math.min(a.right-1,t)),f=d.elementFromPoint(t,n),f&&!e.contentDOM.contains(f)&&(f=null));let m,g=-1;if(f&&0!=(null===(o=e.docView.nearest(f))||void 0===o?void 0:o.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(t,n);e&&({offsetNode:m,offset:g}=e)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(t,n);e&&(({startContainer:m,startOffset:g}=e),Xt.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return Et(e,r-1,r).getBoundingClientRect().left>n}(m,g,t)&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=gn.find(e.docView,h);if(!r)return c>s.top+s.height/2?s.to:s.from;({node:m,offset:g}=br(r.dom,t,n))}return e.docView.posFromDOM(m,g)}function _r(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);e.lineWrapping&&n.height>1.5*e.defaultLineHeight&&(o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);let s=e.state.sliceDoc(n.from,n.to);return n.from+We(s,o,e.state.tabSize)}function kr(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=or(i,o,s,a,n),u=ir;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;u="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=L.cursor(n?i.from:i.to)}if(l){if(!l(u))return a}else{if(!r)return t;l=r(u)}a=t}}function Er(e,t,n){let r=e.state.facet($n).map((t=>t(e)));for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=t.from>n.from?L.cursor(r,1):L.cursor(i,-1),e=!0)}));if(!e)return n}}var Cr=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Sr=[16,17,18,20,91,92,224,225];function Or(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=Nt.get(r))&&n.ignoreEvent(t))return!1;return!0}var Tr=Object.create(null),Nr=Xt.ie&&Xt.ie_version<15||Xt.ios&&Xt.webkit_version<604;function Br(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length;if(null!=zr&&r.selection.ranges.every((e=>e.empty))&&zr==o.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:L.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:L.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Tr.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():Sr.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)};var Ir=0;function Pr(e,t,n,r){if(1==r)return L.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return L.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=w(i.text,o,!1):a=w(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=w(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=w(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return L.range(s+i.from,a+i.from)}(e.state,t,n);{let n=gn.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,L.range(i,o)}}Tr.touchstart=(e,t)=>{Ir=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Tr.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Tr.mousedown=(e,t)=>{if(e.observer.flush(),Ir>Date.now()-2e3&&1==Gr(t))return;let n=null;for(let r of e.state.facet(kn))if(n=r(e,t),n)break;if(!n&&0==t.button&&(n=function(e,t){let n=Fr(e,t),r=Gr(t),i=e.state.selection,o=n,s=t;return{update(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),s=null)},get(t,a,l){let u;if(s&&t.clientX==s.clientX&&t.clientY==s.clientY?u=o:(u=o=Fr(e,t),s=t),!u||!n)return i;let c=Pr(e,u.pos,u.bias,r);if(n.pos!=u.pos&&!a){let t=Pr(e,n.pos,n.bias,r),i=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=i<c.from?L.range(i,o):L.range(o,i)}return a?i.replaceRange(i.main.extend(c.from,c.to)):l?i.addRange(c):L.create([c])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>kt(e.contentDOM))),e.inputState.startMouseSelection(new class{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Te.allowMultipleSelections)&&function(e,t){let n=e.state.facet(An);return n.length?n[0](t):Xt.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(_n);return n.length?n[0](t):Xt.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=ht(e.root);if(0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Gr(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}(e,t,n,r))}};var Mr=(e,t)=>e>=t.top&&e<=t.bottom,Dr=(e,t,n)=>Mr(t,n)&&e>=n.left&&e<=n.right;function Rr(e,t,n,r){let i=gn.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&Dr(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&Dr(n,r,a)?1:s&&Mr(r,s)?-1:1}function Fr(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Rr(e,n,t.clientX,t.clientY)}}var Lr=Xt.ie&&Xt.ie_version<=11,Ur=null,$r=0,Hr=0;function Gr(e){if(!Lr)return e.detail;let t=Ur,n=Hr;return Ur=e,Hr=Date.now(),$r=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?($r+1)%3:1}function jr(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}Tr.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},Tr.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&jr(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else jr(e,t,t.dataTransfer.getData("Text"),!0)},Tr.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=Nr?null:t.clipboardData;n?(Br(e,n.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),Br(e,n.value)}),50)}(e)};var zr=null;function Vr(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}Tr.copy=Tr.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;zr=i?n:null;let o=Nr?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"==t.type&&!e.state.readOnly&&e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},Tr.focus=Tr.blur=e=>{setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)},Tr.compositionstart=Tr.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Vr(e,!0)))},Tr.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&Vr(e,!1)}),50)},Tr.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Tr.beforeinput=(e,t)=>{var n;let r;if(Xt.chrome&&Xt.android&&(r=Cr.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};var Xr=["pre-wrap","normal","pre-line","break-spaces"],qr=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},Wr=class{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Wr(this.from,this.length+e.length,this.top,this.height+e.height,t)}},Yr=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Yr||(Yr={})),Qr=.001,Kr=class{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Qr&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Kr.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:u}=r[o],c=i.lineAt(s,Yr.ByPosNoHeight,t,0,0),h=c.to>=a?c:i.lineAt(a,Yr.ByPosNoHeight,t,0,0);for(u+=h.to-a,a=h.to;o>0&&c.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<c.from&&(c=i.lineAt(s,Yr.ByPosNoHeight,t,0,0));l+=c.from-s,s=c.from;let p=ri.build(n,e,l,u);i=i.replace(s,a,p)}return i.updateHeight(n,0)}static empty(){return new Jr(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new ti(Kr.of(e.slice(0,t)),o,Kr.of(e.slice(n)))}};Kr.prototype.size=1;var Zr=class extends Kr{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Wr(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Jr=class extends Zr{constructor(e,t){super(e,t,un.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Jr||r instanceof ei&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof ei?r=new Jr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Kr.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},ei=class extends Kr{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(t,r),a=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:l,length:u}=t.line(i+a);return new Wr(l,u,n+s*a,s,un.Text)}lineAt(e,t,n,r,i){if(t==Yr.ByHeight)return this.blockAt(e,n,r,i);if(t==Yr.ByPosNoHeight){let{from:t,to:r}=n.lineAt(e);return new Wr(t,r-t,0,0,un.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:u}=n.lineAt(e);return new Wr(a,l,r+s*(u-o),s,un.Text)}forEachLine(e,t,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(e,i),u=Math.min(i+this.length,t);l<=u;){let t=n.lineAt(l);l==e&&(r+=a*(t.number-s)),o(new Wr(t.from,t.length,r,a,un.Text)),r+=a,l=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof ei?n[n.length-1]=new ei(e.length+r):n.push(null,new ei(r-1))}if(e>0){let t=n[0];t instanceof ei?n[0]=new ei(e+t.length):n.unshift(new ei(e-1),null)}return Kr.of(n)}decomposeLeft(e,t){t.push(new ei(e-1),null)}decomposeRight(e,t){t.push(null,new ei(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1,a=e.heightChanged;for(r.from>t&&n.push(new ei(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Qr&&(s=-2);let a=new Jr(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new ei(i-o).updateHeight(e,o));let l=Kr.of(n);return e.heightChanged=a||s<0||Math.abs(l.height-this.height)>=Qr||Math.abs(s-this.lines(e.doc,t).lineHeight)>=Qr,l}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}},ti=class extends Kr{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==Yr.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let u=t==Yr.ByPosNoHeight?Yr.ByPosNoHeight:Yr.ByPos;return a?l.join(this.right.lineAt(s,u,n,o,s)):this.left.lineAt(s,u,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,Yr.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&ni(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),ni(i,e)}return Kr.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Kr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function ni(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof ei&&(r=e[t+1])instanceof ei&&e.splice(t-1,3,new ei(n.length+1+r.length))}var ri=class{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Jr?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Jr(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new Zr(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Jr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new ei(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Jr)return e;let t=new Jr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==un.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=un.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Jr||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Jr(0,-1));let n=e;for(let e of this.nodes)e instanceof Jr&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new ri(n,e);return De.spans(t,n,r,i,0),i.finish(n)}};var ii=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&mn(e,t,this.changes,5)}};function oi(e,t){let n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),o=Math.max(o,t.top),s=Math.min(s,t.bottom)}t="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+t),bottom:Math.max(o,s)-(n.top+t)}}function si(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}var ai=class{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return cn.replace({widget:new li(this.size,e)}).range(this.from,this.to)}},li=class extends ln{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},ui=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new class{constructor(){this.doc=a.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Xr.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i){let o=Xr.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=r,s){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}},this.scaler=gi,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Vn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Un).filter((e=>"function"!=typeof e)),this.heightMap=Kr.empty().applyChanges(this.stateDeco,a.empty,this.heightOracle.setDoc(e.doc),[new jn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=cn.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new ci(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?gi:new yi(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:vi(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Un).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=jn.extendWithRanges(r,function(e,t,n){let r=new ii;return De.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:N.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(e.flags|=2);let s=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Vn.RTL:Vn.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight,a=0,l=0;if(this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8),s){this.mustMeasureContent=!1,this.contentDOMHeight=t.clientHeight;let e=parseInt(n.paddingTop)||0,r=parseInt(n.paddingBottom)||0;(this.paddingTop!=e||this.paddingBottom!=r)&&(a|=8,this.paddingTop=e,this.paddingBottom=r)}let u=(this.printing?si:oi)(t,this.paddingTop),c=u.top-this.pixelViewport.top,h=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView)return 0;let d=t.clientWidth;if((this.contentDOMWidth!=d||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d,this.editorHeight=e.scrollDOM.clientHeight,a|=8),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(d-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s}=e.docView.measureTextSize();o=r.refresh(i,n,s,d/s,t),o&&(e.docView.minWidth=0,a|=8)}c>0&&h>0?l=Math.max(c,h):c<0&&h<0&&(l=Math.min(c,h)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=this.heightMap.updateHeight(r,0,o,new qr(n.from,i))}r.heightChanged&&(a|=2)}let f=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return f&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||f)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new ci(r.lineAt(o-1e3*n,Yr.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),Yr.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,Yr.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new ci(r.lineAt(n-500,Yr.ByHeight,i,0,0).from,r.lineAt(n+o+500,Yr.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new ci(this.heightMap.lineAt(n,Yr.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Yr.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Yr.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(t,Yr.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new ai(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Vn.LTR)return t;for(let n of this.viewportLines){if(n.length<4e3)continue;let r,i,o=hi(n.from,n.to,this.stateDeco);if(o.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=pi(o,(this.visibleTop-n.top-e)/n.height),i=pi(o,(this.visibleBottom-n.top+e)/n.height)}else{let e=o.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=pi(o,(this.pixelViewport.left-t)/e),i=pi(o,(this.pixelViewport.right+t)/e)}let s=[];r>n.from&&s.push({from:n.from,to:r}),i<n.to&&s.push({from:i,to:n.to});let a=this.state.selection.main;a.from>=n.from&&a.from<=n.to&&fi(s,a.from-10,a.from+10),!a.empty&&a.to>=n.from&&a.to<=n.to&&fi(s,a.to-10,a.to+10);for(let{from:r,to:i}of s)i-r>1e3&&t.push(mi(e,(e=>e.from>=n.from&&e.to<=n.to&&Math.abs(e.from-r)<1e3&&Math.abs(e.to-i)<1e3))||new ai(r,i,this.gapSize(n,r,i,o)))}return t}gapSize(e,t,n,r){let i=di(r,n)-di(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){ai.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=cn.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];De.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||vi(this.heightMap.lineAt(e,Yr.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return vi(this.heightMap.lineAt(this.scaler.fromDOM(e),Yr.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return vi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},ci=class{constructor(e,t){this.from=e,this.to=t}};function hi(e,t,n){let r=[],i=e,o=0;return De.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function pi({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function di(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function fi(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.from<n&&i.to>t){let o=[];i.from<t&&o.push({from:i.from,to:t}),i.to>n&&o.push({from:n,to:i.to}),e.splice(r,1,...o),r+=o.length-1}}}function mi(e,t){for(let n of e)if(t(n))return n}var gi={toDOM:e=>e,fromDOM:e=>e,scale:1},yi=class{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,Yr.ByPos,e,0,0).top,s=t.lineAt(i,Yr.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-i)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}};function vi(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Wr(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>vi(e,t))):e.type)}var wi=G.define({combine:e=>e.join(" ")}),bi=G.define({combine:e=>e.indexOf(!0)>-1}),xi=et.newName(),Ai=et.newName(),_i=et.newName(),ki={"&light":"."+Ai,"&dark":"."+_i};function Ei(e,t,n){return new et(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}var Ci=Ei("."+xi,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ki),Si={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Oi=Xt.ie&&Xt.ie_version<=11;function Ti(e,t,n){for(;t;){let r=Nt.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function Ni(e,t,n,r){let i,o,s=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,n,0);if(!r||e.state.readOnly)return;let{from:l,to:u}=r,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;return n&&(t.push(new ur(n,r)),(i!=n||o!=r)&&t.push(new ur(i,o))),t}(e),h=new ar(c,e.state);h.readRange(r.startDOM,r.endDOM);let p=s.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||Xt.android&&h.text.length<u-l)&&(p=s.to,d="end");let f=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}return s<o&&e.length<t.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(e.state.doc.sliceString(l,u,sr),h.text,p-l,d);f&&(Xt.chrome&&13==e.inputState.lastKeyCode&&f.toB==f.from+2&&""==h.text.slice(f.from,f.toB)&&f.toB--,i={from:l+f.from,to:l+f.toA,insert:a.of(h.text.slice(f.from,f.toB).split(sr))}),o=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?L.single(n+t,r+t):null}(c,l)}else if(e.hasFocus||!e.state.facet(In)){let t=e.observer.selectionRange,{impreciseHead:n,impreciseAnchor:r}=e.docView,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!pt(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!pt(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);(i!=s.head||a!=s.anchor)&&(o=L.single(a,i))}if(i||o)if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4&&(i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,s.to))}),i){let t=e.state;if(Xt.ios&&e.inputState.flushIOSKey(e)||Xt.android&&(i.from==s.from&&i.to==s.to&&1==i.insert.length&&2==i.insert.lines&&Ct(e.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&0==i.insert.length&&Ct(e.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&0==i.insert.length&&Ct(e.contentDOM,"Delete",46)))return;let n,r=i.insert.toString();if(e.state.facet(Sn).some((t=>t(e,i.from,i.to,r))))return;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let r=s.from<i.from?t.sliceDoc(s.from,i.from):"",o=s.to>i.to?t.sliceDoc(i.to,s.to):"";n=t.replaceSelection(e.state.toText(r+i.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let r=t.changes(i),a=o&&!t.selection.main.eq(o.main)&&o.main.to<=r.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let o=e.state.sliceDoc(i.from,i.to),l=pr(e)||e.state.doc.lineAt(s.head),u=s.to-i.to,c=s.to-s.from;n=t.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:r,range:a||n.map(r)};let h=n.to-u,p=h-o.length;if(n.to-n.from!=c||e.state.sliceDoc(p,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let d=t.changes({from:p,to:h,insert:i.insert}),f=n.to-s.to;return{changes:d,range:a?L.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):n.map(d)}}))}else n={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:a})}else if(o&&!o.main.eq(s)){let t=!1,n="select";e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:n})}}var Bi=class{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new ui(e.state||Te.create()),this.plugins=this.state.facet(Mn).map((e=>new Rn(e)));for(let e of this.plugins)e.update(this);this.observer=new class{constructor(e,t,n){this.view=e,this.onChange=t,this.onScrollChanged=n,this.active=!1,this.selectionRange=new class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}},this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(Xt.ie&&Xt.ie_version<=11||Xt.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Oi&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,n=this.selectionRange;if(t.state.facet(In)?t.root.activeElement!=this.dom:!dt(t.dom,n))return;let r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((Xt.ie&&Xt.ie_version<=11||Xt.android&&Xt.chrome)&&!t.state.selection.main.empty&&n.focusNode&&mt(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=ht(e),n=Xt.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return mt(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||t;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Si),Oi&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Oi&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null;let t=this.view.state;Ct(this.view.contentDOM,e.key,e.keyCode)?this.processRecords():this.flush(),this.view.state==t&&this.view.update([])})),(!this.delayedAndroidKey||"Enter"==e)&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);!e||(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&dt(this.dom,this.selectionRange);if(t<0&&!i)return;this.selectionChanged=!1;let o=this.view.state;this.onChange(t,n,r),this.view.state==o&&this.view.update([])}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=Ti(t,e.previousSibling||e.target.previousSibling,-1),r=Ti(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}(this,((e,t,n)=>{Ni(this,e,t,n)}),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Tr){let n=Tr[t];e.contentDOM.addEventListener(t,(r=>{!Or(e,r)||this.ignoreDuringComposition(r)||"keydown"==t&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r))})),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,Xt.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;for(let i of t)if(r=null===(n=i.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{!Or(e,n)||this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){Bn(t.state,e)}}return!1}runScrollHandlers(e,t){for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){Bn(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Xt.android&&Xt.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!Xt.ios||!(n=Cr.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic||(this.pendingIOSKey=n,setTimeout((()=>this.flushIOSKey(e)),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Ct(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Xt.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!Xt.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new cr(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof ve?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=this.state;for(let t of e){if(t.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=t.state}if(this.destroyed)return void(this.viewState.state=r);if(r.facet(Te.phrases)!=this.state.facet(Te.phrases))return this.setState(r);t=new zn(this,r,e);let i=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(i&&(i=i.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;i=new Tn(e.empty?e:L.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Nn)&&(i=e.value)}this.viewState.update(t,i),this.bidiCache=Mi.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(Gn)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(wi)!=t.state.facet(wi)&&(this.viewState.mustMeasureContent=!0),(n||i||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Cn))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new ui(e),this.plugins=e.facet(Mn).map((e=>new Rn(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new cr(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Mn),n=e.state.facet(Mn);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new Rn(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5)break;let i=[];4&r||([this.measureRequests,i]=[i,this.measureRequests]);let o=i.map((e=>{try{return e.read(this)}catch(e){return Bn(this.state,e),Pi}})),s=new zn(this,this.state),a=!1,l=!1;s.flags|=r,t?t.flags|=r:t=s,this.updateState=2,s.empty||(this.updatePlugins(s),this.inputState.update(s),this.updateAttrs(),a=this.docView.update(s));for(let e=0;e<i.length;e++)if(o[e]!=Pi)try{let t=i[e];t.write&&t.write(o[e],this)}catch(e){Bn(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Cn))e(t)}get themeClasses(){return xi+" "+(this.state.facet(bi)?_i:Ai)+" "+this.state.facet(wi)}updateAttrs(){let e=Di(this,Fn,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(In)?"true":"false",class:"cm-content",style:`${Xt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Di(this,Ln,t),this.observer.ignore((()=>{an(this.contentDOM,this.contentAttrs,t),an(this.dom,this.editorAttrs,e)})),this.editorAttrs=e,this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(Bi.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(Gn),et.mount(this.root,this.styleModules.concat(Ci).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Er(this,e,kr(this,e,t,n))}moveByGroup(e,t){return Er(this,e,kr(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==Ce.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==Vn.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return L.cursor(s,n?-1:1)}let s=gn.find(e.docView,t.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return L.cursor(a,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return Er(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return L.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),u=e.coordsAtPos(i),c=e.documentTop;if(u)null==a&&(a=u.left-l.left),s=o<0?u.top:u.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+c}let h=l.left+a,p=r??e.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(p+n)*o,u=Ar(e,{x:h,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?u<i:u>i))return L.cursor(u,t.assoc,void 0,a)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Ar(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return bt(n,i[tr.find(i,e-r.from,-1,t)].dir==Vn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(On)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ii)return rr(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=function(e,t){let n=e.length,r=t==Xn?1:2,i=t==Xn?2:1;if(!e||1==r&&!er.test(e))return rr(n);for(let t=0,i=r,o=r;t<n;t++){let n=Jn(e.charCodeAt(t));512==n?n=i:8==n&&4==o&&(n=16),nr[t]=4==n?2:n,7&n&&(o=n),i=n}for(let e=0,t=r,i=r;e<n;e++){let r=nr[e];if(128==r)e<n-1&&t==nr[e+1]&&24&t?r=nr[e]=t:nr[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==nr[r];)r++;let o=e&&8==t||r<n&&8==nr[r]?1==i?1:8:256;for(let t=e;t<r;t++)nr[t]=o;e=r-1}else 8==r&&1==i&&(nr[e]=1);t=r,7&r&&(i=r)}for(let t,o,s,a=0,l=0,u=0;a<n;a++)if(o=Kn[t=e.charCodeAt(a)])if(o<0){for(let e=l-3;e>=0;e-=3)if(Zn[e+1]==-o){let t=Zn[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(nr[a]=nr[Zn[e]]=n),l=e;break}}else{if(189==Zn.length)break;Zn[l++]=a,Zn[l++]=t,Zn[l++]=u}else if(2==(s=nr[a])||1==s){let e=s==r;u=e?0:1;for(let t=l-3;t>=0;t-=3){let n=Zn[t+2];if(2&n)break;if(e)Zn[t+2]|=2;else{if(4&n)break;Zn[t+2]|=4}}}for(let e=0;e<n;e++)if(256==nr[e]){let t=e+1;for(;t<n&&256==nr[t];)t++;let i=1==(e?nr[e-1]:r),o=i==(1==(t<n?nr[t]:r))?i?1:2:r;for(let n=e;n<t;n++)nr[n]=o;e=t-1}let o=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=nr[e++];for(;e<n&&r==(1!=nr[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=nr[--n];for(;n>t&&r==(2!=nr[n-1]);)n--;o.push(new tr(n,e,r?2:1))}else o.push(new tr(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==nr[e++];for(;e<n&&r==(2==nr[e]);)e++;o.push(new tr(t,e,r?1:2))}return o}(e.text,t);return this.bidiCache.push(new Mi(e.from,e.to,t,n)),n}get hasFocus(){var e;return(document.hasFocus()||Xt.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{kt(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Nn.of(new Tn("number"==typeof e?L.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Dn.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=et.newName(),r=[wi.of(n),Gn.of(Ei(`.${n}`,e))];return t&&t.dark&&r.push(bi.of(!0)),r}static baseTheme(e){return te.lowest(Gn.of(Ei("."+xi,e,ki)))}};Bi.styleModule=Gn,Bi.inputHandler=Sn,Bi.perLineTextDirection=On,Bi.exceptionSink=En,Bi.updateListener=Cn,Bi.editable=In,Bi.mouseSelectionStyle=kn,Bi.dragMovesSelection=_n,Bi.clickAddsSelectionRange=An,Bi.decorations=Un,Bi.atomicRanges=$n,Bi.scrollMargins=Hn,Bi.darkTheme=bi,Bi.contentAttributes=Ln,Bi.editorAttributes=Fn,Bi.lineWrapping=Bi.contentAttributes.of({class:"cm-lineWrapping"}),Bi.announce=ye.define();var Ii=4096,Pi={},Mi=class{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Vn.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir==r&&!t.touchesRange(o.from,o.to)&&n.push(new Mi(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}};function Di(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&on(o,n)}return n}var Ri=Xt.mac?"mac":Xt.windows?"win":Xt.linux?"linux":"key";function Fi(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var Li=Bi.domEventHandlers({keydown:(e,t)=>ji(Hi(t.state),e,t,"editor")}),Ui=G.define({enables:Li}),$i=new WeakMap;function Hi(e){let t=e.facet(Ui),n=$i.get(t);return n||$i.set(t,n=function(e,t=Ri){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{let a=n[e]||(n[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){let n,r,i,o,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(let e=0;e<s.length-1;++e){let a=s[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))i=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?o=!0:r=!0}}return n&&(a="Alt-"+a),r&&(a="Ctrl-"+a),o&&(a="Meta-"+a),i&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let n=l.slice(0,t).join(" ");i(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[t=>{let r=Gi={view:t,prefix:n,scope:e};return setTimeout((()=>{Gi==r&&(Gi=null)}),4e3),!0}]})}let u=l.join(" ");i(u,!1);let c=a[u]||(a[u]={preventDefault:!1,commands:[]});c.commands.push(o),s&&(c.preventDefault=!0)};for(let n of e){let e=n[t]||n.key;if(e)for(let t of n.scope?n.scope.split(" "):["editor"])o(t,e,n.run,n.preventDefault),n.shift&&o(t,"Shift-"+e,n.shift,n.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}var Gi=null;function ji(e,t,n,r){let i=function(e){var t=!(ct&&(e.ctrlKey||e.altKey||e.metaKey)||(st||ut)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?it:rt)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=1==i.length&&" "!=i,s="",a=!1;Gi&&Gi.view==n&&Gi.scope==r&&(s=Gi.prefix+" ",(a=Sr.indexOf(t.keyCode)<0)&&(Gi=null));let l,u=e=>{if(e){for(let t of e.commands)if(t(n))return!0;e.preventDefault&&(a=!0)}return!1},c=e[r];if(c){if(u(c[s+Fi(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(l=rt[t.keyCode])&&l!=i){if(u(c[s+Fi(l,t,!0)]))return!0}else if(o&&t.shiftKey&&u(c[s+Fi(i,t,!0)]))return!0}return a}var zi=!Xt.ios,Vi=G.define({combine:e=>Ne(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});var Xi=class{constructor(e,t,n,r,i){this.left=e,this.top=t,this.width=n,this.height=r,this.className=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}},qi=Dn.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Vi).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(Vi)!=e.state.facet(Vi);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(Vi),n=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==Vn.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=Qi(e),l=window.getComputedStyle(o.firstChild),u=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),c=s.right-parseInt(l.paddingRight),h=Zi(e,n),p=Zi(e,r),d=h.type==un.Text?h:null,f=p.type==un.Text?p:null;if(e.lineWrapping&&(d&&(d=Ki(e,n,d)),f&&(f=Ki(e,r,f))),d&&f&&d.from==f.from)return g(y(t.from,t.to,d));{let n=d?y(t.from,null,d):v(h,!1),r=f?y(null,t.to,f):v(p,!0),i=[];return(d||h).to<(f||p).from-1?i.push(m(u,n.bottom,c,r.top)):n.bottom<r.top&&e.elementAtHeight((n.bottom+r.top)/2).type==un.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),g(n).concat(i).concat(g(r))}function m(e,t,n,r){return new Xi(e-a.left,t-a.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function g({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],e,n[i+1],t));return r}function y(t,n,r){let o=1e9,s=-1e9,a=[];function l(t,n,l,h,p){let d=e.coordsAtPos(t,t==r.to?-2:2),f=e.coordsAtPos(l,l==r.from?2:-2);o=Math.min(d.top,f.top,o),s=Math.max(d.bottom,f.bottom,s),p==Vn.LTR?a.push(i&&n?u:d.left,i&&h?c:f.right):a.push(!i&&h?u:f.left,!i&&n?c:d.right)}let h=t??r.from,p=n??r.to;for(let r of e.visibleRanges)if(r.to>h&&r.from<p)for(let i=Math.max(r.from,h),o=Math.min(r.to,p);;){let r=e.state.doc.lineAt(i);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,o),null==n&&a>=p,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(h,null==t,p,null==n,e.textDirection),{top:o,bottom:s,horizontal:a}}function v(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let n of e.selection.ranges){let i=n==e.selection.main;if(n.empty?!i||zi:t.drawRangeCursor){let e=Ji(this.view,n,i);e&&r.push(e)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(let e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,n)=>t.adjust(e[n])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Wi={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};zi&&(Wi[".cm-line"].caretColor="transparent !important");var Yi=te.highest(Bi.theme(Wi));function Qi(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Vn.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Ki(e,t,n){let r=L.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:un.Text}}function Zi(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==un.Text))return e;return n}function Ji(e,t,n){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let i=Qi(e);return new Xi(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}var eo=ye.define({map:(e,t)=>null==e?null:t.mapPos(e)}),to=Y.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(eo)?t.value:e),e))}),no=Dn.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(to);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(to)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(to),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(to)!=e&&this.view.dispatch({effects:eo.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ro(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,a+o.index+o[0].length,o)}var io=null!=/x/.unicode?"gu":"g",oo=new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]",io),so={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},ao=null;var lo=G.define({combine(e){let t=Ne(e,{render:null,specialChars:oo,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==ao&&typeof document<"u"&&document.body){let t=document.body.style;ao=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return ao||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,io)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,io)),t}});var uo=null;var co=class extends ln{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"":10==e?"":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(so[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}},ho=class extends ln{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};var po=cn.line({class:"cm-activeLine"}),fo=Dn.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){if(!r.empty)return cn.none;let i=e.lineBlockAt(r.head);i.from>t&&(n.push(po.range(i.from)),t=i.from)}return cn.set(n)}},{decorations:e=>e.decorations}),mo=2e3;function go(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>mo?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):qe(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function yo(e,t){let n=go(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=go(e,t);if(!s)return r;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>mo||n.off>mo||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(L.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=We(n.text,s,e.tabSize,!0);if(r>-1){let t=We(n.text,a,e.tabSize);o.push(L.range(n.from+r,n.from+t))}}}return o}(e.state,n,s);return a.length?o?L.create(a.concat(r.ranges)):L.create(a):r}}:null}var vo={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},wo={style:"cursor: crosshair"};var bo="-10000px",xo=class{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){let t=e.state.facet(this.facet),n=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[];for(let t=0;t<n.length;t++){let i=n[t],o=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(o=e)}if(o<0)r[t]=this.createTooltipView(i);else{let n=r[t]=this.tooltipViews[o];n.update&&n.update(e)}}}for(let e of this.tooltipViews)r.indexOf(e)<0&&e.dom.remove();return this.input=t,this.tooltips=n,this.tooltipViews=r,!0}};function Ao(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}var _o=G.define({combine:e=>{var t,n,r;return{position:Xt.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||Ao}}}),ko=Dn.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(_o);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new xo(e,So,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(_o);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=bo,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(_o).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:n}=e,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=e.pos[i],u=e.size[i];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1){a.style.top=bo;continue}let c=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=c?7:0,p=u.right-u.left,d=u.bottom-u.top,f=s.offset||Co,m=this.view.textDirection==Vn.LTR,g=u.width>n.right-n.left?m?n.left:n.right-u.width:m?Math.min(l.left-(c?14:0)+f.x,n.right-p):Math.max(n.left,l.left-p+(c?14:0)-f.x),y=!!o.above;!o.strictSide&&(y?l.top-(u.bottom-u.top)-f.y<n.top:l.bottom+(u.bottom-u.top)+f.y>n.bottom)&&y==n.bottom-l.bottom>l.top-n.top&&(y=!y);let v=y?l.top-d-h-f.y:l.bottom+h+f.y,w=g+p;if(!0!==s.overlap)for(let e of r)e.left<w&&e.right>g&&e.top<v+d&&e.bottom>v&&(v=y?e.top-d-2-h:e.bottom+h+2);"absolute"==this.position?(a.style.top=v-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=v+"px",a.style.left=g+"px"),c&&(c.style.left=l.left+(m?f.x:-f.x)-(g+14-7)+"px"),!0!==s.overlap&&r.push({left:g,top:v,right:w,bottom:v+d}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=bo}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Eo=Bi.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Co={x:0,y:0},So=G.define({enables:[ko,Eo]}),Oo=G.define(),To=class{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new xo(e,Oo,(e=>this.createHostedView(e)))}static create(e){return new To(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}},No=So.compute([Oo],(e=>{let t=e.facet(Oo).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:To.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));function Bo(e,t={}){let n=ye.define(),r=Y.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,O.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),e=n}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(Io)&&(e=null);return e},provide:e=>Oo.from(e)});return[r,Dn.define((i=>new class{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){var e;clearTimeout(this.restartTimeout);let{lastMove:t}=this,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null==n)return;let r=this.view.coordsAtPos(n);if(null==r||t.y<r.top||t.y>r.bottom||t.x<r.left-this.view.defaultCharacterWidth||t.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((e=>e.from<=n&&e.to>=n)),o=i&&i.dir==Vn.RTL?-1:1,s=this.source(this.view,n,t.x<r.left?-o:o);if(null!==(e=s)&&void 0!==e&&e.then){let e=this.pending={pos:n};s.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>Bn(this.view.state,e,"hover tooltip")))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=n?.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)!=r:!function(e,t,n,r,i,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let u=s.getClientRects();s.detach();for(let e=0;e<u.length;e++){let t=u[e];if(Math.max(t.top-i,i-t.bottom,t.left-r,r-t.right)<=o)return!0}return!1}(this.view,r,i,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}(i,e,r,n,t.hoverTime||300))),No]}var Io=ye.define(),Po=G.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function Mo(e,t){let n=e.plugin(Do),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}var Do=Dn.fromClass(class{constructor(e){this.input=e.state.facet(Lo),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Po);this.top=new Ro(e,!0,t.topContainer),this.bottom=new Ro(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(Po);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Ro(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ro(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(Lo);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>Bi.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))}),Ro=class{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Fo(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Fo(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function Fo(e){let t=e.nextSibling;return e.remove(),t}var Lo=G.define({enables:Do}),Uo=class extends Be{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Uo.prototype.elementClass="",Uo.prototype.toDOM=void 0,Uo.prototype.mapMode=O.TrackBefore,Uo.prototype.startSide=Uo.prototype.endSide=-1,Uo.prototype.point=!0;var $o=G.define(),Ho={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>De.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Go=G.define();function jo(e){return[Vo(),Go.of(Object.assign(Object.assign({},Ho),e))]}var zo=G.define({combine:e=>e.some((e=>e))});function Vo(e){let t=[Xo];return e&&!1===e.fixed&&t.push(zo.of(!0)),t}var Xo=Dn.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Go).map((t=>new Qo(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(zo),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(zo)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=De.iter(this.view.state.facet($o),this.view.viewport.from),r=[],i=this.gutters.map((e=>new Yo(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks){let t;if(Array.isArray(e.type)){for(let n of e.type)if(n.type==un.Text){t=n;break}}else t=e.type==un.Text?e:void 0;if(t){r.length&&(r=[]),Wo(n,r,e.from);for(let e of i)e.line(this.view,t,r)}}for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Go),n=e.state.facet(Go),r=e.docChanged||e.heightChanged||e.viewportChanged||!De.eq(e.startState.facet($o),e.state.facet($o),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new Qo(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>Bi.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Vn.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function qo(e){return Array.isArray(e)?e:[e]}function Wo(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var Yo=class{constructor(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=De.iter(e.markers,t.from)}line(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),Wo(this.cursor,this.localMarkers,t.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=t.top-this.height;if(this.i==o.elements.length){let n=new Ko(e,t.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},Qo=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[n](e,i,r)&&r.preventDefault()}));this.markers=qo(t.markers(e)),t.initialSpacer&&(this.spacer=new Ko(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=qo(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!De.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}},Ko=class{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}};var Zo=G.define(),Jo=G.define({combine:e=>Ne(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],i=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||i(e,t,n):i}return n}})}),es=class extends Uo{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function ts(e,t){return e.state.facet(Jo).formatNumber(t,e.state)}var ns=Go.compute([Jo],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Zo),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new es(ts(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(Jo)!=e.state.facet(Jo),initialSpacer:e=>new es(ts(e,rs(e.state.doc.lines))),updateSpacer(e,t){let n=ts(t.view,rs(t.view.state.doc.lines));return n==e.number?e:new es(n)},domEventHandlers:e.facet(Jo).domEventHandlers})));function rs(e){let t=9;for(;t<e;)t=10*t+9;return t}var is=new class extends Uo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},os=$o.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges)if(r.empty){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(is.range(i)))}return De.of(t)}));var ss=0,as=class{constructor(e,t){this.from=e,this.to=t}},ls=class{constructor(e={}){this.id=ss++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=cs.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}};ls.closedBy=new ls({deserialize:e=>e.split(" ")}),ls.openedBy=new ls({deserialize:e=>e.split(" ")}),ls.group=new ls({deserialize:e=>e.split(" ")}),ls.contextHash=new ls({perNode:!0}),ls.lookAhead=new ls({perNode:!0}),ls.mounted=new ls({perNode:!0});var us=Object.create(null),cs=class{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):us,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new cs(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(ls.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(ls.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}};cs.none=new cs("",Object.create(null),0,8);var hs,ps=class{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new cs(n.name,r,n.id,n.flags):n)}return new ps(t)}},ds=new WeakMap,fs=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(hs||(hs={}));var ms=class{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(ls.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Cs(this.topNode,e)}cursorAt(e,t=0,n=0){let r=ds.get(this)||this.topNode,i=new Cs(r);return i.moveTo(e,t),ds.set(this,i._tree),i}get topNode(){return new xs(this,0,0,null)}resolve(e,t=0){let n=bs(ds.get(this)||this.topNode,e,t,!1);return ds.set(this,n),n}resolveInner(e,t=0){let n=bs(fs.get(this)||this.topNode,e,t,!0);return fs.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let o=this.cursor((e.mode||0)|hs.IncludeAnonymous);;){let e=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==t(o))){if(o.firstChild())continue;e=!0}for(;e&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ns(cs.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new ms(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new ms(cs.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=1024,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new gs(n,n.length):n,l=r.types,u=0,c=0;function h(e,t,n,y,v){let{id:w,start:b,end:x,size:A}=a,_=c;for(;A<0;){if(a.next(),-1==A){let t=o[w];return n.push(t),void y.push(b-e)}if(-3==A)return void(u=w);if(-4==A)return void(c=w);throw new RangeError(`Unrecognized record size: ${A}`)}let k,E,C=l[w],S=b-e;if(x-b<=i&&(E=m(a.pos-t,v))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,i=t.length;for(;a.pos>n;)i=g(E.start,t,i);k=new ys(t,x-E.start,r),S=E.start-e}else{let e=a.pos-A;a.next();let t=[],n=[],r=w>=s?w:-1,o=0,l=x;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(d(t,n,b,o,a.end,l,r,_),o=t.length,l=a.end),a.next()):h(b,e,t,n,r);if(r>=0&&o>0&&o<t.length&&d(t,n,b,o,b,l,r,_),t.reverse(),n.reverse(),r>-1&&o>0){let e=p(C);k=Ns(C,t,n,0,t.length,0,x-b,e,e)}else k=f(C,t,n,x-b,_-x)}n.push(k),y.push(S)}function p(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof ms){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(ls.lookAhead))&&(s=n[a]+i.length+o)}return f(e,t,n,r,s)}}function d(e,t,n,i,o,s,a,l){let u=[],c=[];for(;e.length>i;)u.push(e.pop()),c.push(t.pop()+n-o);e.push(f(r.types[a],u,c,s-o,l-s)),t.push(o-n)}function f(e,t,n,r,i=0,o){if(u){let e=[ls.contextHash,u];o=o?[e].concat(o):[e]}if(i>25){let e=[ls.lookAhead,i];o=o?[e].concat(o):[e]}return new ms(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,u=n.end-i,c={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){c.size=r,c.start=o,c.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<u)break;let h=n.id>=s?4:0,p=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=p,r+=e,l+=h}return(t<0||r==e)&&(c.size=r,c.start=o,c.skip=l),c.size>4?c:void 0}function g(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?u=r:-4==l&&(c=r);return n}let y=[],v=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,y,v,-1);let w=null!==(t=e.length)&&void 0!==t?t:y.length?v[0]+y[0].length:0;return new ms(l[e.topID],y.reverse(),v.reverse(),w)}(e)}};ms.empty=new ms(cs.none,[],[],0);var gs=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new gs(this.buffer,this.index)}},ys=class{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return cs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(vs(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n,r){let i=this.buffer,o=new Uint16Array(t-e);for(let r=e,s=0;r<t;)o[s++]=i[r++],o[s++]=i[r++]-n,o[s++]=i[r++]-n,o[s++]=i[r++]-e;return new ys(o,r-n,this.set)}};function vs(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function ws(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function bs(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof xs&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:hs.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;r=s,s=r.parent)r instanceof xs&&r.index<0&&(null===(i=s.enter(t,n,o))||void 0===i?void 0:i.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}var xs=class{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],u=a[e]+o.from;if(vs(r,n,u,u+l.length))if(l instanceof ys){if(i&hs.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-u,r);if(s>-1)return new Es(new ks(o,l,e,u),null,s)}else if(i&hs.IncludeAnonymous||!l.type.isAnonymous||Ss(l)){let s;if(!(i&hs.IgnoreMounts)&&l.props&&(s=l.prop(ls.mounted))&&!s.overlay)return new xs(s.tree,u,e,o);let a=new xs(l,u,e,o);return i&hs.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&hs.IncludeAnonymous||!o.type.isAnonymous||(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&hs.IgnoreOverlays)&&(r=this._tree.prop(ls.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new xs(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Cs(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return bs(this,e,t,!1)}resolveInner(e,t=0){return bs(this,e,t,!0)}enterUnfinishedNodesBefore(e){return ws(this,e)}getChild(e,t=null,n=null){let r=As(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return As(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return _s(this,e)}};function As(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function _s(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}var ks=class{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}},Es=class{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Es(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&hs.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Es(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Es(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Es(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Cs(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1],s=n.buffer[this.index+2];e.push(n.slice(r,i,o,s)),t.push(0)}return new ms(this.type,e,t,this.to-this.from)}resolve(e,t=0){return bs(this,e,t,!1)}resolveInner(e,t=0){return bs(this,e,t,!0)}enterUnfinishedNodesBefore(e){return ws(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=As(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return As(this,e,t,n)}get node(){return this}matchContext(e){return _s(this,e)}},Cs=class{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof xs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof xs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&hs.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&hs.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&hs.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&hs.IncludeAnonymous||e instanceof ys||!e.type.isAnonymous||Ss(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new Es(this.buffer,t,this.stack[e]);return this.bufferNode=new Es(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return _s(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return _s(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}};function Ss(e){return e.children.some((e=>e instanceof ys||!e.type.isAnonymous||Ss(e)))}var Os=new WeakMap;function Ts(e,t){if(!e.isAnonymous||t instanceof ys||t.type!=e)return 1;let n=Os.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof ms)){n=1;break}n+=Ts(e,r)}Os.set(t,n)}return n}function Ns(e,t,n,r,i,o,s,a,l){let u=0;for(let n=r;n<i;n++)u+=Ts(e,t[n]);let c=Math.ceil(1.5*u/8),h=[],p=[];return function t(n,r,i,s,a){for(let u=i;u<s;){let i=u,d=r[u],f=Ts(e,n[u]);for(u++;u<s;u++){let t=Ts(e,n[u]);if(f+t>=c)break;f+=t}if(u==i+1){if(f>c){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[u-1]+n[u-1].length-d;h.push(Ns(e,n,r,i,u,d,t,null,l))}p.push(d+a-o)}}(t,n,r,i,0),(a||l)(h,p,s)}var Bs=class{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new Bs(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let u=s<t.length?t[s]:null,c=u?u.fromA:1e9;if(c-a>=n)for(;o&&o.from<c;){let t=o;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new Bs(e,n,t.tree,t.offset+l,s>0,!!u)}if(t&&r.push(t),o.to>c)break;o=i<e.length?e[i++]:null}if(!u)break;a=u.toA,l=u.toA-u.toB}return r}},Is=class{startParse(e,t,n){return"string"==typeof e&&(e=new Ps(e)),n=n?n.length?n.map((e=>new as(e.from,e.to))):[new as(0,0)]:[new as(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}},Ps=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};new ls({perNode:!0});var Ms=0,Ds=class{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=Ms++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new Ds([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Fs;return t=>t.modified.indexOf(e)>-1?t:Fs.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}},Rs=0,Fs=class{constructor(){this.instances=[],this.id=Rs++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let r=[],i=new Ds(r,e,t);for(let e of t)e.instances.push(i);let o=Ls(t);for(let t of e.set)for(let e of o)r.push(Fs.get(t,e));return i}};function Ls(e){let t=[e];for(let n=0;n<e.length;n++)for(let r of Ls(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}function Us(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new Hs(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return $s.add(t)}var $s=new ls,Hs=class{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};function Gs(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function js(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}function zs(e,t,n,r=0,i=e.length){let o=new Vs(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}var Vs=class{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,u=o.prop($s),c=!1;for(;u;){if(!u.context||e.matchContext(u.context)){let e=js(i,u.tags);e&&(l&&(l+=" "),l+=e,1==u.mode?r+=(r?" ":"")+e:0==u.mode&&(c=!0));break}u=u.next}if(this.startSpan(e.from,l),c)return;let h=e.tree&&e.tree.prop(ls.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),u=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),c=e.firstChild();for(let p=0,d=s;;p++){let f=p<h.overlay.length?h.overlay[p]:null,m=f?f.from+s:a,g=Math.max(t,d),y=Math.min(n,m);if(g<y&&c)for(;e.from<y&&(this.highlightRange(e,g,y,r,i),this.startSpan(Math.min(n,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>n)break;d=f.to+s,d>t&&(this.highlightRange(o.cursor(),Math.max(t,f.from+s),Math.min(n,d),r,u),this.startSpan(d,l))}c&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}},Xs=Ds.define,qs=Xs(),Ws=Xs(),Ys=Xs(Ws),Qs=Xs(Ws),Ks=Xs(),Zs=Xs(Ks),Js=Xs(Ks),ea=Xs(),ta=Xs(ea),na=Xs(),ra=Xs(),ia=Xs(),oa=Xs(ia),sa=Xs(),aa={comment:qs,lineComment:Xs(qs),blockComment:Xs(qs),docComment:Xs(qs),name:Ws,variableName:Xs(Ws),typeName:Ys,tagName:Xs(Ys),propertyName:Qs,attributeName:Xs(Qs),className:Xs(Ws),labelName:Xs(Ws),namespace:Xs(Ws),macroName:Xs(Ws),literal:Ks,string:Zs,docString:Xs(Zs),character:Xs(Zs),attributeValue:Xs(Zs),number:Js,integer:Xs(Js),float:Xs(Js),bool:Xs(Ks),regexp:Xs(Ks),escape:Xs(Ks),color:Xs(Ks),url:Xs(Ks),keyword:na,self:Xs(na),null:Xs(na),atom:Xs(na),unit:Xs(na),modifier:Xs(na),operatorKeyword:Xs(na),controlKeyword:Xs(na),definitionKeyword:Xs(na),moduleKeyword:Xs(na),operator:ra,derefOperator:Xs(ra),arithmeticOperator:Xs(ra),logicOperator:Xs(ra),bitwiseOperator:Xs(ra),compareOperator:Xs(ra),updateOperator:Xs(ra),definitionOperator:Xs(ra),typeOperator:Xs(ra),controlOperator:Xs(ra),punctuation:ia,separator:Xs(ia),bracket:oa,angleBracket:Xs(oa),squareBracket:Xs(oa),paren:Xs(oa),brace:Xs(oa),content:ea,heading:ta,heading1:Xs(ta),heading2:Xs(ta),heading3:Xs(ta),heading4:Xs(ta),heading5:Xs(ta),heading6:Xs(ta),contentSeparator:Xs(ea),list:Xs(ea),quote:Xs(ea),emphasis:Xs(ea),strong:Xs(ea),link:Xs(ea),monospace:Xs(ea),strikethrough:Xs(ea),inserted:Xs(),deleted:Xs(),changed:Xs(),invalid:Xs(),meta:sa,documentMeta:Xs(sa),annotation:Xs(sa),processingInstruction:Xs(sa),definition:Ds.defineModifier(),constant:Ds.defineModifier(),function:Ds.defineModifier(),standard:Ds.defineModifier(),local:Ds.defineModifier(),special:Ds.defineModifier()};Gs([{tag:aa.link,class:"tok-link"},{tag:aa.heading,class:"tok-heading"},{tag:aa.emphasis,class:"tok-emphasis"},{tag:aa.strong,class:"tok-strong"},{tag:aa.keyword,class:"tok-keyword"},{tag:aa.atom,class:"tok-atom"},{tag:aa.bool,class:"tok-bool"},{tag:aa.url,class:"tok-url"},{tag:aa.labelName,class:"tok-labelName"},{tag:aa.inserted,class:"tok-inserted"},{tag:aa.deleted,class:"tok-deleted"},{tag:aa.literal,class:"tok-literal"},{tag:aa.string,class:"tok-string"},{tag:aa.number,class:"tok-number"},{tag:[aa.regexp,aa.escape,aa.special(aa.string)],class:"tok-string2"},{tag:aa.variableName,class:"tok-variableName"},{tag:aa.local(aa.variableName),class:"tok-variableName tok-local"},{tag:aa.definition(aa.variableName),class:"tok-variableName tok-definition"},{tag:aa.special(aa.variableName),class:"tok-variableName2"},{tag:aa.definition(aa.propertyName),class:"tok-propertyName tok-definition"},{tag:aa.typeName,class:"tok-typeName"},{tag:aa.namespace,class:"tok-namespace"},{tag:aa.className,class:"tok-className"},{tag:aa.macroName,class:"tok-macroName"},{tag:aa.propertyName,class:"tok-propertyName"},{tag:aa.operator,class:"tok-operator"},{tag:aa.comment,class:"tok-comment"},{tag:aa.meta,class:"tok-meta"},{tag:aa.invalid,class:"tok-invalid"},{tag:aa.punctuation,class:"tok-punctuation"}]);var la,ua=new ls;var ca=class{constructor(e,t,n=[]){this.data=e,Te.prototype.hasOwnProperty("tree")||Object.defineProperty(Te.prototype,"tree",{get(){return da(this)}}),this.parser=t,this.extension=[xa.of(this),Te.languageData.of(((e,t,n)=>e.facet(ha(e,t,n))))].concat(n)}isActiveAt(e,t,n=-1){return ha(e,t,n)==this.data}findRegions(e){let t=e.facet(xa);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(ua)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(ls.mounted);if(i){if(i.tree.prop(ua)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof ms&&r(i,e.positions[n]+t)}};return r(da(e),0),n}get allowsNesting(){return!0}};function ha(e,t,n){let r=e.facet(xa);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=da(e).topNode;r;r=r.enter(t,n,hs.ExcludeBuffers))i=r.type.prop(ua)||i;return i}ca.setState=ye.define();var pa=class extends ca{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=function(e){return G.define({combine:e?t=>t.concat(e):void 0})}(e.languageData);return new pa(t,e.parser.configure({props:[ua.add((e=>e.isTop?t:void 0))]}))}configure(e){return new pa(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}};function da(e){let t=e.field(ca.state,!1);return t?t.tree:ms.empty}var fa=null,ma=class{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}startParse(){return this.parser.startParse(new class{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ms.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(Bs.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Bs.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=fa;fa=this;try{return e()}finally{fa=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ga(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=Bs.applyChanges(n,t),r=ms.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new ma(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=ga(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Is{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=fa;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new ms(cs.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return fa}};function ga(e,t,n){return Bs.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}var ya=class{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new ya(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=new ma(e.facet(xa).parser,e,[],ms.empty,0,{from:0,to:t},[],null);return n.work(20,t)||n.takeTree(),new ya(n)}};ca.state=Y.define({create:ya.init,update(e,t){for(let e of t.effects)if(e.is(ca.setState))return e.value;return t.startState.facet(xa)!=t.state.facet(xa)?ya.init(t.state):e.apply(t)}});var va=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(va=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});var wa=typeof navigator<"u"&&(null===(la=navigator.scheduling)||void 0===la?void 0:la.isInputPending)?()=>navigator.scheduling.isInputPending():null,ba=Dn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ca.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ca.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=va(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(ca.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!wa?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>wa&&wa()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:ca.setState.of(new ya(i.context))})),this.chunkBudget>0&&!(a&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Bn(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),xa=G.define({combine:e=>e.length?e[0]:null,enables:[ca.state,ba]}),Aa=class{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}},_a=G.define(),ka=G.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function Ea(e){let t=e.facet(ka);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Ca(e,t){let n="",r=e.tabSize;if(9==e.facet(ka).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(let e=0;e<t;e++)n+=" ";return n}function Sa(e,t){e instanceof Te&&(e=new Oa(e));for(let n of e.state.facet(_a)){let r=n(e,t);if(null!=r)return r}let n=da(e.state);return n?function(e,t,n){return Ba(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}var Oa=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ea(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return qe(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},Ta=new ls;function Na(e){let t=e.type.prop(Ta);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(ls.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>function(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Ia:null}function Ba(e,t,n){for(;e;e=e.parent){let r=Na(e);if(r)return r(new Pa(n,t,e))}return null}function Ia(){return 0}var Pa=class extends Oa{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(Ma(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Ba(e,this.pos,this.base):0}};function Ma(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}var Da=G.define(),Ra=new ls;function Fa(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function La(e,t,n){for(let r of e.facet(Da)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=da(e);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let s=o.type.prop(Ra);if(s&&(o.to<r.length-50||r.length==e.doc.length||!Fa(o))){let r=s(o,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}(e,t,n)}function Ua(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}var $a=ye.define({map:Ua}),Ha=ye.define({map:Ua});function Ga(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}var ja=Y.define({create:()=>cn.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is($a)&&!Va(e,n.value.from,n.value.to)?e=e.update({add:[Za.range(n.value.from,n.value.to)]}):n.is(Ha)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>Bi.decorations.from(e)});function za(e,t,n){var r;let i=null;return null===(r=e.field(ja,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function Va(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function Xa(e,t){return e.field(ja,!1)?t:t.concat(ye.appendConfig.of(Ka()))}function qa(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return Bi.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}var Wa=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Ga(e)){let n=La(e.state,t.from,t.to);if(n)return e.dispatch({effects:Xa(e.state,[$a.of(n),qa(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(ja,!1))return!1;let t=[];for(let n of Ga(e)){let r=za(e.state,n.from,n.to);r&&t.push(Ha.of(r),qa(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=La(t,i.from,i.to);o&&n.push($a.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:Xa(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(ja,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(Ha.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],Ya={placeholderDOM:null,placeholderText:""},Qa=G.define({combine:e=>Ne(e,Ya)});function Ka(e){let t=[ja,tl];return e&&t.push(Qa.of(e)),t}var Za=cn.replace({widget:new class extends ln{toDOM(e){let{state:t}=e,n=t.facet(Qa),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=za(e.state,n.from,n.to);r&&e.dispatch({effects:Ha.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),Ja={openText:"",closedText:"",markerDOM:null,domEventHandlers:{}},el=class extends Uo{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}};var tl=Bi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),nl=class{constructor(e,t){let n;function r(e){let t=et.newName();return(n||(n=Object.create(null)))["."+t]=e,t}let i=t.scope;this.scope=i instanceof ca?e=>e.prop(ua)==i.data:i?e=>e==i:void 0,this.style=Gs(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:"string"==typeof t.all?t.all:t.all?r(t.all):void 0}).style,this.module=n?new et(n):null,this.themeType=t.themeType}static define(e,t){return new nl(e,t||{})}},rl=G.define(),il=G.define({combine:e=>e.length?[e[0]]:null});function ol(e){let t=e.facet(rl);return t.length?t:e.facet(il)}var sl=te.high(Dn.fromClass(class{constructor(e){this.markCache=Object.create(null),this.tree=da(e.state),this.decorations=this.buildDeco(e,ol(e.state))}update(e){let t=da(e.state),n=ol(e.state),r=n!=ol(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return cn.none;let n=new Re;for(let{from:r,to:i}of e.visibleRanges)zs(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=cn.mark({class:r})))}),r,i);return n.finish()}},{decorations:e=>e.decorations})),al=nl.define([{tag:aa.meta,color:"#7a757a"},{tag:aa.link,textDecoration:"underline"},{tag:aa.heading,textDecoration:"underline",fontWeight:"bold"},{tag:aa.emphasis,fontStyle:"italic"},{tag:aa.strong,fontWeight:"bold"},{tag:aa.strikethrough,textDecoration:"line-through"},{tag:aa.keyword,color:"#708"},{tag:[aa.atom,aa.bool,aa.url,aa.contentSeparator,aa.labelName],color:"#219"},{tag:[aa.literal,aa.inserted],color:"#164"},{tag:[aa.string,aa.deleted],color:"#a11"},{tag:[aa.regexp,aa.escape,aa.special(aa.string)],color:"#e40"},{tag:aa.definition(aa.variableName),color:"#00f"},{tag:aa.local(aa.variableName),color:"#30a"},{tag:[aa.typeName,aa.namespace],color:"#085"},{tag:aa.className,color:"#167"},{tag:[aa.special(aa.variableName),aa.macroName],color:"#256"},{tag:aa.definition(aa.propertyName),color:"#00c"},{tag:aa.comment,color:"#940"},{tag:aa.invalid,color:"#f00"}]),ll=Bi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ul="()[]{}",cl=G.define({combine:e=>Ne(e,{afterCursor:!0,brackets:ul,maxScanDistance:1e4,renderMatch:dl})}),hl=cn.mark({class:"cm-matchingBracket"}),pl=cn.mark({class:"cm-nonmatchingBracket"});function dl(e){let t=[],n=e.matched?hl:pl;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}var fl=Y.define({create:()=>cn.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(cl);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=yl(t.state,e.head,-1,r)||e.head>0&&yl(t.state,e.head-1,1,r)||r.afterCursor&&(yl(t.state,e.head,1,r)||e.head<t.state.doc.length&&yl(t.state,e.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,t.state)))}return cn.set(n,!0)},provide:e=>Bi.decorations.from(e)}),ml=[fl,ll];function gl(e,t,n){let r=e.prop(t<0?ls.openedBy:ls.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function yl(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||ul,s=da(e),a=s.resolveInner(t,n);for(let r=a;r;r=r.parent){let i=gl(r.type,n,o);if(i&&r.from<r.to)return vl(e,t,n,r,i,o)}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!c.next().done&&e<=o;){let o=c.value;n<0&&(e+=o.length);let a=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0||r.resolve(a+e,1).type!=i))if(t%2==0==n>0)h++;else{if(1==h)return{start:u,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}n>0&&(e+=o.length)}return c.done?{start:u,matched:!1}:null}(e,t,n,s,a.type,i,o)}function vl(e,t,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,u=s?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do{if(n<0?u.to<=r.from:u.from>=r.to){if(0==l&&i.indexOf(u.type.name)>-1&&u.from<u.to)return{start:a,end:{from:u.from,to:u.to},matched:!0};if(gl(u.type,n,o))l++;else if(gl(u.type,-n,o)&&(l--,0==l))return{start:a,end:u.from==u.to?void 0:{from:u.from,to:u.to},matched:!1}}}while(n<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}var wl=Object.create(null),bl=[cs.none],xl=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])xl[e]=Al(wl,t);function Al(e,t){let n=null;for(let r of t.split(".")){let t=e[r]||aa[r];t&&("function"==typeof t?n&&(n=t(n)):n||(n=t))}if(!n)return 0;let r=t.replace(/ /g,"_"),i=cs.define({id:bl.length,name:r,props:[Us({[r]:n})]});return bl.push(i),i.id}function _l(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}var kl=_l((function(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,s=1e9;for(let n=e;n<=o;){let a=t.doc.lineAt(n);if(a.from>i&&(e==o||o>a.from)){i=a.from;let e=Sl(t,n).line;if(!e)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,u=a.text.slice(o,o+e.length)==e?o:-1;o<a.text.length&&o<s&&(s=o),r.push({line:a,comment:u,token:e,indent:o,empty:l,single:!1})}n=a.to+1}if(s<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==n+1&&(r[n].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:s}of r)(s||!o)&&e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}),0),El=_l(Ol,0),Cl=_l(((e,t)=>Ol(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from,to:i.to})}return t}(t))),0);function Sl(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function Ol(e,t,n=t.selection.ranges){let r=n.map((e=>Sl(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-50,r),l=e.sliceDoc(i,i+50),u=/\s*$/.exec(a)[0].length,c=/^\s*/.exec(l)[0].length,h=a.length-u;if(a.slice(h-t.length,h)==t&&l.slice(c,c+n.length)==n)return{open:{pos:r-u,margin:u&&1},close:{pos:i+c,margin:c&&1}};i-r<=100?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(i-50,i));let p=/^\s*/.exec(o)[0].length,d=/\s*$/.exec(s)[0].length,f=s.length-d-n.length;return o.slice(p,p+t.length)==t&&s.slice(f,f+n.length)==n?{open:{pos:r+p+t.length,margin:/\s/.test(o.charAt(p+t.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}var Tl=me.define(),Nl=me.define(),Bl=G.define(),Il=G.define({combine:e=>Ne(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});var Pl=Y.define({create:()=>Wl.empty,update(e,t){let n=t.state.facet(Il),r=t.annotation(Tl);if(r){let i=t.docChanged?L.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,o=Ul.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?$l(a,a.length,n.minDepth,o):jl(a,t.startState.selection),new Wl(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(Nl);if(("full"==i||"before"==i)&&(e=e.isolate()),!1===t.annotation(ve.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=Ul.fromTransaction(t),s=t.annotation(ve.time),a=t.annotation(ve.userEvent);return o?e=e.addChanges(o,s,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),("full"==i||"after"==i)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new Wl(e.done.map(Ul.fromJSON),e.undone.map(Ul.fromJSON))});function Ml(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(Pl,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}var Dl=Ml(0,!1),Rl=Ml(1,!1),Fl=Ml(0,!0),Ll=Ml(1,!0),Ul=class{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new Ul(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Ul(e.changes&&N.fromJSON(e.changes),[],e.mapped&&T.fromJSON(e.mapped),e.startSelection&&L.fromJSON(e.startSelection),e.selectionsAfter.map(L.fromJSON))}static fromTransaction(e,t){let n=Gl;for(let t of e.startState.facet(Bl)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new Ul(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Gl)}static selection(e){return new Ul(void 0,Gl,void 0,void 0,e)}};function $l(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function Hl(e,t){return e.length?t.length?e.concat(t):e:t}var Gl=[];function jl(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),$l(e,e.length-1,1e9,n.setSelAfter(r)))}return[Ul.selection([t])]}function zl(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function Vl(e,t){if(!e.length)return e;let n=e.length,r=Gl;for(;n;){let i=Xl(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[Ul.selection(r)]:Gl}function Xl(e,t,n){let r=Hl(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):Gl,n);if(!e.changes)return Ul.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new Ul(i,ye.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}var ql=/^(input\.type|delete)($|\.)/,Wl=class{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Wl(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||ql.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r&&function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let e=0;e<n.length;){let t=n[e++],s=n[e++];o>=t&&i<=s&&(r=!0)}})),r}(s.changes,e.changes)||"input.type.compose"==n)?$l(o,o.length-1,i,new Ul(e.changes.compose(s.changes),Hl(e.effects,s.effects),s.mapped,s.startSelection,Gl)):$l(o,o.length,i,e),new Wl(o,Gl,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Gl;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(i[i.length-1],e)?this:new Wl(jl(this.done,e),this.undone,t,n)}addMapping(e){return new Wl(Vl(this.done,e),Vl(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Tl.of({side:e,rest:zl(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?Gl:r.slice(0,r.length-1);return i.mapped&&(n=Vl(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Tl.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}};Wl.empty=new Wl(Gl,Gl);var Yl=[{key:"Mod-z",run:Dl,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Rl,preventDefault:!0},{key:"Mod-u",run:Fl,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ll,preventDefault:!0}];function Ql(e,t){return L.create(e.ranges.map(t),e.mainIndex)}function Kl(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Zl({state:e,dispatch:t},n){let r=Ql(e.selection,n);return!r.eq(e.selection)&&(t(Kl(e,r)),!0)}function Jl(e,t){return L.cursor(t?e.to:e.from)}function eu(e,t){return Zl(e,(n=>n.empty?e.moveByChar(n,t):Jl(n,t)))}function tu(e){return e.textDirectionAt(e.state.selection.main.head)==Vn.LTR}var nu=e=>eu(e,!tu(e)),ru=e=>eu(e,tu(e));function iu(e,t){return Zl(e,(n=>n.empty?e.moveByGroup(n,t):Jl(n,t)))}function ou(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function su(e,t,n){let r,i,o=da(e).resolveInner(t.head),s=n?ls.closedBy:ls.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;ou(e,t,s)?o=t:r=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?yl(e,o.from,1):yl(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,L.cursor(i,n?-1:1)}function au(e,t){return Zl(e,(n=>{if(!n.empty)return Jl(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}var lu=e=>au(e,!1),uu=e=>au(e,!0);function cu(e,t){let{state:n}=e,r=Ql(n.selection,(n=>n.empty?e.moveVertically(n,t,Math.min(e.dom.clientHeight,innerHeight)):Jl(n,t)));if(r.eq(n.selection))return!1;let i,o=e.coordsAtPos(n.selection.main.head),s=e.scrollDOM.getBoundingClientRect();return o&&o.top>s.top&&o.bottom<s.bottom&&o.top-s.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(i=Bi.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-s.top})),e.dispatch(Kl(n,r),{effects:i}),!0}var hu=e=>cu(e,!1),pu=e=>cu(e,!0);function du(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=L.cursor(r.from+n))}return i}var fu=e=>Zl(e,(t=>du(e,t,!0))),mu=e=>Zl(e,(t=>du(e,t,!1)));function gu(e,t){let n=Ql(e.state.selection,(e=>{let n=t(e);return L.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(Kl(e.state,n)),!0)}function yu(e,t){return gu(e,(n=>e.moveByChar(n,t)))}var vu=e=>yu(e,!tu(e)),wu=e=>yu(e,tu(e));function bu(e,t){return gu(e,(n=>e.moveByGroup(n,t)))}function xu(e,t){return gu(e,(n=>e.moveVertically(n,t)))}var Au=e=>xu(e,!1),_u=e=>xu(e,!0);function ku(e,t){return gu(e,(n=>e.moveVertically(n,t,Math.min(e.dom.clientHeight,innerHeight))))}var Eu=e=>ku(e,!1),Cu=e=>ku(e,!0),Su=e=>gu(e,(t=>du(e,t,!0))),Ou=e=>gu(e,(t=>du(e,t,!1))),Tu=({state:e,dispatch:t})=>(t(Kl(e,{anchor:0})),!0),Nu=({state:e,dispatch:t})=>(t(Kl(e,{anchor:e.doc.length})),!0),Bu=({state:e,dispatch:t})=>(t(Kl(e,{anchor:e.selection.main.anchor,head:0})),!0),Iu=({state:e,dispatch:t})=>(t(Kl(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Pu({state:e,dispatch:t},n){if(e.readOnly)return!1;let r="delete.selection",i=e.changeByRange((e=>{let{from:t,to:i}=e;if(t==i){let e=n(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),i=Math.max(i,e)}return t==i?{range:e}:{changes:{from:t,to:i},range:L.cursor(t)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:r})),!0)}function Mu(e,t,n){if(e instanceof Bi)for(let r of e.state.facet(Bi.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}var Du=(e,t)=>Pu(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=qe(r,o.tabSize)%Ea(o)||Ea(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=w(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return Mu(e,i,t)})),Ru=e=>Du(e,!1),Fu=e=>Du(e,!0),Lu=(e,t)=>Pu(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=w(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),u=s(l);if(null!=e&&u!=e)break;(" "!=l||r!=n)&&(e=u),r=a}return Mu(e,r,t)})),Uu=e=>Lu(e,!1),$u=e=>Pu(e,(t=>{let n=e.lineBlockAt(t).to;return Mu(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}));function Hu(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function Gu(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of Hu(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)i.push(L.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)i.push(L.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:L.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function ju(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of Hu(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var zu=Xu(!1),Vu=Xu(!0);function Xu(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=da(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(ls.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let l=new Oa(t,{simulateBreak:r,simulateDoubleBreak:!!s}),u=Sa(l,r);for(null==u&&(u=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",Ca(t,u)];return s&&c.push(Ca(t,l.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:a.of(c)},range:L.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function qu(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:L.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}var Wu=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(qu(e,((t,n)=>{n.push({from:t.from,insert:e.facet(ka)})})),{userEvent:"input.indent"})),!0),Yu=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(qu(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=qe(r,e.tabSize),o=0,s=Ca(e,Math.max(0,i-Ea(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),Qu=[{key:"Ctrl-b",run:nu,shift:vu,preventDefault:!0},{key:"Ctrl-f",run:ru,shift:wu},{key:"Ctrl-p",run:lu,shift:Au},{key:"Ctrl-n",run:uu,shift:_u},{key:"Ctrl-a",run:e=>Zl(e,(t=>L.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>gu(e,(t=>L.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>Zl(e,(t=>L.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>gu(e,(t=>L.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Fu},{key:"Ctrl-h",run:Ru},{key:"Ctrl-k",run:$u},{key:"Ctrl-Alt-h",run:Uu},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:a.of(["",""])},range:L.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:w(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:w(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:L.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:pu}],Ku=[{key:"ArrowLeft",run:nu,shift:vu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>iu(e,!tu(e)),shift:e=>bu(e,!tu(e))},{mac:"Cmd-ArrowLeft",run:mu,shift:Ou},{key:"ArrowRight",run:ru,shift:wu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>iu(e,tu(e)),shift:e=>bu(e,tu(e))},{mac:"Cmd-ArrowRight",run:fu,shift:Su},{key:"ArrowUp",run:lu,shift:Au,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Tu,shift:Bu},{mac:"Ctrl-ArrowUp",run:hu,shift:Eu},{key:"ArrowDown",run:uu,shift:_u,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Nu,shift:Iu},{mac:"Ctrl-ArrowDown",run:pu,shift:Cu},{key:"PageUp",run:hu,shift:Eu},{key:"PageDown",run:pu,shift:Cu},{key:"Home",run:mu,shift:Ou,preventDefault:!0},{key:"Mod-Home",run:Tu,shift:Bu},{key:"End",run:fu,shift:Su,preventDefault:!0},{key:"Mod-End",run:Nu,shift:Iu},{key:"Enter",run:zu},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Ru,shift:Ru},{key:"Delete",run:Fu},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Uu},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Lu(e,!0)},{mac:"Mod-Backspace",run:e=>Pu(e,(t=>{let n=e.lineBlockAt(t).from;return Mu(e,t>n?n:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:$u}].concat(Qu.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),Zu=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>Zl(e,(t=>su(e.state,t,!tu(e)))),shift:e=>gu(e,(t=>su(e.state,t,!tu(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>Zl(e,(t=>su(e.state,t,tu(e)))),shift:e=>gu(e,(t=>su(e.state,t,tu(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Gu(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>ju(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Gu(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>ju(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=L.create([n.main]):n.main.empty||(r=L.create([L.cursor(n.main.head)])),!!r&&(t(Kl(e,r)),!0)}},{key:"Mod-Enter",run:Vu},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=Hu(e).map((({from:t,to:n})=>L.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:L.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=Ql(e.selection,(t=>{var n;let r=da(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from||null===(n=r.parent)||void 0===n)&&n.parent;)r=r.parent;return L.range(r.to,r.from)}));return t(Kl(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:Yu},{key:"Mod-]",run:Wu},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Oa(e,{overrideIndentation:e=>n[e]??-1}),i=qu(e,((t,i,o)=>{let s=Sa(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=Ca(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Hu(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=Ql(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let r=!1,i=Ql(e.selection,(t=>{let i=yl(e,t.head,-1)||yl(e,t.head,1)||t.head>0&&yl(e,t.head-1,1)||t.head<e.doc.length&&yl(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?L.range(t.anchor,o):L.cursor(o)}));return!!r&&(t(Kl(e,i)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let t=Sl(e.state);return t.line?kl(e):!!t.block&&Cl(e)}},{key:"Alt-A",run:El}].concat(Ku),Ju={key:"Tab",run:Wu,shift:Yu};function ec(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)tc(e,arguments[t]);return e}function tc(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null!=t)if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)tc(e,t[n])}}var nc="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e,rc=class{constructor(e,t,n=0,r=e.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(nc(e)):nc,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return k(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=E(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=C(e);let r=this.normalize(t);for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i);if(s)return this.value=s,this;if(e==r.length-1)break;i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}};typeof Symbol<"u"&&(rc.prototype[Symbol.iterator]=function(){return this});var ic={from:-1,to:-1,match:/.*/.exec("")},oc="gm"+(null==/x/.unicode?"":"u"),sc=class{constructor(e,t,n,r=0,i=e.length){if(this.to=i,this.curLine="",this.done=!1,this.value=ic,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new uc(e,t,n,r,i);this.re=new RegExp(t,oc+(n?.ignoreCase?"i":"")),this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=r,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}},ac=new WeakMap,lc=class{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=ac.get(e);if(!r||r.from>=n||r.to<=t){let r=new lc(t,e.sliceString(t,n));return ac.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),ac.set(e,new lc(o,i)),new lc(t,i.slice(t-o,n-o))}},uc=class{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=ic,this.matchPos=r,this.re=new RegExp(t,oc+(n?.ignoreCase?"i":"")),this.flat=lc.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,n=e+t[0].length;return this.value={from:e,to:n,match:t},this.matchPos=n+(e==n?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=lc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}};function cc(e){let t=ec("input",{class:"cm-textfield",name:"line"}),n=ec("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:hc.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),r())},onsubmit:e=>{e.preventDefault(),r()}},ec("label",e.state.phrase("Go to line"),": ",t)," ",ec("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function r(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,u=a?+a.slice(1):0,c=s?+s:i.number;if(s&&l){let e=c/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),c=Math.round(r.doc.lines*e)}else s&&o&&(c=c*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,c)));e.dispatch({effects:hc.of(!1),selection:L.cursor(h.from+Math.max(0,Math.min(u,h.length))),scrollIntoView:!0}),e.focus()}return{dom:n}}typeof Symbol<"u"&&(sc.prototype[Symbol.iterator]=uc.prototype[Symbol.iterator]=function(){return this});var hc=ye.define(),pc=Y.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(hc)&&(e=n.value);return e},provide:e=>Lo.from(e,(e=>e?cc:null))}),dc=Bi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),fc={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},mc=G.define({combine:e=>Ne(e,fc,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});var gc=cn.mark({class:"cm-selectionMatch"}),yc=cn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function vc(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==Ce.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==Ce.Word)}var wc=Dn.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(mc),{state:n}=e,r=n.selection;if(r.ranges.length>1)return cn.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return cn.none;let e=n.wordAt(o.head);if(!e)return cn.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return cn.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!vc(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==Ce.Word&&e(t.sliceDoc(r-1,r))==Ce.Word}(s,n,o.from,o.to))return cn.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return cn.none}let a=[];for(let r of e.visibleRanges){let e=new rc(n.doc,i,r.from,r.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||vc(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(yc.range(r,i)):(r>=o.to||i<=o.from)&&a.push(gc.range(r,i)),a.length>t.maxMatches))return cn.none}}return cn.set(a)}},{decorations:e=>e.decorations}),bc=Bi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var xc=G.define({combine(e){var t;return{top:e.reduce(((e,t)=>e??t.top),void 0)||!1,caseSensitive:e.reduce(((e,t)=>e??t.caseSensitive),void 0)||!1,createPanel:(null===(t=e.find((e=>e.createPanel)))||void 0===t?void 0:t.createPanel)||(e=>new Xc(e))}}}),Ac=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,oc),!0}catch{return!1}}(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new Sc(this):new Ec(this)}getCursor(e,t=0,n=e.length){return this.regexp?Cc(this,e,t,n):kc(this,e,t,n)}},_c=class{constructor(e){this.spec=e}};function kc(e,t,n,r){return new rc(t,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase())}var Ec=class extends _c{constructor(e){super(e)}nextMatch(e,t,n){let r=kc(this.spec,e,n,e.length).nextOverlapping();return r.done&&(r=kc(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=kc(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let n=kc(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=kc(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}};function Cc(e,t,n,r){return new sc(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},n,r)}var Sc=class extends _c{nextMatch(e,t,n){let r=Cc(this.spec,e,n,e.length).next();return r.done&&(r=Cc(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=Cc(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=Cc(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=Cc(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}},Oc=ye.define(),Tc=ye.define(),Nc=Y.define({create:e=>new Bc(Gc(e).create(),null),update(e,t){for(let n of t.effects)n.is(Oc)?e=new Bc(n.value.create(),e.panel):n.is(Tc)&&(e=new Bc(e.query,n.value?Hc:null));return e},provide:e=>Lo.from(e,(e=>e.panel))}),Bc=class{constructor(e,t){this.query=e,this.panel=t}},Ic=cn.mark({class:"cm-searchMatch"}),Pc=cn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Mc=Dn.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(Nc))}update(e){let t=e.state.field(Nc);(t!=e.startState.field(Nc)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return cn.none;let{view:n}=this,r=new Re;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:a}=i[t];for(;t<o-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state.doc,s,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?Pc:Ic)}))}return r.finish()}},{decorations:e=>e.decorations});function Dc(e){return t=>{let n=t.state.field(Nc,!1);return n&&n.query.spec.valid?e(t,n):jc(t)}}var Rc=Dc(((e,{query:t})=>{let{from:n,to:r}=e.state.selection.main,i=t.nextMatch(e.state.doc,n,r);return!(!i||i.from==n&&i.to==r)&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Yc(e,i),userEvent:"select.search"}),!0)})),Fc=Dc(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main,o=t.prevMatch(n.doc,r,i);return!!o&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:Yc(e,o),userEvent:"select.search"}),!0)})),Lc=Dc(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:L.create(n.map((e=>L.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),Uc=Dc(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n.doc,r,r);if(!o)return!1;let s,a,l=[];if(o.from==r&&o.to==i&&(a=n.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(n.doc,o.from,o.to)),o){let e=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-e,head:o.to-e}}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:o?Yc(e,o):void 0,userEvent:"input.replace"}),!0})),$c=Dc(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state.doc,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));return!!n.length&&(e.dispatch({changes:n,userEvent:"input.replace.all"}),!0)}));function Hc(e){return e.state.facet(xc).createPanel(e)}function Gc(e,t){var n;let r=e.selection.main,i=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to),o=null!==(n=t?.caseSensitive)&&void 0!==n?n:e.facet(xc).caseSensitive;return t&&!i?t:new Ac({search:i.replace(/\n/g,"\\n"),caseSensitive:o})}var jc=e=>{let t=e.state.field(Nc,!1);if(t&&t.panel){let n=Mo(e,Hc);if(!n)return!1;let r=n.dom.querySelector("[name=search]");if(r!=e.root.activeElement){let n=Gc(e.state,t.query.spec);n.valid&&e.dispatch({effects:Oc.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[Tc.of(!0),t?Oc.of(Gc(e.state,t.query.spec)):ye.appendConfig.of(Kc)]});return!0},zc=e=>{let t=e.state.field(Nc,!1);if(!t||!t.panel)return!1;let n=Mo(e,Hc);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Tc.of(!1)}),!0},Vc=[{key:"Mod-f",run:jc,scope:"editor search-panel"},{key:"F3",run:Rc,shift:Fc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Rc,shift:Fc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:zc,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new rc(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(L.range(t.value.from,t.value.to))}return t(e.update({selection:L.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=Mo(e,cc);if(!t){let n=[hc.of(!0)];null==e.state.field(pc,!1)&&n.push(ye.appendConfig.of([pc,dc])),e.dispatch({effects:n}),t=Mo(e,cc)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=L.create(n.ranges.map((t=>e.wordAt(t.head)||L.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=r)))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new rc(e.doc,t,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((e=>e.from==i.value.from)))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}if(n)return null;i=new rc(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(L.range(i.from,i.to),!1),effects:Bi.scrollIntoView(i.to)})),!0)},preventDefault:!0}],Xc=class{constructor(e){this.view=e;let t=this.query=e.state.field(Nc).query.spec;function n(e,t,n){return ec("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=ec("input",{value:t.search,placeholder:qc(e,"Find"),"aria-label":qc(e,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ec("input",{value:t.replace,placeholder:qc(e,"Replace"),"aria-label":qc(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=ec("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=ec("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=ec("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>Rc(e)),[qc(e,"next")]),n("prev",(()=>Fc(e)),[qc(e,"previous")]),n("select",(()=>Lc(e)),[qc(e,"all")]),ec("label",null,[this.caseField,qc(e,"match case")]),ec("label",null,[this.reField,qc(e,"regexp")]),...e.state.readOnly?[]:[ec("br"),this.replaceField,n("replace",(()=>Uc(e)),[qc(e,"replace")]),n("replaceAll",(()=>$c(e)),[qc(e,"replace all")]),ec("button",{name:"close",onclick:()=>zc(e),"aria-label":qc(e,"close"),type:"button"},[""])]])}commit(){let e=new Ac({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Oc.of(e)}))}keydown(e){!function(e,t,n){return ji(Hi(e.state),t,e,n)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Fc:Rc)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),Uc(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(Oc)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(xc).top}};function qc(e,t){return e.state.phrase(t)}var Wc=/[\s\.,:;?!]/;function Yc(e,{from:t,to:n}){let r=e.state.doc.lineAt(t).from,i=e.state.doc.lineAt(n).to,o=Math.max(r,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(o,s);if(o!=r)for(let e=0;e<30;e++)if(!Wc.test(a[e+1])&&Wc.test(a[e])){a=a.slice(e);break}if(s!=i)for(let e=a.length-1;e>a.length-30;e--)if(!Wc.test(a[e-1])&&Wc.test(a[e])){a=a.slice(0,e);break}return Bi.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${e.state.doc.lineAt(t).number}`)}var Qc=Bi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Kc=[Nc,te.lowest(Mc),Qc],Zc=class{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=da(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(rh(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}};function Jc(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function eh(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=Jc(t)+Jc(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}var th=class{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}};function nh(e){return e.selection.main.head}function rh(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}var ih=me.define();function oh(e,t){let n=t.completion.apply||t.completion.label,r=t.source;"string"==typeof n?e.dispatch(e.state.changeByRange((t=>{if(t==e.state.selection.main)return{changes:{from:r.from,to:r.to,insert:n},range:L.cursor(r.from+n.length)};let i=r.to-r.from;return!t.empty||i&&e.state.sliceDoc(t.from-i,t.from)!=e.state.sliceDoc(r.from,r.to)?{range:t}:{changes:{from:t.from-i,to:t.from,insert:n},range:L.cursor(t.from-i+n.length)}})),{userEvent:"input.complete",annotations:ih.of(t.completion)}):n(e,t.completion,r.from,r.to)}var sh=new WeakMap;function ah(e){if(!Array.isArray(e))return e;let t=sh.get(e);return t||sh.set(e,t=eh(e)),t}var lh=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=k(e,t),r=C(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(k(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=k(e,0);return r==t[0]?[0,0,C(r)]:r==n[0]?[-200,0,C(r)]:null}let s=e.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=k(e,i);(o==t[l]||o==n[l])&&(r[l++]=i),i+=C(o)}if(l<a)return null}let u=0,c=0,h=!1,p=0,d=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),y=0;r<l&&c<a;){let l=k(e,r);s<0&&(u<a&&l==t[u]&&(i[u++]=r),p<a&&(l==t[p]||l==n[p]?(0==p&&(d=r),f=r+1,p++):p=0));let v,w=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(v=E(l))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(!r||1==w&&m||0==y&&0!=w)&&(t[c]==l||n[c]==l&&(h=!0)?o[c++]=r:o.length&&(g=!1)),y=w,r+=C(l)}return c==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):p==a&&0==d?[-200-e.length,0,f]:s>-1?[-700-e.length,s,s+this.pattern.length]:p==a?[-900-e.length,d,f]:c==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let e of t){let t=e+(this.astral?C(k(n,e)):1);i>1&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return r}},uh=G.define({combine:e=>Ne(e,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>function(e,t){return e?t?e+" "+t:e:t}(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function ch(e,t,n){if(e<=n)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}function hh(e){return t=>new class{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let n=e.state.field(t),{options:r,selected:i}=n.open,o=e.state.facet(uh);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,o=0;for(let e=1;e<n.length;){let t=n[e++],s=n[e++];t>o&&r.appendChild(document.createTextNode(i.slice(o,t)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(t,s))),a.className="cm-completionMatchedText",o=s}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.range=ch(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return oh(e,r[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ch(t.options.length,t.selected,this.view.state.facet(uh).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>Bn(this.view.state,e,"completion info"))):this.addInfoPane(i)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let i=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,o=this.view.textDirection==Vn.RTL,s=t.left,a=innerWidth-t.right;return o&&s<Math.min(n.width,a)?o=!1:!o&&a<Math.min(n.width,s)&&(o=!0),{top:i,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,n){let r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true");for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=e[i],s=r.appendChild(document.createElement("li"));s.id=t+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let e of this.optionContent){let t=e(n,this.view.state,o);t&&s.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}(t,e)}function ph(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}var dh=class{constructor(e,t,n,r,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new dh(this.options,gh(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,i){let o=function(e,t){let n=[],r=0;for(let i of e)if(i.hasResult())if(!1===i.result.filter)for(let e of i.result.options)n.push(new th(e,i,[1e9-r++]));else{let e,r=new lh(t.sliceDoc(i.from,i.to));for(let t of i.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new th(t,i,e)))}let i=[],o=null;for(let e of n.sort(vh))!o||o.label!=e.completion.label||o.detail!=e.completion.detail||null!=o.type&&null!=e.completion.type&&o.type!=e.completion.type||o.apply!=e.completion.apply?i.push(e):ph(e.completion)>ph(o)&&(i[i.length-1]=e),o=e.completion;return i}(e,t);if(!o.length)return null;let s=0;if(r&&r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new dh(o,gh(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:hh(Ch),above:i.aboveCursor},r?r.timestamp:Date.now(),s)}map(e){return new dh(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}},fh=class{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new fh(yh,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(uh),r=(n.override||t.languageDataAt("autocomplete",nh(t)).map(ah)).map((t=>(this.active.find((e=>e.source==t))||new bh(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?dh.build(r,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new bh(e.source,0):e)));for(let t of e.effects)t.is(Eh)&&(i=i&&i.setSelected(t.value,this.id));return r==this.active&&i==this.open?this:new fh(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:mh}};var mh={"aria-autocomplete":"list"};function gh(e,t){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":e+"-"+t,"aria-controls":e}}var yh=[];function vh(e,t){return t.match[0]-e.match[0]||e.completion.label.localeCompare(t.completion.label)}function wh(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}var bh=class{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=wh(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new bh(r.source,0));for(let t of e.effects)if(t.is(Ah))r=new bh(r.source,1,t.value?nh(e.state):-1);else if(t.is(_h))r=new bh(r.source,0);else if(t.is(kh))for(let e of t.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new bh(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(nh(e.startState))?new bh(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new bh(this.source,this.state,e.mapPos(this.explicitPos))}},xh=class extends bh{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=nh(e.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==t&&nh(e.startState)==this.from)return new bh(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):rh(e,!0).test(i)}(this.result.validFor,e.state,i,o)?new xh(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new Zc(e.state,s,l>=0)))?new xh(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:nh(e.state)):new bh(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new bh(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new xh(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}};var Ah=ye.define(),_h=ye.define(),kh=ye.define({map:(e,t)=>e.map((e=>e.map(t)))}),Eh=ye.define(),Ch=Y.define({create:()=>fh.start(),update:(e,t)=>e.update(t),provide:e=>[So.from(e,(e=>e.tooltip)),Bi.contentAttributes.from(e,(e=>e.attrs))]});function Sh(e,t="option"){return n=>{let r=n.state.field(Ch,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;let i,o=1;"page"==t&&(i=function(e,t){let n=e.plugin(ko);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let s=r.open.selected+o*(e?1:-1),{length:a}=r.open.options;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:Eh.of(s)}),!0}}var Oh=Dn.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Ch).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Ch);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Ch)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!wh(e)));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){Bn(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==wh(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Ch);for(let e of t.active)1==e.state&&!this.running.some((t=>t.active.source==e.source))&&this.startQuery(e)}startQuery(e){let{state:t}=this.view,n=nh(t),r=new Zc(t,n,e.explicitPos==n),i=new class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:_h.of(null)}),Bn(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(uh);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new xh(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:nh(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(Ch).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new bh(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:kh.of(t)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:Ah.of(!1)})),20),this.composing=0}}}),Th=Bi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Nh=class{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}},Bh=class{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,O.TrackDel),n=e.mapPos(this.to,1,O.TrackDel);return null==t||null==n?null:new Bh(this.field,t,n)}},Ih=class{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=o,s=/^\t*/.exec(i)[0].length;for(let t=0;t<s;t++)n+=e.facet(ka);r.push(t+n.length-s),i=n+i.slice(s)}n.push(i),t+=i.length+1}let s=this.fieldPositions.map((e=>new Bh(e.field,r[e.line]+e.from,r[e.line]+e.to)));return{text:n,ranges:s}}static parse(e){let t,n=[],r=[],i=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1;for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:s&&n[t].name==s)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:s}),a=t;for(let e of i)e.field>=a&&e.field++}i.push(new Nh(a,r.length,t.index,t.index+s.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}r.push(o)}return new Ih(r,i)}},Ph=cn.widget({widget:new class extends ln{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),Mh=cn.mark({class:"cm-snippetField"}),Dh=class{constructor(e,t){this.ranges=e,this.active=t,this.deco=cn.set(e.map((e=>(e.from==e.to?Ph:Mh).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new Dh(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}},Rh=ye.define({map:(e,t)=>e&&e.map(t)}),Fh=ye.define(),Lh=Y.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(Rh))return n.value;if(n.is(Fh)&&e)return new Dh(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>Bi.decorations.from(e,(e=>e?e.deco:cn.none))});function Uh(e,t){return L.create(e.filter((e=>e.field==t)).map((e=>L.range(e.from,e.to))))}function $h(e){return({state:t,dispatch:n})=>{let r=t.field(Lh,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==i+e));return n(t.update({selection:Uh(r.ranges,i),effects:Rh.of(o?null:new Dh(r.ranges,i))})),!0}}var Hh=[{key:"Tab",run:$h(1),shift:$h(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(Lh,!1)&&(t(e.update({effects:Rh.of(null)})),!0)}],Gh=G.define({combine:e=>e.length?e[0]:Hh}),jh=te.highest(Ui.compute([Gh],(e=>e.facet(Gh)))),zh=Bi.domEventHandlers({mousedown(e,t){let n,r=t.state.field(Lh,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=r.ranges.find((e=>e.from<=n&&e.to>=n));return!(!i||i.field==r.active)&&(t.dispatch({selection:Uh(r.ranges,i.field),effects:Rh.of(r.ranges.some((e=>e.field>i.field))?new Dh(r.ranges,i.field):null)}),!0)}}),Vh={brackets:["(","[","{","'",'"'],before:")]}:;>"},Xh=ye.define({map:(e,t)=>t.mapPos(e,-1,O.TrackAfter)??void 0}),qh=ye.define({map:(e,t)=>t.mapPos(e)}),Wh=new class extends Be{};Wh.startSide=1,Wh.endSide=-1;var Yh=Y.define({create:()=>De.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=De.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(Xh)?e=e.update({add:[Wh.range(n.value,n.value+1)]}):n.is(qh)&&(e=e.update({filter:e=>e!=n.value}));return e}});var Qh="()[]{}<>";function Kh(e){for(let t=0;t<Qh.length;t+=2)if(Qh.charCodeAt(t)==e)return Qh.charAt(t+1);return E(e<128?e:e+1)}function Zh(e,t){return e.languageDataAt("closeBrackets",t)[0]||Vh}var Jh="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),ep=Bi.inputHandler.of(((e,t,n,r)=>{if((Jh?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==C(k(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=Zh(e,e.selection.main.head),r=n.brackets||Vh.brackets;for(let i of r){let o=Kh(k(i,0));if(t==i)return o==i?sp(e,i,r.indexOf(i+i+i)>-1):ip(e,i,o,n.before||Vh.before);if(t==o&&np(e,e.selection.main.from))return op(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),tp=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Zh(e,e.selection.main.head).brackets||Vh.brackets,r=null,i=e.changeByRange((t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return C(k(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&rp(e.doc,t.head)==Kh(k(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:L.cursor(t.head-i.length),userEvent:"delete.backward"}}return{range:r=t}}));return r||t(e.update(i,{scrollIntoView:!0})),!r}}];function np(e,t){let n=!1;return e.field(Yh).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function rp(e,t){let n=e.sliceString(t,t+2);return n.slice(0,C(k(n,0)))}function ip(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:Xh.of(o.to+t.length),range:L.range(o.anchor+t.length,o.head+t.length)};let s=rp(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:Xh.of(o.head+t.length),range:L.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function op(e,t,n){let r=null,i=e.selection.ranges.map((t=>t.empty&&rp(e.doc,t.head)==n?L.cursor(t.head+n.length):r=t));return r?null:e.update({selection:L.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>qh.of(e)))})}function sp(e,t,n){let r=null,i=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:Xh.of(i.to+t.length),range:L.range(i.anchor+t.length,i.head+t.length)};let o=i.head,s=rp(e.doc,o);if(s==t){if(ap(e,o))return{changes:{insert:t+t,from:o},effects:Xh.of(o+t.length),range:L.cursor(o+t.length)};if(np(e,o)){let r=n&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:L.cursor(o+t.length*(r?3:1)),effects:qh.of(o)}}}else{if(n&&e.sliceDoc(o-2*t.length,o)==t+t&&ap(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:Xh.of(o+t.length),range:L.cursor(o+t.length)};if(e.charCategorizer(o)(s)!=Ce.Word){let n=e.sliceDoc(o-1,o);if(n!=t&&e.charCategorizer(o)(n)!=Ce.Word&&!function(e,t,n){let r=da(e).resolveInner(t,-1);for(let i=0;i<5;i++){if(e.sliceDoc(r.from,r.from+n.length)==n)return!0;let i=r.to==t&&r.parent;if(!i)break;r=i}return!1}(e,o,t))return{changes:{insert:t+t,from:o},effects:Xh.of(o+t.length),range:L.cursor(o+t.length)}}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function ap(e,t){let n=da(e).resolveInner(t+1);return n.parent&&n.from==t}var lp=[{key:"Ctrl-Space",run:e=>!!e.state.field(Ch,!1)&&(e.dispatch({effects:Ah.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(Ch,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:_h.of(null)}),!0)}},{key:"ArrowDown",run:Sh(!0)},{key:"ArrowUp",run:Sh(!1)},{key:"PageDown",run:Sh(!0,"page")},{key:"PageUp",run:Sh(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Ch,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(oh(e,t.open.options[t.open.selected]),!0)}}],up=te.highest(Ui.computeN([uh],(e=>e.facet(uh).defaultKeymap?[lp]:[]))),cp=class{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(kp).markerFilter;i&&(r=i(r));let o=cn.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?cn.widget({widget:new Op(e),diagnostic:e}).range(e.from):cn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new cp(o,t,hp(o))}};function hp(e,t=null,n=0){let r=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return r=new class{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}(e,n,i.diagnostic),!1})),r}function pp(e,t){return!(!e.effects.some((e=>e.is(fp)))&&!e.changes.touchesRange(t.pos))}function dp(e,t){return e.field(yp,!1)?t:t.concat(ye.appendConfig.of([yp,Bi.decorations.compute([yp],(e=>{let{selected:t,panel:n}=e.field(yp);return t&&n&&t.from!=t.to?cn.set([vp.range(t.from,t.to)]):cn.none})),Bo(wp,{hideOn:pp}),Pp]))}var fp=ye.define(),mp=ye.define(),gp=ye.define(),yp=Y.define({create:()=>new cp(cn.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=hp(n,e.selected.diagnostic,i)||hp(n,null,i)}e=new cp(n,e.panel,r)}for(let n of t.effects)n.is(fp)?e=cp.init(n.value,e.panel,t.state):n.is(mp)?e=new cp(e.diagnostics,n.value?Np.open:null,e.selected):n.is(gp)&&(e=new cp(e.diagnostics,e.panel,n.value));return e},provide:e=>[Lo.from(e,(e=>e.panel)),Bi.decorations.from(e,(e=>e.diagnostics))]}),vp=cn.mark({class:"cm-lintRange cm-lintRange-active"});function wp(e,t,n){let{diagnostics:r}=e.state.field(yp),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(a.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(kp).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:bp(e,i)})}:null}function bp(e,t){return ec("ul",{class:"cm-tooltip-lint"},t.map((t=>Sp(e,t,!1))))}var xp=e=>{let t=e.state.field(yp,!1);return!(!t||!t.panel)&&(e.dispatch({effects:mp.of(!1)}),!0)},Ap=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(yp,!1);(!t||!t.panel)&&e.dispatch({effects:dp(e.state,[mp.of(!0)])});let n=Mo(e,Np.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:e=>{let t=e.state.field(yp,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],_p=Dn.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(kp);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(kp);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let n=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:dp(e,[fp.of(t)])}}(this.view.state,n))}),(e=>{Bn(this.view.state,e)}))}}update(e){let t=e.state.facet(kp);(e.docChanged||t!=e.startState.facet(kp))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),kp=G.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},Ne(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:_p});function Ep(e,t={}){return kp.of({source:e,config:t})}function Cp(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function Sp(e,t,n){var r;let i=n?Cp(t.actions):[];return ec("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},ec("span",{class:"cm-diagnosticText"},t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=r=>{r.preventDefault();let i=hp(e.state.field(yp).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:s}=n,a=i[r]?s.indexOf(i[r]):-1,l=a<0?s:[s.slice(0,a),ec("u",s.slice(a,a+1)),s.slice(a+1)];return ec("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[r]})"`}.`},l)})),t.source&&ec("div",{class:"cm-diagnosticSource"},t.source))}var Op=class extends ln{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ec("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}},Tp=class{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Sp(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},Np=class{constructor(e){this.view=e,this.items=[];this.list=ec("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)xp(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=Cp(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=hp(this.view.state.field(yp).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=ec("div",{class:"cm-panel-lint"},this.list,ec("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>xp(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(yp).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(yp),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==s.diagnostic){l=e;break}l<0?(a=new Tp(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new Tp(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=hp(this.view.state.field(yp).diagnostics,this.items[e].diagnostic);!t||this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:gp.of(t)})}static open(e){return new Np(e)}};function Bp(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function Ip(e){return Bp(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var Pp=Bi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ip("#d11")},".cm-lintRange-warning":{backgroundImage:Ip("orange")},".cm-lintRange-info":{backgroundImage:Ip("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Mp=class extends Uo{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce(((e,t)=>{let n=t.severity;return"error"==n||"warning"==n&&"info"==e?n:e}),"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let n=this.diagnostics,r=e.state.facet(Hp).tooltipFilter;return r&&(n=r(n)),n.length&&(t.onmouseover=()=>function(e,t,n){function r(){let r=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(r.from)&&e.dispatch({effects:Lp.of({pos:r.from,above:!1,create:()=>({dom:bp(e,n),getCoords:()=>t.getBoundingClientRect()})})}),t.onmouseout=t.onmousemove=null,function(e,t){let n=r=>{let i=t.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let e=r.target;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),e.state.field(Up)&&e.dispatch({effects:Lp.of(null)})}};window.addEventListener("mousemove",n)}(e,t)}let{hoverTime:i}=e.state.facet(Hp),o=setTimeout(r,i);t.onmouseout=()=>{clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}(e,t,n)),t}};function Dp(e,t){let n=Object.create(null);for(let r of t){let t=e.lineAt(r.from);(n[t.from]||(n[t.from]=[])).push(r)}let r=[];for(let e in n)r.push(new Mp(n[e]).range(+e));return De.of(r,!0)}var Rp=jo({class:"cm-gutter-lint",markers:e=>e.state.field(Fp)}),Fp=Y.define({create:()=>De.empty,update(e,t){e=e.map(t.changes);let n=t.state.facet(Hp).markerFilter;for(let r of t.effects)if(r.is(fp)){let i=r.value;n&&(i=n(i||[])),e=Dp(t.state.doc,i.slice(0))}return e}}),Lp=ye.define(),Up=Y.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=pp(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce(((e,t)=>t.is(Lp)?t.value:e),e)),provide:e=>So.from(e)}),$p=Bi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Bp('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Bp('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:Bp('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Hp=G.define({combine:e=>Ne(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})});function Gp(e={}){return[Hp.of(e),Fp,Rp,$p,Up]}var jp,zp=[function(e={}){return[Jo.of(e),Vo(),ns]}(),os,function(e={}){return[lo.of(e),uo||(uo=Dn.fromClass(class{constructor(e){this.view=e,this.decorations=cn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(lo)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new class{constructor(e){let{regexp:t,decoration:n,boundary:r,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof n?n:()=>n,this.boundary=r,this.maxLength=i}createDeco(e){let t=new Re;for(let{from:n,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))ro(e.state.doc,this.regexp,n,r,((n,r,i)=>t.add(n,r,this.getDeco(i,e,n))));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let u,c=[];if(n==r)for(this.regexp.lastIndex=a-n.from;(u=this.regexp.exec(n.text))&&u.index<l-n.from;){let t=u.index+n.from;c.push(this.getDeco(u,e,t).range(t,t+u[0].length))}else ro(e.state.doc,this.regexp,a,l,((t,n,r)=>c.push(this.getDeco(r,e,t).range(t,n))));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:c})}}return t}}({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=k(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=qe(e.text,t,r-e.from);return cn.replace({widget:new ho((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=cn.replace({widget:new co(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(lo);e.startState.facet(lo)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}(),function(e={}){return[Pl,Il.of(e),Bi.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Dl:"historyRedo"==e.inputType?Rl:null;return!!n&&(e.preventDefault(),n(t))}})]}(),function(e={}){let t=Object.assign(Object.assign({},Ja),e),n=new el(t,!0),r=new el(t,!1),i=Dn.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(xa)!=e.state.facet(xa)||e.startState.field(ja,!1)!=e.state.field(ja,!1)||da(e.startState)!=da(e.state))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new Re;for(let i of e.viewportLineBlocks){let o=za(e.state,i.from,i.to)?r:La(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,jo({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||De.empty},initialSpacer:()=>new el(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=za(e.state,t.from,t.to);if(r)return e.dispatch({effects:Ha.of(r)}),!0;let i=La(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:$a.of(i)}),!0)}})}),Ka()]}(),function(e={}){return[Vi.of(e),qi,Yi]}(),[to,no],Te.allowMultipleSelections.of(!0),Te.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=Sa(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=Ca(s,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e})),function(e,t){let n,r=[sl];return e instanceof nl&&(e.module&&r.push(Bi.styleModule.of(e.module)),n=e.themeType),t?.fallback?r.push(il.of(e)):n?r.push(rl.computeN([Bi.darkTheme],(t=>t.facet(Bi.darkTheme)==("dark"==n)?[e]:[]))):r.push(rl.of(e)),r}(al,{fallback:!0}),function(e={}){return[cl.of(e),ml]}(),[ep,Yh],function(e={}){return[Ch,uh.of(e),Oh,up,Th]}(),function(e){let t=e?.eventFilter||(e=>e.altKey&&0==e.button);return Bi.mouseSelectionStyle.of(((e,n)=>t(n)?yo(e,n):null))}(),function(e={}){let[t,n]=vo[e.key||"Alt"],r=Dn.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){(e.keyCode==t||!n(e))&&this.set(!1)}}});return[r,Bi.contentAttributes.of((e=>{var t;return null!==(t=e.plugin(r))&&void 0!==t&&t.isDown?wo:null}))]}(),fo,function(e){let t=[bc,wc];return e&&t.push(mc.of(e)),t}(),Ui.of([...tp,...Zu,...Vc,...Yl,...Wa,...lp,...Ap])],Vp=class{constructor(e,t,n,r,i,o,s,a,l,u=0,c){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=u,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new Vp(e,[],t,n,n,0,[],0,r?new Xp(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,n=65535&e,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==t)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(t-1)-(262144&e?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,e,l+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Vp(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new qp(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Xp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},Xp=class{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}};!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(jp||(jp={}));var qp=class{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}},Wp=class{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Wp(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Wp(this.stack,this.pos,this.index)}},Yp=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},Qp=new Yp,Kp=class{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:a}=s;e:for(;0!=(o&e[i]);){let n=e[i+1];for(let r=i+3;r<n;r+=2)if((e[r+1]&o)>0){let n=e[r];if(a.allows(n)&&(-1==t.token.value||t.token.value==n||s.overrides(n,t.token.value))){t.acceptToken(n);break}}for(let r=t.next,o=0,s=e[i+2];o<s;){let a=o+s>>1,l=n+a+(a<<1),u=e[l],c=e[l+1];if(r<u)s=a;else{if(!(r>=c)){i=e[l+2],t.advance();continue e}o=a+1}}break}}(this.data,e,t,this.id)}};Kp.prototype.contextual=Kp.prototype.fallback=Kp.prototype.extend=!1;var Zp=class{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}};function Jp(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}var ed,td=typeof process<"u"&&/\bparse\b/.test(process.env.LOG),nd=null;function rd(e,t,n){let r=e.cursor(hs.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(ed||(ed={}));var id;!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(id||(id={}));function od(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}var sd=e=>e,ad=class extends Is{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=ls[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let s=-r;s>0;s--)i(t[n++],e,o);n++}}}this.nodeSet=new ps(t.map(((t,i)=>cs.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=Jp(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=Jp(e.states,Uint32Array),this.data=Jp(e.stateData),this.goto=Jp(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Kp(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new class{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new class{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Qp,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Qp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}(t,r),this.tokens=new class{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new Yp))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],u=this.tokens[r];if((!n||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=o||u.context!=s)&&(this.updateCachedToken(u,l,e),u.mask=o,u.context=s),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),0!=u.value)){let r=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(n=u,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!n&&e.pos==this.stream.end&&(n=new Yp,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Yp,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(i,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(ld(s,a+2),t,n,r));break}a=ld(s,a+2)}s[a]==t&&(r=this.putAction(ld(s,a+1),t,n,r))}return r}}(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[Vp.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?rd(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?rd(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof ms){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(ls.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1)e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this;if(td&&this.stackID(e),null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(r);o;){let r=this.parser.nodeSet.types[o.type.id]==o.type?i.getGoto(e.state,o.type.id):-1;if(r>-1&&o.length&&(!t||(o.prop(ls.contextHash)||0)==n))return e.useNode(o,r),!0;if(!(o instanceof ms)||0==o.children.length||o.positions[0]>0)break;let s=o.children[0];if(!(s instanceof ms&&0==o.positions[0]))break;o=s}}let o=i.stateSlot(e.state,4);if(o>0)return e.reduce(o),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let i=0;i<s.length;){let o=s[i++],a=s[i++],l=s[i++],u=i==s.length||!n,c=u?e:e.split();if(c.apply(o,a,l),u)return!0;c.pos>r?t.push(c):n.push(c)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return od(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)];if(td&&this.stackID(s),s.deadEnd&&(i||(i=!0,s.restart(),this.advanceFully(s,n))))continue;let u=s.split();for(let e=0;u.forceReduce()&&e<10&&!this.advanceFully(u,n);e++)td&&this.stackID(u);for(let e of s.recoverByInsert(a))this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),od(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),ms.build({buffer:Wp.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(nd||(nd=new WeakMap)).get(e);return t||nd.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return ld(n,o+2);break}i=n[o=ld(n,o+2)]}if(i==t||0==i)return ld(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=ld(this.data,n+2)}if(t==ld(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=ld(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}overrides(e,t){let n=ud(this.data,this.tokenPrecTable,t);return n<0||ud(this.data,this.tokenPrecTable,e)<n}configure(e){let t=Object.assign(Object.create(ad.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new class{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}(e,n,r)}static deserialize(e){return new ad(e)}};function ld(e,t){return e[t]|e[t+1]<<16}function ud(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}function cd(e){return 45==e||46==e||58==e||e>=65&&e<=90||95==e||e>=97&&e<=122||e>=161}function hd(e){return 9==e||10==e||13==e||32==e}var pd=null,dd=null,fd=0;function md(e,t){let n=e.pos+t;if(dd==e&&fd==n)return pd;for(;hd(e.peek(t));)t++;let r="";for(;;){let n=e.peek(t);if(!cd(n))break;r+=String.fromCharCode(n),t++}return dd=e,fd=n,pd=r||null}function gd(e,t){this.name=e,this.parent=t,this.hash=t?t.hash:0;for(let t=0;t<e.length;t++)this.hash+=(this.hash<<4)+e.charCodeAt(t)+(e.charCodeAt(t)<<8)}var yd=new class{constructor(e){this.start=e.start,this.shift=e.shift||sd,this.reduce=e.reduce||sd,this.reuse=e.reuse||sd,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:null,shift:(e,t,n,r)=>1==t?new gd(md(r,1)||"",e):e,reduce:(e,t)=>11==t&&e?e.parent:e,reuse(e,t,n,r){let i=t.type.id;return 1==i||13==i?new gd(md(r,1)||"",e):e},hash:e=>e?e.hash:0,strict:!1}),vd=new Zp(((e,t)=>{if(60==e.next)if(e.advance(),47==e.next){e.advance();let n=md(e,0);if(!n)return e.acceptToken(5);if(t.context&&n==t.context.name)return e.acceptToken(2);for(let r=t.context;r;r=r.parent)if(r.name==n)return e.acceptToken(3,-2);e.acceptToken(4)}else if(33!=e.next&&63!=e.next)return e.acceptToken(1)}),{contextual:!0});function wd(e,t){return new Zp((n=>{for(let r=0,i=0;;i++){if(n.next<0){i&&n.acceptToken(e);break}if(n.next==t.charCodeAt(r)){if(r++,r==t.length){i>t.length&&n.acceptToken(e,1-t.length);break}}else r=0;n.advance()}}))}var bd=wd(35,"--\x3e"),xd=wd(36,"?>"),Ad=wd(37,"]]>"),_d=Us({Text:aa.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":aa.angleBracket,TagName:aa.tagName,"MismatchedCloseTag/Tagname":[aa.tagName,aa.invalid],AttributeName:aa.attributeName,AttributeValue:aa.attributeValue,Is:aa.definitionOperator,"EntityReference CharacterReference":aa.character,Comment:aa.blockComment,ProcessingInst:aa.processingInstruction,DoctypeDecl:aa.documentMeta,Cdata:aa.special(aa.string)}),kd=ad.deserialize({version:14,states:",SOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DS'#DSOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C{'#C{O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C|'#C|O$dOrO,59^OOOP,59^,59^OOOS'#C}'#C}O$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6y-E6yOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6z-E6zOOOP1G.x1G.xOOOS-E6{-E6{OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'jO!bO,59eOOOO-E6w-E6wO'xOpO1G.uO'xOpO1G.uOOOP1G.u1G.uO(QOpO7+$fOOOP7+$f7+$fO(YO!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(eO#tO'#CnOOOO1G.q1G.qO(sOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO({O#tO,59YOOOO,59Y,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.t",stateData:")Z~OPQOSVOTWOVWOWWOXWOiXOxPO}TO!PUO~OuZOw]O~O^`Oy^O~OPQOQcOSVOTWOVWOWWOXWOxPO}TO!PUO~ORdO~P!SOseO|gO~OthO!OjO~O^lOy^O~OuZOwoO~O^qOy^O~O[vO`sOdwOy^O~ORyO~P!SO^{Oy^O~OseO|}O~OthO!O!PO~O^!QOy^O~O[!SOy^O~O[!VO`sOd!WOy^O~Oa!YOy^O~Oy^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oy^O~O[!_Oy^O~O[!aOy^O~O[!cO`sOd!dOy^O~O[!cO`sOd!dO~Oa!eOy^O~Oy^Oz!gO~Oy^O[ma`madma~O[!jOy^O~O[!kOy^O~O[!lO`sOd!mO~OW!pOX!pOz!rO{!pO~O[!sOy^O~OW!pOX!pOz!vO{!pO~O",goto:"%[wPPPPPPPPPPxxP!OP!UPP!_!iP!oxxxP!u!{#R$Z$j$p$v$|PPPP%SXWORYbXRORYb_t`qru!T!U!bQ!h!YS!o!e!fR!t!nQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!i!nQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!i!]R!n!eQu`S!UqrU![u!U!bR!b!TQ!q!gR!u!qQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:" StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:47,context:yd,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"]],propSources:[_d],skippedNodes:[0],repeatNodeCount:8,tokenData:"Az~R!WOX$kXY%rYZ%rZ]$k]^%r^p$kpq%rqr$krs&tsv$kvw'Uw}$k}!O(q!O!P$k!P!Q*n!Q![$k![!]+z!]!^$k!^!_/s!_!`=i!`!a>U!a!b>q!b!c$k!c!}+z!}#P$k#P#Q?}#Q#R$k#R#S+z#S#T$k#T#o+z#o%W$k%W%o+z%o%p$k%p&a+z&a&b$k&b1p+z1p4U$k4U4d+z4d4e$k4e$IS+z$IS$I`$k$I`$Ib+z$Ib$Kh$k$Kh%#t+z%#t&/x$k&/x&Et+z&Et&FV$k&FV;'S+z;'S;:j/S;:j?&r$k?&r?Ah+z?Ah?BY$k?BY?Mn+z?Mn~$kX$rUVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$kP%ZRVPOv%Uw!^%U!_~%UW%iR{WOr%dsv%dw~%d_%{]VP{WyUOX$kXY%rYZ%rZ]$k]^%r^p$kpq%rqr$krs%Usv$kw!^$k!^!_%d!_~$kZ&{RzYVPOv%Uw!^%U!_~%U~'XTOp'hqs'hst(Pt!]'h!^~'h~'kTOp'hqs'ht!]'h!]!^'z!^~'h~(POW~~(SROp(]q!](]!^~(]~(`SOp(]q!](]!]!^(l!^~(]~(qOX~Z(xWVP{WOr$krs%Usv$kw}$k}!O)b!O!^$k!^!_%d!_~$kZ)iWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!a*R!a~$kZ*[U|QVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k]*uWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!a+_!a~$k]+hUdSVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k_,V}`S^QVP{WOr$krs%Usv$kw}$k}!O+z!O!P+z!P!Q$k!Q![+z![!]+z!]!^$k!^!_%d!_!c$k!c!}+z!}#R$k#R#S+z#S#T$k#T#o+z#o$}$k$}%O+z%O%W$k%W%o+z%o%p$k%p&a+z&a&b$k&b1p+z1p4U+z4U4d+z4d4e$k4e$IS+z$IS$I`$k$I`$Ib+z$Ib$Je$k$Je$Jg+z$Jg$Kh$k$Kh%#t+z%#t&/x$k&/x&Et+z&Et&FV$k&FV;'S+z;'S;:j/S;:j?&r$k?&r?Ah+z?Ah?BY$k?BY?Mn+z?Mn~$k_/ZWVP{WOr$krs%Usv$kw!^$k!^!_%d!_;=`$k;=`<%l+z<%l~$kX/xU{WOq%dqr0[sv%dw!a%d!a!b=X!b~%dX0aZ{WOr%dsv%dw}%d}!O1S!O!f%d!f!g1x!g!}%d!}#O5s#O#W%d#W#X:k#X~%dX1XT{WOr%dsv%dw}%d}!O1h!O~%dX1oR}P{WOr%dsv%dw~%dX1}T{WOr%dsv%dw!q%d!q!r2^!r~%dX2cT{WOr%dsv%dw!e%d!e!f2r!f~%dX2wT{WOr%dsv%dw!v%d!v!w3W!w~%dX3]T{WOr%dsv%dw!{%d!{!|3l!|~%dX3qT{WOr%dsv%dw!r%d!r!s4Q!s~%dX4VT{WOr%dsv%dw!g%d!g!h4f!h~%dX4kV{WOr4frs5Qsv4fvw5Qw!`4f!`!a5c!a~4fP5TRO!`5Q!`!a5^!a~5QP5cOiPX5jRiP{WOr%dsv%dw~%dX5xV{WOr%dsv%dw!e%d!e!f6_!f#V%d#V#W8w#W~%dX6dT{WOr%dsv%dw!f%d!f!g6s!g~%dX6xT{WOr%dsv%dw!c%d!c!d7X!d~%dX7^T{WOr%dsv%dw!v%d!v!w7m!w~%dX7rT{WOr%dsv%dw!c%d!c!d8R!d~%dX8WT{WOr%dsv%dw!}%d!}#O8g#O~%dX8nR{WxPOr%dsv%dw~%dX8|T{WOr%dsv%dw#W%d#W#X9]#X~%dX9bT{WOr%dsv%dw#T%d#T#U9q#U~%dX9vT{WOr%dsv%dw#h%d#h#i:V#i~%dX:[T{WOr%dsv%dw#T%d#T#U8R#U~%dX:pT{WOr%dsv%dw#c%d#c#d;P#d~%dX;UT{WOr%dsv%dw#V%d#V#W;e#W~%dX;jT{WOr%dsv%dw#h%d#h#i;y#i~%dX<OT{WOr%dsv%dw#m%d#m#n<_#n~%dX<dT{WOr%dsv%dw#d%d#d#e<s#e~%dX<xT{WOr%dsv%dw#X%d#X#Y4f#Y~%dX=`R!PP{WOr%dsv%dw~%dZ=rUaQVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k_>_U[UVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$kZ>xWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!a?b!a~$kZ?kU!OQVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$kZ@UWVP{WOr$krs%Usv$kw!^$k!^!_%d!_#P$k#P#Q@n#Q~$kZ@uWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!aA_!a~$kZAhUwQVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k",tokenizers:[vd,bd,xd,Ad,0,1,2,3],topRules:{Document:[0,6]},tokenPrec:0});function Ed(e,t){let n=t&&t.getChild("TagName");return n?e.sliceString(n.from,n.to):""}function Cd(e,t){let n=t&&t.firstChild;return n&&"OpenTag"==n.name?Ed(e,n):""}function Sd(e){for(let t=e&&e.parent;t;t=t.parent)if("Element"==t.name)return t;return null}var Od=class{constructor(e,t,n){this.attrs=t,this.attrValues=n,this.children=[],this.name=e.name,this.completion=Object.assign(Object.assign({type:"type"},e.completion||{}),{label:this.name}),this.openCompletion=Object.assign(Object.assign({},this.completion),{label:"<"+this.name}),this.closeCompletion=Object.assign(Object.assign({},this.completion),{label:"</"+this.name+">",boost:2}),this.closeNameCompletion=Object.assign(Object.assign({},this.completion),{label:this.name+">"}),this.text=e.textContent?e.textContent.map((e=>({label:e,type:"text"}))):[]}},Td=/^[:\-\.\w\u00b7-\uffff]*$/;function Nd(e){return Object.assign(Object.assign({type:"property"},e.completion||{}),{label:e.name})}function Bd(e){return"string"==typeof e?{label:`"${e}"`,type:"constant"}:/^"/.test(e.label)?e:Object.assign(Object.assign({},e),{label:`"${e.label}"`})}function Id(e,t){let n=[],r=[],i=Object.create(null);for(let e of t){let t=Nd(e);n.push(t),e.global&&r.push(t),e.values&&(i[e.name]=e.values.map(Bd))}let o=[],s=[],a=Object.create(null);for(let t of e){let e=r,l=i;t.attributes&&(e=e.concat(t.attributes.map((e=>"string"==typeof e?n.find((t=>t.label==e))||{label:e,type:"property"}:(e.values&&(l==i&&(l=Object.create(l)),l[e.name]=e.values.map(Bd)),Nd(e))))));let u=new Od(t,e,l);a[u.name]=u,o.push(u),t.top&&s.push(u)}s.length||(s=o);for(let t=0;t<o.length;t++){let n=e[t],r=o[t];if(n.children)for(let e of n.children)a[e]&&r.children.push(a[e]);else r.children=o}return e=>{var t;let{doc:n}=e.state,l=function(e,t){var n;let r=da(e).resolveInner(t,-1),i=null;for(let e=r;!i&&e.parent;e=e.parent)("OpenTag"==e.name||"CloseTag"==e.name||"SelfClosingTag"==e.name||"MismatchedCloseTag"==e.name)&&(i=e);if(i&&(i.to>t||i.lastChild.type.isError)){let e=i.parent;if("TagName"==r.name)return"CloseTag"==i.name||"MismatchedCloseTag"==i.name?{type:"closeTag",from:r.from,context:e}:{type:"openTag",from:r.from,context:Sd(e)};if("AttributeName"==r.name)return{type:"attrName",from:r.from,context:i};if("AttributeValue"==r.name)return{type:"attrValue",from:r.from,context:i};let n=r==i||"Attribute"==r.name?r.childBefore(t):r;return"StartTag"==n?.name?{type:"openTag",from:t,context:Sd(e)}:"StartCloseTag"==n?.name&&n.to<=t?{type:"closeTag",from:t,context:e}:"Is"==n?.name?{type:"attrValue",from:t,context:i}:n?{type:"attrName",from:t,context:i}:null}if("StartCloseTag"==r.name)return{type:"closeTag",from:t,context:r.parent};for(;r.parent&&r.to==t&&(null===(n=r.lastChild)||void 0===n||!n.type.isError);)r=r.parent;return"Element"==r.name||"Text"==r.name||"Document"==r.name?{type:"tag",from:t,context:"Element"==r.name?r:Sd(r)}:null}(e.state,e.pos);if(!l||"tag"==l.type&&!e.explicit)return null;let{type:u,from:c,context:h}=l;if("openTag"==u){let e=s,t=Cd(n,h);if(t){e=a[t]?.children||o}return{from:c,options:e.map((e=>e.completion)),validFor:Td}}if("closeTag"==u){let r=Cd(n,h);return r?{from:c,to:e.pos+(">"==n.sliceString(e.pos,e.pos+1)?1:0),options:[(null===(t=a[r])||void 0===t?void 0:t.closeNameCompletion)||{label:r+">",type:"type"}],validFor:Td}:null}if("attrName"==u){return{from:c,options:a[Ed(n,h)]?.attrs||r,validFor:Td}}if("attrValue"==u){let t=function(e,t,n){let r=t&&t.getChildren("Attribute").find((e=>e.from<=n&&e.to>=n)),i=r&&r.getChild("AttributeName");return i?e.sliceString(i.from,i.to):""}(n,h,c);if(!t)return null;let r=(a[Ed(n,h)]?.attrValues||i)[t];return r&&r.length?{from:c,to:e.pos+('"'==n.sliceString(e.pos,e.pos+1)?1:0),options:r,validFor:/^"[^"]*"?$/}:null}if("tag"==u){let t=Cd(n,h),r=a[t],i=[],l=h&&h.lastChild;t&&(!l||"CloseTag"!=l.name||Ed(n,l)!=t)&&i.push(r?r.closeCompletion:{label:"</"+t+">",type:"type",boost:2});let u=i.concat((r?.children||(h?o:s)).map((e=>e.openCompletion)));if(h&&r?.text.length){let t=h.firstChild;t.to>e.pos-20&&!/\S/.test(e.state.sliceDoc(t.to,e.pos))&&(u=u.concat(r.text))}return{from:c,options:u,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}return null}}var Pd=pa.define({parser:kd.configure({props:[Ta.add({Element(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit}),Ra.add({Element(e){let t=e.firstChild,n=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==n.name?n.from:e.to}:null}})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/$/}});var Md=(e=>(e.xml="xml",e.leiden_plus="leiden_plus",e.edcs="edcs",e.phi="phi",e.default="default",e))(Md||{}),Dd=(e,t)=>n=>(n.dispatch(n.state.changeByRange((n=>({changes:[{from:n.from,insert:e},{from:n.to,insert:t}],range:L.range(n.from+e.length,n.to+e.length)})))),!0),Rd=e=>t=>(e=e.replace(/\$\|([^|]+)\|/g,"${$1}"),t.state.selection.ranges.forEach((n=>{let r=t.state.doc.slice(n.from,n.to);!function(e){let t=Ih.parse(e);return(e,n,r,i)=>{let{text:o,ranges:s}=t.instantiate(e.state,r),l={changes:{from:r,to:i,insert:a.of(o)}};if(s.length&&(l.selection=Uh(s,0)),s.length>1){let t=new Dh(s,0),n=l.effects=[Rh.of(t)];void 0===e.state.field(Lh,!1)&&n.push(ye.appendConfig.of([Lh,jh,zh,Th]))}e.dispatch(e.state.update(l))}}(e.replace(/\${_}/,`\${${r.toString()}}`))(t,{label:""},n.from,n.to)})),!0),Fd=class{constructor(e){this.editor=e}getConfig(){let e=this,t=Dn.fromClass(class{update(t){if(t.docChanged){let n=da(t.state),r=t.state.doc.toJSON(),i=e.onUpdate(n,r.join("\n"));try{let t=e.serialize();if(!t)return;e.editor._value=t,e.editor.emitUpdateEvent(i)}catch(e){return}}else{let n=t.transactions[0];if(n){let t=n.effects.filter((e=>e.is(fp)));if(t){let n=t.reduce(((e,t)=>{let n=t.value.filter((e=>"error"===e.severity)),r=t.value.filter((e=>"info"===e.severity));if(n.length){e.valid=!1;for(let t of n)e.errors.push(null==t?void 0:t.message)}return r.length&&!e.errors.length&&(e.valid=!0),e}),{valid:e.editor.valid,errors:[]});if(e.editor.valid=n.valid,n.valid)return void e.editor.dispatchEvent(new CustomEvent("valid",{composed:!0,bubbles:!0}));e.editor.dispatchEvent(new CustomEvent("invalid",{detail:n.errors,composed:!0,bubbles:!0}))}}}}}),n=this.getExtensions(this.editor);return{extensions:[zp,Bi.lineWrapping,Ui.of([Ju]),...n,t]}}getCommands(){return{}}onUpdate(e,t){return t}},Ld=ye.define(),Ud=Y.define({create:()=>!1,update(e,t){for(let n of t.effects)n.is(Ld)&&(e=n.value);return e},provide:e=>Lo.from(e,(e=>e?$d:null))});function $d(e){let t=document.createElement("div");t.className="cm-input-panel";let n=document.createElement("input");return n.type="text",n.placeholder="Name of element (enter to confirm, esc to abort)",n.addEventListener("keyup",(t=>{switch(t.key){case"Enter":t.preventDefault();let r=n.value;""!==r&&(Dd(`<${r}>`,`</${r}>`)(e),e.focus());case"Esc":case"Escape":e.dispatch({effects:Ld.of(!1)})}})),t.appendChild(n),{top:!1,dom:t,mount:()=>n.focus()}}var Hd=Bi.baseTheme({".cm-input-panel":{padding:"5px 10px",fontFamily:"monospace"},".cm-input-panel input":{width:"100%"}});var Gd={selectElement:e=>(e.dispatch(e.state.changeByRange((t=>{let n=null;for(let r=da(e.state).resolveInner(t.from);!n&&r.parent;r=r.parent)"Element"==r.name&&(n=r);return n?{selection:L.range(n.from,n.to),range:L.range(n.from,n.to)}:{range:t}}))),!0),removeEnclosing:e=>(e.dispatch(e.state.changeByRange((t=>{let n=null;for(let r=da(e.state).resolveInner(t.from);!n&&r.parent;r=r.parent)"Element"==r.name&&(n=r);if(n){let e=n.firstChild,t=n.lastChild;if(e&&t)return"SelfClosingTag"===e.name?{range:L.range(e.from,e.from),changes:[{from:e.from,to:e.to,insert:""}]}:{range:L.range(e.from,t.from-(e.to-e.from)),changes:[{from:e.from,to:e.to,insert:""},{from:t.from,to:t.to,insert:""}]}}return{range:t}}))),!0),encloseWith:e=>(e.dispatch({effects:Ld.of(!e.state.field(Ud))}),!0),snippet:{create:e=>Rd(e)}},jd=e=>e.filter((e=>"info"!==e.severity)),zd=e=>({name:"Fix",apply:(t,n,r)=>{let i=t.state.update({changes:{from:n,to:r,insert:e}});t.dispatch(i)}}),Vd=e=>t=>{let n=[];if(0===t.state.doc.length)return n;let r=da(t.state),i=!1,o=[];return r.iterate({enter:r=>{if(r.type.isError&&n.push({message:"Syntax error",severity:"error",from:r.from,to:r.to}),"StartTag"===r.type.name)r.nextSibling(),o.push(t.state.sliceDoc(r.from,r.to));else if("StartCloseTag"===r.type.name){r.nextSibling();let e=t.state.sliceDoc(r.from,r.to),i=o.pop();e!==i&&n.push({message:`Expected closing tag for ${i}`,severity:"error",from:r.from,to:r.to})}else if("SelfCloseEndTag"===r.type.name)o.pop();else if(((e,t)=>"AttributeName"===t.type.name&&"xmlns"===e.state.sliceDoc(t.from,t.to))(t,r)){i=!0,r.nextSibling(),r.nextSibling();let o=t.state.sliceDoc(r.from+1,r.to-1);e&&o!==e&&n.push({message:"Wrong Namespace",severity:"error",from:r.from+1,to:r.to-1,actions:[zd(e)]})}else((e,t)=>"Comment"===t.type.name&&/\<\!\-\- Error\:([^ ])* \-\-\>/.test(e.state.sliceDoc(t.from,t.to)))(t,r)&&n.push({message:"Syntax error in source input",severity:"warning",from:r.from,to:r.to})},leave:t=>{"Document"===t.type.name&&e&&!i&&n.push({message:"Missing TEI namespace",severity:"error",from:t.from,to:t.to}),"Document"===t.type.name&&!n.length&&n.push({message:"All fine",severity:"info",from:t.from,to:t.to}),t.type.isError&&n.push({message:"Syntaxfehler",severity:"error",from:t.from,to:t.to})}}),n},Xd=[{key:"Ctrl-Shift-s",mac:"Cmd-Shift-s",run:Gd.selectElement},{key:"Ctrl-Shift-x",mac:"Cmd-Shift-x",run:Gd.removeEnclosing},{key:"Ctrl-Shift-e",mac:"Cmd-Shift-e",run:Gd.encloseWith}],qd=class extends Fd{constructor(e,t=null,n=!1,r=!1){super(e),this.namespace=t,this.checkNamespace=n,this.unwrap=r}getDefaultExtensions(){return[[Ud,Hd],Ui.of(Xd),Ep(Vd(this.checkNamespace?this.namespace:null),{delay:300,markerFilter:jd}),Gp({markerFilter:jd})]}getExtensions(){return this.getDefaultExtensions().concat(function(e={}){return new Aa(Pd,Pd.data.of({autocomplete:Id(e.elements||[],e.attributes||[])}))}())}getCommands(){return Gd}loadSchema(e){return((e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})))(this,null,(function*(){return yield fetch(e).then((e=>e.json()))}))}serialize(){var e;let t=new DOMParser,n=this.unwrap?`<R xmlns="${this.namespace||""}">${this.editor.content}</R>`:this.editor.content,r=t.parseFromString(n,"application/xml");return r.getElementsByTagName("parsererror").length?null:this.unwrap?null==(e=r.firstElementChild)?void 0:e.childNodes:r.firstElementChild}setFromValue(e){if(!e||!(e instanceof Element||e instanceof NodeList))return"";let t=new XMLSerializer;if(e instanceof NodeList){let n=[];for(let r=0;r<e.length;r++)n.push(t.serializeToString(e[r]));return n.join("")}return t.serializeToString(e)}},Wd="() <>?=.0123456789[]",Yd=new Zp((e=>{let t="";for(;!(e.next<0);){if(46===e.next&&"lost"===t)return e.advance(),void e.acceptToken(31);let n=String.fromCharCode(e.next);if(Wd.indexOf(n)>-1||803===e.peek(1))break;t+=n,e.advance()}t.length>0&&e.acceptToken(30)})),Qd=new Zp((e=>{let t=0;for(;!(e.next<0||Wd.indexOf(String.fromCharCode(e.next))>-1)&&803===e.peek(1);)t++,e.advance(2);t>0&&e.acceptToken(1)})),Kd=ad.deserialize({version:14,states:"(QOQOVOOOQOVO'#C_OQOVO'#C`OQOVO'#CaO!eOWO'#CbO!pOVO'#ClO#wOVO'#CmOOOR'#Co'#CoO$ROSO'#CpO!pOVO'#CqOOOR'#DX'#DXOOOR'#Cr'#CrO$WOSO'#CtO!pOVO'#CvOOOR'#Ch'#ChOOOR'#C|'#C|OOOR'#Cw'#CwQQOVOOO$`OVO,58yO$gOVO,58zO$nOVO,58{OQOVO,58|OQOVO,59OOQOVO,59QOOOR'#Cx'#CxO$uOVO,59WO$|OVO,59XOOOR,59X,59XO%WOSO,59XO%]OSO,59[O%bOVO,59]O%lOSO,59`O%qOVO,59bOOOR-E6u-E6uOOOR1G.e1G.eOOOR1G.f1G.fOOOR1G.g1G.gO%xOVO1G.hO&POVO1G.jO&WOVO1G.lOOOR-E6v-E6vOOOR1G.r1G.rOOOR1G.s1G.sO&_OSO1G.sOOOR1G.v1G.vOOOR1G.w1G.wO&dOSO1G.wOOOR1G.z1G.zOOOR1G.|1G.|OOOR7+$S7+$SOOOR7+$U7+$UOOOR7+$W7+$WOOOR7+$_7+$_OOOR7+$c7+$c",stateData:"&n~OP^O]^O^^O_^OgZOi^OnZOo[OqPOsQOuROvSOwTOyUO|VO}WO!PXO!QZO!RZO!SZO!U]O~OVeOXfOZgO~OP^O]^O^^O_^OgZOi^OnZOo[OwTOyUO|VO}WO!PXO!QZO!RZO!SZO!U]O~OblOzkO~P!pO_mO~O_oOgoO~OrrO~PQOtsO~PQOttO~PQOxyO~P!pOb{OzzO~P!pOzzO~O!O|O~Ob!OO!O}O~P!pO!T!PO~O!V!QO~P!pOt!RO~PQOt!SO~PQOt!TO~PQOz!UO~O!O!VO~OZ^_Z~",goto:"%_|PPP}}}}P}P}P!_PPP!y!yP#c#c#c!yP!yP!y#{$kPPP$}PPPPPPPPPP!ym_OPQRabcdefguvwl_OPQRabcdefguvwahTUX]ijnp}^OPQRTUX]abcdefgijnpuvw}YOPQRTUX]abcdefgijnpuvwQaOQbPQcQQdR^qabcduvwQueQvfRwgQiTQjUQnXQp]Xxijnpm`OPQRabcdefguvw",nodeNames:" Unclear Document Div Recto Verso Part PartId Fragment FragmentNum Column ColumnNum Inline LineBreakWrapped LineBreak Number Abbrev Supplied CertLow GapUnknown Gap SuppliedLost Text QuestionMark LostLines Illegible Erasure",maxTerm:53,skippedNodes:[0],repeatNodeCount:2,tokenData:"+y~Rapq!Wxy!]yz!p!O!P!u!Q![#v!^!_'v!_!`(y!`!a)f!a!b)k!c!}'^!}#O)p#P#Q*]#T#`'^#`#a*b#a#o'^&Fp&Fq+o&Fq&Fr+t~!]O!R~~!bPw~!a!b!e~!hPyz!k~!pOb~~!uOx~~!zQ!Q~!Q![#Q!a!b#n~#VQi~!Q![#Q#`#a#]~#`P#]#^#c~#fP#b#c#i~#nOi~~#sPi~#`#a#]~#{S_P!O!P$X!Q![#v!c!}'^#T#o'^~$^T^Ppq$m}!O$r#V#W%P#Y#Z%t#d#e&uP$rO^P~$wP]~pq$z~%PO]~Q%SP#c#d%VQ%YP#`#a%]Q%`P#i#j%cQ%fP#a#b%iQ%lP#b#c%oQ%tOZQ~%wP#f#g%z~%}P#T#U&Q~&TP#Z#[&W~&ZP#a#b&^~&aP#X#Y&d~&gP#b#c&j~&mP#h#i&p~&uOX~Q&xP#T#U&{Q'OP#f#g'RQ'UP#h#i'XQ'^OVQQ'aS!O!P'm!Q!['^!c!}'^#T#o'^Q'pQ#V#W%P#d#e&u~'{Qy~!_!`(R!f!g(W~(WOq~~(ZP!_!`(^~(aP!O!P(d~(iQv~#f#g(o#j#k(t~(tOs~~(yOu~~)OQ!S~!`!a)U!f!g)Z~)ZOr~~)^P!`!a)a~)fOt~~)kOz~~)pOg~~)uP!P~!O!P)x~)}P}~!a!b*Q~*TP#P#Q*W~*]O|~~*bO!O~R*eU!O!P'm!Q!['^!c!}'^#T#]'^#]#^*w#^#o'^R*zU!O!P'm!Q!['^!c!}'^#T#b'^#b#c+^#c#o'^R+cS!TP!O!P'm!Q!['^!c!}'^#T#o'^~+tO!U~~+yO!V~",tokenizers:[Yd,Qd,0,1],topRules:{Document:[0,2]},tokenPrec:255}),Zd=["Recto","Verso","Fragment","Part","Div"];var Jd=pa.define({parser:Kd.configure({props:[Us({Number:aa.number,"LineBreak LineBreakWrapped":aa.contentSeparator,"Illegible GapUnknown Gap SuppliedLost Supplied Unclear":aa.comment,"Div Recto Verso Part Fragment":aa.keyword,"( )":aa.paren})]}),languageData:{closeBrackets:{brackets:["(","[","{","<"]}}});function ef(e,t){for(let n=0;n<e.childNodes.length;n++)tf(e.childNodes[n],t)}function tf(e,t){if(e)switch(e.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:tf(e.firstElementChild,t);break;case Node.ELEMENT_NODE:let n,r=e;switch(r.localName){case"ab":t.push("<="),ef(r,t),t.push("=>");break;case"abbr":ef(r,t);break;case"del":t.push(""),ef(r,t),t.push("");break;case"div":n=r.getAttribute("n"),t.push(`<D=.${n}.column`),ef(r,t),t.push("=D>");break;case"expan":case"ex":let e=r.getAttribute("cert");t.push("("),ef(r,t),"low"===e&&t.push("?"),t.push(")");break;case"gap":!function(e,t){let n=e.getAttribute("unit"),r=e.getAttribute("quantity"),i=e.getAttribute("reason");if(i)switch(i){case"lost":switch(n){case"character":r?t.push(`[.${r}]`):t.push("[.?]");break;case"line":r?t.push(`lost.${r}lin`):t.push("lost.?lin")}break;case"illegible":switch(n){case"character":r?t.push(`.${r}`):t.push(".?");break;case"line":r&&t.push(`.${r}lin`)}}}(r,t);break;case"lb":n=r.getAttribute("n"),t.length>0&&!/\n+$/.test(t[t.length-1])&&t.push("\n"),t.push(`${n}. `);break;case"supplied":!function(e,t){let n=e.getAttribute("reason");if(n){let r=e.getAttribute("cert");if("omitted"===n)t.push("<"),ef(e,t),r&&"low"===r&&t.push("(?)"),t.push(">");else t.push("["),ef(e,t),r&&"low"===r&&t.push("(?)"),t.push("]")}}(r,t)}break;case Node.TEXT_NODE:t.push(e.nodeValue||"")}}function nf(e){if(!(e instanceof Element))return"";let t=[],n=e.querySelectorAll("cb");if(n.length>0)for(let r=0;r<=n.length;r++){let i=document.createRange();0===r?i.setStart(e,0):i.setStartAfter(n[r-1]),r===n.length?e.lastChild&&i.setEndAfter(e.lastChild):i.setEndBefore(n[r]);let o=document.createElement("div");o.setAttribute("type","textpart"),o.setAttribute("subtype","column"),o.setAttribute("n",(r+1).toString()),i.surroundContents(o),tf(o,t)}else tf(e,t);return t.join("")}var rf={expan:Rd("(${_}(${}))"),div:Dd("<=\n","\n=>"),fragment:Rd("<D=.${1:1}.fragment<=\n${2}\n=>=D>"),part:Rd("<D=.${1:A}.part<=\n${2}\n=>=D>"),recto:Dd("<D=.r<=\n","\n=>=D>"),verso:Dd("<D=.v<=\n","\n=>=D>"),erasure:Dd("",""),unclear:e=>(e.dispatch(e.state.changeByRange((t=>{let n=e.state.doc.slice(t.from,t.to).toString(),r="";for(let e=0;e<n.length;e++)e+1<n.length&&803===n.charCodeAt(e+1)?(r+=n.charAt(e),e++):r+=`${n.charAt(e)}`;return{changes:[{from:t.from,to:t.to,insert:r}],range:L.range(t.from,t.from+r.length)}}))),!0)},of=[{key:"Ctrl-Shift-e",mac:"Cmd-Shift-e",run:rf.expan},{key:"Ctrl-Shift-a",mac:"Cmd-Shift-a",run:rf.div},{key:"Ctrl-Shift-f",mac:"Cmd-Shift-f",run:rf.fragment},{key:"Ctrl-Shift-p",mac:"Cmd-Shift-p",run:rf.part},{key:"Ctrl-Shift-r",mac:"Cmd-Shift-r",run:rf.recto},{key:"Ctrl-Shift-v",mac:"Cmd-Shift-v",run:rf.verso},{key:"Ctrl-Shift-d",mac:"Cmd-Shift-d",run:rf.erasure},{key:"Ctrl-Shift-u",mac:"Cmd-Shift-u",run:rf.unclear}],sf=class extends Fd{getExtensions(){return[new Aa(Jd),Ep((e=>{let t=[];return da(e.state).iterate({enter:e=>{e.type.isError&&t.push({message:"Syntaxfehler",severity:"error",from:e.from,to:e.to})}}),t})),Ui.of(of),Gp()]}getCommands(){return rf}onUpdate(e,t){return function(e,t=Kd.parse(e)){function n(t){return e.substring(t.from,t.to)}let r,i=[],o=[],s=!1,a="ab";return t.iterate({enter:e=>{if(e.type.isError)return void o.push(`\x3c!-- Error:${n(e)} --\x3e`);let t=e.name;switch(t){case"Document":let l=0;if(e.firstChild())do{l++,Zd.includes(e.type.name)&&(a="div"),s=s||"Inline"===e.type.name}while(e.nextSibling());s=l>1||s,s&&o.push(`<${a}>\n`),e.parent();break;case"Text":case"Number":o.push(n(e));break;case"LineBreak":e.firstChild(),r=/^([0-9]+)\..*$/.exec(n(e)),o.push(`<lb n="${r?r[1]:""}"/>`);break;case"LineBreakWrapped":e.firstChild(),r=/^([0-9]+)\..*$/.exec(n(e)),o.push(`<lb n="${r?r[1]:""}" break="no"/>`);break;case"Div":o.push("<ab>");break;case"Recto":case"Verso":o.push('<div n="r" type="textpart">');break;case"Fragment":e.firstChild(),r=/^([0-9]+)\..*$/.exec(n(e)),o.push(`<div n="${r?r[1]:""}" subtype="fragment" type="textpart">`);break;case"Part":e.firstChild(),r=/^([a-zA-Z0-9]+)\..*$/.exec(n(e)),o.push(`<div n="${r?r[1]:""}" subtype="part" type="textpart">`);break;case"Column":e.firstChild(),r=/^([a-zA-Z0-9]+)\..*$/.exec(n(e)),o.push(`<div n="${r?r[1]:""}" subtype="column" type="textpart">`);break;case"Unclear":let u=n(e),c="";for(let e=0;e<u.length;e++){let t=u.codePointAt(e);t&&803!==t&&(c+=String.fromCodePoint(t))}return o.push(`<unclear>${c}</unclear>`),!1;case"Gap":return e.next(!0),o.push(`<gap reason="lost" quantity="${n(e)}" unit="character"/>`),!1;case"GapUnknown":return o.push('<gap reason="lost" extent="unknown" unit="character"/>'),!1;case"Illegible":return r=/^\.([0-9?]+)(lin)?$/.exec(n(e)),r&&("lin"===r[2]?o.push(`<gap reason="illegible" quantity="${r?r[1]:""}" unit="line"/>`):"?"===r[1]?o.push('<gap reason="illegible" extent="unkown" unit="character"/>'):o.push(`<gap reason="illegible" quantity="${r?r[1]:""}" unit="character"/>`)),!1;case"Erasure":o.push('<del rend="erasure">');break;case"LostLines":return r=/^lost\.([0-9?]+)lin$/.exec(n(e)),r&&("?"===r[1]?o.push('<gap reason="lost" extent="unknown" unit="line"/>'):o.push(`<gap reason="lost" quantity="${r?r[1]:""}" unit="line"/>`)),!1;case"Abbrev":i.length>0?(e.lastChild(),r=n(e),r.length>0&&"?"===r.charAt(r.length-1)?o.push('<ex cert="low">'):o.push("<ex>"),e.parent()):o.push("<expan>"),i.push("expan");break;case"Supplied":e.lastChild(),"CertLow"===e.name?o.push('<supplied reason="omitted" cert="low">'):o.push('<supplied reason="omitted">'),e.parent();break;case"SuppliedLost":e.lastChild(),"CertLow"===e.name?o.push('<supplied reason="lost" cert="low">'):o.push('<supplied reason="lost">'),e.parent();break;case"CertLow":return!1;case"QuestionMark":return i.length<2&&o.push("?"),!1;case"Inline":break;default:o.push(`<${t}>`)}},leave:e=>{switch(e.name){case"Document":s&&o.push(`\n</${a}>`);break;case"Abbrev":if(i.length>1){let e=o[o.length-1];e.endsWith("?")&&(o[o.length-1]=e.substring(0,e.length-2)),o.push("</ex>")}else o.push("</expan>");i.pop();break;case"Div":o.push("</ab>");break;case"Recto":case"Verso":case"Fragment":case"Part":case"Column":o.push("</div>\n");break;case"Supplied":case"SuppliedLost":o.push("</supplied>");break;case"Erasure":o.push("</del>")}}}),"Inline"===t.type.name&&o.push("</ab>"),o.join("")}(t,e)}serialize(){return this.editor.content}setFromValue(e){if(!e)return"";if(e instanceof NodeList){let t=[];return e.forEach((e=>t.push(nf(e)))),t.join("")}if(e instanceof Element)return nf(e);if("string"!=typeof e)throw new Error("cannot set value");return e}};function af(e,t){(e=(e=e.toString().replace(/\t+/g,"")).replace(/\r/g,"")).toString().length-e.toString().lastIndexOf(" ")==1&&(e=e.toString().substring(0,e.toString().lastIndexOf(" ")));{e='<lb n="'+1..toString()+'"/>'+e;let n=/(\-|-?|\=?)\s?\n/g,r=0;if(e=e.replace(n,(function(e,t){return"-"===t||"="===t?'\n<lb n="'+(2+r++)+'" break="no"/>':'\n<lb n="'+(2+r++)+'"/>'})),e=e.replace(/(\<lb n=\"[0-9]*\"\/\>)\[(\s?\s?){3,50}\]\n(\<lb n=\"[0-9]*\"\/\>)/g,'$1<gap reason="illegible" quantity="1" unit="line"/>\n$3'),"edcs"==t){r=0,e=e.replace(/(\s)?(\/\/)(?!\>)(\s)?/g,(function(e){if("/"===e[0])var t=' break="no"';else t="";return'\n<cb n="'+(2+r++)+'"'+t+"/>"}));let t=/(\s)?(\/{1})(?!\>)(\s)?/g;r=0,e=e.replace(t,(function(e){if("/"===e[0])var t=' break="no"';else t="";return'\n<lb n="'+(2+r++)+'"'+t+"/>"}))}"phi"==t&&(e=(e=(e=e.replace(/#/g,'<gap reason="illegible" quantity="1" unit="character"/>')).replace(/###/g,'<gap reason="illegible" quantity="3" unit="character"/>')).replace(/#/g,'<g type="interpunct"></g>'));let i=/\n<lb n=\'([0-9])\'\/>\1\s/g,o='\n<lb n="$1"/>';e=e.replace(i,o);let s=/(\"[0-9]{1,3}\"\/>)([0-9]{1,3})/g,a="$1";e=e.replace(s,a)}if(e=(e=e.replace(/\<([^\x00-\x7F]*[aA-zZ]*)(?!\=)(?!\/)\>/g,'<supplied reason="omitted">$1</supplied>')).replace(/([^\x00-\x7F]*[aA-zZ]*)(?!\=)(?!\/)/g,'<supplied reason="omitted">$1</supplied>'),"edcs"==t){let t=/\<([^\x00-\x7F]*[aA-zZ]*)(\=)([^\x00-\x7F]*[aA-zZ]*)(?!\/)\>/g,n="<choice><corr>$1</corr><sic>$3</sic></choice>";e=e.replace(t,n),e=(e=(e=(e=(e=(e=(e=e.replace(/\[6\]/g,'<gap reason="lost" quantity="1" unit="line"/>')).replace(/\[3\]/g,'<gap reason="lost" extent="unknown" unit="character"/>')).replace(/\[3\s([^\x00-\x7F]*[aA-zZ]*)\]/g,'<gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">$1</supplied>')).replace(/\[3\s/g,'<gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">')).replace(/\s3\s/g," - - - ")).replace(/\s3\]/g," - - -]")).replace(/a\(\)/g,"<abbr>a</abbr>")}let n=/\[(\|\-)\s?(\|\-)\s?(\|\-)\]/g;e=(e=(e=e.replace(/\(\!\)/g,"<note>!</note>")).replace(/\(sic\)/g,"<note>sic</note>")).replace(n,(function(e,t){return'<gap reason="lost" extent="unknown" unit="character"/>'})),n=/\[(?:(?:\s?\.\s?){1,99})([1-9][0-9]*)(?:(?:\s?\.\s?){1,99})\]/g,e=e.replace(n,(function(e,t){return'<gap reason="lost" quantity="'+t+'" unit="character"/>'})),n=/\[(?:(?:\s?\.\s?){1,99})([1-9][0-9]*)(?:(?:\s?\.\s?){1,99})\s/g,e=e.replace(n,(function(e,t){return e.length,'<gap reason="lost" quantity="'+t+'" unit="character"/><supplied reason="lost">'})),n=/\s(?:(?:\s?\.\s?){1,99})([1-9][0-9]*)(?:(?:\s?\.\s?){1,99})\]/g,e=e.replace(n,(function(e,t){return e.length,'</supplied><gap reason="lost" quantity="'+t+'" unit="character"/>'})),n=/\s(?:(?:\s?\.\s?){1,99})([1-9][0-9]*)(?:(?:\s?\.\s?){1,99})\s/g,e=e.replace(n,(function(e,t){return e.length,'</supplied><gap reason="lost" quantity="'+t+'" unit="character"/><supplied reason="lost">'})),n=/\[((\.){1,99})\]/g,e=e.replace(n,(function(e,t){return'<gap reason="lost" quantity="'+(e.length-2)+'" unit="character"/>'})),n=/\[((\.){1,99})\s/g,e=e.replace(n,(function(e,t){return'<gap reason="lost" quantity="'+(e.length-2)+'" unit="character"/><supplied reason="lost">'})),n=/\s((\.){1,99})\]/g,e=e.replace(n,(function(e,t){return'</supplied><gap reason="lost" quantity="'+(e.length-2)+'" unit="character"/>'})),n=/\s((\.){1,99})\s/g,e=e.replace(n,(function(e,t){return'</supplied><gap reason="lost" quantity="'+(e.length-2)+'" unit="character"/><supplied reason="lost">'})),n=/([^\x00-\x7F]*[aA-zZ]*)\[([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)(\])/g;let r='<expan><abbr>$1<supplied reason="lost">$2</supplied></abbr><ex>$3</ex></expan>';e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\[(-||\.\s?){1,20}ca\.(\s?)([1-9][0-9]*)((-)([1-9][0-9]*))(\s?)(-||\.\s?){1,20}\]/g,'<gap reason="lost" atLeast="$3" atMost="$6" unit="character"/>')).replace(/\[(-||\.\s?){1,20}ca\.(\s?)([1-9][0-9]*)(\s?)(-||\.\s?){1,20}\]/g,'<gap reason="lost" quantity="$3" unit="character" precision="low"/>')).replace(/\[(?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:(?:-)([1-9][0-9]*))(?:\s?)(?:[\.]){1,20}(?:\s?)\]/g,'<gap reason="lost" atLeast="$1" atMost="$2" unit="character"/>')).replace(/\[(?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:\s?)(?:[\.]){1,20}(?:\s?)\]/g,'<gap reason="lost" quantity="$1" unit="character" precision="low"/>')).replace(/\[(?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:(?:-)([1-9][0-9]*))(?:\s?)(?:[\.]){1,20}(?:\s)/g,'<gap reason="lost" atLeast="$1" atMost="$2" unit="character"/><supplied reason="lost">')).replace(/\[(?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:\s?)(?:[\.]){1,20}(?:\s)/g,'<gap reason="lost" quantity="$1" unit="character" precision="low"/><supplied reason="lost">')).replace(/\s(?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:(?:-)([1-9][0-9]*))(?:\s?)(?:[\.]){1,20}(?:\s?)\]/g,'</supplied><gap reason="lost" atLeast="$1" atMost="$2" unit="character"/>')).replace(/\s(?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:\s?)(?:[\.]){1,20}(?:\s?)\]/g,'</supplied><gap reason="lost" quantity="$1" unit="character" precision="low"/>')).replace(/\s(?:[\.]){2,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:(?:-)([1-9][0-9]*))(?:\s?)(?:[\.]){1,20}(?:\s)/g,'</supplied><gap reason="lost" atLeast="$1" atMost="$2" unit="character"/><supplied reason="lost">')).replace(/\s(?:[\.]){2,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:\s?)(?:[\.]){1,20}(?:\s)/g,'</supplied><gap reason="lost" quantity="$1" unit="character" precision="low"/><supplied reason="lost">')).replace(/(?:\s|\n)\(([^\x00-\x7F]*[aA-zZ]*)\)/g," <expan><ex>$1</ex></expan>")).replace(/\[{2}/g,"")).replace(/\]{2}/g,"")).replace(/\[([^\x00-\x7F]*[aA-zZ]*[^\]])\]([^\x00-\x7F]*[aA-zZ]*[^\]])\(([^\x00-\x7F]*?[aA-zZ]*?)\)/g,'<expan><abbr><supplied reason="lost">$1</supplied>$2</abbr><ex>$3</ex></expan>')).replace(/(||\[\[)([^\x00-\x7F]*[aA-zZ]*[^\]])(||]])([^\x00-\x7F]*[aA-zZ]*[^\]])\(([^\x00-\x7F]*?[aA-zZ]*?)\)/g,'<expan><abbr><supplied reason="lost">$1</supplied>$2</abbr><ex>$3</ex></expan>')).replace(/\[(\w*?\s?)(?:(?:(?:\-|\|\)\s?){1,20})(\w*?)\](?![^\x00-\x7F]*?[aA-zZ]*?\()/g,'<supplied reason="lost">$1</supplied><gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">$2</supplied>')).replace(/<supplied reason=\"lost\"><\/supplied>/g,"")).replace(/(?:|)(.*?\s?)(?:(?:(?:\-|\|\)\s?){1,20})(.*?)(?:|)(?![^\x00-\x7F]*?[aA-zZ]*?\()/g,'<del rend="erasure">$1</del><gap reason="lost" extent="unknown" unit="character"/><del rend="erasure">$2</del>')).replace(/(?:\s)\[(.*?)\](?:\n)/g,' <supplied reason="lost">$1</supplied>\n')).replace(/(?:\s)\[(.*)\](?:\s)/g,' <supplied reason="lost">$1</supplied> ')).replace(/(?:\s)(?:|)(.*?)(?:|)(?:\n)/g,' <del rend="erasure">$1</del>\n')).replace(/(?:\s)(?:|)(.*?)(?:|)(?:\s)/g,' <del256 rend="erasure">$1</del> ')).replace(n,r),n=/([^\x00-\x7F]*[aA-zZ]*)(?:|)([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)(?:|)/g,r='<expan><abbr>$1<del rend="erasure">$2</del></abbr><ex>$3</ex></expan>',e=e.replace(n,r),n=/([^\x00-\x7F]*[aA-zZ]*)\[([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)(\s)?([^\x00-\x7F]*[aA-zZ]*)?(\s)?(\])/g,r='<expan><abbr>$1<supplied reason="lost">$2</supplied></abbr><ex>$3</ex></expan><supplied reason="lost">$4$5</supplied>',e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/([^\x00-\x7F]*?[aA-zZ]*?[^>])?\[([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*?[aA-zZ]*?)\)(.*?[^\-\\])\](?![^\x00-\x7F]*?[aA-zZ]*\()/g,'<expan><abbr>$1<supplied reason="lost">$2</supplied></abbr><ex>$3</ex></expan> <supplied reason="lost">$4</supplied>')).replace(/([^\x00-\x7F]*?[aA-zZ]*?[^\s][^>])?(?:\s?)(?:|)([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*?[aA-zZ]*?)\)(.*?[^\-\\])(?:|)(?![^\x00-\x7F]*?[aA-zZ]*\()/g,'<expan><abbr>$1<del rend="erasure">$2</del></abbr><ex>$3</ex></expan> <del rend="erasure">$4</del>')).replace(/([^\x00-\x7F]*?[aA-zZ]+)\[([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*?[aA-zZ]*?)\)(.*?[^\-\\])([^\x00-\x7F]*?[aA-zZ]*?)\](?:([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*?[aA-zZ]*?)\))/g,'<expan><abbr>$1<supplied reason="lost">$2</supplied></abbr><ex>$3</ex></expan> <supplied reason="lost">$4</supplied><expan><abbr><supplied reason="lost">$5</supplied>$6</abbr><ex>$7</ex></expan>')).replace(/([^\x00-\x7F]*?[aA-zZ]*?)(?:|)([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*?[aA-zZ]*?)\)(.*?[^\-\\])([^\x00-\x7F]*?[aA-zZ]*?)(?:|)(?:([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*?[aA-zZ]*?)\))/g,'<expan><abbr>$1<del rend="erasure">$2</del></abbr><ex>$3</ex></expan> <del rend="erasure">$4</del><expan><abbr><del rend="erasure">$5</del>$6</abbr><ex>$7</ex></expan>')).replace(/<supplied reason="lost"> (?:[\.]){1,20}c(?:a?)\.(?:\s?)([1-9][0-9]*)(?:(?:-)([1-9][0-9]*))(?:\s?)(?:[\.]){1,20} <\/supplied>/g,'<gap reason="lost" atLeast="$1" atMost="$2" unit="character"/>')).replace(/<supplied reason=\"lost\">(<gap reason=\"lost\" atLeast=\"[0-9]*\" atMost=\"[0-9]\" unit="character"\/>)<\/supplied>/g,"$1")).replace(/\[(.[^\[\-\\]*)\](?![^\x00-\x7F]*[aA-zZ]*\()/g,'<supplied reason="lost">$1</supplied>')).replace(/(?:|)(.[^\[]*)\](?![^\x00-\x7F]*[aA-zZ]*\()/g,'<del rend="erasure">$1</supplied>')).replace(/(?:\s)\[((.[^\.<])*)\s/g,' <supplied reason="lost"><expan><abbr>$1</abbr><ex>$2</ex></expan></supplied>')).replace(/(?!([^\x00-\x7F]*[aA-zZ]*))(\s)([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)\]/g,'$1<supplied reason="lost"><expan><abbr>$2</abbr><ex>$3</ex></expan></supplied>')).replace(/(\s)([^\x00-\x7F]*?[aA-zZ]*?)\]([^\x00-\x7F]*?[aA-zZ]*?)\(([^\x00-\x7F]*[aA-zZ]*)\)/g,'$1</supplied><expan><abbr><supplied reason="lost">$2</supplied>$3</abbr><ex>$4</ex></expan>')).replace(/(\s)([^\x00-\x7F]+[aA-zZ]+)\[([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)/g,' <expan><abbr>$2<supplied reason="lost">$3</supplied></abbr><ex>$4</ex></expan> <supplied reason="lost">')).replace(/\[([^\x00-\x7F]*[aA-zZ]*)\(\?\)((\s?(\-|\|\)\s?){1,20})\]/g,'<supplied reason="lost" cert="low">$1</supplied><gap reason="lost" extent="unknown" unit="character"/>')).replace(/\[([^\x00-\x7F]*[aA-zZ]*)((\s?(\-|\|\)\s?){1,20})\]/g,'<supplied reason="lost">$1</supplied><gap reason="lost" extent="unknown" unit="character"/>')).replace(n,r),n=/(||\[\[)([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)([^\x00-\x7F]*[aA-zZ]*)?(||]])/g,r='<del rend="erasure"><expan><abbr>$2</abbr><ex>$3</ex></expan>$4</del>',e=e.replace(n,r),n=/\[([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)(])/g,r='<supplied reason="lost"><expan><abbr>$1</abbr><ex>$2</ex></expan></supplied>',e=e.replace(n,r),n=/([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\?\)/g;e=e.replace(n,'<expan><abbr>$1</abbr><ex cert="low">$2</ex></expan>'),n=/([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)([^\x00-\x7F]*[aA-zZ]*)*\(([^\x00-\x7F]*[aA-zZ]*)\)/g,r="<expan><abbr>$1</abbr><ex>$2</ex><abbr>$3</abbr><ex>$4</ex></expan>",e=e.replace(n,r),n=/([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)([^\x00-\x7F]*[aA-zZ]*)*/g,r="<expan><abbr>$1</abbr><ex>$2</ex>$3</expan>";e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(n,r)).replace("</expan><expan><abbr>","<abbr>")).replace("\n[------]",'<gap unit="line" />')).replace(/(-){6}/g,'<gap unit="line" />')).replace(/\[(\s?)*\]/g,'<gap reason="lost" extent="unknown" unit="character"/>')).replace(/\[---\]/g,'<gap reason="lost" extent="unknown" unit="character"/>')).replace(/\[  ca\.([1-9][0-9]*)((-)([1-9][0-9]*))?  \]/g,'<gap reason="lost" quantity="$1" unit="character" precision="low"/>')).replace(/\[   ca\.([1-9][0-9]*)((-)([1-9][0-9]*))?   \]/g,'<gap reason="lost" quantity="$1" unit="character" precision="low"/>')).replace(/\[(-|\s?){1,20}ca\.(\s?)([1-9][0-9]*)?(\s?)(-|\s?){1,20}\]/g,'<gap reason="lost" quantity="$3" unit="character" precision="low"/>')).replace(/\------\?/g,'<gap reason="lost" extent="unknown" unit="line"><certainty match=".." locus="name"/></gap>')).replace(/\[\------\?\]/g,'<gap reason="lost" extent="unknown" unit="line"><certainty match=".." locus="name"/></gap>')).replace(/\[\---\?\]/g,'<gap reason="lost" extent="unknown" unit="line"><certainty match=".." locus="name"/></gap>')).replace(/\[(-||\\s?){1,20}([^\x00-\x7F]*[aA-zZ]*)\]/g,'<gap reason="lost" extent="unknown" unit="character"/>')).replace(/\[(-||\\s?){1,20}([^\x00-\x7F]*[aA-zZ]*)\]/g,'<gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">$2</supplied>')).replace(/(?:|)(-||\\s?){1,20}([^\x00-\x7F]*[aA-zZ]*)(?:|)/g,'<gap reason="lost" extent="unknown" unit="character"/><del rend="erasure">$2</supplied>')).replace(/\[(?!([\-\\]))(((?!([\-\\\[\]]))[^\x00-\x7F]*[aA-zZ]*(\s?)){1,10})(([\-\\])\s?){1,20}\]/g,'<supplied reason="lost">$2</supplied><gap reason="lost" extent="unknown" unit="character"/>')).replace(/(([\-\\])\s?){1,20}\]/g,'<gap reason="lost" extent="unknown" unit="character"/>')).replace(/<expan><abbr>\[/g,'<supplied reason="lost"><expan><abbr>')).replace(/<\/expan> <\/supplied></g,"</expan></supplied> <")).replace(/<supplied reason=\"lost\"><expan><abbr>([^\x00-\x7F]*?[aA-zZ]*?)\]/g,'<expan><abbr><supplied reason="lost">$1</supplied>')).replace(/<expan><abbr><\/abbr><ex>/g,"<expan><ex>")).replace(/\[/g,'<supplied reason="lost">')).replace(/\]/g,"</supplied>")).replace(/<\/ex><\/supplied><\/expan>/g,"</ex></expan></supplied>")).replace(/((\s?(\-|\|\)\s?){1,20})<\/supplied>/g,'</supplied><gap reason="lost" extent="unknown" unit="character"/>')).replace(/((\s?(\-|\|\)\s?){1,20})<\/supplied>/g,'</supplied><gap reason="lost" extent="unknown" unit="character"/>')).replace(/<supplied reason=\"lost\">((\s?(\-|\|\)\s?){1,20})/g,'<gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">')).replace(/<supplied reason=\"lost\"><\/supplied><gap reason=\"lost\" extent=\"unknown\" unit=\"character\"\/><supplied reason=\"lost\"><\/supplied>/g,'</supplied><gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">')).replace(/<supplied reason=\"lost\"> <\/supplied>/g,"")).replace(/<del rend=\"erasure\">\s?<\/del>/g,"")).replace(/<\/supplied>\s?<\/supplied>/g,"</supplied>")).replace(/\/><\/supplied><gap/g,"/><gap")).replace(/\[(?!([\-\\]))((?:\s?(?:(?!(?:[\-\\\[\]]))[^\x00-\x7F]*[aA-zZ](?!\s)*)){1,10})(?:(?:\s?[\-\\])\s?){1,20}((?:(?!([\-\\\[\]]))[^\x00-\x7F]*[aA-zZ]*))\]/g,'<supplied reason="lost">$2</supplied><gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">$3</supplied>')).replace(/(\s?([\-\\])\s?){1,20}/g,'</supplied><gap reason="lost" extent="unknown" unit="character"/><supplied reason="lost">')).replace(/\[(.[^\[]*)(\s)([^\x00-\x7F]*[aA-zZ]*)\]([^\x00-\x7F]*[aA-zZ]*)\(([^\x00-\x7F]*[aA-zZ]*)\)/g,'<supplied reason="lost">$1</supplied><expan><abbr><supplied reason="lost">$3</supplied>$4</abbr><ex>$5</ex></expan>')).replace(/([+])+/g,(function(e){return'<gap reason="illegible" quantity="'+e.length+'" unit="character"/>'}));e=e.replace(/\[({1,20})\]/g,(function(e){return'<gap reason="illegible" quantity="'+(e.length-2)+'" unit="character"/>'}));n=/()(([^\x00-\x7F]*[aA-zZ]*)([\s\,\.]([^\x00-\x7F]*[aA-zZ]*))*)()/gm,r='<del rend="erasure">$2</del>',e=(e=(e=(e=(e=e.replace(/<supplied reason=\"lost\"> <gap/g," <gap")).replace(/(hed\.)/gi,'<g type="hedera"></g>')).replace(/vac\./gi,'<space extent="unknown" unit="character"/>')).replace(/\{([^\x00-\x7F]*[aA-zZ]*)\}/g,"<surplus>$1</surplus>")).replace(n,r),n=/()(([^\x00-\x7F]*[aA-zZ]*)([\s\,\.]([^\x00-\x7F]*[aA-zZ]*))*)()/gm,r='<del rend="erasure">$2</del>',e=e.replace(n,r),n=/(\[){2}(([^\x00-\x7F]*[aA-zZ]*)([\s\,\.]([^\x00-\x7F]*[aA-zZ]*))*)(\]){2}/gm,r='<del rend="erasure">$2</del>';e=(e=e.replace(n,r)).replace(/(\[)(([^\x00-\x7F]*[aA-zZ]*)([\s\,\.]([^\x00-\x7F]*[aA-zZ]*))*)(\])/gm,'<supplied reason="lost">$2</supplied>'),n=new RegExp("a","u");return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/(\[)([^\x00-\x7F]*[aA-zZ]*\s?[^\x00-\x7F]*[aA-zZ]*)(---)?(\])/g,'<supplied reason="lost">$2</supplied><gap reason="lost" />')).replace(/([^\x00-\x7F]?[aA-zZ]?)/g,"<unclear>$1</unclear>")).replace(/(\<\/unclear\>\<unclear\>)/g,"")).replace(/(<gap reason=\"lost\" atLeast=\"[0-9]*\" atMost=\"[0-9]\" unit=\"character\"\/>)<expan><abbr>((?:[^\x00-\x7F]*?[aA-zZ]*?)*)<\/supplied>/g,'$1<expan><abbr><supplied reason="lost">$2</supplied>')).replace(/(<gap reason=\"lost\" atLeast=\"[0-9]*\" atMost=\"[0-9]\" unit=\"character\"\/>)<\/supplied>/g,"$1")).replace(/(<gap reason=\"lost\" atLeast=\"[0-9]*\" atMost=\"[0-9]\" unit=\"character\"\/>)<expan><abbr>((?:[^\x00-\x7F]*?[aA-zZ]*?)*)<\/supplied>/g,'$1<expan><abbr><supplied reason="lost">$2</supplied>')).replace(/(<gap reason=\"lost\" quantity=\"[0-9]*\" unit=\"character\" precision=\"low\"\/>)<\/supplied>/g,"$1")).replace(/(\/\>)\s(\<lb n=\"[0-9]*\"\/\>)/g,"$1\n$2")).replace(/unit=\"line\"\/>\s(\w)/g,'unit="line"/>$1')).replace(/ ? ?/g,' <g type="interpunct"></g> ')).replace(/ ? ?/g,' <g type="denarius"/> ')).replace(//g,' <g type="hedera"></g> ')).replace(/\s\s/g," ")).replace(/ {2,99}/g,"")}var lf=(e,t)=>n=>{let r=function(e,t){let n=`<ab>${af(e,t)}\n</ab>`,r=(new DOMParser).parseFromString(n,"application/xml");return r.firstElementChild?nf(r.firstElementChild):""}(n.state.doc.toJSON().join("\n"),t);return e.content=r,e.mode="leiden_plus",!0},uf={erasure:Dd("[[","]]"),gap:(e=>t=>(t.dispatch(t.state.changeByRange((t=>({changes:[{from:t.from,insert:e}],range:L.range(t.from,t.from)})))),!0))("[---]")},cf=[{key:"Ctrl-Shift-d",mac:"Cmd-Shift-d",run:uf.erasure},{key:"Ctrl-Shift-l",mac:"Cmd-Shift-l",run:uf.gap}],hf=class extends Fd{constructor(e,t){super(e),this._sourceType=t}getExtensions(){return[Ui.of(cf),Gp()]}getCommands(){return((e,r)=>t(e,n(r)))(((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&s(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&s(e,n,t[n]);return e})({},uf),{convert:lf(this.editor,this._sourceType)})}onUpdate(e,t){return`<ab>\n${af(t,this._sourceType)}\n</ab>`}serialize(){return this.editor.content}setFromValue(e){if(!e)return"";if("string"!=typeof e)throw new Error("cannot set value");return e}},pf=class extends HTMLElement{constructor(){super(),this._mode="xml",this.attachShadow({mode:"open"})}connectedCallback(){var e,t,n,r;let i=document.createElement("style");i.innerHTML=this.styles(),null==(e=this.shadowRoot)||e.appendChild(i);let o=document.createElement("slot");o.name="toolbar",null==(t=this.shadowRoot)||t.appendChild(o);let s=document.createElement("div");s.id="editor",null==(n=this.shadowRoot)||n.appendChild(s),this.registerToolbar(null==(r=this.shadowRoot)?void 0:r.querySelector("[name=toolbar]")),this.namespace=this.getAttribute("namespace"),this.mode=this.initModes()||this.getAttribute("mode")||"xml",this.addEventListener("blur",(e=>{let t=e.relatedTarget;if(t){let n=t.parentNode;for(;n;){if(n===this)return e.preventDefault(),void e.stopPropagation();n=n.parentNode}}}))}focus(){this._editor&&this._editor.focus()}set mode(e){var t,n,r;let i=null==(t=this.shadowRoot)?void 0:t.getElementById("editor");if(!i)return;this._editor&&this._editor.destroy(),this._mode=Md[e],this.activateToolbar(null==(n=this.shadowRoot)?void 0:n.querySelector("[name=toolbar]")),this.configure();let o=this.querySelector("[name=modes]");o&&o instanceof HTMLSelectElement&&(o.value=this._mode);let s=null==(r=this._config)?void 0:r.getConfig();this._editor=new Bi({state:Te.create(s),parent:i}),this._config&&(this.content=this._config.setFromValue(this._value))}configure(){switch(this._mode){case"default":case"edcs":case"phi":this._config=new hf(this,this._mode);break;case"leiden_plus":this._config=new sf(this);break;default:this._config=new qd(this,this.namespace)}}get mode(){return this._mode}set valid(e){this.setAttribute("valid",e.toString())}get valid(){return Boolean(this.hasAttribute("valid"))}set content(e){this._editor&&this._editor.dispatch({changes:{from:0,to:this._editor.state.doc.length,insert:e}})}get content(){var e;return(null==(e=this._editor)?void 0:e.state.doc.toString())||""}set value(e){var t;this.setValue(e)&&this._editor&&this._config&&(this.content=null==(t=this._config)?void 0:t.setFromValue(this._value))}get value(){return this.getValue()}setValue(e){if(!this._config)return!1;let t=this._config.setFromValue(e);return this._value!==t&&(this._value=e,!0)}getValue(){return this._value?this._value:null}emitUpdateEvent(e){this.dispatchEvent(new CustomEvent("update",{detail:{content:e},composed:!0,bubbles:!0}))}initModes(){let e=this.querySelector("[name=modes]");return e&&e instanceof HTMLSelectElement?(e.addEventListener("change",(()=>{this.mode=e.value})),e.value):null}registerToolbar(e){null==e||e.assignedElements().forEach((e=>{e.querySelectorAll("slot").forEach((e=>this.registerToolbar(e))),e.querySelectorAll("[data-command]").forEach((e=>{let t=e.dataset.command;e.addEventListener("click",(()=>{var n,r;if(!this._config)return;let i=this._config.getCommands()[t];if(i)if(i instanceof Function)i(this._editor),"encloseWithCommand"!==i.name&&(null==(n=this._editor)||n.focus());else{let t=e.dataset.params,n=i.create;if(t){let e;try{e=JSON.parse(t)}catch(n){e=[t]}Array.isArray(e)&&e.length===n.length&&n.apply(null,e)(this._editor)}null==(r=this._editor)||r.focus()}}))}))}))}activateToolbar(e){null==e||e.assignedElements().forEach((e=>{e.querySelectorAll("slot").forEach((e=>this.activateToolbar(e))),e.querySelectorAll("[data-command]").forEach((e=>{let t=e;t.dataset.mode&&t.dataset.mode!==this._mode?t.style.display="none":t.style.display="inline"}))}))}styles(){return"\n            > div, .cm-editor {\n                height: 100%;\n                width: 100%;\n            }\n        "}};window.customElements.define("jinn-codemirror",pf);customElements.get("jinn-xml-editor")||window.customElements.define("jinn-xml-editor",class extends pf{constructor(){super(...arguments),this.unwrap=!1}connectedCallback(){this.unwrap=this.hasAttribute("unwrap"),super.connectedCallback();let e=this.getAttribute("wrapper");if(e){let t=(new DOMParser).parseFromString(e,"application/xml");t.getElementsByTagName("parsererror").length||this.setValue(t.firstElementChild)}}configure(){let e=this.hasAttribute("check-namespace");this._config=new qd(this,this.namespace,e,this.unwrap)}emitUpdateEvent(e){if(!this.unwrap)return super.emitUpdateEvent(e);this.updateValue(),super.emitUpdateEvent(this._wrapper)}updateValue(){var e,t;if(!this._wrapper)return null;if(this._wrapper.replaceChildren(),this._value)if(this._value instanceof NodeList)for(let t=0;t<this._value.length;t++){let n=this._wrapper.ownerDocument.importNode(this._value[t],!0);null==(e=this._wrapper)||e.appendChild(n)}else{if(!(this._value instanceof Node))throw new Error("value is not a node");null==(t=this._wrapper)||t.appendChild(this._value)}else;}setValue(e){var t,n;if(!this.unwrap)return super.setValue(e);if((null==(t=this._config)?void 0:t.setFromValue(this._wrapper))===(null==(n=this._config)?void 0:n.setFromValue(e)))return!1;if(e||(this._wrapper=null),!(e instanceof Element))throw new Error("Value is not a node");return this._wrapper=e,this._value=e.childNodes,!0}getValue(){if(!this.unwrap)return super.getValue();if(!this._wrapper)return null;if(!(this._wrapper instanceof Element))throw new Error("Value is not a node");return this.updateValue(),this._wrapper}});var df=class extends HTMLElement{constructor(){super(),this.xmlEditor=null,this.valid=!0,this.unwrap=!1,this.schema=null,this.attachShadow({mode:"open"})}set value(e){this.xmlEditor.value=e}get value(){return this.xmlEditor.value}connectedCallback(){var e,t,n,r;this.unwrap=this.hasAttribute("unwrap"),this.schema=this.getAttribute("schema"),this.shadowRoot.innerHTML=`\n            <style>\n                \n    :host{\n        display: block;\n        width: 100%;\n    }\n    jinn-codemirror {\n        font-size: 1rem;\n        display:block;\n        width:100%;\n    }\n    jinn-codemirror[valid="true"] {\n        outline: thin solid green;\n    }\n    jinn-codemirror[valid="false"] {\n        outline: thin solid red;\n    }\n    #leiden-editor {\n        margin-bottom:0.5rem;\n    }\n    [slot=toolbar] {\n        display: flex;\n    }\n    .hidden {\n        display: none;\n    }\n    #close-leiden {\n        margin-left: .75rem;\n        font-weight: bold;\n    }\n            </style>\n            <jinn-codemirror id="leiden-editor" class="hidden">\n                <div slot="toolbar">\n                    <select name="modes">\n                        <option value="edcs" selected>EDCS/EDH</option>\n                        <option value="default">Petrae</option>\n                        <option value="leiden_plus">Leiden+</option>\n                    </select>\n                    <slot name="leiden-toolbar"></slot>\n                    <button part="button" id="close-leiden">Close</button>\n                </div>\n            </jinn-codemirror>\n            <jinn-xml-editor id="xml-editor" ${this.unwrap?"unwrap":""} schema="${this.schema}">\n                <div slot="toolbar">\n                    <button part="button" id="import" title="Import from Leiden markup">Leiden Editor</button>\n                    <slot name="xml-toolbar"></slot>\n                </div>\n            </jinn-xml-editor>\n        `,this.xmlEditor=null==(e=this.shadowRoot)?void 0:e.querySelector("#xml-editor");let i=null==(t=this.shadowRoot)?void 0:t.querySelector("#leiden-editor"),o=null==(n=this.shadowRoot)?void 0:n.querySelector("#import"),s=null==(r=this.shadowRoot)?void 0:r.querySelector("#close-leiden");if(!(this.xmlEditor&&i&&o&&s))throw new Error("One or more components were not initialized");i.addEventListener("update",(e=>{e.stopPropagation(),this.xmlEditor.content=e.detail.content})),o.addEventListener("click",(()=>{var e;if(i.classList.contains("hidden")){if(this.xmlEditor.content.length>0){i.mode="leiden_plus";let t=null==(e=this.xmlEditor)?void 0:e.value;this.unwrap&&t instanceof Element?i.value=t.childNodes:i.value=t}i.classList.remove("hidden"),i.focus(),o.classList.add("hidden")}else i.classList.add("hidden"),o.classList.remove("hidden"),this.xmlEditor.focus()})),s.addEventListener("click",(()=>{o.classList.remove("hidden"),i.classList.add("hidden"),this.xmlEditor.focus()})),this.xmlEditor.addEventListener("invalid",(e=>{e.stopPropagation(),this.valid=!1,this.setAttribute("valid",this.valid.toString())})),this.xmlEditor.addEventListener("valid",(e=>{e.stopPropagation(),this.valid=!0,this.setAttribute("valid",this.valid.toString())}))}};customElements.get("jinn-epidoc-editor")||window.customElements.define("jinn-epidoc-editor",df)})();class wo{constructor(){this.program=[]}test(e,t){return yo(this.program,5,e,void 0===t?null:t)}jump(e){return yo(this.program,3,null,e)}record(e,t){return yo(this.program,4,void 0===t?vo:t,e)}bad(e=1){return yo(this.program,1,null,e)}accept(){return yo(this.program,0,null,null)}fail(e){return yo(this.program,2,e||null,null)}}class bo{constructor(e,t,n){this.programLength=e,this.maxFromByPc=t,this.maxSurvivorFromByPc=n}static fromProgram(e){const t=e.length,n=[],r=[];return e.forEach((e=>{n.push(0),r.push(0)})),e.forEach(((e,i)=>{switch(e.op){case 2:if(null===e.func)return;if(i+1>=t)throw new Error("Invalid program: program could run past end");n[i+1]+=1;break;case 1:case 4:if(i+1>=t)throw new Error("Invalid program: program could run past end");n[i+1]+=1;break;case 3:e.data.forEach((e=>{if(e<0||e>=t)throw new Error("Invalid program: program could run past end");n[e]+=1}));break;case 5:if(i+1>=t)throw new Error("Invalid program: program could run past end");r[i+1]+=1;break;case 0:r[i]+=1}})),new bo(t,n,r)}static createStub(e){const t=[],n=[];for(let r=0;r<e;++r)t.push(e),n.push(e);return new bo(e,t,n)}}class xo{constructor(e){this.acceptingTraces=e,this.success=e.length>0}}class Ao{constructor(e){this.t=0,this.i=0,this.h=new Uint16Array(e),this.l=new Uint8Array(e)}getBadness(e){return this.l[e]}add(e,t){this.l[e]=t>255?255:t;const n=function(e,t,n,r,i){let o=r,s=i;for(;o<s;){const r=o+s>>>1;n<t[e[r]]?s=r:o=r+1}return o}(this.h,this.l,t,this.i,this.t);this.h.copyWithin(n+1,n,this.t),this.h[n]=e,this.t+=1}reschedule(e,t){const n=Math.max(this.l[e],t>255?255:t);if(this.l[e]!==n){const t=this.h.indexOf(e,this.i);if(t<0||t>=this.t)return void(this.l[e]=n);this.h.copyWithin(t,t+1,this.t),this.t-=1,this.add(e,n)}}getNextPc(){return this.i>=this.t?null:this.h[this.i++]}reset(){this.t=0,this.i=0,this.l.fill(0)}}class _o{constructor(e){this.o=[];let t=e.length;e.forEach((e=>{this.o.push(e>0?t:-1),t+=e})),this.u=new Uint16Array(t)}clear(){this.u.fill(0,0,this.o.length)}add(e,t){const n=this.u[t],r=this.o[t];this.u[t]+=1,this.u[r+n]=e}has(e){return this.u[e]>0}forEach(e,t){const n=this.u[e],r=this.o[e];for(let e=r;e<r+n;++e)t(this.u[e])}}function ko(e,t,n=!1){return null===e?t:Array.isArray(e)?(-1===e.indexOf(t)&&(n&&(e=e.slice()),e.push(t)),e):e===t?e:[e,t]}class Eo{constructor(e,t){this.prefixes=e,this.record=t}}function Co(e,t){let n;if(null===t){if(!Array.isArray(e))return e;n=e}else n=e===Eo.EMPTY?[]:Array.isArray(e)?e:[e];return new Eo(n,t)}Eo.EMPTY=new Eo([],null);class So{constructor(e){this.p=[],this.v=[];for(let t=0;t<e;++t)this.p.push(0),this.v.push(null)}mergeTraces(e,t,n,r,i,o){let s=!1;return n.forEach(t,(t=>{const n=this.trace(t,r,i,o);var a,l,u;l=n,u=s,e=null===(a=e)?l:null===l?a:Array.isArray(l)?l.reduce(((e,t)=>ko(e,t,e===l)),a):ko(a,l,u),s=e===n})),e}trace(e,t,n,r){switch(this.p[e]){case 2:return this.v[e];case 1:return null}this.p[e]=1;let i=null;const o=t[e];if(null!==o)i=o;else if(!n.has(e))throw new Error("Trace without source at pc "+e);if(i=this.mergeTraces(i,e,n,t,n,r),null!==i){const t=r[e];null!==t&&(i=Co(i,t))}return this.v[e]=i,this.p[e]=2,i}buildSurvivorTraces(e,t,n,r,i){for(let o=0,s=e.length;o<s;++o){if(!n.has(o)){t[o]=null;continue}this.v.fill(null),this.p.fill(0);const s=this.mergeTraces(null,o,n,e,r,i);if(null===s)throw new Error("No non-cyclic paths found to survivor "+o);t[o]=Co(s,null)}this.v.fill(null)}}class Oo{constructor(e){this.g=[],this.k=[],this.m=[],this.A=new _o(e.maxFromByPc),this.T=new _o(e.maxSurvivorFromByPc),this.S=new So(e.programLength);for(let t=0;t<e.programLength;++t)this.g.push(null),this.k.push(null),this.m.push(null);this.k[0]=Eo.EMPTY}reset(e){this.A.clear(),this.T.clear(),this.g.fill(null),e&&(this.k.fill(null),this.m.fill(null),this.k[0]=Eo.EMPTY)}record(e,t){this.g[e]=t}has(e){return this.A.has(e)||null!==this.k[e]}add(e,t){this.A.add(e,t)}hasSurvivor(e){return this.T.has(e)}addSurvivor(e,t){this.T.add(e,t)}buildSurvivorTraces(){const e=this.k;this.S.buildSurvivorTraces(e,this.m,this.T,this.A,this.g),this.k=this.m,this.m=e}getTraces(e){const t=e.reduce(((e,t)=>ko(e,this.k[t])),null);return null===t?[]:Array.isArray(t)?t:[t]}}class To{constructor(e){this.I=[],this.N=new Ao(e.programLength),this.M=new Ao(e.programLength),this.P=new Oo(e)}reset(){this.N.reset(),this.N.add(0,0),this.I.length=0,this.P.reset(!0)}getNextThreadPc(){return this.N.getNextPc()}step(e,t,n){const r=this.P.has(t);this.P.add(e,t);const i=this.N.getBadness(e)+n;r?this.N.reschedule(t,i):this.N.add(t,i)}stepToNextGeneration(e,t){const n=this.P.hasSurvivor(t);this.P.addSurvivor(e,t);const r=this.N.getBadness(e);n?this.M.reschedule(t,r):this.M.add(t,r)}accept(e){this.I.push(e),this.P.addSurvivor(e,e)}fail(e){}record(e,t){this.P.record(e,t)}nextGeneration(){this.P.buildSurvivorTraces(),this.P.reset(!1);const e=this.N;e.reset(),this.N=this.M,this.M=e}getAcceptingTraces(){return this.P.getTraces(this.I)}}class No{constructor(e){this.U=[],this.G=e,this.V=bo.fromProgram(e),this.U.push(new To(this.V))}execute(e,t){const n=this.U.pop()||new To(this.V);n.reset();const r=e.length;let i,o=-1;do{let s=n.getNextThreadPc();if(null===s)break;for(++o,i=o>=r?null:e[o];null!==s;){const e=this.G[s];switch(e.op){case 0:null===i?n.accept(s):n.fail(s);break;case 2:{const r=e.func;if(null===r||r(t)){n.fail(s);break}n.step(s,s+1,0);break}case 1:n.step(s,s+1,e.data);break;case 5:if(null===i){n.fail(s);break}if(!(0,e.func)(i,e.data,t)){n.fail(s);break}n.stepToNextGeneration(s,s+1);break;case 3:{const t=e.data,r=t.length;if(0===r){n.fail(s);break}for(let e=0;e<r;++e)n.step(s,t[e],0);break}case 4:{const r=(0,e.func)(e.data,o,t);null!=r&&n.record(s,r),n.step(s,s+1,0);break}}s=n.getNextThreadPc()}n.nextGeneration()}while(null!==i);const s=new xo(n.getAcceptingTraces());return n.reset(),this.U.push(n),s}}function Bo(e){return t=>t===e}function Io(e,t){if(null===e||null===t)throw new Error("unescaped hyphen may not be used as a range endpoint");if(t<e)throw new Error("character range is in the wrong order");return n=>e<=n&&n<=t}function Po(e){return!0}function Mo(){return!1}function Do(e,t){return n=>e(n)||t(n)}function Ro(e,t){switch(t.kind){case"predicate":return void e.test(t.value);case"regexp":return void Fo(e,t.value,!1)}}function Fo(e,t,n){const r=e.program.length,i=e.jump([]);n&&(i.data.push(e.program.length),e.test((()=>!0)),e.jump([r]));const o=[];if(t.forEach((t=>{i.data.push(e.program.length),function(e,t){t.forEach((t=>{!function(e,t){const[n,{min:r,max:i}]=t;if(null!==i){for(let t=0;t<r;++t)Ro(e,n);for(let t=r;t<i;++t){const t=e.jump([]);t.data.push(e.program.length),Ro(e,n),t.data.push(e.program.length)}}else if(r>0){for(let t=0;t<r-1;++t)Ro(e,n);const t=e.program.length;Ro(e,n),e.jump([t]).data.push(e.program.length)}else{const t=e.program.length,r=e.jump([]);r.data.push(e.program.length),Ro(e,n),e.jump([t]),r.data.push(e.program.length)}}(e,t)}))}(e,t),o.push(e.jump([]))})),o.forEach((t=>{t.data.push(e.program.length)})),n){const t=e.program.length,n=e.jump([]);n.data.push(e.program.length),e.test((()=>!0)),e.jump([t]),n.data.push(e.program.length)}}function Lo(e,t){return{success:!0,offset:e,value:t}}function Uo(e){return Lo(e,void 0)}function $o(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function Ho(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?Lo(r,e):$o(n,[e])}}function Go(e,t){return(n,r)=>{const i=e(n,r);return i.success?Lo(i.offset,t(i.value)):i}}function jo(e,t,n,r){return(i,o)=>{const s=e(i,o);return s.success?t(s.value)?s:$o(o,n,r):s}}function zo(e,t){return(n,r)=>{let i=null;for(const o of e){const e=o(n,r);if(e.success)return e;if(null===i||e.offset>i.offset?i=e:e.offset===i.offset&&void 0===t&&(i.expected=i.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==i?void 0:i.expected)||[],i&&(i.expected=t),i||$o(r,t)}}function Vo(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:Lo(n,null)}}function Xo(e){return(t,n)=>{let r=[],i=n;for(;;){const n=e(t,i);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===i)break;i=n.offset}return Lo(i,r)}}function qo(e,t,n){return(r,i)=>{const o=e(r,i);if(!o.success)return o;const s=t(r,o.offset);return s.success?Lo(s.offset,n(o.value,s.value)):s}}function Wo(e){return qo(e,Xo(e),((e,t)=>[e].concat(t)))}function Yo(e,t){return e}function Qo(e,t){return t}function Ko(e,t){return qo(e,t,Qo)}function Zo(e,t){return qo(e,t,Yo)}function Jo(e,t,n,r=!1){return Ko(e,r?ts(Zo(t,n)):Zo(t,n))}function es(e,t){return(n,r)=>e(n,r).success?$o(r,t):Uo(r)}function ts(e){return(t,n)=>{const r=e(t,n);return r.success?r:$o(r.offset,r.expected,!0)}}const ns=(e,t)=>e.length===t?Uo(t):$o(t,["end of input"]),rs=["Lu","Ll","Lt","Lm","Lo","Mn","Mc","Me","Nd","Nl","No","Pc","Pd","Ps","Pe","Pi","Pf","Po","Zs","Zl","Zp","Sm","Sc","Sk","So","Cc","Cf","Co","Cn"],is={};function os(e){return e.codePointAt(0)}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(((e,t)=>{is[e]=t}));const ss=e=>-1===e||-2===e;function as(e){return t=>!ss(t)&&!e(t)}function ls(e,t){return null===t?e:n=>e(n)&&!t(n)}const us=function(e,t){const n=new Map;let r=0;return["BasicLatin","Latin-1Supplement","LatinExtended-A","LatinExtended-B","IPAExtensions","SpacingModifierLetters","CombiningDiacriticalMarks","GreekandCoptic|Greek","Cyrillic","CyrillicSupplement","Armenian","Hebrew","Arabic","Syriac","ArabicSupplement","Thaana","NKo","Samaritan","Mandaic","SyriacSupplement",null,"ArabicExtended-A","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","HangulJamo","Ethiopic","EthiopicSupplement","Cherokee","UnifiedCanadianAboriginalSyllabics","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","UnifiedCanadianAboriginalSyllabicsExtended","Limbu","TaiLe","NewTaiLue","KhmerSymbols","Buginese","TaiTham","CombiningDiacriticalMarksExtended","Balinese","Sundanese","Batak","Lepcha","OlChiki","CyrillicExtended-C","GeorgianExtended","SundaneseSupplement","VedicExtensions","PhoneticExtensions","PhoneticExtensionsSupplement","CombiningDiacriticalMarksSupplement","LatinExtendedAdditional","GreekExtended","GeneralPunctuation","SuperscriptsandSubscripts","CurrencySymbols","CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols","LetterlikeSymbols","NumberForms","Arrows","MathematicalOperators","MiscellaneousTechnical","ControlPictures","OpticalCharacterRecognition","EnclosedAlphanumerics","BoxDrawing","BlockElements","GeometricShapes","MiscellaneousSymbols","Dingbats","MiscellaneousMathematicalSymbols-A","SupplementalArrows-A","BraillePatterns","SupplementalArrows-B","MiscellaneousMathematicalSymbols-B","SupplementalMathematicalOperators","MiscellaneousSymbolsandArrows","Glagolitic","LatinExtended-C","Coptic","GeorgianSupplement","Tifinagh","EthiopicExtended","CyrillicExtended-A","SupplementalPunctuation","CJKRadicalsSupplement","KangxiRadicals",null,"IdeographicDescriptionCharacters","CJKSymbolsandPunctuation","Hiragana","Katakana","Bopomofo","HangulCompatibilityJamo","Kanbun","BopomofoExtended","CJKStrokes","KatakanaPhoneticExtensions","EnclosedCJKLettersandMonths","CJKCompatibility","CJKUnifiedIdeographsExtensionA","YijingHexagramSymbols","CJKUnifiedIdeographs","YiSyllables","YiRadicals","Lisu","Vai","CyrillicExtended-B","Bamum","ModifierToneLetters","LatinExtended-D","SylotiNagri","CommonIndicNumberForms","Phags-pa","Saurashtra","DevanagariExtended","KayahLi","Rejang","HangulJamoExtended-A","Javanese","MyanmarExtended-B","Cham","MyanmarExtended-A","TaiViet","MeeteiMayekExtensions","EthiopicExtended-A","LatinExtended-E","CherokeeSupplement","MeeteiMayek","HangulSyllables","HangulJamoExtended-B","HighSurrogates","HighPrivateUseSurrogates","LowSurrogates","PrivateUseArea|PrivateUse","CJKCompatibilityIdeographs","AlphabeticPresentationForms","ArabicPresentationForms-A","VariationSelectors","VerticalForms","CombiningHalfMarks","CJKCompatibilityForms","SmallFormVariants","ArabicPresentationForms-B","HalfwidthandFullwidthForms","Specials","LinearBSyllabary","LinearBIdeograms","AegeanNumbers","AncientGreekNumbers","AncientSymbols","PhaistosDisc",null,"Lycian","Carian","CopticEpactNumbers","OldItalic","Gothic","OldPermic","Ugaritic","OldPersian",null,"Deseret","Shavian","Osmanya","Osage","Elbasan","CaucasianAlbanian",null,"LinearA",null,"CypriotSyllabary","ImperialAramaic","Palmyrene","Nabataean",null,"Hatran","Phoenician","Lydian",null,"MeroiticHieroglyphs","MeroiticCursive","Kharoshthi","OldSouthArabian","OldNorthArabian",null,"Manichaean","Avestan","InscriptionalParthian","InscriptionalPahlavi","PsalterPahlavi",null,"OldTurkic",null,"OldHungarian","HanifiRohingya",null,"RumiNumeralSymbols",null,"OldSogdian","Sogdian",null,"Elymaic","Brahmi","Kaithi","SoraSompeng","Chakma","Mahajani","Sharada","SinhalaArchaicNumbers","Khojki",null,"Multani","Khudawadi","Grantha",null,"Newa","Tirhuta",null,"Siddham","Modi","MongolianSupplement","Takri",null,"Ahom",null,"Dogra",null,"WarangCiti",null,"Nandinagari","ZanabazarSquare","Soyombo",null,"PauCinHau",null,"Bhaiksuki","Marchen",null,"MasaramGondi","GunjalaGondi",null,"Makasar",null,"TamilSupplement","Cuneiform","CuneiformNumbersandPunctuation","EarlyDynasticCuneiform",null,"EgyptianHieroglyphs","EgyptianHieroglyphFormatControls",null,"AnatolianHieroglyphs",null,"BamumSupplement","Mro",null,"BassaVah","PahawhHmong",null,"Medefaidrin",null,"Miao",null,"IdeographicSymbolsandPunctuation","Tangut","TangutComponents",null,"KanaSupplement","KanaExtended-A","SmallKanaExtension","Nushu",null,"Duployan","ShorthandFormatControls",null,"ByzantineMusicalSymbols","MusicalSymbols","AncientGreekMusicalNotation",null,"MayanNumerals","TaiXuanJingSymbols","CountingRodNumerals",null,"MathematicalAlphanumericSymbols","SuttonSignWriting",null,"GlagoliticSupplement",null,"NyiakengPuachueHmong",null,"Wancho",null,"MendeKikakui",null,"Adlam",null,"IndicSiyaqNumbers",null,"OttomanSiyaqNumbers",null,"ArabicMathematicalAlphabeticSymbols",null,"MahjongTiles","DominoTiles","PlayingCards","EnclosedAlphanumericSupplement","EnclosedIdeographicSupplement","MiscellaneousSymbolsandPictographs","Emoticons","OrnamentalDingbats","TransportandMapSymbols","AlchemicalSymbols","GeometricShapesExtended","SupplementalArrows-C","SupplementalSymbolsandPictographs","ChessSymbols","SymbolsandPictographsExtended-A",null,"CJKUnifiedIdeographsExtensionB",null,"CJKUnifiedIdeographsExtensionC","CJKUnifiedIdeographsExtensionD","CJKUnifiedIdeographsExtensionE","CJKUnifiedIdeographsExtensionF",null,"CJKCompatibilityIdeographsSupplement",null,"Tags",null,"VariationSelectorsSupplement",null,"SupplementaryPrivateUseArea-A|PrivateUse","SupplementaryPrivateUseArea-B|PrivateUse"].forEach(((e,i)=>{const o=t[i];null!==e&&e.split("|").forEach((e=>{const t=n.get(e),i=Io(r,r+o-1);n.set(e,t?Do(t,i):i)})),r+=o})),n}(0,[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,144,384,128,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,128,48,64,112,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,64,192,80,80,96,160,96,80,96,16,64,256,112,80,64,96,80,304,32,192,64,1024,128,208,2736,1072,16,4032,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,9472,256,48,64,400,2304,160,16,4944,256,256,80,144,32,96,32,128,1024,688,1360,48,208,80,368,64,1280,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,1280,42720,32,4160,224,5776,7488,3088,544,722400,128,128,240,65040,65536,65536]),cs=function(e){const t=new Map,n="bfUATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAbgUATAYDaATAZAaAGARAXAcAaAZAaAXAMBZADATBZAMAGASAMCTACWXACGDXXADHA3DAAPDAAtCAAFDBCAADCAABCCDBCCABCAABCCDCCAABCAAFCAADDAABCAABCBADCBDBGACADCGDCAEADACAEADACAEADAAPDAARDACAEADAABCBA7DFCAABCBDBABCCAJjDBAAGADaFRZDFLZNFEZGFAZAFAZQnvBAAADFAZACADABBFADCTACABDZBCATACCBACABACAABCQBACIDiCADBCCDCAXDDCADAXAABCBDBCyDvAhaAHEJBA1CAANDAgfBAABAClBBFATFDoTAOABBaBYABAHsOAHATAHBTAHBTAHABHGaBDGDTBBKcFXCTBYATBaBHKTAcABATBGfFAGJHUKJTDGBHAmiBAATAGAHGcAaAHFFBHBaAHDGBKJGCaBGATNBAcAGAHAGdHaBBmYBAAHKGABNKJGgHIFBaATCFABBHAYBGVHDFAHIFAHCFAHEBBTOBAGYHCBBTABAGKB0GUBAGHBUHOcAHfIAG1HAIAHAGAICHHIDHAIBGAHGGJHBTBKJTAFAGOHAIBBAGHBBGBBBGVBAGGBAGABCGDBBHAGAICHDBBIBBBIBHAGABHIABDGBBAGCHBBBKJGBYBMFaAYAGATAHABBHBIABAGFBDGBBBGVBAGGBAGBBAGBBAGBBBHABAICHBBDHBBBHCBCHABGGDBAGABGKJHBGCHATABJHBIABAGIBAGCBAGVBAGGBAGBBAGEBBHAGAICHEBAHBIABAIBHABBGABOGBHBBBKJTAYABGGAHFBAHAIBBAGHBBGBBBGVBAGGBAGBBAGEBBHAGAIAHAIAHDBBIBBBIBHABHHAIABDGBBAGCHBBBKJaAGAMFBJHAGABAGFBCGCBAGDBCGBBAGABAGBBCGBBCGCBCGLBDIBHAIBBCICBAICHABBGABFIABNKJMCaFYAaABEHAICHAGHBAGCBAGWBAGPBCGAHCIDBAHCBAHDBGHBBAGCBEGBHBBBKJBGTAMGaAGAHAIBTAGHBAGCBAGWBAGJBAGEBBHAGAIAHAIEBAHAIBBAIBHBBGIBBGGABAGBHBBBKJBAGBBMHBIBBAGHBAGCBAGoHBGAICHDBAICBAICHAGAaABDGCIAMGGCHBBBKJMIaAGFBBIBBAGRBCGXBAGIBAGABBGGBCHABDICHCBAHABAIHBFKJBBIBTABLGvHAGBHGBDYAGFFAHHTAKJTBBkGBBAGABAGEBAGXBAGABAGJHAGBHIGABBGEBAFABAHFBBKJBBGDBfGAaCTOaATAaCHBaFKJMJaAHAaAHAaAHAPAQAPAQAIBGHBAGjBDHNIAHETAHBGEHKBAHjBAaHHAaFBAaBTEaDTBBkGqIBHDIAHFIAHBIBHBGAKJTFGFIBHBGDHCGAICGBIGGCHDGMHAIBHBIFHAGAIAKJICHAaBClBACABECABBDqTAFADCmIFAABAGDBBGGBAGABAGDBBGoBAGDBBGgBAGDBBGGBAGABAGDBBGOBAG4BAGDBBmCBAABBHCTIMTBCGPaJBFiVBAABBDFBBOAmrJAAaATAGQUAGZPAQABCmKBAATCLCGHBGGMBAGDHCBKGRHCTBBIGRHBBLGMBAGCBAHBBLGzHBIAHGIHHAIBHKTCFATCYAGAHABBKJBFMJBFTFOATDHCcABAKJBFGiFAG0BGGEHBGhHAGABEmFBAABJGeBAHCIDHBICBDIBHAIFHCBDaABCTBKJGdBBGEBKGrBDGZBFKJMABCahGWHBIBHABBTBG0IAHAIAHGBAHAIAHAIBHHIFHJBBHAKJBFKJBFTGFATFBBHNJAhABAAHDIAGuHAIAHEIAHAIEHAIBGGBDKJTGaJHIaIBCHBIAGdIAHDIBHBIAHCGBKJGrHAIAHBICHAIAHCIBBHTDGjIHHHIBHBBCTEKJBCGCKJGdFFTBDIBGCqBBCCTHBHHCTAHMIAHGGDHAGFHAGBIAHBGABEDrF+DMFADhFkH5BAHEgVCAADHghBAADHCHDFBBCFBBDHCHDHCHDFBBCFBBDHBACABACABACABACADHCHDNBBDHEHDHEHDHEHDEBADBCDEAZADAZCDCBADBCDEAZCDDBBDBCDBAZCDHCEZCBBDCBADBCDEAZBBAUKcEOFTBRASAPARBSAPARATHVAWAcEUATIRASATDNBTCXAPAQATKXATANATJUAcEBAcJMAFABBMFXCPAQAFAMJXCPAQABAFMBCYfBPHMJDHAJCHLBOaBCAaDCAaBDACCDBCCDAaACAaBXACEaFCAaACAaACAaACDaADACDDAGDDAaBDBCBXECADDaAXAaBDAaAMPLiCADALDMAaBBDXEaEXBaDXAaBXAaBXAaGXAaeXBaBXAaAXAae3LEAAaHPAQAPAQAaTXBaGPAQA6QBAAXAadXYanXF6EBAABYaKBUM76NBAAMV62CAAXAaIXAa1XH6uBAAXA63DAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAMdarXEPAQAXePAQAPAQAPAQAPAQAPAQAXP6/DAA3CCAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAX+PAQAPAQAXfPAQA3BEAAavXUaBXFamBBafBB6nBAACuBADuBAABCCDBAFCCADDACADFFBCBgjBAADAaFADHCCADABETDMATBDlBADABEDABBG3BGFATABNHAGWBIGGBAGGBAGGBAGGBAGGBAGGBAGGBAGGBAHfTBRASARASATCRASATARASATIOATBOATARASATBRASAPAQAPAQAPAQAPAQATEFATJOBTDOATAPATMBvaZBA6YBAABL6VDAABZaLBDUATCaAFAGALAPAQAPAQAPAQAPAQAPAQAaBPAQAPAQAPAQAPAQAOAPAQBaALIHDIBOAFEaBLCFAGATAaBBAmVBAABBHBZBFBGAOAmZBAATAFCGABEGqBAmdBAABAaBMDaJGaBEajBLGPaeBAMJadMHaAMOafMJamMO6/EAAm1mBABJa/mvHFABPGUFAm2RAABCa2BIGnFFTBmLEAAFATCGPKJGBBTAtGAHAJCTAHJTAFAAbFBHBmFBAALJHBTFBHZWFIZBANDBA9FADHADCAAJFAZBADGAADDBATCDABCDALBBABCCBvGAFBDAGGHAGCHAGDHAGWIBHBIAaDBDMFaBYAaABFGzTDBHIBGxIPHBBHTBKJBFHRGFTCGATAGBHAKJGbHHTBGWHKIBBKTAGcBCHCIAGuHAIBHDIBHBICTMBAFAKJBDTBGEHAFAGIKJGEBAGoHFIBHBIBHBBIGCHAGHHAIABBKJBBTDGPFAGFaCGAIAHAIAGxHAGAHCGBHBGEHBGAHAGABXGBFATBGKIAHBIBTBGAFBIAHABJGFBBGFBBGFBIGGBAGGBADqZAFDDHBHjPBAAGiIBHAIBHAIBTAIAHABBKJBFmjuCABLGWBDGwhDgAA9/jBAmtFAABBmpBAABlDGBLDEBEGAHAGJXAGMBAGEBAGABAGBBAGBBAmrBAAZPBQmqFAAQAPABPG/BBG1BnGLYAaABBHPTGPAQATABFHPTAOBNBPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQATBPAQATDNCTCBATDOAPAQAPAQAPAQATCXAOAXCBATAYATBBDGEBAmGCAABBcABATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAPAQATAPAQATBGJFAGsFBGeBCGFBBGFBBGFBBGCBCYBXAZAaAYBBAaAXDaBBJcCaBBBGLBAGZBAGSBAGBBAGOBBGNBhm6BAABETCBDMsBCaIL0MDaQMBaCBAaLBDaABuasHAhBCAAGcBCGwBOHAMaBDGfMDBIGTLAGHLABEGlHEBEGdBATAGjBDGHTALEBpCnDnmNBAABBKJBFCjBDDjBDGnBHGzBKTAhPCAAm2EAABIGVBJGHhXCAAGFBBGABAGrBAGBBCGABBGWBATAMHGWaBMGGeBHMIBvGSBAGBBEMEGVMFBCTAGZBETAB/G3BDMBGBMPBBMtGAHCBAHBBEHDGDBAGCBAGcBBHCBDHAMIBGTIBGGcMBTAGcMCBfGHaAGbHBBDMETGBIG1BCTGGVBBMHGSBEMHGRBGTDBLMGhPBAAmIBAAB2CyBMDyBGMFGjHDBHKJhlEAAMehACAAGcMJGABHGVHKMDTEhFCAAGWBIIAHAIAG0HOTGBDMTKJBOHCIAGsICHDIBHBTBcATDBKcABBGYBGKJBFHCGjHEIAHHBAKJTDGAIBBIGiHATBGABIHBIAGvICHIIBGDTDHDTABBKJGATAGATCBAMTBKGRBAGYICHCIBHAIAHBTFHAhABAAGGBAGABAGDBAGOBAGJTABFGuHAICHHBEKJBFHBIBBAGHBBGBBBGVBAGGBAGBBAGEBAHBGAIBHAIDBBIBBBICBBGABFIABEGEIBBBHGBCHEhKCAAG0ICHHIBHCIAHAGDTEKJBATABATAHAGABfGvICHFIAHAIDHBIAHBGBTAGABHKJhlCAAGuICHDBBIDHBIAHBTWGDHBBhGvICHHIBHAIAHBTCGABKKJBFTMBSGqHAIAHAIBHFIAHAGABGKJB1GaBBHCIBHDIAHEBDKJMBTCaAh/CAAGrICHIIAHBTAhjBAACfDfKJMIBLGAhfCAAGHBBGmICHDBBHBIDHAGATAGAIABaGAHJGnHFIAGAHDTHHABHGAHFIBHCGtHMIAHBTCGATEBcG4hGEAAGIBAGkIAHGBAHFIAHAGATEBJKJMSBCTBGdBBHVBAIAHGIAHBIAHBhIBAAGGBAGBBAGlHFBCHABAHBBAHGGAHABHKJBFGFBAGBBAGfIEBAHBBAIBHAIAHAGABGKJh1EAAGSHBIBTBhGDAAMUaHYDaQBMTAmZOAAhlBAAruBAABATEBKmDDAAh7qAAmuQAABAcIhG/AAmGJAAh4GCAm4IAABGGeBAKJBDTBhfBAAGdBBHETABJGvHGTEaDFDTAaABJKJBAMGBAGUBEGShvKAACfDfMWTDhkBAAmKBAABDHAGAI2BGHDFMB/FBTAFABbm3fBABHmyLAAhMUCAmeEAABwGCBQGDBHmLGAAhDkAAmqBAABEGMBCGIBGGJBBaAHBTAcDhbNBA61DAABJamBBa7IBHCaCIFcHHHaBHGadHDa6BW6BBAAHCaAhZCAAMTBL6WBAABIMYhGCAACZDZCZDGBADRCZDZCABACBBBCABBCBBBCDBACHDDBADABADGBADKCZDZCBBACDBBCHBACGBADZCBBACDBACEBACABCCGBADZCZDZCZDZCZDZCZDZCZDZCZDbBBCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCADABBKx6/HAAH2aDHxaHHAaNHAaBTEBOHEBAHOhPVAAHGBAHQBBHGBAHBBAHEhUDAAGsBCHGFGBBKJBDGAaAhvFAAGrHDKJBEYAh/TAAmEDAABBMIHGBoChDhHGFABDKJBDTBhQMAAM6aAMCYAMDhLBAAMsaAMOhBDAAGDBAGaBAGBBAGABBGABAGJBAGDBAGABAGABFGABDGABAGABAGABAGCBAGBBAGABBGABAGABAGABAGABAGABAGBBAGABBGDBAGGBAGDBAGDBAGABAGJBAGQBEGCBAGEBAGQBzXBhNEAAarBD6jBAABLaOBBaOBAaOBAakBJMMBC6cBAABCa8B4acBMarBDaIBGaBBNaFhZCAA66DAAZE6VLAABJaMBCaKBE6zBAABL6YBAABGaLBTaLBDa3BHaJBFanBHadhRBAAaLBA6kBAABAaDBCaoBBaFBCacBB6GCAABLaNBBaDBDaCBEaCBMaFhpVAAmWbKABom0ABABKmdDAABBmBaBABNmw0BAhewAAmdIAAhiXwCcABd8fBAAh/BAAnvDAAhP4PA99/PABB99/PA".split(""),r=rs.map((()=>[]));let i=0,o=0;for(;o<n.length;){const e=is[n[o]],t=(31&e)-2;let s=1+is[n[o+1]];switch(32&e?(s+=is[n[o+2]]<<6,s+=is[n[o+3]]<<12,s+=is[n[o+4]]<<18,o+=5):o+=2,t){case-2:{let e=0;for(let t=i;t<i+s;++t)r[e].push(Bo(t)),e=(e+1)%2;break}case-1:break;default:{const e=r[t];1===s?e.push(Bo(i)):e.push(Io(i,i+s-1));break}}i+=s}const s=new Map;return rs.forEach(((e,n)=>{const i=r[n].reduce(Do,Mo);t.set(e,i);const o=e.charAt(0),a=s.get(o)||[];s.set(o,a),a.push(i)})),s.forEach(((e,n)=>{t.set(n,e.reduce(Do,Mo))})),t}();function hs(e){return 32===e||9===e||10===e||13===e}const ps=[Bo(os(":")),Io(os("A"),os("Z")),Bo(os("_")),Io(os("a"),os("z")),Io(192,214),Io(216,246),Io(192,214),Io(216,246),Io(248,767),Io(880,893),Io(895,8191),Io(8204,8205),Io(8304,8591),Io(11264,12271),Io(12289,55295),Io(63744,64975),Io(65008,65533),Io(65536,983039)].reduce(Do),ds=[ps,Bo(os("-")),Bo(os(".")),Io(os("0"),os("9")),Bo(183),Io(768,879),Io(8255,8256)].reduce(Do),fs=cs.get("Nd"),ms=as(fs),gs=ls(Io(0,1114111),[cs.get("P"),cs.get("Z"),cs.get("C")].reduce(Do)),ys=as(gs);function vs(e){return 10!==e&&13!==e&&!ss(e)}const ws={s:hs,S:as(hs),i:ps,I:as(ps),c:ds,C:as(ds),d:fs,D:ms,w:gs,W:ys},bs=Ho("*"),xs=Ho("\\"),As=Ho("{"),_s=Ho("}"),ks=Ho("["),Es=Ho("]"),Cs=Ho("^"),Ss=Ho("$"),Os=Ho(","),Ts=Ho("-"),Ns=Ho("("),Bs=Ho(")"),Is=Ho("."),Ps=Ho("|"),Ms=Ho("+"),Ds=Ho("?"),Rs=Ho("-["),Fs=os("0");function Ls(e){return[...e].map((e=>e.codePointAt(0)))}var Us=Object.freeze({__proto__:null,compile:function(e,t={language:"xsd"}){const n=function(e){function t(e){return new Set(e.split("").map((e=>os(e))))}function n(e,t){const n=e.codePointAt(t);return void 0===n?$o(t,["any character"]):Lo(t+String.fromCodePoint(n).length,n)}const r="xpath"===e.language?Ko(xs,zo([Go(Ho("n"),(()=>10)),Go(Ho("r"),(()=>13)),Go(Ho("t"),(()=>9)),Go(zo([xs,Ps,Is,Ts,Cs,Ds,bs,Ms,As,_s,Ss,Ns,Bs,ks,Es]),(e=>os(e)))])):Ko(xs,zo([Go(Ho("n"),(()=>10)),Go(Ho("r"),(()=>13)),Go(Ho("t"),(()=>9)),Go(zo([xs,Ps,Is,Ts,Cs,Ds,bs,Ms,As,_s,Ns,Bs,ks,Es]),(e=>os(e)))]));function i(e,r){const i=t(r);return qo(Ho(e),Vo(jo(n,(e=>i.has(e)),r.split(""))),((e,t)=>function(e){const t=cs.get(e);if(null==t)throw new Error(e+" is not a valid unicode category");return t}(null===t?e:e+String.fromCodePoint(t))))}const o=zo([i("L","ultmo"),i("M","nce"),i("N","dlo"),i("P","cdseifo"),i("Z","slp"),i("S","mcko"),i("C","cfon")]),s=[Io(os("a"),os("z")),Io(os("A"),os("Z")),Io(os("0"),os("9")),Bo(45)].reduce(Do),a=zo([o,Go(Ko(Ho("Is"),function(e){return(t,n)=>{const r=e(t,n);return r.success?Lo(r.offset,t.slice(n,r.offset)):r}}(Wo(jo(n,s,["block identifier"])))),(t=>function(e,t){const n=us.get(e);if(void 0===n){if(t)return Po;throw new Error(`The unicode block identifier "${e}" is not known.`)}return n}(t,"xpath"!==e.language)))]),l=Jo(Ho("\\p{"),a,_s,!0),u=Go(Jo(Ho("\\P{"),a,_s,!0),as),c=Ko(xs,Go(zo("sSiIcCdDwW".split("").map((e=>Ho(e)))),(e=>ws[e]))),h=Go(Is,(()=>vs)),p=zo([c,l,u]),d=t("\\[]"),f=zo([r,jo(n,(e=>!d.has(e)),["unescaped character"])]),m=zo([Go(Ts,(()=>null)),f]),g=qo(m,Ko(Ts,m),Io);function y(e,t){return[e].concat(t||[])}const v=Go(function(e){return(t,n)=>{const r=e(t,n);return r.success?Lo(n,r.value):r}}(zo([Es,Rs])),(()=>null)),w=os("-"),b=zo([Go(Zo(Zo(Ts,es(ks,["not ["])),v),(()=>w)),Ko(es(Ts,["not -"]),f)]),x=zo([qo(Go(b,Bo),zo([function(e,t){return x(e,t)},v]),y),qo(zo([g,p]),zo([_,v]),y)]),A=zo([qo(Go(f,Bo),zo([x,v]),y),qo(zo([g,p]),zo([_,v]),y)]);function _(e,t){return A(e,t)}const k=Go(A,(e=>e.reduce(Do))),E=Go(Ko(Cs,k),as),C=qo(zo([Ko(es(Cs,["not ^"]),k),E]),Vo(Ko(Ts,(function(e,t){return S(e,t)}))),ls),S=Jo(ks,C,Es,!0),O="xpath"===e.language?zo([Go(r,Bo),p,S,h,Go(Cs,(()=>e=>-1===e)),Go(Ss,(()=>e=>-2===e))]):zo([Go(r,Bo),p,S,h]),T="xpath"===e.language?t(".\\?*+{}()|^$[]"):t(".\\?*+{}()|[]"),N=jo(n,(e=>!T.has(e)),["NormalChar"]),B=Go(Ko(xs,qo(Go(jo(n,Io(os("1"),os("9")),["digit"]),(e=>e-Fs)),Xo(Go(jo(n,Io(Fs,os("9")),["digit"]),(e=>e-Fs))),((e,t)=>{t.reduce(((e,t)=>10*e+t),e)}))),(e=>{throw new Error("Backreferences in XPath patterns are not yet implemented.")})),I="xpath"===e.language?zo([Go(N,(e=>({kind:"predicate",value:Bo(e)}))),Go(O,(e=>({kind:"predicate",value:e}))),Go(Jo(Ns,Ko(Vo(Ho("?:")),L),Bs,!0),(e=>({kind:"regexp",value:e}))),B]):zo([Go(N,(e=>({kind:"predicate",value:Bo(e)}))),Go(O,(e=>({kind:"predicate",value:e}))),Go(Jo(Ns,L,Bs,!0),(e=>({kind:"regexp",value:e})))]),P=Go(Wo(Go(jo(n,Io(Fs,os("9")),["digit"]),(e=>e-Fs))),(e=>e.reduce(((e,t)=>10*e+t)))),M=zo([qo(P,Ko(Os,P),((e,t)=>{if(t<e)throw new Error("quantifier range is in the wrong order");return{min:e,max:t}})),qo(P,Os,(e=>({min:e,max:null}))),Go(P,(e=>({min:e,max:e})))]),D="xpath"===e.language?qo(zo([Go(Ds,(()=>({min:0,max:1}))),Go(bs,(()=>({min:0,max:null}))),Go(Ms,(()=>({min:1,max:null}))),Jo(As,M,_s,!0)]),Vo(Ds),((e,t)=>e)):zo([Go(Ds,(()=>({min:0,max:1}))),Go(bs,(()=>({min:0,max:null}))),Go(Ms,(()=>({min:1,max:null}))),Jo(As,M,_s,!0)]),R=Xo(qo(I,Go(Vo(D),(e=>null===e?{min:1,max:1}:e)),((e,t)=>[e,t]))),F=qo(R,Xo(Ko(Ps,ts(R))),((e,t)=>[e].concat(t)));function L(e,t){return F(e,t)}const U=function(e){return qo(e,ns,Yo)}(F);return function(e){let t;try{t=U(e,0)}catch(t){throw new Error(`Error parsing pattern "${e}": ${t instanceof Error?t.message:t}`)}return t.success?t.value:function(e,t,n){const r=n.map((e=>`"${e}"`));throw new Error(`Error parsing pattern "${e}" at offset ${t}: expected ${r.length>1?"one of "+r.join(", "):r[0]} but found "${e.slice(t,t+1)}"`)}(e,t.offset,t.expected)}}(t)(e),r=function(e){const t=new wo;return e(t),new No(t.program)}((e=>{Fo(e,n,"xpath"===t.language),e.accept()}));return function(e){const n="xpath"===t.language?[-1,...Ls(e),-2]:Ls(e);return r.execute(n).success}}});function $s(e,t){return{success:!0,offset:e,value:t}}function Hs(e){return $s(e,void 0)}function Gs(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function js(e){return e>65535?2:1}function zs(e,t){return(n,r)=>{const i=n.codePointAt(r);return void 0!==i&&e(i)?Hs(r+js(i)):Gs(r,t)}}function Vs(e,t){return(n,r)=>{const i=e(n,r);return i.success?$s(i.offset,t(i.value)):i}}function Xs(e){return(t,n)=>{let r=[],i=n;for(;;){const n=e(t,i);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===i)break;i=n.offset}return $s(i,r)}}function qs(e){return(t,n)=>{let r=n;for(;;){const n=e(t,r);if(!n.success){if(n.fatal)return n;break}if(n.offset===r)break;r=n.offset}return Hs(r)}}function Ws(e,t,n){return(r,i)=>{const o=e(r,i);if(!o.success)return o;const s=t(r,o.offset);return s.success?$s(s.offset,n(o.value,s.value)):s}}function Ys(e,t){return e}function Qs(e,t){return t}function Ks(e,t){return Ws(e,t,Qs)}function Zs(e,t){return Ws(e,t,Ys)}function Js(e,t){return(n,r)=>e(n,r).success?Gs(r,t):Hs(r)}function ea(e){return(t,n)=>{const r=e(t,n);return r.success?r:Gs(r.offset,r.expected,!0)}}const ta=(e,t)=>e.length===t?Hs(t):Gs(t,["end of input"]);function na(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return[t,n.value]}var ra=Object.freeze({__proto__:null,codepoint:zs,codepoints:function(e,t){return(n,r)=>{const i=r;for(;;){const t=n.codePointAt(r);if(void 0===t)break;if(!e(t))break;r+=t>65535?2:1}return void 0!==t&&r===i?Gs(r,t):Hs(r)}},collect:na,complete:function(e){return Ws(e,ta,Ys)},consume:function(e){return Vs(e,(()=>{}))},cut:ea,delimited:function(e,t,n,r=!1){return Ks(e,r?ea(Zs(t,n)):Zs(t,n))},dispatch:function(e,t,n=0,r=[]){return(i,o)=>{const s=i.codePointAt(o+n);if(void 0===s)return Gs(o,r);const a=e[s];return void 0===a?void 0===t?Gs(o,r):t(i,o):a(i,o)}},end:ta,error:Gs,except:function(e,t,n){return Ks(Js(t,n),e)},filter:function(e,t,n,r){return(i,o)=>{const s=e(i,o);return s.success?t(s.value)?s:Gs(o,n,r):s}},filterUndefined:function(e){return Vs(e,(e=>e.filter((e=>void 0!==e))))},first:Ys,followed:Zs,map:Vs,not:Js,ok:Hs,okWithValue:$s,optional:function(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:$s(n,null)}},or:function(e,t){return(n,r)=>{let i=null;for(const o of e){const e=o(n,r);if(e.success)return e;if(null===i||e.offset>i.offset?i=e:e.offset===i.offset&&void 0===t&&(i.expected=i.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==i?void 0:i.expected)||[],i&&(i.expected=t),i||Gs(r,t)}},peek:function(e){return(t,n)=>{const r=e(t,n);return r.success?$s(n,r.value):r}},plus:function(e){return Ws(e,Xs(e),((e,t)=>[e].concat(t)))},plusConsumed:function(e){return Ws(e,qs(e),Qs)},preceded:Ks,range:function(e,t,n){return zs((n=>e<=n&&n<=t),n||[`${String.fromCodePoint(e)}-${String.fromCodePoint(t)}`])},recognize:function(e){return(t,n)=>{const r=e(t,n);return r.success?$s(r.offset,t.slice(n,r.offset)):r}},second:Qs,sequence:function(...e){return(t,n)=>{const r=[];for(const i of e){const e=i(t,n);if(!e.success)return e;n=e.offset,r.push(e.value)}return $s(n,r)}},sequenceConsumed:function(...e){return(t,n)=>{for(const r of e){const e=r(t,n);if(!e.success)return e;n=e.offset}return Hs(n)}},skipChars:function(e){return(t,n)=>{let r=e;for(;r>0;){const e=t.codePointAt(n);if(void 0===e)return Gs(n,["any character"]);n+=js(e),r-=1}return Hs(n)}},star:Xs,starConsumed:qs,start:(e,t)=>0===t?Hs(t):Gs(t,["start of input"]),streaming:function(e){return function*(t,n){const r=e(t,n);return r.success&&(yield r.value),r}},streamingComplete:function(e){return function*(t,n){const r=yield*e(t,n);return r.success?ta(t,r.offset):r}},streamingFilterUndefined:function(e){return function*(t,n){const r=e(t,n);let i=r.next();for(;!i.done;){const e=i.value;void 0!==e&&(yield e),i=r.next()}return i.value}},streamingOptional:function(e){return function*(t,n){const[r,i]=na(e(t,n));return i.success?(yield*r,i):i.fatal?i:Hs(n)}},streamingStar:function(e){return function*(t,n){for(;;){const[r,i]=na(e(t,n));if(!i.success)return i.fatal?i:Hs(n);if(yield*r,n===i.offset)return Hs(n);n=i.offset}}},streamingThen:function(e,t){return function*(n,r){const i=yield*e(n,r);return i.success?yield*t(n,i.offset):i}},then:Ws,token:function(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?$s(r,e):Gs(n,[e])}}});const ia=function(e,t){const n={};var r;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var s=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{var n=s;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function c(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function h(e){return e instanceof Array?e:c(u(e))}a("Symbol",(function(e){function t(e,t){this.h=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),a("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=s[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&o(r.prototype,e,{configurable:!0,writable:!0,value:function(){return l(i(this))}})}return e})),a("Symbol.asyncIterator",(function(e){return e||Symbol("Symbol.asyncIterator")}));var p,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var f;e:{var m={};try{m.__proto__={a:!0},f=m.a;break e}catch(e){}f=!1}p=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=p;function y(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Pc=t.prototype}function v(){this.j=!1,this.s=null,this.u=void 0,this.h=1,this.ha=0,this.A=null}function w(e){if(e.j)throw new TypeError("Generator is already running");e.j=!0}function b(e,t){e.A={Ac:t,Cc:!0},e.h=e.ha}function x(e){this.h=new v,this.s=e}function A(e,t,n,r){try{var i=t.call(e.h.s,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.h.j=!1,i;var o=i.value}catch(t){return e.h.s=null,b(e.h,t),_(e)}return e.h.s=null,r.call(e.h,o),_(e)}function _(e){for(;e.h.h;)try{var t=e.s(e.h);if(t)return e.h.j=!1,{value:t.value,done:!1}}catch(t){e.h.u=void 0,b(e.h,t)}if(e.h.j=!1,e.h.A){if(t=e.h.A,e.h.A=null,t.Cc)throw t.Ac;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return w(e.h),e.h.s?t=A(e,e.h.s.next,t,e.h.O):(e.h.O(t),t=_(e)),t},this.throw=function(t){return w(e.h),e.h.s?t=A(e,e.h.s.throw,t,e.h.O):(b(e.h,t),t=_(e)),t},this.return=function(t){return function(e,t){w(e.h);var n=e.h.s;return n?A(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v.prototype.O=function(e){this.u=e},v.prototype.return=function(e){this.A={return:e},this.h=this.ha},a("Promise",(function(e){function t(e){this.s=0,this.A=void 0,this.h=[],this.ha=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.h=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.s=function(e){if(null==this.h){this.h=[];var t=this;this.A((function(){t.u()}))}this.h.push(e)};var i=s.setTimeout;n.prototype.A=function(e){i(e,0)},n.prototype.u=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.h=null},n.prototype.j=function(e){this.A((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.pa),reject:e(this.u)}},t.prototype.pa=function(e){if(e===this)this.u(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.xa(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.ka(e):this.O(e)}},t.prototype.ka=function(e){var t=void 0;try{t=e.then}catch(e){return void this.u(e)}"function"==typeof t?this.ob(t,e):this.O(e)},t.prototype.u=function(e){this.B(2,e)},t.prototype.O=function(e){this.B(1,e)},t.prototype.B=function(e,t){if(0!=this.s)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.s);this.s=e,this.A=t,2===this.s&&this.$a(),this.J()},t.prototype.$a=function(){var e=this;i((function(){if(e.T()){var t=s.console;void 0!==t&&t.error(e.A)}}),1)},t.prototype.T=function(){if(this.ha)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.A,n(e))},t.prototype.J=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)o.s(this.h[e]);this.h=null}};var o=new n;return t.prototype.xa=function(e){var t=this.j();e.pb(t.resolve,t.reject)},t.prototype.ob=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,s=new t((function(e,t){i=e,o=t}));return this.pb(r(e,i),r(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.pb=function(e,t){function n(){switch(r.s){case 1:e(r.A);break;case 2:t(r.A);break;default:throw Error("Unexpected state: "+r.s)}}var r=this;null==this.h?o.s(n):this.h.push(n),this.ha=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=u(e),o=i.next();!o.done;o=i.next())r(o.value).pb(t,n)}))},t.all=function(e){var n=u(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).pb(o(s.length-1),t),i=n.next()}while(!i.done)}))},t}));var C="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)E(r,i)&&(e[i]=r[i])}return e};function S(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function O(e,t){return e=void 0!==e?String(e):" ",0<t&&e?e.repeat(Math.ceil(t/e.length)).substring(0,t):""}function T(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Hb:i,Ob:o}}return{Hb:-1,Ob:void 0}}function N(e){return e||Array.prototype.fill}function B(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function I(e,t){if(!("0"!==e&&"-0"!==e||"0"!==t&&"-0"!==t))return 0;var n=/(?:\+|(-))?(\d+)?(?:\.(\d+))?/;e=n.exec(e+"");var r=n.exec(t+""),i=!e[1],o=!r[1];return t=(e[2]||"").replace(/^0*/,""),n=(r[2]||"").replace(/^0*/,""),e=e[3]||"",r=r[3]||"",i&&!o?1:!i&&o?-1:(i=i&&o,t.length>n.length?i?1:-1:t.length<n.length?i?-1:1:t>n?i?1:-1:t<n?i?-1:1:(t=Math.max(e.length,r.length),(n=e.padEnd(t,"0"))>(t=r.padEnd(t,"0"))?i?1:-1:n<t?i?-1:1:0))}function P(e,t){return!(-1<(e=e.toString()).indexOf(".")&&0===t)&&(!(e=/^[-+]?0*([1-9]\d*)?(?:\.((?:\d*[1-9])*)0*)?$/.exec(e))[2]||e[2].length<=t)}function M(e,t){switch(t){case"required":return/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"prohibited":return!/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"optional":return!0}}function D(e){switch(e){case 1:case 0:case 6:case 3:case 18:case 22:case 21:case 20:case 23:case 44:return{};case 4:return{na:P,ua:function(e,t){return 1>I(e,t)},Nc:function(e,t){return 0>I(e,t)},va:function(e,t){return-1<I(e,t)},Oc:function(e,t){return 0<I(e,t)}};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{za:M};default:return null}}a("Object.assign",(function(e){return e||C})),a("String.prototype.repeat",(function(e){return e||function(e){var t=S(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),a("String.prototype.padEnd",(function(e){return e||function(e,t){var n=S(this,null,"padStart");return n+O(t,e-n.length)}})),a("WeakMap",(function(e){function t(e){if(this.h=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!E(e,a)){var t=new n;o(e,a,{value:t})}}function s(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();s("freeze"),s("preventExtensions"),s("seal");var l=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!E(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.h]=t,this},t.prototype.get=function(e){return r(e)&&E(e,a)?e[a][this.h]:void 0},t.prototype.has=function(e){return r(e)&&E(e,a)&&E(e[a],this.h)},t.prototype.delete=function(e){return!!(r(e)&&E(e,a)&&E(e[a],this.h))&&delete e[a][this.h]},t})),a("Map",(function(e){function t(){var e={};return e.Da=e.next=e.head=e}function n(e,t){var n=e.h;return l((function(){if(n){for(;n.head!=e.h;)n=n.Da;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var r=e.s[n];if(r&&E(e.s,n))for(e=0;e<r.length;e++){var i=r[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:r,index:e,ja:i}}return{id:n,list:r,index:-1,ja:void 0}}function i(e){if(this.s={},this.h=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;var o=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.s[n.id]=[]),n.ja?n.ja.value=t:(n.ja={next:this.h,Da:this.h.Da,head:this.h,key:e,value:t},n.list.push(n.ja),this.h.Da.next=n.ja,this.h.Da=n.ja,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).ja||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.s[e.id],e.ja.Da.next=e.ja.next,e.ja.next.Da=e.ja.Da,e.ja.head=null,this.size--,!0)},i.prototype.clear=function(){this.s={},this.h=this.h.Da=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).ja},i.prototype.get=function(e){return(e=r(this,e).ja)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i})),a("Array.prototype.find",(function(e){return e||function(e,t){return T(this,e,t).Ob}})),a("String.prototype.startsWith",(function(e){return e||function(e,t){var n=S(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}})),a("Array.prototype.fill",(function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}})),a("Int8Array.prototype.fill",N),a("Uint8Array.prototype.fill",N),a("Uint8ClampedArray.prototype.fill",N),a("Int16Array.prototype.fill",N),a("Uint16Array.prototype.fill",N),a("Int32Array.prototype.fill",N),a("Uint32Array.prototype.fill",N),a("Float32Array.prototype.fill",N),a("Float64Array.prototype.fill",N),a("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)r.push(t.call(n,i.value,o++))}else for(i=e.length,o=0;o<i;o++)r.push(t.call(n,e[o],o));return r}})),a("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),a("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),a("String.prototype.includes",(function(e){return e||function(e,t){return-1!==S(this,e,"includes").indexOf(e,t||0)}})),a("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991})),a("Number.MIN_SAFE_INTEGER",(function(){return-9007199254740991})),a("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),a("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}})),a("String.prototype.padStart",(function(e){return e||function(e,t){var n=S(this,null,"padStart");return O(t,e-n.length)+n}})),a("Array.prototype.keys",(function(e){return e||function(){return B(this,(function(e){return e}))}})),a("Number.isInteger",(function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}})),a("Number.isSafeInteger",(function(e){return e||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER}})),a("Array.prototype.findIndex",(function(e){return e||function(e,t){return T(this,e,t).Hb}})),a("String.prototype.endsWith",(function(e){return e||function(e,t){var n=S(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}})),a("String.fromCodePoint",(function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}})),a("String.prototype.codePointAt",(function(e){return e||function(e){var t=S(this,null,"codePointAt"),n=t.length;if(0<=(e=Number(e)||0)&&e<n){e|=0;var r=t.charCodeAt(e);return 55296>r||56319<r||e+1===n||(56320>(e=t.charCodeAt(e+1))||57343<e)?r:1024*(r-55296)+e+9216}}})),a("Set",(function(e){function t(e){if(this.h=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.h.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.h.set(e,e),this.size=this.h.size,this},t.prototype.delete=function(e){return e=this.h.delete(e),this.size=this.h.size,e},t.prototype.clear=function(){this.h.clear(),this.size=0},t.prototype.has=function(e){return this.h.has(e)},t.prototype.entries=function(){return this.h.entries()},t.prototype.values=function(){return this.h.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.h.forEach((function(r){return e.call(t,r,r,n)}))},t)})),a("Math.log10",(function(e){return e||function(e){return Math.log(e)/Math.LN10}})),a("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)E(e,t)&&n.push(e[t]);return n}})),a("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),a("Array.prototype.values",(function(e){return e||function(){return B(this,(function(e,t){return t}))}})),a("Object.getOwnPropertySymbols",(function(e){return e||function(){return[]}}));var R={},F={};function L(e){return/^([+-]?(\d*(\.\d*)?([eE][+-]?\d*)?|INF)|NaN)$/.test(e)}function U(e){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(e)}function $(e){return U(e)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(e)}function H(e){return 1===(e=e.split(":")).length?$(e[0]):2===e.length&&($(e[0])&&$(e[1]))}function G(e){return!/[\u0009\u000A\u000D]/.test(e)}function j(e){return $(e)}var z=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(e){return/^(0|1|true|false)$/.test(e)}],[6,function(e){return L(e)}],[3,L],[4,function(e){return/^[+-]?\d*(\.\d*)?$/.test(e)}],[18,function(e){return/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.test(e)}],[9,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[8,function(e){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[7,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[11,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[12,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[13,function(e){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[15,function(e){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[14,function(e){return/^--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[22,function(e){return/^([0-9A-Fa-f]{2})*$/.test(e)}],[21,function(e){return new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/).test(e)}],[20,function(){return!0}],[44,H],[48,G],[52,function(e){return G(e)&&!/^ | {2,}| $/.test(e)}],[51,function(e){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(e)}],[50,function(e){return/^[-._:A-Za-z0-9]+$/.test(e)}],[25,U],[23,H],[24,$],[42,j],[41,j],[26,function(e){return $(e)}],[5,function(e){return/^[+-]?\d+$/.test(e)}],[16,function(e){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(e)}],[17,function(e){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]+)?S)?)?$/.test(e)}]]),V=Object.create(null);function X(e,t){if(!V[t])throw Error("Unknown type");return{type:t,value:e}}[{D:0,name:59},{D:0,name:46,parent:59,K:{whiteSpace:"preserve"}},{D:0,name:19,parent:46},{D:0,name:1,parent:46},{D:0,name:0,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:4,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:6,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:3,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:18,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:9,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:8,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:7,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:11,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:12,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:13,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:15,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:14,parent:46,K:{za:"optional",whiteSpace:"collapse"}},{D:0,name:22,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:21,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:20,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:23,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:44,parent:46,K:{whiteSpace:"collapse"}},{D:1,name:10,U:9,K:{whiteSpace:"collapse",za:"required"}},{D:1,name:48,U:1,K:{whiteSpace:"replace"}},{D:1,name:52,U:48,K:{whiteSpace:"collapse"}},{D:1,name:51,U:52,K:{whiteSpace:"collapse"}},{D:1,name:50,U:52,K:{whiteSpace:"collapse"}},{D:2,name:49,type:50,K:{minLength:1,whiteSpace:"collapse"}},{D:1,name:25,U:52,K:{whiteSpace:"collapse"}},{D:1,name:24,U:25,K:{whiteSpace:"collapse"}},{D:1,name:42,U:24,K:{whiteSpace:"collapse"}},{D:1,name:41,U:24,K:{whiteSpace:"collapse"}},{D:2,name:43,type:41,K:{minLength:1,whiteSpace:"collapse"}},{D:1,name:26,U:24,K:{whiteSpace:"collapse"}},{D:2,name:40,type:26,K:{minLength:1,whiteSpace:"collapse"}},{D:0,name:5,parent:4,K:{na:0,whiteSpace:"collapse"}},{D:1,name:27,U:5,K:{na:0,ua:"0",whiteSpace:"collapse"}},{D:1,name:28,U:27,K:{na:0,ua:"-1",whiteSpace:"collapse"}},{D:1,name:31,U:5,K:{na:0,ua:"9223372036854775807",va:"-9223372036854775808",whiteSpace:"collapse"}},{D:1,name:32,U:31,K:{na:0,ua:"2147483647",va:"-2147483648",whiteSpace:"collapse"}},{D:1,name:33,U:32,K:{na:0,ua:"32767",va:"-32768",whiteSpace:"collapse"}},{D:1,name:34,U:33,K:{na:0,ua:"127",va:"-128",whiteSpace:"collapse"}},{D:1,name:30,U:5,K:{na:0,va:"0",whiteSpace:"collapse"}},{D:1,name:36,U:30,K:{na:0,ua:"18446744073709551615",va:"0",whiteSpace:"collapse"}},{D:1,name:35,U:36,K:{na:0,ua:"4294967295",va:"0",whiteSpace:"collapse"}},{D:1,name:38,U:35,K:{na:0,ua:"65535",va:"0",whiteSpace:"collapse"}},{D:1,name:37,U:38,K:{na:0,ua:"255",va:"0",whiteSpace:"collapse"}},{D:1,name:29,U:30,K:{na:0,va:"1",whiteSpace:"collapse"}},{D:1,name:16,U:18,K:{whiteSpace:"collapse"}},{D:1,name:17,U:18,K:{whiteSpace:"collapse"}},{D:1,name:60,U:59},{D:3,name:39,Ca:[]},{D:1,name:61,U:60},{D:1,name:62,U:60},{D:0,name:53,parent:59},{D:1,name:54,U:53},{D:1,name:58,U:53},{D:1,name:47,U:53},{D:1,name:56,U:53},{D:1,name:57,U:53},{D:1,name:55,U:53},{D:3,name:2,Ca:[4,5,6,3]},{D:3,name:63,Ca:[]}].forEach((function(e){var t=e.name,n=e.K||{};switch(e.D){case 0:e=e.parent?V[e.parent]:null;var r=z.get(t)||null;V[t]={D:0,type:t,Ka:n,parent:e,hb:r,Na:D(t),Ca:[]};break;case 1:e=V[e.U],r=z.get(t)||null,V[t]={D:1,type:t,Ka:n,parent:e,hb:r,Na:e.Na,Ca:[]};break;case 2:V[t]={D:2,type:t,Ka:n,parent:V[e.type],hb:null,Na:R,Ca:[]};break;case 3:e=e.Ca.map((function(e){return V[e]})),V[t]={D:3,type:t,Ka:n,parent:null,hb:null,Na:F,Ca:e}}}));var q=X(!0,0),W=X(!1,0);function Y(e){return Error("FORG0006: "+(void 0===e?"A wrong argument type was specified in a function call.":e))}function Q(e,t){this.done=e,this.value=t}var K=new Q(!0,void 0);function Z(e){return new Q(!1,e)}function J(e,t){if(3===t.D)return!!t.Ca.find((function(t){return J(e,t)}));for(;e;){if(e.type===t.type)return!0;if(3===e.D)return!!e.Ca.find((function(e){return ee(e.type,t.type)}));e=e.parent}return!1}function ee(e,t){return e===t||J(V[e],V[t])}function te(e){this.s=ge,this.h=e;var t=-1;this.value={next:function(){return++t>=e.length?K:Z(e[t])}}}function ne(){this.value={next:function(){return K}}}function re(e,t){this.type=e,this.value=t}(r=te.prototype).qb=function(){return this},r.filter=function(e){var t=this,n=-1;return this.s.create({next:function(){for(n++;n<t.h.length&&!e(t.h[n],n,t);)n++;return n>=t.h.length?K:Z(t.h[n])}})},r.first=function(){return this.h[0]},r.N=function(){return this.h},r.getEffectiveBooleanValue=function(){if(ee(this.h[0].type,53))return!0;throw Y("Cannot determine the effective boolean value of a sequence with a length higher than one.")},r.Pa=function(){return this.h.length},r.G=function(){return!1},r.ta=function(){return!1},r.map=function(e){var t=this,n=-1;return this.s.create({next:function(){return++n>=t.h.length?K:Z(e(t.h[n],n,t))}},this.h.length)},r.L=function(e){return e(this.h)},r.$=function(e){return e.multiple?e.multiple(this):e.default(this)},(r=ne.prototype).qb=function(){return this},r.filter=function(){return this},r.first=function(){return null},r.N=function(){return[]},r.getEffectiveBooleanValue=function(){return!1},r.Pa=function(){return 0},r.G=function(){return!0},r.ta=function(){return!1},r.map=function(){return this},r.L=function(e){return e([])},r.$=function(e){return e.empty?e.empty(this):e.default(this)};var ie={},oe=(ie[0]="xs:boolean",ie[1]="xs:string",ie[2]="xs:numeric",ie[3]="xs:double",ie[4]="xs:decimal",ie[5]="xs:integer",ie[6]="xs:float",ie[7]="xs:date",ie[8]="xs:time",ie[9]="xs:dateTime",ie[10]="xs:dateTimeStamp",ie[11]="xs:gYearMonth",ie[12]="xs:gYear",ie[13]="xs:gMonthDay",ie[14]="xs:gMonth",ie[15]="xs:gDay",ie[16]="xs:yearMonthDuration",ie[17]="xs:dayTimeDuration",ie[18]="xs:duration",ie[19]="xs:untypedAtomic",ie[20]="xs:anyURI",ie[21]="xs:base64Binary",ie[22]="xs:hexBinary",ie[23]="xs:QName",ie[24]="xs:NCName",ie[25]="xs:Name",ie[26]="xs:ENTITY",ie[27]="xs:nonPositiveInteger",ie[28]="xs:negativeInteger",ie[29]="xs:positiveInteger",ie[30]="xs:nonNegativeInteger",ie[31]="xs:long",ie[32]="xs:int",ie[33]="xs:short",ie[34]="xs:byte",ie[35]="xs:unsignedInt",ie[36]="xs:unsignedLong",ie[37]="xs:unsignedByte",ie[38]="xs:unsignedShort",ie[39]="xs:error",ie[40]="xs:ENTITIES",ie[41]="xs:IDREF",ie[42]="xs:ID",ie[43]="xs:IDREFS",ie[44]="xs:NOTATION",ie[45]="xs:anySimpleType",ie[46]="xs:anyAtomicType",ie[47]="attribute()",ie[48]="xs:normalizedString",ie[49]="xs:NMTOKENS",ie[50]="xs:NMTOKEN",ie[51]="xs:language",ie[52]="xs:token",ie[53]="node()",ie[54]="element()",ie[55]="document-node()",ie[56]="text()",ie[57]="processing-instruction()",ie[58]="comment()",ie[59]="item()",ie[60]="function(*)",ie[61]="map(*)",ie[62]="array(*)",ie[63]="none",ie),se={"xs:boolean":0,"xs:string":1,"xs:numeric":2,"xs:double":3,"xs:decimal":4,"xs:integer":5,"xs:float":6,"xs:date":7,"xs:time":8,"xs:dateTime":9,"xs:dateTimeStamp":10,"xs:gYearMonth":11,"xs:gYear":12,"xs:gMonthDay":13,"xs:gMonth":14,"xs:gDay":15,"xs:yearMonthDuration":16,"xs:dayTimeDuration":17,"xs:duration":18,"xs:untypedAtomic":19,"xs:anyURI":20,"xs:base64Binary":21,"xs:hexBinary":22,"xs:QName":23,"xs:NCName":24,"xs:Name":25,"xs:ENTITY":26,"xs:nonPositiveInteger":27,"xs:negativeInteger":28,"xs:positiveInteger":29,"xs:nonNegativeInteger":30,"xs:long":31,"xs:int":32,"xs:short":33,"xs:byte":34,"xs:unsignedInt":35,"xs:unsignedLong":36,"xs:unsignedByte":37,"xs:unsignedShort":38,"xs:error":39,"xs:ENTITIES":40,"xs:IDREF":41,"xs:ID":42,"xs:IDREFS":43,"xs:NOTATION":44,"xs:anySimpleType":45,"xs:anyAtomicType":46,"attribute()":47,"xs:normalizedString":48,"xs:NMTOKENS":49,"xs:NMTOKEN":50,"xs:language":51,"xs:token":52,"node()":53,"element()":54,"document-node()":55,"text()":56,"processing-instruction()":57,"comment()":58,"item()":59,"function(*)":60,"map(*)":61,"array(*)":62};function ae(e){return 2===e.g?oe[e.type]+"*":1===e.g?oe[e.type]+"+":0===e.g?oe[e.type]+"?":oe[e.type]}function le(e){if("none"===e)throw Error('XPST0051: The type "none" could not be found');if(!e.startsWith("xs:")&&0<=e.indexOf(":"))throw Error("XPST0081: Invalid prefix for input "+e);var t=se[e];if(void 0===t)throw Error('XPST0051: The type "'+e+'" could not be found');return t}function ue(e){switch(e[e.length-1]){case"*":return{type:le(e.substr(0,e.length-1)),g:2};case"?":return{type:le(e.substr(0,e.length-1)),g:0};case"+":return{type:le(e.substr(0,e.length-1)),g:1};default:return{type:le(e),g:3}}}function ce(e){var t=e.value;if(ee(e.type,53))return!0;if(ee(e.type,0))return t;if(ee(e.type,1)||ee(e.type,20)||ee(e.type,19))return 0!==t.length;if(ee(e.type,2))return!isNaN(t)&&0!==t;throw Y("Cannot determine the effective boolean value of a value with the type "+oe[e.type])}function he(e,t){var n=this;this.j=ge,this.value={next:function(t){return null!==n.s&&n.h>=n.s?K:void 0!==n.A[n.h]?Z(n.A[n.h++]):(t=e.next(t)).done?(n.s=n.h,t):((n.u||2>n.h)&&(n.A[n.h]=t.value),n.h++,t)}},this.u=!1,this.A=[],this.h=0,this.s=void 0===t?null:t}function pe(e,t){e.h=void 0===t?0:t}function de(e){this.A=ge,this.h=e;var t=!1;this.value={next:function(){return t?K:(t=!0,Z(e))}},this.s=null}(r=he.prototype).qb=function(){return this.j.create(this.N())},r.filter=function(e){var t=this,n=-1,r=this.value;return this.j.create({next:function(i){for(n++,i=r.next(i);!i.done&&!e(i.value,n,t);)n++,i=r.next(0);return i}})},r.first=function(){if(void 0!==this.A[0])return this.A[0];var e=this.value.next(0);return pe(this),e.done?null:e.value},r.N=function(){if(this.h>this.A.length&&this.s!==this.A.length)throw Error("Implementation error: Sequence Iterator has progressed.");var e=this.value;this.u=!0;for(var t=e.next(0);!t.done;)t=e.next(0);return this.A},r.getEffectiveBooleanValue=function(){var e=this.value,t=this.h;pe(this);var n=e.next(0);if(n.done)return pe(this,t),!1;if(ee((n=n.value).type,53))return pe(this,t),!0;if(!e.next(0).done)throw Y("Cannot determine the effective boolean value of a sequence with a length higher than one.");return pe(this,t),ce(n)},r.Pa=function(e){if(null!==this.s)return this.s;if(void 0!==e&&e)return-1;e=this.h;var t=this.N().length;return pe(this,e),t},r.G=function(){return 0===this.s||null===this.first()},r.ta=function(){if(null!==this.s)return 1===this.s;var e=this.value,t=this.h;return pe(this),e.next(0).done?(pe(this,t),!1):(e=e.next(0),pe(this,t),e.done)},r.map=function(e){var t=this,n=0,r=this.value;return this.j.create({next:function(i){return(i=r.next(i)).done?K:Z(e(i.value,n++,t))}},this.s)},r.L=function(e,t){var n,r=this.value,i=[],o=!0;return function(){for(var s=r.next(o?0:t);!s.done;s=r.next(t))o=!1,i.push(s.value);n=e(i).value}(),this.j.create({next:function(){return n.next(0)}})},r.$=function(e){function t(e){r=e.value,-1!==(e=e.Pa(!0))&&(n.s=e)}var n=this,r=null;return this.j.create({next:function(i){return r?r.next(i):n.G()?(t(e.empty?e.empty(n):e.default(n)),r.next(i)):n.ta()?(t(e.o?e.o(n):e.default(n)),r.next(i)):(t(e.multiple?e.multiple(n):e.default(n)),r.next(i))}})},(r=de.prototype).qb=function(){return this},r.filter=function(e){return e(this.h,0,this)?this:this.A.create()},r.first=function(){return this.h},r.N=function(){return[this.h]},r.getEffectiveBooleanValue=function(){return null===this.s&&(this.s=ce(this.h)),this.s},r.Pa=function(){return 1},r.G=function(){return!1},r.ta=function(){return!0},r.map=function(e){return this.A.create(e(this.h,0,this))},r.L=function(e){return e([this.h])},r.$=function(e){return e.o?e.o(this):e.default(this)};var fe=new ne;function me(e,t){if(null===(e=void 0===e?null:e))return fe;if(Array.isArray(e))switch(e.length){case 0:return fe;case 1:return new de(e[0]);default:return new te(e)}return e.next?new he(e,void 0===t?null:t):new de(e)}var ge={create:me,o:function(e){return new de(e)},empty:function(){return me()},ca:function(){return me(q)},X:function(){return me(W)}};function ye(e){var t=[],n=e.value;return function(){var e=0;return ge.create({next:function(){if(void 0!==t[e])return t[e++];var r=n.next(0);return r.done?r:t[e++]=r}})}}function ve(e,t,n){this.namespaceURI=t||null,this.prefix=e||"",this.localName=n}function we(e){var t=e.l,n=e.arity,r=void 0!==e.Ra&&e.Ra,i=void 0!==e.I&&e.I,o=e.localName,s=e.namespaceURI,a=e.i;for(e=e.value,re.call(this,60,null),this.value=e,this.I=i,i=-1,e=0;e<t.length;e++)4===t[e]&&(i=e);-1<i&&(e=Array(n-(t.length-1)).fill(t[i-1]),t=t.slice(0,i).concat(e)),this.s=t,this.A=n,this.ha=r,this.j=o,this.u=s,this.O=a}function be(e,t){var n=[];return 2!==e&&1!==e||n.push("type-1-or-type-2"),n.push("type-"+e),t&&n.push("name-"+t),n}function xe(e){var t=e.node.nodeType;if(2===t||1===t)var n=e.node.localName;return be(t,n)}function Ae(e){var t=e.nodeType;if(2===t||1===t)var n=e.localName;return be(t,n)}function _e(){}function ke(){}ve.prototype.ya=function(){return this.prefix?this.prefix+":"+this.localName:this.localName},y(we,re),we.prototype.Ra=function(){return this.ha},_e.prototype.getAllAttributes=function(e,t){return t=void 0===t?null:t,1!==e.nodeType?[]:(e=Array.from(e.attributes),null===t?e:e.filter((function(e){return Ae(e).includes(t)})))},_e.prototype.getAttribute=function(e,t){return 1!==e.nodeType?null:e.getAttribute(t)},_e.prototype.getChildNodes=function(e,t){return t=void 0===t?null:t,e=Array.from(e.childNodes),null===t?e:e.filter((function(e){return Ae(e).includes(t)}))},_e.prototype.getData=function(e){return 2===e.nodeType?e.value:e.data},_e.prototype.getFirstChild=function(e,t){for(t=void 0===t?null:t,e=e.firstChild;e;e=e.nextSibling)if(null===t||Ae(e).includes(t))return e;return null},_e.prototype.getLastChild=function(e,t){for(t=void 0===t?null:t,e=e.lastChild;e;e=e.previousSibling)if(null===t||Ae(e).includes(t))return e;return null},_e.prototype.getNextSibling=function(e,t){for(t=void 0===t?null:t,e=e.nextSibling;e;e=e.nextSibling)if(null===t||Ae(e).includes(t))return e;return null},_e.prototype.getParentNode=function(e,t){return t=void 0===t?null:t,(e=2===e.nodeType?e.ownerElement:e.parentNode)&&(null===t||Ae(e).includes(t))?e:null},_e.prototype.getPreviousSibling=function(e,t){for(t=void 0===t?null:t,e=e.previousSibling;e;e=e.previousSibling)if(null===t||Ae(e).includes(t))return e;return null},(r=ke.prototype).insertBefore=function(e,t,n){return e.insertBefore(t,n)},r.removeAttributeNS=function(e,t,n){return e.removeAttributeNS(t,n)},r.removeChild=function(e,t){return e.removeChild(t)},r.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},r.setData=function(e,t){e.data=t};var Ee=new ke;function Ce(e){this.h=e}function Se(e){return void 0!==e.Sa}function Oe(e,t,n){var r=null;return t&&(Se(t.node)?r={F:t.F,offset:n,parent:t.node}:t.F&&(r=t.F)),{node:e,F:r}}function Te(e){this.h=e,this.s=[]}function Ne(e,t,n){return e.getAllAttributes(t.node,void 0===n?null:n).map((function(e){return Oe(e,t,e.nodeName)}))}function Be(e,t,n){return Se(t=t.node)?(e=t.attributes.find((function(e){return n===e.name})))?e.value:null:(e=e.h.getAttribute(t,n))?e:null}function Ie(e,t,n){return e.getChildNodes(t.node,void 0===n?null:n).map((function(e,n){return Oe(e,t,n)}))}function Pe(e,t){return e.getData(t.node)}function Me(e,t,n){var r=t.node;return Se(r)?e=r.childNodes[0]:((n=e.h.getFirstChild(r,void 0===n?null:n))&&10===n.nodeType&&(n=e.h.getNextSibling(n)),e=n),e?Oe(e,t,0):null}function De(e,t,n){n=void 0===n?null:n;var r=t.node;return Se(r)?(e=r.childNodes.length-1,r=r.childNodes[e]):((r=e.h.getLastChild(r,n))&&10===r.nodeType&&(r=e.h.getPreviousSibling(r)),e=e.getChildNodes(t.node,n).length-1),r?Oe(r,t,e):null}function Re(e,t,n){n=void 0===n?null:n;var r=t.node,i=t.F;if(Se(r)){if(i)var o=i.offset+1,s=i.parent.childNodes[o]}else{if(!i){for(s=r;s&&(!(s=e.h.getNextSibling(s,n))||10===s.nodeType););return s?{node:s,F:null}:null}o=i.offset+1;var a=Fe(e,t,null);s=e.getChildNodes(a.node,n)[o]}return s?Oe(s,a||Fe(e,t,n),o):null}function Fe(e,t,n){n=void 0===n?null:n;var r=t.node,i=t.F;if(i)"number"==typeof i.offset&&r===i.parent.childNodes[i.offset]||"string"==typeof i.offset&&r===i.parent.attributes.find((function(e){return i.offset===e.nodeName}))?(e=i.parent,t=i.F):(e=e.getParentNode(r,n),t=i);else{if(Se(r))return null;e=e.getParentNode(r,n),t=null}return e?{node:e,F:t}:null}function Le(e,t,n){n=void 0===n?null:n;var r=t.node,i=t.F;if(Se(r)){if(i)var o=i.offset-1,s=i.parent.childNodes[o]}else{if(!i){for(s=r;s&&(!(s=e.h.getPreviousSibling(s,n))||10===s.nodeType););return s?{node:s,F:null}:null}o=i.offset-1;var a=Fe(e,t,null);s=e.getChildNodes(a.node,n)[o]}return s?Oe(s,a||Fe(e,t,n),o):null}function Ue(e,t,n,r,i){return i.L((function(e){var t=u(e).next().value;return r.L((function(e){e=u(e).next().value;var n=t.value;if(0>=n||n>e.R.length)throw Error("FOAY0001: array position out of bounds.");return e.R[n-1]()}))}))}function $e(e){we.call(this,{value:function(e,n,r,i){return Ue(0,0,0,ge.o(t),i)},localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/array",l:[{type:5,g:3}],arity:1,i:{type:59,g:2}});var t=this;this.type=62,this.R=e}function He(e){switch(e.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function Ge(e){return{type:He(e),value:e}}function je(e,t){return e=e.map((function(e){return e.first()})),t(e)}function ze(e,t){var n=ee(e.type,1)||ee(e.type,20)||ee(e.type,19),r=ee(t.type,1)||ee(t.type,20)||ee(t.type,19);return n&&r?e.value===t.value:(n=ee(e.type,4)||ee(e.type,3)||ee(e.type,6),r=ee(t.type,4)||ee(t.type,3)||ee(t.type,6),n&&r?!(!isNaN(e.value)||!isNaN(t.value))||e.value===t.value:(n=ee(e.type,0)||ee(e.type,22)||ee(e.type,18)||ee(e.type,23)||ee(e.type,44),r=ee(t.type,0)||ee(t.type,22)||ee(t.type,18)||ee(t.type,23)||ee(t.type,44),!(!n||!r)&&e.value===t.value))}function Ve(e,t,n,r,i){return je([r,i],(function(e){var t=(e=u(e)).next().value,n=e.next().value;return(e=t.h.find((function(e){return ze(e.key,n)})))?e.value():ge.empty()}))}function Xe(e){we.call(this,{l:[{type:59,g:3}],arity:1,localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/map",value:function(e,n,r,i){return Ve(0,0,0,ge.o(t),i)},i:{type:59,g:2}});var t=this;this.type=61,this.h=e}function qe(){}function We(e,t){return e.cb()===t.cb()&&e.eb()===t.eb()}function Ye(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ea=e}function Qe(e){var t=Math.abs(e.ab()),n=Math.abs(e.getHours()),r=Math.abs(e.getMinutes());return n=(n?n+"H":"")+(r?r+"M":"")+((e=Math.abs(e.getSeconds()))?e+"S":""),(t=t?t+"D":"")&&n?t+"T"+n:t||(n?"T"+n:"T0S")}function Ke(e,t,n,r,i,o){return e=86400*e+3600*t+60*n+r+i,new Ye(o||0===e?e:-e)}function Ze(e){return(e=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e))?Ke(e[4]?parseInt(e[4],10):0,e[5]?parseInt(e[5],10):0,e[6]?parseInt(e[6],10):0,e[7]?parseInt(e[7],10):0,e[8]?parseFloat(e[8]):0,!e[1]):null}function Je(e){return"Z"===(e=/^(Z)|([+-])([01]\d):([0-5]\d)$/.exec(e))[1]?Ke(0,0,0,0,0,!0):Ke(0,e[3]?parseInt(e[3],10):0,e[4]?parseInt(e[4],10):0,0,0,"+"===e[2])}function et(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:dayTimeDuration by NaN");if((e=e.ea*t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while multiplying xs:dayTimeDuration");return new Ye(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)}function tt(e){return e?parseInt(e,10):null}function nt(e){var t=(e+="").startsWith("-");return t&&(e=e.substring(1)),(t?"-":"")+e.padStart(4,"0")}function rt(e){return(e+"").padStart(2,"0")}function it(e){return 1===(e+="").split(".")[0].length&&(e=e.padStart(e.length+1,"0")),e}function ot(e){return 0===e.getHours()&&0===e.getMinutes()?"Z":(e.qa()?"+":"-")+rt(Math.abs(e.getHours()))+":"+rt(Math.abs(e.getMinutes()))}function st(e,t,n,r,i,o,s,a,l){this.A=e,this.h=t,this.s=n+(24===r?1:0),this.u=24===r?0:r,this.O=i,this.j=o,this.ra=s,this.Z=a,this.type=void 0===l?9:l}function at(e){var t=/^(?:(-?\d{4,}))?(?:--?(\d\d))?(?:-{1,3}(\d\d))?(T)?(?:(\d\d):(\d\d):(\d\d))?(\.\d+)?(Z|(?:[+-]\d\d:\d\d))?$/.exec(e);e=t[1]?parseInt(t[1],10):null;var n=tt(t[2]),r=tt(t[3]),i=t[4],o=tt(t[5]),s=tt(t[6]),a=tt(t[7]),l=t[8]?parseFloat(t[8]):0;if(t=t[9]?Je(t[9]):null,e&&(-271821>e||273860<e))throw Error("FODT0001: Datetime year is out of bounds");return i?new st(e,n,r,o,s,a,l,t,9):null!==o&&null!==s&&null!==a?new st(1972,12,31,o,s,a,l,t,8):null!==e&&null!==n&&null!==r?new st(e,n,r,0,0,0,0,t,7):null!==e&&null!==n?new st(e,n,1,0,0,0,0,t,11):null!==n&&null!==r?new st(1972,n,r,0,0,0,0,t,13):null!==e?new st(e,1,1,0,0,0,0,t,12):null!==n?new st(1972,n,1,0,0,0,0,t,14):new st(1972,12,r,0,0,0,0,t,15)}function lt(e,t){switch(t){case 15:return new st(1972,12,e.s,0,0,0,0,e.Z,15);case 14:return new st(1972,e.h,1,0,0,0,0,e.Z,14);case 12:return new st(e.A,1,1,0,0,0,0,e.Z,12);case 13:return new st(1972,e.h,e.s,0,0,0,0,e.Z,13);case 11:return new st(e.A,e.h,1,0,0,0,0,e.Z,11);case 8:return new st(1972,12,31,e.u,e.O,e.j,e.ra,e.Z,8);case 7:return new st(e.A,e.h,e.s,0,0,0,0,e.Z,7);default:return new st(e.A,e.h,e.s,e.u,e.O,e.j,e.ra,e.Z,9)}}function ut(e,t){return t=e.Z||t||Je("Z"),new Date(Date.UTC(e.A,e.h-1,e.s,e.u-t.getHours(),e.O-t.getMinutes(),e.j,1e3*e.ra))}function ct(e,t,n){var r=ut(e,n).getTime();return r===(n=ut(t,n).getTime())?e.ra===t.ra?0:e.ra>t.ra?1:-1:r>n?1:-1}function ht(e,t,n){return 0===ct(e,t,n)}function pt(e,t,n){return new Ye(e=(ut(e,n).getTime()-ut(t,n).getTime())/1e3)}function dt(e){throw Error("Not implemented: adding durations to "+oe[e.type])}function ft(e){throw Error("Not implemented: subtracting durations from "+oe[e.type])}function mt(e,t){if(null===e)return null;switch(typeof e){case"boolean":return e?q:W;case"number":return X(e,3);case"string":return X(e,1);case"object":if("nodeType"in e)return Ge({node:e,F:null});if(Array.isArray(e))return new $e(e.map((function(e){return void 0===e?function(){return ge.empty()}:ye(e=null===(e=mt(e))?ge.empty():ge.o(e))})));if(e instanceof Date){var n=at(e.toISOString());return X(n,n.type)}return new Xe(Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){var n=mt(e[t]);return n=null===n?ge.empty():ge.o(n),{key:X(t,1),value:ye(n)}})))}throw Error("Value "+String(e)+' of type "'+typeof e+'" is not adaptable to an XPath value.')}function gt(e,t){if("number"!=typeof e&&("string"!=typeof e||!z.get(t)(e)))throw Error("Cannot convert JavaScript value '"+e+"' to the XPath type "+oe[t]+" since it is not valid.")}function yt(e,t,n){if(null===t)return null;switch(e){case 0:return t?q:W;case 1:return X(t+"",1);case 3:case 2:return gt(t,3),X(+t,3);case 4:return gt(t,e),X(+t,4);case 5:return gt(t,e),X(0|t,5);case 6:return gt(t,e),X(+t,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(t instanceof Date))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+oe[e]+".");return X(lt(at(t.toISOString()),e),e);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if("object"!=typeof t||!("nodeType"in t))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+oe[e]+".");return Ge({node:t,F:null});case 59:case 61:return mt(t);default:throw Error('Values of the type "'+oe[e]+'" can not be adapted from JavaScript to equivalent XPath values.')}}function vt(e,t,n){if(0===n.g)return null===(t=yt(n.type,t))?[]:[t];if(2===n.g||1===n.g){if(!Array.isArray(t))throw Error("The JavaScript value "+t+" should be an array if it is to be converted to "+ae(n)+".");return t.map((function(e){return yt(n.type,e)})).filter((function(e){return null!==e}))}var r=yt(n.type,t);if(null===r)throw Error("The JavaScript value "+t+" should be a single entry if it is to be converted to "+ae(n)+".");return[r]}function wt(e,t,n){return n=void 0===n?{type:59,g:0}:n,ge.create(vt(0,t,n))}function bt(e,t){this.h=t=void 0===t?{xb:null,Cb:null,rb:!1}:t,this.La=e.La,this.Ia=e.Ia,this.M=e.M,this.Ga=e.Ga||Object.create(null)}function xt(e,t){var n=0,r=t.value;return{next:function(i){return(i=r.next(i)).done?K:Z(kt(e,n++,i.value,t))}}}function At(e){return e.h.rb||(e.h.rb=!0,e.h.xb=at((new Date).toISOString()),e.h.Cb=Ze("PT0S")),e.h.xb}function _t(e){return e.h.rb||(e.h.rb=!0,e.h.xb=at((new Date).toISOString()),e.h.Cb=Ze("PT0S")),e.h.Cb}function kt(e,t,n,r){return new bt({M:n,La:t,Ia:r||e.Ia,Ga:e.Ga},e.h)}function Et(e,t){return new bt({M:e.M,La:e.La,Ia:e.Ia,Ga:Object.assign(Object.create(null),e.Ga,t)},e.h)}function Ct(e,t,n,r,i,o,s,a){var l=new Map;this.debug=e,this.Ja=t,this.h=n,this.s=r,this.j=i,this.u=o,this.ha=l,this.O=s,this.A=a}function St(e){var t=0,n=null,r=!0;return ge.create({next:function(i){for(;t<e.length;){n||(n=e[t].value,r=!0);var o=n.next(r?0:i);if(r=!1,!o.done)return o;t++,n=null}return K}})}function Ot(e,t,n){return Error("FORG0001: Cannot cast "+e+" to "+oe[t]+(n?", "+n:""))}function Tt(e){return Error("XPTY0004: "+e)}function Nt(e){return Error("FOTY0013: Atomization is not supported for "+oe[e]+".")}function Bt(e){return Error("XPST0081: The prefix "+e+" could not be resolved.")}function It(e,t){if(ee(e.type,46)||ee(e.type,19)||ee(e.type,0)||ee(e.type,4)||ee(e.type,3)||ee(e.type,6)||ee(e.type,5)||ee(e.type,2)||ee(e.type,23)||ee(e.type,1))return ge.create(e);var n=t.h;if(ee(e.type,53)){var r=e.value;if(2===r.node.nodeType||3===r.node.nodeType)return ge.create(X(Pe(n,r),19));if(8===r.node.nodeType||7===r.node.nodeType)return ge.create(X(Pe(n,r),1));var i=[];return function e(t){if(8!==r.node.nodeType&&7!==r.node.nodeType){var o=t.nodeType;3===o||4===o?i.push(n.getData(t)):1!==o&&9!==o||n.getChildNodes(t).forEach((function(t){e(t)}))}}(r.node),ge.create(X(i.join(""),19))}if(ee(e.type,60)&&!ee(e.type,62))throw Nt(e.type);if(ee(e.type,62))return St(e.R.map((function(e){return Pt(e(),t)})));throw Error("Atomizing "+e.type+" is not implemented.")}function Pt(e,t){var n=!1,r=e.value,i=null;return ge.create({next:function(){for(;!n;){if(!i){var e=r.next(0);if(e.done){n=!0;break}i=It(e.value,t).value}if(!(e=i.next(0)).done)return e;i=null}return K}})}function Mt(e){for(e=V[e];e&&0!==e.D;)e=e.parent;return e?e.type:null}function Dt(e,t){var n=(t=V[t]).Ka;if(!n||!n.whiteSpace)return t.parent?Dt(e,t.parent.type):e;switch(t.Ka.whiteSpace){case"replace":return e.replace(/[\u0009\u000A\u000D]/g," ");case"collapse":return e.replace(/[\u0009\u000A\u000D]/g," ").replace(/ {2,}/g," ").replace(/^ | $/g,"")}return e}function Rt(e,t){for(t=V[t];t&&null===t.hb;){if(2===t.D||3===t.D)return!0;t=t.parent}return!t||t.hb(e)}function Ft(e,t){for(;e;){if(e.Na&&e.Na[t])return e.Na[t];e=e.parent}return function(){return!0}}function Lt(e,t){return e(2)?function(e){return{v:!0,value:e}}:e(0)?function(e){return{v:!0,value:e?1:0}}:e(1)||e(19)?function(e){switch(e){case"NaN":return{v:!0,value:NaN};case"INF":case"+INF":return{v:!0,value:1/0};case"-INF":return{v:!0,value:-1/0};case"0":case"+0":return{v:!0,value:0};case"-0":return{v:!0,value:-0}}var n=parseFloat(e);return isNaN(n)?{v:!1,error:Ot(e,t)}:{v:!0,value:n}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to "+t+" or any of its derived types.")}}}function Ut(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ga=e}function $t(e){var t=Math.abs(e.fb());return(t?t+"Y":"")+((e=Math.abs(e.bb()))?e+"M":"")||"0M"}function Ht(e){var t=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e);if(t){if(e=!t[1],(t=12*(t[2]?parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0))>Number.MAX_SAFE_INTEGER||!Number.isFinite(t))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");e=new Ut(e||0===t?t:-t)}else e=null;return e}function Gt(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:yearMonthDuration by NaN");if((e=Math.round(e.ga*t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");return new Ut(e<Number.MIN_SAFE_INTEGER||0===e?0:e)}function jt(e,t){this.Ua=e,this.Ha=t}(r=Ce.prototype).insertBefore=function(e,t,n){return this.h.insertBefore(e,t,n)},r.removeAttributeNS=function(e,t,n){return this.h.removeAttributeNS(e,t,n)},r.removeChild=function(e,t){return this.h.removeChild(e,t)},r.setAttributeNS=function(e,t,n,r){this.h.setAttributeNS(e,t,n,r)},r.setData=function(e,t){this.h.setData(e,t)},Te.prototype.getAllAttributes=function(e,t){return Se(e)?e.attributes:this.h.getAllAttributes(e,void 0===t?null:t)},Te.prototype.getChildNodes=function(e,t){return t=Se(e)?e.childNodes:this.h.getChildNodes(e,void 0===t?null:t),9===e.nodeType?t.filter((function(e){return 10!==e.nodeType})):t},Te.prototype.getData=function(e){return Se(e)?2===e.nodeType?e.value:e.data:this.h.getData(e)||""},Te.prototype.getParentNode=function(e,t){return this.h.getParentNode(e,void 0===t?null:t)},y($e,we),y(Xe,we),(r=qe.prototype).ab=function(){return 0},r.getHours=function(){return 0},r.getMinutes=function(){return 0},r.bb=function(){return 0},r.cb=function(){return 0},r.eb=function(){return 0},r.getSeconds=function(){return 0},r.fb=function(){return 0},r.qa=function(){return!0},y(Ye,qe),(r=Ye.prototype).ab=function(){return Math.trunc(this.ea/86400)},r.getHours=function(){return Math.trunc(this.ea%86400/3600)},r.getMinutes=function(){return Math.trunc(this.ea%3600/60)},r.eb=function(){return this.ea},r.getSeconds=function(){var e=this.ea%60;return Object.is(-0,e)?0:e},r.qa=function(){return!Object.is(-0,this.ea)&&0<=this.ea},r.toString=function(){return(this.qa()?"P":"-P")+Qe(this)},(r=st.prototype).getDay=function(){return this.s},r.getHours=function(){return this.u},r.getMinutes=function(){return this.O},r.getMonth=function(){return this.h},r.getSeconds=function(){return this.j},r.getYear=function(){return this.A},r.toString=function(){switch(this.type){case 9:return nt(this.A)+"-"+rt(this.h)+"-"+rt(this.s)+"T"+rt(this.u)+":"+rt(this.O)+":"+it(this.j+this.ra)+(this.Z?ot(this.Z):"");case 7:return nt(this.A)+"-"+rt(this.h)+"-"+rt(this.s)+(this.Z?ot(this.Z):"");case 8:return rt(this.u)+":"+rt(this.O)+":"+it(this.j+this.ra)+(this.Z?ot(this.Z):"");case 15:return"---"+rt(this.s)+(this.Z?ot(this.Z):"");case 14:return"--"+rt(this.h)+(this.Z?ot(this.Z):"");case 13:return"--"+rt(this.h)+"-"+rt(this.s)+(this.Z?ot(this.Z):"");case 12:return nt(this.A)+(this.Z?ot(this.Z):"");case 11:return nt(this.A)+"-"+rt(this.h)+(this.Z?ot(this.Z):"")}throw Error("Unexpected subType")},y(Ut,qe),(r=Ut.prototype).bb=function(){var e=this.ga%12;return 0===e?0:e},r.cb=function(){return this.ga},r.fb=function(){return Math.trunc(this.ga/12)},r.qa=function(){return!Object.is(-0,this.ga)&&0<=this.ga},r.toString=function(){return(this.qa()?"P":"-P")+$t(this)},y(jt,qe),(r=jt.prototype).ab=function(){return this.Ha.ab()},r.getHours=function(){return this.Ha.getHours()},r.getMinutes=function(){return this.Ha.getMinutes()},r.bb=function(){return this.Ua.bb()},r.cb=function(){return this.Ua.cb()},r.eb=function(){return this.Ha.eb()},r.getSeconds=function(){return this.Ha.getSeconds()},r.fb=function(){return this.Ua.fb()},r.qa=function(){return this.Ua.qa()&&this.Ha.qa()},r.toString=function(){var e=this.qa()?"P":"-P",t=$t(this.Ua),n=Qe(this.Ha);return"0M"===t?e+n:"T0S"===n?e+t:e+t+n};var zt=[3,6,4,5];function Vt(e){if(e(1)||e(19))return function(e){return{v:!0,value:e+""}};if(e(20))return function(e){return{v:!0,value:e}};if(e(23))return function(e){return{v:!0,value:e.prefix?e.prefix+":"+e.localName:e.localName}};if(e(44))return function(e){return{v:!0,value:e.toString()}};if(e(2)){if(e(5)||e(4))return function(e){return{v:!0,value:(e+"").replace("e","E")}};if(e(6)||e(3))return function(e){return isNaN(e)?{v:!0,value:"NaN"}:isFinite(e)?Object.is(e,-0)?{v:!0,value:"-0"}:{v:!0,value:(e+"").replace("e","E").replace("E+","E")}:{v:!0,value:(0>e?"-":"")+"INF"}}}return e(9)||e(7)||e(8)||e(15)||e(14)||e(13)||e(12)||e(11)||e(16)||e(17)||e(18)?function(e){return{v:!0,value:e.toString()}}:e(22)?function(e){return{v:!0,value:e.toUpperCase()}}:function(e){return{v:!0,value:e+""}}}var Xt=[2,5,17,16];function qt(e,t){function n(t){return ee(e,t)}if(39===t)return function(){return{v:!1,error:Error("FORG0001: Casting to xs:error is always invalid.")}};switch(t){case 19:return function(e){var t=Vt(e);return function(e){return(e=t(e)).v?{v:!0,value:X(e.value,19)}:e}}(n);case 1:return function(e){var t=Vt(e);return function(e){return(e=t(e)).v?{v:!0,value:X(e.value,1)}:e}}(n);case 6:return function(e){var t=Lt(e,6);return function(e){return(e=t(e)).v?{v:!0,value:X(e.value,6)}:e}}(n);case 3:return function(e){var t=Lt(e,3);return function(e){return(e=t(e)).v?{v:!0,value:X(e.value,3)}:e}}(n);case 4:return function(e){return e(5)?function(e){return{v:!0,value:X(e,4)}}:e(6)||e(3)?function(e){return isNaN(e)||!isFinite(e)?{v:!1,error:Error("FOCA0002: Can not cast "+e+" to xs:decimal")}:Math.abs(e)>Number.MAX_VALUE?{v:!1,error:Error("FOAR0002: Can not cast "+e+" to xs:decimal, it is out of bounds for JavaScript numbers")}:{v:!0,value:X(e,4)}}:e(0)?function(e){return{v:!0,value:X(e?1:0,4)}}:e(1)||e(19)?function(e){var t=parseFloat(e);return!isNaN(t)||isFinite(t)?{v:!0,value:X(t,4)}:{v:!1,error:Error("FORG0001: Can not cast "+e+" to xs:decimal")}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.")}}}(n);case 5:return function(e){return e(0)?function(e){return{v:!0,value:X(e?1:0,5)}}:e(2)?function(e){var t=Math.trunc(e);return!isFinite(t)||isNaN(t)?{v:!1,error:Error("FOCA0002: can not cast "+e+" to xs:integer")}:Number.isSafeInteger(t)?{v:!0,value:X(t,5)}:{v:!1,error:Error("FOAR0002: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:e(1)||e(19)?function(e){var t=parseInt(e,10);return isNaN(t)?{v:!1,error:Ot(e,5)}:Number.isSafeInteger(t)?{v:!0,value:X(t,5)}:{v:!1,error:Error("FOCA0003: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.")}}}(n);case 2:return function(e){var t=qt;return function(n){for(var r=u(zt),i=r.next();!i.done;i=r.next())if((i=t(e,i.value)(n)).v)return i;return{v:!1,error:Error('XPTY0004: Casting not supported from "'+n+'" given type to xs:numeric or any of its derived types.')}}}(e);case 18:return function(e){return e(16)?function(e){return{v:!0,value:X(new jt(e,new Ye(e.qa()?0:-0)),18)}}:e(17)?function(e){return{v:!0,value:X(e=new jt(new Ut(e.qa()?0:-0),e),18)}}:e(18)?function(e){return{v:!0,value:X(e,18)}}:e(19)||e(1)?function(e){return{v:!0,value:X(new jt(Ht(e),Ze(e)),18)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.")}}}(n);case 16:return function(e){return e(18)&&!e(17)?function(e){return{v:!0,value:X(e.Ua,16)}}:e(17)?function(){return{v:!0,value:X(Ht("P0M"),16)}}:e(19)||e(1)?function(e){var t=Ht(e);return t?{v:!0,value:X(t,16)}:{v:!1,error:Ot(e,16)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.")}}}(n);case 17:return function(e){return e(18)&&!e(16)?function(e){return{v:!0,value:X(e.Ha,17)}}:e(16)?function(){return{v:!0,value:X(Ze("PT0.0S"),17)}}:e(19)||e(1)?function(e){var t=Ze(e);return t?{v:!0,value:X(t,17)}:{v:!1,error:Error("FORG0001: Can not cast "+e+" to xs:dayTimeDuration")}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.")}}}(n);case 9:return function(e){return e(7)?function(e){return{v:!0,value:X(lt(e,9),9)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),9)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.")}}}(n);case 8:return function(e){return e(9)?function(e){return{v:!0,value:X(lt(e,8),8)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),8)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:time or any of its derived types.")}}}(n);case 7:return function(e){return e(9)?function(e){return{v:!0,value:X(lt(e,7),7)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),7)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:date or any of its derived types.")}}}(n);case 11:return function(e){return e(7)||e(9)?function(e){return{v:!0,value:X(lt(e,11),11)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),11)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.")}}}(n);case 12:return function(e){return e(7)||e(9)?function(e){return{v:!0,value:X(lt(e,12),12)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),12)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.")}}}(n);case 13:return function(e){return e(7)||e(9)?function(e){return{v:!0,value:X(lt(e,13),13)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),13)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.")}}}(n);case 15:return function(e){return e(7)||e(9)?function(e){return{v:!0,value:X(lt(e,15),15)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),15)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.")}}}(n);case 14:return function(e){return e(7)||e(9)?function(e){return{v:!0,value:X(lt(e,14),14)}}:e(19)||e(1)?function(e){return{v:!0,value:X(at(e),14)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.")}}}(n);case 0:return function(e){return e(2)?function(e){return{v:!0,value:0===e||isNaN(e)?W:q}}:e(1)||e(19)?function(e){switch(e){case"true":case"1":return{v:!0,value:q};case"false":case"0":return{v:!0,value:W};default:return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}(n);case 21:return function(e){return e(22)?function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return{v:!0,value:X(btoa(t),21)}}:e(1)||e(19)?function(e){return{v:!0,value:X(e,21)}}:function(){return{error:Error("XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types."),v:!1}}}(n);case 22:return function(e){return e(21)?function(e){for(var t="",n=0,r=(e=atob(e)).length;n<r;n++)t+=Number(e.charCodeAt(n)).toString(16);return{v:!0,value:X(t.toUpperCase(),22)}}:e(1)||e(19)?function(e){return{v:!0,value:X(e,22)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.")}}}(n);case 20:return function(e){return e(1)||e(19)?function(e){return{v:!0,value:X(e,20)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.")}}}(n);case 23:throw Error("Casting to xs:QName is not implemented.")}return function(){return{v:!1,error:Error("XPTY0004: Casting not supported from "+e+" to "+t+".")}}}var Wt=Object.create(null);function Yt(e,t){if(19===e&&1===t)return function(e){return{v:!0,value:X(e,1)}};if(44===t)return function(){return{v:!1,error:Error("XPST0080: Casting to xs:NOTATION is not permitted.")}};if(39===t)return function(){return{v:!1,error:Error("FORG0001: Casting to xs:error is not permitted.")}};if(45===e||45===t)return function(){return{v:!1,error:Error("XPST0080: Casting from or to xs:anySimpleType is not permitted.")}};if(46===e||46===t)return function(){return{v:!1,error:Error("XPST0080: Casting from or to xs:anyAtomicType is not permitted.")}};if(ee(e,60)&&1===t)return function(){return{v:!1,error:Error("FOTY0014: Casting from function item to xs:string is not permitted.")}};if(e===t)return function(e){return{v:!0,value:{type:t,value:e}}};var n=Xt.includes(e)?e:Mt(e),r=Xt.includes(t)?t:Mt(t);if(null===r||null===n)return function(){return{v:!1,error:Error("XPST0081: Can not cast: type "+(r?oe[e]:oe[t])+" is unknown.")}};var i=[];return 1!==n&&19!==n||i.push((function(e){var n=Dt(e,t);return Rt(n,t)?{v:!0,value:n}:{v:!1,error:Ot(e,t,"pattern validation failed.")}})),n!==r&&(i.push(qt(n,r)),i.push((function(e){return{v:!0,value:e.value}}))),19!==r&&1!==r||i.push((function(e){return Rt(e,t)?{v:!0,value:e}:{v:!1,error:Ot(e,t,"pattern validation failed.")}})),i.push((function(e){return function(e,t){for(var n=V[t];n;){if(n.Ka&&!Object.keys(n.Ka).every((function(t){if("whiteSpace"===t)return!0;var r=Ft(n,t);return!r||r(e,n.Ka[t])})))return!1;n=n.parent}return!0}(e,t)?{v:!0,value:e}:{v:!1,error:Ot(e,t,"pattern validation failed.")}})),i.push((function(e){return{v:!0,value:{type:t,value:e}}})),function(e){e={v:!0,value:e};for(var t=0,n=i.length;t<n&&!1!==(e=i[t](e.value)).v;++t);return e}}function Qt(e,t){var n=e.type+1e4*t,r=Wt[n];return r||(r=Wt[n]=Yt(e.type,t)),r.call(void 0,e.value,t)}function Kt(e,t){if(!0===(e=Qt(e,t)).v)return e.value;throw e.error}function Zt(e){var t=!1;return{next:function(){return t?K:(t=!0,Z(e))}}}function Jt(e,t){return e===t||!(!e||!t||e.offset!==t.offset||e.parent!==t.parent)&&Jt(e.F,t.F)}function en(e,t){return!!(e===t||e.node===t.node&&Jt(e.F,t.F))}function tn(e,t){for(var n=[];t;t=Fe(e,t,null))n.unshift(t);return n}function nn(e,t){for(var n=[];t;t=e.getParentNode(t,null))n.unshift(t);return n}function rn(e,t,n,r){if(n.F||r.F||Se(n.node)||Se(r.node)){if(en(n,r))return 0;n=tn(t,n),r=tn(t,r);var i=n[0],o=r[0];if(!en(i,o))return t=e.findIndex((function(e){return en(e,i)})),n=e.findIndex((function(e){return en(e,o)})),-1===t&&(t=e.push(i)),-1===n&&(n=e.push(o)),t-n;e=1;for(var s=Math.min(n.length,r.length);e<s&&en(n[e],r[e]);++e);return n[e]?r[e]?function(e,t,n){var r=Fe(e,t,null);e=Ie(e,r,null),r=0;for(var i=e.length;r<i;++r){var o=e[r];if(en(o,t))return-1;if(en(o,n))return 1}}(t,n[e],r[e]):1:-1}if((n=n.node)===(r=r.node))return 0;if(n=nn(t,n),r=nn(t,r),n[0]!==r[0]){var a={node:n[0],F:null},l={node:r[0],F:null};return t=e.findIndex((function(e){return en(e,a)})),n=e.findIndex((function(e){return en(e,l)})),-1===t&&(t=e.push(a)),-1===n&&(n=e.push(l)),t-n}for(s=1,e=Math.min(n.length,r.length);s<e&&n[s]===r[s];++s);if(e=n[s],n=r[s],!e)return-1;if(!n)return 1;for(t=t.getChildNodes(r[s-1],null),r=0,s=t.length;r<s;++r){var u=t[r];if(u===e)return-1;if(u===n)return 1}}function on(e,t,n,r){var i=ee(n.type,47),o=ee(r.type,47);if(i&&!o){if(en(n=Fe(t,n.value),r=r.value))return 1}else if(o&&!i){if(en(n=n.value,r=Fe(t,r.value)))return-1}else if(i&&o){if(en(Fe(t,r.value),Fe(t,n.value)))return n.value.node.localName>r.value.node.localName?1:-1;n=Fe(t,n.value),r=Fe(t,r.value)}else n=n.value,r=r.value;return rn(e,t,n,r)}function sn(e,t,n){return on(e.s,e,t,n)}function an(e,t){return un(t,(function(t,n){return on(e.s,e,t,n)})).filter((function(e,t,n){return 0===t||!en(e.value,n[t-1].value)}))}function ln(e,t){return e<t?-1:0}function un(e,t){if(t=void 0===t?ln:t,1>=e.length)return e;var n=Math.floor(e.length/2),r=un(e.slice(0,n),t);for(e=un(e.slice(n),t),n=[];r.length&&e.length;)0>t(r[0],e[0])?n.push(r.shift()):n.push(e.shift());return n.concat(r.concat(e))}var cn=e;function hn(e,t,n,r,i){if(ee(e.type,t.type))return e;if(ee(t.type,46)&&ee(e.type,53)&&(e=It(e,n).first()),ee(e.type,t.type)||46===t.type)return e;if(ee(e.type,19)){if(!(n=Kt(e,t.type)))throw Error("XPTY0004 Unable to convert "+(i?"return":"argument")+" of type "+oe[e.type]+" to type "+ae(t)+" while calling "+r);return n}if(n=function(e,t){if(ee(e.type,2)){if(ee(e.type,6))return 3===t?X(e.value,3):null;if(ee(e.type,4)){if(6===t)return X(e.value,6);if(3===t)return X(e.value,3)}return null}return ee(e.type,20)&&1===t?X(e.value,1):null}(e,t.type),!n)throw Error("XPTY0004 Unable to cast "+(i?"return":"argument")+" of type "+oe[e.type]+" to type "+ae(t)+" while calling "+r);return n}function pn(e){switch(e){case 2:return"*";case 1:return"+";case 0:return"?";case 3:return""}}function dn(e,t,n,r,i){return 0===e.g?t.$({default:function(){return t.map((function(t){return hn(t,e,n,r,i)}))},multiple:function(){throw Error("XPTY0004: Multiplicity of "+(i?"function return value":"function argument")+" of type "+oe[e.type]+pn(e.g)+" for "+r+' is incorrect. Expected "?", but got "+".')}}):1===e.g?t.$({empty:function(){throw Error("XPTY0004: Multiplicity of "+(i?"function return value":"function argument")+" of type "+oe[e.type]+pn(e.g)+" for "+r+' is incorrect. Expected "+", but got "empty-sequence()"')},default:function(){return t.map((function(t){return hn(t,e,n,r,i)}))}}):2===e.g?t.map((function(t){return hn(t,e,n,r,i)})):t.$({o:function(){return t.map((function(t){return hn(t,e,n,r,i)}))},default:function(){throw Error("XPTY0004: Multiplicity of "+(i?"function return value":"function argument")+" of type "+oe[e.type]+pn(e.g)+" for "+r+" is incorrect. Expected exactly one")}})}function fn(e,t){return ee(e,5)?X(t,5):ee(e,6)?X(t,6):ee(e,3)?X(t,3):X(t,4)}var mn=[{oa:"M",ma:1e3},{oa:"CM",ma:900},{oa:"D",ma:500},{oa:"CD",ma:400},{oa:"C",ma:100},{oa:"XC",ma:90},{oa:"L",ma:50},{oa:"XL",ma:40},{oa:"X",ma:10},{oa:"IX",ma:9},{oa:"V",ma:5},{oa:"IV",ma:4},{oa:"I",ma:1}];function gn(e,t){var n=parseInt(e,10);if(e=0>n,!(n=Math.abs(n)))return"-";var r=mn.reduce((function(e,t){var r=Math.floor(n/t.ma);return n-=r*t.ma,e+t.oa.repeat(r)}),"");return t&&(r=r.toLowerCase()),e&&(r="-"+r),r}var yn="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function vn(e,t){var n=0>(e=parseInt(e,10));if(!(e=Math.abs(e)))return"-";for(var r,i="";0<e;)r=(e-1)%yn.length,i=yn[r]+i,e=(e-r)/yn.length|0;return t&&(i=i.toLowerCase()),n&&(i="-"+i),i}function wn(e,t,n,r,i,o){var s=!1;return ge.create({next:function(){if(s)return K;var t,n=i.first();if(!n)return s=!0,K;if((ee(n.type,6)||ee(n.type,3))&&(0===n.value||isNaN(n.value)||1/0===n.value||-1/0===n.value))return s=!0,Z(n);if(t=o?o.first().value:0,s=!0,function(e){if(Math.floor(e)===e||isNaN(e))return 0;var t=(e=/\d+(?:\.(\d*))?(?:[Ee](-)?(\d+))*/.exec(""+e))[1]?e[1].length:0;return e[3]?e[2]?t+parseInt(e[3],10):0>(e=t-parseInt(e[3],10))?0:e:t}(n.value)<t)return Z(n);var r=[5,4,3,6].find((function(e){return ee(n.type,e)}));switch(t=function(e,t,n){return t&&0==e*n%1%.5?0==Math.floor(e*n)%2?Math.floor(e*n)/n:Math.ceil(e*n)/n:Math.round(e*n)/n}(Kt(n,4).value,e,Math.pow(10,t)),r){case 4:return Z(X(t,4));case 3:return Z(X(t,3));case 6:return Z(X(t,6));case 5:return Z(X(t,5))}}})}function bn(e,t,n,r){return Pt(r,t).$({empty:function(){return ge.o(X(NaN,3))},o:function(){var e=Qt(r.first(),3);return e.v?ge.o(e.value):ge.o(X(NaN,3))},multiple:function(){throw Error("fn:number may only be called with zero or one values")}})}function xn(e,t,n,r){if(r.G()||r.ta())return r;for(t=(e=r.N()).length-1;1<t;t--)r=e[n=Math.floor(Math.random()*(t+1))],e[n]=e[t],e[t]=r;return ge.create(e)}var An=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"abs",l:[{type:2,g:0}],i:{type:2,g:0},m:function(e,t,n,r){return r.map((function(e){return fn(e.type,Math.abs(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"format-integer",l:[{type:5,g:0},{type:1,g:3}],i:{type:1,g:3},m:function(e,t,n,r,i){if(e=r.first(),i=i.first(),r.G())return ge.o(X("",1));switch(i.value){case"I":return r=gn(e.value),ge.o(X(r,1));case"i":return r=gn(e.value,!0),ge.o(X(r,1));case"A":return ge.o(X(vn(e.value),1));case"a":return ge.o(X(vn(e.value,!0),1));default:throw Error("Picture: "+i.value+' is not implemented yet. The supported picture strings are "A", "a", "I", and "i"')}}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ceiling",l:[{type:2,g:0}],i:{type:2,g:0},m:function(e,t,n,r){return r.map((function(e){return fn(e.type,Math.ceil(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"floor",l:[{type:2,g:0}],i:{type:2,g:0},m:function(e,t,n,r){return r.map((function(e){return fn(e.type,Math.floor(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",l:[{type:2,g:0}],i:{type:2,g:0},m:wn.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",l:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},m:wn.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",l:[{type:2,g:0}],i:{type:2,g:0},m:wn.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",l:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},m:wn.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",l:[{type:46,g:0}],i:{type:3,g:3},m:bn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",l:[],i:{type:3,g:3},m:function(e,t,n){var r=e.M&&dn({type:46,g:0},ge.o(e.M),t,"fn:number",!1);if(!r)throw Error("XPDY0002: fn:number needs an atomizable context item.");return bn(0,t,0,r)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",l:[],i:{type:61,g:3},m:function e(){return ge.o(new Xe([{key:X("number",1),value:function(){return ge.o(X(Math.random(),3))}},{key:X("next",1),value:function(){return ge.o(new we({value:e,Ra:!0,localName:"",namespaceURI:"",l:[],arity:0,i:{type:61,g:3}}))}},{key:X("permute",1),value:function(){return ge.o(new we({value:xn,Ra:!0,localName:"",namespaceURI:"",l:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}}]))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",l:[{type:46,g:0}],i:{type:61,g:3},m:function(){throw Error("Not implemented: Specifying a seed is not supported")}}];function _n(){throw Error("FOCH0002: No collations are supported")}function kn(e,t,n,r){if(null===t.M)throw Error("XPDY0002: The function which was called depends on dynamic context, which is absent.");return e(t,n,r,ge.o(t.M))}function En(e,t,n,r){return r.$({empty:function(){return ge.o(X("",1))},default:function(){return r.map((function(e){if(ee(e.type,53)){var n=It(e,t).first();return ee(e.type,47)?Kt(n,1):n}return Kt(e,1)}))}})}function Cn(e,t,n,r,i){return je([i],(function(e){var n=u(e).next().value;return Pt(r,t).L((function(e){return e=e.map((function(e){return Kt(e,1).value})).join(n.value),ge.o(X(e,1))}))}))}function Sn(e,t,n,r){return r.G()?ge.o(X(0,5)):(e=r.first().value,ge.o(X(Array.from(e).length,5)))}function On(e,t,n,r,i,o){var s=wn(!1,0,0,0,i,null),a=null!==o?wn(!1,0,0,0,o,null):null,l=!1,u=null,c=null,h=null;return ge.create({next:function(){return l?K:u||null!==(u=r.first())?(c||(c=s.first()),!h&&o&&(h=null,h=a.first()),l=!0,Z(X(Array.from(u.value).slice(Math.max(c.value-1,0),o?c.value+h.value-1:void 0).join(""),1))):(l=!0,Z(X("",1)))}})}function Tn(e,t,n,r,i){return r.G()||0===r.first().value.length?ge.empty():(e=r.first().value,i=Pn(i=i.first().value),ge.create(e.split(i).map((function(e){return X(e,1)}))))}function Nn(e,t,n,r){return r.G()?ge.o(X("",1)):(e=r.first().value.trim(),ge.o(X(e.replace(/\s+/g," "),1)))}var Bn=new Map,In=new Map;function Pn(e){if(In.has(e))return In.get(e);try{var t=new RegExp(e,"g")}catch(e){throw Error("FORX0002: "+e)}if(t.test(""))throw Error("FORX0003: the pattern "+e+" matches the zero length string");return In.set(e,t),t}var Mn=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",l:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},m:function(e,t,n,r,i){return r.G()||i.G()?ge.empty():(e=r.first().value)>(i=i.first().value)?ge.o(X(1,5)):e<i?ge.o(X(-1,5)):ge.o(X(0,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",l:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},m:_n},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"concat",l:[{type:46,g:0},{type:46,g:0},4],i:{type:1,g:3},m:function(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];return i=i.map((function(e){return Pt(e,t).L((function(e){return ge.o(X(e.map((function(e){return null===e?"":Kt(e,1).value})).join(""),1))}))})),je(i,(function(e){return ge.o(X(e.map((function(e){return e.value})).join(""),1))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",l:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:_n},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",l:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:function(e,t,n,r,i){return e=r.G()?"":r.first().value,0===(i=i.G()?"":i.first().value).length?ge.ca():0===e.length?ge.X():e.includes(i)?ge.ca():ge.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",l:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:function(e,t,n,r,i){return 0===(e=i.G()?"":i.first().value).length?ge.ca():0===(r=r.G()?"":r.first().value).length?ge.X():r.endsWith(e)?ge.ca():ge.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",l:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},m:_n},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",l:[{type:1,g:0}],i:{type:1,g:3},m:Nn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",l:[],i:{type:1,g:3},m:kn.bind(null,(function(e,t,n,r){return Nn(e,0,0,En(0,t,0,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",l:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:function(e,t,n,r,i){return 0===(e=i.G()?"":i.first().value).length?ge.ca():0===(r=r.G()?"":r.first().value).length?ge.X():r.startsWith(e)?ge.ca():ge.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",l:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},m:_n},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",l:[{type:59,g:0}],i:{type:1,g:3},m:En},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",l:[],i:{type:1,g:3},m:kn.bind(null,En)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-before",l:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},m:function(e,t,n,r,i){return e=r.G()?"":r.first().value,""===(i=i.G()?"":i.first().value)||-1===(i=e.indexOf(i))?ge.o(X("",1)):ge.o(X(e.substring(0,i),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-after",l:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},m:function(e,t,n,r,i){return e=r.G()?"":r.first().value,""===(i=i.G()?"":i.first().value)?ge.o(X(e,1)):-1===(t=e.indexOf(i))?ge.o(X("",1)):ge.o(X(e.substring(t+i.length),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",l:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},m:On},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",l:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},m:On},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"upper-case",l:[{type:1,g:0}],i:{type:1,g:3},m:function(e,t,n,r){return r.G()?ge.o(X("",1)):r.map((function(e){return X(e.value.toUpperCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"lower-case",l:[{type:1,g:0}],i:{type:1,g:3},m:function(e,t,n,r){return r.G()?ge.o(X("",1)):r.map((function(e){return X(e.value.toLowerCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",l:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},m:Cn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",l:[{type:46,g:2}],i:{type:1,g:3},m:function(e,t,n,r){return Cn(0,t,0,r,ge.o(X("",1)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",l:[{type:1,g:0}],i:{type:5,g:3},m:Sn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",l:[],i:{type:5,g:3},m:kn.bind(null,(function(e,t,n,r){return Sn(e,0,0,En(0,t,0,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",l:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,g:2},m:function(){throw Error("Not implemented: Using flags in tokenize is not supported")}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",l:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},m:Tn},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",l:[{type:1,g:0}],i:{type:1,g:2},m:function(e,t,n,r){return Tn(e,0,0,Nn(e,0,0,r),ge.o(X(" ",1)))}},{l:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],m:function(e,t,n,r,i,o){return je([r,i,o],(function(e){var t=u(e),n=t.next().value;e=t.next().value,t=t.next().value,n=Array.from(n?n.value:"");var r=Array.from(e.value),i=Array.from(t.value);return e=n.map((function(e){return r.includes(e)?(e=r.indexOf(e))<=i.length?i[e]:void 0:e})),ge.o(X(e.join(""),1))}))},localName:"translate",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:5,g:2}],m:function(e,t,n,r){return r.L((function(e){return e=e.map((function(e){if(9===(e=e.value)||10===e||13===e||32<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e)return String.fromCodePoint(e);throw Error("FOCH0001")})).join(""),ge.o(X(e,1))}))},localName:"codepoints-to-string",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0}],m:function(e,t,n,r){return je([r],(function(e){return 0===(e=(e=u(e).next().value)?e.value.split(""):[]).length?ge.empty():ge.create(e.map((function(e){return X(e.codePointAt(0),5)})))}))},localName:"string-to-codepoints",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{l:[{type:1,g:0}],m:function(e,t,n,r){return je([r],(function(e){return null===(e=u(e).next().value)||0===e.value.length?ge.create(X("",1)):ge.create(X(encodeURIComponent(e.value).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})),1))}))},localName:"encode-for-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0}],m:function(e,t,n,r){return je([r],(function(e){return null===(e=u(e).next().value)||0===e.value.length?ge.create(X("",1)):ge.create(X(e.value.replace(/([\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF "<>{}|\\^`/\n\u007f\u0080-\u009f]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,(function(e){return encodeURI(e)})),1))}))},localName:"iri-to-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0},{type:1,g:0}],m:function(e,t,n,r,i){return je([r,i],(function(e){var t=u(e);if(e=t.next().value,t=t.next().value,null===e||null===t)return ge.empty();if(e=e.value,t=t.value,e.length!==t.length)return ge.X();e=e.split(""),t=t.split("");for(var n=0;n<e.length;n++)if(e[n].codePointAt(0)!==t[n].codePointAt(0))return ge.X();return ge.ca()}))},localName:"codepoint-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:0}},{l:[{type:1,g:0},{type:1,g:3}],m:function(e,t,n,r,i){return je([r,i],(function(e){var t=u(e);e=t.next().value,t=t.next().value,e=e?e.value:"",t=t.value;var n=Bn.get(t);if(!n){try{n=cn.compile(t,{language:"xpath"})}catch(e){throw Error("FORX0002: "+e)}Bn.set(t,n)}return n(e)?ge.ca():ge.X()}))},localName:"matches",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],m:function(e,t,n,r,i,o){return je([r,i,o],(function(e){var t=u(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,e=e?e.value:"",n=n.value,(t=t.value).includes("$0"))throw Error("Using $0 in fn:replace to replace substrings with full matches is not supported.");return t=t.split(/((?:\$\$)|(?:\\\$)|(?:\\\\))/).map((function(e){switch(e){case"\\$":return"$$";case"\\\\":return"\\";case"$$":throw Error('FORX0004: invalid replacement: "$$"');default:return e}})).join(""),n=Pn(n),e=e.replace(n,t),ge.o(X(e,1))}))},localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3},m:function(){throw Error("Not implemented: Using flags in replace is not supported")}}];function Dn(e,t,n,r){if(null===t.M)throw Error("XPDY0002: The function which was called depends on dynamic context, which is absent.");return e(t,n,r,ge.o(t.M))}function Rn(e,t,n,r){return je([r],(function(e){if(null===(e=u(e).next().value))return ge.empty();switch((e=e.value).node.nodeType){case 1:case 2:return ge.o(X(new ve(e.node.prefix,e.node.namespaceURI,e.node.localName),23));case 7:return ge.o(X(new ve("","",e.node.target),23));default:return ge.empty()}}))}function Fn(e,t,n,r){return r.$({default:function(){return En(0,t,0,Rn(0,0,0,r))},empty:function(){return ge.empty()}})}function Ln(e,t,n,r){return Pt(r,t)}function Un(e,t,n,r){return je([r],(function(e){return null!==(e=(e=u(e).next().value)?e.value:null)&&Me(t.h,e,null)?ge.ca():ge.X()}))}function $n(e,t,n,r){return je([r],(function(e){function n(e){for(var t=0,n=e;null!==n;)(e.node.nodeType!==n.node.nodeType?0:1===n.node.nodeType?n.node.localName===e.node.localName&&n.node.namespaceURI===e.node.namespaceURI:7===n.node.nodeType?n.node.target===e.node.target:1)&&t++,n=Le(i,n,null);return t}var r=u(e).next().value;if(null===r)return ge.empty();var i=t.h;for(e="",r=r.value;null!==Fe(t.h,r,null);r=Fe(t.h,r,null))switch(r.node.nodeType){case 1:var o=r;e="/Q{"+(o.node.namespaceURI||"")+"}"+o.node.localName+"["+n(o)+"]"+e;break;case 2:e="/@"+((o=r).node.namespaceURI?"Q{"+o.node.namespaceURI+"}":"")+o.node.localName+e;break;case 3:e="/text()["+n(r)+"]"+e;break;case 7:e="/processing-instruction("+(o=r).node.target+")["+n(o)+"]"+e;break;case 8:e="/comment()["+n(r)+"]"+e}return 9===r.node.nodeType?ge.create(X(e||"/",1)):ge.create(X("Q{http://www.w3.org/2005/xpath-functions}root()"+e,1))}))}function Hn(e,t,n,r){return r.map((function(e){return X(e.value.node.namespaceURI||"",20)}))}function Gn(e,t,n,r){return r.$({default:function(){return r.map((function(e){return 7===e.value.node.nodeType?X(e.value.node.target,1):X(e.value.node.localName||"",1)}))},empty:function(){return ge.o(X("",1))}})}function jn(e,t,n){if(2===t.node.nodeType)return en(t,n);for(;n;){if(en(t,n))return!0;if(9===n.node.nodeType)break;n=Fe(e,n,null)}return!1}function zn(e,t,n,r){return r.map((function(e){if(!ee(e.type,53))throw Error("XPTY0004 Argument passed to fn:root() should be of the type node()");for(e=e.value;e;){var n=e;e=Fe(t.h,n,null)}return Ge(n)}))}var Vn=[{l:[{type:53,g:0}],m:Fn,localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{l:[],m:Dn.bind(null,Fn),localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:53,g:3}],m:Hn,localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{l:[],m:Dn.bind(null,Hn),localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{l:[{type:53,g:2}],m:function(e,t,n,r){return r.L((function(e){return e.length?(e=an(t.h,e).reduceRight((function(e,n,r,i){return r===i.length-1?(e.push(n),e):(jn(t.h,n.value,e[0].value)||e.unshift(n),e)}),[]),ge.create(e)):ge.empty()}))},localName:"innermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{l:[{type:53,g:2}],m:function(e,t,n,r){return r.L((function(e){return e.length?(e=an(t.h,e).reduce((function(e,n,r){return 0===r?(e.push(n),e):(jn(t.h,e[e.length-1].value,n.value)||e.push(n),e)}),[]),ge.create(e)):ge.empty()}),1)},localName:"outermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{l:[{type:53,g:0}],m:Un,localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[],m:Dn.bind(null,Un),localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:53,g:0}],m:$n,localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{l:[],m:Dn.bind(null,$n),localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{l:[{type:53,g:0}],m:Rn,localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{l:[],m:Dn.bind(null,Rn),localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{l:[{type:53,g:0}],m:Gn,localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[],m:Dn.bind(null,Gn),localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:53,g:0}],m:zn,localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{l:[],m:Dn.bind(null,zn),localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{l:[],m:Dn.bind(null,Ln),localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{l:[{type:59,g:2}],m:Ln,localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}}];function Xn(e,t){var n=0,r=e.length,i=!1,o=null;return{next:function(){if(!i){for(;n<r;){o||(o=t(e[n],n,e));var s=o.next(0);if(o=null,!s.value)return Z(!1);n++}return i=!0,Z(!0)}return K}}}function qn(e){return 1===(e=e.node.nodeType)||3===e}function Wn(e,t){if((ee(e.type,4)||ee(e.type,6))&&(ee(t.type,4)||ee(t.type,6))){var n=Kt(e,6),r=Kt(t,6);return n.value===r.value||isNaN(e.value)&&isNaN(t.value)}return(ee(e.type,4)||ee(e.type,6)||ee(e.type,3))&&(ee(t.type,4)||ee(t.type,6)||ee(t.type,3))?(n=Kt(e,3),r=Kt(t,3),n.value===r.value||isNaN(e.value)&&isNaN(t.value)):ee(e.type,23)&&ee(t.type,23)?e.value.namespaceURI===t.value.namespaceURI&&e.value.localName===t.value.localName:(ee(e.type,9)||ee(e.type,7)||ee(e.type,8)||ee(e.type,11)||ee(e.type,12)||ee(e.type,13)||ee(e.type,14)||ee(e.type,15))&&(ee(t.type,9)||ee(t.type,7)||ee(t.type,8)||ee(t.type,11)||ee(t.type,12)||ee(t.type,13)||ee(t.type,14)||ee(t.type,15))?ht(e.value,t.value):(ee(e.type,16)||ee(e.type,17)||ee(e.type,18))&&(ee(t.type,16)||ee(t.type,17)||ee(t.type,17))?We(e.value,t.value):e.value===t.value}function Yn(e,t,n){return n=u([t,n].map((function(t){return{type:1,value:t.reduce((function(t,n){return t+It(n,e).first().value}),"")}}))),Z(Wn(t=n.next().value,n=n.next().value))}function Qn(e,t,n,r){for(;e.value&&ee(e.value.type,56);){t.push(e.value);var i=Re(r,e.value.value);if(e=n.next(0),i&&3!==i.node.nodeType)break}return e}function Kn(e,t,n,r,i){var o,s=t.h,a=r.value,l=i.value,u=null,c=null,h=null,p=[],d=[];return{next:function(){for(;!o;)if(u||(u=a.next(0)),u=Qn(u,p,a,s),c||(c=l.next(0)),c=Qn(c,d,l,s),p.length||d.length){var r=Yn(t,p,d);if(p.length=0,d.length=0,!1===r.value)return o=!0,r}else{if(u.done||c.done)return o=!0,Z(u.done===c.done);if(h||(h=Jn(e,t,n,u.value,c.value)),r=h.next(0),h=null,!1===r.value)return o=!0,r;c=u=null}return K}}}function Zn(e,t,n,r,i){return r=Ie(t.h,r.value),i=Ie(t.h,i.value),r=r.filter((function(e){return qn(e)})),i=i.filter((function(e){return qn(e)})),r=ge.create(r.map((function(e){return Ge(e)}))),i=ge.create(i.map((function(e){return Ge(e)}))),Kn(e,t,n,r,i)}function Jn(e,t,n,r,i){if(ee(r.type,46)&&ee(i.type,46))return Zt(Wn(r,i));if(ee(r.type,61)&&ee(i.type,61))return function(e,t,n,r,i){return r.h.length!==i.h.length?Zt(!1):Xn(r.h,(function(r){var o=i.h.find((function(e){return Wn(e.key,r.key)}));return o?Kn(e,t,n,r.value(),o.value()):Zt(!1)}))}(e,t,n,r,i);if(ee(r.type,62)&&ee(i.type,62))return function(e,t,n,r,i){return r.R.length!==i.R.length?Zt(!1):Xn(r.R,(function(r,o){return o=i.R[o],Kn(e,t,n,r(),o())}))}(e,t,n,r,i);if(ee(r.type,53)&&ee(i.type,53)){if(ee(r.type,55)&&ee(i.type,55))return Zn(e,t,n,r,i);if(ee(r.type,54)&&ee(i.type,54))return function(e,t,n,r,i){var o=Kn(e,t,n,Rn(0,0,0,ge.o(r)),Rn(0,0,0,ge.o(i))),s=Zn(e,t,n,r,i);r=Ne(t.h,r.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return Ge(e)})),i=Ne(t.h,i.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return Ge(e)}));var a=Kn(e,t,n,ge.create(r),ge.create(i)),l=!1;return{next:function(){if(l)return K;var e=o.next(0);return!e.done&&!1===e.value||!(e=a.next(0)).done&&!1===e.value?(l=!0,e):(e=s.next(0),l=!0,e)}}}(e,t,n,r,i);if(ee(r.type,47)&&ee(i.type,47)||ee(r.type,57)&&ee(i.type,57)||ee(r.type,58)&&ee(i.type,58))return function(e,t,n,r,i){var o=Kn(e,t,n,Rn(0,0,0,ge.o(r)),Rn(0,0,0,ge.o(i))),s=!1;return{next:function(){if(s)return K;var e=o.next(0);return e.done||!1!==e.value?Z(Wn(It(r,t).first(),It(i,t).first())):(s=!0,e)}}}(e,t,n,r,i)}return Zt(!1)}function er(e){return Error("XUST0001: "+(void 0===e?"Can not execute an updating expression in a non-updating context.":e))}function tr(e){return Error("XUTY0004: The attribute "+e.name+'="'+e.value+'" follows a node that is not an attribute node.')}function nr(){return Error("XUTY0005: The target of a insert expression with into must be a single element or document node.")}function rr(){return Error("XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node.")}function ir(){return Error("XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node.")}function or(){return Error("XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node.")}function sr(e){return Error("XUDY0017: The target "+e.outerHTML+" is used in more than one replace value of expression.")}function ar(e){return Error("XUDY0021: Applying the updates will result in the XDM instance violating constraint: '"+e+"'")}function lr(e){return Error("XUDY0023: The namespace binding "+e+" is conflicting.")}function ur(e){return Error("XUDY0024: The namespace binding "+e+" is conflicting.")}function cr(){return Error("XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.")}function hr(e,t,n,r,i){n=void 0===n?{C:!1,Y:!1,S:"unsorted",subtree:!1}:n,this.s=e,this.O=n.S||"unsorted",this.subtree=!!n.subtree,this.Y=!!n.Y,this.C=!!n.C,this.ha=t,this.I=!1,this.$a=null,this.dc=void 0!==r&&r,this.type=i}function pr(e,t,n){return t&&null!==t.M&&e.C?(null===e.$a&&(e.$a=ye(e.h(null,n).qb())),e=e.$a()):e=e.h(t,n),e}function dr(e,t){this.H=e,this.fa=t}function fr(e){e&&"object"==typeof e&&"nodeType"in e&&("function"==typeof(e=e.ownerDocument||e).createElementNS&&"function"==typeof e.createProcessingInstruction&&"function"==typeof e.createTextNode&&"function"==typeof e.createComment&&(this.h=e)),this.h||(this.h=null)}function mr(e,t,n){t.forEach((function(t){n.insertBefore(e.node,t.node,null)}))}function gr(e,t,n,r){var i=Fe(n,e),o=e.node.nodeType;if(2===o){if(t.some((function(e){return 2!==e.node.nodeType})))throw Error('Constraint "If $target is an attribute node, $replacement must consist of zero or more attribute nodes." failed.');var s=i?i.node:null;r.removeAttributeNS(s,e.node.namespaceURI,e.node.nodeName),t.forEach((function(e){var t=e.node.nodeName;if(Be(n,i,t))throw ar("An attribute "+t+" already exists.");r.setAttributeNS(s,e.node.namespaceURI,t,Pe(n,e))}))}if(1===o||3===o||8===o||7===o){var a=(o=Re(n,e))?o.node:null;r.removeChild(i.node,e.node),t.forEach((function(e){r.insertBefore(i.node,e.node,a)}))}}function yr(e,t,n,r){if(function(e,t){function n(e){return new ve(e.node.prefix,e.node.namespaceURI,e.node.localName)}function r(t,n){var r=new Set;e.filter((function(e){return e.type===t})).map((function(e){return e.target})).forEach((function(e){e=e?e.node:null,r.has(e)&&n(e),r.add(e)}))}r("rename",(function(e){throw Error("XUDY0015: The target "+e.outerHTML+" is used in more than one rename expression.")})),r("replaceNode",(function(e){throw Error("XUDY0016: The target "+e.outerHTML+" is used in more than one replace expression.")})),r("replaceValue",(function(e){throw sr(e)})),r("replaceElementContent",(function(e){throw sr(e)}));var i=new Map;e.filter((function(e){return"replaceNode"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var r=Fe(t,e.target);r=r?r.node:null;var o=i.get(r);o?o.push.apply(o,h(e.s.map(n))):i.set(r,e.s.map(n))})),e.filter((function(e){return"rename"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var n=Fe(t,e.target);if(n){n=n.node;var r=i.get(n);r?r.push(e.s):i.set(n,[e.s])}})),i.forEach((function(e){var t={};e.forEach((function(e){if(t[e.prefix]||(t[e.prefix]=e.namespaceURI),t[e.prefix]!==e.namespaceURI)throw ur(e.namespaceURI)}))}))}(e,t),e.filter((function(e){return-1!==["insertInto","insertAttributes","replaceValue","rename"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertInto":mr(e.target,e.content,r);break;case"insertAttributes":!function(e,t,n,r){t.forEach((function(t){var i=t.node.nodeName;if(Be(n,e,i))throw ar("An attribute "+i+" already exists.");r.setAttributeNS(e.node,t.node.namespaceURI,i,Pe(n,t))}))}(e.target,e.content,t,r);break;case"rename":!function(e,t,n,r,i){switch(r||(r=new fr(e?e.node:null)),e.node.nodeType){case 1:var o=n.getAllAttributes(e.node),s=n.getChildNodes(e.node),a=r.createElementNS(t.namespaceURI,t.ya()),l={node:a,F:null};o.forEach((function(e){i.setAttributeNS(a,e.namespaceURI,e.nodeName,e.value)})),s.forEach((function(e){i.insertBefore(a,e,null)}));break;case 2:(t=r.createAttributeNS(t.namespaceURI,t.ya())).value=Pe(n,e),l={node:t,F:null};break;case 7:l={node:r.createProcessingInstruction(t.ya(),Pe(n,e)),F:null}}if(!Fe(n,e))throw Error("Not supported: renaming detached nodes.");gr(e,[l],n,i)}(e.target,e.s,t,n,r);break;case"replaceValue":var i=e.target;if(e=e.s,2===i.node.nodeType){var o=Fe(t,i);o?r.setAttributeNS(o.node,i.node.namespaceURI,i.node.nodeName,e):i.node.value=e}else r.setData(i.node,e)}})),e.filter((function(e){return-1!==["insertBefore","insertAfter","insertIntoAsFirst","insertIntoAsLast"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertAfter":!function(e,t,n,r){var i=Fe(n,e).node,o=(e=Re(n,e))?e.node:null;t.forEach((function(e){r.insertBefore(i,e.node,o)}))}(e.target,e.content,t,r);break;case"insertBefore":!function(e,t,n,r){var i=Fe(n,e).node;t.forEach((function(t){r.insertBefore(i,t.node,e.node)}))}(e.target,e.content,t,r);break;case"insertIntoAsFirst":!function(e,t,n,r){var i=(n=Me(n,e))?n.node:null;t.forEach((function(t){r.insertBefore(e.node,t.node,i)}))}(e.target,e.content,t,r);break;case"insertIntoAsLast":mr(e.target,e.content,r)}})),e.filter((function(e){return"replaceNode"===e.type})).forEach((function(e){gr(e.target,e.s,t,r)})),e.filter((function(e){return"replaceElementContent"===e.type})).forEach((function(e){!function(e,t,n,r){n.getChildNodes(e.node).forEach((function(t){return r.removeChild(e.node,t)})),t&&r.insertBefore(e.node,t.node,null)}(e.target,e.text,t,r)})),e.filter((function(e){return"delete"===e.type})).forEach((function(e){e=e.target;var n=Fe(t,e);(n=n?n.node:null)&&(2===e.node.nodeType?r.removeAttributeNS(n,e.node.namespaceURI,e.node.nodeName):r.removeChild(n,e.node))})),e.some((function(e){return"put"===e.type})))throw Error('Not implemented: the execution for pendingUpdate "put" is not yet implemented.')}function vr(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];return e.concat.apply(e,h(n.filter(Boolean)))}function wr(e,t,n,r){hr.call(this,e,t,n,!0,r),this.I=!0}function br(e){return e.I?function(t,n){return e.u(t,n)}:function(t,n){var r=e.h(t,n);return{next:function(){return Z({fa:[],H:r.N()})}}}}function xr(e,t){return t((e=e.next(0)).value.fa),ge.create(e.value.H)}function Ar(e,t,n,r){wr.call(this,e,t,n,r),this.I=this.ha.some((function(e){return e.I}))}hr.prototype.A=function(){return null},hr.prototype.P=function(e){if(this.ha.forEach((function(t){return t.P(e)})),!this.dc&&this.ha.some((function(e){return e.I})))throw er()},(r=fr.prototype).createAttributeNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createAttributeNS(e,t)},r.createCDATASection=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createCDATASection(e)},r.createComment=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createComment(e)},r.createDocument=function(){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.implementation.createDocument(null,null,null)},r.createElementNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createElementNS(e,t)},r.createProcessingInstruction=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createProcessingInstruction(e,t)},r.createTextNode=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createTextNode(e)},y(wr,hr),wr.prototype.h=function(){throw er()},y(Ar,wr),Ar.prototype.h=function(e,t){return this.B(e,t,this.ha.map((function(e){return function(n){return e.h(n,t)}})))},Ar.prototype.u=function(e,t){var n=[],r=this.B(e,t,this.ha.map((function(e){return e.I?function(r){return xr(r=e.u(r,t),(function(e){return n=vr(n,e)}))}:function(n){return e.h(n,t)}}))),i=!1;return{next:function(){if(i)return K;var e=r.N();return i=!0,Z(new dr(e,n))}}},Ar.prototype.P=function(e){wr.prototype.P.call(this,e),function(e){e.ha.some((function(e){return e.I}))&&(e.I=!0)}(this)};var _r=["external","attribute","nodeName","nodeType","universal"],kr=_r.length;function Er(e){if(this.h=_r.map((function(t){return e[t]||0})),Object.keys(e).some((function(e){return!_r.includes(e)})))throw Error("Invalid specificity kind passed")}function Cr(e,t){for(var n=0;n<kr;++n){if(t.h[n]<e.h[n])return 1;if(t.h[n]>e.h[n])return-1}return 0}function Sr(){return Tt("Expected base expression of a function call to evaluate to a sequence of single function item")}function Or(e,t,n,r){for(var i=[],o=0;o<t.length;++o)if(null===t[o])i.push(null);else{var s=dn(e[o],t[o],n,r,!1);i.push(s)}return i}function Tr(e,t){if(!ee(e.type,60))throw Tt("Expected base expression to evaluate to a function item");if(e.A!==t)throw Sr();return e}function Nr(e,t,n,r,i,o,s){var a=0;return i=i.map((function(e){return e?null:o[a++](n)})),0<=(i=Or(e.s,i,r,e.j)).indexOf(null)?function(e,t){var n=e.value,r=t.map((function(e){return null===e?null:ye(e)}));return t=t.reduce((function(t,n,r){return null===n&&t.push(e.s[r]),t}),[]),t=new we({l:t,arity:t.length,Ra:!0,I:e.I,localName:"boundFunction",namespaceURI:e.u,i:e.O,value:function(e,t,i){var o=Array.from(arguments).slice(3),s=r.map((function(e){return null===e?o.shift():e()}));return n.apply(void 0,[e,t,i].concat(s))}}),ge.o(t)}(e,i):(t=t.apply(void 0,[n,r,s].concat(h(i))),dn(e.O,t,r,e.j,!0))}function Br(e,t,n){var r={};Ar.call(this,new Er((r.external=1,r)),[e].concat(t.filter((function(e){return!!e}))),{S:"unsorted",Y:!1,subtree:!1,C:!1},n),this.ka=t.length,this.T=t.map((function(e){return null===e})),this.J=null,this.pa=e,this.xa=t}function Ir(e,t,n,r,i,o){return je([r,i,o],(function(e){var t=u(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,n=n.value,t=t.value,n>e.R.length||0>=n)throw Error("FOAY0001: subarray start out of bounds.");if(0>t)throw Error("FOAY0002: subarray length out of bounds.");if(n+t>e.R.length+1)throw Error("FOAY0001: subarray start + length out of bounds.");return ge.o(new $e(e.R.slice(n-1,t+n-1)))}))}function Pr(e,t,n,r,i){return je([r],(function(e){var t=u(e).next().value;return i.L((function(e){e=e.map((function(e){return e.value})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n[t-1]!==e}));for(var n=t.R.concat(),r=0,i=e.length;r<i;++r){var o=e[r];if(o>t.R.length||0>=o)throw Error("FOAY0001: subarray position out of bounds.");n.splice(o-1,1)}return ge.o(new $e(n))}))}))}function Mr(e){return ee(e,1)||ee(e,20)||ee(e,19)}function Dr(e,t,n,r,i){return 0===r.length?0!==i.length:0!==i.length&&Jn(e,t,n,r[0],i[0]).next(0).value?Dr(e,t,n,r.slice(1),i.slice(1)):r[0].value!=r[0].value||(Mr(r[0].type)&&0!==i.length&&Mr(i[0].type)||0!==i.length)&&r[0].value<i[0].value}function Rr(e,t,n,r){return r.sort((function(r,i){return Kn(e,t,n,ge.create(r),ge.create(i)).next(0).value?0:Dr(e,t,n,r,i)?-1:1})),ge.o(new $e(r.map((function(e){return function(){return ge.create(e)}}))))}function Fr(e,t){return ee(t.type,62)?t.R.reduce((function(e,t){return t().L((function(t){return t.reduce(Fr,e)}))}),e):St([e,ge.o(t)])}Er.prototype.add=function(e){var t=this,n=_r.reduce((function(n,r,i){return n[r]=t.h[i]+e.h[i],n}),Object.create(null));return new Er(n)},y(Br,Ar),Br.prototype.u=function(e,t){var n=this;if(!this.j||!this.j.I)return Ar.prototype.u.call(this,e,t);var r=[],i=Nr(this.j,(function(e,t,i,o){for(var s=[],a=3;a<arguments.length;++a)s[a-3]=arguments[a];return xr(n.j.value.apply(n.j,[e,t,i].concat(h(s))),(function(e){r=vr(r,e)}))}),e,t,this.T,this.xa.map((function(n){return function(){return n.I?xr(n.u(e,t),(function(e){r=vr(r,e)})):pr(n,e,t)}})),this.J),o=!1;return{next:function(){if(o)return K;var e=i.N();return o=!0,Z({fa:r,H:e})}}},Br.prototype.B=function(e,t,n){var r=this,i=(n=u(n)).next().value,o=c(n);if(this.j)return Nr(this.j,(function(e,t,n,i){for(var o=[],s=3;s<arguments.length;++s)o[s-3]=arguments[s];return r.j.value.apply(r.j,[e,t,n].concat(h(o)))}),e,t,this.T,o,this.J);var s=i(e);return s.$({default:function(){throw Sr()},o:function(){return s.L((function(n){if((n=Tr(n=u(n).next().value,r.ka)).I)throw Error("XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function");return Nr(n,n.value,e,t,r.T,o,r.J)}))}})},Br.prototype.P=function(e){if(this.J=ki(e),Ar.prototype.P.call(this,e),this.pa.C){if(!(e=pr(this.pa,null,null)).ta())throw Sr();this.j=Tr(e.first(),this.ka),this.j.I&&(this.I=!0)}};var Lr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"size",l:[{type:62,g:3}],i:{type:5,g:3},m:function(e,t,n,r){return je([r],(function(e){return e=u(e).next().value,ge.o(X(e.R.length,5))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"get",l:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},m:Ue},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"put",l:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},m:function(e,t,n,r,i,o){return je([i,r],(function(e){var t=u(e);if(e=t.next().value,t=t.next().value,0>=(e=e.value)||e>t.R.length)throw Error("FOAY0001: array position out of bounds.");return(t=t.R.concat()).splice(e-1,1,ye(o)),ge.o(new $e(t))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"append",l:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},m:function(e,t,n,r,i){return je([r],(function(e){return e=u(e).next().value.R.concat([ye(i)]),ge.o(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",l:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},m:Ir},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",l:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},m:function(e,t,n,r,i){var o=ge.o(X(r.first().value.length-i.first().value+1,5));return Ir(0,0,0,r,i,o)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"remove",l:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},m:Pr},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"insert-before",l:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},m:function(e,t,n,r,i,o){return je([r,i],(function(e){var t=u(e);if(e=t.next().value,(t=t.next().value.value)>e.R.length+1||0>=t)throw Error("FOAY0001: subarray position out of bounds.");return(e=e.R.concat()).splice(t-1,0,ye(o)),ge.o(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"head",l:[{type:62,g:3}],i:{type:59,g:2},m:function(e,t,n,r){return Ue(0,0,0,r,ge.o(X(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"tail",l:[{type:62,g:3}],i:{type:59,g:2},m:function(e,t,n,r){return Pr(0,0,0,r,ge.o(X(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"reverse",l:[{type:62,g:3}],i:{type:62,g:3},m:function(e,t,n,r){return je([r],(function(e){return e=u(e).next().value,ge.o(new $e(e.R.concat().reverse()))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"join",l:[{type:62,g:2}],i:{type:62,g:3},m:function(e,t,n,r){return r.L((function(e){return e=e.reduce((function(e,t){return e.concat(t.R)}),[]),ge.o(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each",l:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},m:function(e,t,n,r,i){return je([r,i],(function(r){var i=(r=u(r)).next().value,o=r.next().value;if(1!==o.A)throw Tt("The callback passed into array:for-each has a wrong arity.");return r=i.R.map((function(r){return ye(o.value.call(void 0,e,t,n,Or(o.s,[r()],t,"array:for-each")[0]))})),ge.o(new $e(r))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"filter",l:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},m:function(e,t,n,r,i){return je([r,i],(function(r){var i=(r=u(r)).next().value,o=r.next().value;if(1!==o.A)throw Tt("The callback passed into array:filter has a wrong arity.");var s=i.R.map((function(r){return r=Or(o.s,[r()],t,"array:filter")[0],(0,o.value)(e,t,n,r)})),a=[],l=!1;return ge.create({next:function(){if(l)return K;for(var e=0,t=i.R.length;e<t;++e){var n=s[e].getEffectiveBooleanValue();a[e]=n}return e=i.R.filter((function(e,t){return a[t]})),l=!0,Z(new $e(e))}})}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-left",l:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},m:function(e,t,n,r,i,o){return je([r,o],(function(r){var o=(r=u(r)).next().value,s=r.next().value;if(2!==s.A)throw Tt("The callback passed into array:fold-left has a wrong arity.");return o.R.reduce((function(r,i){return i=Or(s.s,[i()],t,"array:fold-left")[0],s.value.call(void 0,e,t,n,r,i)}),i)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-right",l:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},m:function(e,t,n,r,i,o){return je([r,o],(function(r){var o=(r=u(r)).next().value,s=r.next().value;if(2!==s.A)throw Tt("The callback passed into array:fold-right has a wrong arity.");return o.R.reduceRight((function(r,i){return i=Or(s.s,[i()],t,"array:fold-right")[0],s.value.call(void 0,e,t,n,r,i)}),i)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each-pair",l:[{type:62,g:3},{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},m:function(e,t,n,r,i,o){return je([r,i,o],(function(r){var i=u(r);r=i.next().value;var o=i.next().value;if(2!==(i=i.next().value).A)throw Tt("The callback passed into array:for-each-pair has a wrong arity.");for(var s=[],a=0,l=Math.min(r.R.length,o.R.length);a<l;++a){var c=u(Or(i.s,[r.R[a](),o.R[a]()],t,"array:for-each-pair")),h=c.next().value;c=c.next().value,s[a]=ye(i.value.call(void 0,e,t,n,h,c))}return ge.o(new $e(s))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"sort",l:[{type:62,g:3}],i:{type:62,g:3},m:function(e,t,n,r){return je([r],(function(r){return r=u(r).next().value.R.map((function(e){return e().N()})),Rr(e,t,n,r)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"flatten",l:[{type:59,g:2}],i:{type:59,g:2},m:function(e,t,n,r){return r.L((function(e){return e.reduce(Fr,ge.empty())}))}}];function Ur(e,t,n,r,i){return i.G()?i:ge.o(Kt(i.first(),e))}var $r=[{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"untypedAtomic",l:[{type:46,g:0}],i:{type:19,g:0},m:Ur.bind(null,19)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"error",l:[{type:46,g:0}],i:{type:39,g:0},m:Ur.bind(null,39)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"string",l:[{type:46,g:0}],i:{type:1,g:0},m:Ur.bind(null,1)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"boolean",l:[{type:46,g:0}],i:{type:0,g:0},m:Ur.bind(null,0)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"decimal",l:[{type:46,g:0}],i:{type:4,g:0},m:Ur.bind(null,4)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"float",l:[{type:46,g:0}],i:{type:6,g:0},m:Ur.bind(null,6)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"double",l:[{type:46,g:0}],i:{type:3,g:0},m:Ur.bind(null,3)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"duration",l:[{type:46,g:0}],i:{type:18,g:0},m:Ur.bind(null,18)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTime",l:[{type:46,g:0}],i:{type:9,g:0},m:Ur.bind(null,9)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",l:[{type:46,g:0}],i:{type:10,g:0},m:Ur.bind(null,10)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"time",l:[{type:46,g:0}],i:{type:8,g:0},m:Ur.bind(null,8)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"date",l:[{type:46,g:0}],i:{type:7,g:0},m:Ur.bind(null,7)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYearMonth",l:[{type:46,g:0}],i:{type:11,g:0},m:Ur.bind(null,11)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYear",l:[{type:46,g:0}],i:{type:12,g:0},m:Ur.bind(null,12)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonthDay",l:[{type:46,g:0}],i:{type:13,g:0},m:Ur.bind(null,13)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gDay",l:[{type:46,g:0}],i:{type:15,g:0},m:Ur.bind(null,15)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonth",l:[{type:46,g:0}],i:{type:14,g:0},m:Ur.bind(null,14)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"hexBinary",l:[{type:46,g:0}],i:{type:22,g:0},m:Ur.bind(null,22)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"base64Binary",l:[{type:46,g:0}],i:{type:21,g:0},m:Ur.bind(null,21)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"QName",l:[{type:46,g:0}],i:{type:23,g:0},m:function(e,t,n,r){if(r.G())return r;if(ee((e=r.first()).type,2))throw Error("XPTY0004: The provided QName is not a string-like value.");if(!Rt(e=Dt(e=Kt(e,1).value,23),23))throw Error("FORG0001: The provided QName is invalid.");if(!e.includes(":"))return n=n.ba(""),ge.o(X(new ve("",n,e),23));if(t=(r=u(e.split(":"))).next().value,r=r.next().value,!(n=n.ba(t)))throw Error("FONS0004: The value "+e+" can not be cast to a QName. Did you mean to use fn:QName?");return ge.o(X(new ve(t,n,r),23))}},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"anyURI",l:[{type:46,g:0}],i:{type:20,g:0},m:Ur.bind(null,20)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"normalizedString",l:[{type:46,g:0}],i:{type:48,g:0},m:Ur.bind(null,48)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"token",l:[{type:46,g:0}],i:{type:52,g:0},m:Ur.bind(null,52)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"language",l:[{type:46,g:0}],i:{type:51,g:0},m:Ur.bind(null,51)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKEN",l:[{type:46,g:0}],i:{type:50,g:0},m:Ur.bind(null,50)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKENS",l:[{type:46,g:0}],i:{type:49,g:2},m:Ur.bind(null,49)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"Name",l:[{type:46,g:0}],i:{type:25,g:0},m:Ur.bind(null,25)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NCName",l:[{type:46,g:0}],i:{type:24,g:0},m:Ur.bind(null,24)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ID",l:[{type:46,g:0}],i:{type:42,g:0},m:Ur.bind(null,42)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREF",l:[{type:46,g:0}],i:{type:41,g:0},m:Ur.bind(null,41)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREFS",l:[{type:46,g:0}],i:{type:43,g:2},m:Ur.bind(null,43)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITY",l:[{type:46,g:0}],i:{type:26,g:0},m:Ur.bind(null,26)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITIES",l:[{type:46,g:0}],i:{type:40,g:2},m:Ur.bind(null,40)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"integer",l:[{type:46,g:0}],i:{type:5,g:0},m:Ur.bind(null,5)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonPositiveInteger",l:[{type:46,g:0}],i:{type:27,g:0},m:Ur.bind(null,27)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"negativeInteger",l:[{type:46,g:0}],i:{type:28,g:0},m:Ur.bind(null,28)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"long",l:[{type:46,g:0}],i:{type:31,g:0},m:Ur.bind(null,31)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"int",l:[{type:46,g:0}],i:{type:32,g:0},m:Ur.bind(null,32)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"short",l:[{type:46,g:0}],i:{type:33,g:0},m:Ur.bind(null,33)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"byte",l:[{type:46,g:0}],i:{type:34,g:0},m:Ur.bind(null,34)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonNegativeInteger",l:[{type:46,g:0}],i:{type:30,g:0},m:Ur.bind(null,30)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedLong",l:[{type:46,g:0}],i:{type:36,g:0},m:Ur.bind(null,36)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedInt",l:[{type:46,g:0}],i:{type:35,g:0},m:Ur.bind(null,35)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedShort",l:[{type:46,g:0}],i:{type:38,g:0},m:Ur.bind(null,38)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedByte",l:[{type:46,g:0}],i:{type:37,g:0},m:Ur.bind(null,37)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"positiveInteger",l:[{type:46,g:0}],i:{type:29,g:0},m:Ur.bind(null,29)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"yearMonthDuration",l:[{type:46,g:0}],i:{type:16,g:0},m:Ur.bind(null,16)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dayTimeDuration",l:[{type:46,g:0}],i:{type:17,g:0},m:Ur.bind(null,17)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",l:[{type:46,g:0}],i:{type:10,g:0},m:Ur.bind(null,10)}];function Hr(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getYear(),5))}function Gr(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getMonth(),5))}function jr(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getDay(),5))}function zr(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getHours(),5))}function Vr(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getMinutes(),5))}function Xr(e,t,n,r){return r.G()||(t=(e=ge).o,r=r.first().value,r=t.call(e,X(r.j+r.ra,4))),r}function qr(e,t,n,r){return r.G()?r:(e=r.first().value.Z)?ge.o(X(e,17)):ge.empty()}var Wr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"dateTime",l:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},m:function(e,t,n,r,i){if(r.G())return r;if(i.G())return i;if(e=r.first().value,i=i.first().value,t=e.Z,n=i.Z,t||n){if(!t||n)if(!t&&n)t=n;else if(!We(t,n))throw Error("FORG0008: fn:dateTime: got a date and time value with different timezones.")}else t=null;return ge.o(X(new st(e.getYear(),e.getMonth(),e.getDay(),i.getHours(),i.getMinutes(),i.getSeconds(),i.ra,t),9))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Hr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Gr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:jr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:zr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Vr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-dateTime",l:[{type:9,g:0}],i:{type:4,g:0},m:Xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-dateTime",l:[{type:9,g:0}],i:{type:17,g:0},m:qr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-date",l:[{type:7,g:0}],i:{type:5,g:0},m:Hr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-date",l:[{type:7,g:0}],i:{type:5,g:0},m:Gr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-date",l:[{type:7,g:0}],i:{type:5,g:0},m:jr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-date",l:[{type:7,g:0}],i:{type:17,g:0},m:qr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-time",l:[{type:8,g:0}],i:{type:5,g:0},m:zr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-time",l:[{type:8,g:0}],i:{type:5,g:0},m:Vr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-time",l:[{type:8,g:0}],i:{type:4,g:0},m:Xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-time",l:[{type:8,g:0}],i:{type:17,g:0},m:qr}];function Yr(e,t){var n=t.h,r=t.s,i=t.j;switch(e.node.nodeType){case 1:var o=r.createElementNS(e.node.namespaceURI,e.node.nodeName);for(n.getAllAttributes(e.node).forEach((function(e){return i.setAttributeNS(o,e.namespaceURI,e.nodeName,e.value)})),e=(r=u(Ie(n,e))).next();!e.done;e=r.next())e=Yr(e.value,t),i.insertBefore(o,e.node,null);return{node:o,F:null};case 2:return(t=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Pe(n,e),{node:t,F:null};case 4:return{node:r.createCDATASection(Pe(n,e)),F:null};case 8:return{node:r.createComment(Pe(n,e)),F:null};case 9:for(r=r.createDocument(),e=(n=u(Ie(n,e))).next();!e.done;e=n.next())e=Yr(e.value,t),i.insertBefore(r,e.node,null);return{node:r,F:null};case 7:return{node:r.createProcessingInstruction(e.node.target,Pe(n,e)),F:null};case 3:return{node:r.createTextNode(Pe(n,e)),F:null}}}function Qr(e,t){var n=t.j,r=t.s,i=t.h;if(!Se(e.node))return Yr(e,t).node;switch(e.node.nodeType){case 2:return(r=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Pe(i,e),r;case 8:return r.createComment(Pe(i,e));case 1:var o=e.node.prefix,s=e.node.localName,a=r.createElementNS(e.node.namespaceURI,o?o+":"+s:s);return Ie(i,e).forEach((function(e){e=Qr(e,t),n.insertBefore(a,e,null)})),Ne(i,e).forEach((function(e){n.setAttributeNS(a,e.node.namespaceURI,e.node.nodeName,Pe(i,e))})),a.normalize(),a;case 7:return r.createProcessingInstruction(e.node.target,Pe(i,e));case 3:return r.createTextNode(Pe(i,e))}}function Kr(e,t,n){var r=e.node;if(!(Se(r)||n||e.F))return r;r=t.ha;var i=[];return n?Qr(e,t):(e=function(e,t,n){var r=e;for(e=Fe(n,r);null!==e;){if(2===r.node.nodeType)t.push(r.node.nodeName);else{var i=Ie(n,e);t.push(i.findIndex((function(e){return en(e,r)})))}e=Fe(n,r=e)}return r}(e,i,t.h),(n=r.get(e.node))||(n={node:Qr(e,t),F:null},r.set(e.node,n)),function(e,t,n){for(var r={};0<t.length;)r.Za=t.pop(),e="string"==typeof r.Za?Ne(n,e).find(function(e){return function(t){return t.node.nodeName===e.Za}}(r)):Ie(n,e)[r.Za],r={Za:r.Za};return e.node}(n,i,t.h))}function Zr(e,t,n,r,i){return r.L((function(e){for(var n="",r=0;r<e.length;r++){var o=e[r],s=t.A&&ee(o.type,53)?t.A.serializeToString(Kr(o.value,t,!1)):Pt(ge.o(o),t).map((function(e){return Kt(e,1)})).first().value;n+="{type: "+oe[o.type]+", value: "+s+"}\n"}return void 0!==i&&(n+=i.first().value),t.O.trace(n),ge.create(e)}))}var Jr=[{l:[{type:59,g:2}],m:Zr,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:1,g:3}],m:Zr,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}}];function ei(e,t,n,r,i){throw e=void 0===r||r.G()?new ve("err","http://www.w3.org/2005/xqt-errors","FOER0000"):r.first().value,t="",void 0===i||i.G()||(t=": "+i.first().value),Error(""+e.localName+t)}var ti=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[],i:{type:63,g:3},m:ei},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[{type:23,g:0}],i:{type:63,g:3},m:ei},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},m:ei},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},m:function(){throw Error("Not implemented: Using an error object in error is not supported")}}];function ni(e){return"string"==typeof e?e:(e=(new _e).getChildNodes(e).find((function(e){return 8===e.nodeType})))?e.data:"some expression"}function ri(e,t){e=Error.call(this,e),this.message=e.message,"stack"in e&&(this.stack=e.stack),this.position={end:{la:t.end.la,line:t.end.line,offset:t.end.offset},start:{la:t.start.la,line:t.start.line,offset:t.start.offset}}}function ii(e,t){if(t instanceof Error)throw t;"string"!=typeof e&&(e=ni(e));var n=Io(t);e=e.replace("\r","").split("\n");var r=Math.floor(Math.log10(Math.min(n.end.line+2,e.length)))+1;throw e=e.reduce((function(e,t,i){var o=i+1;if(2<n.start.line-o||2<o-n.end.line)return e;if(i=Array(r).fill(" ",0,Math.floor(Math.log10(o))+1-r).join("")+o+": ",e.push(i+t),o>=n.start.line&&o<=n.end.line){var s=o<n.end.line?t.length+i.length:n.end.la-1+i.length;o=o>n.start.line?i.length:n.start.la-1+i.length,e.push(Array(i.length+t.length).fill(" ",0,o).fill("^",o,s).join(""))}return e}),[]),t=Po(t).join("\n"),new ri(e.join("\n")+"\n\n"+t,n)}y(ri,Error);var oi=Object.create(null);function si(e,t){for(var n=[],r=0;r<e.length+1;++r)n[r]=[];return function r(i,o){if(0===i)return o;if(0===o)return i;if(void 0!==n[i][o])return n[i][o];var s=0;return e[i-1]!==t[o-1]&&(s=1),s=Math.min(r(i-1,o)+1,r(i,o-1)+1,r(i-1,o-1)+s),n[i][o]=s}(e.length,t.length)}function ai(e){var t=oi[e]?oi[e]:Object.keys(oi).map((function(t){return{name:t,yb:si(e,t.slice(t.lastIndexOf(":")+1))}})).sort((function(e,t){return e.yb-t.yb})).slice(0,5).filter((function(t){return t.yb<e.length/2})).reduce((function(e,t){return e.concat(oi[t.name])}),[]).slice(0,5);return t.length?t.map((function(e){return'"Q{'+e.namespaceURI+"}"+e.localName+" ("+e.l.map((function(e){return 4===e?"...":ae(e)})).join(", ")+')"'})).reduce((function(e,t,n,r){return 0===n?e+t:e+(n!==r.length-1?", ":" or ")+t}),"Did you mean ")+"?":"No similar functions found."}function li(e,t,n,r,i){oi[e+":"+t]||(oi[e+":"+t]=[]),oi[e+":"+t].push({l:n,arity:n.length,m:i,I:!1,localName:t,namespaceURI:e,i:r})}var ui={},ci=(ui.xml="http://www.w3.org/XML/1998/namespace",ui.xs="http://www.w3.org/2001/XMLSchema",ui.fn="http://www.w3.org/2005/xpath-functions",ui.map="http://www.w3.org/2005/xpath-functions/map",ui.array="http://www.w3.org/2005/xpath-functions/array",ui.math="http://www.w3.org/2005/xpath-functions/math",ui.fontoxpath="http://fontoxml.com/fontoxpath",ui.local="http://www.w3.org/2005/xquery-local-functions",ui);function hi(e,t,n,r){this.Ea=[Object.create(null)],this.Fa=Object.create(null),this.O=e,this.ha=Object.keys(t).reduce((function(e,n){return void 0===t[n]||(e[n]="Q{}"+n+"[0]"),e}),Object.create(null)),this.s=Object.create(null),this.h=Object.create(null),this.A=n,this.u=r,this.j=[]}function pi(e){return Error("XPTY0004: "+e)}function di(e,t){return e=2===e.node.nodeType?e.node.nodeName+'="'+Pe(t,e)+'"':e.node.outerHTML,Error("XQTY0024: The node "+e+" follows a node that is not an attribute node or a namespace node.")}function fi(e){return Error('XQDY0044: The node name "'+e.ya()+'" is invalid for a computed attribute constructor.')}function mi(){return Error("XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs.")}function gi(){return Error("XQST0060: Functions declared in a module or as an external function must reside in a namespace.")}function yi(){return Error("XQST0066: A Prolog may contain at most one default function namespace declaration.")}function vi(){return Error("XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI.")}function wi(e){return Error('XQDY0074: The value "'+e+'" of a name expressions cannot be converted to an expanded QName.')}function bi(e){return Error('XPST0081: The prefix "'+e+'" could not be resolved')}function xi(e,t){return"Q{"+(e||"")+"}"+t}function Ai(e,t){for(var n=e.length-1;0<=n;--n)if(t in e[n])return e[n][t]}function _i(e){this.s=e,this.O=this.h=0,this.j=[Object.create(null)],this.u=Object.create(null),this.A=null,this.Fa=e&&e.Fa,this.Ea=e&&e.Ea}function ki(e){for(var t=new _i(e.s),n=0;n<e.h+1;++n)t.j=[Object.assign(Object.create(null),t.j[0],e.j[n])],t.Ea=[Object.assign(Object.create(null),t.Ea[0],e.Ea[n])],t.u=Object.assign(Object.create(null),e.u),t.Fa=e.Fa,t.A=e.A;return t}function Ei(e){e.O++,e.h++,e.j[e.h]=Object.create(null),e.Ea[e.h]=Object.create(null)}function Ci(e,t,n,r,i){if(r=xi(t,n)+"~"+r,e.u[r])throw Error('XQST0049: The function or variable "Q{'+t+"}"+n+'" is declared more than once.');e.u[r]=i}function Si(e,t,n){e.j[e.h][t]=n}function Oi(e,t,n){return t=xi(t||"",n),e.Ea[e.h][t]=t+"["+e.O+"]"}function Ti(e,t,n,r){e.Fa[xi(t||"",n)+"["+e.O+"]"]=r}function Ni(e){e.j.length=e.h,e.Ea.length=e.h,e.h--}function Bi(e,t){"*"===t||Array.isArray(t)||(t=[t]);for(var n=1;n<e.length;++n)if(Array.isArray(e[n])){var r=e[n];if("*"===t||t.includes(r[0]))return r}return null}function Ii(e){return 2>e.length?"":"object"==typeof e[1]?e[2]||"":e[1]||""}function Pi(e,t){return Array.isArray(e)?"object"!=typeof(e=e[1])||Array.isArray(e)?null:t in e?e[t]:null:null}function Mi(e,t){return t.reduce(Bi,e)}function Di(e,t){for(var n=[],r=1;r<e.length;++r)if(Array.isArray(e[r])){var i=e[r];"*"!==t&&i[0]!==t||n.push(i)}return n}function Ri(e){return{localName:Ii(e),namespaceURI:Pi(e,"URI"),prefix:Pi(e,"prefix")}}function Fi(e){var t=Bi(e,"typeDeclaration");if(!t||Bi(t,"voidSequenceType"))return{type:59,g:2};e={type:function e(n){switch(n[0]){case"documentTest":return 55;case"elementTest":return 54;case"attributeTest":return 47;case"piTest":return 57;case"commentTest":return 58;case"textTest":return 56;case"anyKindTest":return 53;case"anyItemType":return 59;case"anyFunctionTest":case"functionTest":case"typedFunctionTest":return 60;case"anyMapTest":case"typedMapTest":return 61;case"anyArrayTest":case"typedArrayTest":return 62;case"atomicType":return le([Pi(n,"prefix"),Ii(n)].join(":"));case"parenthesizedItemType":return e(Bi(n,"*"));default:throw Error('Type declaration "'+Bi(t,"*")[0]+'" is not supported.')}}(Bi(t,"*")),g:3};var n=null,r=Bi(t,"occurrenceIndicator");switch(r&&(n=Ii(r)),n){case"*":return e.g=2,e;case"?":return e.g=0,e;case"+":return e.g=1,e;case"":case null:return e}}function Li(e,t,n){if("object"!=typeof e[1]||Array.isArray(e[1])){var r={};r[t]=n,e.splice(1,0,r)}else e[1][t]=n}function Ui(e,t,n){return(e<<20)+(t<<12)+(n.charCodeAt(0)<<8)+n.charCodeAt(1)}hi.prototype.Ba=function(e,t,n){return function(e,t,n){var r=oi[e+":"+t];return r&&(r=r.find((function(e){return e.l.some((function(e){return 4===e}))?e.l.length-1<=n:e.l.length===n})))?{l:r.l,arity:n,m:r.m,I:r.I,localName:t,namespaceURI:e,i:r.i}:null}(e,t,n)},hi.prototype.sb=function(e,t){return e?null:(e=this.ha[t],this.s[t]||(this.s[t]={name:t}),e)},hi.prototype.Ta=function(e,t){var n=this.u(e,t);if(n)this.j.push({Dc:e,arity:t,Jb:n});else if(""===e.prefix){if(this.A)return{namespaceURI:this.A,localName:e.localName}}else if(t=this.ba(e.prefix,!0))return{namespaceURI:t,localName:e.localName};return n},hi.prototype.ba=function(e,t){return void 0===t||t?ci[e]?ci[e]:(t=this.O(e),this.h[e]||(this.h[e]={namespaceURI:t,prefix:e}),void 0!==t||e?t:null):null},_i.prototype.Ba=function(e,t,n,r){r=void 0!==r&&r;var i=this.u[xi(e,t)+"~"+n];return!i||r&&i.Db?null===this.s?null:this.s.Ba(e,t,n,r):i},_i.prototype.sb=function(e,t){var n=Ai(this.Ea,xi(e,t));return n||(null===this.s?null:this.s.sb(e,t))},_i.prototype.Ta=function(e,t){var n=e.prefix,r=e.localName;return""===n&&this.A?{localName:r,namespaceURI:this.A}:n&&(n=this.ba(n,!1))?{localName:r,namespaceURI:n}:null===this.s?null:this.s.Ta(e,t)},_i.prototype.ba=function(e,t){var n=Ai(this.j,e||"");return void 0===n?null===this.s?void 0:this.s.ba(e||"",void 0===t||t):n};var $i={},Hi=($i[Ui(2,2,"idivOp")]=5,$i[Ui(16,16,"addOp")]=16,$i[Ui(16,16,"subtractOp")]=16,$i[Ui(16,16,"divOp")]=4,$i[Ui(16,2,"multiplyOp")]=16,$i[Ui(16,2,"divOp")]=16,$i[Ui(2,16,"multiplyOp")]=16,$i[Ui(17,17,"addOp")]=17,$i[Ui(17,17,"subtractOp")]=17,$i[Ui(17,17,"divOp")]=4,$i[Ui(17,2,"multiplyOp")]=17,$i[Ui(17,2,"divOp")]=17,$i[Ui(2,17,"multiplyOp")]=17,$i[Ui(9,9,"subtractOp")]=17,$i[Ui(7,7,"subtractOp")]=17,$i[Ui(8,8,"subtractOp")]=17,$i[Ui(9,16,"addOp")]=9,$i[Ui(9,16,"subtractOp")]=9,$i[Ui(9,17,"addOp")]=9,$i[Ui(9,17,"subtractOp")]=9,$i[Ui(7,16,"addOp")]=7,$i[Ui(7,16,"subtractOp")]=7,$i[Ui(7,17,"addOp")]=7,$i[Ui(7,17,"subtractOp")]=7,$i[Ui(8,17,"addOp")]=8,$i[Ui(8,17,"subtractOp")]=8,$i[Ui(9,16,"addOp")]=9,$i[Ui(9,16,"subtractOp")]=9,$i[Ui(9,17,"addOp")]=9,$i[Ui(9,17,"subtractOp")]=9,$i[Ui(7,17,"addOp")]=7,$i[Ui(7,17,"subtractOp")]=7,$i[Ui(7,16,"addOp")]=7,$i[Ui(7,16,"subtractOp")]=7,$i[Ui(8,17,"addOp")]=8,$i[Ui(8,17,"subtractOp")]=8,$i),Gi={},ji=(Gi[Ui(2,2,"addOp")]=function(e,t){return e+t},Gi[Ui(2,2,"subtractOp")]=function(e,t){return e-t},Gi[Ui(2,2,"multiplyOp")]=function(e,t){return e*t},Gi[Ui(2,2,"divOp")]=function(e,t){return e/t},Gi[Ui(2,2,"modOp")]=function(e,t){return e%t},Gi[Ui(2,2,"idivOp")]=function(e,t){return Math.trunc(e/t)},Gi[Ui(16,16,"addOp")]=function(e,t){return new Ut(e.ga+t.ga)},Gi[Ui(16,16,"subtractOp")]=function(e,t){return new Ut(e.ga-t.ga)},Gi[Ui(16,16,"divOp")]=function(e,t){return e.ga/t.ga},Gi[Ui(16,2,"multiplyOp")]=Gt,Gi[Ui(16,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:yearMonthDuration by NaN");if((e=Math.round(e.ga/t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:yearMonthDuration");return new Ut(e<Number.MIN_SAFE_INTEGER||0===e?0:e)},Gi[Ui(2,16,"multiplyOp")]=function(e,t){return Gt(t,e)},Gi[Ui(17,17,"addOp")]=function(e,t){return new Ye(e.ea+t.ea)},Gi[Ui(17,17,"subtractOp")]=function(e,t){return new Ye(e.ea-t.ea)},Gi[Ui(17,17,"divOp")]=function(e,t){if(0===t.ea)throw Error("FOAR0001: Division by 0");return e.ea/t.ea},Gi[Ui(17,2,"multiplyOp")]=et,Gi[Ui(17,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:dayTimeDuration by NaN");if((e=e.ea/t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:dayTimeDuration");return new Ye(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)},Gi[Ui(2,17,"multiplyOp")]=function(e,t){return et(t,e)},Gi[Ui(9,9,"subtractOp")]=pt,Gi[Ui(7,7,"subtractOp")]=pt,Gi[Ui(8,8,"subtractOp")]=pt,Gi[Ui(9,16,"addOp")]=dt,Gi[Ui(9,16,"subtractOp")]=ft,Gi[Ui(9,17,"addOp")]=dt,Gi[Ui(9,17,"subtractOp")]=ft,Gi[Ui(7,16,"addOp")]=dt,Gi[Ui(7,16,"subtractOp")]=ft,Gi[Ui(7,17,"addOp")]=dt,Gi[Ui(7,17,"subtractOp")]=ft,Gi[Ui(8,17,"addOp")]=dt,Gi[Ui(8,17,"subtractOp")]=ft,Gi[Ui(9,16,"addOp")]=dt,Gi[Ui(9,16,"subtractOp")]=ft,Gi[Ui(9,17,"addOp")]=dt,Gi[Ui(9,17,"subtractOp")]=ft,Gi[Ui(7,17,"addOp")]=dt,Gi[Ui(7,17,"subtractOp")]=ft,Gi[Ui(7,16,"addOp")]=dt,Gi[Ui(7,16,"subtractOp")]=ft,Gi[Ui(8,17,"addOp")]=dt,Gi[Ui(8,17,"subtractOp")]=ft,Gi);function zi(e,t){return ee(e,5)&&ee(t,5)?5:ee(e,4)&&ee(t,4)?4:ee(e,6)&&ee(t,6)?6:3}var Vi=[2,16,17,9,7,8];function Xi(e,t,n){function r(e,t){return{V:i?i(e):e,W:o?o(t):t}}var i=null,o=null;ee(t,19)&&(i=function(e){return Kt(e,3)},t=3),ee(n,19)&&(o=function(e){return Kt(e,3)},n=3);var s=Vi.filter((function(e){return ee(t,e)})),a=Vi.filter((function(e){return ee(n,e)}));if(s.includes(2)&&a.includes(2)){var l=ji[Ui(2,2,e)],c=Hi[Ui(2,2,e)];return c||(c=zi(t,n)),"divOp"===e&&5===c&&(c=4),"idivOp"===e?qi(r,l)[0]:function(e,t){return e=r(e,t),X(l(e.V.value,e.W.value),c)}}for(var h=(s=u(s)).next();!h.done;h=s.next()){h=h.value;for(var p={},d=u(a),f=d.next();!f.done;p={kb:p.kb,nb:p.nb},f=d.next())if(f=f.value,p.kb=ji[Ui(h,f,e)],p.nb=Hi[Ui(h,f,e)],p.kb&&void 0!==p.nb)return function(e){return function(t,n){return t=r(t,n),X(e.kb(t.V.value,t.W.value),e.nb)}}(p)}}function qi(e,t){return[function(n,r){if(n=(r=e(n,r)).V,0===(r=r.W).value)throw Error("FOAR0001: Divisor of idiv operator cannot be (-)0");if(Number.isNaN(n.value)||Number.isNaN(r.value)||!Number.isFinite(n.value))throw Error("FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF");return Number.isFinite(n.value)&&!Number.isFinite(r.value)?X(0,5):X(t(n.value,r.value),5)},5]}var Wi=Object.create(null);function Yi(e,t,n,r,i){hr.call(this,t.s.add(n.s),[t,n],{C:!1},!1,r),this.B=t,this.J=n,this.j=e,this.u=i}function Qi(e,t,n){var r=Ri(Mi(e,["forClauseItem","typedVariableBinding","varName"]));(e=Mi(e,["forClauseItem","forExpr","sequenceExpr"]))&&(e=Di(e,"*").map((function(e){return n(e,t)})),e.includes(void 0)||e.includes(null)||1===(e=Ki(e)).length&&uo(t,r.localName,e[0]))}function Ki(e){return e.filter((function(e,t,n){return n.findIndex((function(t){return t.type===e.type&&t.g===e.g}))===t}))}function Zi(e,t,n){var r=Di(e,"*"),i=Bi(e,"atomicType");if(!i)return{type:59,g:2};if(le(Pi(i,"prefix")+":"+i[2])===t.type)if(1===r.length){if(3===t.g)return n}else if(e=Bi(e,"occurrenceIndicator")[1],t.g===function(e){switch(e){case"*":return 2;case"?":return 0;case"+":return 1;default:return 3}}(e))return n}function Ji(e,t){eo(e,t)}function eo(e,t){var n=ao.get(e[0]);if(n)return n(e,t);for(n=1;n<e.length;n++)e[n]&&eo(e[n],t)}function to(e,t){var n=eo(Bi(e,"firstOperand")[1],t),r=eo(Bi(e,"secondOperand")[1],t),i=e[0];if(n&&r){if(!(t=function(e,t,n){var r=[2,53,59,46,47];if(r.includes(t)||r.includes(n))return 2;var i=null,o=null;ee(t,19)&&(i=function(e){return Kt(e,3)},t=3),ee(n,19)&&(o=function(e){return Kt(e,3)},n=3);var s=Vi.filter((function(e){return ee(t,e)}));if(r=Vi.filter((function(e){return ee(n,e)})),s.includes(2)&&r.includes(2))return void 0===(r=Hi[Ui(2,2,e)])&&(r=zi(t,n)),"divOp"===e&&5===r&&(r=4),"idivOp"===e?qi((function(e,t){return{V:i?i(e):e,W:o?o(t):t}}),(function(e,t){return Math.trunc(e/t)}))[1]:r;for(var a=(s=u(s)).next();!a.done;a=s.next()){a=a.value;for(var l=u(r),c=l.next();!c.done;c=l.next())if(void 0!==(c=Hi[Ui(a,c.value,e)]))return c}}(i,n.type,r.type)))throw Error("XPTY0004: "+i+" not available for types "+ae(n)+" and "+ae(r));n={type:t,g:n.g},2!==t&&59!==t&&Li(e,"type",n),e=n}else e={type:2,g:3};return e}function no(e,t){eo(Bi(e,"firstOperand")[1],t),eo(Bi(e,"secondOperand")[1],t);e:{switch(e[0]){case"orOp":case"andOp":Li(e,"type",t={type:0,g:3}),e=t;break e}e=void 0}return e}function ro(e,t){eo(Bi(e,"firstOperand")[1],t),eo(Bi(e,"secondOperand")[1],t);e:{switch(e[0]){case"unionOp":case"intersectOp":case"exceptOp":Li(e,"type",t={type:53,g:2}),e=t;break e}e=void 0}return e}function io(e,t){return eo(Bi(e,"firstOperand")[1],t),eo(Bi(e,"secondOperand")[1],t),Li(e,"type",t={type:0,g:3}),t}function oo(e,t){return eo(Bi(e,"firstOperand")[1],t),eo(Bi(e,"secondOperand")[1],t),Li(e,"type",t={type:0,g:3}),t}function so(e,t){return eo(Bi(e,"firstOperand")[1],t),eo(Bi(e,"secondOperand")[1],t),Li(e,"type",t={type:0,g:3}),t}y(Yi,hr),Yi.prototype.h=function(e,t){var n=this;return Pt(pr(this.B,e,t),t).L((function(r){return 0===r.length?ge.empty():Pt(pr(n.J,e,t),t).L((function(e){if(0===e.length)return ge.empty();if(1<r.length||1<e.length)throw Error('XPTY0004: the operands of the "'+n.j+'" operator should be empty or singleton.');var t=r[0];if(e=e[0],n.u&&n.type)return ge.o(n.u(t,e));var i=t.type,o=e.type,s=n.j,a=i+"~"+o+"~"+s,l=Wi[a];if(l||(l=Wi[a]=Xi(s,i,o)),!(i=l))throw Error("XPTY0004: "+n.j+" not available for types "+oe[t.type]+" and "+oe[e.type]);return ge.o(i(t,e))}))}))};var ao=new Map([["unaryMinusOp",function(e,t){return(t=eo(Bi(e,"operand")[1],t))?ee(t.type,2)?(Li(e,"type",t={type:t.type,g:t.g}),e=t):(Li(e,"type",t={type:3,g:3}),e=t):(Li(e,"type",t={type:2,g:2}),e=t),e}],["unaryPlusOp",function(e,t){return(t=eo(Bi(e,"operand")[1],t))?ee(t.type,2)?(Li(e,"type",t={type:t.type,g:t.g}),e=t):(Li(e,"type",t={type:3,g:3}),e=t):(Li(e,"type",t={type:2,g:2}),e=t),e}],["addOp",to],["subtractOp",to],["divOp",to],["idivOp",to],["modOp",to],["multiplyOp",to],["andOp",no],["orOp",no],["sequenceExpr",function(e,t){var n=Di(e,"*"),r=n.map((function(e){return eo(e,t)}));return function(e,t,n){return t=0===t?{type:53,g:2}:1===t?n[0]:n.includes(void 0)||n.includes(null)||1<(t=Ki(n)).length?{type:59,g:2}:{type:t[0].type,g:2},t&&59!==t.type&&Li(e,"type",t),t}(e,n.length,r)}],["unionOp",ro],["intersectOp",ro],["exceptOp",ro],["stringConcatenateOp",function(e,t){return eo(Bi(e,"firstOperand")[1],t),eo(Bi(e,"secondOperand")[1],t),Li(e,"type",t={type:1,g:3}),t}],["rangeSequenceExpr",function(e,t){return eo(Bi(e,"startExpr")[1],t),eo(Bi(e,"endExpr")[1],t),Li(e,"type",t={type:5,g:1}),t}],["equalOp",io],["notEqualOp",io],["lessThanOrEqualOp",io],["lessThanOp",io],["greaterThanOrEqualOp",io],["greaterThanOp",io],["eqOp",oo],["neOp",oo],["ltOp",oo],["leOp",oo],["gtOp",oo],["geOp",oo],["isOp",so],["nodeBeforeOp",so],["nodeAfterOp",so],["pathExpr",function(e,t){var n=Bi(e,"rootExpr");return n&&n[1]&&eo(n[1],t),Di(e,"stepExpr").map((function(e){return eo(e,t)})),function(e,t){var n=Di(e,"stepExpr");if(!n)return{type:59,g:2};for(var r=(n=u(n)).next();!r.done;r=n.next()){var i=r.value;r=t;var o=null;if(i){for(var s=Di(i,"*"),a="",l=(s=u(s)).next();!l.done;l=s.next())switch(l=l.value,l[0]){case"filterExpr":o=Pi(Mi(l,["*"]),"type");break;case"xpathAxis":e:{switch(a=l[1]){case"attribute":o={type:47,g:2};break e;case"child":case"decendant":case"self":case"descendant-or-self":case"following-sibling":case"following":case"namespace":case"parent":case"ancestor":case"preceding-sibling":case"preceding":case"ancestor-or-self":o={type:53,g:2};break e}o=void 0}break;case"nameTest":var c=Ri(l);if(null!==c.namespaceURI)break;if("attribute"===a&&!c.prefix)break;void 0!==(c=r.ba(c.prefix||""))&&Li(l,"URI",c);break;case"lookup":o={type:59,g:2}}o&&59!==o.type&&Li(i,"type",o)}i=Pi(i,"type")}return i&&59!==i.type&&Li(e,"type",i),i}(e,t)}],["contextItemExpr",function(){return{type:59,g:2}}],["ifThenElseExpr",function(e,t){eo(Bi(Bi(e,"ifClause"),"*"),t);var n=eo(Bi(Bi(e,"thenClause"),"*"),t);return t=eo(Bi(Bi(e,"elseClause"),"*"),t),n&&t&&n.type===t.type&&n.g===t.g?(59!==n.type&&Li(e,"type",n),e=n):e={type:59,g:2},e}],["instanceOfExpr",function(e,t){return eo(Bi(e,"argExpr"),t),eo(Bi(e,"sequenceType"),t),Li(e,"type",t={type:0,g:3}),t}],["integerConstantExpr",function(e){var t={type:5,g:3};return Li(e,"type",t),t}],["doubleConstantExpr",function(e){var t={type:3,g:3};return Li(e,"type",t),t}],["decimalConstantExpr",function(e){var t={type:4,g:3};return Li(e,"type",t),t}],["stringConstantExpr",function(e){var t={type:1,g:3};return Li(e,"type",t),t}],["functionCallExpr",function(e,t){return Di(Bi(e,"arguments"),"*").map((function(e){return eo(e,t)})),function(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Bi(e,"functionName"),r=Ri(n),i=r.localName,o=r.prefix,s=r.namespaceURI;if(r=Di(Bi(e,"arguments"),"*"),null===s){if(!(o=t.ia.Ta({localName:i,prefix:o},r.length)))return{type:59,g:2};i=o.localName,Li(n,"URI",s=o.namespaceURI),n[2]=i}return(t=t.ia.Ba(s,i,r.length))&&63!==t.i.type?(59!==t.i.type&&Li(e,"type",t.i),t.i):{type:59,g:2}}(e,t)}],["arrowExpr",function(e,t){return eo(Bi(e,"argExpr")[1],t),function(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Bi(e,"EQName");if(!n)return{type:59,g:2};var r=Ri(n);n=r.localName;var i=r.prefix;return r=Di(Bi(e,"arguments"),"*"),(n=t.ia.Ta({localName:n,prefix:i},r.length))&&(t=t.ia.Ba(n.namespaceURI,n.localName,r.length+1))?(59!==t.i.type&&Li(e,"type",t.i),t.i):{type:59,g:2}}(e,t)}],["dynamicFunctionInvocationExpr",function(e,t){return eo(Mi(e,["functionItem","*"]),t),(e=Bi(e,"arguments"))&&eo(e,t),{type:59,g:2}}],["namedFunctionRef",function(e,t){return function(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Bi(e,"functionName"),r=Ri(n),i=r.localName,o=r.namespaceURI,s=r.prefix;if(r=Number(Mi(e,["integerConstantExpr","value"])[1]),!o){if(!(o=t.ia.Ta({localName:i,prefix:s},r)))return{type:59,g:2};i=o.localName,Li(n,"URI",o=o.namespaceURI)}return(t=t.ia.Ba(o,i,r)||null)?(59!==t.i.type&&63!==t.i.type&&Li(e,"type",t.i),t.i):{type:59,g:2}}(e,t)}],["inlineFunctionExpr",function(e,t){return eo(Bi(e,"functionBody")[1],t),Li(e,"type",t={type:60,g:3}),t}],["castExpr",function(e){var t=Mi(e,["singleType","atomicType"]);return 59!==(t={type:le(Pi(t,"prefix")+":"+t[2]),g:3}).type&&Li(e,"type",t),t}],["castableExpr",function(e){var t={type:0,g:3};return Li(e,"type",t),t}],["simpleMapExpr",function(e,t){for(var n,r=Di(e,"pathExpr"),i=0;i<r.length;i++)n=eo(r[i],t);return null!=n?(59!==(t={type:n.type,g:2}).type&&Li(e,"type",t),e=t):e={type:59,g:2},e}],["mapConstructor",function(e,t){return Di(e,"mapConstructorEntry").map((function(e){return{key:eo(Mi(e,["mapKeyExpr","*"]),t),value:eo(Mi(e,["mapValueExpr","*"]),t)}})),function(e){var t={type:61,g:3};return Li(e,"type",t),t}(e)}],["arrayConstructor",function(e,t){return Di(Bi(e,"*"),"arrayElem").map((function(e){return eo(e,t)})),function(e){var t={type:62,g:3};return Li(e,"type",t),t}(e)}],["unaryLookup",function(e){return Bi(e,"NCName"),{type:59,g:2}}],["typeswitchExpr",function(e,t){var n=eo(Bi(e,"argExpr")[1],t),r=Di(e,"typeswitchExprCaseClause").map((function(e){return eo(Mi(e,["resultExpr"])[1],t)}));return function(e,t,n,r){if(!t||n.includes(void 0))return{type:59,g:2};for(var i=Di(e,"typeswitchExprCaseClause"),o=0;o<n.length;o++){var s=Bi(i[o],"*");switch(s[0]){case"sequenceType":if(s=Zi(s,t,n[o]))return 59!==s.type&&Li(e,"type",s),s;continue;case"sequenceTypeUnion":for(r=Di(s,"*"),i=0;2>i;i++)if(s=Zi(r[i],t,n[o]))return 59!==s.type&&Li(e,"type",s),s;default:return{type:59,g:2}}}return 59!==r.type&&Li(e,"type",r),r}(e,n,r,eo(Mi(e,["typeswitchExprDefaultClause","resultExpr"])[1],t))}],["quantifiedExpr",function(e,t){return Di(e,"*").map((function(e){return eo(e,t)})),function(e){var t={type:0,g:3};return Li(e,"type",t),t}(e)}],["x:stackTrace",function(e,t){return eo((e=Di(e,"*"))[0],t)}],["queryBody",function(e,t){return eo(e[1],t)}],["flworExpr",function(e,t){return function(e,t){for(var n=eo,r=!1,i=1;i<e.length;i++)switch(e[i][0]){case"letClause":co(t);var o=e[i],s=t,a=n,l=Mi(o,["letClauseItem","typedVariableBinding","varName"]);l=Ri(l),a=a((o=Mi(o,["letClauseItem","letExpr"]))[1],s),uo(s,l.localName,a);break;case"forClause":r=!0,co(t),Qi(e[i],t,n);break;case"whereClause":co(t),n(s=e[i],t),Li(s,"type",{type:0,g:3});break;case"orderByClause":co(t);break;case"returnClause":return s=n,Li(n=Mi(i=e[i],["*"]),"type",t=s(n,t)),Li(i,"type",t),(n=t)?(r&&(n={type:n.type,g:2}),59!==n.type&&Li(e,"type",n),n):{type:59,g:2};default:return(n=n(e[i],t))?(r&&(n={type:n.type,g:2}),59!==n.type&&Li(e,"type",n),n):{type:59,g:2}}if(!(0<t.h))throw Error("Variable scope out of bound");t.h--,t.s.pop(),t.A.pop()}(e,t)}],["varRef",function(e,t){var n,r=Ri(Bi(e,"name"));e:{for(n=t.h;0<=n;n--){var i=t.s[n][r.localName];if(i){n=i;break e}}n=void 0}return n&&59!==n.type&&Li(e,"type",n),null===r.namespaceURI&&(void 0!==(t=t.ba(r.prefix))&&Li(e,"URI",t)),n}]]);function lo(e){this.h=0,this.ia=e,this.s=[{}],this.A=[{}]}function uo(e,t,n){if(e.s[e.h][t])throw Error("Another variable of in the scope "+e.h+" with the same name "+t+" already exists");e.s[e.h][t]=n}function co(e){e.h++,e.s.push({}),e.A.push({})}function ho(e,t){var n={};hr.call(this,new Er((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.j=e}function po(e,t){var n={};hr.call(this,new Er((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.j=e}function fo(e){if(null===e)throw Error("XPDY0002: context is absent, it needs to be present to use axes.");if(!ee(e.type,53))throw Error("XPTY0020: Axes can only be applied to nodes.");return e.value}function mo(e,t){t=t||{Qa:!1},hr.call(this,e.s,[e],{S:"reverse-sorted",Y:!1,subtree:!1,C:!1}),this.j=e,this.u=!!t.Qa}lo.prototype.ba=function(e){for(var t=this.h;0<=t;t--){var n=this.A[t][e];if(void 0!==n)return n}return this.ia?this.ia.ba(e):void 0},y(ho,hr),ho.prototype.h=function(e,t){return 0===this.j.length?ge.o(new $e([])):pr(this.j[0],e,t).L((function(e){return ge.o(new $e(e.map((function(e){return ye(ge.o(e))}))))}))},y(po,hr),po.prototype.h=function(e,t){return ge.o(new $e(this.j.map((function(n){return ye(pr(n,e,t))}))))},y(mo,hr),mo.prototype.h=function(e,t){var n=this;t=t.h,e=fo(e.M);var r=this.j.A();return r=r&&(r.startsWith("name-")||"type-1"===r)?"type-1":null,ge.create(function(e,t,n){var r=t;return{next:function(){if(!r)return K;var t=r;return r=Fe(e,t,n),Z(Ge(t))}}}(t,this.u?e:Fe(t,e,r),r)).filter((function(e){return n.j.j(e)}))};var go=new Map([["type-1-or-type-2",["name","type-1","type-2"]],["type-1",["name"]],["type-2",["name"]]]);function yo(e,t){if(null===e)return t;if(null===t||e===t)return e;var n=e.startsWith("name-")?"name":e,r=t.startsWith("name-")?"name":t,i=go.get(n);return void 0!==i&&i.includes(r)?t:void 0!==(t=go.get(r))&&t.includes(n)?e:"empty"}function vo(e,t){var n={};hr.call(this,new Er((n.attribute=1,n)),[e],{S:"unsorted",subtree:!0,Y:!0,C:!1}),this.j=e,this.u=yo(this.j.A(),t)}function wo(e,t){hr.call(this,e.s,[e],{S:"sorted",subtree:!0,Y:!0,C:!1}),this.u=e,this.j=yo(t,e.A())}function bo(e,t,n){var r=t.node.nodeType;if(1!==r&&9!==r)return{next:function(){return K}};var i=Me(e,t,n);return{next:function(){if(!i)return K;var t=i;return i=Re(e,i,n),Z(t)}}}function xo(e,t){t=t||{Qa:!1},hr.call(this,e.s,[e],{C:!1,Y:!1,S:"sorted",subtree:!0}),this.j=e,this.u=!!t.Qa,this.B=(e=this.j.A())&&(e.startsWith("name-")||"type-1"===e)||"type-1-or-type-2"===e?"type-1":null}function Ao(e,t,n){var r=e.node.nodeType;if(1!==r&&9!==r)return e;for(r=De(t,e,n);null!==r;){if(1!==r.node.nodeType)return r;r=De(t,e=r,n)}return e}function _o(e,t,n,r){if(void 0!==n&&n){var i=t,o=!1;return{next:function(){if(o)return K;if(en(i,t))return en(i=Ao(t,e,r),t)?(o=!0,K):Z(Ge(i));var n=i.node.nodeType,s=9===n||2===n?null:Le(e,i,r);return null!==s?Z(Ge(i=Ao(s,e,r))):en(i=9===n?null:Fe(e,i,r),t)?(o=!0,K):Z(Ge(i))}}}var s=[bo(e,t,r)];return{next:function(){if(!s.length)return K;for(var t=s[0].next(0);t.done;){if(s.shift(),!s.length)return K;t=s[0].next(0)}return s.unshift(bo(e,t.value,r)),Z(Ge(t.value))}}}function ko(e){hr.call(this,e.s,[e],{S:"sorted",Y:!0,subtree:!1,C:!1}),this.j=e,this.u=(e=this.j.A())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Eo(e,t){hr.call(this,e.s,[e],{S:"sorted",Y:!0,subtree:!1,C:!1}),this.j=e,this.u=yo(this.j.A(),t)}function Co(e,t){hr.call(this,e.s,[e],{S:"reverse-sorted",Y:!0,subtree:!0,C:!1}),this.j=e,this.u=yo(t,this.j.A())}function So(e){hr.call(this,e.s,[e],{C:!1,Y:!0,S:"reverse-sorted",subtree:!1}),this.j=e,this.u=(e=this.j.A())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Oo(e,t){hr.call(this,e.s,[e],{C:!1,Y:!0,S:"reverse-sorted",subtree:!1}),this.j=e,this.u=yo(this.j.A(),t)}function To(e,t){hr.call(this,e.s,[e],{S:"sorted",subtree:!0,Y:!0,C:!1}),this.j=e,this.u=yo(this.j.A(),t)}function No(e,t,n,r){var i=e.s.add(t.s).add(n.s);Ar.call(this,i,[e,t,n],{C:e.C&&t.C&&n.C,Y:t.Y===n.Y&&t.Y,S:t.O===n.O?t.O:"unsorted",subtree:t.subtree===n.subtree&&t.subtree},r),this.j=e}function Bo(e,t,n){this.location=e,this.s=t,this.h=n}function Io(e){return e.h instanceof Error?e.location:Io(e.h)}function Po(e){var t=e.h instanceof ri?["Inner error:",e.h.message]:e.h instanceof Error?[e.h.toString()]:Po(e.h);return t.push("  at <"+e.s+">:"+e.location.start.line+":"+e.location.start.la+" - "+e.location.end.line+":"+e.location.end.la),t}function Mo(e,t,n){Ar.call(this,n.s,[n],{C:n.C,Y:n.Y,S:n.O,subtree:n.subtree}),this.j=t,this.J={end:{la:e.end.la,line:e.end.line,offset:e.end.offset},start:{la:e.start.la,line:e.start.line,offset:e.start.offset}}}function Do(e,t,n,r){hr.call(this,e,t,n,!0),this.j=r,this.I=this.j.I}function Ro(e,t,n,r){var i=[],o=e.J(t,n,r,(function(n){if(e.j instanceof Do)return xr(Ro(e.j,t,n,r),(function(e){return i=e}));var o=null;return ge.create({next:function(){for(;;){if(!o){var t=n.next(0);if(t.done)return K;t=e.j.u(t.value,r),o=xr(t,(function(e){return i=vr(i,e)})).value}if(!(t=o.next(0)).done)return t;o=null}}})})),s=!1;return{next:function(){if(s)return K;var e=o.N();return s=!0,Z(new dr(e,i))}}}function Fo(e,t,n,r){return e.J(t,n,r,(function(n){if(e.j instanceof Do)return Fo(e.j,t,n,r);var i=null;return ge.create({next:function(){for(;;){if(!i){var t=n.next(0);if(t.done)return K;i=pr(e.j,t.value,r).value}if(!(t=i.next(0)).done)return t;i=null}}})}))}function Lo(e,t,n,r){Do.call(this,t.s.add(r.s),[t,r],{C:!1},r),this.T=e.prefix,this.ka=e.namespaceURI,this.bc=e.localName,this.ob=null,this.B=n,this.xa=null,this.pa=t}function Uo(e,t,n){var r={};hr.call(this,new Er((r.external=1,r)),[n],{C:!1,S:"unsorted"}),this.T=e.map((function(e){return e.name})),this.B=e.map((function(e){return e.type})),this.u=null,this.J=t,this.j=n}function $o(e,t,n){if(Do.call(this,t.s.add(n.s),[t,n],{C:!1,Y:n.Y,S:n.O,subtree:n.subtree},n),e.prefix||e.namespaceURI)throw Error("Not implemented: let expressions with namespace usage.");this.B=e.prefix,this.T=e.namespaceURI,this.xa=e.localName,this.ka=t,this.pa=null}function Ho(e,t){switch(hr.call(this,new Er({}),[],{C:!0,S:"sorted"},!1,t),t.type){case 5:var n=X(parseInt(e,10),t.type);break;case 1:n=X(e,t.type);break;case 4:case 3:n=X(parseFloat(e),t.type);break;default:throw new TypeError("Type "+t+" not expected in a literal")}this.j=function(){return ge.o(n)}}function Go(e,t){var n={};hr.call(this,new Er((n.external=1,n)),e.reduce((function(e,t){return e.concat(t.key,t.value)}),[]),{C:!1},!1,t),this.j=e}function jo(e,t,n){var r={};hr.call(this,new Er((r.external=1,r)),[],{C:!0},!1,n),this.u=t,this.B=e,this.j=null}y(vo,hr),vo.prototype.h=function(e,t){var n=this;return t=t.h,1!==(e=fo(e.M)).node.nodeType?ge.empty():(e=Ne(t,e,this.u).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).map((function(e){return Ge(e)})).filter((function(e){return n.j.j(e)})),ge.create(e))},vo.prototype.A=function(){return"type-1"},y(wo,hr),wo.prototype.h=function(e,t){var n=this,r=t.h,i=fo(e.M);if(1!==(e=i.node.nodeType)&&9!==e)return ge.empty();var o=null,s=!1;return ge.create({next:function(){for(;!s;){if(!o){if(!(o=Me(r,i,n.j))){s=!0;continue}return Z(Ge(o))}if(o=Re(r,o,n.j))return Z(Ge(o));s=!0}return K}}).filter((function(e){return n.u.j(e)}))},y(xo,hr),xo.prototype.h=function(e,t){var n=this;return e=function(e,t,n){var r=[Zt(t)];return{next:function(t){if(0<r.length&&0!=(1&t)&&r.shift(),!r.length)return K;for(t=r[0].next(0);t.done;){if(r.shift(),!r.length)return K;t=r[0].next(0)}return r.unshift(bo(e,t.value,n)),Z(Ge(t.value))}}}(t=t.h,e=fo(e.M),this.B),this.u||e.next(0),ge.create(e).filter((function(e){return n.j.j(e)}))},y(ko,hr),ko.prototype.h=function(e,t){var n=this;return t=t.h,e=fo(e.M),ge.create(function(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Fe(e,t,null)){var i=Re(e,t,n);i&&r.push(i)}var o=null;return{next:function(){for(;o||r.length;){if(!o){o=_o(e,r[0],!1,n);var t=Z(Ge(r[0])),i=Re(e,r[0],n);return i?r[0]=i:r.shift(),t}if(!(t=o.next(0)).done)return t;o=null}return K}}}(t,e,this.u)).filter((function(e){return n.j.j(e)}))},y(Eo,hr),Eo.prototype.h=function(e,t){var n=this;return t=t.h,e=fo(e.M),ge.create(function(e,t,n){return{next:function(){return(t=t&&Re(e,t,n))?Z(Ge(t)):K}}}(t,e,this.u)).filter((function(e){return n.j.j(e)}))},y(Co,hr),Co.prototype.h=function(e,t){return(e=Fe(t=t.h,e=fo(e.M),this.u))?(e=Ge(e),this.j.j(e)?ge.o(e):ge.empty()):ge.empty()},y(So,hr),So.prototype.h=function(e,t){var n=this;return t=t.h,e=fo(e.M),ge.create(function(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Fe(e,t,null)){var i=Le(e,t,n);null!==i&&r.push(i)}var o=null;return{next:function(){for(;o||r.length;){o||(o=_o(e,r[0],!0,n));var t=o.next(0);if(t.done){o=null,t=Le(e,r[0],n);var i=Z(Ge(r[0]));return null===t?r.shift():r[0]=t,i}return t}return K}}}(t,e,this.u)).filter((function(e){return n.j.j(e)}))},y(Oo,hr),Oo.prototype.h=function(e,t){var n=this;return t=t.h,e=fo(e.M),ge.create(function(e,t,n){return{next:function(){return(t=t&&Le(e,t,n))?Z(Ge(t)):K}}}(t,e,this.u)).filter((function(e){return n.j.j(e)}))},y(To,hr),To.prototype.h=function(e){return fo(e.M),this.j.j(e.M)?ge.o(e.M):ge.empty()},To.prototype.A=function(){return this.u},y(No,Ar),No.prototype.B=function(e,t,n){var r=null,i=n[0](e);return ge.create({next:function(t){return r||(r=(i.getEffectiveBooleanValue()?n[1](e):n[2](e)).value),r.next(t)}})},No.prototype.P=function(e){if(Ar.prototype.P.call(this,e),this.j.I)throw er()},y(Mo,Ar),Mo.prototype.B=function(e,t,n){var r=this;t=u(n).next().value;try{var i=t(e)}catch(e){throw new Bo(this.J,this.j,e)}return ge.create({next:function(e){try{return i.value.next(e)}catch(e){throw new Bo(r.J,r.j,e)}}})},Mo.prototype.P=function(e){try{Ar.prototype.P.call(this,e)}catch(e){throw new Bo(this.J,this.j,e)}},y(Do,hr),Do.prototype.h=function(e,t){var n=this;return this.J(e,Zt(e),t,(function(r){if(n.j instanceof Do)return Fo(n.j,e,r,t);var i=null;return ge.create({next:function(e){for(;;){if(!i){var o=r.next(0);if(o.done)return K;i=pr(n.j,o.value,t).value}if(!(o=i.next(e)).done)return o;i=null}}})}))},Do.prototype.u=function(e,t){return Ro(this,e,Zt(e),t)},Do.prototype.P=function(e){hr.prototype.P.call(this,e),this.I=this.j.I;for(var t=(e=u(this.ha)).next();!t.done;t=e.next())if((t=t.value)!==this.j&&t.I)throw er()},y(Lo,Do),Lo.prototype.J=function(e,t,n,r){var i=this,o=null,s=null,a=0;return r({next:function(){for(var e={};;){if(!o){var r=t.next(0);if(r.done)return K;s=r.value,a=0,o=pr(i.pa,s,n).value}if(e.jb=o.next(0),!e.jb.done)return a++,(r={})[i.ob]=function(e){return function(){return ge.o(e.jb.value)}}(e),e=r,i.xa&&(e[i.xa]=function(){return ge.o(new re(5,a))}),Z(Et(s,e));o=null,e={jb:e.jb}}}})},Lo.prototype.P=function(e){if(this.T&&(this.ka=e.ba(this.T),!this.ka&&this.T))throw Error("XPST0081: Could not resolve namespace for prefix "+this.T+" in a for expression");if(this.pa.P(e),Ei(e),this.ob=Oi(e,this.ka,this.bc),this.B){if(this.B.prefix&&(this.B.namespaceURI=e.ba(this.B.prefix),!this.B.namespaceURI&&this.B.prefix))throw Error("XPST0081: Could not resolve namespace for prefix "+this.T+" in the positionalVariableBinding in a for expression");this.xa=Oi(e,this.B.namespaceURI,this.B.localName)}if(this.j.P(e),Ni(e),this.pa.I)throw er();this.j.I&&(this.I=!0)},y(Uo,hr),Uo.prototype.h=function(e,t){var n=this,r=new we({l:this.B,arity:this.B.length,Ra:!0,I:this.j.I,localName:"dynamic-function",namespaceURI:"",i:this.J,value:function(r,i,o,s){for(var a=[],l=3;l<arguments.length;++l)a[l-3]=arguments[l];return l=Et(kt(e,-1,null,ge.empty()),n.u.reduce((function(e,t,n){return e[t]=ye(a[n]),e}),Object.create(null))),pr(n.j,l,t)}});return ge.o(r)},Uo.prototype.P=function(e){if(Ei(e),this.u=this.T.map((function(t){return Oi(e,t.namespaceURI,t.localName)})),this.j.P(e),Ni(e),this.j.I)throw Error("Not implemented: inline functions can not yet be updating.")},y($o,Do),$o.prototype.J=function(e,t,n,r){var i=this;return r({next:function(){var e=t.next(0);if(e.done)return K;var r={};return Z(e=Et(e=e.value,(r[i.pa]=ye(pr(i.ka,e,n)),r)))}})},$o.prototype.P=function(e){if(this.B&&(this.T=e.ba(this.B),!this.T&&this.B))throw Error("XPST0081: Could not resolve namespace for prefix "+this.B+" using in a for expression");if(this.ka.P(e),Ei(e),this.pa=Oi(e,this.T,this.xa),this.j.P(e),Ni(e),this.I=this.j.I,this.ka.I)throw er()},y(Ho,hr),Ho.prototype.h=function(){return this.j()},y(Go,hr),Go.prototype.h=function(e,t){var n=this,r=this.j.map((function(n){return Pt(pr(n.key,e,t),t).$({default:function(){throw Error("XPTY0004: A key of a map should be a single atomizable value.")},o:function(e){return e}})}));return je(r,(function(r){return ge.o(new Xe(r.map((function(r,i){return{key:r,value:ye(pr(n.j[i].value,e,t))}}))))}))},y(jo,hr),jo.prototype.h=function(){var e=new we({l:this.j.l,I:this.j.I,arity:this.u,localName:this.j.localName,namespaceURI:this.j.namespaceURI,i:this.j.i,value:this.j.m});return ge.o(e)},jo.prototype.P=function(e){var t=this.B.namespaceURI,n=this.B.localName,r=this.B.prefix;if(null===t){var i=e.Ta({localName:n,prefix:r},this.u);if(!i)throw Error("XPST0017: The function "+(r?r+":":"")+n+" with arity "+this.u+" could not be resolved. "+ai(n));t=i.namespaceURI,n=i.localName}if(this.j=e.Ba(t,n,this.u)||null,!this.j)throw e=this.B,Error("XPST0017: Function "+(e.namespaceURI?"Q{"+e.namespaceURI+"}":e.prefix?e.prefix+":":"")+e.localName+" with arity of "+this.u+" not registered. "+ai(n));hr.prototype.P.call(this,e)};var zo={},Vo=(zo[5]=5,zo[27]=5,zo[28]=5,zo[31]=5,zo[32]=5,zo[33]=5,zo[34]=5,zo[30]=5,zo[36]=5,zo[35]=5,zo[38]=5,zo[37]=5,zo[29]=5,zo[4]=4,zo[6]=6,zo[3]=3,zo);function Xo(e,t,n){hr.call(this,t.s,[t],{C:!1},!1,n),this.u=t,this.j=e}function qo(e,t){hr.call(this,e.reduce((function(e,t){return e.add(t.s)}),new Er({})),e,{C:e.every((function(e){return e.C}))},!1,t),this.j=e,this.u=e.reduce((function(e,t){return yo(e,t.A())}),null)}function Wo(e,t){var n,r=e.reduce((function(e,t){return 0<Cr(e,t.s)?e:t.s}),new Er({}));for(hr.call(this,r,e,{C:e.every((function(e){return e.C}))},!1,t),t=0;t<e.length&&(void 0===n&&(n=e[t].A()),null!==n);++t)if(n!==e[t].A()){n=null;break}this.u=n,this.j=e}function Yo(e,t){var n;return ge.create({next:function(r){for(;;){if(!n){var i=e.value.next(r);if(i.done)return K;n=It(i.value,t)}if(!(i=n.value.next(r)).done)return i;n=null}}})}function Qo(e,t,n){function r(e,t){return{V:s?s(e):e,W:a?a(t):t}}function i(e){return ee(t,e)&&ee(n,e)}function o(e){return 0<e.filter((function(e){return ee(t,e)})).length&&0<e.filter((function(e){return ee(n,e)})).length}var s=null,a=null;if(ee(t,19)&&ee(n,19)?t=n=1:ee(t,19)?(s=function(e){return Kt(e,n)},t=n):ee(n,19)&&(a=function(e){return Kt(e,t)},n=t),ee(t,23)&&ee(n,23))return function(e,t){if("eqOp"===e)return function(e,n){return e=(n=t(e,n)).V,n=n.W,e.value.namespaceURI===n.value.namespaceURI&&e.value.localName===n.value.localName};if("neOp"===e)return function(e,n){return e=(n=t(e,n)).V,n=n.W,e.value.namespaceURI!==n.value.namespaceURI||e.value.localName!==n.value.localName};throw Error('XPTY0004: Only the "eq" and "ne" comparison is defined for xs:QName')}(e,r);if(i(0)||o([1,47,61])||o([2,47,61])||i(20)||i(22)||i(21)||o([1,20])){var l=function(e,t){switch(e){case"eqOp":return function(e,n){return(e=t(e,n)).V.value===e.W.value};case"neOp":return function(e,n){return(e=t(e,n)).V.value!==e.W.value};case"ltOp":return function(e,n){return(e=t(e,n)).V.value<e.W.value};case"leOp":return function(e,n){return(e=t(e,n)).V.value<=e.W.value};case"gtOp":return function(e,n){return(e=t(e,n)).V.value>e.W.value};case"geOp":return function(e,n){return(e=t(e,n)).V.value>=e.W.value}}}(e,r);if(void 0!==l)return l}if(i(16)&&(l=function(e,t){switch(e){case"ltOp":return function(e,n){return(e=t(e,n)).V.value.ga<e.W.value.ga};case"leOp":return function(e,n){return e=(n=t(e,n)).V,n=n.W,We(e.value,n.value)||e.value.ga<n.value.ga};case"gtOp":return function(e,n){return(e=t(e,n)).V.value.ga>e.W.value.ga};case"geOp":return function(e,n){return e=(n=t(e,n)).V,n=n.W,We(e.value,n.value)||e.value.ga>n.value.ga}}}(e,r),void 0!==l)||i(17)&&(l=function(e,t){switch(e){case"eqOp":return function(e,n){return We((e=t(e,n)).V.value,e.W.value)};case"ltOp":return function(e,n){return(e=t(e,n)).V.value.ea<e.W.value.ea};case"leOp":return function(e,n){return e=(n=t(e,n)).V,n=n.W,We(e.value,n.value)||e.value.ea<n.value.ea};case"gtOp":return function(e,n){return(e=t(e,n)).V.value.ea>e.W.value.ea};case"geOp":return function(e,n){return e=(n=t(e,n)).V,n=n.W,We(e.value,n.value)||e.value.ea>n.value.ea}}}(e,r),void 0!==l)||i(18)&&(l=function(e,t){switch(e){case"eqOp":return function(e,n){return We((e=t(e,n)).V.value,e.W.value)};case"neOp":return function(e,n){return!We((e=t(e,n)).V.value,e.W.value)}}}(e,r),void 0!==l))return l;if((i(9)||i(7)||i(8))&&(l=function(e,t){switch(e){case"eqOp":return function(e,n,r){return ht((e=t(e,n)).V.value,e.W.value,_t(r))};case"neOp":return function(e,n,r){return!ht((e=t(e,n)).V.value,e.W.value,_t(r))};case"ltOp":return function(e,n,r){return e=t(e,n),r=_t(r),0>ct(e.V.value,e.W.value,r)};case"leOp":return function(e,n,r){var i;return e=(n=t(e,n)).V,n=n.W,(i=ht(e.value,n.value,_t(r)))||(r=_t(r),i=0>ct(e.value,n.value,r)),i};case"gtOp":return function(e,n,r){return e=t(e,n),r=_t(r),0<ct(e.V.value,e.W.value,r)};case"geOp":return function(e,n,r){var i;return e=(n=t(e,n)).V,n=n.W,(i=ht(e.value,n.value,_t(r)))||(r=_t(r),i=0<ct(e.value,n.value,r)),i}}}(e,r),void 0!==l))return l;if((i(11)||i(12)||i(13)||i(14)||i(15))&&(l=function(e,t){switch(e){case"eqOp":return function(e,n,r){return ht((e=t(e,n)).V.value,e.W.value,_t(r))};case"neOp":return function(e,n,r){return!ht((e=t(e,n)).V.value,e.W.value,_t(r))}}}(e,r),void 0!==l))return l;throw Error("XPTY0004: "+e+" not available for "+oe[t]+" and "+oe[n])}y(Xo,hr),Xo.prototype.h=function(e,t){var n=this;return Pt(pr(this.u,e,t),t).L((function(e){if(0===e.length)return ge.empty();var t=e[0];if(n.type)return e="+"===n.j?+t.value:-t.value,0===t.type&&(e=Number.NaN),ge.o(X(e,n.type.type));if(1<e.length)throw Error("XPTY0004: The operand to a unary operator must be a sequence with a length less than one");return ee(t.type,19)?(t=Kt(t,3).value,ge.o(X("+"===n.j?t:-t,3))):ee(t.type,2)?"+"===n.j?ge.o(t):ge.o(X(-1*t.value,Vo[t.type])):ge.o(X(Number.NaN,3))}))},y(qo,hr),qo.prototype.h=function(e,t){var n=this,r=0,i=null,o=!1,s=null;if(null!==e){var a=e.M;null!==a&&ee(a.type,53)&&(s=xe(a.value))}return ge.create({next:function(){if(!o){for(;r<n.j.length;){if(!i){var a=n.j[r];if(null!==s&&null!==a.A()&&!s.includes(a.A()))return r++,o=!0,Z(W);i=pr(a,e,t)}if(!1===i.getEffectiveBooleanValue())return o=!0,Z(W);i=null,r++}return o=!0,Z(q)}return K}})},qo.prototype.A=function(){return this.u},y(Wo,hr),Wo.prototype.h=function(e,t){var n=this,r=0,i=null,o=!1,s=null;if(null!==e){var a=e.M;null!==a&&ee(a.type,53)&&(s=xe(a.value))}return ge.create({next:function(){if(!o){for(;r<n.j.length;){if(!i){var a=n.j[r];if(null!==s&&null!==a.A()&&!s.includes(a.A())){r++;continue}i=pr(a,e,t)}if(!0===i.getEffectiveBooleanValue())return o=!0,Z(q);i=null,r++}return o=!0,Z(W)}return K}})},Wo.prototype.A=function(){return this.u};var Ko=Object.create(null);function Zo(e,t,n){var r=t+"~"+n+"~"+e,i=Ko[r];return i||(i=Ko[r]=Qo(e,t,n)),i}function Jo(e,t,n){hr.call(this,t.s.add(n.s),[t,n],{C:!1}),this.j=t,this.B=n,this.u=e}y(Jo,hr),Jo.prototype.h=function(e,t){var n=this,r=pr(this.j,e,t),i=pr(this.B,e,t),o=Yo(r,t),s=Yo(i,t);return o.$({empty:function(){return ge.empty()},o:function(){return s.$({empty:function(){return ge.empty()},o:function(){var t=o.first(),r=s.first();return Zo(n.u,t.type,r.type)(t,r,e)?ge.ca():ge.X()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})};var es={},ts=(es.equalOp="eqOp",es.notEqualOp="neOp",es.lessThanOrEqualOp="leOp",es.lessThanOp="ltOp",es.greaterThanOrEqualOp="geOp",es.greaterThanOp="gtOp",es);function ns(e,t,n){hr.call(this,t.s.add(n.s),[t,n],{C:!1}),this.j=t,this.B=n,this.u=e}function rs(e,t,n,r){if(!ee(n,53)||!ee(r,53))throw Error("XPTY0004: Sequences to compare are not nodes");switch(e){case"isOp":return function(e,t){return e!==t||47!==e&&53!==e&&54!==e&&55!==e&&56!==e&&57!==e&&58!==e?function(){return!1}:function(e,t){return en(e.first().value,t.first().value)}}(n,r);case"nodeBeforeOp":return t?function(e,n){return 0>sn(t,e.first(),n.first())}:void 0;case"nodeAfterOp":return t?function(e,n){return 0<sn(t,e.first(),n.first())}:void 0;default:throw Error("Unexpected operator")}}function is(e,t,n){hr.call(this,t.s.add(n.s),[t,n],{C:!1}),this.j=t,this.B=n,this.u=e}function os(e,t,n,r){return n.L((function(n){if(n.some((function(e){return!ee(e.type,53)})))throw Error("XPTY0004: Sequences given to "+e+" should only contain nodes.");return"sorted"===r?ge.create(n):"reverse-sorted"===r?ge.create(n.reverse()):ge.create(an(t,n))}))}function ss(e,t,n,r){hr.call(this,0<Cr(t.s,n.s)?t.s:n.s,[t,n],{C:t.C&&n.C},!1,r),this.j=e,this.u=t,this.B=n}function as(e,t){Ar.call(this,e.reduce((function(e,t){return e.add(t.s)}),new Er({})),e,{S:"unsorted",C:e.every((function(e){return e.C}))},t)}function ls(e,t,n){hr.call(this,new Er({}).add(e.s),[e,t],{C:e.C&&t.C},!1,n),this.j=e,this.u=t}function us(e,t,n){if(hr.call(this,e.s,[e],{C:!1}),this.j=le(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.j||45===this.j||44===this.j)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: castable as expressions with a namespace URI.");this.B=e,this.u=n}function cs(e,t,n){if(hr.call(this,e.s,[e],{C:!1}),this.j=le(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.j||45===this.j||44===this.j)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: casting expressions with a namespace URI.");this.B=e,this.u=n}function hs(e,t){var n=e.value,r=null,i=!1;return ge.create({next:function(){for(;!i;){if(!r){var e=n.next(0);if(e.done)return i=!0,Z(q);r=t(e.value)}if(e=r.getEffectiveBooleanValue(),r=null,!1===e)return i=!0,Z(W)}return K}})}function ps(e,t,n,r){hr.call(this,e.s,[e],{C:!1},!1,r),this.B=e,this.u=t,this.j=n}function ds(e,t){return!(null===e||null===t||!ee(e.type,53)||!ee(t.type,53))&&en(e.value,t.value)}function fs(e){var t=e.next(0);if(t.done)return ge.empty();var n=null,r=null;return ge.create({next:function(i){if(t.done)return K;n||(n=t.value.value);do{var o=n.next(i);if(o.done){if((t=e.next(0)).done)return o;n=t.value.value}}while(o.done||ds(o.value,r));return r=o.value,o}})}function ms(e,t){var n=[];!function(){for(var e=t.next(0),r={};!e.done;)r.lb=e.value.value,e={current:r.lb.next(0),next:function(e){return function(t){return e.lb.next(t)}}(r)},e.current.done||n.push(e),e=t.next(0),r={lb:r.lb}}();var r=null,i=!1,o={};return ge.create((o[Symbol.iterator]=function(){return this},o.next=function(){i||(i=!0,n.every((function(e){return ee(e.current.value.type,53)}))&&n.sort((function(t,n){return sn(e,t.current.value,n.current.value)})));do{if(!n.length)return K;var t=n.shift(),o=t.current;if(t.current=t.next(0),!ee(o.value.type,53))return o;if(!t.current.done){for(var s=0,a=n.length-1,l=0;s<=a;){l=Math.floor((s+a)/2);var u=sn(e,t.current.value,n[l].current.value);if(0===u){s=l;break}0<u?s=l+1:a=l-1}n.splice(s,0,t)}}while(ds(o.value,r));return r=o.value,o},o))}function gs(e,t){var n=e.reduce((function(e,t){return 0<Cr(e,t.s)?e:t.s}),new Er({}));hr.call(this,n,e,{C:e.every((function(e){return e.C}))},!1,t),this.j=e}function ys(e){return e.every((function(e){return null===e||ee(e.type,5)||ee(e.type,4)}))||null!==e.map((function(e){return e?Mt(e.type):null})).reduce((function(e,t){return null===t||t===e?e:null}))?e:e.every((function(e){return null===e||ee(e.type,1)||ee(e.type,20)}))?e.map((function(e){return e?Kt(e,1):null})):e.every((function(e){return null===e||ee(e.type,4)||ee(e.type,6)}))?e.map((function(e){return e?Kt(e,6):e})):e.every((function(e){return null===e||ee(e.type,4)||ee(e.type,6)||ee(e.type,3)}))?e.map((function(e){return e?Kt(e,3):e})):null}function vs(e,t){var n=new Er({});Do.call(this,n,[t].concat(h(e.map((function(e){return e.da})))),{C:!1,Y:!1,S:"unsorted",subtree:!1},t),this.B=e}function ws(e){hr.call(this,e?e.s:new Er({}),e?[e]:[],{S:"sorted",subtree:!1,Y:!1,C:!1}),this.j=e}function bs(e){hr.call(this,new Er({}),[],{S:"sorted"},!1,e)}function xs(e,t){var n=e.every((function(e){return e.Y})),r=e.every((function(e){return e.subtree}));hr.call(this,e.reduce((function(e,t){return e.add(t.s)}),new Er({})),e,{C:!1,Y:n,S:t?"sorted":"unsorted",subtree:r}),this.j=e,this.u=t}function As(e,t){hr.call(this,e.s.add(t.s),[e,t],{C:e.C&&t.C,Y:e.Y,S:e.O,subtree:e.subtree}),this.u=e,this.j=t}function _s(e,t,n){if(n=[n],ee(e.type,62))if("*"===t)n.push.apply(n,h(e.R.map((function(e){return e()}))));else{if(!ee(t.type,5))throw pi("The key specifier is not an integer.");var r=t.value;if(e.R.length<r||0>=r)throw Error("FOAY0001: Array index out of bounds");n.push(e.R[r-1]())}else{if(!ee(e.type,61))throw pi("The provided context item is not a map or an array.");"*"===t?n.push.apply(n,h(e.h.map((function(e){return e.value()})))):(e=e.h.find((function(e){return ze(e.key,t)})))&&n.push(e.value())}return St(n)}function ks(e,t,n,r,i){return"*"===t?_s(e,t,n):(t=ye(t=pr(t,r,i))().L((function(t){return t.reduce((function(t,n){return _s(e,n,t)}),new ne)})),St([n,t]))}function Es(e,t){hr.call(this,e.s,[e].concat("*"===t?[]:[t]),{C:e.C,S:e.O,subtree:e.subtree}),this.j=e,this.u=t}function Cs(e,t){var n={};hr.call(this,new Er((n.external=1,n)),"*"===e?[]:[e],{C:!1},!1,t),this.j=e}function Ss(e,t,n,r){var i=t.map((function(e){return e.gb}));t=t.map((function(e){return e.name}));var o=i.reduce((function(e,t){return e.add(t.s)}),n.s);hr.call(this,o,i.concat(n),{C:!1},!1,r),this.u=e,this.B=t,this.J=i,this.T=n,this.j=null}function Os(e){hr.call(this,e,[],{C:!1})}function Ts(e){var t={};Os.call(this,new Er((t.nodeType=1,t))),this.u=e}function Ns(e,t){t=void 0===t?{kind:null}:t;var n=e.prefix,r=e.namespaceURI,i={};"*"!==(e=e.localName)&&(i.nodeName=1),i.nodeType=1,Os.call(this,new Er(i)),this.u=e,this.J=r,this.B=n,this.T=t.kind}function Bs(e){var t={};Os.call(this,new Er((t.nodeName=1,t))),this.u=e}function Is(e){Os.call(this,new Er({})),this.u=e}function Ps(e,t,n){hr.call(this,new Er({}),[],{C:!1,S:"unsorted"}),this.B=n,this.u=t,this.J=e,this.j=null}function Ms(e,t){var n=new Er({});Do.call(this,n,[e,t],{C:!1,Y:!1,S:"unsorted",subtree:!1},t),this.B=e}function Ds(e){this.type=e}function Rs(e){this.type="delete",this.target=e}function Fs(e,t,n){this.type=n,this.target=e,this.content=t}function Ls(e,t){Fs.call(this,e,t,"insertAfter")}function Us(e,t){this.type="insertAttributes",this.target=e,this.content=t}function $s(e,t){Fs.call(this,e,t,"insertBefore")}function Hs(e,t){Fs.call(this,e,t,"insertIntoAsFirst")}function Gs(e,t){Fs.call(this,e,t,"insertIntoAsLast")}function js(e,t){Fs.call(this,e,t,"insertInto")}function zs(e,t){this.type="rename",this.target=e,this.s=t.ya?t:new ve(t.prefix,t.namespaceURI,t.localName)}function Vs(e,t){this.type="replaceElementContent",this.target=e,this.text=t}function Xs(e,t){this.type="replaceNode",this.target=e,this.s=t}function qs(e,t){this.type="replaceValue",this.target=e,this.s=t}function Ws(e,t){return new Xs(e,t)}function Ys(e){wr.call(this,new Er({}),[e],{C:!1,S:"unsorted"}),this.j=e}function Qs(e,t,n,r,i,o){var s=t.h;return e.reduce((function e(t,n){return ee(n.type,62)?(n.R.forEach((function(n){return n().N().forEach((function(n){return e(t,n)}))})),t):(t.push(n),t)}),[]).forEach((function(e,a,l){if(ee(e.type,47)){if(i)throw o(e.value,s);n.push(e.value.node)}else if(ee(e.type,46)||ee(e.type,53)&&3===e.value.node.nodeType){var u=ee(e.type,46)?Kt(It(e,t).first(),1).value:Pe(s,e.value);0!==a&&ee(l[a-1].type,46)&&ee(e.type,46)?(r.push({data:" "+u,Sa:!0,nodeType:3}),i=!0):u&&(r.push({data:""+u,Sa:!0,nodeType:3}),i=!0)}else if(ee(e.type,55)){var c=[];Ie(s,e.value).forEach((function(e){return c.push(Ge(e))})),i=Qs(c,t,n,r,i,o)}else{if(!ee(e.type,53)){if(ee(e.type,60))throw Nt(e.type);throw Error("Atomizing "+e.type+" is not implemented.")}r.push(e.value.node),i=!0}})),i}function Ks(e,t,n){var r=[],i=[],o=!1;return e.forEach((function(e){o=Qs(e,t,r,i,o,n)})),{attributes:r,Va:i}}function Zs(e,t,n,r,i){var o=[];switch(e){case 4:r.length&&o.push(new Us(t,r)),i.length&&o.push(new Hs(t,i));break;case 5:r.length&&o.push(new Us(t,r)),i.length&&o.push(new Gs(t,i));break;case 3:r.length&&o.push(new Us(t,r)),i.length&&o.push(new js(t,i));break;case 2:r.length&&o.push(new Us(n,r)),i.length&&o.push(new $s(t,i));break;case 1:r.length&&o.push(new Us(n,r)),i.length&&o.push(new Ls(t,i))}return o}function Js(e,t,n){wr.call(this,new Er({}),[e,n],{C:!1,S:"unsorted"}),this.J=e,this.j=t,this.B=n}function ea(){return Tt("Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types.")}y(ns,hr),ns.prototype.h=function(e,t){var n=this,r=pr(this.j,e,t),i=pr(this.B,e,t);return r.$({empty:function(){return ge.X()},default:function(){return i.$({empty:function(){return ge.X()},default:function(){var o=Yo(r,t),s=Yo(i,t);return function(e,t,n,r){return e=ts[e],n.L((function(n){return t.filter((function(t){for(var i=0,o=n.length;i<o;++i){var s=n[i],a=void 0,l=void 0,c=t.type,h=s.type;if((ee(c,19)||ee(h,19))&&(ee(c,2)?a=3:ee(h,2)?l=3:ee(c,17)?a=17:ee(h,17)?l=17:ee(c,16)?a=16:ee(h,16)?l=16:ee(c,19)?l=h:ee(h,19)&&(a=c)),a=(l=u([l,a])).next().value,l=l.next().value,a?t=Kt(t,a):l&&(s=Kt(s,l)),Zo(e,t.type,s.type)(t,s,r))return!0}return!1})).$({default:function(){return ge.ca()},empty:function(){return ge.X()}})}))}(n.u,o,s,e)}})}})},y(is,hr),is.prototype.h=function(e,t){var n=this,r=pr(this.j,e,t),i=pr(this.B,e,t);return r.$({empty:function(){return ge.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},o:function(){return i.$({empty:function(){return ge.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},o:function(){var o=r.first(),s=i.first();return rs(n.u,t.h,o.type,s.type)(r,i,e)?ge.ca():ge.X()}})}})},y(ss,hr),ss.prototype.h=function(e,t){var n=this,r=os(this.j,t.h,pr(this.u,e,t),this.u.O);e=os(this.j,t.h,pr(this.B,e,t),this.B.O);var i=r.value,o=e.value,s=null,a=null,l=!1,u=!1;return ge.create({next:function(){if(l)return K;for(;!u;){if(!s){var e=i.next(0);if(e.done)return l=!0,K;s=e.value}if(!a){if((e=o.next(0)).done){u=!0;break}a=e.value}if(en(s.value,a.value)){if(e=Z(s),a=s=null,"intersectOp"===n.j)return e}else if(0>sn(t.h,s,a)){if(e=Z(s),s=null,"exceptOp"===n.j)return e}else a=null}return"exceptOp"===n.j?null!==s?(e=Z(s),s=null,e):i.next(0):(l=!0,K)}})},y(as,Ar),as.prototype.B=function(e,t,n){return n.length?St(n.map((function(t){return t(e)}))):ge.empty()},y(ls,hr),ls.prototype.h=function(e,t){var n=this,r=xt(e,pr(this.j,e,t)),i=null,o=null,s=!1;return ge.create({next:function(e){for(;!s;){if(!i&&(i=r.next(e)).done)return s=!0,K;o||(o=pr(n.u,i.value,t));var a=o.value.next(e);if(!a.done)return a;i=o=null}}})},y(us,hr),us.prototype.h=function(e,t){var n=this,r=Pt(pr(this.B,e,t),t);return r.$({empty:function(){return n.u?ge.ca():ge.X()},o:function(){return r.map((function(e){return Qt(e,n.j).v?q:W}))},multiple:function(){return ge.X()}})},y(cs,hr),cs.prototype.h=function(e,t){var n=this,r=Pt(pr(this.B,e,t),t);return r.$({empty:function(){if(!n.u)throw Error("XPTY0004: Sequence to cast is empty while target type is singleton.");return ge.empty()},o:function(){return r.map((function(e){return Kt(e,n.j)}))},multiple:function(){throw Error("XPTY0004: Sequence to cast is not singleton or empty.")}})},y(ps,hr),ps.prototype.h=function(e,t){var n=this,r=pr(this.B,e,t);return r.$({empty:function(){return"?"===n.j||"*"===n.j?ge.ca():ge.X()},multiple:function(){return"+"===n.j||"*"===n.j?hs(r,(function(r){var i=ge.o(r);return r=kt(e,0,r,i),pr(n.u,r,t)})):ge.X()},o:function(){return hs(r,(function(r){var i=ge.o(r);return r=kt(e,0,r,i),pr(n.u,r,t)}))}})},y(gs,hr),gs.prototype.h=function(e,t){var n=this;if(this.j.every((function(e){return"sorted"===e.O}))){var r=0;return ms(t.h,{next:function(){return r>=n.j.length?K:Z(pr(n.j[r++],e,t))}}).map((function(e){if(!ee(e.type,53))throw Error("XPTY0004: The sequences to union are not of type node()*");return e}))}return St(this.j.map((function(n){return pr(n,e,t)}))).L((function(e){if(e.some((function(e){return!ee(e.type,53)})))throw Error("XPTY0004: The sequences to union are not of type node()*");return e=an(t.h,e),ge.create(e)}))},y(vs,Do),vs.prototype.J=function(e,t,n,r){if(this.B[1])throw Error("More than one order spec is not supported for the order by clause.");var i,o,s=[],a=!1,l=null,c=this.B[0];return ge.create({next:function(){if(!a){for(var h=t.next(0);!h.done;)s.push(h.value),h=t.next(0);if((h=s.map((function(e){return c.da.h(e,n)})).map((function(e){return Pt(e,n)}))).find((function(e){return!e.G()&&!e.ta()})))throw pi("Order by only accepts empty or singleton sequences");if(function(e){return(e=e.find((function(e){return!!e})))?Mt(e.type):null}(i=(i=h.map((function(e){return e.first()}))).map((function(e){return null===e?e:ee(19,e.type)?Kt(e,1):e})))&&!(i=ys(i)))throw pi("Could not cast values");h=i.length,o=i.map((function(e,t){return t}));for(var p=0;p<h;p++)if(p+1!==h)for(var d=p;0<=d;d--){var f=d,m=d+1;if(m!==h){var g=i[o[f]],y=i[o[m]];if(null!==y||null!==g){if(c.Bc){if(null===g)continue;if(null===y&&null!==g){g=u([o[m],o[f]]),o[f]=g.next().value,o[m]=g.next().value;continue}if(isNaN(y.value)&&null!==g&&!isNaN(g.value)){g=u([o[m],o[f]]),o[f]=g.next().value,o[m]=g.next().value;continue}}else{if(null===y)continue;if(null===g&&null!==y){g=u([o[m],o[f]]),o[f]=g.next().value,o[m]=g.next().value;continue}if(isNaN(g.value)&&null!==y&&!isNaN(y.value)){g=u([o[m],o[f]]),o[f]=g.next().value,o[m]=g.next().value;continue}}Zo("gtOp",g.type,y.type)(g,y,e)&&(g=u([o[m],o[f]]),o[f]=g.next().value,o[m]=g.next().value)}}}var v=c.Ib?0:i.length-1;l=r({next:function(){return c.Ib?v>=i.length?K:Z(s[o[v++]]):0>v?K:Z(s[o[v--]])}}).value,a=!0}return l.next(0)}})},y(ws,hr),ws.prototype.h=function(e,t){if(null===e.M)throw Error("XPDY0002: context is absent, it needs to be present to use paths.");for(var n=t.h,r=e.M.value;9!==r.node.nodeType;)if(null===(r=Fe(n,r)))throw Error("XPDY0050: the root node of the context node is not a document node.");return n=ge.o(Ge(r)),this.j?pr(this.j,kt(e,0,n.first(),n),t):n},y(bs,hr),bs.prototype.h=function(e){if(null===e.M)throw Error('XPDY0002: context is absent, it needs to be present to use the "." operator');return ge.o(e.M)},y(xs,hr),xs.prototype.h=function(e,t){var n=this,r=!0;return this.j.reduce((function(i,o,s){var a=null===i?Zt(e):xt(e,i);if(i={next:function(e){if((e=a.next(e)).done)return K;if(null!==e.value.M&&!ee(e.value.M.type,53)&&0<s)throw Error("XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.");return Z(pr(o,e.value,t))}},n.u)switch(o.O){case"reverse-sorted":var l=i;i={next:function(e){return(e=l.next(e)).done?e:Z(e.value.L((function(e){return ge.create(e.reverse())})))}};case"sorted":if(o.subtree&&r){var u=fs(i);break}u=ms(t.h,i);break;case"unsorted":return fs(i).L((function(e){return ge.create(function(e,t){var n=!1,r=!1;if(t.forEach((function(e){ee(e.type,53)?n=!0:r=!0})),r&&n)throw Error("XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.");return n?an(e,t):t}(t.h,e))}))}else u=fs(i);return r=r&&o.Y,u}),null)},xs.prototype.A=function(){return this.j[0].A()},y(As,hr),As.prototype.h=function(e,t){var n=this,r=pr(this.u,e,t);if(this.j.C){var i=pr(this.j,e,t);if(i.G())return i;var o=i.first();if(ee(o.type,2)){var s=o.value;if(!Number.isInteger(s))return ge.empty();var a=r.value,l=!1;return ge.create({next:function(){if(!l){for(var e=a.next(0);!e.done;e=a.next(0))if(1==s--)return l=!0,e;l=!0}return K}})}return i.getEffectiveBooleanValue()?r:ge.empty()}var u=r.value,c=null,h=0,p=null;return ge.create({next:function(i){for(var o=!1;(!c||!c.done)&&(c||(c=u.next(o?0:i),o=!0),!c.done);){p||(p=pr(n.j,kt(e,h,c.value,r),t));var s=p.first();s=null!==s&&(ee(s.type,2)?s.value===h+1:p.getEffectiveBooleanValue()),p=null;var a=c.value;if(c=null,h++,s)return Z(a)}return c}})},As.prototype.A=function(){return this.u.A()},y(Es,hr),Es.prototype.h=function(e,t){var n=this;return pr(this.j,e,t).L((function(r){return r.reduce((function(r,i){return ks(i,n.u,r,e,t)}),new ne)}))},Es.prototype.A=function(){return this.j.A()},y(Cs,hr),Cs.prototype.h=function(e,t){return ks(e.M,this.j,new ne,e,t)},y(Ss,hr),Ss.prototype.h=function(e,t){var n=this,r=e,i=this.j.map((function(i,o){var s=pr(n.J[o],r,t).N();return r=Et(e,((o={})[i]=function(){return ge.create(s)},o)),s}));if(i.some((function(e){return 0===e.length})))return"every"===this.u?ge.ca():ge.X();var o=Array(i.length).fill(0);o[0]=-1;for(var s=!0;s;){s=!1;for(var a=0,l=o.length;a<l;++a){var u=i[a];if(!(++o[a]>u.length-1)){for(s=Object.create(null),a={},l=0;l<o.length;a={wb:a.wb},l++)a.wb=i[l][o[l]],s[this.j[l]]=function(e){return function(){return ge.o(e.wb)}}(a);if(s=Et(e,s),(s=pr(this.T,s,t)).getEffectiveBooleanValue()&&"some"===this.u)return ge.ca();if(!s.getEffectiveBooleanValue()&&"every"===this.u)return ge.X();s=!0;break}o[a]=0}}return"every"===this.u?ge.ca():ge.X()},Ss.prototype.P=function(e){this.j=[];for(var t=0,n=this.B.length;t<n;++t){this.J[t].P(e),Ei(e);var r=this.B[t],i=r.prefix?e.ba(r.prefix):null;r=Oi(e,i,r.localName),this.j[t]=r}for(this.T.P(e),t=0,n=this.B.length;t<n;++t)Ni(e)},y(Os,hr),Os.prototype.h=function(e){return this.j(e.M)?ge.ca():ge.X()},y(Ts,Os),Ts.prototype.j=function(e){return!!ee(e.type,53)&&(e=e.value.node.nodeType,3===this.u&&4===e||this.u===e)},Ts.prototype.A=function(){return"type-"+this.u},y(Ns,Os),Ns.prototype.j=function(e){var t=ee(e.type,54),n=ee(e.type,47);return!(!t&&!n)&&(e=e.value,!(null!==this.T&&(1===this.T&&!t||2===this.T&&!n))&&(null===this.B&&""!==this.J&&"*"===this.u||("*"===this.B?"*"===this.u||this.u===e.node.localName:("*"===this.u||this.u===e.node.localName)&&(e.node.namespaceURI||null)===((""===this.B?t?this.J:null:this.J)||null))))},Ns.prototype.A=function(){return"*"===this.u?null===this.T?"type-1-or-type-2":"type-"+this.T:"name-"+this.u},Ns.prototype.P=function(e){if(null===this.J&&"*"!==this.B&&(this.J=e.ba(this.B||"")||null,!this.J&&this.B))throw Error("XPST0081: The prefix "+this.B+" could not be resolved.")},y(Bs,Os),Bs.prototype.j=function(e){return ee(e.type,57)&&e.value.node.target===this.u},Bs.prototype.A=function(){return"type-7"},y(Is,Os),Is.prototype.j=function(e){return ee(e.type,le(this.u.prefix?this.u.prefix+":"+this.u.localName:this.u.localName))},y(Ps,hr),Ps.prototype.h=function(e,t){if(!e.Ga[this.j]){if(this.T)return this.T(e,t);throw Error("XQDY0054: The variable "+this.B+" is declared but not in scope.")}return e.Ga[this.j]()},Ps.prototype.P=function(e){if(null===this.u&&this.J&&(this.u=e.ba(this.J)),this.j=e.sb(this.u||"",this.B),!this.j)throw Error("XPST0008, The variable "+this.B+" is not in scope.");(e=e.Fa[this.j])&&(this.T=e)},y(Ms,Do),Ms.prototype.J=function(e,t,n,r){var i=this,o=null,s=null;return r({next:function(){for(;;){if(!s){var e=t.next(0);if(e.done)return K;o=e.value,s=pr(i.B,o,n)}e=s.getEffectiveBooleanValue();var r=o;if(s=o=null,e)return Z(r)}}})},y(Rs,Ds),Rs.prototype.h=function(e){var t={};return t.type=this.type,t.target=Kr(this.target,e,!1),t},y(Fs,Ds),Fs.prototype.h=function(e){var t={};return t.type=this.type,t.target=Kr(this.target,e,!1),t.content=this.content.map((function(t){return Kr(t,e,!0)})),t},y(Ls,Fs),y(Us,Ds),Us.prototype.h=function(e){var t={};return t.type=this.type,t.target=Kr(this.target,e,!1),t.content=this.content.map((function(t){return Kr(t,e,!0)})),t},y($s,Fs),y(Hs,Fs),y(Gs,Fs),y(js,Fs),y(zs,Ds),zs.prototype.h=function(e){var t={},n={};return n.type=this.type,n.target=Kr(this.target,e,!1),n.newName=(t.prefix=this.s.prefix,t.namespaceURI=this.s.namespaceURI,t.localName=this.s.localName,t),n},y(Vs,Ds),Vs.prototype.h=function(e){var t={};return t.type=this.type,t.target=Kr(this.target,e,!1),t.text=this.text?Kr(this.text,e,!0):null,t},y(Xs,Ds),Xs.prototype.h=function(e){var t={};return t.type=this.type,t.target=Kr(this.target,e,!1),t.replacement=this.s.map((function(t){return Kr(t,e,!0)})),t},y(qs,Ds),qs.prototype.h=function(e){var t={};return t.type=this.type,t.target=Kr(this.target,e,!1),t["string-value"]=this.s,t},y(Ys,wr),Ys.prototype.u=function(e,t){var n,r,i=br(this.j)(e,t),o=t.h;return{next:function(){if(!n){var e=i.next(0);if(e.value.H.some((function(e){return!ee(e.type,53)})))throw Error("XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.");n=e.value.H,r=e.value.fa}return n=n.filter((function(e){return Fe(o,e.value)})),Z({fa:vr(n.map((function(e){return new Rs(e.value)})),r),H:[]})}}},y(Js,wr),Js.prototype.u=function(e,t){var n,r,i,o,s,a,l=this,u=br(this.J)(e,t),c=br(this.B)(e,t),h=t.h;return{next:function(){if(!n){var e=u.next(0),p=Ks([e.value.H],t,tr);n=p.attributes.map((function(e){return{node:e,F:null}})),r=p.Va.map((function(e){return{node:e,F:null}})),i=e.value.fa}if(!o){if(0===(e=c.next(0)).value.H.length)throw cr();if(3<=l.j){if(1!==e.value.H.length)throw nr();if(!ee(e.value.H[0].type,54)&&!ee(e.value.H[0].type,55))throw nr()}else{if(1!==e.value.H.length)throw rr();if(!(ee(e.value.H[0].type,54)||ee(e.value.H[0].type,56)||ee(e.value.H[0].type,58)||ee(e.value.H[0].type,57)))throw rr();if(null===(a=Fe(h,e.value.H[0].value,null)))throw Error("XUDY0029: The target "+e.value.H[0].value.outerHTML+" for inserting a node before or after must have a parent.")}o=e.value.H[0],s=e.value.fa}if(n.length){if(3<=l.j){if(!ee(o.type,54))throw Error("XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.")}else if(1!==a.node.nodeType)throw Error("XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.");n.reduce((function(e,t){var n=t.node.prefix||"",r=t.node.prefix||"",i=t.node.namespaceURI,s=r?o.value.node.lookupNamespaceURI(r):null;if(s&&s!==i)throw lr(i);if((r=e[r])&&i!==r)throw ur(i);return e[n]=t.node.namespaceURI,e}),{})}return Z({H:[],fa:vr(Zs(l.j,o.value,a||null,n,r),i,s)})}}};var ta=/([A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])/,na=new RegExp(ta.source+new RegExp("("+ta.source+"|[-.0-9-])").source+"*","g");function ra(e){return!!(e=e.match(na))&&1===e.length}function ia(e,t){return Pt(t,e).$({o:function(e){if(ee((e=e.first()).type,1)||ee(e.type,19)){if(!ra(e.value))throw Error('XQDY0041: The value "'+e.value+'" of a name expressions cannot be converted to a NCName.');return ge.o(e)}throw ea()},default:function(){throw ea()}}).value}function oa(e,t,n){return Pt(n,t).$({o:function(t){if(ee((t=t.first()).type,23))return ge.o(t);if(ee(t.type,1)||ee(t.type,19)){if(1===(t=t.value.split(":")).length)t=t[0];else{var n=t[0],r=e.ba(n);t=t[1]}if(!ra(t)||n&&!ra(n))throw wi(n?n+":"+t:t);if(n&&!r)throw wi(n+":"+t);return ge.o({type:23,value:new ve(n,r,t)})}throw ea()},default:function(){throw ea()}}).value}function sa(e,t){wr.call(this,new Er({}),[e,t],{C:!1,S:"unsorted"}),this.B=e,this.J=t,this.j=void 0}function aa(e,t,n){wr.call(this,new Er({}),[t,n],{C:!1,S:"unsorted"}),this.J=e,this.j=t,this.B=n}function la(e){switch(e.type){case"delete":return new Rs({node:e.target,F:null});case"insertAfter":return new Ls({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertBefore":return new $s({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertInto":return new js({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsFirst":return new Hs({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsLast":return new Gs({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertAttributes":return new Us({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"rename":return new zs({node:e.target,F:null},e.newName);case"replaceNode":return new Xs({node:e.target,F:null},e.replacement.map((function(e){return{node:e,F:null}})));case"replaceValue":return new qs({node:e.target,F:null},e["string-value"]);case"replaceElementContent":return new Vs({node:e.target,F:null},e.text?{node:e.text,F:null}:null);default:throw Error('Unexpected type "'+e.type+'" when parsing a transferable pending update.')}}function ua(e,t,n){if(t.find((function(t){return en(t,e)})))return!0;var r=Fe(n,e);return!!r&&ua(r,t,n)}function ca(e,t,n){wr.call(this,new Er({}),e.reduce((function(e,t){return e.push(t.gb),e}),[t,n]),{C:!1,S:"unsorted"}),this.j=e,this.J=t,this.B=n,this.I=null}function ha(e,t){return{node:{nodeType:2,Sa:!0,nodeName:e.ya(),namespaceURI:e.namespaceURI,prefix:e.prefix,localName:e.localName,name:e.ya(),value:t},F:null}}function pa(e,t){var n=t.vb||[];n=n.concat(e.Ma||[]),hr.call(this,new Er({}),n,{C:!1,S:"unsorted"}),e.Ma?this.u=e.Ma:this.name=new ve(e.prefix,e.namespaceURI,e.localName),this.j=t,this.B=void 0}function da(e){hr.call(this,e?e.s:new Er({}),e?[e]:[],{C:!1,S:"unsorted"}),this.j=e}function fa(e,t,n,r){hr.call(this,new Er({}),r.concat(t).concat(e.Ma||[]),{C:!1,S:"unsorted"}),e.Ma?this.u=e.Ma:this.j=new ve(e.prefix,e.namespaceURI,e.localName),this.T=n.reduce((function(e,t){if(t.prefix in e)throw Error("XQST0071: The namespace declaration with the prefix "+t.prefix+" has already been declared on the constructed element.");return e[t.prefix||""]=t.uri,e}),{}),this.J=t,this.ka=r,this.B=void 0}function ma(e){if(/^xml$/i.test(e))throw Error('XQDY0064: The target of a created PI may not be "'+e+'"')}function ga(e,t){return{node:{data:t,Sa:!0,nodeName:e,nodeType:7,target:e},F:null}}function ya(e,t){var n=e.Eb?[e.Eb].concat(t):[t];hr.call(this,n.reduce((function(e,t){return e.add(t.s)}),new Er({})),n,{C:!1,S:"unsorted"}),this.j=e,this.u=t}function va(e){hr.call(this,e?e.s:new Er({}),e?[e]:[],{C:!1,S:"unsorted"}),this.j=e}function wa(e,t,n,r){var i,o=new Er({});Ar.call(this,o,(i=[e].concat(h(t.map((function(e){return e.zc}))),[n])).concat.apply(i,h(t.map((function(e){return e.Nb.map((function(e){return e.Mb}))})))),{C:!1,Y:!1,S:"unsorted",subtree:!1},r),this.J=e,this.j=t.length,this.T=t.map((function(e){return e.Nb}))}y(sa,wr),sa.prototype.u=function(e,t){var n=this,r=br(this.B)(e,t),i=br(this.J)(e,t);return{next:function(){var e=r.next(0),o=e.value.H;if(0===o.length)throw cr();if(1!==o.length)throw or();if(!ee(o[0].type,54)&&!ee(o[0].type,47)&&!ee(o[0].type,57))throw or();o=o[0];var s=i.next(0);e:{var a=n.j,l=ge.create(s.value.H);switch(o.type){case 54:if(a=oa(a,t,l).next(0).value.value,(l=o.value.node.lookupNamespaceURI(a.prefix))&&l!==a.namespaceURI)throw lr(a.namespaceURI);break e;case 47:if((a=oa(a,t,l).next(0).value.value).namespaceURI&&(l=o.value.node.lookupNamespaceURI(a.prefix))&&l!==a.namespaceURI)throw lr(a.namespaceURI);break e;case 57:a=new ve("",null,a=ia(t,l).next(0).value.value);break e}a=void 0}return Z({H:[],fa:vr([new zs(o.value,a)],e.value.fa,s.value.fa)})}}},sa.prototype.P=function(e){this.j=ki(e),wr.prototype.P.call(this,e)},y(aa,wr),aa.prototype.u=function(e,t){var n=br(this.j)(e,t);return e=br(this.B)(e,t),this.J?function(e,t,n){var r,i,o,s,a=!1;return{next:function(){if(a)return K;if(!o){var l=n.next(0),u=Pt(ge.create(l.value.H),e).map((function(e){return Kt(e,1)})).N().map((function(e){return e.value})).join(" ");o=0===u.length?null:{node:e.s.createTextNode(u),F:null},s=l.value.fa}if(!r){if(0===(l=t.next(0)).value.H.length)throw cr();if(1!==l.value.H.length)throw ir();if(!(ee(l.value.H[0].type,54)||ee(l.value.H[0].type,47)||ee(l.value.H[0].type,56)||ee(l.value.H[0].type,58)||ee(l.value.H[0].type,57)))throw ir();r=l.value.H[0],i=l.value.fa}if(ee(r.type,54))return a=!0,Z({H:[],fa:vr([new Vs(r.value,o)],s,i)});if(ee(r.type,47)||ee(r.type,56)||ee(r.type,58)||ee(r.type,57)){if(l=o?Pe(e.h,o):"",ee(r.type,58)&&(l.includes("--")||l.endsWith("-")))throw Error('XQDY0072: The content "'+l+'" for a comment node contains two adjacent hyphens or ends with a hyphen.');if(ee(r.type,57)&&l.includes("?>"))throw Error('XQDY0026: The content "'+l+'" for a processing instruction node contains "?>".');return a=!0,Z({H:[],fa:vr([new qs(r.value,l)],s,i)})}}}}(t,n,e):function(e,t,n){var r,i,o;return{next:function(){if(!r){var s=n.next(0),a=Ks([s.value.H],e,ur);r={attributes:a.attributes.map((function(e){return{node:e,F:null}})),Va:a.Va.map((function(e){return{node:e,F:null}}))},i=s.value.fa}if(0===(a=t.next(0)).value.H.length)throw cr();if(1!==a.value.H.length)throw ir();if(!(ee(a.value.H[0].type,54)||ee(a.value.H[0].type,47)||ee(a.value.H[0].type,56)||ee(a.value.H[0].type,58)||ee(a.value.H[0].type,57)))throw ir();if(null===(o=Fe(e.h,a.value.H[0].value,null)))throw Error("XUDY0009: The target "+a.value.H[0].value.outerHTML+" for replacing a node must have a parent.");if(s=a.value.H[0],a=a.value.fa,ee(s.type,47)){if(r.Va.length)throw Error("XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.");r.attributes.reduce((function(e,t){var n=t.node.prefix||"";t=t.node.namespaceURI;var r=o.node.lookupNamespaceURI(n);if(r&&r!==t)throw lr(t);if((r=e[n])&&t!==r)throw ur(t);return e[n]=t,e}),{})}else if(r.attributes.length)throw Error("XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.");return Z({H:[],fa:vr([Ws(s.value,[].concat(r.attributes,r.Va))],i,a)})}}}(t,n,e)},y(ca,wr),ca.prototype.h=function(e,t){return xr(e=this.u(e,t),(function(){}))},ca.prototype.u=function(e,t){var n,r,i,o=this,s=t.h,a=t.s,l=t.j,u=[],c=[],p=[];return{next:function(){if(c.length!==o.j.length)for(var d={},f=c.length;f<o.j.length;d={ib:d.ib},f++){var m=o.j[f],g=u[f];if(g||(u[f]=g=br(m.gb)(e,t)),1!==(g=g.next(0)).value.H.length||!ee(g.value.H[0].type,53))throw Error("XUTY0013: The source expression of a copy modify expression must return a single node.");d.ib=Ge(Yr(g.value.H[0].value,t)),c.push(d.ib.value),p.push(g.value.fa),e=Et(e,((g={})[m.Gc]=function(e){return function(){return ge.o(e.ib)}}(d),g))}return i||(n||(n=br(o.J)(e,t)),i=n.next(0).value.fa),i.forEach((function(e){if(e.target&&!ua(e.target,c,s))throw Error("XUDY0014: The target "+e.target.node.outerHTML+" must be a node created by the copy clause.");if("put"===e.type)throw Error("XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.")})),d=i.map((function(e){return la(e=e.h(t))})),yr(d,s,a,l),r||(r=br(o.B)(e,t)),Z({H:(d=r.next(0)).value.H,fa:vr.apply(null,[d.value.fa].concat(h(p)))})}}},ca.prototype.P=function(e){Ei(e),this.j.forEach((function(t){return t.Gc=Oi(e,t.Pb.namespaceURI,t.Pb.localName)})),wr.prototype.P.call(this,e),Ni(e),this.I=this.j.some((function(e){return e.gb.I}))||this.B.I},y(pa,hr),pa.prototype.h=function(e,t){var n,r,i,o=this,s=!1;return ge.create({next:function(){if(s)return K;if(!r){if(o.u){if(!n){var a=o.u.h(e,t);n=oa(o.B,t,a)}r=n.next(0).value.value}else r=o.name;if(r){if("xmlns"===r.prefix)throw fi(r);if(""===r.prefix&&"xmlns"===r.localName)throw fi(r);if("http://www.w3.org/2000/xmlns/"===r.namespaceURI)throw fi(r);if("xml"===r.prefix&&"http://www.w3.org/XML/1998/namespace"!==r.namespaceURI)throw fi(r);if(""!==r.prefix&&"xml"!==r.prefix&&"http://www.w3.org/XML/1998/namespace"===r.namespaceURI)throw fi(r)}}return o.j.vb?(a=o.j.vb,i||(i=St(a.map((function(n){return Pt(n.h(e,t),t).L((function(e){return ge.o(X(e.map((function(e){return e.value})).join(" "),1))}))}))).L((function(e){return ge.o(Ge(ha(r,e.map((function(e){return e.value})).join(""))))})).value),i.next(0)):(s=!0,Z(Ge(ha(r,o.j.value))))}})},pa.prototype.P=function(e){if(this.B=ki(e),this.name&&this.name.prefix&&!this.name.namespaceURI){var t=e.ba(this.name.prefix);if(void 0===t&&this.name.prefix)throw Bt(this.name.prefix);this.name.namespaceURI=t||null}hr.prototype.P.call(this,e)},y(da,hr),da.prototype.h=function(e,t){var n={data:"",Sa:!0,nodeType:8},r={node:n,F:null};return this.j?Pt(e=pr(this.j,e,t),t).L((function(e){if(e=e.map((function(e){return Kt(e,1).value})).join(" "),-1!==e.indexOf("--\x3e"))throw Error('XQDY0072: The contents of the data of a comment may not include "--\x3e"');return n.data=e,ge.o(Ge(r))})):ge.o(Ge(r))},y(fa,hr),fa.prototype.h=function(e,t){var n,r,i,o,s,a=this,l=!1,u=!1,c=!1;return ge.create({next:function(){if(c)return K;if(l||(n||(n=St(a.J.map((function(n){return pr(n,e,t)})))),r=n.N(),l=!0),!u){i||(i=a.ka.map((function(n){return pr(n,e,t)})));for(var h=[],p=0;p<i.length;p++){var d=i[p].N();h.push(d)}o=h,u=!0}if(a.u&&(s||(h=a.u.h(e,t),s=oa(a.B,t,h)),h=s.next(0),a.j=h.value.value),"xmlns"===a.j.prefix||"http://www.w3.org/2000/xmlns/"===a.j.namespaceURI||"xml"===a.j.prefix&&"http://www.w3.org/XML/1998/namespace"!==a.j.namespaceURI||a.j.prefix&&"xml"!==a.j.prefix&&"http://www.w3.org/XML/1998/namespace"===a.j.namespaceURI)throw Error('XQDY0096: The node name "'+a.j.ya()+'" is invalid for a computed element constructor.');var f={nodeType:1,Sa:!0,attributes:[],childNodes:[],nodeName:a.j.ya(),namespaceURI:a.j.namespaceURI,prefix:a.j.prefix,localName:a.j.localName};for(h={node:f,F:null},r.forEach((function(e){f.attributes.push(e.value.node)})),(p=Ks(o,t,di)).attributes.forEach((function(e){if(f.attributes.find((function(t){return t.namespaceURI===e.namespaceURI&&t.localName===e.localName})))throw Error("XQDY0025: The attribute "+e.name+" does not have an unique name in the constructed element.");f.attributes.push(e)})),p.Va.forEach((function(e){f.childNodes.push(e)})),p=0;p<f.childNodes.length;p++)if(Se(d=f.childNodes[p])&&3===d.nodeType){var m=f.childNodes[p-1];m&&Se(m)&&3===m.nodeType&&(m.data+=d.data,f.childNodes.splice(p,1),p--)}return c=!0,Z(Ge(h))}})},fa.prototype.P=function(e){var t=this;if(Ei(e),Object.keys(this.T).forEach((function(n){return Si(e,n,t.T[n])})),this.ha.forEach((function(t){return t.P(e)})),this.J.reduce((function(t,n){if(n.name){if(n="Q{"+(null===n.name.namespaceURI?e.ba(n.name.prefix):n.name.namespaceURI)+"}"+n.name.localName,t.includes(n))throw Error("XQST0040: The attribute "+n+" does not have an unique name in the constructed element.");t.push(n)}return t}),[]),this.j&&null===this.j.namespaceURI){var n=e.ba(this.j.prefix);if(void 0===n&&this.j.prefix)throw Bt(this.j.prefix);this.j.namespaceURI=n}this.B=ki(e),Ni(e)},y(ya,hr),ya.prototype.h=function(e,t){var n=this;return Pt(pr(this.u,e,t),t).L((function(r){var i=r.map((function(e){return Kt(e,1).value})).join(" ");if(-1!==i.indexOf("?>"))throw Error('XQDY0026: The contents of the data of a processing instruction may not include "?>"');if(null!==n.j.Lb)return ma(r=n.j.Lb),ge.o(Ge(ga(r,i)));r=pr(n.j.Eb,e,t);var o=ia(t,r);return ge.create({next:function(){var e=o.next(0);return e.done?e:(ma(e=e.value.value),Z(Ge(ga(e,i))))}})}))},y(va,hr),va.prototype.h=function(e,t){return this.j?Pt(e=pr(this.j,e,t),t).L((function(e){return 0===e.length?ge.empty():(e={node:{data:e.map((function(e){return Kt(e,1).value})).join(" "),Sa:!0,nodeType:3},F:null},ge.o(Ge(e)))})):ge.empty()},y(wa,Ar),wa.prototype.B=function(e,t,n){var r=this;return n[0](e).L((function(i){for(var o=0;o<r.j;o++)if(r.T[o].some((function(n){switch(n.Ec){case"?":if(1<i.length)return!1;break;case"*":break;case"+":if(1>i.length)return!1;break;default:if(1!==i.length)return!1}var r=ge.create(i);return i.every((function(i,o){return i=kt(e,o,i,r),pr(n.Mb,i,t).getEffectiveBooleanValue()}))})))return n[o+1](e);return n[r.j+1](e)}))},wa.prototype.P=function(e){if(Ar.prototype.P.call(this,e),this.J.I)throw er()};var ba={aa:!1,sa:!1},xa={aa:!0,sa:!1},Aa={aa:!0,sa:!0};function _a(e){return e.aa?e.sa?Aa:xa:ba}function ka(e,t){switch(e[0]){case"andOp":var n=Pi(e,"type");return new qo(Ca("andOp",e,_a(t)),n);case"orOp":return n=Pi(e,"type"),new Wo(Ca("orOp",e,_a(t)),n);case"unaryPlusOp":return n=Bi(Bi(e,"operand"),"*"),e=Pi(e,"type"),new Xo("+",ka(n,t),e);case"unaryMinusOp":return n=Bi(Bi(e,"operand"),"*"),e=Pi(e,"type"),new Xo("-",ka(n,t),e);case"addOp":case"subtractOp":case"multiplyOp":case"divOp":case"idivOp":case"modOp":var r=e[0],i=ka(Mi(e,["firstOperand","*"]),_a(t));t=ka(Mi(e,["secondOperand","*"]),_a(t));var o=Pi(e,"type"),s=Pi(Mi(e,["firstOperand","*"]),"type"),a=Pi(Mi(e,["secondOperand","*"]),"type");return s&&a&&Pi(e,"type")&&(n=Xi(r,s.type,a.type)),new Yi(r,i,t,o,n);case"sequenceExpr":return function(e,t){var n=Di(e,"*").map((function(e){return ka(e,t)}));return 1===n.length?n[0]:(n=Pi(e,"type"),new as(Di(e,"*").map((function(e){return ka(e,t)})),n))}(e,t);case"unionOp":return n=Pi(e,"type"),new gs([ka(Mi(e,["firstOperand","*"]),_a(t)),ka(Mi(e,["secondOperand","*"]),_a(t))],n);case"exceptOp":case"intersectOp":return n=Pi(e,"type"),new ss(e[0],ka(Mi(e,["firstOperand","*"]),_a(t)),ka(Mi(e,["secondOperand","*"]),_a(t)),n);case"stringConcatenateOp":return function(e,t){var n=Pi(e,"type");return new Br(new jo({localName:"concat",namespaceURI:"http://www.w3.org/2005/xpath-functions",prefix:""},(e=[Mi(e,["firstOperand","*"]),Mi(e,["secondOperand","*"])]).length,n),e.map((function(e){return ka(e,_a(t))})),n)}(e,t);case"rangeSequenceExpr":return function(e,t){var n=Pi(e,"type");return new Br(new jo({localName:"to",namespaceURI:"http://fontoxpath/operators",prefix:""},(e=[Bi(Bi(e,"startExpr"),"*"),Bi(Bi(e,"endExpr"),"*")]).length,n),e.map((function(e){return ka(e,_a(t))})),n)}(e,t);case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":return Oa("generalCompare",e,t);case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":return Oa("valueCompare",e,t);case"isOp":case"nodeBeforeOp":case"nodeAfterOp":return Oa("nodeCompare",e,t);case"pathExpr":return function(e,t){var n=Pi(e,"type"),r=Di(e,"stepExpr"),i=!1,o=r.map((function(e){for(var r=Bi(e,"xpathAxis"),o=Di(e,"*"),s=[],a=null,l=(o=u(o)).next();!l.done;l=o.next())switch(l=l.value,l[0]){case"lookup":s.push(["lookup",Sa(l,t)]);break;case"predicate":case"predicates":for(var c=(l=u(Di(l,"*"))).next();!c.done;c=l.next())a=yo(a,(c=ka(c.value,_a(t))).A()),s.push(["predicate",c])}if(r)switch(i=!0,e=Bi(e,"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard".split(" ")),e=Ea(e),Ii(r)){case"ancestor":var h=new mo(e,{Qa:!1});break;case"ancestor-or-self":h=new mo(e,{Qa:!0});break;case"attribute":h=new vo(e,a);break;case"child":h=new wo(e,a);break;case"descendant":h=new xo(e,{Qa:!1});break;case"descendant-or-self":h=new xo(e,{Qa:!0});break;case"parent":h=new Co(e,a);break;case"following-sibling":h=new Eo(e,a);break;case"preceding-sibling":h=new Oo(e,a);break;case"following":h=new ko(e);break;case"preceding":h=new So(e);break;case"self":h=new To(e,a)}else h=ka(h=Mi(e,["filterExpr","*"]),_a(t));for(r=(s=u(s)).next();!r.done;r=s.next())switch(r=r.value,r[0]){case"lookup":h=new Es(h,r[1]);break;case"predicate":h=new As(h,r[1])}return h.type=n,h}));return e=Bi(e,"rootExpr"),!(r=i||null!==e||1<r.length)&&1===o.length||!e&&1===o.length&&"sorted"===o[0].O?o[0]:e&&0===o.length?new ws(null):(o=new xs(o,r),e?new ws(o):o)}(e,t);case"contextItemExpr":return new bs(Pi(e,"type"));case"functionCallExpr":return function(e,t){var n=Bi(e,"functionName"),r=Di(Bi(e,"arguments"),"*");return e=Pi(e,"type"),new Br(new jo(Ri(n),r.length,e),r.map((function(e){return"argumentPlaceholder"===e[0]?null:ka(e,t)})),e)}(e,t);case"inlineFunctionExpr":return function(e,t){var n=Di(Bi(e,"paramList"),"*"),r=Mi(e,["functionBody","*"]),i=Pi(e,"type");return new Uo(n.map((function(e){return{name:Ri(Bi(e,"varName")),type:Fi(e)}})),Fi(e),r?ka(r,t):new as([],i))}(e,t);case"arrowExpr":return function(e,t){var n=Pi(e,"type"),r=Mi(e,["argExpr","*"]);e=Di(e,"*").slice(1),r=[ka(r,t)];for(var i=0;i<e.length;i++)if("arguments"!==e[i][0]){if("arguments"===e[i+1][0]){var o=Di(e[i+1],"*");r=r.concat(o.map((function(e){return"argumentPlaceholder"===e[0]?null:ka(e,t)})))}r=[new Br(o="EQName"===e[i][0]?new jo(Ri(e[i]),r.length,n):ka(e[i],_a(t)),r,n)]}return r[0]}(e,t);case"dynamicFunctionInvocationExpr":return function(e,t){var n=Mi(e,["functionItem","*"]),r=Pi(e,"type");e=Bi(e,"arguments");var i=[];return e&&(i=Di(e,"*").map((function(e){return"argumentPlaceholder"===e[0]?null:ka(e,t)}))),new Br(ka(n,t),i,r)}(e,t);case"namedFunctionRef":return t=Bi(e,"functionName"),n=Pi(e,"type"),e=Ii(Mi(e,["integerConstantExpr","value"])),new jo(Ri(t),parseInt(e,10),n);case"integerConstantExpr":return new Ho(Ii(Bi(e,"value")),{type:5,g:3});case"stringConstantExpr":return new Ho(Ii(Bi(e,"value")),{type:1,g:3});case"decimalConstantExpr":return new Ho(Ii(Bi(e,"value")),{type:4,g:3});case"doubleConstantExpr":return new Ho(Ii(Bi(e,"value")),{type:3,g:3});case"varRef":return new Ps((e=Ri(Bi(e,"name"))).prefix,e.namespaceURI,e.localName);case"flworExpr":return function(e,t){var n=Di(e,"*");if(e=Bi(n[n.length-1],"*"),1<(n=n.slice(0,-1)).length&&!t.aa)throw Error("XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed");return n.reduceRight((function(e,n){switch(n[0]){case"forClause":for(var r=(n=Di(n,"*")).length-1;0<=r;--r){var i=n[r],o=Mi(i,["forExpr","*"]),s=Bi(i,"positionalVariableBinding");e=new Lo(Ri(Mi(i,["typedVariableBinding","varName"])),ka(o,_a(t)),s?Ri(s):null,e)}return e;case"letClause":for(r=(n=Di(n,"*")).length-1;0<=r;--r)o=Mi(i=n[r],["letExpr","*"]),e=new $o(Ri(Mi(i,["typedVariableBinding","varName"])),ka(o,_a(t)),e);return e;case"whereClause":for(r=(n=Di(n,"*")).length-1;0<=r;--r)e=new Ms(ka(n[r],t),e);return e;case"windowClause":case"groupByClause":case"countClause":throw Error("Not implemented: "+n[0]+" is not implemented yet.");case"orderByClause":return function(e,t,n){return new vs((e=Di(e,"*")).filter((function(e){return"stable"!==e[0]})).map((function(e){var n=Bi(e,"orderModifier"),r=n?Bi(n,"orderingKind"):null;return n=n?Bi(n,"emptyOrderingMode"):null,r=!r||"ascending"===Ii(r),n=!n||"empty least"===Ii(n),{da:ka(Mi(e,["orderByExpr","*"]),t),Ib:r,Bc:n}})),n)}(n,t,e);default:throw Error("Not implemented: "+n[0]+" is not supported in a flwor expression")}}),ka(e,t))}(e,t);case"quantifiedExpr":return function(e,t){var n=Pi(e,"type"),r=Ii(Bi(e,"quantifier")),i=Mi(e,["predicateExpr","*"]);return e=Di(e,"quantifiedExprInClause").map((function(e){return{name:Ri(Mi(e,["typedVariableBinding","varName"])),gb:ka(e=Mi(e,["sourceExpr","*"]),_a(t))}})),new Ss(r,e,ka(i,_a(t)),n)}(e,t);case"ifThenElseExpr":return n=Pi(e,"type"),new No(ka(Bi(Bi(e,"ifClause"),"*"),_a(t)),ka(Bi(Bi(e,"thenClause"),"*"),t),ka(Bi(Bi(e,"elseClause"),"*"),t),n);case"instanceOfExpr":return n=ka(Mi(e,["argExpr","*"]),t),r=Mi(e,["sequenceType","*"]),i=Mi(e,["sequenceType","occurrenceIndicator"]),e=Pi(e,"type"),new ps(n,ka(r,_a(t)),i?Ii(i):"",e);case"castExpr":return t=ka(Bi(Bi(e,"argExpr"),"*"),_a(t)),n=Bi(e,"singleType"),new cs(t,e=Ri(Bi(n,"atomicType")),n=null!==Bi(n,"optional"));case"castableExpr":return t=ka(Bi(Bi(e,"argExpr"),"*"),_a(t)),n=Bi(e,"singleType"),new us(t,e=Ri(Bi(n,"atomicType")),n=null!==Bi(n,"optional"));case"simpleMapExpr":return function(e,t){var n=Pi(e,"type");return Di(e,"*").reduce((function(e,r){return null===e?ka(r,_a(t)):new ls(e,ka(r,_a(t)),n)}),null)}(e,t);case"mapConstructor":return function(e,t){var n=Pi(e,"type");return new Go(Di(e,"mapConstructorEntry").map((function(e){return{key:ka(Mi(e,["mapKeyExpr","*"]),_a(t)),value:ka(Mi(e,["mapValueExpr","*"]),_a(t))}})),n)}(e,t);case"arrayConstructor":return function(e,t){var n=Pi(e,"type"),r=Di(e=Bi(e,"*"),"arrayElem").map((function(e){return ka(Bi(e,"*"),_a(t))}));switch(e[0]){case"curlyArray":return new ho(r,n);case"squareArray":return new po(r,n);default:throw Error("Unrecognized arrayType: "+e[0])}}(e,t);case"unaryLookup":return n=Pi(e,"type"),new Cs(Sa(e,t),n);case"typeswitchExpr":return function(e,t){if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Pi(e,"type"),r=ka(Bi(Bi(e,"argExpr"),"*"),t),i=Di(e,"typeswitchExprCaseClause").map((function(e){var n=0===Di(e,"sequenceTypeUnion").length?[Bi(e,"sequenceType")]:Di(Bi(e,"sequenceTypeUnion"),"sequenceType");return{zc:ka(Mi(e,["resultExpr","*"]),t),Nb:n.map((function(e){var n=Bi(e,"occurrenceIndicator");return{Ec:n?Ii(n):"",Mb:ka(Bi(e,"*"),t)}}))}}));return e=ka(Mi(e,["typeswitchExprDefaultClause","resultExpr","*"]),t),new wa(r,i,e,n)}(e,t);case"elementConstructor":return function(e,t){if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Ri(Bi(e,"tagName")),r=Bi(e,"attributeList"),i=r?Di(r,"attributeConstructor").map((function(e){return ka(e,_a(t))})):[];return r=r?Di(r,"namespaceDeclaration").map((function(e){var t=Bi(e,"prefix");return{prefix:t?Ii(t):"",uri:Ii(Bi(e,"uri"))}})):[],e=(e=Bi(e,"elementContent"))?Di(e,"*").map((function(e){return ka(e,_a(t))})):[],new fa(n,i,r,e)}(e,t);case"attributeConstructor":return function(e,t){if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Ri(Bi(e,"attributeName")),r=Bi(e,"attributeValue");return r=r?Ii(r):null,e=(e=Bi(e,"attributeValueExpr"))?Di(e,"*").map((function(e){return ka(e,_a(t))})):null,new pa(n,{value:r,vb:e})}(e,t);case"computedAttributeConstructor":return(n=Bi(e,"tagName"))?n=Ri(n):(n=Bi(e,"tagNameExpr"),n={Ma:ka(Bi(n,"*"),_a(t))}),new pa(n,{vb:[e=ka(Bi(Bi(e,"valueExpr"),"*"),_a(t))]});case"computedCommentConstructor":if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new da(e=(e=Bi(e,"argExpr"))?ka(Bi(e,"*"),_a(t)):null);case"computedTextConstructor":if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new va(e=(e=Bi(e,"argExpr"))?ka(Bi(e,"*"),_a(t)):null);case"computedElementConstructor":return function(e,t){var n=Bi(e,"tagName");return n?n=Ri(n):(n=Bi(e,"tagNameExpr"),n={Ma:ka(Bi(n,"*"),_a(t))}),e=(e=Bi(e,"contentExpr"))?Di(e,"*").map((function(e){return ka(e,_a(t))})):[],new fa(n,[],[],e)}(e,t);case"computedPIConstructor":if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return n=Bi(e,"piTargetExpr"),r=Bi(e,"piTarget"),i=Bi(e,"piValueExpr"),e=Pi(e,"type"),new ya({Eb:n?ka(Bi(n,"*"),_a(t)):null,Lb:r?Ii(r):null},i?ka(Bi(i,"*"),_a(t)):new as([],e));case"CDataSection":return new Ho(Ii(e),{type:1,g:3});case"deleteExpr":return new Ys(e=ka(Mi(e,["targetExpr","*"]),t));case"insertExpr":switch(n=ka(Mi(e,["sourceExpr","*"]),t),(i=Di(e,"*")[1])[0]){case"insertAfter":r=1;break;case"insertBefore":r=2;break;case"insertInto":r=(r=Bi(i,"*"))?"insertAsFirst"===r[0]?4:5:3}return new Js(n,r,e=ka(Mi(e,["targetExpr","*"]),t));case"renameExpr":return new sa(n=ka(Mi(e,["targetExpr","*"]),t),e=ka(Mi(e,["newNameExpr","*"]),t));case"replaceExpr":return new aa(n=!!Bi(e,"replaceValue"),r=ka(Mi(e,["targetExpr","*"]),t),e=ka(Mi(e,["replacementExpr","*"]),t));case"transformExpr":return function(e,t){var n=Di(Bi(e,"transformCopies"),"transformCopy").map((function(e){var n=Ri(Bi(Bi(e,"varRef"),"name"));return{gb:ka(Bi(Bi(e,"copySource"),"*"),t),Pb:new ve(n.prefix,n.namespaceURI,n.localName)}})),r=ka(Bi(Bi(e,"modifyExpr"),"*"),t);return e=ka(Bi(Bi(e,"returnExpr"),"*"),t),new ca(n,r,e)}(e,t);case"x:stackTrace":for(n=e[1],e=e[2];"x:stackTrace"===e[0];)e=e[2];return new Mo(n,e[0],ka(e,t));default:return Ea(e)}}function Ea(e){switch(e[0]){case"nameTest":return new Ns(Ri(e));case"piTest":return(e=Bi(e,"piTarget"))?new Bs(Ii(e)):new Ts(7);case"commentTest":return new Ts(8);case"textTest":return new Ts(3);case"documentTest":return new Ts(9);case"attributeTest":var t=(e=Bi(e,"attributeName"))&&Bi(e,"star");return!e||t?new Ts(2):new Ns(Ri(Bi(e,"QName")),{kind:2});case"elementTest":return t=(e=Bi(e,"elementName"))&&Bi(e,"star"),!e||t?new Ts(1):new Ns(Ri(Bi(e,"QName")),{kind:1});case"anyKindTest":return new Is({prefix:"",namespaceURI:null,localName:"node()"});case"anyMapTest":return new Is({prefix:"",namespaceURI:null,localName:"map(*)"});case"anyArrayTest":return new Is({prefix:"",namespaceURI:null,localName:"array(*)"});case"Wildcard":return Bi(e,"star")?(t=Bi(e,"uri"))?e=new Ns({localName:"*",namespaceURI:Ii(t),prefix:""}):(t=Bi(e,"NCName"),e="star"===Bi(e,"*")[0]?new Ns({localName:Ii(t),namespaceURI:null,prefix:"*"}):new Ns({localName:"*",namespaceURI:null,prefix:Ii(t)})):e=new Ns({localName:"*",namespaceURI:null,prefix:"*"}),e;case"atomicType":return new Is(Ri(e));case"anyItemType":return new Is({prefix:"",namespaceURI:null,localName:"item()"});default:throw Error("No selector counterpart for: "+e[0]+".")}}function Ca(e,t,n){var r=[];return function t(i){var o=Bi(Bi(i,"firstOperand"),"*");i=Bi(Bi(i,"secondOperand"),"*"),o[0]===e?t(o):r.push(ka(o,n)),i[0]===e?t(i):r.push(ka(i,n))}(t),r}function Sa(e,t){switch((e=Bi(e,"*"))[0]){case"NCName":return new Ho(Ii(e),{type:1,g:3});case"star":return"*";default:return ka(e,_a(t))}}function Oa(e,t,n){var r=Mi(t,["firstOperand","*"]),i=Mi(t,["secondOperand","*"]);switch(r=ka(r,_a(n)),n=ka(i,_a(n)),e){case"valueCompare":return new Jo(t[0],r,n);case"nodeCompare":return new is(t[0],r,n);case"generalCompare":return new ns(t[0],r,n)}}function Ta(e,t){return ka(e,t)}var Na=new Map;function Ba(e,t,n,r,i,o){this.j=e,this.u=t,this.h=n,this.A=r,this.s=i,this.O=o}function Ia(e,t,n,r,i,o,s){var a=Na.get(e);a||(a=Object.create(null),Na.set(e,a)),(t=a[e=t+(o?"_DEBUG":"")])||(t=a[e]=[]),t.push(new Ba(Object.values(n.h),Object.values(n.s),i,Object.keys(r).map((function(e){return{namespaceURI:r[e],prefix:e}})),s,n.j))}function Pa(e){var t=new _e;if("http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://fontoxml.com/fontoxpath"!==e.namespaceURI&&"http://www.w3.org/2007/xquery-update-10"!==e.namespaceURI)throw Tt("The XML structure passed as an XQueryX program was not valid XQueryX");var n=["stackTrace"===e.localName?"x:stackTrace":e.localName],r=t.getAllAttributes(e);for(r&&0<r.length&&n.push(Array.from(r).reduce((function(t,n){return"start"===n.localName||"end"===n.localName&&"stackTrace"===e.localName?t[n.localName]=JSON.parse(n.value):"type"===n.localName?t[n.localName]=ue(n.value):t[n.localName]=n.value,t}),{})),r=(t=u(t=t.getChildNodes(e))).next();!r.done;r=t.next())switch(r=r.value,r.nodeType){case 1:n.push(Pa(r));break;case 3:n.push(r.data)}return n}var Ma=Object.create(null);function Da(e,t){var n=Ma[e];n||(n=Ma[e]={Oa:[],Wa:[]}),n.Oa=n.Oa.concat(t.Oa),n.Wa=n.Wa.concat(t.Wa)}function Ra(e,t){var n=Ma[t];if(!n)throw Error("XQST0051: No modules found with the namespace uri "+t);n.Oa.forEach((function(n){return Ci(e,t,n.localName,n.arity,n.Gb)})),n.Wa.forEach((function(n){Oi(e,t,n.localName),Ti(e,t,n.localName,(function(e,t){return pr(n.da,e,t)}))}))}function Fa(e){return e.replace(/(\x0D\x0A)|(\x0D(?!\x0A))/g,String.fromCharCode(10))}var La=t;function Ua(e,t){return function(n,r){return t.has(r)?t.get(r):(n=e(n,r),t.set(r,n),n)}}function $a(e,t){return La.delimited(t,e,t)}function Ha(e,t){return e.reverse().reduce((function(e,t){return La.preceded(t,e)}),t)}function Ga(e,t,n,r){return La.then(La.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=u(e);return e=n.next().value,n=n.next().value,r(e,n,t)}))}function ja(e,t,n,r,i){return La.then(La.then(La.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=u(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=u(e);e=n.next().value;var r=n.next().value;return n=n.next().value,i(e,r,n,t)}))}function za(e){return La.map(e,(function(e){return[e]}))}function Va(e,t){return La.map(La.or(e),(function(){return t}))}function Xa(e){return function(t,n){return(t=e.exec(t.substring(n)))&&0===t.index?La.okWithValue(n+t[0].length,t[0]):La.error(n,[e.source],!1)}}var qa=La.or([La.token(" "),La.token("\t"),La.token("\r"),La.token("\n")]),Wa=La.token("(:"),Ya=La.token(":)"),Qa=La.token("(#"),Ka=La.token("#)"),Za=La.token("("),Ja=La.token(")"),el=La.token("["),tl=La.token("]"),nl=La.token("{"),rl=La.token("}"),il=La.token("{{"),ol=La.token("}}"),sl=La.token("'"),al=La.token("''"),ll=La.token('"'),ul=La.token('""'),cl=La.token("<![CDATA["),hl=La.token("]]>"),pl=La.token("/>"),dl=La.token("</"),fl=La.token("\x3c!--"),ml=La.token("--\x3e"),gl=La.token("<?"),yl=La.token("?>"),vl=La.token("&#x"),wl=La.token("&#"),bl=La.token(":*"),xl=La.token("*:"),Al=La.token(":="),_l=La.token("&"),kl=La.token(":"),El=La.token(";"),Cl=La.token("*"),Sl=La.token("@"),Ol=La.token("$"),Tl=La.token("#"),Nl=La.token("%"),Bl=La.token("?"),Il=La.token("!"),Pl=La.token("|"),Ml=La.token("||"),Dl=La.token("="),Rl=La.token("!="),Fl=La.token("<"),Ll=La.token("<<"),Ul=La.token("<="),$l=La.token(">"),Hl=La.token(">>"),Gl=La.token(">="),jl=La.token(","),zl=La.token("."),Vl=La.token(".."),Xl=La.token("+"),ql=La.token("-"),Wl=La.token("/"),Yl=La.token("//"),Ql=La.token("=>"),Kl=La.token("e"),Zl=La.token("E"),Jl=La.token("l"),eu=La.token("L"),tu=La.token("m"),nu=La.token("M"),ru=La.token("Q"),iu=La.token("x"),ou=La.token("X"),su=La.token("as"),au=La.token("cast"),lu=La.token("castable"),uu=La.token("treat"),cu=La.token("instance"),hu=La.token("of"),pu=La.token("node"),du=La.token("nodes"),fu=La.token("delete"),mu=La.token("value"),gu=La.token("function"),yu=La.token("map"),vu=La.token("element"),wu=La.token("attribute"),bu=La.token("schema-element"),xu=La.token("intersect"),Au=La.token("except"),_u=La.token("union"),ku=La.token("to"),Eu=La.token("is"),Cu=La.token("or"),Su=La.token("and"),Ou=La.token("div"),Tu=La.token("idiv"),Nu=La.token("mod"),Bu=La.token("eq"),Iu=La.token("ne"),Pu=La.token("lt"),Mu=La.token("le"),Du=La.token("gt"),Ru=La.token("ge"),Fu=La.token("amp"),Lu=La.token("quot"),Uu=La.token("apos"),$u=La.token("if"),Hu=La.token("then"),Gu=La.token("else"),ju=La.token("allowing"),zu=La.token("empty"),Vu=La.token("at"),Xu=La.token("in"),qu=La.token("for"),Wu=La.token("let"),Yu=La.token("where"),Qu=La.token("collation"),Ku=La.token("group"),Zu=La.token("by"),Ju=La.token("order"),ec=La.token("stable"),tc=La.token("return"),nc=La.token("array"),rc=La.token("document"),ic=La.token("namespace"),oc=La.token("text"),sc=La.token("comment"),ac=La.token("processing-instruction"),lc=La.token("lax"),uc=La.token("strict"),cc=La.token("validate"),hc=La.token("type"),pc=La.token("declare"),dc=La.token("default"),fc=La.token("boundary-space"),mc=La.token("strip"),gc=La.token("preserve"),yc=La.token("no-preserve"),vc=La.token("inherit"),wc=La.token("no-inherit"),bc=La.token("greatest"),xc=La.token("least"),Ac=La.token("copy-namespaces"),_c=La.token("decimal-format"),kc=La.token("case"),Ec=La.token("typeswitch"),Cc=La.token("some"),Sc=La.token("every"),Oc=La.token("satisfies"),Tc=La.token("replace"),Nc=La.token("with"),Bc=La.token("copy"),Ic=La.token("modify"),Pc=La.token("first"),Mc=La.token("last"),Dc=La.token("before"),Rc=La.token("after"),Fc=La.token("into"),Lc=La.token("insert"),Uc=La.token("rename"),$c=La.token("switch"),Hc=La.token("variable"),Gc=La.token("external"),jc=La.token("updating"),zc=La.token("import"),Vc=La.token("schema"),Xc=La.token("module"),qc=La.token("base-uri"),Wc=La.token("construction"),Yc=La.token("ordering"),Qc=La.token("ordered"),Kc=La.token("unordered"),Zc=La.token("option"),Jc=La.token("context"),eh=La.token("item"),th=La.token("xquery"),nh=La.token("version"),rh=La.token("encoding"),ih=La.token("document-node"),oh=La.token("namespace-node"),sh=La.token("schema-attribute"),ah=La.token("ascending"),lh=La.token("descending"),uh=La.token("empty-sequence"),ch=La.token("child::"),hh=La.token("descendant::"),ph=La.token("attribute::"),dh=La.token("self::"),fh=La.token("descendant-or-self::"),mh=La.token("following-sibling::"),gh=La.token("following::"),yh=La.token("parent::"),vh=La.token("ancestor::"),wh=La.token("preceding-sibling::"),bh=La.token("preceding::"),xh=La.token("ancestor-or-self::"),Ah=La.token("decimal-separator"),_h=La.token("grouping-separator"),kh=La.token("infinity"),Eh=La.token("minus-sign"),Ch=La.token("NaN"),Sh=La.token("per-mille"),Oh=La.token("zero-digit"),Th=La.token("digit"),Nh=La.token("pattern-separator"),Bh=La.token("exponent-separator"),Ih=La.token("schema-attribute("),Ph=La.token("document-node("),Mh=La.token("processing-instruction("),Dh=La.token("processing-instruction()"),Rh=La.token("comment()"),Fh=La.token("text()"),Lh=La.token("namespace-node()"),Uh=La.token("node()"),$h=La.token("item()"),Hh=La.token("empty-sequence()"),Gh=new Map,jh=new Map,zh=La.or([Xa(/[\t\n\r -\uD7FF\uE000\uFFFD]/),Xa(/[\uD800-\uDBFF][\uDC00-\uDFFF]/)]),Vh=La.preceded(La.peek(La.not(La.or([Wa,Ya]),['comment contents cannot contain "(:" or ":)"'])),zh),Xh=La.map(La.delimited(Wa,La.star(La.or([Vh,function(e,t){return Xh(e,t)}])),Ya),(function(e){return e.join("")})),qh=La.or([qa,Xh]),Wh=La.map(La.plus(qa),(function(e){return e.join("")})),Yh=Ua(La.map(La.star(qh),(function(e){return e.join("")})),Gh),Qh=Ua(La.map(La.plus(qh),(function(e){return e.join("")})),jh),Kh=La.or([Xa(/[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),La.then(Xa(/[\uD800-\uDB7F]/),Xa(/[\uDC00-\uDFFF]/),(function(e,t){return e+t}))]),Zh=La.or([Kh,Xa(/[\-\.0-9\xB7\u0300-\u036F\u203F\u2040]/)]),Jh=La.then(Kh,La.star(Zh),(function(e,t){return e+t.join("")})),ep=La.map(Jh,(function(e){return["prefix",e]})),tp=La.or([Kh,kl]),np=La.or([Zh,kl]),rp=La.then(tp,La.star(np),(function(e,t){return e+t.join("")})),ip=La.map(Jh,(function(e){var t={};return[(t.prefix="",t.URI=null,t),e]})),op=La.then(Jh,La.preceded(kl,Jh),(function(e,t){var n={};return[(n.prefix=e,n.URI=null,n),t]})),sp=La.or([op,ip]),ap=La.followed(Ha([ru,Yh,nl],La.map(La.star(Xa(/[^{}]/)),(function(e){return e.join("").replace(/\s+/g," ").trim()}))),rl),lp=La.then(ap,Jh,(function(e,t){return[e,t]})),up=La.or([La.map(lp,(function(e){var t={};return[(t.prefix=null,t.URI=e[0],t),e[1]]})),sp]),cp=La.or([La.map(up,(function(e){return["QName"].concat(h(e))})),La.map(Cl,(function(){return["star"]}))]),hp=La.map(La.preceded(Ol,up),(function(e){return["varRef",["name"].concat(h(e))]})),pp=La.peek(La.or([Za,ll,sl,qh])),dp=La.map(La.or([ch,hh,ph,dh,fh,mh,gh]),(function(e){return e.substring(0,e.length-2)})),fp=La.map(La.or([yh,vh,wh,bh,xh]),(function(e){return e.substring(0,e.length-2)})),mp=Ga(_l,La.or([Pu,Du,Fu,Lu,Uu]),El,(function(e,t,n){return e+t+n})),gp=La.or([Ga(vl,Xa(/[0-9a-fA-F]+/),El,(function(e,t,n){return e+t+n})),Ga(wl,Xa(/[0-9]+/),El,(function(e,t,n){return e+t+n}))]),yp=Va([ul],'"'),vp=Va([al],"'"),wp=za(Va([Rh],"commentTest")),bp=za(Va([Fh],"textTest")),xp=za(Va([Lh],"namespaceTest")),Ap=za(Va([Uh],"anyKindTest")),_p=Xa(/[0-9]+/),kp=La.then(La.or([La.then(zl,_p,(function(e,t){return e+t})),La.then(_p,La.optional(La.preceded(zl,Xa(/[0-9]*/))),(function(e,t){return e+(null!==t?"."+t:"")}))]),Ga(La.or([Kl,Zl]),La.optional(La.or([Xl,ql])),_p,(function(e,t,n){return e+(t||"")+n})),(function(e,t){return["doubleConstantExpr",["value",e+t]]})),Ep=La.or([La.map(La.preceded(zl,_p),(function(e){return["decimalConstantExpr",["value","."+e]]})),La.then(La.followed(_p,zl),La.optional(_p),(function(e,t){return["decimalConstantExpr",["value",e+"."+(null!==t?t:"")]]}))]),Cp=La.map(_p,(function(e){return["integerConstantExpr",["value",e]]})),Sp=La.followed(La.or([kp,Ep,Cp]),La.peek(La.not(Xa(/[a-zA-Z]/),["no alphabetical characters after numeric literal"]))),Op=La.map(La.followed(zl,La.peek(La.not(zl,["context item should not be followed by another ."]))),(function(){return["contextItemExpr"]})),Tp=La.or([nc,wu,sc,ih,vu,uh,gu,$u,eh,yu,oh,pu,ac,sh,bu,$c,oc,Ec]),Np=za(Va([Bl],"argumentPlaceholder")),Bp=La.or([Bl,Cl,Xl]),Ip=La.preceded(La.peek(La.not(Xa(/[{}<&]/),["elementContentChar cannot be {, }, <, or &"])),zh),Pp=La.map(La.delimited(cl,La.star(La.preceded(La.peek(La.not(hl,['CDataSection content may not contain "]]>"'])),zh)),hl),(function(e){return["CDataSection",e.join("")]})),Mp=La.preceded(La.peek(La.not(Xa(/["{}<&]/),['quotAttrValueContentChar cannot be ", {, }, <, or &'])),zh),Dp=La.preceded(La.peek(La.not(Xa(/['{}<&]/),["aposAttrValueContentChar cannot be ', {, }, <, or &"])),zh),Rp=La.map(La.star(La.or([La.preceded(La.peek(La.not(ql,[])),zh),La.map(Ha([ql,La.peek(La.not(ql,[]))],zh),(function(e){return"-"+e}))])),(function(e){return e.join("")})),Fp=La.map(La.delimited(fl,Rp,ml),(function(e){return["computedCommentConstructor",["argExpr",["stringConstantExpr",["value",e]]]]})),Lp=La.preceded(La.peek(La.not(Ga(La.or([ou,iu]),La.or([nu,tu]),La.or([eu,Jl]),(function(){return[]})),[])),rp),Up=La.map(La.star(La.preceded(La.peek(La.not(yl,[])),zh)),(function(e){return e.join("")})),$p=La.then(La.preceded(gl,Lp),La.followed(La.optional(La.preceded(Wh,Up)),yl),(function(e,t){return["computedPIConstructor",["piTarget",e],["piValueExpr",["stringConstantExpr",["value",t]]]]})),Hp=La.map(Yl,(function(){return["stepExpr",["xpathAxis","descendant-or-self"],["anyKindTest"]]})),Gp=La.or([lc,uc]),jp=La.map(La.star(La.followed(zh,La.peek(La.not(Ka,["Pragma contents should not contain '#)'"])))),(function(e){return e.join("")})),zp=La.map(La.followed(La.or([Bu,Iu,Pu,Mu,Du,Ru]),pp),(function(e){return e+"Op"})),Vp=La.or([La.followed(Va([Eu],"isOp"),pp),Va([Ll],"nodeBeforeOp"),Va([Hl],"nodeAfterOp")]),Xp=La.or([Va([Dl],"equalOp"),Va([Rl],"notEqualOp"),Va([Ul],"lessThanOrEqualOp"),Va([Fl],"lessThanOp"),Va([Gl],"greaterThanOrEqualOp"),Va([$l],"greaterThanOp")]),qp=La.map(jc,(function(){return["annotation",["annotationName","updating"]]})),Wp=La.or([gc,yc]),Yp=La.or([vc,wc]),Qp=La.or([Ah,_h,kh,Eh,Ch,Nl,Sh,Oh,Th,Nh,Bh]),Kp=La.map(Ha([pc,Qh,fc,Qh],La.or([gc,mc])),(function(e){return["boundarySpaceDecl",e]})),Zp=La.map(Ha([pc,Qh,Wc,Qh],La.or([gc,mc])),(function(e){return["constructionDecl",e]})),Jp=La.map(Ha([pc,Qh,Yc,Qh],La.or([Qc,Kc])),(function(e){return["orderingModeDecl",e]})),ed=La.map(Ha([pc,Qh,dc,Qh,Ju,Qh,zu,Qh],La.or([bc,xc])),(function(e){return["emptyOrderDecl",e]})),td=La.then(Ha([pc,Qh,Ac,Qh],Wp),Ha([Yh,jl,Yh],Yp),(function(e,t){return["copyNamespacesDecl",["preserveMode",e],["inheritMode",t]]}));function nd(e){switch(e[0]){case"constantExpr":case"varRef":case"contextItemExpr":case"functionCallExpr":case"sequenceExpr":case"elementConstructor":case"computedElementConstructor":case"computedAttributeConstructor":case"computedDocumentConstructor":case"computedTextConstructor":case"computedCommentConstructor":case"computedNamespaceConstructor":case"computedPIConstructor":case"orderedExpr":case"unorderedExpr":case"namedFunctionRef":case"inlineFunctionExpr":case"dynamicFunctionInvocationExpr":case"mapConstructor":case"arrayConstructor":case"stringConstructor":case"unaryLookup":return e}return["sequenceExpr",e]}function rd(e){if(!(1<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e))throw Error("XQST0090: The character reference "+e+" ("+e.toString(16)+") does not reference a valid codePoint.")}function id(e){return e.replace(/(&[^;]+);/g,(function(e){if(/^&#x/.test(e))return rd(e=parseInt(e.slice(3,-1),16)),String.fromCodePoint(e);if(/^&#/.test(e))return rd(e=parseInt(e.slice(2,-1),10)),String.fromCodePoint(e);switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return String.fromCharCode(34);case"&apos;":return String.fromCharCode(39)}throw Error('XPST0003: Unknown character reference: "'+e+'"')}))}function od(e,t,n){if(!e.length)return[];for(var r=[e[0]],i=1;i<e.length;++i){var o=r[r.length-1];"string"==typeof o&&"string"==typeof e[i]?r[r.length-1]=o+e[i]:r.push(e[i])}if("string"==typeof r[0]&&0===r.length)return[];if(r=r.reduce((function(e,t,i){if("string"!=typeof t)e.push(t);else if(n&&/^\s*$/.test(t)){var o=r[i+1];(o&&"CDataSection"===o[0]||(i=r[i-1])&&"CDataSection"===i[0])&&e.push(id(t))}else e.push(id(t));return e}),[]),!r.length)return r;if(1<r.length||t)for(e=0;e<r.length;e++)"string"==typeof r[e]&&(r[e]=["stringConstantExpr",["value",r[e]]]);return r}function sd(e){return e[0].prefix?e[0].prefix+":"+e[1]:e[1]}var ad=La.then(up,La.optional(Bl),(function(e,t){return null!==t?["singleType",["atomicType"].concat(h(e)),["optional"]]:["singleType",["atomicType"].concat(h(e))]})),ld=La.map(up,(function(e){return["atomicType"].concat(h(e))})),ud=new Map;function cd(e){function t(e,t){return t.reduce((function(e,t){return[t[0],["firstOperand",e],["secondOperand",t[1]]]}),e)}function n(e,t,n){return La.then(e,La.star(La.then($a(t,Yh),e,(function(e,t){return[e,t]}))),n)}function r(e,t,n,r){return n=void 0===n?"firstOperand":n,r=void 0===r?"secondOperand":r,La.then(e,La.optional(La.then($a(t,Yh),e,(function(e,t){return[e,t]}))),(function(e,t){return null===t?e:[t[0],[n,e],[r,t[1]]]}))}function i(t){return e.ub?function(e,n){if(!(e=t(e,n)).success)return e;var r=c.has(n)?c.get(n):{offset:n,line:-1,la:-1},i=c.has(e.offset)?c.get(e.offset):{offset:e.offset,line:-1,la:-1};return c.set(n,r),c.set(e.offset,i),La.okWithValue(e.offset,["x:stackTrace",{start:r,end:i},e.value])}:t}function o(e,t){return K(e,t)}function s(e,t){return Ue(e,t)}function a(e,t){return i(La.or([St,Pt,Gt,Nt,at,Ut,Mt,$t,Dt,Ft,st]))(e,t)}function l(e,t){return n(a,jl,(function(e,t){return 0===t.length?e:["sequenceExpr",e].concat(h(t.map((function(e){return e[1]}))))}))(e,t)}var c=new Map,p=La.preceded(el,La.followed($a(l,Yh),tl)),d=La.map(e.Xa?La.or([$a(La.star(La.or([mp,gp,yp,Xa(/[^"&]/)])),ll),$a(La.star(La.or([mp,gp,vp,Xa(/[^'&]/)])),sl)]):La.or([$a(La.star(La.or([yp,Xa(/[^"]/)])),ll),$a(La.star(La.or([vp,Xa(/[^']/)])),sl)]),(function(e){return e.join("")})),f=La.or([La.map(Ha([vu,Yh],La.delimited(La.followed(Za,Yh),La.then(cp,Ha([Yh,jl,Yh],up),(function(e,t){return[["elementName",e],["typeName"].concat(h(t))]})),La.preceded(Yh,Ja))),(function(e){var t=u(e);return["elementTest",e=t.next().value,t=t.next().value]})),La.map(Ha([vu,Yh],La.delimited(Za,cp,Ja)),(function(e){return["elementTest",["elementName",e]]})),La.map(Ha([vu,Yh],La.delimited(Za,Yh,Ja)),(function(){return["elementTest"]}))]),m=La.or([La.map(up,(function(e){return["QName"].concat(h(e))})),La.map(Cl,(function(){return["star"]}))]),g=La.or([La.map(Ha([wu,Yh],La.delimited(La.followed(Za,Yh),La.then(m,Ha([Yh,jl,Yh],up),(function(e,t){return[["attributeName",e],["typeName"].concat(h(t))]})),La.preceded(Yh,Ja))),(function(e){var t=u(e);return["attributeTest",e=t.next().value,t=t.next().value]})),La.map(Ha([wu,Yh],La.delimited(Za,m,Ja)),(function(e){return["attributeTest",["attributeName",e]]})),La.map(Ha([wu,Yh],La.delimited(Za,Yh,Ja)),(function(){return["attributeTest"]}))]),y=La.map(Ha([bu,Yh,Za],La.followed(up,Ja)),(function(e){return["schemaElementTest"].concat(h(e))})),v=La.map(La.delimited(Ih,$a(up,Yh),Ja),(function(e){return["schemaAttributeTest"].concat(h(e))})),w=La.map(La.preceded(Ph,La.followed($a(La.optional(La.or([f,y])),Yh),Ja)),(function(e){return["documentTest"].concat(h(e?[e]:[]))})),b=La.or([La.map(La.preceded(Mh,La.followed($a(La.or([Jh,d]),Yh),Ja)),(function(e){return["piTest",["piTarget",e]]})),za(Va([Dh],"piTest"))]),x=La.or([w,f,g,y,v,b,wp,bp,xp,Ap]),A=La.or([La.map(La.preceded(xl,Jh),(function(e){return["Wildcard",["star"],["NCName",e]]})),za(Va([Cl],"Wildcard")),La.map(La.followed(ap,Cl),(function(e){return["Wildcard",["uri",e],["star"]]})),La.map(La.followed(Jh,bl),(function(e){return["Wildcard",["NCName",e],["star"]]}))]),_=La.or([A,La.map(up,(function(e){return["nameTest"].concat(h(e))}))]),k=La.or([x,_]),E=La.then(La.optional(Sl),k,(function(e,t){return null!==e||"attributeTest"===t[0]||"schemaAttributeTest"===t[0]?["stepExpr",["xpathAxis","attribute"],t]:["stepExpr",["xpathAxis","child"],t]})),C=La.or([La.then(dp,k,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),E]),S=La.map(Vl,(function(){return["stepExpr",["xpathAxis","parent"],["anyKindTest"]]})),O=La.or([La.then(fp,k,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),S]),T=La.map(La.star(La.preceded(Yh,p)),(function(e){return 0<e.length?["predicates"].concat(h(e)):void 0})),N=La.then(La.or([O,C]),T,(function(e,t){return void 0===t?e:e.concat([t])})),B=La.or([Sp,La.map(d,(function(t){return["stringConstantExpr",["value",e.Xa?id(t):t]]}))]),I=La.or([La.delimited(Za,$a(l,Yh),Ja),La.map(La.delimited(Za,Yh,Ja),(function(){return["sequenceExpr"]}))]),P=La.or([a,Np]),M=La.map(La.delimited(Za,$a(La.optional(La.then(P,La.star(La.preceded($a(jl,Yh),P)),(function(e,t){return[e].concat(h(t))}))),Yh),Ja),(function(e){return null!==e?e:[]})),D=La.preceded(La.not(Ga(Tp,Yh,Za,(function(){})),["cannot use reseved keyword for function names"]),La.then(up,La.preceded(Yh,M),(function(e,t){return["functionCallExpr",["functionName"].concat(h(e)),null!==t?["arguments"].concat(h(t)):["arguments"]]}))),R=La.then(up,La.preceded(Tl,Cp),(function(e,t){return["namedFunctionRef",["functionName"].concat(h(e)),t]})),F=La.delimited(nl,$a(La.optional(l),Yh),rl),L=La.map(F,(function(e){return e||["sequenceExpr"]})),U=La.or([La.map(Hh,(function(){return[["voidSequenceType"]]})),La.then(o,La.optional(La.preceded(Yh,Bp)),(function(e,t){return[e].concat(h(null!==t?[["occurrenceIndicator",t]]:[]))}))]),$=La.then(Ha([Nl,Yh],up),La.optional(La.followed(La.then(Ha([Za,Yh],B),La.star(Ha([jl,Yh],B)),(function(e,t){return e.concat(t)})),Ja)),(function(e,t){return["annotation",["annotationName"].concat(h(e))].concat(h(t?["arguments",t]:[]))})),H=La.map(Ha([gu,Yh,Za,Yh,Cl,Yh],Ja),(function(){return["anyFunctionTest"]})),G=La.then(Ha([gu,Yh,Za,Yh],La.optional(n(U,jl,(function(e,t){return e.concat.apply(e,t.map((function(e){return e[1]})))})))),Ha([Yh,Ja,Qh,su,Qh],U),(function(e,t){return["typedFunctionTest",["paramTypeList",["sequenceType"].concat(h(e||[]))],["sequenceType"].concat(h(t))]})),j=La.then(La.star($),La.or([H,G]),(function(e,t){return[t[0]].concat(h(e),h(t.slice(1)))})),z=La.map(Ha([yu,Yh,Za,Yh,Cl,Yh],Ja),(function(){return["anyMapTest"]})),V=La.then(Ha([yu,Yh,Za,Yh],ld),Ha([Yh,jl],La.followed($a(U,Yh),Ja)),(function(e,t){return["typedMapTest",e,["sequenceType"].concat(h(t))]})),X=La.or([z,V]),q=La.map(Ha([nc,Yh,Za,Yh,Cl,Yh],Ja),(function(){return["anyArrayTest"]})),W=La.map(Ha([nc,Yh,Za],La.followed($a(U,Yh),Ja)),(function(e){return["typedArrayTest",["sequenceType"].concat(h(e))]})),Y=La.or([q,W]),Q=La.map(La.delimited(Za,$a(o,Yh),Ja),(function(e){return["parenthesizedItemType",e]})),K=La.or([x,za(Va([$h],"anyItemType")),j,X,Y,ld,Q]),Z=La.map(Ha([su,Qh],U),(function(e){return["typeDeclaration"].concat(h(e))})),J=La.then(La.preceded(Ol,up),La.optional(La.preceded(Qh,Z)),(function(e,t){return["param",["varName"].concat(h(e))].concat(h(t?[t]:[]))})),ee=n(J,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),te=ja(La.star($),Ha([Yh,gu,Yh,Za,Yh],La.optional(ee)),Ha([Yh,Ja,Yh],La.optional(La.map(Ha([su,Yh],La.followed(U,Yh)),(function(e){return["typeDeclaration"].concat(h(e))})))),L,(function(e,t,n,r){return["inlineFunctionExpr"].concat(h(e),[["paramList"].concat(h(t||[]))],h(n?[n]:[]),[["functionBody",r]])})),ne=La.or([R,te]),re=La.map(a,(function(e){return["mapKeyExpr",e]})),ie=La.map(a,(function(e){return["mapValueExpr",e]})),oe=La.then(re,La.preceded($a(kl,Yh),ie),(function(e,t){return["mapConstructorEntry",e,t]})),se=La.preceded(yu,La.delimited($a(nl,Yh),La.map(La.optional(n(oe,$a(jl,Yh),(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),(function(e){return e?["mapConstructor"].concat(h(e)):["mapConstructor"]})),La.preceded(Yh,rl))),ae=La.map(La.delimited(el,$a(La.optional(n(a,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]})))).map((function(e){return["arrayElem",e]}))}))),Yh),tl),(function(e){return["squareArray"].concat(h(null!==e?e:[]))})),le=La.map(La.preceded(nc,La.preceded(Yh,F)),(function(e){return["curlyArray"].concat(h(null!==e?[["arrayElem",e]]:[]))})),ue=La.map(La.or([ae,le]),(function(e){return["arrayConstructor",e]})),ce=La.or([Jh,Cp,I,Cl]),he=La.map(La.preceded(Bl,La.preceded(Yh,ce)),(function(e){return"*"===e?["unaryLookup",["star"]]:"string"==typeof e?["unaryLookup",["NCName",e]]:["unaryLookup",e]})),pe=La.or([mp,gp,Va([il],"{"),Va([ol],"}"),La.map(F,(function(e){return e||["sequenceExpr"]}))]),de=La.or([Pp,function(e,t){return be(e,t)},pe,Ip]),fe=La.or([La.map(Mp,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),pe]),me=La.or([La.map(Dp,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),pe]),ge=La.map(La.or([$a(La.star(La.or([yp,fe])),ll),$a(La.star(La.or([vp,me])),sl)]),(function(e){return od(e,!1,!1)})),ye=La.then(sp,La.preceded($a(Dl,La.optional(Wh)),ge),(function(e,t){if(""===e[0].prefix&&"xmlns"===e[1]){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: A namespace declaration may not contain enclosed expressions");return["namespaceDeclaration",t.length?["uri",t[0]]:["uri"]]}if("xmlns"===e[0].prefix){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: The namespace declaration for 'xmlns:"+e[1]+"' may not contain enclosed expressions");return["namespaceDeclaration",["prefix",e[1]],t.length?["uri",t[0]]:["uri"]]}return["attributeConstructor",["attributeName"].concat(e),0===t.length?["attributeValue"]:1===t.length&&"string"==typeof t[0]?["attributeValue",t[0]]:["attributeValueExpr"].concat(t)]})),ve=La.map(La.star(La.preceded(Wh,La.optional(ye))),(function(e){return e.filter(Boolean)})),we=Ga(La.preceded(Fl,sp),ve,La.or([La.map(pl,(function(){return null})),La.then(La.preceded($l,La.star(de)),Ha([Yh,dl],La.followed(sp,La.then(La.optional(Wh),$l,(function(){return null})))),(function(e,t){return[od(e,!0,!0),t]}))]),(function(e,t,n){var r=n;if(n&&n.length){r=sd(e);var i=sd(n[1]);if(r!==i)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. "'+r+'" does not match "'+i+'"');r=n[0]}return["elementConstructor",["tagName"].concat(h(e))].concat(h(t.length?[["attributeList"].concat(h(t))]:[]),h(r&&r.length?[["elementContent"].concat(h(r))]:[]))})),be=La.or([we,Fp,$p]),xe=La.map(Ha([rc,Yh],F),(function(e){return["computedDocumentConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Ae=La.map(F,(function(e){return e?[["contentExpr",e]]:[]})),_e=La.then(Ha([vu,Yh],La.or([La.map(up,(function(e){return["tagName"].concat(h(e))})),La.map(La.delimited(nl,$a(l,Yh),rl),(function(e){return["tagNameExpr",e]}))])),La.preceded(Yh,Ae),(function(e,t){return["computedElementConstructor",e].concat(h(t))})),ke=La.then(La.preceded(wu,La.or([La.map(Ha([pp,Yh],up),(function(e){return["tagName"].concat(h(e))})),La.map(La.preceded(Yh,La.delimited(nl,$a(l,Yh),rl)),(function(e){return["tagNameExpr",e]}))])),La.preceded(Yh,F),(function(e,t){return["computedAttributeConstructor",e,["valueExpr",t||["sequenceExpr"]]]})),Ee=La.map(F,(function(e){return e?[["prefixExpr",e]]:[]})),Ce=La.map(F,(function(e){return e?[["URIExpr",e]]:[]})),Se=La.then(Ha([ic,Yh],La.or([ep,Ee])),La.preceded(Yh,Ce),(function(e,t){return["computedNamespaceConstructor"].concat(h(e),h(t))})),Oe=La.map(Ha([oc,Yh],F),(function(e){return["computedTextConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Te=La.map(Ha([sc,Yh],F),(function(e){return["computedCommentConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Ne=Ha([ac,Yh],La.then(La.or([La.map(Jh,(function(e){return["piTarget",e]})),La.map(La.delimited(nl,$a(l,Yh),rl),(function(e){return["piTargetExpr",e]}))]),La.preceded(Yh,F),(function(e,t){return["computedPIConstructor",e].concat(h(t?[["piValueExpr",t]]:[]))}))),Be=La.or([xe,_e,ke,Se,Oe,Te,Ne]),Ie=La.or([be,Be]),Pe=La.or([B,hp,I,Op,D,Ie,ne,se,ue,he]),Me=La.map(Ha([Bl,Yh],ce),(function(e){return"*"===e?["lookup",["star"]]:"string"==typeof e?["lookup",["NCName",e]]:["lookup",e]})),De=La.then(La.map(Pe,(function(e){return nd(e)})),La.star(La.or([La.map(La.preceded(Yh,p),(function(e){return["predicate",e]})),La.map(La.preceded(Yh,M),(function(e){return["argumentList",e]})),La.preceded(Yh,Me)])),(function(e,t){function n(){a&&1===o.length?s.push(["predicate",o[0]]):0!==o.length&&s.push(["predicates"].concat(h(o))),o.length=0}function r(e){n(),0!==s.length?("sequenceExpr"===i[0][0]&&2<i[0].length&&(i=[["sequenceExpr"].concat(h(i))]),i=[["filterExpr"].concat(h(i))].concat(h(s)),s.length=0):e&&(i=[["filterExpr"].concat(h(i))])}var i=[e],o=[],s=[],a=!1;for(t=(e=u(t)).next();!t.done;t=e.next())switch(t=t.value,t[0]){case"predicate":o.push(t[1]);break;case"lookup":a=!0,n(),s.push(t);break;case"argumentList":r(!1),1<i.length&&(i=[["sequenceExpr",["pathExpr",["stepExpr"].concat(h(i))]]]),i=[["dynamicFunctionInvocationExpr",["functionItem"].concat(h(i))].concat(h(t[1].length?[["arguments"].concat(h(t[1]))]:[]))];break;default:throw Error("unreachable")}return r(!0),i})),Re=La.or([La.map(De,(function(e){return["stepExpr"].concat(h(e))})),N]),Fe=La.followed(Pe,La.peek(La.not(La.preceded(Yh,La.or([p,M,Me])),["primary expression not followed by predicate, argumentList, or lookup"]))),Le=La.or([Ga(Re,La.preceded(Yh,Hp),La.preceded(Yh,s),(function(e,t,n){return["pathExpr",e,t].concat(h(n))})),La.then(Re,La.preceded($a(Wl,Yh),s),(function(e,t){return["pathExpr",e].concat(h(t))})),Fe,La.map(Re,(function(e){return["pathExpr",e]}))]),Ue=La.or([Ga(Re,La.preceded(Yh,Hp),La.preceded(Yh,s),(function(e,t,n){return[e,t].concat(h(n))})),La.then(Re,La.preceded($a(Wl,Yh),s),(function(e,t){return[e].concat(h(t))})),La.map(Re,(function(e){return[e]}))]),$e=La.or([La.map(Ha([Wl,Yh],Ue),(function(e){return["pathExpr",["rootExpr"]].concat(h(e))})),La.then(Hp,La.preceded(Yh,Ue),(function(e,t){return["pathExpr",["rootExpr"],e].concat(h(t))})),La.map(La.followed(Wl,La.not(La.preceded(Yh,e.Xa?Xa(/[*<a-zA-Z]/):Xa(/[*a-zA-Z]/)),["Single rootExpr cannot be by followed by something that can be interpreted as a relative path"])),(function(){return["pathExpr",["rootExpr"]]}))]),He=Ua(La.or([Le,$e]),ud),Ge=La.preceded(cc,La.then(La.optional(La.or([La.map(La.preceded(Yh,Gp),(function(e){return["validationMode",e]})),La.map(Ha([Yh,hc,Yh],up),(function(e){return["type"].concat(h(e))}))])),La.delimited(La.preceded(Yh,nl),$a(l,Yh),rl),(function(e,t){return["validateExpr"].concat(h(e?[e]:[]),[["argExpr",t]])}))),je=La.delimited(Qa,La.then(La.preceded(Yh,up),La.optional(La.preceded(Qh,jp)),(function(e,t){return t?["pragma",["pragmaName",e],["pragmaContents",t]]:["pragma",["pragmaName",e]]})),La.preceded(Yh,Ka)),ze=La.map(La.followed(La.plus(je),La.preceded(Yh,La.delimited(nl,$a(La.optional(l),Yh),rl))),(function(e){return["extensionExpr"].concat(h(e))})),Ve=i(n(He,Il,(function(e,t){return 0===t.length?e:["simpleMapExpr","pathExpr"===e[0]?e:["pathExpr",["stepExpr",["filterExpr",nd(e)]]]].concat(t.map((function(e){return"pathExpr"===(e=e[1])[0]?e:["pathExpr",["stepExpr",["filterExpr",nd(e)]]]})))}))),Xe=La.or([Ge,ze,Ve]),qe=La.or([La.then(La.or([Va([ql],"unaryMinusOp"),Va([Xl],"unaryPlusOp")]),La.preceded(Yh,(function(e,t){return qe(e,t)})),(function(e,t){return[e,["operand",t]]})),Xe]),We=La.or([La.map(up,(function(e){return["EQName"].concat(h(e))})),hp,I]),Ye=La.then(qe,La.star(Ha([Yh,Ql,Yh],La.then(We,La.preceded(Yh,M),(function(e,t){return[e,t]})))),(function(e,t){return t.reduce((function(e,t){return["arrowExpr",["argExpr",e],t[0],["arguments"].concat(h(t[1]))]}),e)})),Qe=La.then(Ye,La.optional(Ha([Yh,au,Qh,su,pp,Yh],ad)),(function(e,t){return null!==t?["castExpr",["argExpr",e],t]:e})),Ke=La.then(Qe,La.optional(Ha([Yh,lu,Qh,su,pp,Yh],ad)),(function(e,t){return null!==t?["castableExpr",["argExpr",e],t]:e})),Ze=La.then(Ke,La.optional(Ha([Yh,uu,Qh,su,pp,Yh],U)),(function(e,t){return null!==t?["treatExpr",["argExpr",e],["sequenceType"].concat(h(t))]:e})),Je=La.then(Ze,La.optional(Ha([Yh,cu,Qh,hu,pp,Yh],U)),(function(e,t){return null!==t?["instanceOfExpr",["argExpr",e],["sequenceType"].concat(h(t))]:e})),et=n(Je,La.followed(La.or([Va([xu],"intersectOp"),Va([Au],"exceptOp")]),pp),t),tt=n(et,La.or([Va([Pl],"unionOp"),La.followed(Va([_u],"unionOp"),pp)]),t),nt=n(tt,La.or([Va([Cl],"multiplyOp"),La.followed(Va([Ou],"divOp"),pp),La.followed(Va([Tu],"idivOp"),pp),La.followed(Va([Nu],"modOp"),pp)]),t),rt=n(nt,La.or([Va([ql],"subtractOp"),Va([Xl],"addOp")]),t),it=n(r(rt,La.followed(Va([ku],"rangeSequenceExpr"),pp),"startExpr","endExpr"),Va([Ml],"stringConcatenateOp"),t),ot=n(r(it,La.or([zp,Vp,Xp])),La.followed(Va([Su],"andOp"),pp),t),st=n(ot,La.followed(Va([Cu],"orOp"),pp),t),at=La.then(La.then(Ha([$u,Yh,Za,Yh],l),Ha([Yh,Ja,Yh,Hu,pp,Yh],a),(function(e,t){return[e,t]})),Ha([Yh,Gu,pp,Yh],a),(function(e,t){return["ifThenElseExpr",["ifClause",e[0]],["thenClause",e[1]],["elseClause",t]]})),lt=La.delimited(ju,Qh,zu),ut=La.map(Ha([Vu,Qh,Ol],up),(function(e){return["positionalVariableBinding"].concat(h(e))})),ct=function(e,t,n,r,i,o){return La.then(La.then(La.then(La.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=u(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=u(e);return[e=n.next().value,n.next().value,n=n.next().value,t]})),i,(function(e,t){var n=u(e);e=n.next().value;var r=n.next().value,i=n.next().value;return n=n.next().value,o(e,r,i,n,t)}))}(La.preceded(Ol,up),La.preceded(Yh,La.optional(Z)),La.preceded(Yh,La.optional(lt)),La.preceded(Yh,La.optional(ut)),La.preceded($a(Xu,Yh),a),(function(e,t,n,r,i){return["forClauseItem",["typedVariableBinding",["varName"].concat(h(e),h(t?[t]:[]))]].concat(h(n?[["allowingEmpty"]]:[]),h(r?[r]:[]),[["forExpr",i]])})),ht=Ha([qu,Qh],n(ct,jl,(function(e,t){return["forClause",e].concat(h(t.map((function(e){return e[1]}))))}))),pt=Ga(La.preceded(Ol,up),La.preceded(Yh,La.optional(Z)),La.preceded($a(Al,Yh),a),(function(e,t,n){return["letClauseItem",["typedVariableBinding",["varName"].concat(h(e))].concat(h(t?[t]:[])),["letExpr",n]]})),dt=La.map(Ha([Wu,Yh],n(pt,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),(function(e){return["letClause"].concat(h(e))})),ft=La.or([ht,dt]),mt=La.map(Ha([Yu,pp,Yh],a),(function(e){return["whereClause",e]})),gt=La.map(La.preceded(Ol,up),(function(e){return["varName"].concat(h(e))})),yt=La.then(La.preceded(Yh,La.optional(Z)),La.preceded($a(Al,Yh),a),(function(e,t){return["groupVarInitialize"].concat(h(e?[["typeDeclaration"].concat(h(e))]:[]),[["varValue",t]])})),vt=Ga(gt,La.optional(yt),La.optional(La.map(La.preceded($a(Qu,Yh),d),(function(e){return["collation",e]}))),(function(e,t,n){return["groupingSpec",e].concat(h(t?[t]:[]),h(n?[n]:[]))})),wt=n(vt,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),bt=La.map(Ha([Ku,Qh,Zu,Yh],wt),(function(e){return["groupByClause"].concat(h(e))})),xt=Ga(La.optional(La.or([ah,lh])),La.optional(Ha([Yh,zu,Yh],La.or([bc,xc].map((function(e){return La.map(e,(function(e){return"empty "+e}))}))))),La.preceded(Yh,La.optional(Ha([Qu,Yh],d))),(function(e,t,n){return e||t||n?["orderModifier"].concat(h(e?[["orderingKind",e]]:[]),h(t?[["emptyOrderingMode",t]]:[]),h(n?[["collation",n]]:[])):null})),At=La.then(a,La.preceded(Yh,xt),(function(e,t){return["orderBySpec",["orderByExpr",e]].concat(h(t?[t]:[]))})),_t=n(At,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),kt=La.then(La.or([La.map(Ha([Ju,Qh],Zu),(function(){return!1})),La.map(Ha([ec,Qh,Ju,Qh],Zu),(function(){return!0}))]),La.preceded(Yh,_t),(function(e,t){return["orderByClause"].concat(h(e?[["stable"]]:[]),h(t))})),Et=La.or([ft,mt,bt,kt]),Ct=La.map(Ha([tc,Yh],a),(function(e){return["returnClause",e]})),St=Ga(ft,La.star(La.preceded(Yh,Et)),La.preceded(Yh,Ct),(function(e,t,n){return["flworExpr",e].concat(h(t),[n])})),Ot=n(U,Pl,(function(e,t){return 0===t.length?["sequenceType"].concat(h(e)):["sequenceTypeUnion",["sequenceType"].concat(h(e))].concat(h(t.map((function(e){return["sequenceType"].concat(h(e[1]))}))))})),Tt=Ga(Ha([kc,Yh],La.optional(La.preceded(Ol,La.followed(La.followed(up,Qh),su)))),La.preceded(Yh,Ot),Ha([Qh,tc,Qh],a),(function(e,t,n){return["typeswitchExprCaseClause"].concat(e?[["variableBinding"].concat(h(e))]:[],[t],[["resultExpr",n]])})),Nt=ja(La.preceded(Ec,$a(La.delimited(Za,$a(l,Yh),Ja),Yh)),La.plus(La.followed(Tt,Yh)),Ha([dc,Qh],La.optional(La.preceded(Ol,La.followed(up,Qh)))),Ha([tc,Qh],a),(function(e,t,n,r){return["typeswitchExpr",["argExpr",e]].concat(h(t),[["typeswitchExprDefaultClause"].concat(h(n||[]),[["resultExpr",r]])])})),Bt=Ga(La.preceded(Ol,up),La.optional(La.preceded(Qh,Z)),La.preceded($a(Xu,Qh),a),(function(e,t,n){return["quantifiedExprInClause",["typedVariableBinding",["varName"].concat(h(e))].concat(h(t?[t]:[])),["sourceExpr",n]]})),It=n(Bt,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),Pt=Ga(La.or([Cc,Sc]),La.preceded(Qh,It),La.preceded($a(Oc,Yh),a),(function(e,t,n){return["quantifiedExpr",["quantifier",e]].concat(h(t),[["predicateExpr",n]])})),Mt=La.map(Ha([fu,Qh,La.or([du,pu]),Qh],a),(function(e){return["deleteExpr",["targetExpr",e]]})),Dt=Ga(Ha([Tc,Qh],La.optional(Ha([mu,Qh,hu],Qh))),Ha([pu,Qh],a),La.preceded($a(Nc,Qh),a),(function(e,t,n){return e?["replaceExpr",["replaceValue"],["targetExpr",t],["replacementExpr",n]]:["replaceExpr",["targetExpr",t],["replacementExpr",n]]})),Rt=La.then(hp,La.preceded($a(Al,Yh),a),(function(e,t){return["transformCopy",e,["copySource",t]]})),Ft=Ga(Ha([Bc,Qh],n(Rt,jl,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),Ha([Yh,Ic,Qh],a),La.preceded($a(tc,Qh),a),(function(e,t,n){return["transformExpr",["transformCopies"].concat(h(e)),["modifyExpr",t],["returnExpr",n]]})),Lt=La.or([La.followed(La.map(La.optional(La.followed(Ha([su,Qh],La.or([La.map(Pc,(function(){return["insertAsFirst"]})),La.map(Mc,(function(){return["insertAsLast"]}))])),Qh)),(function(e){return e?["insertInto",e]:["insertInto"]})),Fc),La.map(Rc,(function(){return["insertAfter"]})),La.map(Dc,(function(){return["insertBefore"]}))]),Ut=Ga(Ha([Lc,Qh,La.or([du,pu]),Qh],a),La.preceded(Qh,Lt),La.preceded(Qh,a),(function(e,t,n){return["insertExpr",["sourceExpr",e],t,["targetExpr",n]]})),$t=La.then(Ha([Uc,Qh,pu,Yh],a),Ha([Qh,su,Qh],a),(function(e,t){return["renameExpr",["targetExpr",e],["newNameExpr",t]]})),Ht=La.then(La.plus(La.map(Ha([kc,Qh],a),(function(e){return["switchCaseExpr",e]}))),Ha([Qh,tc,Qh],a),(function(e,t){return["switchExprCaseClause"].concat(h(e),[["resultExpr",t]])})),Gt=Ga(Ha([$c,Yh,Za],l),Ha([Yh,Ja,Yh],La.plus(La.followed(Ht,Yh))),Ha([dc,Qh,tc,Qh],a),(function(e,t,n){return["switchExpr",["argExpr",e]].concat(h(t),[["switchExprDefaultClause",["resultExpr",n]]])})),jt=La.map(l,(function(e){return["queryBody",e]})),zt=Ha([pc,Qh,ic,Qh],La.then(Jh,La.preceded($a(Dl,Yh),d),(function(e,t){return["namespaceDecl",["prefix",e],["uri",t]]}))),Vt=La.then(Ha([Hc,Qh,Ol,Yh],La.then(up,La.optional(La.preceded(Yh,Z)),(function(e,t){return[e,t]}))),La.or([La.map(Ha([Yh,Al,Yh],a),(function(e){return["varValue",e]})),La.map(Ha([Qh,Gc],La.optional(Ha([Yh,Al,Yh],a))),(function(e){return["external"].concat(h(e?[["varValue",e]]:[]))}))]),(function(e,t){var n=u(e);return e=n.next().value,n=n.next().value,["varDecl",["varName"].concat(h(e))].concat(h(null!==n?[n]:[]),[t])})),Xt=ja(Ha([gu,Qh,La.peek(La.not(Tp,["Cannot use reserved function name"]))],up),Ha([Yh,Za,Yh],La.optional(ee)),Ha([Yh,Ja],La.optional(Ha([Qh,su,Qh],U))),La.preceded(Yh,La.or([La.map(L,(function(e){return["functionBody",e]})),La.map(Gc,(function(){return["externalDefinition"]}))])),(function(e,t,n,r){return["functionDecl",["functionName"].concat(h(e)),["paramList"].concat(h(t||[]))].concat(h(n?[["typeDeclaration"].concat(h(n))]:[]),[r])})),qt=Ha([pc,Qh],La.then(La.star(La.followed(La.or([$,qp]),Qh)),La.or([Vt,Xt]),(function(e,t){return[t[0]].concat(h(e),h(t.slice(1)))}))),Wt=La.then(Ha([pc,Qh,dc,Qh],La.or([vu,gu])),Ha([Qh,ic,Qh],d),(function(e,t){return["defaultNamespaceDecl",["defaultNamespaceCategory",e],["uri",t]]})),Yt=La.or([La.map(La.followed(Ha([ic,Qh],Jh),La.preceded(Yh,Dl)),(function(e){return["namespacePrefix",e]})),La.map(Ha([dc,Qh,vu,Qh],ic),(function(){return["defaultElementNamespace"]}))]),Qt=Ha([zc,Qh,Vc],Ga(La.optional(La.preceded(Qh,Yt)),La.preceded(Yh,d),La.optional(La.then(Ha([Qh,Vu,Qh],d),La.star(Ha([Yh,jl,Yh],d)),(function(e,t){return[e].concat(h(t))}))),(function(e,t,n){return["schemaImport"].concat(h(e?[e]:[]),[["targetNamespace",t]],h(n?[n]:[]))}))),Kt=Ha([zc,Qh,Xc],Ga(La.optional(La.followed(Ha([Qh,ic,Qh],Jh),La.preceded(Yh,Dl))),La.preceded(Yh,d),La.optional(La.then(Ha([Qh,Vu,Qh],d),La.star(Ha([Yh,jl,Yh],d)),(function(e,t){return[e].concat(h(t))}))),(function(e,t){return["moduleImport",["namespacePrefix",e],["targetNamespace",t]]}))),Zt=La.or([Qt,Kt]),Jt=La.map(Ha([pc,Qh,dc,Qh,Qu,Qh],d),(function(e){return["defaultCollationDecl",e]})),en=La.map(Ha([pc,Qh,qc,Qh],d),(function(e){return["baseUriDecl",e]})),tn=La.then(Ha([pc,Qh],La.or([La.map(Ha([_c,Qh],up),(function(e){return["decimalFormatName"].concat(h(e))})),La.map(Ha([dc,Qh],_c),(function(){return null}))])),La.star(La.then(La.preceded(Qh,Qp),La.preceded($a(Dl,Qh),d),(function(e,t){return["decimalFormatParam",["decimalFormatParamName",e],["decimalFormatParamValue",t]]}))),(function(e,t){return["decimalFormatDecl"].concat(h(e?[e]:[]),h(t))})),nn=La.or([Kp,Jt,en,Zp,Jp,ed,td,tn]),rn=La.then(Ha([pc,Qh,Zc,Qh],up),La.preceded(Qh,d),(function(e,t){return["optionDecl",["optionName",e],["optionContents",t]]})),on=La.then(Ha([pc,Qh,Jc,Qh,eh],La.optional(Ha([Qh,su],K))),La.or([La.map(La.preceded($a(Al,Yh),a),(function(e){return["varValue",e]})),La.map(Ha([Qh,Gc],La.optional(La.preceded($a(Al,Yh),a))),(function(){return["external"]}))]),(function(e,t){return["contextItemDecl"].concat(h(e?[["contextItemType",e]]:[]),[t])})),sn=La.then(La.star(La.followed(La.or([Wt,nn,zt,Zt]),$a(El,Yh))),La.star(La.followed(La.or([on,qt,rn]),$a(El,Yh))),(function(e,t){return 0===e.length&&0===t.length?null:["prolog"].concat(h(e),h(t))})),an=Ha([Xc,Qh,ic,Qh],La.then(La.followed(Jh,$a(Dl,Yh)),La.followed(d,$a(El,Yh)),(function(e,t){return["moduleDecl",["prefix",e],["uri",t]]}))),ln=La.then(an,La.preceded(Yh,sn),(function(e,t){return["libraryModule",e].concat(h(t?[t]:[]))})),un=La.then(sn,La.preceded(Yh,jt),(function(e,t){return["mainModule"].concat(h(e?[e]:[]),[t])})),cn=La.map(Ha([th,Yh],La.followed(La.or([La.then(La.preceded(rh,Qh),d,(function(e){return["encoding",e]})),La.then(Ha([nh,Qh],d),La.optional(Ha([Qh,rh,Qh],d)),(function(e,t){return[["version",e]].concat(h(t?[["encoding",t]]:[]))}))]),La.preceded(Yh,El))),(function(e){return["versionDecl"].concat(h(e))})),hn=La.then(La.optional($a(cn,Yh)),La.or([ln,un]),(function(e,t){return["module"].concat(h(e?[e]:[]),[t])})),pn=La.complete($a(hn,Yh));return function(e,t){c.clear(),t=pn(e,t);for(var n=1,r=1,i=0;i<e.length+1;i++){if(c.has(i)){var o=c.get(i);o.line=r,o.la=n}"\r"===(o=e[i])||"\n"===o?(r++,n=1):n++}return t}}var hd=cd({ub:!1,Xa:!1}),pd=cd({ub:!0,Xa:!1}),dd=cd({ub:!1,Xa:!0}),fd=cd({ub:!0,Xa:!0});function md(e,t){var n=!!t.aa;if(t=!!t.debug,Gh.clear(),jh.clear(),ud.clear(),!0===(n=n?t?fd(e,0):dd(e,0):t?pd(e,0):hd(e,0)).success)return n.value;throw Error("XPST0003: Failed to parse '"+e+"' expected: "+n.expected+"\n"+e.slice(0,n.offset)+"[Error is around here]"+e.slice(n.offset))}var gd="http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map".split(" ");function yd(e,t,n){n=void 0===n||n;var r=[],i=[];Di(e,"*").forEach((function(e){switch(e[0]){case"moduleImport":case"namespaceDecl":case"defaultNamespaceDecl":case"functionDecl":case"varDecl":break;default:throw Error("Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules")}}));var o=new Set;Di(e,"moduleImport").forEach((function(e){var n=Ii(Bi(e,"namespacePrefix"));if(e=Ii(Bi(e,"targetNamespace")),o.has(e))throw Error('XQST0047: The namespace "'+e+'" is imported more than once.');o.add(e),Si(t,n,e),Ra(t,e)})),Di(e,"namespaceDecl").forEach((function(e){var n=Ii(Bi(e,"prefix"));if(e=Ii(Bi(e,"uri")),"xml"===n||"xmlns"===n)throw vi();if("http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"===e)throw vi();Si(t,n,e)}));for(var s=null,a=null,l=u(Di(e,"defaultNamespaceDecl")),c=l.next();!c.done;c=l.next()){var p=c.value;if(c=Ii(Bi(p,"defaultNamespaceCategory")),!(p=Ii(Bi(p,"uri"))))throw gi();if("http://www.w3.org/XML/1998/namespace"===p||"http://www.w3.org/2000/xmlns/"===p)throw vi();if("function"===c){if(s)throw yi();s=p}else if("element"===c){if(a)throw yi();a=p}}s&&(t.A=s),a&&Si(t,"",a),Di(e,"functionDecl").forEach((function(e){!function(e,t,n,r,i){var o=Bi(e,"functionName"),s=Pi(o,"prefix")||"",a=Pi(o,"URI"),l=Ii(o);if(null===a&&!(a=""===s?null===t.A?"http://www.w3.org/2005/xpath-functions":t.A:t.ba(s))&&s)throw bi(s);if(gd.includes(a))throw mi();if(s=Di(e,"annotation").map((function(e){return Bi(e,"annotationName")})),o=s.every((function(e){return!Pi(e,"URI")&&"private"!==Ii(e)})),s=s.some((function(e){return!Pi(e,"URI")&&"updating"===Ii(e)})),!a)throw gi();var u=Fi(e),c=Di(Bi(e,"paramList"),"param"),p=c.map((function(e){return Bi(e,"varName")})),d=c.map((function(e){return Fi(e)}));if(e=Bi(e,"functionBody")){if(t.Ba(a,l,d.length))throw Error("XQST0049: The function Q{"+a+"}"+l+"#"+d.length+" has already been declared.");if(!i)return;var f=Ta(e[1],{sa:!1,aa:!0}),m=new _i(t),g=p.map((function(e){var n=Pi(e,"URI"),r=Pi(e,"prefix");return e=Ii(e),r&&null===n&&(n=t.ba(r||"")),Oi(m,n,e)}));i=s?{l:d,arity:p.length,m:function(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];return o=Et(kt(e,-1,null,ge.empty()),g.reduce((function(e,t,n){return e[t]=ye(i[n]),e}),Object.create(null))),f.u(o,t)},Db:!1,I:!0,localName:l,namespaceURI:a,i:u}:{l:d,arity:p.length,m:function(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];return o=Et(kt(e,-1,null,ge.empty()),g.reduce((function(e,t,n){return e[t]=ye(i[n]),e}),Object.create(null))),pr(f,o,t)},Db:!1,I:!1,localName:l,namespaceURI:a,i:u},n.push({da:f,Kb:m}),o&&r.push({arity:p.length,da:f,Gb:i,localName:l,namespaceURI:a})}else{if(s)throw Error("Updating external function declarations are not supported");i={l:d,arity:p.length,m:function(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];if(!(o=n.Ba(a,l,p.length,!0)))throw Error("XPST0017: Function Q{"+a+"}"+l+" with arity of "+p.length+" not registered. "+ai(l));if(o.i.type!==u.type||o.l.some((function(e,t){return e.type!==d[t].type})))throw Error("External function declaration types do not match actual function");return o.m.apply(o,[e,t,n].concat(h(i)))},Db:!0,I:!1,localName:l,namespaceURI:a,i:u}}Ci(t,a,l,p.length,i)}(e,t,r,i,n)}));var d=[];return Di(e,"varDecl").forEach((function(e){var i=Ri(Bi(e,"varName")),o=i.namespaceURI;if(null===o&&(!(o=t.ba(i.prefix))&&i.prefix))throw bi(i.prefix);if(gd.includes(o))throw mi();var s,a,l=Bi(e,"external");if(e=Bi(e,"varValue"),null!==l?null!==(l=Bi(l,"varValue"))&&(s=Bi(l,"*")):null!==e&&(s=Bi(e,"*")),d.some((function(e){return e.namespaceURI===o&&e.localName===i.localName})))throw Error("XQST0049: The variable "+(o?"Q{"+o+"}":"")+i.localName+" has already been declared.");if(Oi(t,o||"",i.localName),n&&(s&&(a=Ta(s,{sa:!1,aa:!0})),s&&!function(e,t,n){return(e=e.Fa[xi(t,n)])?e:null}(t,o||"",i.localName))){var u=null;Ti(t,o,i.localName,(function(e,t){return u?u():(u=ye(pr(a,e,t)))()})),r.push({da:a,Kb:t}),d.push({da:a,localName:i.localName,namespaceURI:o})}})),r.forEach((function(e){e.da.P(e.Kb)})),i.forEach((function(e){if(!e.Gb.I&&e.da.I)throw er("The function Q{"+e.namespaceURI+"}"+e.localName+" is updating but the %updating annotation is missing.")})),{Oa:i,Wa:d}}function vd(e,t,n,r,i,o,s){var a=t.aa?"XQuery":"XPath";return n=t.Ja?null:function(e,t,n,r,i,o,s,a){return(e=Na.get(e))&&(t=e[t+(o?"_DEBUG":"")])&&(t=t.find((function(e){return e.s===s&&e.j.every((function(e){return n(e.prefix)===e.namespaceURI}))&&e.u.every((function(e){return void 0!==r[e.name]}))&&e.A.every((function(e){return i[e.prefix]===e.namespaceURI}))&&e.O.every((function(e){var t=a(e.Dc,e.arity);return t&&t.namespaceURI===e.Jb.namespaceURI&&t.localName===e.Jb.localName}))})))?{da:t.h,Hc:!1}:null}(e,a,n,r,i,t.debug,o,s),null!==n?{state:n.Hc?1:2,da:n.da}:{state:0,yc:"string"==typeof e?md(e,t):Pa(e)}}function wd(e,t,n,r,i,o,s){var a=new hi(n,r,o,s),l=new _i(a);switch(Object.keys(i).forEach((function(e){var t=i[e];Ra(l,t),Si(l,e,t)})),"string"==typeof e&&(e=Fa(e)),(n=vd(e,t,n,r,i,o,s)).state){case 2:return{ia:l,da:n.da};case 1:return n.da.P(l),Ia(e,t.aa?"XQuery":"XPath",a,i,n.da,t.debug,o),{ia:l,da:n.da};case 0:return n=function(e,t,n){var r=Bi(e,"mainModule");if(!r)throw Error("Can not execute a library module.");var i=Bi(r,"prolog");if(i){if(!t.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");yd(i,n)}return eo(e,new lo(n)),ka(e=Mi(r,["queryBody","*"]),t)}(n.yc,t,l),n.P(l),t.Ja||Ia(e,t.aa?"XQuery":"XPath",a,i,n,t.debug,o),{ia:l,da:n}}}function bd(e,t,n){if(1!==t.node.nodeType&&9!==t.node.nodeType)return[];var r=Ie(e,t).reduce((function(t,r){for(var i=(r=u(bd(e,r,n))).next();!i.done;i=r.next())t.push(i.value);return t}),[]);return n(t)&&r.unshift(t),r}function xd(e,t,n,r,i){if(!(e=i.first()))throw Error("XPDY0002: The context is absent, it needs to be present to use id function.");if(!ee(e.type,53))throw Tt("The context item is not a node, it needs to be node to use id function.");var o=t.h,s=r.N().reduce((function(e,t){return t.value.split(/\s+/).forEach((function(t){e[t]=!0})),e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Fe(o,t)))throw Error("FODC0001: the root node of the target node is not a document node.");return t=bd(o,t,(function(e){return 1===e.node.nodeType&&(!(!(e=Be(o,e,"id"))||!s[e])&&(s[e]=!1,!0))})),ge.create(t.map((function(e){return Ge(e)})))}function Ad(e,t,n,r,i){if(!(e=i.first()))throw Error("XPDY0002: The context is absent, it needs to be present to use idref function.");if(!ee(e.type,53))throw Tt("The context item is not a node, it needs to be node to use idref function.");var o=t.h,s=r.N().reduce((function(e,t){return e[t.value]=!0,e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Fe(o,t)))throw Error("FODC0001: the root node of the context node is not a document node.");return t=bd(o,t,(function(e){return 1===e.node.nodeType&&(!!(e=Be(o,e,"idref"))&&e.split(/\s+/).some((function(e){return s[e]})))})),ge.create(t.map((function(e){return Ge(e)})))}function _d(e){switch(typeof e){case"object":return Array.isArray(e)?ge.o(new $e(e.map((function(e){return ye(_d(e))})))):null===e?ge.empty():ge.o(new Xe(Object.keys(e).map((function(t){return{key:X(t,1),value:ye(_d(e[t]))}}))));case"number":return ge.o(X(e,3));case"string":return ge.o(X(e,1));case"boolean":return e?ge.ca():ge.X();default:throw Error("Unexpected type in JSON parse")}}function kd(e,t,n,r,i){var o=(e=Ve(0,0,0,i,ge.o(X("duplicates",1)))).G()?"use-first":e.first().value;return r.L((function(e){return ge.o(new Xe(e.reduce((function(e,t){return t.h.forEach((function(t){var n=e.findIndex((function(e){return ze(e.key,t.key)}));if(0<=n)switch(o){case"reject":throw Error("FOJS0003: Duplicate encountered when merging maps.");case"use-last":return void e.splice(n,1,t);case"combine":return void e.splice(n,1,{key:t.key,value:ye(ge.create(e[n].value().N().concat(t.value().N())))});default:return}e.push(t)})),e}),[])))}))}function Ed(e,t,n){var r=1,i=e.value;e=e.Pa(!0);var o=null,s=Math.max(t-1,0);return-1!==e&&(o=Math.max(0,(null===n?e:Math.max(0,Math.min(e,n+(t-1))))-s)),ge.create({next:function(e){for(;r<t;)i.next(e),r++;return null!==n&&r>=t+n?K:(e=i.next(e),r++,e)}},o)}function Cd(e){return e.map((function(e){return ee(e.type,19)?Kt(e,3):e}))}function Sd(e){if((e=Cd(e)).some((function(e){return Number.isNaN(e.value)})))return[X(NaN,3)];if(!(e=ys(e)))throw Error("FORG0006: Incompatible types to be converted to a common type");return e}function Od(e,t,n,r,i,o){return je([i,o],(function(e){var t=u(e);if(e=t.next().value,t=t.next().value,1/0===e.value)return ge.empty();if(-1/0===e.value)return t&&1/0===t.value?ge.empty():r;if(t){if(isNaN(t.value))return ge.empty();1/0===t.value&&(t=null)}return isNaN(e.value)?ge.empty():Ed(r,Math.round(e.value),t?Math.round(t.value):null)}))}function Td(e,t,n,r,i){if(r.G())return i;if(!(e=ys(e=Cd(r.N()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return ee(e.type,2)})))throw Error("FORG0006: items passed to fn:sum are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0),e.every((function(e){return ee(e.type,5)}))?ge.o(X(t,5)):e.every((function(e){return ee(e.type,3)}))?ge.o(X(t,3)):e.every((function(e){return ee(e.type,4)}))?ge.o(X(t,4)):ge.o(X(t,6))}var Nd=[].concat(Lr,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"boolean",l:[{type:59,g:2}],i:{type:0,g:3},m:function(e,t,n,r){return r.getEffectiveBooleanValue()?ge.ca():ge.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"true",l:[],i:{type:0,g:3},m:function(){return ge.ca()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"not",l:[{type:59,g:2}],i:{type:0,g:3},m:function(e,t,n,r){return!1===r.getEffectiveBooleanValue()?ge.ca():ge.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"false",l:[],i:{type:0,g:3},m:function(){return ge.X()}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"last",l:[],i:{type:5,g:3},m:function(e){if(null===e.M)throw Error("XPDY0002: The fn:last() function depends on dynamic context, which is absent.");var t=!1;return ge.create({next:function(){if(t)return K;var n=e.Ia.Pa();return t=!0,Z(X(n,5))}},1)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"position",l:[],i:{type:5,g:3},m:function(e){if(null===e.M)throw Error("XPDY0002: The fn:position() function depends on dynamic context, which is absent.");return ge.o(X(e.La+1,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-dateTime",l:[],i:{type:10,g:3},m:function(e){return ge.o(X(At(e),10))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-date",l:[],i:{type:7,g:3},m:function(e){return ge.o(X(lt(At(e),7),7))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-time",l:[],i:{type:8,g:3},m:function(e){return ge.o(X(lt(At(e),8),8))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"implicit-timezone",l:[],i:{type:17,g:3},m:function(e){return ge.o(X(_t(e),17))}}],$r,Wr,Jr,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"years-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.fb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"months-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.bb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"days-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.ab(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getHours(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getMinutes(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-duration",l:[{type:18,g:0}],i:{type:4,g:0},m:function(e,t,n,r){return r.G()?r:ge.o(X(r.first().value.getSeconds(),4))}}],ti,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",l:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},m:xd},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",l:[{type:1,g:2}],i:{type:54,g:2},m:function(e,t,n,r){return xd(e,t,0,r,ge.o(e.M))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",l:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},m:Ad},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",l:[{type:1,g:2}],i:{type:53,g:2},m:function(e,t,n,r){return Ad(e,t,0,r,ge.o(e.M))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"parse-json",l:[{type:1,g:3}],i:{type:59,g:0},m:function(e,t,n,r){try{var i=JSON.parse(r.first().value)}catch(e){throw Error("FOJS0001: parsed JSON string contains illegal JSON.")}return _d(i)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"contains",l:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},m:function(e,t,n,r,i){return je([r,i],(function(e){var t=(e=u(e)).next().value,n=e.next().value;return t.h.some((function(e){return ze(e.key,n)}))?ge.ca():ge.X()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"entry",l:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},m:function(e,t,n,r,i){return r.map((function(e){return new Xe([{key:e,value:ye(i)}])}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"for-each",l:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},m:function(e,t,n,r,i){return je([r,i],(function(r){var i=(r=u(r)).next().value,o=r.next().value;return St(i.h.map((function(r){return o.value.call(void 0,e,t,n,ge.o(r.key),r.value())})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"get",l:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},m:Ve},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"keys",l:[{type:61,g:3}],i:{type:46,g:2},m:function(e,t,n,r){return je([r],(function(e){return e=u(e).next().value,ge.create(e.h.map((function(e){return e.key})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",l:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},m:kd},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",l:[{type:61,g:2}],i:{type:61,g:3},m:function(e,t,n,r){return kd(e,0,0,r,ge.o(new Xe([{key:X("duplicates",1),value:function(){return ge.o(X("use-first",1))}}])))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"put",l:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},m:function(e,t,n,r,i,o){return je([r,i],(function(e){var t=(e=u(e)).next().value,n=e.next().value;return e=t.h.concat(),t=e.findIndex((function(e){return ze(e.key,n)})),0<=t?e.splice(t,1,{key:n,value:ye(o)}):e.push({key:n,value:ye(o)}),ge.o(new Xe(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"remove",l:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},m:function(e,t,n,r,i){return je([r],(function(e){var t=u(e).next().value.h.concat();return i.L((function(e){return e.forEach((function(e){var n=t.findIndex((function(t){return ze(t.key,e)}));0<=n&&t.splice(n,1)})),ge.o(new Xe(t))}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"size",l:[{type:61,g:3}],i:{type:5,g:3},m:function(e,t,n,r){return r.map((function(e){return X(e.h.length,5)}))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pi",l:[],i:{type:3,g:3},m:function(){return ge.o(X(Math.PI,3))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.pow(Math.E,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp10",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.pow(10,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.log(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log10",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.log10(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pow",l:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},m:function(e,t,n,r,i){return i.L((function(e){var t=u(e).next().value;return r.map((function(e){return 1!==Math.abs(e.value)||Number.isFinite(t.value)?X(Math.pow(e.value,t.value),3):X(1,3)}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sqrt",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.sqrt(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sin",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.sin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"cos",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.cos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"tan",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.tan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"asin",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.asin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"acos",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.acos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan",l:[{type:3,g:0}],i:{type:3,g:0},m:function(e,t,n,r){return r.map((function(e){return X(Math.atan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan2",l:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},m:function(e,t,n,r,i){return i.L((function(e){var t=u(e).next().value;return r.map((function(e){return X(Math.atan2(e.value,t.value),3)}))}))}}],Vn,An,[{namespaceURI:"http://fontoxpath/operators",localName:"to",l:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},m:function(e,t,n,r,i){if(e=r.first(),i=i.first(),null===e||null===i)return ge.empty();var o=e.value;return i=i.value,o>i?ge.empty():ge.create({next:function(){return Z(X(o++,5))}},i-o+1)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"QName",l:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},m:function(e,t,n,r,i){return je([r,i],(function(e){var t=u(e);if(e=t.next().value,!Rt(t=t.next().value.value,23))throw Error("FOCA0002: The provided QName is invalid.");if(null===(e=e&&e.value||null)&&t.includes(":"))throw Error("FOCA0002: The URI of a QName may not be empty if a prefix is provided.");if(r.G())return ge.o(X(new ve("",null,t),23));if(!t.includes(":"))return ge.o(X(new ve("",e,t),23));var n=u(t.split(":"));return t=n.next().value,n=n.next().value,ge.o(X(new ve(t,e,n),23))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"prefix-from-QName",l:[{type:23,g:0}],i:{type:24,g:0},m:function(e,t,n,r){return je([r],(function(e){return null===(e=u(e).next().value)?ge.empty():(e=e.value).prefix?ge.o(X(e.prefix,24)):ge.empty()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"local-name-from-QName",l:[{type:23,g:0}],i:{type:24,g:0},m:function(e,t,n,r){return r.map((function(e){return X(e.value.localName,24)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"namespace-uri-from-QName",l:[{type:23,g:0}],i:{type:20,g:0},m:function(e,t,n,r){return r.map((function(e){return X(e.value.namespaceURI||"",20)}))}}],[{l:[{type:59,g:2}],m:function(e,t,n,r){return r.$({empty:function(){return ge.ca()},multiple:function(){return ge.X()},o:function(){return ge.X()}})},localName:"empty",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2}],m:function(e,t,n,r){return r.$({empty:function(){return ge.X()},multiple:function(){return ge.ca()},o:function(){return ge.ca()}})},localName:"exists",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2}],m:function(e,t,n,r){return Ed(r,1,1)},localName:"head",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{l:[{type:59,g:2}],m:function(e,t,n,r){return Ed(r,2,null)},localName:"tail",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],m:function(e,t,n,r,i,o){return r.G()?o:o.G()?r:(e=r.N(),0>(i=i.first().value-1)?i=0:i>e.length&&(i=e.length),t=e.slice(i),ge.create(e.slice(0,i).concat(o.N(),t)))},localName:"insert-before",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:5,g:3}],m:function(e,t,n,r,i){return e=i.first().value,!(r=r.N()).length||1>e||e>r.length||r.splice(e-1,1),ge.create(r)},localName:"remove",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2}],m:function(e,t,n,r){return r.L((function(e){return ge.create(e.reverse())}))},localName:"reverse",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:3,g:3}],m:function(e,t,n,r,i){return Od(0,0,0,r,i,ge.empty())},localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],m:Od,localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2}],m:function(e,t,n,r){return r},localName:"unordered",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:46,g:2}],m:function(e,t,n,r){var i=Pt(r,t).N();return ge.create(i).filter((function(e,t){return i.slice(0,t).every((function(t){return!Wn(e,t)}))}))},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{l:[{type:46,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported")},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{l:[{type:46,g:2},{type:46,g:3}],m:function(e,t,n,r,i){return i.L((function(n){var i=u(n).next().value;return Pt(r,t).map((function(t,n){return Zo("eqOp",t.type,i.type)(t,i,e)?X(n+1,5):X(-1,5)})).filter((function(e){return-1!==e.value}))}))},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{l:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported")},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{l:[{type:59,g:2},{type:59,g:2}],m:function(e,t,n,r,i){var o=!1,s=Kn(e,t,n,r,i);return ge.create({next:function(){if(o)return K;var e=s.next(0);return e.done?e:(o=!0,Z(X(e.value,0)))}})},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported")},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2}],m:function(e,t,n,r){var i=!1;return ge.create({next:function(){if(i)return K;var e=r.Pa();return i=!0,Z(X(e,5))}})},localName:"count",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}},{l:[{type:46,g:2}],m:function(e,t,n,r){if(r.G())return r;if(!(e=ys(e=Cd(r.N()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return ee(e.type,2)})))throw Error("FORG0006: items passed to fn:avg are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0)/e.length,e.every((function(e){return ee(e.type,5)||ee(e.type,3)}))?ge.o(X(t,3)):e.every((function(e){return ee(e.type,4)}))?ge.o(X(t,4)):ge.o(X(t,6))},localName:"avg",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2}],m:function(e,t,n,r){return r.G()?r:(e=Sd(r.N()),ge.o(e.reduce((function(e,t){return e.value<t.value?t:e}))))},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported")},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2}],m:function(e,t,n,r){return r.G()?r:(e=Sd(r.N()),ge.o(e.reduce((function(e,t){return e.value>t.value?t:e}))))},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported")},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2}],m:function(e,t,n,r){return Td(e,t,0,r,ge.o(X(0,5)))},localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:3}},{l:[{type:46,g:2},{type:46,g:0}],m:Td,localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:59,g:2}],m:function(e,t,n,r){if(!r.G()&&!r.ta())throw Error("FORG0003: The argument passed to fn:zero-or-one contained more than one item.");return r},localName:"zero-or-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{l:[{type:59,g:2}],m:function(e,t,n,r){if(r.G())throw Error("FORG0004: The argument passed to fn:one-or-more was empty.");return r},localName:"one-or-more",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:1}},{l:[{type:59,g:2}],m:function(e,t,n,r){if(!r.ta())throw Error("FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.");return r},localName:"exactly-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:3}},{l:[{type:59,g:2},{type:60,g:3}],m:function(e,t,n,r,i){if(r.G())return r;var o=i.first(),s=o.s;if(1!==s.length)throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.filter((function(r){if(r=dn(s[0],ge.o(r),t,"fn:filter",!1),!(r=o.value.call(void 0,e,t,n,r)).ta()||!ee(r.first().type,0))throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.first().value}))},localName:"filter",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:60,g:3}],m:function(e,t,n,r,i){if(r.G())return r;var o=i.first(),s=o.s;if(1!==s.length)throw Error("XPTY0004: signature of function passed to fn:for-each is incompatible.");var a,l=r.value;return ge.create({next:function(r){for(;;){if(!a){var i=l.next(0);if(i.done)return i;i=dn(s[0],ge.o(i.value),t,"fn:for-each",!1),a=o.value.call(void 0,e,t,n,i).value}if(!(i=a.next(r)).done)return i;a=null}}})},localName:"for-each",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],m:function(e,t,n,r,i,o){if(r.G())return r;var s=o.first(),a=s.s;if(2!==a.length)throw Error("XPTY0004: signature of function passed to fn:fold-left is incompatible.");return r.L((function(r){return r.reduce((function(r,i){return r=dn(a[0],r,t,"fn:fold-left",!1),i=dn(a[1],ge.o(i),t,"fn:fold-left",!1),s.value.call(void 0,e,t,n,r,i)}),i)}))},localName:"fold-left",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],m:function(e,t,n,r,i,o){if(r.G())return r;var s=o.first(),a=s.s;if(2!==a.length)throw Error("XPTY0004: signature of function passed to fn:fold-right is incompatible.");return r.L((function(r){return r.reduceRight((function(r,i){return r=dn(a[0],r,t,"fn:fold-right",!1),i=dn(a[1],ge.o(i),t,"fn:fold-right",!1),s.value.call(void 0,e,t,n,i,r)}),i)}))},localName:"fold-right",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2}],m:function(e,t,n,r){if(!t.A)throw Error("serialize() called but no xmlSerializer set in execution parameters.");if(!(e=r.N()).every((function(e){return ee(e.type,53)})))throw Error("Expected argument to fn:serialize to resolve to a sequence of Nodes.");return ge.o(X(e.map((function(e){return t.A.serializeToString(Kr(e.value,t,!1))})).join(""),1))},localName:"serialize",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}],Mn,[{l:[{type:59,g:3},{type:61,g:3}],m:function(e,t,n,r,i){var o,s;return ge.create({next:function(){if(!o){var e=function(e,t,n,r){e=e.first();var i=t.first().h.reduce((function(e,t){return e[t.key.value]=ye(t.value()),e}),Object.create(null));t=i["."]?i["."]():ge.empty(),delete i["."];try{if(ee(e.type,1))var o=e.value;else{if(!ee(e.type,54))throw Tt("Unable to convert selector argument of type "+oe[e.type]+" to either an "+oe[1]+" or an "+oe[54]+" representing an XQueryX program while calling 'fontoxpath:evaluate'");o=e.value.node}var s=wd(o,{sa:!1,aa:!0,debug:r.debug,Ja:r.Ja},(function(e){return n.ba(e)}),Object.keys(i).reduce((function(e,t){return e[t]=t,e}),{}),{},"http://www.w3.org/2005/xpath-functions",(function(e,t){return n.Ta(e,t)})),a=s.da,l=s.ia,u=!t.G(),c=new bt({M:u?t.first():null,La:u?0:-1,Ia:t,Ga:Object.keys(i).reduce((function(e,t){return e[l.sb(null,t)]=i[t],e}),Object.create(null))});return{Ic:a.h(c,r).value,Fc:e}}catch(t){ii(e.value,t)}}(r,i,n,t);o=e.Ic,s=e.Fc}try{return o.next(0)}catch(e){ii(s.value,e)}}})},localName:"evaluate",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:59,g:2}},{l:[],m:function(){return ge.o(X("3.27.1",1))},localName:"version",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:1,g:3}}],[{l:[{type:23,g:3},{type:5,g:3}],m:function(e,t,n,r,i){return je([r,i],(function(e){var t=u(e);e=t.next().value,t=t.next().value;var r=n.Ba(e.value.namespaceURI,e.value.localName,t.value);return null===r?ge.empty():(e=new we({l:r.l,arity:t.value,localName:e.value.localName,namespaceURI:e.value.namespaceURI,i:r.i,value:r.m}),ge.o(e))}))},localName:"function-lookup",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{g:0,type:60}},{l:[{type:60,g:3}],m:function(e,t,n,r){return je([r],(function(e){return(e=u(e).next().value).Ra()?ge.empty():ge.o(X(new ve("",e.u,e.j),23))}))},localName:"function-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{l:[{type:60,g:3}],m:function(e,t,n,r){return je([r],(function(e){return e=u(e).next().value,ge.o(X(e.A,5))}))},localName:"function-arity",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}}]);function Bd(e){this.h=e}(r=Bd.prototype).createAttributeNS=function(e,t){return this.h.createAttributeNS(e,t)},r.createCDATASection=function(e){return this.h.createCDATASection(e)},r.createComment=function(e){return this.h.createComment(e)},r.createDocument=function(){return this.h.createDocument()},r.createElementNS=function(e,t){return this.h.createElementNS(e,t)},r.createProcessingInstruction=function(e,t){return this.h.createProcessingInstruction(e,t)},r.createTextNode=function(e){return this.h.createTextNode(e)};var Id=Symbol("IS_XPATH_VALUE_SYMBOL");function Pd(e){return e&&"object"==typeof e&&"lookupNamespaceURI"in e?function(t){return e.lookupNamespaceURI(t||null)}:function(){return null}}function Md(e){return function(t){var n=t.localName;return t.prefix?null:{namespaceURI:e,localName:n}}}function Dd(e,t,n,r,i,o){var s,a,l,c,h,p,d;null==r&&(r=r||{}),i?(s=i.logger||{trace:console.log.bind(console)},a=i.documentWriter,l=i.moduleImports,c=i.namespaceResolver,h=i.functionNameResolver,p=i.nodesFactory,d=i.xmlSerializer):(s={trace:console.log.bind(console)},l={},c=null,p=null,a=null,d=null,h=void 0);var f=new Te(null===n?new _e:n);n=l||Object.create(null),l=void 0===i.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":i.defaultFunctionNamespaceURI;var m=wd(e,o,c||Pd(t),r,n,l,h||Md(l));for(e=t?wt(0,t):ge.empty(),t=!p&&o.aa?new fr(t):new Bd(p),a=a?new Ce(a):Ee,p=Object.keys(r).reduce((function(e,t){var n=r[t];return e["Q{}"+t+"[0]"]=n&&"object"==typeof n&&Id in n?function(){return ge.create(n.Fb)}:function(){return wt(0,r[t])},e}),Object.create(null)),c={},n=(h=u(Object.keys(m.ia.Fa))).next();!n.done;c={Ya:c.Ya},n=h.next())c.Ya=n.value,p[c.Ya]||(p[c.Ya]=function(e){return function(){return(0,m.ia.Fa[e.Ya])(g,y)}}(c));var g=new bt({M:e.first(),La:0,Ia:e,Ga:p}),y=new Ct(o.debug,o.Ja,f,t,a,i.currentContext,s,d);return{zb:g,Bb:y,da:m.da}}function Rd(e,t){var n={},r=0,i=!1,o=null;return{next:function(){if(i)return K;for(var s={};r<e.h.length;){e:{var a=e.h[r].key.value;if(!o){s.mb=e.h[r];var l=s.mb.value().$({default:function(e){return e},multiple:function(e){return function(){throw Error("Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key "+e.mb.key.value+" holds multiple items")}}(s)}).first();if(null===l){n[a]=null,r++;break e}o=Ld(l,t)}l=o.next(0),o=null,n[a]=l.value,r++}s={mb:s.mb}}return i=!0,Z(n)}}}function Fd(e,t){var n=[],r=0,i=!1,o=null;return{next:function(){if(i)return K;for(;r<e.R.length;){if(!o){var s=e.R[r]().$({default:function(e){return e},multiple:function(){throw Error("Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.")}}).first();if(null===s){n[r++]=null;continue}o=Ld(s,t)}s=o.next(0),o=null,n[r++]=s.value}return i=!0,Z(n)}}}function Ld(e,t){if(ee(e.type,61))return Rd(e,t);if(ee(e.type,62))return Fd(e,t);if(ee(e.type,23)){var n=e.value;return{next:function(){return Z("Q{"+(n.namespaceURI||"")+"}"+n.localName)}}}switch(e.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:var r=e.value;return{next:function(){return Z(ut(r))}};case 47:case 53:case 54:case 55:case 56:case 57:case 58:var i=e.value;return{next:function(){return Z(Kr(i,t,!1))}};default:return{next:function(){return Z(e.value)}}}}Nd.forEach((function(e){li(e.namespaceURI,e.localName,e.l,e.i,e.m)}));var Ud={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};function $d(e,t,n,r){switch(n){case 3:return t.getEffectiveBooleanValue();case 2:return(t=Pt(t,r).N()).length?t.map((function(e){return Kt(e,1).value})).join(" "):"";case 10:return(t=Pt(t,r).N()).length?t.map((function(e){return e.value+""})):[];case 1:return null!==(t=t.first())&&ee(t.type,2)?t.value:NaN;case 9:if(null===(t=t.first()))return null;if(!ee(t.type,53))throw Error("Expected XPath "+ni(e)+" to resolve to Node. Got "+oe[t.type]);return Kr(t.value,r,!1);case 7:if(!(t=t.N()).every((function(e){return ee(e.type,53)})))throw Error("Expected XPath "+ni(e)+" to resolve to a sequence of Nodes.");return t.map((function(e){return Kr(e.value,r,!1)}));case 11:if(1!==(t=t.N()).length)throw Error("Expected XPath "+ni(e)+" to resolve to a single map.");if(!ee((t=t[0]).type,61))throw Error("Expected XPath "+ni(e)+" to resolve to a map");return Rd(t,r).next(0).value;case 12:if(1!==(t=t.N()).length)throw Error("Expected XPath "+ni(e)+" to resolve to a single array.");if(!ee((t=t[0]).type,62))throw Error("Expected XPath "+ni(e)+" to resolve to an array");return Fd(t,r).next(0).value;case 13:return t.N().map((function(t){if(!ee(t.type,2))throw Error("Expected XPath "+ni(e)+" to resolve to numbers");return t.value}));case 99:var i=t.value,o=null,s=!1,a=function(){for(;!s;){if(!o){var e=i.next(0);if(e.done){s=!0;break}o=Ld(e.value,r)}return e=o.next(0),o=null,e}return Promise.resolve({done:!0,value:null})};return"asyncIterator"in Symbol?((t={})[Symbol.asyncIterator]=function(){return this},t.next=function(){return new Promise((function(e){return e(a())})).catch((function(t){ii(e,t)}))}):t={next:function(){return new Promise((function(e){return e(a())}))}},t;case 14:return t.N().map((function(e){return Ld(e,r).next(0).value}));default:return(t=t.N()).every((function(e){return ee(e.type,53)&&!ee(e.type,47)}))?(t=t.map((function(e){return Kr(e.value,r,!1)})),1===t.length?t[0]:t):1===t.length?ee((t=t[0]).type,62)?Fd(t,r).next(0).value:ee(t.type,61)?Rd(t,r).next(0).value:It(t,r).first().value:Pt(ge.create(t),r).N().map((function(e){return e.value}))}}Ud[Ud.ANY]="ANY",Ud[Ud.NUMBER]="NUMBER",Ud[Ud.STRING]="STRING",Ud[Ud.BOOLEAN]="BOOLEAN",Ud[Ud.NODES]="NODES",Ud[Ud.FIRST_NODE]="FIRST_NODE",Ud[Ud.STRINGS]="STRINGS",Ud[Ud.MAP]="MAP",Ud[Ud.ARRAY]="ARRAY",Ud[Ud.NUMBERS]="NUMBERS",Ud[Ud.ALL_RESULTS]="ALL_RESULTS",Ud[Ud.ASYNC_ITERATOR]="ASYNC_ITERATOR";var Hd=!1,Gd=null,jd={getPerformanceSummary:function(){var e=Gd.getEntriesByType("measure").filter((function(e){return e.name.startsWith("XPath: ")}));return Array.from(e.reduce((function(e,t){var n=t.name.substring(7);return e.has(n)?((n=e.get(n)).times+=1,n.totalDuration+=t.duration):e.set(n,{xpath:n,times:1,totalDuration:t.duration,average:0}),e}),new Map).values()).map((function(e){return e.average=e.totalDuration/e.times,e})).sort((function(e,t){return t.totalDuration-e.totalDuration}))},setPerformanceImplementation:function(e){Gd=e},startProfiling:function(){if(null===Gd)throw Error("Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile");Gd.clearMarks(),Gd.clearMeasures(),Hd=!0},stopProfiling:function(){Hd=!1}},zd=0;function Vd(e,t,n,r,i,o){if(i=i||0,!e||"string"!=typeof e&&!("nodeType"in e))throw new TypeError("Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.");o=o||{};try{var s=Dd(e,t,n||null,r||{},o,{sa:"XQueryUpdate3.1"===o.language,aa:"XQuery3.1"===o.language||"XQueryUpdate3.1"===o.language,debug:!!o.debug,Ja:!!o.disableCache}),a=s.zb,l=s.Bb,u=s.da}catch(t){ii(e,t)}if(u.I)throw Error("XUST0001: Updating expressions should be evaluated as updating expressions");if(3===i&&t&&"object"==typeof t&&"nodeType"in t&&(n=u.A(),t=Ae(t),null!==n&&!t.includes(n)))return!1;try{t=e,Hd&&("string"!=typeof t&&(t=ni(t)),Gd.mark(t+(0===zd?"":"@"+zd)),zd++);var c=$d(e,pr(u,a,l),i,l);return i=e,Hd&&("string"!=typeof i&&(i=ni(i)),a=i+(0===--zd?"":"@"+zd),Gd.measure("XPath: "+i,a),Gd.clearMarks(a)),c}catch(t){ii(e,t)}}Object.assign(Vd,{Jc:14,ANY_TYPE:0,Rb:12,Sb:99,BOOLEAN_TYPE:3,Wb:9,jc:11,mc:7,qc:13,NUMBER_TYPE:1,tc:10,STRING_TYPE:2,Kc:"XPath3.1",Lc:"XQuery3.1",xc:"XQueryUpdate3.1"});var Xd={};function qd(e,t,n,r,i){return Vd(e,t,n,r,Vd.Sb,i)}function Wd(e,t,n,r){var i={};return i.pendingUpdateList=e.fa.map((function(e){return e.h(r)})),i.xdmValue=$d(t,ge.create(e.H),n,r),i}function Yd(e,t,n){switch(t.type){case 0:return[e,{type:0}];case 1:return[e,{type:1}];case 3:return[""+Yd(e+"("+(n||"contextItem")+")",t.i,n)[0],t.i];case 4:return[e,{type:4}];case 5:throw Error("Trying to get value of generated code with type None");default:throw Error("Unreachable! Trying to get compiled value of unsupported GeneratedCodeType.")}}function Qd(e,t,n){return{code:e,Aa:t,isAstAccepted:!0,wa:n}}function Kd(e){return{isAstAccepted:!1,reason:e}}function Zd(e,t,n,r){switch(r=void 0===r?"contextItem":r,n.type){case 0:case 1:return Qd("!!"+e,{type:0},[t]);case 3:return(e=Zd(e+"("+r+")","",n.i,r)).isAstAccepted?Qd("!!"+e.code,e.Aa,[t]):e;case 4:return Qd("(() => {\n\t\t\t\t\tconst result = "+e+".next();\n\t\t\t\t\treturn result.done ? false : !!result.value;\n\t\t\t\t})()",{type:0});case 5:throw Error("Trying to get value of generated code with type None");default:throw Error("Unreachable! Trying to get compiled value of unsupported GeneratedCodeType.")}}Object.assign(Vd,(Xd.ALL_RESULTS_TYPE=14,Xd.ANY_TYPE=0,Xd.ARRAY_TYPE=12,Xd.ASYNC_ITERATOR_TYPE=99,Xd.BOOLEAN_TYPE=3,Xd.FIRST_NODE_TYPE=9,Xd.MAP_TYPE=11,Xd.NODES_TYPE=7,Xd.NUMBERS_TYPE=13,Xd.NUMBER_TYPE=1,Xd.STRINGS_TYPE=10,Xd.STRING_TYPE=2,Xd.XPATH_3_1_LANGUAGE="XPath3.1",Xd.XQUERY_3_1_LANGUAGE="XQuery3.1",Xd.XQUERY_UPDATE_3_1_LANGUAGE="XQueryUpdate3.1",Xd));var Jd={DONE_TOKEN:K,getEffectiveBooleanValue:ce,isSubtypeOf:ee,ready:Z},ef={sc:"pathExpr",Qb:"andOp",rc:"orOp",uc:"stringConstantExpr",Ub:"equalOp",pc:"notEqualOp",fc:"lessThanOrEqualOp",ec:"lessThanOp",$b:"greaterThanOrEqualOp",Zb:"greaterThanOp",Vb:"eqOp",lc:"neOp",ic:"ltOp",hc:"leOp",ac:"gtOp",Yb:"geOp",cc:"isOp",oc:"nodeBeforeOp",nc:"nodeAfterOp",Xb:"functionCallExpr"},tf=Object.values(ef);function nf(e,t,n,r,i){return e=Bi(e,n),(e=Bi(e,tf))?(t+=n,n=u(r.Ab(e,t,r)),r=n.next().value,n=n.next().value,r.isAstAccepted?0===i?[Zd(t,r.code,r.Aa),null]:[Qd(t,r.Aa,[r.code]),n]:[r,null]):[Kd("Unsupported: a base expression used with an operand."),null]}function rf(e,t,n){return 4===t&&(e+=".next().value"),47===n&&(e="(function () { const attr = "+e+"; return attr ? domFacade.getData(attr) : null})()"),e}function of(e,t,n,r,i){var o=Pi(Bi(e,"firstOperand")[1],"type");if(e=Pi(Bi(e,"secondOperand")[1],"type"),!o||!e)return Kd("Left or right type of compare are not found, annotation failed.");var s=[47,1];if(!s.includes(o.type)||!s.includes(e.type))return Kd("Unsupported types in compare: ["+oe[o.type]+", "+oe[e.type]+"]");if(!n.isAstAccepted)return n;if(!r.isAstAccepted)return r;if(!o||!e)return Kd("Operands in compare weren't annotated");if(!(s=new Map([["eqOp","==="],["neOp","!=="]])).has(t))return Kd(t+" not yet implemented");t=s.get(t),s=Yd(n.code,n.Aa);var a=Yd(r.code,r.Aa);return Qd("function "+i+"(contextItem) {\n\t\t\t\t"+n.wa.join("\n")+"\n\t\t\t \t"+r.wa.join("\n")+"\n\t \t     \treturn "+rf(s[0],s[1].type,o.type)+" "+t+" "+rf(a[0],a[1].type,e.type)+";\n\t\t}",{type:3,i:{type:0}})}var sf={},af=(sf.equalOp="eqOp",sf.notEqualOp="neOp",sf.lessThanOrEqualOp="leOp",sf.lessThanOp="ltOp",sf.greaterThanOrEqualOp="geOp",sf.greaterThanOp="gtOp",sf),lf={"local-name":function(e,t,n){return hf(e,t,n,uf,"local-name()")},name:function(e,t,n){return hf(e,t,n,cf,"name()")}};function uf(e){return"("+e+".localName || "+e+".target || '')"}function cf(e){return"((("+e+".prefix || '').length !== 0 ? "+e+".prefix + ':' : '')\n\t\t+ ("+e+".localName || "+e+".target || ''))"}function hf(e,t,n,r,i){if(1===(e=Bi(e,"arguments")).length)t="function "+t+"(contextItem) {\n\t\t\tif (contextItem === undefined || contextItem === null) {\n\tthrow new Error('XPDY0002: The function which was called depends on dynamic context, which is absent.');\n}\n\t\t\treturn "+r("contextItem")+";\n\t\t}";else{if(2!==e.length)return Kd("Incorrect arg count for "+i+" function");if(i=e[1],e=(n=u(n.Ab(i,"arg",n))).next().value,n.next(),n=e.isAstAccepted?Qd("arg",e.Aa,[e.code]):e,"contextItemExpr"===i[0])t="function "+t+"(contextItem) {\n\t\t\t\tif (contextItem === undefined || contextItem === null) {\n\tthrow new Error('XPDY0002: The function which was called depends on dynamic context, which is absent.');\n}\n\t\t\t\treturn "+r("contextItem")+";\n\t\t\t}";else{if(!n.isAstAccepted)return n;t="function "+t+"(contextItem) {\n\t\t\t\t"+n.wa+"\n\t\t\t\tconst value = "+Yd(n.code,n.Aa)[0]+';\n\t\t\t\tconst childElement = value.next().value;\n\t\t\t\treturn (value.done ? "" : '+r("childElement")+");\n\t\t\t}"}}return Qd(t,{type:3,i:{type:0}})}function pf(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function df(e,t,n,r){var i=u(nf(e,t,"firstOperand",n,0)),o=i.next().value;return i=i.next().value,o.isAstAccepted?(e=(n=u(nf(e,t,"secondOperand",n,0))).next().value,n=n.next().value,e.isAstAccepted?[Qd("\n\tfunction "+t+"(contextItem) {\n\t\t"+o.wa.join("\n")+"\n\t\t"+e.wa.join("\n")+"\n\t\treturn "+o.code+" "+r+" "+e.code+";\n\t}\n\t",{type:3,i:{type:0}}),"&&"===r?yo(i,n):i||n]:[e,null]):[o,null]}function ff(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return t.filter((function(e){return""!==e})).join(" && ")}function mf(e,t,n,r,i,o){var s=1!==n?"i"+n+" = 0;":"";return Qd("\n\t"+o+"\n\twhile ("+ff(i+n,"i"+n+" < "+i+n+".length")+") {\n\t\tconst contextItem"+n+" = "+i+n+"[i"+n+"];\n\t\tif (!("+(e=ff("contextItem"+n,e,t))+")) {\n\t\t\ti"+n+"++;\n\t\t\tcontinue;\n\t\t}\n\t\t"+r+"\n\t}\n\t"+s+"\n\t",{type:2},["let i"+n+" = 0;"])}function gf(e,t,n,r,i){return Qd("\n\t\t"+i+"\n\t\tif ("+(e=ff("i"+n+" === 0","contextItem"+n,e,t))+") {\n\t\t\t"+r+"\n\t\t}\n\t\t",{type:2},["let i"+n+" = 0;"])}var yf={vc:"textTest",Tb:"elementTest",kc:"nameTest",wc:"Wildcard"},vf=Object.values(yf);function wf(e,t,n){if(null===t.namespaceURI&&"*"!==t.prefix){if(!(n=n.ba(t.prefix||"")||null)&&t.prefix)throw Error("XPST0081: The prefix "+t.prefix+" could not be resolved.");t.namespaceURI=n}n=t.prefix;var r=t.namespaceURI;t=t.localName;var i=e+".nodeType\n\t\t&& ("+e+".nodeType === /*ELEMENT_NODE*/ 1\n\t\t|| "+e+".nodeType === /*ATTRIBUTE_NODE*/ 2)";return"*"===n?"*"===t?[Qd(i,{type:0}),null]:[Qd(i+" && "+e+".localName === "+pf(t),{type:0}),"name-"+t]:[Qd((i="*"!==t?i+" && "+e+".localName === "+pf(t)+" && ":"")+"("+e+".namespaceURI || null) === (("+(n=""===n?e+".nodeType\n&& "+e+".nodeType === /*ELEMENT_NODE*/ 1 ? "+pf(r)+" : null":pf(r))+") || null)",{type:0}),"name-"+t]}function bf(e,t,n){var r=e[0];switch(r){case yf.Tb:return r=(e=Bi(e,"elementName"))&&Bi(e,"star"),null===e||r?t=[Qd(t+".nodeType === /*ELEMENT_NODE*/ 1",{type:0}),null]:t=wf(t,e=Ri(Bi(e,"QName")),n),t;case yf.vc:return[Qd(t+".nodeType === /*TEXT_NODE*/ 3",{type:0}),null];case yf.kc:return wf(t,Ri(e),n);case yf.wc:return Bi(e,"star")?null!==(r=Bi(e,"uri"))?t=wf(t,{localName:"*",namespaceURI:Ii(r),prefix:""},n):(r=Bi(e,"NCName"),t="star"===Bi(e,"*")[0]?wf(t,{localName:Ii(r),namespaceURI:null,prefix:"*"},n):wf(t,{localName:"*",namespaceURI:null,prefix:Ii(r)},n)):t=wf(t,{localName:"*",namespaceURI:null,prefix:"*"},n),t;default:return[Kd("Unsupported: the test '"+r+"'."),null]}}function xf(e,t,n){var r=e[0];switch(r){case ef.sc:r="",Bi(e,"rootExpr")&&(r="\n\t\tlet documentNode = contextItem;\n\t\twhile (documentNode.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\tdocumentNode = domFacade.getParentNode(documentNode);\n\t\t\tif (documentNode === null) {\n\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t}\n\t\t}\n\t\tcontextItem = documentNode;\n\t\t");var i=u(function(e,t){if(0===e.length)return[Qd("\n\t\t\tif (!hasReturned) {\n\t\t\t\thasReturned = true;\n\t\t\t\treturn ready(contextItem);\n\t\t\t}\n\t\t\t",{type:2},["let hasReturned = false;"]),null];for(var n="",r=[],i=null,o=e.length-1;0<=o;o--){var s=e[o],a=o+1,l=Bi(s,"predicates");e:{var c=t,p="",d=[];if(l){l=Di(l,"*");for(var f=null,m=0;m<l.length;m++){var g="step"+a+"_predicate"+m,y=u(c.Ab(l[m],g,c)),v=y.next().value;if(y=y.next().value,!v.isAstAccepted){c=[v,null];break e}if(f=yo(f,y),!(g=Zd(g,"",v.Aa,"contextItem"+a)).isAstAccepted){c=[g,null];break e}p=0===m?p+g.code:p+" && "+g.code,d.push(v.code)}c=[Qd(p,{type:0},d),f]}else c=[Qd("",{type:5},d),null]}if(c=(p=u(c)).next().value,d=p.next().value,!c.isAstAccepted)return[c,null];if(!(p=Bi(s,"xpathAxis")))return[Kd("Unsupported: filter expressions."),null];if(!(l=Bi(s,vf)))return[Kd("Unsupported: the test in the '"+s+"' step."),null];if(n=o===e.length-1?"i"+a+"++;\n\t\t\t\t\t   return ready(contextItem"+a+");":n+"\n\t\t\t\t\t   i"+a+"++;",l=(f=u(bf(l,"contextItem"+a,t))).next().value,f=f.next().value,!l.isAstAccepted)return[l,null];d=yo(f,d);e:switch(l=l.code,f=c.code,p=Ii(p),p){case"attribute":a=[mf(l,f,a,n,"attributeNodes","\n\tlet attributeNodes"+a+";\n\tif (contextItem && contextItem"+(a-1)+".nodeType === /*ELEMENT_NODE*/ 1) {\n\t\tattributeNodes"+a+" =  domFacade.getAllAttributes(contextItem"+(a-1)+" "+(d?', "'+d+'"':"")+");\n\t}\n\t"),"type-1"];break e;case"child":a=[mf(l,f,a,n,"childNodes","const childNodes"+a+" = domFacade.getChildNodes(contextItem"+(a-1)+" "+(d?', "'+d+'"':"")+");"),null];break e;case"parent":a=[gf(l,f,a,n,"\n\tconst contextItem"+a+" = domFacade.getParentNode(contextItem"+(a-1)+" "+(d?', "'+d+'"':"")+");\n\t"),null];break e;case"self":a=[gf(l,f,a,n,"const contextItem"+a+" = contextItem"+(a-1)+";"),d];break e;default:a=[Kd("Unsupported: the "+p+" axis"),null]}if(a=(n=u(a)).next().value,n=n.next().value,!a.isAstAccepted)return[a,null];if(0===o&&(i=n),r.push.apply(r,[].concat(h(a.wa),h(c.wa))),n=a.code,0<Di(s,"lookup").length)return[Kd("Unsupported: lookups."),null]}return[Qd("const contextItem0 = contextItem;"+n,{type:2},r),i]}(Di(e,"stepExpr"),n));return e=i.next().value,i=i.next().value,e.isAstAccepted?[Qd("\n\tfunction "+t+"(contextItem) {\n\t\t"+r+"\n\t\t"+e.wa.join("\n")+"\n\t\tconst next = () => {\n\t\t\t"+e.code+"\n\t\t\treturn DONE_TOKEN;\n\t\t};\n\t\treturn {\n\t\t\tnext,\n\t\t\t[Symbol.iterator]() { return this; }\n\t\t};\n\t}\n\t",{type:3,i:{type:4}}),i]:[e,null];case ef.Qb:return df(e,t,n,"&&");case ef.rc:return df(e,t,n,"||");case ef.uc:return[Qd("const "+t+" = "+(e=pf(e=Bi(e,"value")[1]||""))+";",{type:1}),null];case ef.Ub:case ef.pc:case ef.fc:case ef.ec:case ef.$b:case ef.Zb:case ef.Vb:case ef.lc:case ef.ic:case ef.hc:case ef.ac:case ef.Yb:case ef.cc:case ef.oc:case ef.nc:e:{var o=u(nf(e,t,"firstOperand",n));if(i=o.next().value,o.next(),i.isAstAccepted)if(n=(o=u(nf(e,t,"secondOperand",n))).next().value,o.next(),n.isAstAccepted)switch(r){case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":t=of(e,r,i,n,t);break e;case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":o=Pi(e,"type");var s=Pi(e,"type");t=o&&s?3===o.g&&3===s.g?of(e,af[r],i,n,t):Kd("generalCompare with sequences is still in development"):Kd("types of compare are not known");break e;default:t=Kd("Unsupported compare type")}else t=n;else t=i}return[t,null];case ef.Xb:return r=Ii(Bi(e,"functionName")),[void 0!==lf[r]?lf[r](e,t,n):Kd("Unsupported function: "+r),null];default:return[Kd("Unsupported: the base expression '"+r+"'."),null]}}function Af(e,t,n){var r=Bi(e,"mainModule");if(!r)return Kd("Unsupported: Can not execute a library module.");if(Bi(r,"prolog"))return Kd("Unsupported: XQuery.");r=Mi(r,["queryBody","*"]),n.Ab=xf;var i=u(xf(r,"compiledXPathExpression",n));return n=i.next().value,i.next(),!1===n.isAstAccepted?n:(i=n.wa?n.wa.join("\n"):"",r=Pi(r,"type"),t=function(e,t,n){switch(e){case 9:if(e=(n=u(Yd("compiledXPathExpression",t))).next().value,4!==n.next().value.type)throw Error("Trying access generated code as an iterator while this is not the case.");return Qd("\n\tconst firstResult = "+e+".next();\n\tif (!firstResult.done) {\n\t\treturn firstResult.value\n\t}\n\treturn null;\n\t",{type:2});case 7:return e=(n=u(Yd("compiledXPathExpression",t))).next().value,4!==n.next().value.type?Kd("Return type was not an iterator"):Qd("\n\tconst nodes = [];\n\tfor (const node of "+e+") {\n\t\tnodes.push(node);\n\t}\n\treturn nodes;\n\t",{type:2});case 3:return(n=Zd("compiledXPathExpression","",t)).isAstAccepted?Qd("return "+n.code+";",{type:2}):n;case 2:return n=void 0===n?Kd("Full AST wasn't annotated so we cannot correctly emit a string return"):ee(n,1)||ee(n,47)?Qd("return "+rf(e=(t=u(Yd("compiledXPathExpression",t))).next().value,(t=t.next().value).type,n)+" || '';",{type:2}):Kd("Not implemented: returning anything but strings and attributes from codegen");default:return Kd("Unsupported: the return type '"+e+"'.")}}(t,n.Aa,r?r.type:void 0),!1===t.isAstAccepted?t:(t=i+n.code+t.code,n="\n\treturn (contextItem, domFacade, runtimeLib) => {\n\t\tconst {\n\t\t\tDONE_TOKEN,\n\t\t\tValueType,\n\t\t\tXPDY0002,\n\t\t\tdeterminePredicateTruthValue,\n\t\t\tisSubtypeOf,\n\t\t\tready,\n\t\t\tatomize,\n\t\t} = runtimeLib;",_f(e)&&(n+='\n\t\tif (!contextItem) {\n\t\t\tthrow XPDY0002("Context is needed to evaluate the given path expression.");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error("Context item must be subtype of node().");\n\t\t}\n\t\t'),{code:n+(t+"}\n//# sourceURL=generated.js"),isAstAccepted:!0}))}function _f(e){var t=Di(e,"*");if("pathExpr"===e[0])return!0;for(t=(e=u(t)).next();!t.done;t=e.next())if(_f(t.value))return!0;return!1}var kf={},Ef=(kf["http://www.w3.org/2005/XQueryX"]="xqx",kf["http://www.w3.org/2007/xquery-update-10"]="xquf",kf["http://fontoxml.com/fontoxpath"]="x",kf);function Cf(e,t,n,r,i){if("string"==typeof n)return 0===n.length?null:t.createTextNode(n);if(!Array.isArray(n))throw new TypeError("JsonML element should be an array or string");r=function(e,t){switch(e){case"copySource":case"insertAfter":case"insertAsFirst":case"insertAsLast":case"insertBefore":case"insertInto":case"modifyExpr":case"newNameExpr":case"replacementExpr":case"replaceValue":case"returnExpr":case"sourceExpr":case"targetExpr":case"transformCopies":case"transformCopy":return{localName:e,tb:t||"http://www.w3.org/2005/XQueryX"};case"deleteExpr":case"insertExpr":case"renameExpr":case"replaceExpr":case"transformExpr":return{localName:e,tb:"http://www.w3.org/2007/xquery-update-10"};case"x:stackTrace":return{localName:"stackTrace",tb:"http://fontoxml.com/fontoxpath"};default:return{localName:e,tb:"http://www.w3.org/2005/XQueryX"}}}(n[0],r);var o=r.localName;r=r.tb;var s=t.createElementNS(r,Ef[r]+":"+o),a=n[1],l=1;if("object"==typeof a&&!Array.isArray(a)){if(null!==a)for(var c=(l=u(Object.keys(a))).next();!c.done;c=l.next()){var h=a[c=c.value];null!==h&&("type"===c?void 0!==h&&e.setAttributeNS(s,r,"fontoxpath:"+c,ae(h)):("start"!==c&&"end"!==c||"stackTrace"!==o||(h=JSON.stringify(h)),i&&"prefix"===c&&""===h||e.setAttributeNS(s,r,Ef[r]+":"+c,h)))}l=2}for(o=l,a=n.length;o<a;++o)null!==(l=Cf(e,t,n[o],r,i))&&e.insertBefore(s,l,null);return s}function Sf(e,t,n){var r=e.stack;r&&(r.includes(e.message)&&(r=r.substr(r.indexOf(e.message)+e.message.length).trim()),(r=r.split("\n")).splice(10),r=r.map((function(e){return e.startsWith("    ")||e.startsWith("\t")?e:"    "+e})),r=r.join("\n")),e=Error.call(this,"Custom XPath function Q{"+n+"}"+t+" raised:\n"+e.message+"\n"+r),this.message=e.message,"stack"in e&&(this.stack=e.stack)}function Of(e,t,n){return 0===t.g?e.G()?null:Ld(e.first(),n).next(0).value:2===t.g||1===t.g?e.N().map((function(e){if(ee(e.type,47))throw Error("Cannot pass attribute nodes to custom functions");return Ld(e,n).next(0).value})):Ld(e.first(),n).next(0).value}y(Sf,Error);var Tf=new Map;function Nf(e){var t;e:{if(t=Na.get(e))for(var n=u(Object.keys(t)),r=n.next();!r.done;r=n.next())if(t[r=r.value]&&t[r].length){t=t[r][0].h;break e}t=null}if(t)return t;if(Tf.has(e))return Tf.get(e);if(null===(t=Mi(t="string"==typeof e?md(e,{aa:!1}):Pa(e),["mainModule","queryBody","*"])))throw Error("Library modules do not have a specificity");return t=Ta(t,{sa:!1,aa:!1}),Tf.set(e,t),t}var Bf=new _e;return void 0!==n&&(n.compareSpecificity=function(e,t){return Cr(Nf(e).s,Nf(t).s)},n.compileXPathToJavaScript=function(e,t,n){n=n||{},t=t||0,"string"==typeof e?e=md(e=Fa(e),{aa:"XQuery3.1"===n.language||"XQueryUpdate3.1"===n.language,debug:!1}):e=Pa(e);var r=Bi(e,"mainModule");return r?Bi(r,"prolog")?Kd("Unsupported: XQuery Prologs are not supported."):(eo(e,n=new lo(new _i(new hi((r={ba:n.namespaceResolver||Pd(null)}).ba,{},void 0===n.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":n.defaultFunctionNamespaceURI,n.functionNameResolver||Md("http://www.w3.org/2005/xpath-functions"))))),Af(e,t,r)):Kd("Unsupported: XQuery Library modules are not supported.")},n.domFacade=Bf,n.evaluateXPath=Vd,n.evaluateXPathToArray=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.Rb,i)},n.evaluateXPathToAsyncIterator=qd,n.evaluateXPathToBoolean=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.BOOLEAN_TYPE,i)},n.evaluateXPathToFirstNode=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.Wb,i)},n.evaluateXPathToMap=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.jc,i)},n.evaluateXPathToNodes=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.mc,i)},n.evaluateXPathToNumber=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.NUMBER_TYPE,i)},n.evaluateXPathToNumbers=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.qc,i)},n.evaluateXPathToString=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.STRING_TYPE,i)},n.evaluateXPathToStrings=function(e,t,n,r,i){return Vd(e,t,n,r,Vd.tc,i)},n.evaluateUpdatingExpression=function(e,t,n,r,i){var o,s,a,l,u,c,h,p,d,f;return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(o){o.done?r(o.value):Promise.resolve(o.value).then(t,n).then(e,i)}(e.next())}))}(new k(new x((function(m){switch(m.h){case 1:i=i||{};try{l=Dd(e,t,n||null,r||{},i||{},{sa:!0,aa:!0,debug:!!i.debug,Ja:!!i.disableCache}),o=l.zb,s=l.Bb,a=l.da}catch(t){ii(e,t)}if(a.I){m.h=2;break}u=[];var g=(c=qd(e,t,n,r,Object.assign(Object.assign({},i),{language:"XQueryUpdate3.1"}))).next();return m.h=3,{value:g};case 3:h=m.u;case 4:if(h.done){m.h=6;break}return u.push(h.value),g=c.next(),m.h=7,{value:g};case 7:h=m.u,m.h=4;break;case 6:return p={},m.return(Promise.resolve((p.pendingUpdateList=[],p.xdmValue=u,p)));case 2:try{f=a.u(o,s),d=f.next(0)}catch(t){ii(e,t)}return m.return(Wd(d.value,e,i.returnType,s))}}))))},n.evaluateUpdatingExpressionSync=function(e,t,n,r,i){i=i||{};try{var o=Dd(e,t,n||null,r||{},i||{},{sa:!0,aa:!0,debug:!!i.debug,Ja:!!i.disableCache}),s=o.zb,a=o.Bb,l=o.da}catch(t){ii(e,t)}if(!l.I)return s={},(a={}).pendingUpdateList=[],a.xdmValue=Vd(e,t,n,r,i.i,Object.assign(Object.assign({},i),(s.language=Vd.xc,s))),a;try{var u=l.u(s,a).next(0)}catch(t){ii(e,t)}return Wd(u.value,e,i.returnType,a)},n.executeJavaScriptCompiledXPath=function(e,t,n){return n=n||new _e,e()(t,n,Jd)},n.executePendingUpdateList=function(e,t,n,r){t=new Te(t||new _e),r=r?new Ce(r):Ee,n=n?n=new Bd(n):null,yr(e=e.map(la),t,n,r)},n.getBucketForSelector=function(e){return Nf(e).A()},n.getBucketsForNode=Ae,n.precompileXPath=function(e){return Promise.resolve(e)},n.registerXQueryModule=function(e,t){if(Ji(t=md(e,{aa:!0,debug:(t=void 0===t?{debug:!1}:t).debug}),new lo(void 0)),!(t=Bi(t,"libraryModule")))throw Error("XQuery module must be declared in a library module.");var n=Bi(t,"moduleDecl"),r=Bi(n,"uri"),i=Ii(r);if(r=Ii(n=Bi(n,"prefix")),Si(n=new _i(new hi((function(){return null}),Object.create(null),"http://www.w3.org/2005/xpath-functions",Md("http://www.w3.org/2005/xpath-functions"))),r,i),null!==(t=Bi(t,"prolog"))){try{var o=yd(t,n)}catch(t){ii(e,t)}o.Oa.forEach((function(e){if(i!==e.namespaceURI)throw Error("XQST0048: Functions and variables declared in a module must reside in the module target namespace.")})),Da(i,o)}else Da(i,{Oa:[],Wa:[]});return i},n.registerCustomXPathFunction=function(e,t,n,r){e=function(e){if("object"==typeof e)return e;if(2!==(e=e.split(":")).length)throw Error("Do not register custom functions in the default function namespace");var t=u(e);e=t.next().value,t=t.next().value;var n=ci[e];if(!n){if(n="generated_namespace_uri_"+e,ci[e])throw Error("Prefix already registered: Do not register the same prefix twice.");ci[e]=n}return{localName:t,namespaceURI:n}}(e);var i=e.namespaceURI,o=e.localName;if(!i)throw gi();var s=t.map((function(e){return ue(e)})),a=ue(n);li(i,o,s,a,(function(e,t,n){var l=Array.from(arguments);l.splice(0,3),l=l.map((function(e,n){return Of(e,s[n],t)}));var u={};u.currentContext=t.u,u.domFacade=t.h.h;try{var c=r.apply(void 0,[u].concat(h(l)))}catch(e){throw new Sf(e,o,i)}return c&&"object"==typeof c&&Object.getOwnPropertySymbols(c).includes(Id)?ge.create(c.Fb):wt(t.h,c,a)}))},n.parseScript=function(e,t,n,r){r=void 0===r?Ee:r;var i=md(e=Fa(e),{aa:"XQuery3.1"===t.language||"XQueryUpdate3.1"===t.language,debug:t.debug}),o=new hi(t.namespaceResolver||function(){return null},{},void 0===t.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":t.defaultFunctionNamespaceURI,t.functionNameResolver||function(){return null});o=new _i(o);var s=Bi(i,["mainModule","libraryModule"]),a=Bi(s,"moduleDecl");return a&&Si(o,Ii(Bi(a,"prefix")),a=Ii(Bi(a,"uri"))),(s=Bi(s,"prolog"))&&yd(s,o,!1),!1!==t.annotateAst&&Ji(i,new lo(o)),o=new _e,t=Cf(r,n,i,null,!1===t.Mc),r.insertBefore(t,n.createComment(e),o.getFirstChild(t)),t},n.profiler=jd,n.createTypedValueFactory=function(e){return function(t,n){return t=vt(new Te(null===n?new _e:n),t,ue(e)),(n={})[Id]=!0,n.Fb=t,n}},n.Language={XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"},n.ReturnType=Ud),n}.call("undefined"==typeof window?void 0:window,Us,ra);ia.compareSpecificity,ia.compileXPathToJavaScript,ia.createTypedValueFactory,ia.domFacade,ia.evaluateUpdatingExpression,ia.evaluateUpdatingExpressionSync;const oa=ia.evaluateXPath;ia.evaluateXPathToArray,ia.evaluateXPathToAsyncIterator;const sa=ia.evaluateXPathToBoolean,aa=ia.evaluateXPathToFirstNode;ia.evaluateXPathToMap;const la=ia.evaluateXPathToNodes,ua=ia.evaluateXPathToNumber;ia.evaluateXPathToNumbers;const ca=ia.evaluateXPathToString,ha=ia.evaluateXPathToStrings;ia.executeJavaScriptCompiledXPath,ia.executePendingUpdateList,ia.getBucketForSelector;const pa=ia.getBucketsForNode;ia.Language;const da=ia.parseScript;ia.precompileXPath,ia.profiler;const fa=ia.registerCustomXPathFunction,ma=ia.registerXQueryModule;ia.ReturnType;class ga{constructor(e){this._onNodeTouched=e}getAllAttributes(e){return Array.from(e.attributes)}getAttribute(e,t){return e.getAttribute(t)}getChildNodes(e,t){const n=Array.from(e.childNodes).filter((e=>!t||pa(e).includes(t)));return n.forEach((e=>this._onNodeTouched(e))),n}getData(e){return e.nodeType===Node.ATTRIBUTE_NODE?(this._onNodeTouched(e),e.value):(this._onNodeTouched(e.parentNode),e.data)}getFirstChild(e,t){for(const n of e.childNodes)if(!t||pa(n).includes(t))return this._onNodeTouched(n),n;return null}getLastChild(e,t){const n=e.getChildNodes().filter((e=>!t||pa(e).includes(t))),r=n[n.length-1];return r||null}getNextSibling(e,t){for(let n=e.nextSibling;n;n=n.nextSibling)if(pa(n).includes(t))return this._onNodeTouched(n),n;return null}getParentNode(e){return e.parentNode}getPreviousSibling(e,t){for(let{previousSibling:n}=e;n;n=n.previousSibling)if(pa(n).includes(t))return n;return null}}class ya{static getParentBindingElement(e){return e.parentNode&&e.parentNode.nodeType!==Node.DOCUMENT_NODE?e.parentNode.hasAttribute("ref")?e.parentNode:ya.getParentBindingElement(e.parentNode):null}static isAbsolutePath(e){return null!=e&&(e.startsWith("/")||e.startsWith("instance("))}static isSelfReference(e){return"."===e||"./text()"===e||"text()"===e||""===e||null===e}static getDefaultInstance(e){const t=ya.getForeElement(e).querySelector("fx-instance");if(!t)throw new Error("no default instance present");return t}static getForeElement(e){if("FX-FORE"===e.nodeName)return e;if(e.parentNode)return ya.getForeElement(e.parentNode);throw new Error("no Fore element present")}static getInstanceId(e){if(!e)return"default";if(e.startsWith("instance()"))return"default";if(e.startsWith("instance(")){const t=e.substring(e.indexOf("(")+1);return t.substring(1,t.indexOf(")")-1)}return null}static resolveInstance(e){const t=ya.getInstanceId(e.getAttribute("ref"));if(null!==t)return t;const n=ya.getParentBindingElement(e);return n?this.resolveInstance(n):"default"}static getPath(e){const t=ca("path()",e);return ya.shortenPath(t)}static shortenPath(e){const t=e.replaceAll(/(Q{(.*?)\})/g,""),n=t.substring(1,t.length);return n.substring(n.indexOf("/"),t.length)}static getBasePath(e){return e.split(":")[0]}}function va(e,t,n,r){const i={};return function(o){if(i[o])return;const s={},a=[],l=[];for(l.push({node:o,processed:!1});l.length>0;){const o=l[l.length-1],{processed:u}=o,{node:c}=o;if(u)l.pop(),a.pop(),s[c]=!1,i[c]=!0,t&&0!==e[c].length||n.push(c);else{if(i[c]){l.pop();continue}if(s[c]){if(r){l.pop();continue}throw a.push(c),window.dispatchEvent(new CustomEvent("compute-exception",{composed:!1,bubbles:!0,detail:{path:a,message:"cyclic graph"}})),new Error(`Cyclic at ${a}`)}s[c]=!0,a.push(c);const t=e[c];for(let e=t.length-1;e>=0;e-=1)l.push({node:t[e],processed:!1});o.processed=!0}}}}function wa(e){this.nodes={},this.outgoingEdges={},this.incomingEdges={},this.circular=e&&!!e.circular}wa.prototype={size(){return Object.keys(this.nodes).length},addNode(e,t){this.hasNode(e)||(this.nodes[e]=2===arguments.length?t:e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])},removeNode(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach((t=>{Object.keys(t).forEach((n=>{const r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)}),this)})))},hasNode(e){return Object.prototype.hasOwnProperty.call(this.nodes,e)},getNodeData(e){if(this.hasNode(e))return this.nodes[e];throw new Error(`Node does not exist: ${e}`)},setNodeData(e,t){if(!this.hasNode(e))throw new Error(`Node does not exist: ${e}`);this.nodes[e]=t},addDependency(e,t){if(!this.hasNode(e))throw new Error(`Node does not exist: ${e}`);if(!this.hasNode(t))throw new Error(`Node does not exist: ${t}`);return-1===this.outgoingEdges[e].indexOf(t)&&this.outgoingEdges[e].push(t),-1===this.incomingEdges[t].indexOf(e)&&this.incomingEdges[t].push(e),!0},removeDependency(e,t){let n;this.hasNode(e)&&(n=this.outgoingEdges[e].indexOf(t),n>=0&&this.outgoingEdges[e].splice(n,1)),this.hasNode(t)&&(n=this.incomingEdges[t].indexOf(e),n>=0&&this.incomingEdges[t].splice(n,1))},clone(){const e=this,t=new wa;return Object.keys(e.nodes).forEach((n=>{t.nodes[n]=e.nodes[n],t.outgoingEdges[n]=e.outgoingEdges[n].slice(0),t.incomingEdges[n]=e.incomingEdges[n].slice(0)})),t},directDependenciesOf(e){if(this.hasNode(e))return this.outgoingEdges[e].slice(0);throw new Error(`Node does not exist: ${e}`)},directDependantsOf(e){if(this.hasNode(e))return this.incomingEdges[e].slice(0);throw new Error(`Node does not exist: ${e}`)},dependenciesOf(e,t){if(this.hasNode(e)){const n=[];va(this.outgoingEdges,t,n,this.circular)(e);const r=n.indexOf(e);return r>=0&&n.splice(r,1),n}throw new Error(`Node does not exist: ${e}`)},dependantsOf(e,t){if(this.hasNode(e)){const n=[];va(this.incomingEdges,t,n,this.circular)(e);const r=n.indexOf(e);return r>=0&&n.splice(r,1),n}throw new Error(`Node does not exist: ${e}`)},entryNodes(){const e=this;return Object.keys(this.nodes).filter((t=>0===e.incomingEdges[t].length))},overallOrder(e){const t=this,n=[],r=Object.keys(this.nodes);if(0===r.length)return n;if(!this.circular){const e=va(this.outgoingEdges,!1,[],this.circular);r.forEach((t=>{e(t)}))}const i=va(this.outgoingEdges,e,n,this.circular);return r.filter((e=>0===t.incomingEdges[e].length)).forEach((e=>{i(e)})),this.circular&&r.filter((e=>-1===n.indexOf(e))).forEach((e=>i(e))),n}},wa.prototype.directDependentsOf=wa.prototype.directDependantsOf,wa.prototype.dependentsOf=wa.prototype.dependantsOf;class ba{static get ACTION_ELEMENTS(){return["FX-ACTION","FX-DELETE","FX-DISPATCH","FX-HIDE","FX-INSERT","FX-LOAD","FX-MESSAGE","FX-REBUILD","FX-RECALCULATE","FX-REFRESH","FX-RENEW","FX-RELOAD","FX-REPLACE","FX-RESET","FX-RETAIN","FX-RETURN","FX-REVALIDATE","FX-SEND","FX-SETFOCUS","FX-SETINDEX","FX-SETVALUE","FX-SHOW","FX-TOGGLE","FX-UPDATE"]}static createUUID(){const e=[],t="0123456789abcdef";for(let n=0;n<36;n+=1)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";return e.join("")}static get XFORMS_NAMESPACE_URI(){return"http://www.w3.org/2002/xforms"}static isActionElement(e){return ba.ACTION_ELEMENTS.includes(e)}static get UI_ELEMENTS(){return["FX-ALERT","FX-CONTROL","FX-DIALOG","FX-FILENAME","FX-MEDIATYPE","FX-GROUP","FX-HINT","FX-ITEMS","FX-OUTPUT","FX-RANGE","FX-REPEAT","FX-REPEATITEM","FX-SWITCH","FX-SECRET","FX-SELECT","FX-SUBMIT","FX-TEXTAREA","FX-TRIGGER","FX-UPLOAD","FX-VAR"]}static get MODEL_ELEMENTS(){return["FX-BIND","FX-FUNCTION","FX-MODEL","FX-INSTANCE","FX-SUBMISSION"]}static isUiElement(e){return ba.UI_ELEMENTS.includes(e),ba.UI_ELEMENTS.includes(e)}static async refreshChildren(e,t){const n=new Promise((n=>{const{children:r}=e;r&&Array.from(r).forEach((e=>{"FX-FORE"===e.nodeName.toUpperCase()&&n("done"),ba.isUiElement(e.nodeName)&&"function"==typeof e.refresh?e.refresh(t):"FX-MODEL"!==e.nodeName.toUpperCase()&&ba.refreshChildren(e,t)})),n("done")}));return n}static copyDom(e){const t=(new DOMParser).parseFromString("<fx-fore></fx-fore>","text/html").querySelector("fx-fore");return this.convertFromSimple(e,t),t.removeAttribute("convert"),t}static convertFromSimple(e,t){const n=e.childNodes;n&&Array.from(n).forEach((e=>{const n=`FX-${e.nodeName.toUpperCase()}`;if(ba.MODEL_ELEMENTS.includes(n)||ba.UI_ELEMENTS.includes(n)||ba.ACTION_ELEMENTS.includes(n)){const r=t.ownerDocument.createElement(n);t.appendChild(r),ba.copyAttributes(e,r),ba.convertFromSimple(e,r)}else{if(e.nodeType===Node.TEXT_NODE){const n=t.ownerDocument.createTextNode(e.textContent);t.appendChild(n)}if(e.nodeType===Node.ELEMENT_NODE){const n=t.ownerDocument.createElement(e.nodeName);t.appendChild(n),ba.copyAttributes(e,t),ba.convertFromSimple(e,n)}}}))}static copyAttributes(e,t){return Array.from(e.attributes).forEach((e=>{t.setAttribute(e.nodeName,e.nodeValue)}))}static getClosest(e,t){for(;!t.matches(e);){if(t.matches("fx-fore"))return null;if(!(t=t.parentNode))return null}return t}static getContentType(e,t){return"application/x-www-form-urlencoded"===t?"application/x-www-form-urlencoded; charset=UTF-8":"xml"===e.type?"application/xml; charset=UTF-8":"json"===e.type?"application/json":null}static fadeInElement(e){let t=()=>(e.getAnimations&&e.getAnimations().map((e=>e.finish())),t=e.animate({opacity:[0,1]},600),t.finished);return t()}static fadeOutElement(e,t){let n=()=>(e.getAnimations&&e.getAnimations().map((e=>e.finish())),n=e.animate({opacity:[1,0]},t),n.finished);return n()}static dispatch(e,t,n){const r=new CustomEvent(t,{composed:!1,bubbles:!0,detail:n});e.dispatchEvent(r)}static prettifyXml(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=(new DOMParser).parseFromString(['<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">','  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>','  <xsl:strip-space elements="*"/>','  <xsl:template match="text()">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">',"    <xsl:copy>",'        <xsl:apply-templates select="node()|@*"/>',"    </xsl:copy>","  </xsl:template>","</xsl:stylesheet>"].join("\n"),"application/xml"),r=new XSLTProcessor;r.importStylesheet(n);const i=r.transformToDocument(t);return(new XMLSerializer).serializeToString(i)}static formatXml(e){for(var t=(e=e.replace(/(>)(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),n=0;n<t.length;n++){var r=t[n];Boolean(r.match(/<.+\/>/)),Boolean(r.match(/<\/.+>/)),Boolean(r.match(/<[^!].*>/))}}static async loadForeFromUrl(e,t){await fetch(t,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"text/html"}}).then((e=>e.headers.get("content-type").toLowerCase().startsWith("text/html")?e.text().then((e=>(new DOMParser).parseFromString(e,"text/html"))):"done")).then((t=>{const n=t.querySelector("fx-fore");n||e.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{message:"cyclic graph"}})),e.appendChild(n),n.classList.add("widget")})).catch((n=>{e.dispatchEvent(new CustomEvent("error",{composed:!1,bubbles:!0,detail:{error:n,message:`'${t}' not found or does not contain Fore element.`}}))}))}}ba.READONLY_DEFAULT=!1,ba.REQUIRED_DEFAULT=!1,ba.RELEVANT_DEFAULT=!0,ba.CONSTRAINT_DEFAULT=!0,ba.TYPE_DEFAULT="xs:string";const xa="http://www.w3.org/2002/xforms",Aa=new Map,_a=[];function ka(e,t,n){return Aa.has(e)?Aa.get(e).set(t,n):Aa.set(e,new Map)}const Ea=e=>{if(!e)return"http://www.w3.org/1999/xhtml"};function Ca(e,t,n=null){const r=la("outermost(ancestor-or-self::fx-fore[1]/(descendant::fx-fore|descendant::*[@id = $id]))[not(self::fx-fore)]",t,null,{id:e},{namespaceResolver:Ea});if(0===r.length)return null;if(1===r.length&&sa("(ancestor::fx-fore | ancestor::fx-repeat)[last()]/self::fx-fore",r[0],null,null,{namespaceResolver:Ea})){const e=r[0];return n&&e.localName!==n?null:e}for(const e of la("ancestor::fx-repeatitem => reverse()",t,null,null,{namespaceResolver:Ea})){const t=r.filter((t=>e.contains(t)));switch(t.length){case 0:break;case 1:{const e=t[0];return n&&e.localName!==n?null:e}default:{const e=t.find((e=>la("every $ancestor of ancestor::fx-repeatitem satisfies $ancestor is $ancestor/../child::fx-repeatitem[../@repeat-index]",e,null,{})));return e?n&&e.localName!==n?null:e:null}}}return null}const Sa=(new DOMParser).parseFromString("<xml />","text/xml");function Oa(e,t){const n=(r=e,i=t,Aa.has(r)&&Aa.get(r).get(i)||null);var r,i;if(n)return n;let o=function(e){if(!e.includes("instance"))return[];const t=da(e,{},Sa);return ha('descendant::xqx:functionCallExpr\n\t\t\t\t[xqx:functionName = "instance"]\n\t\t\t\t/xqx:arguments\n\t\t\t\t/xqx:stringConstantExpr\n\t\t\t\t/xqx:value',t,null,{},{namespaceResolver:e=>"xqx"===e?"http://www.w3.org/2005/XQueryX":void 0})}(e);if(0===o.length){const n=t.parentNode&&t.parentNode.nodeType===t.ELEMENT&&t.parentNode.closest("[ref]");if(n){const r=Oa(n.getAttribute("ref"),n);return ka(e,t,r),r}o=["default"]}if(1===o.length){let n;if("default"===o[0]){const e=aa("ancestor-or-self::fx-fore[1]",t,null,null,{namespaceResolver:Ea});n=e&&e.querySelector("fx-instance")}else n=Ca(o[0],t,"fx-instance");if(n&&n.hasAttribute("xpath-default-namespace")){const r=n.getAttribute("xpath-default-namespace"),i=e=>{if(!e)return r};return ka(e,t,i),i}}o.length;const s=ca("ancestor-or-self::*/@xpath-default-namespace[last()]",t)||"",a=function(e){return""===e?s:ca('ancestor-or-self::*/@*[name() = "xmlns:" || $prefix][last()]',t,null,{prefix:e})};return ka(e,t,a),a}function Ta(e,t,n){return(t&&t.ownerDocument||t)===window.document?Ea:Oa(e,n)}function Na({prefix:e,localName:t},n){switch(t){case"context":case"base64encode":case"boolean-from-string":case"current":case"depends":case"event":case"index":case"instance":case"log":case"parse":case"logtree":return{namespaceURI:xa,localName:t};default:return""===e&&_a.includes(t)?{namespaceURI:"http://www.w3.org/2005/xquery-local-functions",localName:t}:"fn"===e||""===e?{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:t}:"local"===e?{namespaceURI:"http://www.w3.org/2005/xquery-local-functions",localName:t}:null}}function Ba(e){let t=e;for(;t&&!("inScopeVariables"in t);)t=t.parentNode;if(!t)return{};const n={};if(t.inScopeVariables)for(const e of t.inScopeVariables.keys()){const r=t.inScopeVariables.get(e);r&&(n[e]=r.value)}return n}function Ia(e,t,n,r={},i={}){const o=Ta(e,t,n),s=Ba(n);return oa(e,t,null,{...s,...r},oa.ALL_RESULTS_TYPE,{currentContext:{formElement:n,variables:r},moduleImports:{xf:xa},functionNameResolver:Na,namespaceResolver:o,language:i.language||Ia.XPATH_3_1})}function Pa(e,t,n){const r=Ta(e,t,n),i=Ba(n);return aa(e,t,null,i,{defaultFunctionNamespaceURI:xa,moduleImports:{xf:xa},currentContext:{formElement:n},functionNameResolver:Na,namespaceResolver:r})}function Ma(e,t,n){const r=Ta(e,t,n),i=Ba(n);return la(e,t,null,i,{currentContext:{formElement:n},functionNameResolver:Na,moduleImports:{xf:xa},namespaceResolver:r})}function Da(e,t,n){const r=Ta(e,t,n),i=Ba(n);return sa(e,t,null,i,{currentContext:{formElement:n},functionNameResolver:Na,moduleImports:{xf:xa},namespaceResolver:r})}function Ra(e,t,n,r=null,i=n){const o=Ta(e,t,n),s=Ba(n);return ca(e,t,r,s,{currentContext:{formElement:n},functionNameResolver:Na,moduleImports:{xf:xa},namespaceResolver:o})}function Fa(e,t,n,r=null,i=n){const o=Ta(e,t,n),s=Ba(n);return ua(e,t,r,s,{currentContext:{formElement:n},functionNameResolver:Na,moduleImports:{xf:xa},namespaceResolver:o})}const La=(e,t)=>{const n=e.currentContext.formElement;if(t){const e=Ca(t,n);if(e){if("FX-REPEAT"===e.nodeName){const{nodeset:t}=e;for(let r=n;r;r=r.parentNode)if(r.parentNode===e){return t[Array.from(r.parentNode.children).indexOf(r)]}}return e.nodeset}}const r=ya.getParentBindingElement(n);return r?r.nodeset:n.getInScopeContext()};function Ua(e,t){if(t&&t.nodeType===Node.ELEMENT_NODE&&t.children){const n=document.createElement("details");n.setAttribute("data-path",t.nodeName);const r=document.createElement("summary");let i,o=` <${t.nodeName}`;Array.from(t.attributes).forEach((e=>{o+=` ${e.nodeName}="${e.nodeValue}"`})),t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&""!==t.firstChild.data.trim()?(i=t.firstChild.nodeValue,o+=`>${i}</${t.nodeName}>`):o+=">",r.textContent=o,n.appendChild(r),0!==t.childElementCount?n.setAttribute("open","open"):r.setAttribute("style","list-style:none;"),e.appendChild(n),Array.from(t.children).forEach((e=>{Ua(n,e)}))}}fa({namespaceURI:xa,localName:"context"},[],"item()?",La),fa({namespaceURI:xa,localName:"context"},["xs:string"],"item()?",La),fa({namespaceURI:xa,localName:"current"},["xs:string"],"item()?",((e,t)=>(e.currentContext.formElement,null))),fa({namespaceURI:xa,localName:"log"},["xs:string?"],"xs:string?",((e,t)=>{const{formElement:n}=e.currentContext,r=Ca(t,n,"fx-instance");if(r&&"json"!==r.getAttribute("type")){const e=(new XMLSerializer).serializeToString(r.getDefaultContext());return ba.prettifyXml(e)}return null})),fa({namespaceURI:xa,localName:"parse"},["xs:string?"],"element()?",((e,t)=>(new DOMParser).parseFromString(t,"application/xml").firstElementChild)),fa({namespaceURI:xa,localName:"logtree"},["xs:string?"],"element()?",((e,t)=>{const{formElement:n}=e.currentContext,r=Ca(t,n,"fx-instance");if(r){const t=document.createElement("div");t.setAttribute("class","logtree");const n=e.currentContext.formElement,i=n.querySelector(".logtree");i&&i.parentNode.removeChild(i);const o=Ua(t,r.getDefaultContext());o&&n.appendChild(o)}return null}));const $a=(e,t)=>{const n=aa("ancestor-or-self::fx-fore[1]",e.currentContext.formElement,null,null,{namespaceResolver:Ea}),r=t?Ca(t,n,"fx-instance"):n.querySelector("fx-instance");if(r){return r.getDefaultContext()}return null};fa({namespaceURI:xa,localName:"index"},["xs:string?"],"xs:integer?",((e,t)=>{const{formElement:n}=e.currentContext;if(null===t)return 1;const r=Ca(t,n,"fx-repeat");return r?r.getAttribute("index"):Number(1)})),fa({namespaceURI:xa,localName:"instance"},[],"item()?",(e=>$a(e,null))),fa({namespaceURI:xa,localName:"instance"},["xs:string?"],"item()?",$a),fa({namespaceURI:xa,localName:"depends"},["node()*"],"item()?",((e,t)=>t[0])),fa({namespaceURI:xa,localName:"event"},["xs:string?"],"item()?",((e,t)=>{if(!t)return[];if(e.currentContext.variables){const n=e.currentContext.variables[t];if(n.nodeType,n)return e.currentContext.variables[t]}return e.currentContext.formElement.inScopeVariables?e.currentContext.formElement.inScopeVariables.get(t):[]})),ma(`\n    module namespace xf="${xa}";\n\n    declare %public function xf:boolean-from-string($str as xs:string) as xs:boolean {\n        lower-case($str) = "true" or $str = "1"\n    };\n`),fa({namespaceURI:xa,localName:"base64encode"},["xs:string?"],"xs:string?",((e,t)=>btoa(t)));class Ha extends HTMLElement{constructor(){super(),this.model=this.parentNode,this.attachShadow({mode:"open"})}connectedCallback(){this.hasAttribute("src")&&(this.src=this.getAttribute("src")),this.hasAttribute("id")?this.id=this.getAttribute("id"):this.id="default",this.hasAttribute("type")?this.type=this.getAttribute("type"):this.type="xml";this.shadowRoot.innerHTML="\n            <style>\n                \n            :host {\n                display: none;\n            }\n            :host * {\n                display:none;\n            }\n            ::slotted(*){\n                display:none;\n            }\n        \n            </style>\n            \n        \n        "}async init(){await this._initInstance().then((()=>(this.dispatchEvent(new CustomEvent("instance-loaded",{composed:!0,bubbles:!0,detail:{instance:this}})),this)))}evalXPath(e){const t=this.parentElement.parentElement;return Pa(e,this.getDefaultContext(),t)}getInstanceData(){return this.instanceData||this._createInstanceData(),this.instanceData}setInstanceData(e){e?this.instanceData=e:this._createInstanceData()}getDefaultContext(){return"xml"===this.type?this.instanceData.firstElementChild:this.instanceData}async _initInstance(){if("#querystring"===this.src){const e=new URLSearchParams(location.search),t=(new DOMParser).parseFromString("<data></data>","application/xml"),n=t.firstElementChild;for(const r of e){const e=t.createElement(r[0]);e.appendChild(t.createTextNode(r[1])),n.appendChild(e)}this.instanceData=t}else this.src?await this._loadData():0!==this.childNodes.length&&this._useInlineData()}_createInstanceData(){if("xml"===this.type){const e=(new DOMParser).parseFromString("<data></data>","application/xml");this.instanceData=e}"json"===this.type&&(this.instanceData={})}async _loadData(){const e=`${this.src}`,t=ba.getContentType(this,"get");await fetch(e,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":t}}).then((e=>{const{status:t}=e;if(t>=400)throw alert(`response status:  ${t} - failed to load data for '${this.src}' - stopping.`),new Error(`failed to load data - status: ${t}`);const n=e.headers.get("content-type").toLowerCase();return n.startsWith("text/html")?e.text().then((e=>(new DOMParser).parseFromString(e,"text/html"))):n.startsWith("text/plain")||n.startsWith("text/markdown")?e.text():n.startsWith("application/json")?e.json():n.startsWith("application/xml")?e.text().then((e=>(new DOMParser).parseFromString(e,"application/xml"))):"done"})).then((e=>{e.nodeType,this.instanceData=e})).catch((e=>{throw new Error(`failed loading data ${e}`)}))}_getContentType(){return"xml"===this.type?"application/xml":"json"===this.type?"application/json":null}_useInlineData(){if("xml"===this.type){const e=(new DOMParser).parseFromString(this.innerHTML,"application/xml");this.instanceData=e}else"json"===this.type?this.instanceData=JSON.parse(this.textContent):"html"===this.type?this.instanceData=this.firstElementChild.children:"text"===this.type&&(this.instanceData=this.textContent)}_handleResponse(){const e=this.shadowRoot.getElementById("loader"),t=(new DOMParser).parseFromString(e.lastResponse,"application/xml");this.instanceData=t}_handleError(){this.shadowRoot.getElementById("loader")}}customElements.get("fx-instance")||customElements.define("fx-instance",Ha);class Ga{constructor(e,t,n,r,i,o,s,a,l){this.path=e,this.ref=t,this.constraint=o,this.readonly=n,this.relevant=r,this.required=i,this.type=s,this.node=a,this.bind=l,this.changed=!1,this.alerts=[],this.boundControls=[]}get value(){return this.node.nodeType?this.node.nodeType===Node.ATTRIBUTE_NODE?this.node.nodeValue:this.node.textContent:this.node}set value(e){e.nodeType===Node.DOCUMENT_NODE?this.node.replaceWith(e.firstElementChild):e.nodeType===Node.ELEMENT_NODE?this.node.replaceWith(e):this.node.nodeType===Node.ATTRIBUTE_NODE?this.node.nodeValue=e:this.node.textContent=e}addAlert(e){this.alerts.push(e)}cleanAlerts(){this.alerts=[]}}class ja extends HTMLElement{constructor(){super(),this.instances=[],this.modelItems=[],this.defaultContext={},this.changed=[],this.inited=!1,this.modelConstructed=!1,this.attachShadow({mode:"open"}),this.computes=0}get formElement(){return this.parentElement}connectedCallback(){this.shadowRoot.innerHTML="\n            <slot></slot>\n        ",this.addEventListener("model-construct-done",(()=>{this.modelConstructed=!0}),{once:!0}),this.skipUpdate=!1}static lazyCreateModelItem(e,t,n){let r,i={};if(null==n)return null;i=n.nodeType===n.TEXT_NODE?n.parentNode:n,n.nodeType?r=ya.getPath(n):(r=null,i=n);const o=new Ga(r,t,ba.READONLY_DEFAULT,ba.RELEVANT_DEFAULT,ba.REQUIRED_DEFAULT,ba.CONSTRAINT_DEFAULT,ba.TYPE_DEFAULT,i,this);return e.registerModelItem(o),o}modelConstruct(){ba.dispatch(this,"model-construct",{model:this});const e=this.querySelectorAll("fx-instance");if(e.length>0){const t=[];e.forEach((e=>{t.push(e.init())})),Promise.all(t).then((()=>{this.instances=Array.from(e),this.updateModel(),this.inited=!0,ba.dispatch(this,"model-construct-done",{model:this})}))}else this.dispatchEvent(new CustomEvent("model-construct-done",{composed:!1,bubbles:!0,detail:{model:this}}));this.inited=!0}registerModelItem(e){this.modelItems.push(e)}updateModel(){this.rebuild(),this.skipUpdate||(this.recalculate(),this.revalidate())}rebuild(){this.mainGraph=new wa(!1),this.modelItems=[];const e=this.querySelectorAll("fx-model > fx-bind");0!==e.length?(e.forEach((e=>{e.init(this)})),ba.dispatch(this,"rebuild-done",{maingraph:this.mainGraph})):this.skipUpdate=!0}recalculate(){if(this.mainGraph)if(this.computes=0,this.subgraph=new wa(!1),0!==this.changed.length){this.changed.forEach((e=>{if(this.subgraph.addNode(e.path,e.node),this.mainGraph.hasNode(e.path)){const t=this.mainGraph.dependantsOf(e.path,!1).reverse();0!==t.length&&t.forEach((t=>{const n=this.mainGraph.getNodeData(t);if(this.subgraph.addNode(t,n),t.includes(":")){const r=t.substring(0,t.indexOf(":"));this.subgraph.addNode(r,n);0!==this.mainGraph.dependentsOf(e.path,!1).indexOf(t)&&this.subgraph.addDependency(t,e.path)}}))}}));this.subgraph.overallOrder(!1).forEach((e=>{if(this.mainGraph.hasNode(e)){const t=this.mainGraph.getNodeData(e);this.compute(t,e)}}));const e=[...this.changed];this.formElement.toRefresh=e,this.changed=[],this.dispatchEvent(new CustomEvent("recalculate-done",{detail:{subgraph:this.subgraph}}))}else{this.mainGraph.overallOrder(!1).forEach((e=>{const t=this.mainGraph.getNodeData(e);this.compute(t,e)}))}}compute(e,t){const n=this.getModelItem(e);if(n&&t.includes(":")){const e=t.split(":")[1];if(e)if("calculate"===e){const t=Ia(n.bind[e],n.node,this);n.value=t,n.readonly=!0}else if("constraint"!==e&&"type"!==e){const t=n.bind[e];if(t){const r=Da(t,n.node,this);n[e]=r}}this.computes+=1}}revalidate(){if(0===this.modelItems.length)return!0;let e=!0;return this.modelItems.forEach((t=>{const{bind:n}=t;if(n){if("function"==typeof n.hasAttribute&&n.hasAttribute("constraint")){const r=n.getAttribute("constraint");if(r){const i=Da(r,t.node,this);if(t.constraint=i,this.formElement.addToRefresh(t),i||(e=!1),!this.modelConstructed){const e=n.getAlert();e&&t.addAlert(e)}}}if("function"==typeof n.hasAttribute&&n.hasAttribute("required")){const r=n.getAttribute("required");if(r){const n=Da(r,t.node,this);t.required=n,this.formElement.addToRefresh(t),t.node.textContent||(e=!1)}}}})),e}getModelItem(e){return this.modelItems.find((t=>t.node===e))}getDefaultContext(){return this.instances[0].getDefaultContext()}getDefaultInstance(){return this?.instances[0]}getDefaultInstanceData(){return this.instances[0].instanceData}getInstance(e){return Array.from(this.instances).find((t=>t.id===e))}evalBinding(e){return this.instances[0].evalXPath(e)}}function za(e){return e.closest("fx-fore")}function Va(e,t){const n=ba.getClosest("[ref]",e),r=ba.getClosest("fx-fore",e),i=function(e){return za(e).getModel()}(e);if(null!==n){return r===n.closest("fx-fore")?n.nodeset:i.getDefaultInstance().getDefaultContext()}if(ya.isAbsolutePath(t)){const e=ya.getInstanceId(t);return e?i.getInstance(e).getDefaultContext():i.getDefaultInstance().getDefaultContext()}return null!==i.getDefaultInstance()&&i.inited?i.getDefaultInstance().getDefaultContext():[]}function Xa(e,t){const n=function(e){return e&&e.nodeType&&e.nodeType===Node.ATTRIBUTE_NODE?e.ownerElement:e.nodeType===Node.ELEMENT_NODE?e:e.parentNode}(e),r=ba.getClosest("fx-repeatitem",n);if(r)return"context"===e.nodeName?Pa(e.nodeValue,r.nodeset,za(n)):r.nodeset;if(n.hasAttribute("context")){const e=Va(n.parentNode,t);return Pa(n.getAttribute("context"),e,za(n))}if(e.nodeType===Node.ATTRIBUTE_NODE&&"context"===e.nodeName){const r=Va(e.ownerElement.parentNode,t);return Pa(e.ownerElement.getAttribute("context"),r,za(n))}if(e.nodeType===Node.ATTRIBUTE_NODE&&"ref"===e.nodeName){if(e.ownerElement.hasAttribute("context")){const r=Va(e.ownerElement.parentNode,t);return Pa(e.ownerElement.getAttribute("context"),r,za(n))}return Va(n.parentNode,t)}return Va(n,t)}ja.dataChanged=!1,customElements.get("fx-model")||customElements.define("fx-model",ja);const qa=e=>class extends e{static get properties(){return{context:{type:Object},model:{type:Object},modelItem:{type:Object},nodeset:{type:Object},ref:{type:String},inScopeVariables:{type:Map}}}constructor(){super(),this.context=null,this.model=null,this.modelItem={},this.ref=this.hasAttribute("ref")?this.getAttribute("ref"):"",this.inScopeVariables=new Map}getModel(){if(this.model)return this.model;return this.getOwnerForm().querySelector("fx-model")}getOwnerForm(){let e=this;for(;e&&e.parentNode;){if("FX-FORE"===e.nodeName.toUpperCase())return e;e=e.parentNode instanceof DocumentFragment?e.parentNode.host:e.parentNode}return e}evalInContext(){let e;if(this.hasAttribute("context")&&(e=Xa(this.getAttributeNode("context")||this,this.context)),this.hasAttribute("ref")&&(e=Xa(this.getAttributeNode("ref")||this,this.ref)),e||0===this.getModel().instances.length||(e=this.getModel().getDefaultInstance().getDefaultContext()),""===this.ref)this.nodeset=e;else if(Array.isArray(e))this.nodeset=Pa(this.ref,e[0],this);else{const{nodeType:t}=e;t?this.nodeset=Pa(this.ref,e,this):[this.nodeset]=Ia(this.ref,e,this)}}isNotBound(){return!this.hasAttribute("ref")}isBound(){return this.hasAttribute("ref")}getBindingExpr(){if(this.hasAttribute("ref"))return this.getAttribute("ref");const e=ba.getClosest("[ref]",this.parentNode);return e?e.getAttribute("ref"):"instance()"}getInstance(){if(this.ref.startsWith("instance(")){const e=ya.getInstanceId(this.ref);return this.getModel().getInstance(e)}return this.getModel().getInstance("default")}_getParentBindingElement(e){if(e.parentNode.host){const{host:t}=e.parentNode;if(t.hasAttribute("ref"))return t}else if(e.parentNode){if(e.parentNode.hasAttribute("ref"))return this.parentNode;this._getParentBindingElement(this.parentNode)}return null}getModelItem(){const e=this.getModel().getModelItem(this.nodeset);e&&(this.modelItem=e);const t=ba.getClosest("fx-repeatitem",this);let n;if(t){const{index:e}=t;n=Array.isArray(this.nodeset)?this.getModel().getModelItem(this.nodeset[e-1]):this.getModel().getModelItem(this.nodeset)}else n=this.getModel().getModelItem(this.nodeset);return n||ja.lazyCreateModelItem(this.getModel(),this.ref,this.nodeset)}getValue(){if(this.hasAttribute("value")){const e=this.getAttribute("value");try{return Ra(e,Xa(this,e),this.getOwnerForm())}catch(e){ba.dispatch(this,"error",{message:e})}}return this.textContent?this.textContent:null}getInScopeContext(){return Xa(this.getAttributeNode("ref")||this,this.ref)}setInScopeVariables(e){this.inScopeVariables=e}};class Wa extends(qa(HTMLElement)){constructor(){super(),this.nodeset=[],this.model={},this.contextNode={},this.inited=!1}connectedCallback(){this.ref=this.getAttribute("ref"),this.readonly=this.getAttribute("readonly"),this.required=this.getAttribute("required"),this.relevant=this.getAttribute("relevant"),this.type=this.hasAttribute("type")?this.getAttribute("type"):Wa.TYPE_DEFAULT,this.calculate=this.getAttribute("calculate")}init(e){this.model=e,this.instanceId=this._getInstanceId(),this.bindType=this.getModel().getInstance(this.instanceId).type,"xml"===this.bindType&&(this._evalInContext(),this._buildBindGraph(),this._createModelItems()),this._processChildren(e)}_buildBindGraph(){"xml"===this.bindType&&this.nodeset.forEach((e=>{const t=ya.getPath(e);this.model.mainGraph.addNode(t,e),this.calculate&&(this.model.mainGraph.addNode(`${t}:calculate`,e),this.model.mainGraph.addDependency(t,`${t}:calculate`));const n=this._getReferencesForProperty(this.calculate,e);if(0!==n.length&&this._addDependencies(n,e,t,"calculate"),!this.calculate){const n=this._getReferencesForProperty(this.readonly,e);0!==n.length?this._addDependencies(n,e,t,"readonly"):this.readonly&&this.model.mainGraph.addNode(`${t}:readonly`,e)}const r=this._getReferencesForProperty(this.required,e);0!==r.length?this._addDependencies(r,e,t,"required"):this.required&&this.model.mainGraph.addNode(`${t}:required`,e);const i=this._getReferencesForProperty(this.relevant,e);0!==i.length?this._addDependencies(i,e,t,"relevant"):this.relevant&&this.model.mainGraph.addNode(`${t}:relevant`,e);const o=this._getReferencesForProperty(this.constraint,e);0!==o.length?this._addDependencies(o,e,t,"constraint"):this.constraint&&this.model.mainGraph.addNode(`${t}:constraint`,e)}))}_addDependencies(e,t,n,r){const i=`${n}:${r}`;0!==e.length?(this.model.mainGraph.hasNode(i)||this.model.mainGraph.addNode(i,t),e.forEach((e=>{const t=ya.getPath(e);t.endsWith("text()[1]")||(this.model.mainGraph.hasNode(t)||this.model.mainGraph.addNode(t,e),this.model.mainGraph.addDependency(i,t))}))):this.model.mainGraph.addNode(i,t)}_processChildren(e){const t=this.querySelectorAll(":scope > fx-bind");Array.from(t).forEach((t=>{t.init(e)}))}getAlert(){if(this.hasAttribute("alert"))return this.getAttribute("alert");const e=this.querySelector("fx-alert");return e?e.innerHTML:null}_evalInContext(){const e=Xa(this.getAttributeNode("ref")||this,this.ref);if(this.nodeset=[],""===this.ref||null===this.ref)this.nodeset=e;else if(Array.isArray(e))e.forEach((t=>{if(ya.isSelfReference(this.ref))this.nodeset=e;else if(this.ref){Ma(this.ref,t,this).forEach((e=>{this.nodeset.push(e)}))}}));else{"xml"===this.getModel().getInstance(this.instanceId).type?this.nodeset=Ma(this.ref,e,this):this.nodeset=this.ref}}_createModelItems(){Array.isArray(this.nodeset)?Array.from(this.nodeset).forEach((e=>{this._createModelItem(e)})):this._createModelItem(this.nodeset)}_createModelItem(e){if(ya.isSelfReference(this.ref)){const e=ba.getClosest("fx-bind[ref]",this.parentElement);return void(e&&(e.required=this.required))}const t=e,n=ya.getPath(e),r=new Ga(n,this.getBindingExpr(),Wa.READONLY_DEFAULT,Wa.RELEVANT_DEFAULT,Wa.REQUIRED_DEFAULT,Wa.CONSTRAINT_DEFAULT,this.type,t,this);this.getModel().registerModelItem(r)}_getReferencesForProperty(e){return e?this.getReferences(e):[]}getReferences(e){const t=new Set,n=new ga((e=>t.add(e)));return this.nodeset.forEach((t=>{Ra(e,t,this,n)})),Array.from(t.values())}_initBooleanModelItemProperty(e,t){return Da(this[e],t,this)}static shortenPath(e){const t=e.split("/");let n="";for(let e=2;e<t.length;e+=1){const r=t[e];if(-1!==r.indexOf("{}")){n+=`/${r.split("{}")[1]}`}else n+=`/${r}`}return n}_getInstanceId(){const e=this.getBindingExpr();return e.startsWith("instance(")?(this.instanceId=ya.getInstanceId(e),this.instanceId):this.instanceId?this.instanceId:"default"}}Wa.READONLY_DEFAULT=!1,Wa.REQUIRED_DEFAULT=!1,Wa.RELEVANT_DEFAULT=!0,Wa.CONSTRAINT_DEFAULT=!0,Wa.TYPE_DEFAULT="xs:string",customElements.get("fx-bind")||customElements.define("fx-bind",Wa)
/*!
 * Toastify js 1.11.2
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */;class Ya{constructor(e){this.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},this.version="1.11.2",this.options={},this.toastElement=null,this._rootElement=document.body,this._init(e)}showToast(){if(this.toastElement=this._buildToast(),"string"==typeof this.options.selector?this._rootElement=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||this.options.selector instanceof ShadowRoot?this._rootElement=this.options.selector:this._rootElement=document.body,!this._rootElement)throw"Root element is not defined";return this._rootElement.insertBefore(this.toastElement,this._rootElement.firstChild),this._reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((()=>{this._removeElement(this.toastElement)}),this.options.duration)),this}hideToast(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this._removeElement(this.toastElement)}_init(e){this.options=Object.assign(this.defaults,e),this.options.backgroundColor,this.toastElement=null,this.options.gravity="bottom"===e.gravity?"toastify-bottom":"toastify-top",this.options.stopOnFocus=void 0===e.stopOnFocus||e.stopOnFocus,e.backgroundColor&&(this.options.style.background=e.backgroundColor)}_buildToast(){if(!this.options)throw"Toastify is not initialized";let e=document.createElement("div");e.className=`toastify on ${this.options.className}`,e.className+=` toastify-${this.options.position}`,e.className+=` ${this.options.gravity}`;for(const t in this.options.style)e.style[t]=this.options.style[t];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){let t=document.createElement("img");t.src=this.options.avatar,t.className="toastify-avatar","left"==this.options.position?e.appendChild(t):e.insertAdjacentElement("afterbegin",t)}if(!0===this.options.close){let t=document.createElement("span");t.innerHTML="&#10006;",t.className="toast-close",t.addEventListener("click",(e=>{e.stopPropagation(),this._removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}));const n=window.innerWidth>0?window.innerWidth:screen.width;"left"==this.options.position&&n>360?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}if(this.options.stopOnFocus&&this.options.duration>0&&(e.addEventListener("mouseover",(t=>{window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(()=>{e.timeOutValue=window.setTimeout((()=>{this._removeElement(e)}),this.options.duration)}))),void 0!==this.options.destination&&e.addEventListener("click",(e=>{e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination})),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",(e=>{e.stopPropagation(),this.options.onClick()})),"object"==typeof this.options.offset){const t=this._getAxisOffsetAValue("x",this.options),n=this._getAxisOffsetAValue("y",this.options),r="left"==this.options.position?t:`-${t}`,i="toastify-top"==this.options.gravity?n:`-${n}`;e.style.transform=`translate(${r},${i})`}return e}_removeElement(e){e.className=e.className.replace(" on",""),window.setTimeout((()=>{this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),this._reposition()}),400)}_reposition(){let e,t={top:15,bottom:15},n={top:15,bottom:15},r={top:15,bottom:15},i=this._rootElement.querySelectorAll(".toastify");for(let o=0;o<i.length;o++){e=!0===i[o].classList.contains("toastify-top")?"toastify-top":"toastify-bottom";let s=i[o].offsetHeight;e=e.substr(9,e.length-1);let a=15;(window.innerWidth>0?window.innerWidth:screen.width)<=360?(i[o].style[e]=`${r[e]}px`,r[e]+=s+a):!0===i[o].classList.contains("toastify-left")?(i[o].style[e]=`${t[e]}px`,t[e]+=s+a):(i[o].style[e]=`${n[e]}px`,n[e]+=s+a)}}_getAxisOffsetAValue(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:`${t.offset[e]}px`:"0px"}}function Qa(e){return new Ya(e)}class Ka extends HTMLElement{static get properties(){return{avatar:{type:String},backgroundColor:{type:String},callback:{type:String},classProp:{type:String},close:{type:Boolean},destination:{type:String},duration:{type:Number},escapeMarkup:{type:Boolean},gravity:{type:String},newWindow:{type:Boolean},oldestFirst:{type:Boolean},position:{type:String},selector:{type:String},stopOnFocus:{type:Boolean},text:{type:String}}}constructor(){super(),this.attachShadow({mode:"open"})}_initVar(e,t){return this.hasAttribute(e)?this.getAttribute(e):t}connectedCallback(){this.avatar=this._initVar("avatar",""),this.backgroundColor=this._initVar("backgroundColor",""),this.callback=this._initVar("callback",{}),this.classProp=this._initVar("data-class",""),this.close="true"===this._initVar("close",!1),this.destination=this._initVar("destination",void 0),this.duration=Number(this._initVar("duration",3e3)),this.escapeMarkup="true"===this._initVar("escapeMarkup",!0),this.gravity=this._initVar("gravity","top"),this.newWindow="true"===this._initVar("newWindow",!1),this.offSet=this._initVar("offSet",{}),this.oldestFirst="true"===this._initVar("oldestFirst",!0),this.position=this._initVar("position","right"),this.stopOnFocus=this._initVar("stopOnFocus",!0),this.text=this._initVar("text","");this.shadowRoot.innerHTML=`\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        ${this.renderHTML}\n    `,this.addEventListener("jinn-toast",(e=>{this.showToast(e.detail.text)}))}disconnectedCallback(){this.removeEventListener("jinn-toast",this.showToast)}showToast(e){new Qa({avatar:this.avatar,className:this.classProp,close:this.close,destination:this.destination,duration:this.duration,escapeMarkup:this.escapeMarkup,gravity:this.gravity,newWindow:!1,offset:this.offset,oldestFirst:this.oldestFirst,position:this.position,node:this.shadowRoot,stopOnFocus:this.stopOnFocus,text:e}).showToast()}renderHTML(){return"\n      <slot></slot>\n    "}}async function Za(e){return new Promise((t=>setTimeout((()=>t()),e)))}customElements.get("jinn-toast")||window.customElements.define("jinn-toast",Ka);class Ja extends(qa(HTMLElement)){static get properties(){return{...super.properties,detail:{type:Object},needsUpdate:{type:Boolean},event:{type:Object},target:{type:String},ifExpr:{type:String},whileExpr:{type:String},delay:{type:Number}}}constructor(){super(),this.detail={},this.needsUpdate=!1}connectedCallback(){this.style.display="none",this.repeatContext=void 0,this.hasAttribute("event")?this.event=this.getAttribute("event"):this.event="activate",this.target=this.getAttribute("target"),this.target?"#window"===this.target?window.addEventListener(this.event,(e=>this.execute(e))):"#document"===this.target?document.addEventListener(this.event,(e=>this.execute(e))):(this.targetElement=Ca(this.target,this),this.targetElement.addEventListener(this.event,(e=>this.execute(e)))):(this.targetElement=this.parentNode,this.targetElement.addEventListener(this.event,(e=>this.execute(e)))),this.ifExpr=this.hasAttribute("if")?this.getAttribute("if"):null,this.whileExpr=this.hasAttribute("while")?this.getAttribute("while"):null,this.delay=this.hasAttribute("delay")?Number(this.getAttribute("delay")):0}async execute(e){if(null===Ja.outermostHandler&&(Ja.outermostHandler=this),Ja.outermostHandler,e&&e.code){const t=new Map;t.set("code",e.code),this.setInScopeVariables(new Map([...this.inScopeVariables,...t]))}if(e&&e.detail){this.detail=e.detail;const t=new Map;Object.keys(e.detail).forEach((function(n,r){t.set(n,e.detail[n])})),t.size,this.setInScopeVariables(new Map([...this.inScopeVariables,...t]))}this.needsUpdate=!1;try{this.evalInContext()}catch(e){}if(this.targetElement&&this.targetElement.nodeset&&(this.nodeset=this.targetElement.nodeset),!this.ifExpr||Da(this.ifExpr,Xa(this),this)){if(this.whileExpr){const e=async()=>{await Za(this.delay||0),this.ownerDocument.contains(this)&&Da(this.whileExpr,Xa(this),this)&&(this.perform(),await e())};return await e(),this.actionPerformed(),void ba.dispatch(this,"while-performed",{})}!this.delay||(await Za(this.delay),this.ownerDocument.contains(this))?(this.perform(),this.actionPerformed(),Ja.outermostHandler===this&&(Ja.outermostHandler=null)):this.actionPerformed()}}perform(){(this.isBound()||"FX-ACTION"===this.nodeName)&&this.evalInContext()}actionPerformed(){if(this.needsUpdate){const e=this.getModel();e.recalculate(),e.revalidate(),e.parentNode.refresh(!0),this.dispatchActionPerformed()}}dispatchActionPerformed(){ba.dispatch(this,"action-performed",{})}}Ja.outermostHandler=null,Ja.dataChanged=!1,customElements.get("abstract-action")||window.customElements.define("abstract-action",Ja);class el extends HTMLElement{static get properties(){return{lazyRefresh:{type:Boolean},model:{type:Object},ready:{type:Boolean}}}constructor(){super(),this.model={},this.addEventListener("model-construct-done",this._handleModelConstructDone),this.addEventListener("message",this._displayMessage),this.addEventListener("error",this._displayError),window.addEventListener("compute-exception",(e=>{})),this.ready=!1,this.storedTemplateExpressionByNode=new Map;this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>\n                \n            :host {\n                // display: none;\n                height:auto;\n                padding:var(--model-element-padding);\n                font-family:Roboto, sans-serif;\n                color:var(--paper-grey-900);\n            }\n            :host ::slotted(fx-model){\n                display:none;\n            }\n            // :host(.fx-ready){\n            //     animation: fadein .4s forwards;\n            //     display:block;\n            // }\n\n            #modalMessage .dialogActions{\n                text-align:center;\n            }\n            .overlay {\n              position: fixed;\n              top: 0;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              background: rgba(0, 0, 0, 0.7);\n              transition: all 500ms;\n              visibility: hidden;\n              opacity: 0;\n              z-index:10;\n            }\n            .overlay.show {\n              visibility: visible;\n              opacity: 1;\n            }\n\n            .popup {\n              margin: 70px auto;\n              background: #fff;\n              border-radius: 5px;\n              width: 30%;\n              position: relative;\n              transition: all 5s ease-in-out;\n                            padding: 20px;\n\n            }\n            .popup h2 {\n              margin-top: 0;\n              width:100%;\n              background:#eee;\n              position:absolute;\n              top:0;\n              right:0;\n              left:0;\n              height:40px;\n             border-radius: 5px;\n\n            }\n            .popup .close {\n                position: absolute;\n                top: 3px;\n                right: 10px;\n                transition: all 200ms;\n                font-size: 30px;\n                font-weight: bold;\n                text-decoration: none;\n                color: #333;\n            }\n            .popup .close:focus{\n                outline:none;\n            }\n\n            .popup .close:hover {\n                color: #06D85F;\n            }\n            #messageContent{\n                margin-top:40px;\n            }\n            @keyframes fadein {\n              0% {\n                  opacity:0;\n              }\n              100% {\n                  opacity:1;\n              }\n            }\n        \n            </style>\n            \n           <jinn-toast id="message" gravity="bottom" position="left"></jinn-toast>\n           <jinn-toast id="sticky" gravity="bottom" position="left" duration="-1" close="true" data-class="sticky-message"></jinn-toast>\n           <jinn-toast id="error" text="error" duration="-1" data-class="error" close="true" position="left" gravity="bottom"></jinn-toast>\n           <slot></slot>\n           <div id="modalMessage" class="overlay">\n                <div class="popup">\n                   <h2></h2>\n                    <a class="close" href="#"  onclick="event.target.parentNode.parentNode.classList.remove(\'show\')" autofocus>&times;</a>\n                    <div id="messageContent"></div>\n                </div>\n           </div>\n        \n        ',this.toRefresh=[],this.initialRun=!0,this.someInstanceDataStructureChanged=!1}connectedCallback(){if(this.style.visibility="hidden",this.lazyRefresh=this.hasAttribute("refresh-on-view"),this.lazyRefresh){const e={root:null,rootMargin:"0px",threshold:.3};this.intersectionObserver=new IntersectionObserver(this.handleIntersect,e)}if(this.src=this.hasAttribute("src")?this.getAttribute("src"):null,this.src)return void this._loadFromSrc();this.shadowRoot.querySelector("slot").addEventListener("slotchange",(e=>{if(this.hasAttribute("convert"))return void this.replaceWith(ba.copyDom(this));let t=e.target.assignedElements().find((e=>"FX-MODEL"===e.nodeName.toUpperCase()));if(!t){const e=document.createElement("fx-model");this.appendChild(e),t=e}t.inited||(this.src,t.modelConstruct()),this.model=t})),this.addEventListener("path-mutated",(e=>{this.someInstanceDataStructureChanged=!0}))}addToRefresh(e){this.toRefresh.find((t=>t.path===e.path))||this.toRefresh.push(e)}_loadFromSrc(){fetch(this.src,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"text/html"}}).then((e=>e.headers.get("content-type").toLowerCase().startsWith("text/html")?e.text().then((e=>(new DOMParser).parseFromString(e,"text/html"))):"done")).then((e=>{const t=e.querySelector("fx-fore");t||ba.dispatchEvent(this,"error",{detail:{message:`Fore element not found in '${this.src}'. Maybe wrapped within 'template' element?`}}),t.setAttribute("from-src",this.src),this.replaceWith(t)})).catch((()=>{ba.dispatch(this,"error",{message:`'${this.src}' not found or does not contain Fore element.`})}))}handleIntersect(e,t){e.forEach((e=>{const{target:t}=e;e.isIntersecting&&(t.classList.add("loaded"),"function"==typeof t.refresh?t.refresh(t,!0):ba.refreshChildren(t,!0))})),e[0].target.getOwnerForm().dispatchEvent(new CustomEvent("refresh-done"))}evaluateToNodes(e,t){return Ma(e,t,this)}disconnectedCallback(){}async forceRefresh(){ba.refreshChildren(this,!0),this._updateTemplateExpressions(),this.someInstanceDataStructureChanged=!1,this._processTemplateExpressions(),ba.dispatch(this,"refresh-done",{})}async refresh(e){e||this.initialRun||0===this.toRefresh.length?ba.refreshChildren(this,!0):(this.toRefresh.forEach((t=>{const n=t.boundControls;n&&n.forEach((t=>{t.refresh(e)}));const{mainGraph:r}=this.getModel();if(r&&r.hasNode(t.path)){const n=this.getModel().mainGraph.dependentsOf(t.path,!1);0!==n.length&&n.forEach((t=>{const n=ya.getBasePath(t);this.getModel().modelItems.find((e=>e.path===n)).boundControls.forEach((t=>{t.refresh(e)}))}))}})),this.toRefresh=[]),(this.initialRun||this.someInstanceDataStructureChanged)&&(this._updateTemplateExpressions(),this.someInstanceDataStructureChanged=!1),this._processTemplateExpressions(),this.style.visibility="visible",ba.dispatch(this,"refresh-done",{})}_updateTemplateExpressions(){const e=Ma("(descendant-or-self::*!(text(), @*))[contains(., '{')][matches(.,'\\{.*\\}')][not(ancestor-or-self::fx-model)]",this,this);this.storedTemplateExpressions||(this.storedTemplateExpressions=[]),Array.from(e).forEach((e=>{if(this.storedTemplateExpressionByNode.has(e))return;const t=this._getTemplateExpression(e);this.storedTemplateExpressionByNode.set(e,t)})),this._processTemplateExpressions()}_processTemplateExpressions(){for(const e of this.storedTemplateExpressionByNode.keys())this._processTemplateExpression({node:e,expr:this.storedTemplateExpressionByNode.get(e)})}_processTemplateExpression(e){const{expr:t}=e,{node:n}=e;this.evaluateTemplateExpression(t,n,this)}evaluateTemplateExpression(e,t){const n=e.replace(/{[^}]*}/g,(e=>{if("{}"===e)return e;const n=e.substring(1,e.length-1),r=Xa(t,n);if(!r)return(t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ATTRIBUTE_NODE)&&t.parentNode,e;const i=ya.getInstanceId(n),o=this.getModel().getInstance(i);try{return Ra(n,r,t,null,o)}catch(t){return e}}));if(t.nodeType===Node.ATTRIBUTE_NODE){t.ownerElement.setAttribute(t.nodeName,n)}else t.nodeType===Node.TEXT_NODE&&(t.textContent=n)}_getTemplateExpression(e){return e.nodeType===Node.ATTRIBUTE_NODE?e.value:e.nodeType===Node.TEXT_NODE?e.textContent.trim():null}_handleModelConstructDone(){if(this.hasAttribute("show-confirmation")){const e=this.getAttribute("show-confirmation");e&&"show-confirmation"!==e&&"true"!==e&&""!==e?window.addEventListener("beforeunload",(e=>{if(Da(showConfirm,this.getModel().getDefaultContext(),this))return e.returnValue="are you sure";e.preventDefault()})):window.addEventListener("beforeunload",(e=>{if(ja.dataChanged)return e.returnValue="are you sure";e.preventDefault()}))}this._initUI()}async _lazyCreateInstance(){const e=this.querySelector("fx-model");if(0===e.instances.length){const t=document.createElement("fx-instance");e.appendChild(t);const n=document.implementation.createDocument(null,"data",null);this._generateInstance(this,n.firstElementChild),t.instanceData=n,e.instances.push(t)}}_generateInstance(e,t){if(e.hasAttribute("ref")&&!ba.isActionElement(e.nodeName)){const n=e.getAttribute("ref");if(n.includes("/")){n.split("/").forEach((n=>{t=this._generateNode(t,n,e)}))}else t=this._generateNode(t,n,e)}if(e.hasChildNodes()){const n=e.children;for(let e=0;e<n.length;e+=1)this._generateInstance(n[e],t)}return t}_generateNode(e,t,n){const r=e.ownerDocument.createElement(t);return 0===n.children.length&&(r.textContent=n.textContent),e.appendChild(r),e=r}async _initUI(){if(!this.initialRun)return;await this._lazyCreateInstance();const e=new Map;!function t(n){for(const r of n.children)"setInScopeVariables"in r&&r.setInScopeVariables(e),t(r)}(this),await this.refresh(),this.classList.add("fx-ready"),document.body.classList.add("fx-ready"),this.ready=!0,this.initialRun=!1,ba.dispatch(this,"ready",{})}registerLazyElement(e){this.intersectionObserver&&this.intersectionObserver.observe(e)}unRegisterLazyElement(e){this.intersectionObserver&&this.intersectionObserver.unobserve(e)}getModel(){return this.querySelector("fx-model")}_displayMessage(e){const{level:t}=e.detail,n=e.detail.message;this._showMessage(t,n),e.stopPropagation()}_displayError(e){const t=e.detail.message;this.shadowRoot.querySelector("#error").showToast(t)}_showMessage(e,t){if("modal"===e)this.shadowRoot.getElementById("messageContent").innerText=t,this.shadowRoot.getElementById("modalMessage").classList.add("show");else if("sticky"===e)this.shadowRoot.querySelector("#sticky").showToast(t);else{this.shadowRoot.querySelector("#message").showToast(t)}}}customElements.get("fx-fore")||customElements.define("fx-fore",el);class tl{static selectRelevant(e,t){return"xml"===t?tl._relevantXmlNodes(e):e.nodeset}static _relevantXmlNodes(e){if("keep"===e.getAttribute("nonrelevant"))return e.nodeset;const t=e.getModel().getModelItem(e.nodeset);if(t&&!t.relevant)return null;const n=e.nodeset.cloneNode(!1);return 0===e.nodeset.children.length&&tl._isRelevant(e,e.nodeset)?e.nodeset:tl._filterRelevant(e,e.nodeset,n)}static _filterRelevant(e,t,n){const{childNodes:r}=t;return Array.from(r).forEach((t=>{if(tl._isRelevant(e,t)){const r=t.cloneNode(!1);n.appendChild(r);const{attributes:i}=t;return i&&Array.from(i).forEach((t=>{tl._isRelevant(e,t)?r.setAttribute(t.nodeName,t.value):"empty"===e.nonrelevant?r.setAttribute(t.nodeName,""):r.removeAttribute(t.nodeName)})),tl._filterRelevant(e,t,r)}return null})),n}static _isRelevant(e,t){const n=e.getModel().getModelItem(t);return!(n&&!n.relevant)}}class nl extends(qa(HTMLElement)){constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.methods=["get","put","post","delete","head","urlencoded-post"],this.model=this.parentNode,this.hasAttribute("id"),this.id=this.getAttribute("id"),this.instance=this.hasAttribute("instance")?this.getAttribute("instance"):null,this.into=this.hasAttribute("into")?this.getAttribute("into"):null,this.method=this.hasAttribute("method")?this.getAttribute("method"):"get",this.nonrelevant=this.hasAttribute("nonrelevant")?this.getAttribute("nonrelevant"):"remove",this.replace=this.hasAttribute("replace")?this.getAttribute("replace"):"all",this.serialization=this.hasAttribute("serialization")?this.getAttribute("serialization"):"xml",this.hasAttribute("url"),this.url=this.getAttribute("url"),this.targetref=this.hasAttribute("targetref")?this.getAttribute("targetref"):null,this.mediatype=this.hasAttribute("mediatype")?this.getAttribute("mediatype"):"application/xml",this.validate=this.getAttribute("validate")?this.getAttribute("validate"):"true",this.shadowRoot.innerHTML=this.renderHTML()}renderHTML(){return"\n      <slot></slot>\n    "}async submit(){await ba.dispatch(this,"submit",{submission:this}),this._submit()}async _submit(){this.evalInContext();const e=this.getModel();if(e.recalculate(),"true"===this.validate){if(!e.revalidate())return this.getOwnerForm().classList.add("submit-validation-failed"),ba.dispatch(this,"submit-error",{}),void this.getModel().parentNode.refresh(!0)}await this._serializeAndSend()}_evaluateAttributeTemplateExpression(e,t){const n=e.match(/{[^}]*}/g);return n&&n.forEach((n=>{const r=n.substring(1,n.length-1),i=Ra(r,Xa(t,r),this.getOwnerForm()),o=e.replaceAll(n,i);e=o})),e}async _serializeAndSend(){const e=this._evaluateAttributeTemplateExpression(this.url,this),t=this.getInstance();let n;if("none"===this.serialization)n=void 0;else{const e=tl.selectRelevant(this,t.type);n=this._serialize(t.type,e)}if("get"===this.method.toLowerCase()&&(n=void 0),e.startsWith("#echo")){let e=this._parse(n,t);return this._handleResponse(e),void ba.dispatch(this,"submit-done",{})}if(e.startsWith("localStore:")&&"post"===this.method){const t=e.substring(e.indexOf(":")+1);return localStorage.setItem(t,n),void ba.dispatch(this,"submit-done",{})}if(e.startsWith("localStore:")&&("consume"===this.method||"get"===this.method)){this.replace="instance";const n=e.substring(e.indexOf(":")+1),r=localStorage.getItem(n);if(!r)return void ba.dispatch(this,"submit-error",{message:`Error reading key ${n} from localstorage`});let i=this._parse(r,t);return this._handleResponse(i),"consume"===this.method&&localStorage.removeItem(n),void ba.dispatch(this,"submit-done",{})}const r=this._getHeaders();if(!this.methods.includes(this.method.toLowerCase()))return void ba.dispatch(this,"error",{message:`Unknown method ${this.method}`});const i=await fetch(e,{method:this.method,mode:"cors",credentials:"include",headers:r,body:n});if(!i.ok||i.status>400)return void ba.dispatch(this,"submit-error",{message:`Error while submitting ${this.id}`});const o=i.headers.get("content-type").toLowerCase();if(o.startsWith("text/plain")||o.startsWith("text/html")||o.startsWith("text/markdown")){const e=await i.text();this._handleResponse(e)}else if(o.startsWith("application/json")){const e=await i.json();this._handleResponse(e)}else if(o.startsWith("application/xml")){const e=await i.text(),t=(new DOMParser).parseFromString(e,"application/xml");this._handleResponse(t)}else{const e=await i.blob();this._handleResponse(e)}ba.dispatch(this,"submit-done",{})}_parse(e,t){let n=null;return e&&"xml"===t.type&&(n=(new DOMParser).parseFromString(e,"application/xml")),e&&"json"===t.type&&(n=JSON.parse(e)),n}_serialize(e,t){if("application/x-www-form-urlencoded"===this.serialization){const e=new URLSearchParams;return Array.from(t.children).forEach((t=>{e.append(t.nodeName,t.textContent)})),e}if("xml"===e){return(new XMLSerializer).serializeToString(t)}if("json"===e)return JSON.stringify(t);throw new Error("unknown instance type ",e)}_getHeaders(){const e=new Headers,t=this.getInstance(),n=ba.getContentType(t,this.serialization);e.append("Content-Type",n),e.has("Accept")&&e.delete("Accept");const r=this.querySelectorAll("fx-header");return Array.from(r).forEach((t=>{const{name:n}=t,r=t.getValue();e.append(n,r)})),e}_getUrlExpr(){return this.storedTemplateExpressions.find((e=>"url"===e.node.nodeName))}_getTargetInstance(){let e;if(e=this.instance?this.model.getInstance(this.instance):this.model.getInstance("default"),!e)throw new Error(`target instance not found: ${e}`);return e}_handleResponse(e){if("instance"===this.replace){const t=this._getTargetInstance();if(!t)throw new Error(`target instance not found: ${t}`);if(this.targetref){const[n]=Ia(this.targetref,t.instanceData.firstElementChild,this),r=e.firstElementChild;n.parentNode.replaceChild(r,n)}else if(this.into){const[n]=Ia(this.into,t.instanceData.firstElementChild,this);e.nodeType===Node.DOCUMENT_NODE?n.appendChild(e.firstElementChild):n.innerHTML=e}else{const n=e;t.instanceData=n}this.model.updateModel(),this.getOwnerForm().refresh(!0)}if("all"===this.replace&&(document.getElementsByTagName("html")[0].innerHTML=e),"target"===this.replace){const t=this.getAttribute("target");document.querySelector(t).innerHTML=e}"redirect"===this.replace&&(window.location.href=e)}_handleError(){ba.dispatch(this,"submit-error",{})}}customElements.get("fx-submission")||customElements.define("fx-submission",nl);class rl extends(qa(HTMLElement)){constructor(){if(super(),this.style.display="none",this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="",!this.hasAttribute("name"))throw new Error('required attribute "name" missing');this.name=this.getAttribute("name")}connectedCallback(){this.shadowRoot.innerHTML=""}}customElements.get("fx-header")||customElements.define("fx-header",rl);class il extends(qa(HTMLElement)){constructor(){super(),this.attachShadow({mode:"open"}),this.name="",this.valueQuery="",this.value=null}connectedCallback(){this.name=this.getAttribute("name"),this.valueQuery=this.getAttribute("value")}refresh(){const e=Xa(this,this.valueQuery),t=Ia(this.valueQuery,e,this,this.precedingVariables);[this.value]=t}setInScopeVariables(e){e.has(this.name)?ba.dispatch(this,"xforms-binding-error",{}):(e.set(this.name,this),this.inScopeVariables=new Map(e))}}customElements.get("fx-var")||customElements.define("fx-var",il);class ol extends(qa(HTMLElement)){constructor(){super(),this.value="",this.display=this.style.display,this.required=!1,this.readonly=!1,this.widget=null,this.visited=!1,this.force=!1}getWidget(){throw new Error("You have to implement the method getWidget!")}async refresh(e){e&&(this.force=!0);const t=this.value;if(!this.isNotBound()&&(this.oldVal=this.nodeset?this.nodeset:null,this.evalInContext(),this.isBound())){if(!this.nodeset)return void(this.style.display="none");if(this.modelItem=this.getModelItem(),this.modelItem instanceof Ga){if(this.hasAttribute("as")&&"node"===this.getAttribute("as")?(this.modelItem.node=this.nodeset,this.value=this.modelItem.node):this.value=this.modelItem.value,this.modelItem.boundControls.includes(this)||this.modelItem.boundControls.push(this),await this.updateWidgetValue(),this.handleModelItemProperties(),!this.getOwnerForm().ready)return;t!==this.value&&ba.dispatch(this,"value-changed",{path:this.modelItem.path,value:this.modelItem.value})}}}async updateWidgetValue(){throw new Error("You have to implement the method updateWidgetValue!")}handleModelItemProperties(){this.handleRequired(),this.handleReadonly(),this.getOwnerForm().ready&&this.handleValid(),this.handleRelevant()}_getForm(){return this.getModel().parentNode}_dispatchEvent(e){this.getOwnerForm().ready&&ba.dispatch(this,e,{})}handleRequired(){this.widget=this.getWidget(),this.required!==this.modelItem.required&&this._updateRequired()}_updateRequired(){this.modelItem.required?((this.visited||this.force)&&(""===this.widget.value?(this.classList.add("isEmpty"),this._toggleValid(!1)):(this.classList.remove("isEmpty"),this._toggleValid(!0))),this.widget.setAttribute("required",""),this.setAttribute("required",""),this._dispatchEvent("required")):(this.widget.removeAttribute("required"),this.removeAttribute("required"),this._dispatchEvent("optional"))}_toggleValid(e){e?(this.removeAttribute("invalid"),this.setAttribute("valid","")):(this.removeAttribute("valid"),this.setAttribute("invalid",""))}handleReadonly(){this.isReadonly()!==this.modelItem.readonly&&(this.modelItem.readonly&&(this.widget.setAttribute("readonly",""),this.setAttribute("readonly",""),this._dispatchEvent("readonly")),this.modelItem.readonly||(this.widget.removeAttribute("readonly"),this.removeAttribute("readonly"),this._dispatchEvent("readwrite")))}handleValid(){if(this.querySelector("fx-alert"),this.isValid()!==this.modelItem.constraint)if(this.modelItem.constraint)this._dispatchEvent("valid"),this.setAttribute("valid",""),this.removeAttribute("invalid");else{if(this.setAttribute("invalid",""),this.removeAttribute("valid"),0!==this.modelItem.alerts.length){const{alerts:e}=this.modelItem;this.querySelector("fx-alert")||e.forEach((e=>{const t=document.createElement("fx-alert");t.innerHTML=e,this.appendChild(t)}))}this._dispatchEvent("invalid")}}handleRelevant(){const e=this.modelItem.node;if(Array.isArray(e)&&0===e.length)return this._dispatchEvent("nonrelevant"),void(this.style.display="none");this.isEnabled()!==this.modelItem.relevant&&(this.modelItem.relevant?(this._dispatchEvent("relevant"),this.style.display=this.display):(this._dispatchEvent("nonrelevant"),this.style.display="none"))}isRequired(){return this.hasAttribute("required")}isValid(){return!this.hasAttribute("invalid")}isReadonly(){return this.hasAttribute("readonly")}isEnabled(){return"none"!==this.style.display}_fadeOut(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()}_fadeIn(e,t){e.style.opacity=0,e.style.display=t||"block",function t(){let n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}()}}customElements.get("fx-abstract-control")||window.customElements.define("fx-abstract-control",ol);class sl extends ol{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.innerHTML="\n        <style>\n            \n      :host {\n        height: auto;\n        font-size: 0.8em;\n        font-weight: 400;\n        color: red;\n        display: none;\n      }\n    \n        </style>\n        \n      <slot></slot>\n    \n    "}getWidget(){return this}async updateWidgetValue(){this.innerHTML=this.value}}customElements.get("fx-alert")||customElements.define("fx-alert",sl);class al extends ol{constructor(){super(),this.inited=!1,this.attachShadow({mode:"open"})}connectedCallback(){this.initial=this.hasAttribute("initial")?this.getAttribute("initial"):null,this.url=this.hasAttribute("url")?this.getAttribute("url"):null,this.loaded=!1,this.initialNode=null,this.debounceDelay=this.hasAttribute("debounce")?this.getAttribute("debounce"):null,this.updateEvent=this.hasAttribute("update-event")?this.getAttribute("update-event"):"blur",this.valueProp=this.hasAttribute("value-prop")?this.getAttribute("value-prop"):"value",this.label=this.hasAttribute("label")?this.getAttribute("label"):null;this.shadowRoot.innerHTML=`\n            <style>\n                \n            :host{\n                display:inline-block;\n            }\n        \n            </style>\n            ${this.renderHTML(this.ref)}\n        `,this.widget=this.getWidget();let e=this.widget;if(this.hasAttribute("listen-on")){const t=this.getAttribute("listen-on"),n=this.querySelector(t);n&&(e=n)}this.addEventListener("keyup",(e=>{ja.dataChanged=!0})),"enter"===this.updateEvent&&(this.widget.addEventListener("keyup",(e=>{13===e.keyCode&&(e.preventDefault(),this.setValue(this.widget[this.valueProp]))})),this.updateEvent="blur"),this.debounceDelay?e.addEventListener(this.updateEvent,function(e,t,n=300){let r;return(...i)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(e,i)}),n)}}(this,(()=>{this.setValue(this.widget[this.valueProp])}),this.debounceDelay)):e.addEventListener(this.updateEvent,(()=>{this.setValue(this.widget[this.valueProp])})),this.addEventListener("return",(e=>{const t=e.detail.nodeset;e.stopPropagation(),this._replaceNode(t)})),this.template=this.querySelector("template"),this.boundInitialized=!1,this.static=!!this.widget.hasAttribute("static")}_debounce(e,t=300){let n;return(...r)=>{const i=this;clearTimeout(n),n=setTimeout((()=>{e.apply(i,r)}),t)}}setValue(e){const t=this.getModelItem();if(this.classList.add("visited"),t?.readonly)return;if("node"===this.getAttribute("as")){const e=this.getWidget().value,n=this.shadowRoot.getElementById("replace");return n.replace(this.nodeset,this.getWidget().value),void(t&&e&&e!==t.value&&(t.value=e,ja.dataChanged=!0,n.actionPerformed()))}const n=this.shadowRoot.getElementById("setvalue");n.setValue(t,e),this.modelItem instanceof Ga&&!this.modelItem?.boundControls.includes(this)&&this.modelItem.boundControls.push(this),n.actionPerformed(),this.visited=!0}_replaceNode(e){this.modelItem.node.replaceWith(e.cloneNode(!0)),this.getOwnerForm().refresh()}renderHTML(e){return`\n            ${this.label?`${this.label}`:""}\n            <slot></slot>\n            ${this.hasAttribute("as")&&"node"===this.getAttribute("as")?'<fx-replace id="replace" ref=".">':`<fx-setvalue id="setvalue" ref="${e}"></fx-setvalue>`}\n\n        `}getWidget(){if(this.widget)return this.widget;let e=this.querySelector(".widget");if(e||(e=this.querySelector("input")),!e){const e=document.createElement("input");return e.classList.add("widget"),e.setAttribute("type","text"),this.appendChild(e),e}return e}async updateWidgetValue(){let{widget:e}=this;if(e||(e=this),"checked"!==this.valueProp)if(this.hasAttribute("as")){const t=this.getAttribute("as");if("text"===t){const t=new XMLSerializer,n=ba.prettifyXml(t.serializeToString(this.nodeset));e.value=n}if("node"===t&&this.nodeset!==e.value){const t=this.nodeset;if(e.value&&t!==this.widget.value)return void(e.value=this.nodeset.cloneNode(!0));e.value=this.nodeset.cloneNode(!0)}}else{if(this.url&&!this.loaded)return this.initial&&(this.initialNode=Pa(this.initial,this.nodeset,this)),await this._loadForeFromUrl(),void(this.loaded=!0);e.value!==this.value&&(e.value=this.value)}else"true"===this.value?e.checked=!0:e.checked=!1}async _loadForeFromUrl(){try{const e=await fetch(this.url,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"text/html"}});let t;t=e.headers.get("content-type").toLowerCase().startsWith("text/html")?await e.text().then((e=>(new DOMParser).parseFromString(e,"text/html"))):"done";const n=t.querySelector("fx-fore");n.classList.add("widget");const r=this.querySelector("input");this.hasAttribute("shadow")?(r.parentNode.removeChild(r),this.shadowRoot.appendChild(n)):r.replaceWith(n),n.addEventListener("model-construct-done",(e=>{const t=n.querySelector("fx-instance");if(this.initialNode){const e=(new DOMParser).parseFromString("<data></data>","application/xml");e.firstElementChild.appendChild(this.initialNode.cloneNode(!0)),t.setInstanceData(e)}n.getModel().updateModel(),n.refresh()}),{once:!0}),n||this.dispatchEvent(new CustomEvent("error",{detail:{message:`Fore element not found in '${this.src}'. Maybe wrapped within 'template' element?`}})),this.dispatchEvent(new CustomEvent("loaded",{detail:{fore:n}}))}catch(e){this.getOwnerForm().dispatchEvent(new CustomEvent("error",{detail:{message:`${this.url} not found`}}))}}getTemplate(){return this.querySelector("template")}async refresh(e){super.refresh(e);const t=this.getWidget();this._handleBoundWidget(t),ba.refreshChildren(this,e)}_handleBoundWidget(e){if((!this.boundInitialized||!this.static)&&e&&e.hasAttribute("ref")){const t=e.getAttribute("ref"),n=Ia(t,Xa(this,t),this);if(Array.isArray(n)&&0===n.length)return;const{children:r}=e;if(Array.from(r).forEach((e=>{"template"!==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)})),this.template){if("SELECT"===this.widget.nodeName&&this.widget.hasAttribute("selection")&&"open"===this.widget.getAttribute("selection")){const e=this.template.firstElementChild,t=document.createElement("option");this.widget.insertBefore(t,e)}if(n.length){const e=document.createDocumentFragment();Array.from(n).forEach((t=>{const n=this.createEntry();e.appendChild(n),this.updateEntry(n,t)})),this.template.parentNode.appendChild(e)}else{const e=this.createEntry();this.template.parentNode.appendChild(e),this.updateEntry(e,n)}this.boundInitialized=!0}}}updateEntry(e,t){if("SELECT"!==this.widget.nodeName)return;const n=this._getValueAttribute(e),r=n.value,i=Ra(r.substring(1,r.length-1),t,e);n.value=i,this.value===i&&e.setAttribute("selected","selected");const o=e.textContent,s=Ra(o.substring(1,o.length-1),t,e);e.textContent=s}createEntry(){return this.template.content.firstElementChild.cloneNode(!0)}_getValueAttribute(e){let t;return Array.from(e.attributes).forEach((e=>{-1!==e.value.indexOf("{")&&(t=e)})),t}}customElements.get("fx-control")||window.customElements.define("fx-control",al);class ll extends(qa(HTMLElement)){constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.innerHTML="\n            <style>\n                \n        :host {\n            display: block;\n        }\n    \n            </style>\n            \n      <slot></slot>\n    \n    ",this.getOwnerForm().registerLazyElement(this)}async refresh(e){!e&&this.hasAttribute("refresh-on-view")||(this.isBound()&&(this.evalInContext(),this.modelItem=this.getModelItem(),this.modelItem&&!this.modelItem.boundControls.includes(this)&&this.modelItem.boundControls.push(this)),this._getForm().ready&&this.handleModelItemProperties())}handleModelItemProperties(){this.handleReadonly(),this.handleRelevant()}_getForm(){return this.getModel().parentNode}handleReadonly(){this.isReadonly()!==this.modelItem.readonly&&(this.modelItem.readonly&&(this.setAttribute("readonly","readonly"),this.dispatchEvent(new CustomEvent("readonly",{}))),this.modelItem.readonly||(this.removeAttribute("readonly"),this.dispatchEvent(new CustomEvent("readwrite",{}))))}handleRelevant(){this.modelItem&&this.isEnabled()!==this.modelItem.enabled&&(this.modelItem.enabled?this.dispatchEvent(new CustomEvent("enabled",{})):this.dispatchEvent(new CustomEvent("disabled",{})))}isReadonly(){return!!this.hasAttribute("readonly")}isEnabled(){return"none"!==this.style.display}}customElements.get("fx-container")||window.customElements.define("fx-container",ll)
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;const ul=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,cl=Symbol(),hl=new Map;class pl{constructor(e,t){if(this._$cssResult$=!0,t!==cl)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=hl.get(this.cssText);return ul&&void 0===e&&(hl.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const dl=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1]),e[0]);return new pl(n,cl)},fl=ul?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new pl("string"==typeof e?e:e+"",cl))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var ml;const gl=window.trustedTypes,yl=gl?gl.emptyScript:"",vl=window.reactiveElementPolyfillSupport,wl={toAttribute(e,t){switch(t){case Boolean:e=e?yl:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},bl=(e,t)=>t!==e&&(t==t||e==e),xl={attribute:!0,type:String,converter:wl,reflect:!1,hasChanged:bl};class Al extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const r=this._$Eh(n,t);void 0!==r&&(this._$Eu.set(r,n),e.push(r))})),e}static createProperty(e,t=xl){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const i=this[e];this[t]=r,this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||xl}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(fl(e))}else void 0!==e&&t.push(fl(e));return t}static _$Eh(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{ul?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),r=window.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ES(e,t,n=xl){var r,i;const o=this.constructor._$Eh(e,n);if(void 0!==o&&!0===n.reflect){const s=(null!==(i=null===(r=n.converter)||void 0===r?void 0:r.toAttribute)&&void 0!==i?i:wl.toAttribute)(t,n.type);this._$Ei=e,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$Ei=null}}_$AK(e,t){var n,r,i;const o=this.constructor,s=o._$Eu.get(e);if(void 0!==s&&this._$Ei!==s){const e=o.getPropertyOptions(s),a=e.converter,l=null!==(i=null!==(r=null===(n=a)||void 0===n?void 0:n.fromAttribute)&&void 0!==r?r:"function"==typeof a?a:null)&&void 0!==i?i:wl.fromAttribute;this._$Ei=s,this[s]=l(t,e.type),this._$Ei=null}}requestUpdate(e,t,n){let r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||bl)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Ei!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((e,t)=>this[t]=e)),this._$Et=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$ES(t,this[t],e))),this._$EC=void 0),this._$EU()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var _l;Al.finalized=!0,Al.elementProperties=new Map,Al.elementStyles=[],Al.shadowRootOptions={mode:"open"},null==vl||vl({ReactiveElement:Al}),(null!==(ml=globalThis.reactiveElementVersions)&&void 0!==ml?ml:globalThis.reactiveElementVersions=[]).push("1.3.2");const kl=globalThis.trustedTypes,El=kl?kl.createPolicy("lit-html",{createHTML:e=>e}):void 0,Cl=`lit$${(Math.random()+"").slice(9)}$`,Sl="?"+Cl,Ol=`<${Sl}>`,Tl=document,Nl=(e="")=>Tl.createComment(e),Bl=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Il=Array.isArray,Pl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ml=/-->/g,Dl=/>/g,Rl=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Fl=/'/g,Ll=/"/g,Ul=/^(?:script|style|textarea|title)$/i,$l=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),Hl=Symbol.for("lit-noChange"),Gl=Symbol.for("lit-nothing"),jl=new WeakMap,zl=Tl.createTreeWalker(Tl,129,null,!1),Vl=(e,t)=>{const n=e.length-1,r=[];let i,o=2===t?"<svg>":"",s=Pl;for(let t=0;t<n;t++){const n=e[t];let a,l,u=-1,c=0;for(;c<n.length&&(s.lastIndex=c,l=s.exec(n),null!==l);)c=s.lastIndex,s===Pl?"!--"===l[1]?s=Ml:void 0!==l[1]?s=Dl:void 0!==l[2]?(Ul.test(l[2])&&(i=RegExp("</"+l[2],"g")),s=Rl):void 0!==l[3]&&(s=Rl):s===Rl?">"===l[0]?(s=null!=i?i:Pl,u=-1):void 0===l[1]?u=-2:(u=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?Rl:'"'===l[3]?Ll:Fl):s===Ll||s===Fl?s=Rl:s===Ml||s===Dl?s=Pl:(s=Rl,i=void 0);const h=s===Rl&&e[t+1].startsWith("/>")?" ":"";o+=s===Pl?n+Ol:u>=0?(r.push(a),n.slice(0,u)+"$lit$"+n.slice(u)+Cl+h):n+Cl+(-2===u?(r.push(void 0),t):h)}const a=o+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==El?El.createHTML(a):a,r]};class Xl{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let i=0,o=0;const s=e.length-1,a=this.parts,[l,u]=Vl(e,t);if(this.el=Xl.createElement(l,n),zl.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(r=zl.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes()){const e=[];for(const t of r.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(Cl)){const n=u[o++];if(e.push(t),void 0!==n){const e=r.getAttribute(n.toLowerCase()+"$lit$").split(Cl),t=/([.?@])?(.*)/.exec(n);a.push({type:1,index:i,name:t[2],strings:e,ctor:"."===t[1]?Kl:"?"===t[1]?Jl:"@"===t[1]?eu:Ql})}else a.push({type:6,index:i})}for(const t of e)r.removeAttribute(t)}if(Ul.test(r.tagName)){const e=r.textContent.split(Cl),t=e.length-1;if(t>0){r.textContent=kl?kl.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],Nl()),zl.nextNode(),a.push({type:2,index:++i});r.append(e[t],Nl())}}}else if(8===r.nodeType)if(r.data===Sl)a.push({type:2,index:i});else{let e=-1;for(;-1!==(e=r.data.indexOf(Cl,e+1));)a.push({type:7,index:i}),e+=Cl.length-1}i++}}static createElement(e,t){const n=Tl.createElement("template");return n.innerHTML=e,n}}function ql(e,t,n=e,r){var i,o,s,a;if(t===Hl)return t;let l=void 0!==r?null===(i=n._$Cl)||void 0===i?void 0:i[r]:n._$Cu;const u=Bl(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==u&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===u?l=void 0:(l=new u(e),l._$AT(e,n,r)),void 0!==r?(null!==(s=(a=n)._$Cl)&&void 0!==s?s:a._$Cl=[])[r]=l:n._$Cu=l),void 0!==l&&(t=ql(e,l._$AS(e,t.values),l,r)),t}class Wl{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:n},parts:r}=this._$AD,i=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Tl).importNode(n,!0);zl.currentNode=i;let o=zl.nextNode(),s=0,a=0,l=r[0];for(;void 0!==l;){if(s===l.index){let t;2===l.type?t=new Yl(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new tu(o,this,e)),this.v.push(t),l=r[++a]}s!==(null==l?void 0:l.index)&&(o=zl.nextNode(),s++)}return i}m(e){let t=0;for(const n of this.v)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class Yl{constructor(e,t,n,r){var i;this.type=2,this._$AH=Gl,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cg=null===(i=null==r?void 0:r.isConnected)||void 0===i||i}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ql(this,e,t),Bl(e)?e===Gl||null==e||""===e?(this._$AH!==Gl&&this._$AR(),this._$AH=Gl):e!==this._$AH&&e!==Hl&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.k(e):(e=>{var t;return Il(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])})(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==Gl&&Bl(this._$AH)?this._$AA.nextSibling.data=e:this.k(Tl.createTextNode(e)),this._$AH=e}T(e){var t;const{values:n,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=Xl.createElement(r.h,this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.m(n);else{const e=new Wl(i,this),t=e.p(this.options);e.m(n),this.k(t),this._$AH=e}}_$AC(e){let t=jl.get(e.strings);return void 0===t&&jl.set(e.strings,t=new Xl(e)),t}S(e){Il(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const i of e)r===t.length?t.push(n=new Yl(this.M(Nl()),this.M(Nl()),this,this.options)):n=t[r],n._$AI(i),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class Ql{constructor(e,t,n,r,i){this.type=1,this._$AH=Gl,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Gl}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){const i=this.strings;let o=!1;if(void 0===i)e=ql(this,e,t,0),o=!Bl(e)||e!==this._$AH&&e!==Hl,o&&(this._$AH=e);else{const r=e;let s,a;for(e=i[0],s=0;s<i.length-1;s++)a=ql(this,r[n+s],t,s),a===Hl&&(a=this._$AH[s]),o||(o=!Bl(a)||a!==this._$AH[s]),a===Gl?e=Gl:e!==Gl&&(e+=(null!=a?a:"")+i[s+1]),this._$AH[s]=a}o&&!r&&this.C(e)}C(e){e===Gl?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Kl extends Ql{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===Gl?void 0:e}}const Zl=kl?kl.emptyScript:"";class Jl extends Ql{constructor(){super(...arguments),this.type=4}C(e){e&&e!==Gl?this.element.setAttribute(this.name,Zl):this.element.removeAttribute(this.name)}}class eu extends Ql{constructor(e,t,n,r,i){super(e,t,n,r,i),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=ql(this,e,t,0))&&void 0!==n?n:Gl)===Hl)return;const r=this._$AH,i=e===Gl&&r!==Gl||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==Gl&&(r===Gl||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class tu{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){ql(this,e)}}const nu=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var ru,iu;null==nu||nu(Xl,Yl),(null!==(_l=globalThis.litHtmlVersions)&&void 0!==_l?_l:globalThis.litHtmlVersions=[]).push("2.2.5");class ou extends Al{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=((e,t,n)=>{var r,i;const o=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t;let s=o._$litPart$;if(void 0===s){const e=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:null;o._$litPart$=s=new Yl(t.insertBefore(Nl(),e),e,void 0,null!=n?n:{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!1)}render(){return Hl}}ou.finalized=!0,ou._$litElement$=!0,null===(ru=globalThis.litElementHydrateSupport)||void 0===ru||ru.call(globalThis,{LitElement:ou});const su=globalThis.litElementPolyfillSupport;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var au;null==su||su({LitElement:ou}),(null!==(iu=globalThis.litElementVersions)&&void 0!==iu?iu:globalThis.litElementVersions=[]).push("3.2.0"),null===(au=window.HTMLSlotElement)||void 0===au||au.prototype.assignedElements;class lu extends ll{static get properties(){return{...super.properties,collapse:{type:Boolean,reflect:!0}}}constructor(){super(),this.collapse=!1}render(){return $l`<slot></slot>`}handleModelItemProperties(){this.handleRelevant()}initializeChildren(e){Array.from(e.children).forEach((e=>{if(ba.isUiElement(e.nodeName))e.init(this.model);else if(0!==e.children.length){Array.from(e.children).forEach((e=>{this.initializeChildren(e)}))}}))}async refresh(e){super.refresh(e),ba.refreshChildren(this,e)}}customElements.get("fx-group")||window.customElements.define("fx-group",lu);class uu extends ol{static get styles(){return dl`:host{display:block;height:auto;font-size:.8em;font-weight:400;font-style:italic}`}static get properties(){return{...super.properties}}render(){return $l`<slot></slot>`}}customElements.get("fx-hint")||customElements.define("fx-hint",uu);class cu extends ol{constructor(){super(),this.attachShadow({mode:"open"}),this.valueAttr=this.hasAttribute("value")?this.getAttribute("value"):null,this.readonly=!0}connectedCallback(){this.shadowRoot.innerHTML='\n            <style>\n                \n          :host {\n            display: inline-block;\n          }\n          #widget {\n            display: inline-block;\n          }\n          .label{\n            display: inline-block;\n          }\n          table,tbody{\n            width:100%;\n          }\n          th{\n            text-align:left;\n          }\n          td{\n            padding-right:1rem;\n          }\n        \n            </style>\n            \n            <slot name="label"></slot>\n            \n            <span id="value">\n                <slot></slot>\n            </span>\n        \n        ',this.mediatype=this.hasAttribute("mediatype")?this.getAttribute("mediatype"):null}async refresh(){this.ref&&await super.refresh(),this.valueAttr&&(this.value=this.getValue(),await this.updateWidgetValue())}getValue(){try{const e=Xa(this,this.valueAttr);return this.hasAttribute("html")?Ia(this.valueAttr,e,this)[0]:function(e,t,n,r=null,i=n){const o=Ta(e,t,n);return ha(e,t,r,{},{currentContext:{formElement:n},functionNameResolver:Na,moduleImports:{xf:xa},namespaceResolver:o})}(this.valueAttr,e,this)[0]}catch(e){ba.dispatch(this,"error",{message:e})}return null}getWidget(){return this.shadowRoot.getElementById("value")}handleReadonly(){this.setAttribute("readonly","readonly")}async updateWidgetValue(){const e=this.shadowRoot.getElementById("value");if("markdown"===this.mediatype){const e=markdown(this.nodeset);this.innerHtml=e}if("html"!==this.mediatype){if("image"===this.mediatype){const e=document.createElement("img");return e.setAttribute("src",this.value),void this.appendChild(e)}e.innerHTML=this.value}else{if(this.modelItem.node){const{node:e}=this.modelItem;return e.nodeType?void this.appendChild(e):void Object.entries(e).map((e=>{this.appendChild(e[1])}))}e.innerHTML=this.value.outerHTML}}isReadonly(){return!0}}customElements.get("fx-output")||customElements.define("fx-output",cu);class hu extends(qa(HTMLElement)){static get properties(){return{inited:{type:Boolean}}}constructor(){super(),this.inited=!1,this.addEventListener("click",this._dispatchIndexChange),this.addEventListener("focusin",this._dispatchIndexChange),this.attachShadow({mode:"open",delegatesFocus:!0})}_handleFocus(){this.parentNode.setIndex(this.index)}_dispatchIndexChange(){this.parentNode&&this.parentNode.dispatchEvent(new CustomEvent("item-changed",{composed:!1,bubbles:!0,detail:{item:this,index:this.index}}))}connectedCallback(){this.display=this.style.display;this.shadowRoot.innerHTML="\n            \n           <slot></slot>\n        \n        ",this.getOwnerForm().registerLazyElement(this)}disconnectedCallback(){this.removeEventListener("click",this._dispatchIndexChange()),this.removeEventListener("focusin",this._handleFocus)}init(){this.inited=!0}refresh(e){this.modelItem=this.getModelItem(),this.modelItem.boundControls.includes(this)||this.modelItem.boundControls.push(this),this.modelItem&&!this.modelItem.relevant?this.classList.add("nonrelevant"):this.classList.remove("nonrelevant"),ba.refreshChildren(this,e)}}customElements.get("fx-repeatitem")||window.customElements.define("fx-repeatitem",hu);class pu extends(qa(HTMLElement)){static get properties(){return{...super.properties,index:{type:Number},template:{type:Object},focusOnCreate:{type:String},initDone:{type:Boolean},repeatIndex:{type:Number},nodeset:{type:Array}}}constructor(){super(),this.ref="",this.dataTemplate=[],this.focusOnCreate="",this.initDone=!1,this.repeatIndex=1,this.nodeset=[],this.inited=!1,this.index=1,this.repeatSize=0,this.attachShadow({mode:"open",delegatesFocus:!0})}get repeatSize(){return this.querySelectorAll(":scope > fx-repeatitem").length}set repeatSize(e){this.size=e}setIndex(e){this.index=e;const t=this.querySelectorAll(":scope > fx-repeatitem");this.applyIndex(t[this.index-1])}applyIndex(e){this._removeIndexMarker(),e&&e.setAttribute("repeat-index","")}get index(){return this.getAttribute("index")}set index(e){this.setAttribute("index",e)}connectedCallback(){this.ref=this.getAttribute("ref"),this.addEventListener("item-changed",(e=>{const{item:t}=e.detail,n=Array.from(this.children).indexOf(t);this.applyIndex(this.children[n]),this.index=n+1})),document.addEventListener("index-changed",(e=>{if(e.stopPropagation(),!e.target===this)return;const{index:t}=e.detail;this.index=Number(t),this.applyIndex(this.children[t-1])})),this.mutationObserver=new MutationObserver((e=>{if("childList"===e[0].type){const t=e[0].addedNodes[0];if(t){const e=ya.getPath(t);ba.dispatch(this,"path-mutated",{path:e,index:this.index})}}})),this.getOwnerForm().registerLazyElement(this);this.shadowRoot.innerHTML='\n            <style>\n                \n      :host{\n      }\n       .fade-out-bottom {\n          -webkit-animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n          animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n      }\n      .fade-out-bottom {\n          -webkit-animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n          animation: fade-out-bottom 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n      }\n   \n            </style>\n            \n          <slot name="header"></slot>\n          <slot></slot>\n        \n        '}init(){this._evalNodeset(),this._initTemplate(),this._initRepeatItems(),this.setAttribute("index",this.index),this.inited=!0}_evalNodeset(){const e=Xa(this.getAttributeNode("ref")||this,this.ref);this.mutationObserver&&e.nodeName&&this.mutationObserver.observe(e,{childList:!0,subtree:!0});const t=Ia(this.ref,e,this);1===t.length&&Array.isArray(t[0])?this.nodeset=t[0]:this.nodeset=t}async refresh(e){this.inited||this.init(),this._evalNodeset();const t=this.querySelectorAll(":scope > fx-repeatitem"),n=t.length;let r=1;Array.isArray(this.nodeset)&&(r=this.nodeset.length);const i=r;if(i<n)for(let e=n;e>i;e-=1){const n=t[e-1];n.parentNode.removeChild(n),this.getOwnerForm().unRegisterLazyElement(n)}if(i>n)for(let e=n+1;e<=i;e+=1){const t=document.createElement("fx-repeatitem"),n=this._clone();t.appendChild(n),this.appendChild(t),this._initVariables(t),t.nodeset=this.nodeset[e-1],t.index=e,this.getOwnerForm().someInstanceDataStructureChanged=!0}for(let e=0;e<n;e+=1){const n=t[e];this.getOwnerForm().registerLazyElement(n),n.nodeset!==this.nodeset[e]&&(n.nodeset=this.nodeset[e])}this.getOwnerForm().lazyRefresh&&!e||ba.refreshChildren(this,e),this.setIndex(this.index)}_fadeOut(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()}_fadeIn(e){e&&(e.style.opacity=0,e.style.display=this.display,function t(){let n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}())}_initTemplate(){this.template=this.querySelector("template"),null===this.template&&this.dispatchEvent(new CustomEvent("no-template-error",{composed:!0,bubbles:!0,detail:{message:`no template found for repeat:${this.id}`}})),this.shadowRoot.appendChild(this.template)}_initRepeatItems(){this.nodeset.forEach(((e,t)=>{const n=document.createElement("fx-repeatitem");n.nodeset=this.nodeset[t],n.index=t+1;const r=this._clone();n.appendChild(r),this.appendChild(n),1===n.index&&this.applyIndex(n),this._initVariables(n)}))}_initVariables(e){const t=new Map(this.inScopeVariables);e.setInScopeVariables(t),function e(n){for(const r of n.children)"setInScopeVariables"in r&&r.setInScopeVariables(t),e(r)}(e)}_clone(){this.template=this.shadowRoot.querySelector("template");const e=this.template.content.cloneNode(!0);return document.importNode(e,!0)}_removeIndexMarker(){Array.from(this.children).forEach((e=>{e.removeAttribute("repeat-index")}))}setInScopeVariables(e){this.inScopeVariables=new Map(e)}}customElements.get("fx-repeat")||window.customElements.define("fx-repeat",pu);class du extends ll{connectedCallback(){super.connectedCallback&&super.connectedCallback();this.shadowRoot.innerHTML="\n        <style>\n            \n       :host ::slotted(fx-case.selected-case){\n        display: block !important;\n    }\n    \n        </style>\n        \n       <slot></slot>\n    \n    "}async refresh(e){super.refresh();const t=this.querySelectorAll(":scope > fx-case");let n;this.isBound()?Array.from(t).forEach((e=>{e.getAttribute("name")===this.modelItem.value?(e.classList.add("selected-case"),n=e):e.classList.remove("selected-case")})):(n=this.querySelector(":scope > .selected-case"),n||(n=t[0],n.classList.add("selected-case"))),ba.refreshChildren(n,e)}toggle(e){const t=this.querySelectorAll("fx-case");Array.from(t).forEach((t=>{e===t?(t.classList.add("selected-case"),this.refresh()):t.classList.remove("selected-case")}))}}customElements.get("fx-switch")||window.customElements.define("fx-switch",du);class fu extends ol{connectedCallback(){this.attachShadow({mode:"open"}),this.ref=this.hasAttribute("ref")?this.getAttribute("ref"):null,this.debounceDelay=this.hasAttribute("debounce")?this.getAttribute("debounce"):null;this.shadowRoot.innerHTML=`\n                <style>\n                    \n          :host {\n            cursor:pointer;\n          }\n        \n                </style>\n                ${this.renderHTML()}\n        `;const e=this.shadowRoot.querySelector("slot");e.addEventListener("slotchange",(()=>{const t=e.assignedElements({flatten:!0});t[0].setAttribute("tabindex","0"),t[0].setAttribute("role","button");const n=t[0];this.debounceDelay?this.addEventListener("click",function(e,t,n=300){let r;return(...i)=>{r||t.apply(e,i),clearTimeout(r),r=setTimeout((()=>(r=void 0,null)),n)}}(this,(e=>{this.performActions(e)}),this.debounceDelay)):n.addEventListener("click",(e=>this.performActions(e))),this.widget=n,"BUTTON"!==n.nodeName&&n.addEventListener("keypress",(e=>{"Space"!==e.code&&"Enter"!==e.code||this.performActions(e)}))}))}renderHTML(){return"\n            <slot></slot>\n    "}getWidget(){return this.widget}async updateWidgetValue(){return null}handleReadonly(){super.handleReadonly(),this.widget.hasAttribute("readonly")?this.widget.setAttribute("disabled","disabled"):this.widget.removeAttribute("disabled")}async performActions(e){const t=this.closest("fx-repeatitem");t&&t.click(),this.querySelectorAll("fx-var").forEach((e=>e.refresh()));(async()=>{for(let t=0;t<this.children.length;t+=1){const n=this.children[t];"function"==typeof n.execute&&await n.execute(e)}})()}}customElements.get("fx-trigger")||customElements.define("fx-trigger",fu);class mu extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.hasAttribute("label")&&(this.label=this.getAttribute("label")),this.hasAttribute("name")&&(this.name=this.getAttribute("name")),this.hasAttribute("selected")&&(this.selected=this.getAttribute("selected"));const e=`\n           ${this.label?`<span>${this.label}</span>`:""}\n           <slot></slot>\n        `;this.shadowRoot.innerHTML=`\n            <style>\n                \n            :host {\n                visibility: none;\n            }\n        \n            </style>\n            ${e}\n    `}}customElements.get("fx-case")||window.customElements.define("fx-case",mu);class gu extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const e=this.closest("fx-fore");this.render("\n          :host {\n            position:absolute;\n            display: block;\n            width:var(--inspector-handle-width);\n            background:var(--inspector-bg);\n            top:0;\n            right:0;\n            bottom:0;\n            height: 100%;\n            background: var(--inspector-bg);\n            color: white;\n            /*max-height: 33%;*/\n            overflow: scroll;\n            transition:width 0.3s ease;\n          }\n          :host([open]){\n            width: 30%;\n          }\n          details{\n            margin:1rem;\n          }\n          .main{\n            padding-left:var(--inspector-handle-width);\n            color:var(--inspector-color);\n            overflow:scroll;\n            height:100%;\n          }\n          pre{\n            background:var(--inspector-pre-bg);\n            color:var(--inspector-color);\n            overflow:scroll;\n            padding:0.2rem;\n          }\n          .handle{\n            display:block;\n            height:100%;\n            width:var(--inspector-handle-width);\n            background:var(--inspector-handle-bg);\n            opacity:0.7;\n            position:absolute;\n            left:0;\n            color:white;\n            cursor:pointer;\n          }\n          .handle:hover{\n            opacity:1;\n          }\n          .handle::before{\n            content: 'Data Inspector';\n            white-space: nowrap;\n            transform: rotate(-90deg);\n            display: inline-block;\n            position: absolute;\n            left: -85px;\n            width: 200px;\n            top: 40px;\n          }\n          summary{\n            cursor:pointer;\n          }\n        "),e.addEventListener("refresh-done",(()=>{this.update()}))}update(){const e=this.shadowRoot.querySelectorAll("pre"),t=this.closest("fx-fore");Array.from(e).forEach((e=>{const n=t.getModel().getInstance(e.getAttribute("id"));"xml"===n.type&&(e.innerText=this.serializeDOM(n.instanceData)),"json"===n.type&&(e.innerText=JSON.stringify(n.instanceData,void 0,2))}))}render(e){const t=this.closest("fx-fore"),n=Array.from(t.querySelectorAll("fx-instance"));this.shadowRoot.innerHTML=`\n            <style>\n                ${e}\n            </style>\n            <div class="main">\n            <slot></slot>\n            <span class="handle"></span>\n                ${n.map(((e,t)=>`\n                  <details>\n                      <summary>${e.id}</summary>\n                      <pre id="${e.id}"></pre>\n                  </details>\n                `))}\n            </div>\n        `;this.shadowRoot.querySelector(".handle").addEventListener("click",(e=>{this.hasAttribute("open")?this.removeAttribute("open"):this.setAttribute("open","open")}))}serializeDOM(e){const t=(new XMLSerializer).serializeToString(e);return ba.prettifyXml(t)}}customElements.get("fx-inspector")||customElements.define("fx-inspector",gu);class yu extends HTMLElement{static get properties(){return{id:String}}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.innerHTML=this.render("\n          :host {\n            display:none;\n            height: 100vh;\n            width:100vw;\n            position:fixed;\n            left:0;\n            top:0;\n            right:0;\n            bottom:0;\n            transition:opacity 0.4s linear;\n          }\n\n        "),this.id=this.getAttribute("id");const e=this.querySelector(".close-dialog");e&&e.addEventListener("click",(()=>{this.classList.remove("show")})),this.addEventListener("transitionend",(()=>{})),this.focus()}render(e){return`\n      <style>\n          ${e}\n      </style>\n      <slot></slot>\n    `}open(){window.addEventListener("keyup",(e=>{"Escape"===e.key&&this.hide()}),{once:!0}),this.classList.add("show")}async hide(){await ba.fadeOutElement(this,400),this.classList.remove("show")}}customElements.get("fx-dialog")||customElements.define("fx-dialog",yu);class vu extends al{static get properties(){return{...super.properties,valueAttr:{type:String}}}constructor(){super(),this.valueAttr=this.hasAttribute("value")?this.getAttribute("value"):null}connectedCallback(){super.connectedCallback(),this.addEventListener("click",(e=>{const t=this.querySelectorAll("[value]");let n;"LABEL"===e.target.nodeName&&(n=Ca(e.target.getAttribute("for"),this),n.checked=!n.checked);let r="";Array.from(t).forEach((e=>{e.checked&&(r+=` ${e.getAttribute("value")}`)})),this.setAttribute("value",r.trim());const i=ba.getClosest("[ref]",this.parentNode);if(!i)return;const o=i.getModelItem(),s=this.shadowRoot.getElementById("setvalue");s.setValue(o,r.trim()),s.actionPerformed()}))}getWidget(){return this}async updateWidgetValue(){const e=ba.getClosest("[ref]",this.parentNode);e&&(this.value=e.value),this.setAttribute("value",this.value)}updateEntry(e,t){const n=e.querySelector("label");n.textContent=t.textContent;const r=ba.createUUID();n.setAttribute("for",r);const i=e.querySelector("[value]"),o=i.value,s=Ra(o.substring(1,o.length-1),t,e),a=` ${s} `,l=` ${this.getAttribute("value")} `;i.value=s,i.setAttribute("id",r),-1!==l.indexOf(a)&&(i.checked=!0)}}customElements.get("fx-items")||customElements.define("fx-items",vu);class wu extends Ja{static get properties(){return{ref:{type:String},repeat:{type:String},clear:{type:String}}}constructor(){super(),this.repeat=""}connectedCallback(){super.connectedCallback(),this.ref=this.getAttribute("ref"),this.repeat=this.getAttribute("repeat")}perform(){super.perform(),this._dataFromTemplate(),this.needsUpdate=!0}actionPerformed(){super.actionPerformed(),this._dispatch()}_dataFromTemplate(){const e=this.getInScopeContext(),t=this.getOwnerForm().querySelector(`#${this.repeat}`),n=t.shadowRoot.querySelector("template"),r=e.ownerDocument.createElement(t.ref),i=this._generateInstance(n.content,r);e.appendChild(i)}_dispatch(){const e=Ca(this.repeat,this);ba.dispatch(e,"index-changed",{index:e.nodeset.length})}_clear(e){let t=e.firstChild;const n=e.attributes;for(let e=0;e<n.length;e+=1)n[e].value="";for(;t;)1===t.nodeType&&t.hasAttributes()&&(t.textContent=""),this._clear(t),t=t.nextSibling}_generateInstance(e,t){if(1===e.nodeType&&e.hasAttribute("ref")){const n=e.getAttribute("ref");let r;"."===n||(n.startsWith("@")?t.setAttribute(n.substring(1),""):(r=document.createElement(n),t.appendChild(r),0===e.children.length&&(r.textContent=e.textContent)))}if(e.hasChildNodes()){const n=e.children;for(let e=0;e<n.length;e+=1)this._generateInstance(n[e],t)}return t}getInstanceId(){return this.ref.startsWith("instance(")?"not implemented":"default"}}customElements.get("fx-append")||window.customElements.define("fx-append",wu);class bu extends Ja{constructor(){super()}perform(){const e=Xa(this.getAttributeNode("ref")||this,this.ref);this.nodeset=Ma(this.ref,e,this);const t=this.nodeset;let n;if(Array.isArray(t)){if(0===t.length)return;n=t[0].parentNode,t.forEach((e=>{this._deleteNode(n,e)}))}else n=t.parentNode,this._deleteNode(n,t);const r=ya.resolveInstance(this),i=this.getModel().getInstance(r);ba.dispatch(i,"deleted",{deletedNodes:t}),this.needsUpdate=!0}_deleteNode(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return;if(t.nodeType===Node.DOCUMENT_NODE)return;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return;if(null===t.parentNode)return;this.getModelItem().readonly||e.removeChild(t)}actionPerformed(){this.getModel().rebuild(),super.actionPerformed()}}customElements.get("fx-delete")||window.customElements.define("fx-delete",bu);class xu extends Ja{connectedCallback(){super.connectedCallback(),this.control=this.hasAttribute("control")?this.getAttribute("control"):null}perform(){const e="#"+this.control;let t=this.getOwnerForm().querySelector(e);const n=this.closest("fx-repeatitem");if(n)return t=n.querySelector(e),void this._focus(t);const r=t.closest("fx-repeatitem, .fx-repeatitem");if(r){t=r.parentNode.querySelector("[repeat-index] "+e)}this._focus(t)}_focus(e){e&&e.getWidget().focus()}}customElements.get("fx-setfocus")||window.customElements.define("fx-setfocus",xu);class Au extends Ja{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback&&super.connectedCallback();this.shadowRoot.innerHTML="\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        <slot></slot>\n    ",this.at=Number(this.hasAttribute("at")?this.getAttribute("at"):0),this.position=this.hasAttribute("position")?this.getAttribute("position"):"after",this.origin=this.hasAttribute("origin")?this.getAttribute("origin"):null,this.keepValues=!!this.hasAttribute("keep-values")}_cloneOriginSequence(e,t){let n;if(this.origin){let t;try{t=Pa(this.origin,e,this.getOwnerForm()),Array.isArray(t)&&0===t.length&&(n=null),n=t.cloneNode(!0)}catch(e){}}else t&&(n=this._cloneTargetSequence(t),n&&!this.keepValues&&this._clear(n));return n}_getInsertIndex(e,t){return 0===t.length?null:this.hasAttribute("at")?Fa(this.getAttribute("at"),e,this.getOwnerForm()):t.length}perform(){let e,t;this.hasAttribute("context")&&(e=Xa(this.getAttributeNode("context"),this.getAttribute("context")),t=Ma(this.getAttribute("context"),e,this.getOwnerForm())),this.hasAttribute("ref")&&(e||(e=Xa(this.getAttributeNode("ref"),this.ref)),t=Ma(this.ref,e,this.getOwnerForm()));const n=this._cloneOriginSequence(e,t);if(!n)return;let r,i;if(0===t.length)r=e,e.appendChild(n),i=1;else{if(this.hasAttribute("at")?(i=Fa(this.getAttribute("at"),e,this.getOwnerForm()),r=t[i-1]):(i=t.length,r=t[t.length-1]),!r){i=1,r=t;i=Fa("count(preceding::*)",t,this.getOwnerForm())+1}this.position&&"before"===this.position&&r.parentNode.insertBefore(n,r),this.position&&"after"===this.position&&(i+=1,this.hasAttribute("context")&&this.hasAttribute("ref")?e.append(n):this.hasAttribute("context")?(i=1,r.prepend(n)):r.insertAdjacentElement("afterend",n))}document.dispatchEvent(new CustomEvent("index-changed",{composed:!0,bubbles:!0,detail:{insertedNodes:n,index:i}})),this.needsUpdate=!0}_cloneTargetSequence(e){return Array.isArray(e)&&0!==e.length?e[e.length-1].cloneNode(!0):!Array.isArray(e)&&e?e.cloneNode(!0):null}actionPerformed(){this.getModel().rebuild(),super.actionPerformed()}_clear(e){const t=e.attributes;for(let e=0;e<t.length;e+=1)t[e].value="";e.textContent&&(e.textContent="");let n=e.firstChild;for(;n;)1===n.nodeType&&n.hasAttributes()&&(n.textContent=""),this._clear(n),n=n.nextSibling}}customElements.get("fx-insert")||window.customElements.define("fx-insert",Au);class _u extends Ja{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback(),this.event=this.hasAttribute("event")?this.getAttribute("event"):"",this.level=this.hasAttribute("level")?this.getAttribute("level"):"ephemeral";this.shadowRoot.innerHTML=`\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        ${this.renderHTML()}\n    `}disconnectedCallback(){this.targetElement.removeEventListener(this.event,(e=>this.execute(e)))}renderHTML(){return"\n        <slot></slot>\n    "}perform(){let e;super.perform(),e=this.hasAttribute("value")?this.getValue():this.textContent,this.dispatchEvent(new CustomEvent("message",{composed:!0,bubbles:!0,detail:{level:this.level,message:e}}))}}customElements.get("fx-message")||window.customElements.define("fx-message",_u);class ku extends Ja{static get properties(){return{...super.properties,ref:{type:String},valueAttr:{type:String}}}constructor(){super(),this.ref="",this.valueAttr=""}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),!this.hasAttribute("ref"))throw new Error('fx-setvalue must specify a "ref" attribute');this.ref=this.getAttribute("ref"),this.valueAttr=this.getAttribute("value")}perform(){super.perform();let{value:e}=this;null!==this.valueAttr?[e]=Ia(this.valueAttr,this.nodeset,this,this.detail):e=""!==this.textContent?this.textContent:"",e.nodeType===Node.ATTRIBUTE_NODE&&(e=e.nodeValue);const t=this.getModelItem();this.setValue(t,e)}setValue(e,t){const n=e;n&&n.value!==t&&(n.value=t,this.getModel().changed.push(e),this.needsUpdate=!0)}}customElements.get("fx-setvalue")||window.customElements.define("fx-setvalue",ku);class Eu extends Ja{constructor(){super(),this.value=""}connectedCallback(){super.connectedCallback(),this.submission=this.getAttribute("submission")}perform(){super.perform();const e=this.getModel().querySelector(`#${this.submission}`);if(null===e)throw this.dispatchEvent(new CustomEvent("error",{composed:!0,bubbles:!0,detail:{message:`fx-submission element with id: '${this.submission}' not found`}})),new Error(`submission with id: ${this.submission} not found`);e.submit()}}customElements.get("fx-send")||window.customElements.define("fx-send",Eu);class Cu extends Ja{connectedCallback(){super.connectedCallback(),this.hasAttribute("case")&&(this.case=this.getAttribute("case"))}perform(){if(super.perform(),this.case){const e=this.getOwnerForm().querySelector(`#${this.case}`);if(!e)return void ba.dispatch(this,"error",{message:`fx-case id not found: ${this.case}`});e.parentNode.toggle(e)}}}customElements.get("fx-toggle")||window.customElements.define("fx-toggle",Cu);class Su extends Ja{constructor(){super(),this.name=null,this.targetid=null,this.details=null,this.attachShadow({mode:"open"})}connectedCallback(){if(super.connectedCallback(),this.name=this.getAttribute("name"),!this.name)throw new Error("no event specified for dispatch",this);this.targetid=this.hasAttribute("targetid")?this.getAttribute("targetid"):null}perform(){const e=this.querySelectorAll("fx-property"),t={};if(Array.from(e).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value"),i=e.getAttribute("expr");if(i){if(r)throw new Error('if "expr" is given there must not be a "value" attribute');const[e]=Ia(i,this.getInScopeContext(),this.getOwnerForm());let o=null;if(e.nodeName){o=(new XMLSerializer).serializeToString(e)}t[n]=o||e}r&&(t[n]=r)})),this.targetid){let e=Ca(this.targetid,this.parentNode,null);if(e||(e=document.getElementById(this.targetid)),!e)throw new Error(`targetid ${this.targetid} does not exist in document`);e.dispatchEvent(new CustomEvent(this.name,{composed:!0,bubbles:!0,detail:t}))}else document.dispatchEvent(new CustomEvent(this.name,{composed:!0,bubbles:!0,detail:t}))}}customElements.get("fx-dispatch")||window.customElements.define("fx-dispatch",Su);class Ou extends Ja{perform(){this.getModel().updateModel()}}customElements.get("fx-update")||window.customElements.define("fx-update",Ou);class Tu extends Ja{perform(){if(this.hasAttribute("self")){const e=ba.getClosest("fx-control",this);if(e)return void e.refresh()}if(this.hasAttribute("force"))this.getOwnerForm().forceRefresh();else if(this.hasAttribute("control")){const e=Ca(this.getAttribute("control"),this);ba.isUiElement(e.nodeName)&&"function"==typeof e.refresh&&e.refresh()}else this.getOwnerForm().refresh()}}customElements.get("fx-refresh")||window.customElements.define("fx-refresh",Tu);class Nu extends Ja{static get properties(){return{...super.properties,with:{type:String},replaceNode:Object}}constructor(){super(),this.with=""}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.with=this.getAttribute("with")}perform(){super.perform();const e=Pa(this.with,this.nodeset,this);e&&this.replace(this.nodeset,e)}replace(e,t){if(e&&t&&e.nodeName&&t.nodeName){if(e.nodeType===Node.ATTRIBUTE_NODE){const{ownerElement:n}=e;n.setAttribute(t.nodeName,t.textContent),n.removeAttribute(e.nodeName)}else if(e.nodeType===Node.ELEMENT_NODE){const n=t.cloneNode(!0);e.replaceWith(n)}this.needsUpdate=!0}}}customElements.get("fx-replace")||window.customElements.define("fx-replace",Nu);class Bu extends Ja{connectedCallback(){super.connectedCallback&&super.connectedCallback()}perform(){super.perform();const e=new CustomEvent("return",{composed:!0,bubbles:!0,detail:{nodeset:this.nodeset}});this.getOwnerForm().dispatchEvent(e)}}customElements.get("fx-return")||window.customElements.define("fx-return",Bu);class Iu extends Ja{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.src=this.hasAttribute("src")?this.getAttribute("src"):null;this.shadowRoot.innerHTML="\n        <style>\n            \n        :host{\n            display:none;\n        }\n    \n        </style>\n        <slot></slot>\n    "}perform(){super.perform();const{children:e}=this;if(this.src){this.innerHTML="";const e=document.createElement("script");e.src=this.src,this.appendChild(e)}else Array.from(e).forEach((e=>{if("fx-var"===e.localName)return;const t=e;t.detail=this.detail,t.perform()})),this.dispatchActionPerformed(),this.needsUpdate=!0}}customElements.get("fx-action")||window.customElements.define("fx-action",Iu);class Pu extends Iu{connectedCallback(){this.message=this.hasAttribute("message")?this.getAttribute("message"):null}perform(){window.confirm(this.message)&&super.perform()}}customElements.get("fx-confirm")||window.customElements.define("fx-confirm",Pu);class Mu extends Iu{connectedCallback(){this.dialog=this.getAttribute("dialog"),this.dialog||ba.dispatch(this,"error",{message:"dialog does not exist"})}perform(){const e=Ca(this.dialog,this);e.open(),ba.dispatch(e,"dialog-shown",{})}}customElements.get("fx-show")||window.customElements.define("fx-show",Mu);class Du extends Ja{connectedCallback(){this.dialog=this.getAttribute("dialog"),this.dialog||ba.dispatch(this,"error",{message:"dialog does not exist"})}perform(){const e=Ca(this.dialog,this);e.hide(),ba.dispatch(e,"dialog-hidden",{})}}customElements.get("fx-hide")||window.customElements.define("fx-hide",Du);class Ru extends Ja{connectedCallback(){super.connectedCallback(),this.addEventListener("reload",(e=>{window.location.reload()}),{once:!0})}perform(){ba.dispatch(this,"reload",{})}}customElements.get("fx-reload")||window.customElements.define("fx-reload",Ru);class Fu extends(qa(HTMLElement)){constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.style.display="none",this.signature=this.hasAttribute("signature")?this.getAttribute("signature"):null,this.signature,this.type=this.hasAttribute("type")?this.getAttribute("type"):null,this.shadowRoot.innerHTML="<slot></slot>",this.override=this.hasAttribute("override")?this.getAttribute("override"):"true",this.functionBody=this.innerText;const e=this.getAttribute("type")||"text/xpath",t=this.signature.match(/(?:(?<prefix>[^:]*):)?(?<localName>[^(]+)\((?<params>(?:\(\)|[^)])*)\)(?: as (?<returnType>.*))?/);if(!t)throw new Error(`Function signature ${this.signature} could not be parsed`);const{prefix:n,localName:r,params:i,returnType:o}=t.groups,s="local"!==n&&n?`${n}:${r}`:{namespaceURI:"http://www.w3.org/2005/xquery-local-functions",localName:r};n||_a.push(r);const a=i?i.split(",").map((e=>{const t=e.match(/(?<variableName>\$[^\s]+)(?:\sas\s(?<varType>.+))/);if(!t)throw new Error(`Param ${e} could not be parsed`);const{variableName:n,varType:r}=t.groups;return{variableName:n,variableType:r||"item()*"}})):[];switch(e){case"text/javascript":{const e=new Function("_domFacade",...a.map((e=>e.variableName)),"form",this.functionBody);fa(s,a.map((e=>e.variableType)),o||"item()*",((...t)=>e.apply(this.getInScopeContext(),[...t,this.getOwnerForm()])));break}case"text/xquf":case"text/xquery":case"text/xpath":{const t="text/xpath"===e?"XPath3.1":"text/xquery"===e?"XQuery3.1":"XQueryUpdate3.1",n=(e,...n)=>Ia(this.functionBody,this.getInScopeContext(),this.getOwnerForm(),a.reduce(((e,t,r)=>(e[t.variableName.replace("$","")]=n[r],e)),{}),{language:t});fa(s,a.map((e=>e.variableType)),o||"item()*",n);break}default:throw new Error(`Unexpected mimetype ${e} for function`)}}}customElements.get("fx-function")||customElements.define("fx-function",Fu);
