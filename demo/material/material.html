<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" name="viewport"/>
    <title>template</title>
    <link href="../../resources/fore.css" rel="stylesheet">
</head>
<body>
<fx-fore>
    <fx-model>
        <fx-instance>
            <data>
                <value></value>
                <language>de</language>
            </data>
        </fx-instance>
        <fx-instance id="material" src="material.xml"></fx-instance>

    </fx-model>
	<fx-function signature="sortNames($terms as element()*) as element()*" type="text/xquery">
      for $term in $terms
      order by $term/name[@xml:lang = instance()/language] => lower-case()
      return $term
    </fx-function>
	<fx-control ref="instance()/language"></fx-control>
    {language}
    <fx-control ref="value">
        <fx-items ref="sortNames(instance('material')/term)" class="widget">
            <template>
                <span class="fx-checkbox">
                    <input type="checkbox" value="{@ref}"/>
                    <label>{name[@xml:lang = instance()/language]}</label>
					<br/>
                </span>
            </template>
        </fx-items>
        <!--                                    <fx-replace event="init" ref="instance('material')/*" with="sortNames(instance('material')/term[name[@xml:lang = instance('vars')/language]])"></fx-replace>-->
    </fx-control>

</fx-fore>
<script type="module" src="../demo.js"></script>
</body>
</html>
