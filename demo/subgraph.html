<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" name="viewport"/>

    <title>Dependency Graph calculation</title>

    <!--    <script src="../node_modules/webcomponentsjs/webcomponents-loader.js"></script>-->

    <link href="../resources/fore.css" rel="stylesheet">
        <link href="../resources/vars.css" rel="stylesheet">
        <link href="../resources/demo.css" rel="stylesheet">

    <style>
        body, input{
            font-size: 1.2rem;
        }
        .invalid input{
            color:red;
        }
        fx-control{
            display: block;
        }
        label{
            width: 200px;
            display: inline-block;
        }
        .readonly input{
            opacity: 0.6;
            background: lightgrey;
        }
        fx-group{
            margin-top:1rem;
        }
        fx-group div{
            padding:1rem 0;
        }
    </style>
</head>
<body>
<div class="wrapper">

    <demo-snippet>
        <template>
            <h1>Subgraph recalculation</h1>
            <fx-fore>
<!--
                <fx-action event="ready">
                    <fx-update></fx-update>
                    <fx-refresh></fx-refresh>
                </fx-action>
-->

                <fx-model>
                    <fx-instance>
                        <data>
                            <a>10</a>
                            <b>10</b>
                            <c></c>
                            <d></d>
                            <e></e>
                            <x>3.5</x>
                            <y></y>
                            <z></z>
                        </data>
                    </fx-instance>
                    <fx-bind ref="c" calculate="../a * ../b" constraint="number(.) <= 100" readonly="true()"></fx-bind>
                    <fx-bind ref="d" calculate="../a + ../b"  constraint="number(.) <= 20" readonly="true()"></fx-bind>
                    <fx-bind ref="e" calculate="../a + 5"  constraint="number(.) <= 10" readonly="true()"></fx-bind>

                    <fx-bind ref="y" calculate="../x + 5.0" readonly="true()" constraint=". <= 10"></fx-bind>
                    <!--            <fx-bind ref="z" calculate="../y + 5"  constraint="number(.) <= 30" readonly="true()"></fx-bind>-->
                </fx-model>
                <fx-control ref="a" update-event="input">
                    <label>a</label>
                    <input type="number">
                </fx-control>
                <fx-control ref="b" update-event="input">
                    <label>b</label>
                    <input type="number">
                </fx-control>

                <fx-group>
                    <div>some controls depending on the 'a' and 'b' controls</div>
                    <fx-control ref="c">
                        <label>c = a * b <= 100</label>
                    </fx-control>
                    <fx-control ref="d">
                        <label>d = a + b <= 10</label>
                    </fx-control>
                    <fx-control ref="e">
                        <label>e = a + 5 < 10</label>
                    </fx-control>
                </fx-group>

                <fx-group>
                    <div>Some controls depending on the 'x' node</div>
                    <fx-control ref="x" update-event="input">
                        <label>x</label>
                        <input type="number">
                    </fx-control>
                    <fx-control ref="y">
                        <label>y = ../x + 5.0 <= 10.0</label>
                    </fx-control>
                    <fx-control ref="z">
                        <label>z</label>
                    </fx-control>
                </fx-group>

                <fx-group>
                    <div>The data:</div>
                    <pre>
                    {log('default')}
                </pre>
                </fx-group>
            </fx-fore>
        </template>
    </demo-snippet>

</div>
<script type="module" src="./demo.js"></script>
</body>
</html>