<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" name="viewport"/>
    <title>todo</title>
    <link rel="stylesheet" href="../../resources/fore.css">
    <link rel="stylesheet" href="todo.css">
    <script type="module" src="../demo.js"></script>
  </head>
  <body unresolved="unresolved">
    <div class="wrapper">
      <fx-fore id="todo">
        <fx-model>
          <fx-instance id="todos" shared>
            <data>
              <todos>
				<todo>Fix this!</todo>
				<todo>Fix this as well!</todo>
				<todo>Why is this not fixed yet?!</todo>
				<todo>Write tests</todo>
			  </todos>
            </data>
          </fx-instance>
        </fx-model>
		<h1>There are {instance('todos')/todos/todo => count()} TODOS</h1>

		<div style="display:flex; flex-direction:row; width:100%">
		  <div style="flex-grow:0; flex-shrink:1; min-width:100px;">
			<fx-repeat ref="instance('todos')/todos/todo">
			  <template>
				  <fx-control ref="."></fx-control>
			  </template>
			</fx-repeat>
		  </div>

		  <div style="flex-grow:0; flex-shrink:1; min-width:100px;">
			<fx-fore id="child-a">
			  <fx-model>
				<!-- TODO: Make this work!!! -->
				<!-- <fx-instance id="default"><data><message>You can do it!</message></data></fx-instance> -->
			  </fx-model>
			  <h3>Summary view ({instance('todos')/todos/todo => count()} TODOS)</h3>
			  <fx-repeat ref="instance('todos')/todos/todo" id="repeat-a">
				<template>
				  <h2>{.} - {instance('default')/message}</h2>
				</template>
			  </fx-repeat>
    		</fx-fore>
		  </div>
		  <div style="flex-grow:0; flex-shrink:1; align-self:right">
			<fx-fore id="child-b">
			  <h3>Edit view  ({instance('todos')/todos/todo => count()} TODOS)</h3>
			  <fx-repeat ref="instance('todos')/todos/todo" id="repeat-b">
				<template>
				  <fx-control ref="."></fx-control>
				</template>
			  </fx-repeat>
    		</fx-fore>
		  </div>
		</div>
	  </fx-fore>
	  <fx-action-log></fx-action-log>

	</div>

  </body>
</html>
