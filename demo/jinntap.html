<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"
      name="viewport"
    />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <script type="module" src="../node_modules/@jinntec/jinntap/dist/jinn-tap.es.js"></script>
    <link rel="stylesheet" href="../node_modules/@jinntec/jinntap/dist/editor-styles.css" />
    <title>A simple output</title>

    <link href="../resources/demo.css" rel="stylesheet" />

    <style>
      .dynamic {
        background: #76ff03;
      }
      /*
        fx-model{
            display: none;
        }
*/
      noscript {
        padding: 1rem;
        background: orange;
        font-size: 2rem;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <fore-corner href="../doc/demos.html" title="back to Demos"></fore-corner>
      <h1>Including Jinntap!</h1>

      <demo-snippet>
        <template>
          <fx-fore ignore-expressions="script" id="host">
            <fx-model>
              <fx-instance
                xpath-default-namespace="http://www.tei-c.org/ns/1.0"
                src="tei/example.xml"
              ></fx-instance>
            </fx-model>
            <fx-control ref="instance('default')" as="node" update-event="">
              <jinn-tap class="widget"></jinn-tap>
              <script>
                  const editor = document.querySelector('jinn-tap');
                  const control = editor.parentNode;

				document.getElementById('host').addEventListener('ready', (event) => {
					debugger;
					editor.xml = control.value.outerHTML;
				});


				editor.addEventListener('content-change', event => {
					debugger;
					const newValue = event.detail.xml;
					const parsed = new DOMParser().parseFromString(newValue, 'text/xml')
					control.setValue(parsed.documentElement);
                });
              </script>
            </fx-control>
            <pre>
              <fx-output ref="instance('default')/text"></fx-output>
              </pre>
          </fx-fore>
        </template>
      </demo-snippet>
    </div>

    <script type="module" src="./demo.js"></script>
  </body>
</html>
