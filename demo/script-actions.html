<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" name="viewport"/>

    <title>Actions with Script</title>

<!--    <script src="./node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>-->

    <link href="../resources/demo.css" rel="stylesheet">
    <style>

        fx-control {
            font-size: 1.2rem;
        }

        fx-output {
            display: none;
        }

        button {
            padding: 0.4rem;
            margin-top: 2rem;
            font-size: 0.8rem;
        }
    </style>

</head>
<body unresolved="unresolved">
<fore-corner href="../doc/demos.html" title="Back to Demos"></fore-corner>
<div class="wrapper">

    <h1>Actions calling JavaScript</h1>

    <p>
        In general Fore is a Turing-conplete language to build applications for the browser platform and you can avoid
        the use of JavaScript altogether.
    </p>

    <p>
        But once you want to integrate with some third-party components you are often thrown back and have to use
        some glue-code. Besides <a href="http://localhost:8090/demo/functions.html" target="_blank">custom functions</a> you
        can use a script action to knock the backdoor of Fore.
    </p>

    <p class="note">
        Use responsibly!<br><br>
        For security reasons the script needs to be external. Also you should make sure to wrap your script
        in curly brackets to put it into its own scope. Otherwise repeated executions might fail with errors.
        <br><br>
        Special testing and precautions should be considered when using script.
    </p>
    <demo-snippet>
        <template>
            <fx-fore>
                <fx-model>
                    <data>
                        <confirmation>false</confirmation>
                        <entered>false</entered>
                    </data>
                </fx-model>
                <h2>Script action</h2>
                <p>loads JavaScript from external file</p>
                <fx-trigger>
                    <button>script action</button>
                    <fx-action src="test.js"></fx-action>
                </fx-trigger>
            </fx-fore>
        </template>
    </demo-snippet>

    <p>Open the browser console to see the instance data logged.</p>
    <h2>The JavaScript used here (test.js):</h2>
    <p>
        As Fore elements are usual DOM elements we can of course also use their API directly to get to our data
        by searching for the <code>data</code> elements and using its <code>data</code> property. This
        will hold the actual data and can be queried simply with <code>querySelector</code>.
    </p>

    <demo-snippet class="nodemo">
        <template>
            {
                const inst = document.querySelector('data');
                console.log('data', inst.data.querySelector('confirmation').textContent);
                alert(`confirmation: ${inst.data.querySelector('confirmation').textContent}`);
            }
        </template>
    </demo-snippet>

</div>


<script type="module" src="./demo.js"></script>
</body>
</html>