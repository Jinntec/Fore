<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:TEI="http://www.tei-c.org/ns/1.0" xmlns:xf="http://www.w3.org/2002/xforms" xmlns:bfc="http://betterform.sourceforge.net/xforms/controls" data-template="templates:surround" data-template-with="templates/page.html" data-template-at="content">
<head>
    <title>LGPN-Ling</title><!--
        ~ Copyright (c) 2015. existsolutions - http://www.exsitsolutions.com
        -->
    <link href="resources/js/vendor/select2/select2.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="resources/css/style.css"/>
</head>
<body>
<div class="hidden">
    <xf:model id="model-1">
        <xf:instance id="i-default">
            <TEI xmlns="http://www.tei-c.org/ns/1.0">
                <teiHeader>
                    <revisionDesc>
                        <listChange/>
                    </revisionDesc>
                </teiHeader>
                <text>
                    <body>
                    <entry xml:id="uuid-0001">
                        <form type="lemma">
                            <orth type="greek"/>
                            <orth type="latin"/>
                            <orth type="h-variant"/>
                            <orth type="lgpn"/>
                            <date notBefore="" notAfter=""/>
                        </form>
                        <gramGrp type="classification">
                            <gram type="fictitious"/>
                            <gram type="GPR"/>
                            <gram type="sublemma" ana="monosemic"/>
                            <usg type="lang" cert=""/>
                        </gramGrp>
                        <gramGrp cert="high" ana="" type="segmentation" subtype="">
                            <m baseForm="" type="prefix" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                            <m baseForm="" type="radical" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                            <m baseForm="" type="radical" n="2" function="" ana="" subtype="" cert="" corresp=""/>
                            <m baseForm="" type="suffix" subtype="" n="1"/>
                            <m baseForm="" type="suffix" n="2"/>
                            <m baseForm="" type="suffix" n="3"/>
                            <m baseForm="" type="suffix" n="4"/>
                            <listBibl>
                                <cit type="auxiliary">
                                    <quote/>
                                    <bibl>
                                        <author/>
                                    </bibl>
                                    <ref target=""/>
                                    <span/>
                                </cit>
                                <cit type="modern">
                                    <quote/>
                                    <bibl>
                                        <author/>
                                    </bibl>
                                    <ref target=""/>
                                    <span/>
                                </cit>
                            </listBibl>
                        </gramGrp>
                    </entry>
                    </body>
                </text>
            </TEI>
        </xf:instance>
        <xf:bind nodeset="//TEI:orth[@type ='latin']" required="true()" type="xs:string"/>
        <xf:instance id="i-template">
            <data xmlns="http://www.tei-c.org/ns/1.0">
                <gramGrp cert="" ana="" type="segmentation" subtype="">
                    <m baseForm="" type="prefix" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                    <m baseForm="" type="radical" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                    <m baseForm="" type="radical" n="2" function="" ana="" subtype="" cert="" corresp=""/>
                    <m baseForm="" type="suffix" subtype="" n="1"/>
                    <m baseForm="" type="suffix" n="2"/>
                    <m baseForm="" type="suffix" n="3"/>
                    <m baseForm="" type="suffix" n="4"/>
                    <listBibl/>
                </gramGrp>
                <usg type="lang" cert=""/>
                <re>
                    <form>
                        <lbl>son</lbl>
                        <orth/>
                    </form>
                </re>
                <form type="variant" cert="">
                    <gen/>
                    <usg cert=""/>
                    <orth cert=""/>
                </form>
                <cit type="source">
                    <quote/>
                    <bibl>
                        <author/>
                    </bibl>
                    <ref target=""/>
                    <span/>
                </cit>
                <cit type="auxiliary">
                    <quote/>
                    <bibl>
                        <author/>
                    </bibl>
                    <ref target=""/>
                    <span/>
                </cit>
                <cit type="linguistic">
                    <quote/>
                    <bibl>
                        <author/>
                    </bibl>
                    <ref target=""/>
                    <span/>
                </cit>
                <cit type="modern">
                    <quote/>
                    <bibl>
                        <author/>
                    </bibl>
                    <ref target=""/>
                    <span/>
                </cit>
            </data>
        </xf:instance>
        <xf:instance id="i-controller">
            <data xmlns="">
                <morpheme/>
            </data>
        </xf:instance>
        <xf:instance xmlns="" id="i-suffix-1" src="resources/xml/suffixes/suffix-1.xml"/>
        <xf:instance xmlns="" id="i-suffix-2" src="resources/xml/suffixes/suffix-2.xml"/>
        <xf:instance xmlns="" id="i-suffix-3" src="resources/xml/suffixes/suffix-3.xml"/>
        <xf:instance xmlns="" id="i-suffix-4" src="resources/xml/suffixes/suffix-4.xml"/>
        <xf:instance xmlns="" id="i-classification" src="resources/xml/classification.xml"/>
        <xf:instance xmlns="" id="i-polysemic" src="resources/xml/polysemic.xml"/>
        <xf:instance xmlns="" id="i-sublemma" src="resources/xml/sublemma.xml"/>
        <xf:instance xmlns="" id="i-relations" src="resources/xml/relations.xml"/>
        <xf:instance xmlns="" id="i-prefix-headedness" src="resources/xml/prefix-headedness.xml"/>
        <xf:instance xmlns="" id="i-headedness" src="resources/xml/headedness.xml"/>
        <xf:instance xmlns="" id="i-functions" src="resources/xml/functions.xml"/>
        <xf:instance xmlns="" id="i-other" src="resources/xml/other.xml"/>
        <xf:instance xmlns="" id="i-name-characteristic" src="resources/xml/name-characteristic.xml"/>
        <xf:instance xmlns="" id="i-fictitious" src="resources/xml/fictitious.xml"/>
        <xf:instance xmlns="" id="i-gpr" src="resources/xml/gpr.xml"/>
        <xf:instance xmlns="" id="i-dialects" src="../lgpn-ling-data/data/taxonomies/dialects.xml"/>
        <xf:instance xmlns="" id="i-genders" src="../lgpn-ling-data/data/taxonomies/genders.xml"/>

        <xf:instance id="i-meanings">
            <meanings xmlns="">
                <being-reloaded grp="0" n=""/>
                <target>
                    <TEI:taxonomy/>
                </target>
                <template>
                    <meaning grp="0" n="0"/>
                </template><!-- and actual entries created dynamically e.g.:
                        <meaning grp="1" n="1">
                            <TEI:taxonomy/>
                        </meaning>
                        -->
            </meanings>
        </xf:instance>
        <xf:submission id="s-load-data" method="get" replace="instance" ref="instance('i-default')" validate="false" resource="modules/load.xql?id={bf:appContext('id')}">
            <xf:message ev:event="xforms-submit-done" level="ephemeral">Data have been loaded.</xf:message>
            <xf:message ev:event="xforms-submit-error">Failed to load data.</xf:message>
            <xf:action ev:event="xforms-submit-done">
                <xf:action while="instance('i-meanings')/being-reloaded/@grp &lt; count(instance('i-default')//TEI:gramGrp[@type='segmentation'])">
                    <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="instance('i-meanings')/being-reloaded/@grp + 1"/>
                    <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="1"/>
                    <xf:send submission="s-reload-meanings"/>
                    <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="2"/>
                    <xf:send submission="s-reload-meanings"/>
                </xf:action>
            </xf:action>
        </xf:submission>
        <xf:submission id="s-save-data" method="post" replace="none" validate="true" resource="modules/save.xql">
            <xf:header>
                <xf:name>userid</xf:name>
                <xf:value>{bf:appContext('id')}</xf:value>
            </xf:header>
            <xf:header>
                <xf:name>password</xf:name>
                <xf:value/>
            </xf:header>
            <xf:action ev:event="xforms-submit">
                <xf:setvalue ref="instance('i-default')//TEI:entry/@xml:id" value="instance('i-default')//TEI:orth[@type='latin']"/>
                <xf:message ev:event="xforms-submit-done" level="ephemeral">Saving...</xf:message>
            </xf:action>
            <xf:message ev:event="xforms-submit-done" level="ephemeral">Data have been saved.</xf:message>
            <xf:message ev:event="xforms-submit-error">Failed to save data</xf:message>
        </xf:submission>
        <xf:submission id="s-reload-meanings" method="post" replace="instance" validate="false" resource="modules/reload-meanings.xql" ref="instance('i-default')//TEI:entry/TEI:gramGrp[@type='segmentation'][instance('i-meanings')/being-reloaded/@grp/number()]/TEI:m[@type = 'radical' and @n = instance('i-meanings')/being-reloaded/@n]" targetref="instance('i-meanings')/target/TEI:taxonomy">
            <xf:action ev:event="xforms-submit-done">
                <xf:action if="not(instance('i-meanings')/meaning[@grp=instance('i-meanings')/being-reloaded/@grp and @n=instance('i-meanings')/being-reloaded/@n])">
                    <xf:insert context="instance('i-meanings')" nodeset="*[last()]" origin="instance('i-meanings')/template/meaning"/>
                    <xf:setvalue ref="instance('i-meanings')/meaning[@grp='0']/@n" value="instance('i-meanings')/being-reloaded/@n"/>
                    <xf:setvalue ref="instance('i-meanings')/meaning[@grp='0']/@grp" value="instance('i-meanings')/being-reloaded/@grp"/>
                </xf:action>
                <xf:delete context="instance('i-meanings')/meaning[@grp=instance('i-meanings')/being-reloaded/@grp and @n=instance('i-meanings')/being-reloaded/@n]" nodeset="*"/>
                <xf:insert context="instance('i-meanings')/meaning[@grp=instance('i-meanings')/being-reloaded/@grp and @n=instance('i-meanings')/being-reloaded/@n]" origin="instance('i-meanings')/target/*"/>
                <xf:delete context="instance('i-meanings')/target/TEI:taxonomy" nodeset="*|@*"/>
            </xf:action>
            <xf:message ev:event="xforms-submit-error" level="ephemeral">Meanings reload failed.</xf:message>
        </xf:submission>
        <xf:action ev:event="xforms-ready">
            <xf:send submission="s-load-data" if="bf:appContext('id') != ''"/>
            <script>
                clearAndInitAutocompletes();
            </script>
        </xf:action>
    </xf:model>
    <xf:group>
        <xf:input ref="//TEI:usg" id="x-dialects">
            <xf:label>Hidden Control</xf:label>
            <xf:action ev:event="callback">
                <xf:setvalue ref="." value="event('dialects')"/>
            </xf:action>
        </xf:input>
    </xf:group>
    <xf:group id="load-subform-group">
        <xf:action ev:event="load-subform-event" if="string-length(instance('i-controller')/morpheme) &gt; 0">
            <xf:load show="embed" targetid="mountpoint">
                <xf:resource value="concat('meanings.xhtml?morpheme=', instance('i-controller')/morpheme,'#xforms')"/>
                <xf:extension includeCSS="false" includeScript="false"/>
            </xf:load>
            <bfc:show dialog="meanings"/>
        </xf:action>
        <xf:action ev:event="load-subform-event" if="string-length(instance('i-controller')/morpheme) = 0">
            <xf:load show="embed" targetid="mountpoint">
                <xf:resource value="'meanings.xhtml#xforms'"/>
                <xf:extension includeCSS="false" includeScript="false"/>
            </xf:load>
            <bfc:show dialog="meanings"/>
        </xf:action>
    </xf:group>
</div>

<header>
    <div class="tp-row">
        <h1 class="tp-column-fullwidth tp-headline">LGPN-Ling Editor</h1>
    </div>
</header>

<main>
    <!-- begin section general -->
    <section class="tp-section">
        <div class="tp-row">
            <h2 class="tp-width-sidebar">Name in Context</h2>
            <div class="tp-width-main">
                <fieldset class="form-horizontal" id="general">
                    <div class="tp-form-group-col">
                        <label class="tp-label">Greek</label>
                        <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='greek']">
                            <xf:hint>Greek</xf:hint>
                        </xf:input>
                    </div>
                    <div class="tp-form-group-col">
                        <label class="tp-label">Latin</label>
                        <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='latin']">
                            <xf:hint>Latin</xf:hint>
                        </xf:input>
                    </div>
                    <div class="tp-form-group-col">
                        <label class="tp-label">LGPN</label>
                        <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='lgpn']">
                            <xf:hint>LGPN variant (if differs)</xf:hint>
                        </xf:input>
                    </div>
                    <div class="tp-form-group-col">
                        <label class="tp-label">H-Variant</label>
                        <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='h-variant']">
                            <xf:hint>Latin variant (with parentheses)</xf:hint>
                        </xf:input>
                    </div>
                    <div class="tp-form-group-col">
                        <label class="tp-label">Classification</label>
                        <xf:select class="tp-input" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@type='fictitious']" appearance="full">
                            <xf:itemset nodeset="instance('i-fictitious')//option">
                                <xf:label ref="."/>
                                <xf:value ref="."/>
                            </xf:itemset>
                        </xf:select>
                    </div>
                    <div class="tp-form-group-col">
                        <label class="tp-label">Classification</label>
                        <xf:select class="tp-input" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@type='GPR']" appearance="full">
                            <xf:itemset nodeset="instance('i-gpr')//option">
                                <xf:label ref="."/>
                                <xf:value ref="."/>
                            </xf:itemset>
                        </xf:select>
                    </div>
                    <div class="tp-form-group-col">
                        <label class="tp-label">Sublemma</label>
                        <xf:select1 class="tp-input -form-control" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@type='sublemma']">
                            <xf:itemset nodeset="instance('i-sublemma')//option">
                                <xf:label ref="."/>
                                <xf:value ref="@xml:id"/>
                            </xf:itemset>
                        </xf:select1>
                    </div>

                    <div class="tp-form-group-col">
                        <label class="tp-label">Polysemic</label>
                        <xf:select class="tp-input" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@ana]" appearance="full">
                            <xf:itemset nodeset="instance('i-polysemic')//option">
                                <xf:label ref="."/>
                                <xf:value ref="."/>
                            </xf:itemset>
                        </xf:select>
                    </div>
                </fieldset>

                <div class="tp-section-divider"/>

                <div class="tp-row">
                    <div class="tp-row tp-repeat-add">
                        <xf:label class="tp-form-header">
                            <h4 class="tp-row tp-repeat-headline">Significant relative name</h4>
                        </xf:label>
                        <div class="tp-repeat-button-left">
                            <div class="tp-button-row tp-add">
                                <label>Add name</label>
                                <xf:trigger class="-btn -btn-default">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-plus"/>
                                    </xf:label>
                                    <xf:insert context="//TEI:entry" nodeset="TEI:re" origin="instance('i-template')//TEI:re"/>
                                    <script>
                                        clearAndInitAutocompletes();
                                    </script>
                                </xf:trigger>
                            </div>
                        </div>
                    </div>

                    <xf:group ref="//TEI:re">
                        <div class="tp-form-group-col">
                            <label class="tp-label">Relation</label>
                            <xf:select1 class="tp-input -form-control" ref="//TEI:re//TEI:lbl">
                                <xf:itemset nodeset="instance('i-relations')//option">
                                    <xf:label ref="."/>
                                    <xf:value ref="@xml:id"/>
                                </xf:itemset>
                            </xf:select1>
                        </div>

                        <div class="tp-form-group-col">
                            <label class="tp-label">Relative name</label>
                            <xf:input class="tp-input -form-control" ref="//TEI:re//TEI:orth">
                                <xf:hint>Relative name</xf:hint>
                            </xf:input>
                        </div>

                        <div class="tp-row tp-repeat-buttons">
                            <div class="tp-repeat-button-right">
                                <div class="tp-button-row tp-delete">
                                    <label>Delete name</label>
                                    <xf:trigger class="-btn -btn-default">
                                        <xf:label class="input-group-addon">
                                            <i class="glyphicon glyphicon-trash"/>
                                        </xf:label>
                                        <xf:delete nodeset="//TEI:entry//TEI:re"/>
                                    </xf:trigger>
                                </div>
                            </div>
                        </div>
                    </xf:group>
                </div>
            </div>
        </div>
    </section>
    <!-- // end section general -->

    <!-- begin section dialects -->
    <section class="tp-section">
        <div class="tp-row">
            <div class="tp-width-secondary">
                <xf:group ref="//TEI:entry">
                    <xf:group ref="//TEI:gramGrp[@type='classification']">
                        <div class="tp-row tp-repeat-add">
                            <xf:label class="tp-form-header">
                                <h3>Dialects</h3>
                            </xf:label>
                            <div class="tp-repeat-button-left">
                                <div class="tp-button-row tp-add">
                                    <label>Add dialect</label>
                                    <xf:trigger class="-btn -btn-default ">
                                        <xf:label class="input-group-addon">
                                            <i class="glyphicon glyphicon-plus"/>
                                        </xf:label>
                                        <xf:insert context="//TEI:gramGrp[@type='classification']" nodeset="TEI:usg" origin="instance('i-template')//TEI:usg[@type='lang']"/>
                                        <script>
                                            clearAndInitAutocompletes();
                                        </script>
                                    </xf:trigger>
                                </div>
                            </div>

                        </div>

                        <xf:repeat ref="TEI:usg[@type='lang']" id="r-dialect">
                            <xf:label/>
                            <xf:group ref=".">
                                <xf:label/>
                                <div class="tp-row">
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Dialectal/Areal/Bilingual</label>
                                        <xf:select1 class="tp-input -form-control" ref=".">
                                            <xf:label class="input-group-addon"/>
                                            <xf:itemset nodeset="instance('i-dialects')//TEI:category">
                                                <xf:label ref="TEI:catDesc[@xml:lang='en'][@ana='short']"/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select1>
                                    </div>
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Uncertain</label>
                                        <xf:select class="tp-input" ref="@cert" appearance="full" incremental="true">
                                            <xf:label class="input-group-addon"/>
                                            <xf:item>
                                                <xf:label>
                                                    <i class="tp-info">(Check if uncertain)</i>
                                                </xf:label>
                                                <xf:value>low</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </div>
                                </div>
                                <div class="tp-row tp-repeat-buttons">
                                    <div class="tp-repeat-button-right">
                                        <div class="tp-button-row tp-delete">
                                            <label>Delete dialect</label>
                                            <xf:trigger class="-btn -btn-default">
                                                <xf:label class="input-group-addon">
                                                    <i class="glyphicon glyphicon-trash"/>
                                                </xf:label>
                                                <xf:delete nodeset="//TEI:usg[@type='lang'][index('r-dialect')]"/>
                                            </xf:trigger>
                                        </div>
                                    </div>
                                </div>
                            </xf:group>
                        </xf:repeat>
                    </xf:group>

                    <div class="tp-section-divider"/>

                </xf:group>
            </div>
        </div>
    </section>
    <!-- // end section dialects -->

    <!-- begin section name variants -->
    <section class="tp-section">
        <div class="tp-row">
            <div class="tp-width-secondary">
                <xf:group ref="//TEI:entry">
                    <xf:group>
                        <div class="tp-row tp-repeat-add">
                            <xf:label class="tp-form-header">
                                <h3>Name Variants</h3>
                            </xf:label>
                            <div class="tp-repeat-button-left">
                                <div class="tp-button-row tp-add">
                                    <label>Add name variant</label>
                                    <xf:trigger class="-btn -btn-default ">
                                        <xf:label class="input-group-addon">
                                            <i class="glyphicon glyphicon-plus"/>
                                        </xf:label>
                                        <xf:insert context="//TEI:entry" nodeset="TEI:form" origin="instance('i-template')//TEI:form[@type='variant']"/>
                                        <script>
                                            clearAndInitAutocompletes();
                                        </script>
                                    </xf:trigger>
                                </div>
                            </div>
                        </div>

                        <xf:repeat ref="TEI:form[@type='variant']" id="r-nameVariant">
                            <div class="tp-row tp-repeat-headline">
                                <xf:label class="tp-form-header">
                                    <h4>Name Variant</h4>
                                </xf:label>
                            </div>
                            <xf:label/>
                            <xf:group ref=".">
                                <div class="tp-row">
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Linking of the form is uncertain</label>
                                        <xf:select class="tp-input" ref="@cert" appearance="full" incremental="true">
                                            <xf:item>
                                                <xf:label>?</xf:label>
                                                <xf:value>low</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </div>
                                </div>
                                <div class="tp-row">
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Form</label>
                                        <xf:input class="tp-input -form-control" ref="TEI:orth">
                                            <xf:label class="input-group-addon"/>
                                        </xf:input>
                                    </div>
                                    <div class="tp-form-group-col">
                                        <label class="tp-label tp-invisible">Reading of the form is uncertain</label>
                                        <xf:select class="tp-input" ref="TEI:orth/@cert" appearance="full" incremental="true">
                                            <xf:item>
                                                <xf:label>?</xf:label>
                                                <xf:value>low</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </div>
                                </div>

                                <div class="tp-row">
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Gender</label>
                                        <xf:select1 class="tp-input -form-control" ref="TEI:gen">
                                            <xf:label class="input-group-addon"/>
                                            <xf:itemset nodeset="instance('i-genders')//TEI:category">
                                                <xf:label ref="TEI:catDesc[@xml:lang='en'][@ana='short']"/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select1>
                                    </div>
                                </div>
                                <div class="tp-row">
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Dialectal/Areal/Bilingual</label>
                                        <xf:select1 class="tp-input -form-control" ref="TEI:usg">
                                            <xf:label class="input-group-addon"/>
                                            <xf:itemset nodeset="instance('i-dialects')//TEI:category">
                                                <xf:label ref="TEI:catDesc[@xml:lang='en'][@ana='short']"/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select1>
                                    </div>
                                    <div class="tp-form-group-col">
                                        <label class="tp-label">Dialect is uncertain</label>
                                        <xf:select class="tp-input" ref="TEI:usg/@cert" appearance="full" incremental="true">
                                            <xf:item>
                                                <xf:label>?</xf:label>
                                                <xf:value>low</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </div>
                                </div>
                                <xf:label/>
                                <div class="tp-row tp-repeat-buttons">
                                    <div class="tp-repeat-button-right">
                                        <div class="tp-button-row tp-delete">
                                            <label>Delete name variant</label>
                                            <xf:trigger class="-btn -btn-default">
                                                <xf:label class="input-group-addon">
                                                    <i class="glyphicon glyphicon-trash"/>
                                                </xf:label>
                                                <xf:delete nodeset="//TEI:form[@type='variant'][index('r-nameVariant')]"/>
                                            </xf:trigger>
                                        </div>
                                    </div>
                                </div>
                            </xf:group>

                            <div class="tp-section-divider"/>

                        </xf:repeat>
                    </xf:group>
                </xf:group>
            </div>
        </div>
    </section>
    <!-- // end section name variants -->

    <!-- begin section segmentation -->
    <section class="tp-section">
        <div class="tp-row">
            <h2 class="tp-width-sidebar">Segmentation and Semantics</h2>
            <div class="tp-width-secondary">
                <section class="form-horizontal">
                    <xf:group ref="//TEI:entry">
                        <xf:group>
                            <section class="tp-row tp-repeat-add">
                                <xf:label class="tp-form-header">
                                    <h3>Segmentation Hypothesis</h3>
                                </xf:label>
                                <div class="tp-repeat-button-left">
                                    <div class="tp-button-row tp-add">
                                        <label>Add segmentation hypothesis</label>
                                        <xf:trigger class="-btn -btn-default ">
                                            <xf:label class="input-group-addon">
                                                <i class="glyphicon glyphicon-plus"/>
                                            </xf:label>

                                            <xf:insert context="//TEI:entry" nodeset="TEI:gramGrp" origin="instance('i-template')//TEI:gramGrp[@type='segmentation']"/>
                                            <script>
                                                clearAndInitAutocompletes();
                                            </script>
                                        </xf:trigger>
                                    </div>
                                </div>
                            </section>

                            <xf:repeat ref="TEI:gramGrp[@type='segmentation']" id="r-gramGrp">
                                <div class="tp-row tp-repeat-headline">
                                    <xf:label class="tp-form-header">
                                        <h4>General Characteristics</h4>
                                    </xf:label>
                                </div>
                                <xf:label/>
                                <xf:group ref=".">
                                    <!-- gen. characteristic l.1 -->
                                    <section class="tp-row">
                                        <div class="tp-form-group-col">
                                            <label class="tp-label">Certainty</label>
                                            <xf:input class="tp-input -form-control" ref="@cert">
                                                <xf:label class="input-group-addon"/>
                                            </xf:input>
                                        </div>
                                        <div class="tp-form-group-col">
                                            <div class="row">
                                                <div class="col-xs-8">
                                                    <label class="tp-label">Complex Structuration and Semantics</label>
                                                    <xf:select1 class=" -form-control tp-input" ref="@subtype">
                                                        <xf:label class="input-group-addon"/>
                                                        <xf:itemset nodeset="instance('i-classification')//option">
                                                            <xf:label ref="."/>
                                                            <xf:value ref="@xml:id"/>
                                                        </xf:itemset>
                                                    </xf:select1>
                                                </div>
                                                <div class="col-xs-4">
                                                    <label class="tp-label">Struct. uncertain</label>
                                                    <xf:select class="" ref="@ana" appearance="full">
                                                        <xf:label class="input-group-addon"/>
                                                        <xf:itemset nodeset="instance('i-name-characteristic')//option">
                                                            <xf:label ref="."/>
                                                            <xf:value ref="."/>
                                                        </xf:itemset>
                                                    </xf:select>
                                                </div>
                                            </div>
                                        </div>

                                    </section>

                                    <div class="tp-divider"/>


                                    <h4>Preroot</h4>

                                    <!-- Preroot -->
                                    <section class="tp-form-group-col">
                                        <label class="tp-label">Preconstituent</label>
                                        <xf:input class="hidden" ref="TEI:m[@type = 'prefix' and @n = 1]">
                                            <xf:action ev:event="constituent_autocomplete-callback">
                                                <xf:setvalue ref="." value="event('termValue')"/>
                                            </xf:action>
                                            <xf:label class="input-group-addon">preconstituent</xf:label>
                                            <xf:alert>no whitespace allowed</xf:alert>
                                        </xf:input>
                                        <input type="hidden" class="tp-input" data-function="constituent_autocomplete" placeholder="Type to search ..." autocomplete="off"/>

                                        <xf:trigger class="hidden constituent_autocomplete-callback">
                                            <xf:label/>
                                            <xf:action ev:event="DOMActivate">
                                                <xf:setvalue ref="" value=""/>
                                                <xf:dispatch name="" targetid=""/>
                                            </xf:action>
                                        </xf:trigger>
                                    </section>
                                    <section class="tp-form-group-col">
                                        <label class="tp-label">Preroot</label>
                                        <xf:input class="hidden" ref="TEI:m[@type = 'prefix' and @n = 1]/@baseForm">
                                            <xf:action ev:event="autocomplete-callback">
                                                <xf:setvalue ref="." value="event('termValue')"/>
                                            </xf:action>
                                            <xf:label class="input-group-addon">root</xf:label>
                                            <xf:action ev:event="xforms-value-changed">
                                                <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="count(context()/preceding::TEI:gramGrp[@type='segmentation'])+1"/>
                                                <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="3"/>
                                                <xf:send submission="s-reload-meanings"/>
                                            </xf:action>
                                        </xf:input>
                                        <input type="hidden" class="tp-input" data-function="autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                    </section>


                                    <!-- Preroot functions -->
                                    <section class="tp-row tp-row-input-group">
                                        <label class="tp-label">Preroot (prefix)</label>
                                        <xf:select class="tp-input-1-row-2-col" ref="TEI:m[@type = 'prefix' and @n = 1]/@function" appearance="full" incremental="true">
                                            <xf:label/>
                                            <xf:item>
                                                <xf:label>Verb</xf:label>
                                                <xf:value>V</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>VAdj</xf:label>
                                                <xf:value>VAdj</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Part</xf:label>
                                                <xf:value>Part</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Agt Noun</xf:label>
                                                <xf:value>AgtN</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Act Noun</xf:label>
                                                <xf:value>ActN</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Noun</xf:label>
                                                <xf:value>N</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Adj</xf:label>
                                                <xf:value>Adj</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Pron</xf:label>
                                                <xf:value>Pro</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Adv</xf:label>
                                                <xf:value>Adv</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </section>

                                    <!-- Preroot rest -->
                                    <section class="tp-row">
                                        <div class="tp-column-3">
                                            <label class="tp-label">Headedness classification</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'prefix' and @n = 1]/@subtype" appearance="full">
                                                <xf:label class="input-group-addon">head.</xf:label>
                                                <xf:itemset nodeset="instance('i-headedness')//option">
                                                    <xf:label ref="."/>
                                                    <xf:value ref="@xml:id"/>
                                                </xf:itemset>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Abbreviation marker</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'prefix' and @n = 1]/@ana" appearance="full" incremental="true">
                                                <xf:item>
                                                    <xf:label>Abbr</xf:label>
                                                    <xf:value>Abbr</xf:value>
                                                </xf:item>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Class marker</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'prefix' and @n = 1]/@cert" appearance="full" incremental="true">
                                                <xf:item>
                                                    <xf:label>*</xf:label>
                                                    <xf:value>unattested</xf:value>
                                                </xf:item>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Linked compound</label>
                                            <xf:input class="tp-input -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]/@corresp">
                                                <xf:label class="input-group-addon">
                                                    <span class="glyphicon glyphicon-tag"/>
                                                </xf:label>
                                                <xf:hint>e.g. linked compound</xf:hint>
                                            </xf:input>
                                        </div>
                                    </section>

                                    <!-- Preroot other -->

                                    <div class="tp-divider"/>

                                    <h4>Root 1</h4>

                                    <!-- Root 1 constituent -->
                                    <section class="tp-form-group-col">
                                        <label class="tp-label">Constituent 1</label>
                                        <xf:input class="hidden" ref="TEI:m[@type = 'radical' and @n = 1]">
                                            <xf:action ev:event="constituent_autocomplete-callback">
                                                <xf:setvalue ref="." value="event('termValue')"/>
                                            </xf:action>
                                            <xf:label class="input-group-addon">constituent 1</xf:label>
                                            <xf:alert>no whitespace allowed</xf:alert>
                                        </xf:input>
                                        <input type="hidden" class="tp-input" data-function="constituent_autocomplete" placeholder="Type to search ..." autocomplete="off"/>

                                        <xf:trigger class="hidden constituent_autocomplete-callback">
                                            <xf:label/>
                                            <xf:action ev:event="DOMActivate">
                                                <xf:setvalue ref="" value=""/>
                                                <xf:dispatch name="" targetid=""/>
                                            </xf:action>
                                        </xf:trigger>
                                    </section>
                                    <!-- Root 1 -->
                                    <section class="tp-form-group-col">
                                        <label class="tp-label">Root 1</label>
                                        <xf:input class="hidden" ref="TEI:m[@type = 'radical' and @n = 1]/@baseForm">
                                            <xf:action ev:event="autocomplete-callback">
                                                <xf:setvalue ref="." value="event('termValue')"/>
                                            </xf:action>
                                            <xf:label class="input-group-addon">root</xf:label>
                                            <xf:action ev:event="xforms-value-changed">
                                                <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="count(context()/preceding::TEI:gramGrp[@type='segmentation'])+1"/>
                                                <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="1"/>
                                                <xf:send submission="s-reload-meanings"/>
                                            </xf:action>
                                        </xf:input>
                                        <input type="hidden" class="tp-input" data-function="autocomplete" placeholder="Type to search ..." autocomplete="off"/>

                                    </section>
                                    <!-- Root 1  add morpheme -->
                                    <section class="tp-row tp-repeat-buttons">
                                        <div class="tp-repeat-button-right">
                                            <div class="tp-button-row tp-add">
                                                <label>Add root</label>
                                                <xf:trigger class="-btn -btn-default">
                                                    <xf:label class="input-group-addon">
                                                        <i class="glyphicon glyphicon-plus"/>
                                                    </xf:label>
                                                    <xf:action ev:event="DOMActivate">
                                                        <xf:setvalue ref="instance('i-controller')/morpheme" value="instance('i-default')//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:m[@type = 'radical' and @n = 1]/@baseForm"/>
                                                        <xf:dispatch name="load-subform-event" targetid="load-subform-group"/>
                                                    </xf:action>
                                                </xf:trigger>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Meanings 1 -->
                                    <section class="tp-row tp-row-input-group">
                                        <label class="tp-label">Meanings 1</label>
                                        <div class="col-xs-6">
                                            <div class="semantic_tags">
                                                <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <span class="glyphicon glyphicon-tasks"/>
                                                                    meanings
                                                                </span><!--<input class="tags" value="" disabled="disabled"/>-->
                                                    <span class="meanings-val">
                                                                    <xf:repeat nodeset="instance('i-meanings')/meaning[@grp=count(current()/preceding::TEI:gramGrp[@type='segmentation'])+1 and @n=1]//TEI:category" id="r-meanings-1">
                                                                        <xf:output ref="TEI:catDesc[@xml:lang='en']"/>
                                                                    </xf:repeat>
                                                                </span>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Root 1 functions -->
                                    <section class="tp-row tp-row-input-group">
                                        <label class="tp-label">Function 1</label>
                                        <xf:select ref="TEI:m[@type = 'radical' and @n = 1]/@function" appearance="full" incremental="true">
                                            <xf:item>
                                                <xf:label>Verb</xf:label>
                                                <xf:value>V</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>VAdj</xf:label>
                                                <xf:value>VAdj</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Part</xf:label>
                                                <xf:value>Part</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Agt Noun</xf:label>
                                                <xf:value>AgtN</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Act Noun</xf:label>
                                                <xf:value>ActN</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Noun</xf:label>
                                                <xf:value>N</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Adj</xf:label>
                                                <xf:value>Adj</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Pron</xf:label>
                                                <xf:value>Pro</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Adv</xf:label>
                                                <xf:value>Adv</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </section>

                                    <!-- Root 1 rest -->
                                    <section class="tp-row">
                                        <div class="tp-column-3">
                                            <label class="tp-label">Headedness classification 1</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'radical' and @n = 1]/@subtype" appearance="full">
                                                <xf:label class="input-group-addon">head.</xf:label>
                                                <xf:itemset nodeset="instance('i-headedness')//option">
                                                    <xf:label ref="."/>
                                                    <xf:value ref="@xml:id"/>
                                                </xf:itemset>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Abbreviation marker</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'radical' and @n = 1]/@ana" appearance="full" incremental="true">
                                                <xf:item>
                                                    <xf:label>Abbr</xf:label>
                                                    <xf:value>Abbr</xf:value>
                                                </xf:item>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Class marker</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'radical' and @n = 1]/@cert" appearance="full" incremental="true">
                                                <xf:item>
                                                    <xf:label>*</xf:label>
                                                    <xf:value>unattested</xf:value>
                                                </xf:item>
                                            </xf:select>
                                        </div>
                                        <div class="tp-column-3">
                                            <label class="tp-label">Linked compound</label>
                                            <xf:input class="tp-input -form-control" ref="TEI:m[@type = 'radical' and @n = 1]/@corresp">
                                                <xf:label class="input-group-addon">
                                                    <span class="glyphicon glyphicon-tag"/>
                                                </xf:label>
                                                <xf:hint>e.g. linked compound</xf:hint>
                                            </xf:input>
                                        </div>
                                    </section>

                                    <div class="tp-divider"/>

                                    <h4>Root 2</h4>

                                    <!-- Root 2 constituent -->
                                    <section class="tp-form-group-col">
                                        <label class="tp-label">Constituent 2</label>
                                        <xf:input class="hidden" ref="TEI:m[@type = 'radical' and @n = 2]">
                                            <xf:action ev:event="constituent_autocomplete-callback">
                                                <xf:setvalue ref="." value="event('termValue')"/>
                                            </xf:action>
                                            <xf:label class="input-group-addon">constituent 2</xf:label>
                                            <xf:alert>no whitespace allowed</xf:alert>
                                        </xf:input>
                                        <input type="hidden" class="tp-input" data-function="constituent_autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                    </section>

                                    <!-- Root 2 -->
                                    <section class="tp-form-group-col">
                                        <label class="tp-label">Root 2</label>
                                        <xf:input class="hidden" ref="TEI:m[@type = 'radical' and @n = 2]/@baseForm">
                                            <xf:action ev:event="autocomplete-callback">
                                                <xf:setvalue ref="." value="event('termValue')"/>
                                            </xf:action>
                                            <xf:label class="input-group-addon">root</xf:label>
                                            <xf:action ev:event="xforms-value-changed">
                                                <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="count(context()/preceding::TEI:gramGrp[@type='segmentation'])+1"/>
                                                <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="2"/>
                                                <xf:send submission="s-reload-meanings"/>
                                            </xf:action>
                                        </xf:input>
                                        <input type="hidden" class="tp-input" data-function="autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                    </section>

                                    <!-- Root 2 add morpheme -->
                                    <section class="tp-row tp-repeat-buttons">
                                        <div class="tp-repeat-button-right">
                                            <div class="tp-button-row tp-add">
                                                <label>Add root</label>
                                                <xf:trigger class="-btn -btn-default">
                                                    <xf:label class="input-group-addon">
                                                        <i class="glyphicon glyphicon-plus"/>
                                                    </xf:label>
                                                    <xf:action ev:event="DOMActivate">
                                                        <xf:setvalue ref="instance('i-controller')/morpheme" value="instance('i-default')//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:m[@type = 'radical' and @n = 2]/@baseForm"/>
                                                        <xf:dispatch name="load-subform-event" targetid="load-subform-group"/>
                                                    </xf:action>
                                                </xf:trigger>
                                            </div>
                                        </div>
                                    </section>

                                    <!-- Meanings 2 -->
                                    <section class="tp-row tp-row-input-group">
                                        <label class="tp-label">Meanings 2</label>
                                        <div class="col-xs-6">
                                            <div class="semantic_tags">
                                                <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <span class="glyphicon glyphicon-tasks"/>
                                                                    meanings
                                                                </span><!--<input class="tags" value="" disabled="disabled"/>-->
                                                    <span class="meanings-val">
                                                                    <xf:repeat nodeset="instance('i-meanings')/meaning[@grp=count(current()/preceding::TEI:gramGrp[@type='segmentation'])+1 and @n=2]//TEI:category" id="r-meanings-2">
                                                                        <xf:output ref="TEI:catDesc[@xml:lang='en']"/>
                                                                    </xf:repeat>
                                                                </span>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <!-- Root 2 functions -->
                                    <section class="tp-row tp-row-input-group">
                                        <label class="tp-label">Function 2</label>
                                        <xf:select ref="TEI:m[@type = 'radical' and @n = 2]/@function" appearance="full" incremental="true">
                                            {                                       <xf:item>
                                            <xf:label>Verb</xf:label>
                                            <xf:value>V</xf:value>
                                        </xf:item>
                                            <xf:item>
                                                <xf:label>VAdj</xf:label>
                                                <xf:value>VAdj</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Part</xf:label>
                                                <xf:value>Part</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Agt Noun</xf:label>
                                                <xf:value>AgtN</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Act Noun</xf:label>
                                                <xf:value>ActN</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Noun</xf:label>
                                                <xf:value>N</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Adj</xf:label>
                                                <xf:value>Adj</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Pron</xf:label>
                                                <xf:value>Pro</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Adv</xf:label>
                                                <xf:value>Adv</xf:value>
                                            </xf:item>
                                        </xf:select>
                                    </section>

                                    <!-- Root 2 rest -->
                                    <section class="tp-row">
                                        <div class="tp-column-3">
                                            <label class="tp-label">Headedness classification 2</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'radical' and @n = 2]/@subtype" appearance="full">
                                                <xf:label class="input-group-addon">head.</xf:label>
                                                <xf:itemset nodeset="instance('i-headedness')//option">
                                                    <xf:label ref="."/>
                                                    <xf:value ref="@xml:id"/>
                                                </xf:itemset>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Abbreviation marker</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'radical' and @n = 2]/@ana" appearance="full" incremental="true">
                                                <xf:item>
                                                    <xf:label>Abbr</xf:label>
                                                    <xf:value>Abbr</xf:value>
                                                </xf:item>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Class marker</label>
                                            <xf:select class="tp-input" ref="TEI:m[@type = 'radical' and @n = 2]/@cert" appearance="full" incremental="true">
                                                <xf:item>
                                                    <xf:label>*</xf:label>
                                                    <xf:value>unattested</xf:value>
                                                </xf:item>
                                            </xf:select>
                                        </div>

                                        <div class="tp-column-3">
                                            <label class="tp-label">Linked compound</label>
                                            <xf:input class="tp-input -form-control" ref="TEI:m[@type = 'radical' and @n = 2]/@corresp">
                                                <xf:label class="input-group-addon">
                                                    <span class="glyphicon glyphicon-tag"/>
                                                </xf:label>
                                                <xf:hint>e.g. linked compound</xf:hint>
                                            </xf:input>
                                        </div>
                                    </section>

                                    <h4>Suffixes</h4>

                                    <!-- Suffixes -->
                                    <section class="tp-row">
                                        <div class="tp-form-group-col">
                                            <label class="tp-label">Suffix 4</label>
                                            <xf:select1 class="tp-input -form-control" ref="TEI:m[@type = 'suffix' and @n = '4']">
                                                <xf:label class="input-group-addon">suffix 4</xf:label>
                                                <xf:itemset nodeset="instance('i-suffix-4')/option">
                                                    <xf:label ref="."/>
                                                    <xf:value ref="."/>
                                                </xf:itemset>
                                            </xf:select1>
                                        </div>
                                        <div class="tp-form-group-col">
                                            <label class="tp-label">Suffix 3</label>
                                            <xf:select1 class="tp-input -form-control" ref="TEI:m[@type = 'suffix' and @n = '3']">
                                                <xf:label class="input-group-addon">suffix 3</xf:label>
                                                <xf:itemset nodeset="instance('i-suffix-3')/option">
                                                    <xf:label ref="."/>
                                                    <xf:value ref="."/>
                                                </xf:itemset>
                                            </xf:select1>
                                        </div>
                                        <div class="tp-form-group-col">
                                            <label class="tp-label">Suffix 2</label>
                                            <xf:select1 class="tp-input -form-control" ref="TEI:m[@type = 'suffix' and @n = '2']">
                                                <xf:label class="input-group-addon">suffix 2</xf:label>
                                                <xf:itemset nodeset="instance('i-suffix-2')/option">
                                                    <xf:label ref="."/>
                                                    <xf:value ref="."/>
                                                </xf:itemset>
                                            </xf:select1>
                                        </div>
                                        <div class="tp-form-group-col">
                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Inflect</label>
                                                    <xf:select1 class="tp-input -form-control" ref="TEI:m[@type = 'suffix' and @n = '1']">
                                                        <xf:label class="input-group-addon">inflex 1</xf:label>
                                                        <xf:itemset nodeset="instance('i-suffix-1')/option">
                                                            <xf:label ref="base"/>
                                                            <xf:value ref="base"/>
                                                        </xf:itemset>
                                                    </xf:select1>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Suffix 1</label>
                                                    <xf:select class="tp-input" ref="TEI:m[@type = 'suffix' and @n = 1]/@subtype" appearance="full" incremental="true">
                                                        <xf:item>
                                                            <xf:label>Suffix 1</xf:label>
                                                            <xf:value>suff</xf:value>
                                                        </xf:item>
                                                    </xf:select>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <div class="tp-section-divider"/>

                                    <!--- Bibliography -->

                                    <section class="tp-row tp-repeat-headline">
                                        <h4 class="h3">Lexical Connections</h4>
                                    </section>
                                    <xf:group>
                                        <section class="tp-row tp-repeat-add">
                                            <h5 class="h4 tp-repeat-headline">Lexical or Lexicographic Significant Sources</h5>
                                            <div class="tp-repeat-button-left">
                                                <div class="tp-button-row tp-add">
                                                    <label>Add significant source</label>
                                                    <xf:trigger class="-btn -btn-default ">
                                                        <xf:label class="input-group-addon">
                                                            <i class="glyphicon glyphicon-plus"/>
                                                        </xf:label>
                                                        <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='source']"/>
                                                        <script>
                                                            clearAndInitAutocompletes();
                                                        </script>
                                                    </xf:trigger>
                                                </div>
                                            </div>
                                        </section>

                                        <xf:repeat ref="TEI:listBibl/TEI:cit[@type='source']" id="r-cit-source">
                                            <xf:label/>
                                            <div class="tp-row tp-repeat-headline">
                                                <xf:label class="tp-form-header">
                                                    <h6 class="h5">Source</h6>
                                                </xf:label>
                                            </div>
                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Quote</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:quote">
                                                        <xf:label class="input-group-addon">quote</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Reference</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref">
                                                        <xf:label class="input-group-addon">reference</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Author</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:bibl/TEI:author">
                                                        <xf:label class="input-group-addon">author</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Details</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:span">
                                                        <xf:label class="input-group-addon">details</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Link</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref/@target">
                                                        <xf:label class="input-group-addon">link</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row tp-repeat-buttons">
                                                <div class="tp-repeat-button-right">
                                                    <div class="tp-button-row tp-delete">
                                                        <label>Delete significant source</label>
                                                        <xf:trigger class="-btn -btn-default">
                                                            <xf:label class="input-group-addon">
                                                                <i class="glyphicon glyphicon-trash"/>
                                                            </xf:label>
                                                            <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='source'][index('r-cit-source')]"/>
                                                        </xf:trigger>
                                                    </div>
                                                </div>
                                            </div>
                                        </xf:repeat>
                                    </xf:group>

                                    <xf:group>
                                        <section class="tp-row tp-repeat-add">
                                            <h5 class="h4 tp-repeat-headline">
                                                References in Modern Lexicology and Linguistics
                                            </h5>
                                            <div class="tp-repeat-button-left">
                                                <div class="tp-button-row tp-add">
                                                    <label>Add reference</label>
                                                    <xf:trigger class="-btn -btn-default ">
                                                        <xf:label class="input-group-addon">
                                                            <i class="glyphicon glyphicon-plus"/>
                                                        </xf:label>
                                                        <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='auxiliary']"/>
                                                        <script>
                                                            clearAndInitAutocompletes();
                                                        </script>
                                                    </xf:trigger>
                                                </div>
                                            </div>
                                        </section>

                                        <xf:repeat ref="TEI:listBibl/TEI:cit[@type='auxiliary']" id="r-cit-auxiliary">
                                            <xf:label/>
                                            <div class="tp-row tp-repeat-headline">
                                                <xf:label class="tp-form-header">
                                                    <h6 class="h5">Reference</h6>
                                                </xf:label>
                                            </div>

                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Quote</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:quote">
                                                        <xf:label class="input-group-addon">quote</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Reference</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref">
                                                        <xf:label class="input-group-addon">reference</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Author</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:bibl/TEI:author">
                                                        <xf:label class="input-group-addon">author</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Details</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:span">
                                                        <xf:label class="input-group-addon">details</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Link</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref/@target">
                                                        <xf:label class="input-group-addon">link</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row tp-repeat-buttons">
                                                <div class="tp-repeat-button-right">
                                                    <div class="tp-button-row tp-delete">
                                                        <label>Delete reference</label>
                                                        <xf:trigger class="-btn -btn-default">
                                                            <xf:label class="input-group-addon">
                                                                <i class="glyphicon glyphicon-trash"/>
                                                            </xf:label>
                                                            <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='auxiliary'][index('r-cit-auxiliary')]"/>
                                                        </xf:trigger>
                                                    </div>
                                                </div>
                                            </div>
                                        </xf:repeat>
                                    </xf:group>

                                    <div class="tp-section-divider"/>

                                    <section class="tp-row tp-repeat-headline">
                                        <h4 class="h3">
                                            Onomastics
                                        </h4>
                                    </section>

                                    <xf:group>
                                        <section class="tp-row tp-repeat-add">
                                            <h5 class="h4 tp-repeat-headline">Linked Sources</h5>
                                            <div class="tp-repeat-button-left">
                                                <div class="tp-button-row tp-add">
                                                    <label>Add linked source</label>
                                                    <xf:trigger class="-btn -btn-default ">
                                                        <xf:label class="input-group-addon">
                                                            <i class="glyphicon glyphicon-plus"/>
                                                        </xf:label>
                                                        <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='linguistic']"/>
                                                        <script>
                                                            clearAndInitAutocompletes();
                                                        </script>
                                                    </xf:trigger>
                                                </div>
                                            </div>
                                        </section>

                                        <xf:repeat ref="TEI:listBibl/TEI:cit[@type='linguistic']" id="r-cit-linguistic">
                                            <xf:label/>
                                            <div class="tp-row tp-repeat-headline">
                                                <xf:label class="tp-form-header">
                                                    <h6 class="h5">Linked Source</h6>
                                                </xf:label>
                                            </div>

                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Quote</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:quote">
                                                        <xf:label class="input-group-addon">quote</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Reference</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref">
                                                        <xf:label class="input-group-addon">reference</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Author</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:bibl/TEI:author">
                                                        <xf:label class="input-group-addon">author</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Details</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:span">
                                                        <xf:label class="input-group-addon">details</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Link</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref/@target">
                                                        <xf:label class="input-group-addon">link</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row tp-repeat-buttons">
                                                <div class="tp-repeat-button-right">
                                                    <div class="tp-button-row tp-delete">
                                                        <label>Delete linked source</label>
                                                        <xf:trigger class="-btn -btn-default">
                                                            <xf:label class="input-group-addon">
                                                                <i class="glyphicon glyphicon-trash"/>
                                                            </xf:label>
                                                            <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='linguistic'][index('r-cit-linguistic')]"/>
                                                        </xf:trigger>
                                                    </div>
                                                </div>
                                            </div>
                                        </xf:repeat>
                                    </xf:group>

                                    <xf:group>
                                        <section class="tp-row tp-repeat-add">
                                            <h5 class="h4 tp-repeat-headline">Modern References</h5>
                                            <div class="tp-repeat-button-left">
                                                <div class="tp-button-row tp-add">
                                                    <label>Add modern reference</label>
                                                    <xf:trigger class="-btn -btn-default ">
                                                        <xf:label class="input-group-addon">
                                                            <i class="glyphicon glyphicon-plus"/>
                                                        </xf:label>
                                                        <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='modern']"/>
                                                        <script>
                                                            clearAndInitAutocompletes();
                                                        </script>
                                                    </xf:trigger>
                                                </div>
                                            </div>
                                        </section>

                                        <xf:repeat ref="TEI:listBibl/TEI:cit[@type='modern']" id="r-cit-modern">
                                            <xf:label/>
                                            <div class="tp-row tp-repeat-headline">
                                                <xf:label class="tp-form-header">
                                                    <h6 class="h5">Modern Reference</h6>
                                                </xf:label>
                                            </div>

                                            <div class="tp-row">
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Reference</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref">
                                                        <xf:label class="input-group-addon">reference</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Author</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:bibl/TEI:author">
                                                        <xf:label class="input-group-addon">author</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Details</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:span">
                                                        <xf:label class="input-group-addon">details</xf:label>
                                                    </xf:input>
                                                </div>
                                                <div class="tp-form-group-col">
                                                    <label class="tp-label">Link</label>
                                                    <xf:input class="tp-input -form-control" ref="TEI:ref/@target">
                                                        <xf:label class="input-group-addon">link</xf:label>
                                                    </xf:input>
                                                </div>
                                            </div>
                                            <div class="tp-row tp-repeat-buttons">
                                                <div class="tp-repeat-button-right">
                                                    <div class="tp-button-row tp-delete">
                                                        <label>Delete modern reference</label>
                                                        <xf:trigger class="-btn -btn-default">
                                                            <xf:label class="input-group-addon">
                                                                <i class="glyphicon glyphicon-trash"/>
                                                            </xf:label>
                                                            <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='modern'][index('r-cit-modern')]"/>
                                                        </xf:trigger>
                                                    </div>
                                                </div>
                                            </div>
                                        </xf:repeat>
                                    </xf:group>
                                    <!--- /Bibliography -->

                                    <div class="tp-divider"/>

                                    <!-- delete segmentation -->
                                    <div class="tp-row tp-repeat-buttons">
                                        <div class="tp-repeat-button-right">
                                            <div class="tp-button-row tp-delete">
                                                <label>
                                                    <b>Delete segmentation hypothesis</b>
                                                </label>
                                                <xf:trigger class="-btn -btn-default">
                                                    <xf:label class="input-group-addon">
                                                        <i class="glyphicon glyphicon-trash"/>
                                                    </xf:label>
                                                    <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]"/>
                                                </xf:trigger>
                                            </div>
                                        </div>
                                    </div>

                                </xf:group>
                                <div class="tp-section-divider"/>
                            </xf:repeat>
                        </xf:group>
                        <!-- // end segmentation -->
                    </xf:group>
                </section>
            </div>
        </div>
    </section>

    <section class="tp-section tp-section-save">
        <div class="tp-row">
            <h2 class="tp-width-sidebar">Save Form</h2>
            <div class="tp-width-main">
                <fieldset class="form-horizontal">

                    <div class="tp-row tp-repeat-buttons">
                        <div class="tp-repeat-button-left">
                            <div class="tp-button-row tp-add">
                                <label>
                                    <b>Save form</b>
                                </label>
                                <xf:submit class="-btn -btn-default" submission="s-save-data">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-save"/>
                                    </xf:label>
                                </xf:submit>
                            </div>
                        </div>

                        <div class="tp-repeat-button-right">
                            <div class="tp-button-row tp-delete">
                                <label>
                                            <span>
                                                <b>Cancel form</b>
                                            </span>
                                    <span>Return to the list of names without saving</span>
                                </label>
                                <div class="tp-button-cancel">
                                    <button class="btn btn-default">
                                        <i class="glyphicon glyphicon-log-out"/>
                                        <a href="index.html"/>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </section>
</main>

<bfc:dialog id="meanings" src="meanings.html">
    <xf:label>Add meaning</xf:label>
    <div id="mountpoint"/>
</bfc:dialog>
<div id="confirmDelete" class="modal fade" tabindex="-1" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Confirm delete</h4>
            </div>
            <form class="form form-horizontal" action="index.html?delete=aa" method="POST">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label col-sm-10">you sure want to delete <xf:label ref="bf:appContext('id')"/>?</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </form>
        </div>
    </div>
</div><!-- Modal Dialog -->
<script type="text/javascript" src="resources/js/vendor/jquery.min.js"/>
<script type="text/javascript" src="$shared/resources/scripts/loadsource.js"/>
<script type="text/javascript" src="resources/js/vendor/bootstrap.min.js"/>
<script src="$shared/resources/scripts/jquery/jquery-ui.min.js" type="text/javascript" charset="utf-8"/>
<script type="text/javascript" src="resources/js/vendor/select2/select2.js"/>
<script type="text/javascript" src="resources/js/select2/select2.js"/>
</body>
</html>